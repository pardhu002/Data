Summary:
Summary

Description:
Description



Summary:
Reference Manual: EMV CAM Processing Flag description needs clarification & no consistency when referring to EMV CAM processing 

Description:
Raised on behalf of Colin Davis, Global Learning:
APTRA Advance NDC, Reference Manual (B006-6180-L000 Issue 1)
Page 121 in the PDF (or page 2-35) for the flag

Throughout for the phrase, decide on a standard expression and use it consistently
 
See attached email message



Summary:
IP - Supervisor's Guide: Entering encryption key data explanation

Description:
With CEN-XFS 3 it is a requirement to enter both part1 and part2 of a key when key entry modes 2, 3 or 4 are selected.  The key will not be stored in the encryptor by XFS until both parts are entered. (0.25 day)
 
(From rel. bul for 3.03)



Summary:
Dev Guide DebugLog

Description:
Documentation should explain that a sharing violation occurs if a DebugLog trace is saved with a specified name and an attempt is made subsequently to use the same name.  DebugLog crashes if the specified file name is used more than once.  You can save a DebugLog trace with a specified name and continue tracing; but you cannot subsequently save the trace using the same name. You must use Save As and save the trace with a different name. (From rel. bul. for 3.03)



Summary:
Developer's Guide: Promote coupon configuration for Dot-Matrix Receipt Printers (o/s in rel. bul.)

Description:
The Developer's Guide states (on Page 5-29, PDF Page 197) that when using a dot-matrix receipt printer, the following must be set to ¿ ¿ (empty string):

¿HKLM\SOFTWARE\NCR\Advance NDC\PRINTING\Receipt\GRAPHICS

This stops any attempt to print a coupon. If any other value is used, the path and filename of the coupon is printed.¿

This is incorrect.  Instead, the following must be set to ¿ ¿ (empty string):

HKLM\SOFTWARE\NCR\Advance NDC\PRINTING\Receipt\PROMOTE_COUPON_FORMAT

Also note that for APTRA Promote SST RTL 02.07.01, which does not support multi-vendor coupons, then this should be set to ¿RECEIPT¿.

(taken from release bulletin)





Summary:
TAR 407809: Authoring Guide - Clarify which characters can be used for user IDs

Description:
See TAR
Related to GR1T RFC 441244



Summary:
EJ upload functionality in NDC is clearly in conflict with the EJ init functionality supported through the supv menu

Description:
This stance implies (but is not clarified anywhere else) that NDC will either support EJ upload or EJ init, but never both at the same time 



Summary:
Diebold: Support Diebold Dual Display

Description:
Default is primary display is at rear
- ANDC requires to shift right to use 2nd display at front.
Workaround is to swap displays in graphics control panel but has impact on DBD service procedures - OSD+ is at front etc.
US Edge have option to shift app display.

Impact on promote and display manager etc.



Summary:
Coupon Printing - Receipt printer object not checked properly when printing promote coupon.

Description:
Application is getting crashed when trying to print coupon without receipt printer is connected (changed the Alias name and tested).

IMP_OR_EXP bool IsTwoSidedPaperLoaded()
{

	LPWFSPTRSTATUS PrnStatus;
	mMVReceiptPrinter * printerToUse = mOOXFS::GetReceiptPrinter();
	if( printerToUse != NULL )
...
}

This should have been written like below...

	LPWFSPTRSTATUS PrnStatus = NULL;
	mMVReceiptPrinter * printerToUse = mOOXFS::GetReceiptPrinter();
	if( printerToUse != NULL && printerToUse->IsPresent() )




Summary:
TAR 360974:  BEEPER DOES NOT SOUND WHEN CARD IS RETURNED ON CARD READ STATE.

Description:
BEEPER DOES NOT SOUND WHEN CARD IS RETURNED ON CARD READ STATE.




Summary:
Passbook - STATHAND - Passbook Eject before Cash Dispense during Transaction - If Passbook is Jammed there should be a Solic response to the host (not an unsolic)

Description:
The reason this should be solicited is by the fact that the cash was not presented due to the passbook jam. The host needs to know to reverse this transaction and this typically only done on receipt of a solicited status message.
This is similar to the case of a card before cash transaction where the card eject results in a jam and hence the cash is purged.
In ADI (2.6) the Record.cpp had code in it for reporting this  solicited since the error occurred during Tx and not in Close. However in the migration to 3.3 this functionality seems to have been missed. I have attached the ADI record.cpp : See iNDCStatusMessageThread::Run() and lines of code starting from //Check For Passbook Errors



Summary:
TAR 387348 - Optional Data fields requested are missing from the transaction request

Description:
Customer has an extension state defined for the Transaction Request state. 
   
   As part of that extension state, they request optional data fields.  
   These optional data fields are missing from their transaction request.
   
   Their stateflow is defined as follows :-
   Applica.. 17:42:56.123 [185] [I] Transaction Request
   Applica.. 17:42:56.123       Screen Number           [118]
   Applica.. 17:42:56.123       Response Timeout State #[243]
   Applica.. 17:42:56.123       Send Track 2 Data       [001]
   Applica.. 17:42:56.123       Send Track 1 and/or 3   [000]
   Applica.. 17:42:56.123       Send Operation Code     [001]
   Applica.. 17:42:56.123       Send Amount Data        [001]
   Applica.. 17:42:56.123       Send PIN Buffer         [129]
   Applica.. 17:42:56.123       Send General Buff (or X)[186]
   Applica.. 17:42:56.123    Extension State - Pos [1]
   Applica.. 17:42:56.123       1  2  3  4  5  6  7  8  9
   Applica.. 17:42:56.123       Z003255015063000000000000
   
   1   2   3   4   5   6   7   8  9
   Z 003 255 015 063 000 000 000 000
   063 = 3F  = Q R S T U V
   
   The state flow shows that in the extension state, table entry 5 is defined
   as to  send optional data fields Q R S T U V in the transaction request.
   
   However, these are missing from their transaction request :-
   	10:37:33  # 23    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]17[Unicode-x1C]*************************************[Unicode-x1C][Unicode-x1C]A A   
     [Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]C]
   
   When table entries 3 and 4 are set both to 000, then the fields Q R S V & V
   are then seen in the transaction request :-
   	10:41:42  # 33    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]18[Unicode-x1C]*************************************[Unicode-x1C][Unicode-x1C]A A   
     [Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]Q0                [Unicode-x1D]                [Unicode-x1C]R00000             0    
            [Unicode-x1C]S          [Unicode-x1C]U[Unicode-x1C]V]
   (All fields except T are then sent.) (T is reserved)




Summary:
Envelope depository Doesn't report fatal and 43 INIT DEPOS shows Depository initialised,after opening the interlock

Description:
Build:
AANDC 93.03.00.08
XFS 95.00.00.05

Scenario:
1. Start the Applications and Load APPC,LD
2. Insert card and select Fast Cash, Send the DEP_910 from Reps_1 message file.
3. take the Envelope Dispensed from Dispenser.
4. Depository Shutter gets opend now, Open the safe door/interlock now.
5. Deposit gets failed, Take the card ( Fatal Status message sent to host as below)
 13:18:38  # 81    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F0[Unicode-x1C]4[Unicode-x1C]550000000000010000000001[Unicode-x1C]1]
13:18:39  # 82    [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]F2[Unicode-x1C]4[Unicode-x1C]55[Unicode-x1C]1]

6. Send the GETFIT terminal command now, fitnees show as F0. Fault Display doesn't show anything.
7. Go to Supervor and run 43 INIT Depos in replenish menu , it shows deposit initialised.Sysapp clearly shows depository interlock open message.

There are 3 issues here afer opening the depository interlock ( this is only with interlock scenario , if we do some other Jam/BIn removals, Fitness and INIT depos works as expected)
1. FItness showing as 0 after it went Fatal
2. Fault display doesn't show anything.
3.INIT Depos shows depository initialised.

Logs attached



Summary:
Envelope is not getting retracted after a envelope Suspend condition scenario is cleared

Description:
BUILD:
AANDC 93.03.00.08
XFS 95.00.00.10

Note: This is tested on Seperate Envelope depository/Dispenser.

Scenario:
1. Start the Applications and Load APPC , LD.
2. Insert and card and select Fast cash.
3. Send the DEP_910 reply from reps_1 message file.
4. Envelope is dispensed, don't take it.
5. Hold the Envelope depository Shutter so that it can't open.Card is ejected , machine moves on to suspend state with out retracting the envelope.
6. After 2 minutes ( device suspend time out), depository is cleared,.
7. Send a GIS now, Machine is coming to inservice with out retracting the envelope sp Envelope is still at Exit.

on a Normal scenarion , Envelope is getting retracted in close state when a Succesful deposit is done with out taking the envelope.

Logs attached.



Summary:
TAR 387838 - Incorrect card capture bin status reported on exit from suspend

Description:
Note: This issue has been fixed in ANDC 3.04 under the GR1T 412732.


After a card capture bin overfill condition was reached, the card reader
entered suspend mode (due to a card jam). Upon exit from Suspend, a
unsolicited message was reported to the host and this advised that there was 
no longer an overfill condition on the card reader which was incorrect as
the card reader capture bin had not been emptied and the platform was still
reporting retainbinfull. 
AA-NDC reported an incorrect capture bin status. 

Messageout log :- 
16:08:18 # 38 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]3[Unicode-x1C]130B020839[Unicode-x1C]4] - entry to suspend on jam - 
bin full 
16:13:19 # 39 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]3[Unicode-x1C]1305002839[Unicode-x1C]1] - exit from suspend - no
overfill? 

OOXFS :- 
ApplicationCore 23/09/2008 16:13:19.234 mMVDeviceImp - Received STATUS 
fwDevice = 6 (WFS_CDM_CASHUNITINVALID) 
fwMedia = 2 (WFS_IDC_MEDIANOTPRESENT) 
fwRetainBin = 3 (WFS_IDC_RETAINBINFULL) 
fwSecurity = 1 (WFS_IDC_SECNOTSUPP) 
usCards = 10 
fwChipPower = 5 (WFS_IDC_CHIPNOCARD) 
lpszExtra = <NULL> 

XFS trace :- 
(Date)23.09.2008 (Time)16:13.20,328 
XFS IDC Service Provider, XFS-Framework 
<FREE>Worker hService: 42 (0x0000002a), RequestId: 1262 (0x000004ee)</FREE> 
<F>WFSResultData</F><P> 
<N>statusPtr</N> 
<PTR>78286780</PTR></P><P> 
<N>statusPtr->fwDevice</N> <UI2>0</UI2></P><P> 
<N>statusPtr->fwMedia</N> <UI2>2</UI2></P><P> 
<N>statusPtr->fwRetainBin</N> <UI2>3</UI2></P><P> 

The issue could be recreated as follows :- 
- Enter Supervisor and Clear Cards 
- Perform 10 transactions with the transaction reply set to capture the
card 
- After 10th transaction, the card capture bin full is reported on the EOP 
- Hold card at throat to invoke Suspend 
- 1st Unsolic advising of suspend reported by application 
- Remove card after all card reader retries stop 
- After 5 minutes, 2nd unsolic is generated with incorrect card capture bin
status 

Card Reader settings :- 
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR
Features)\RS232IMCRW\Operational Parameters] 
"ENHANCED SHUTTER SECURITY"=dword:00000001 
"JAMMED THROAT CARD RETURN"=dword:00000001 
"INTERNAL JAMMED CARD RETURN"=dword:00000001 
"CONFIGURE ECD"=dword:00000001 

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR
Features)\SdcMotorisedCardReaderWriter\Operational Parameters] 
"ENHANCED SHUTTER SECURITY"=dword:00000001 
"JAMMED THROAT CARD RETURN"=dword:00000001 
"INTERNAL JAMMED CARD RETURN"=dword:00000001 
"CONFIGURE ECD"=dword:00000001 

LFCC 



Summary:
D450 IX - Two cassettes shown low as lowBillThreshold buffer overrun

Description:
D450 IX cashunit info returns 8 cassette info in which last two cassettes are shown as low.
No mapping of the cassettes is done while cash handler is initialised and lowBillsThreshold is picking up junk values.



Summary:
Wincor: Shutter Jam issues

Description:
Raised by Austrialia PS. Probase 1.0/10
(1) When the dispenser shutter is jammed open and cash is retracted, the host does not detect that cash was retracted, only that the shutter is jammed open.
On an NCR, is the cash retract sent as a separate unsolicited? If so, why don¿t we see it on the Wincor?
If not separate, what field(s) in the message are incorrect causing the host not to recognise that cash was retracted?
(2) When the dispenser shutter jam is still evident on return from the suspense, the dispenser goes fatal, but the message to the host incorrectly contains an Mstatus of 00=No error (need this fixed please!)
(3) Possibly due to the same cause as (2) - Fault Display (FD) and Multi Vendor Diags (MVD) does not show an error when the dispenser is fatal due to a dispenser shutter jam (need this fixed please!)
(4) When the cash is taken but the dispenser shutter is jammed open, the dispenser suspends but there is no message to the host to indicate this (need this fixed please!)





Summary:
TAR 410732 - Paper low unsolic status message different to previous versions

Description:
Customer testing on Self Serv atm with paper low statuses being returned
noticed that the relevant M-Data information was not always present in the
unsolicited message being sent.
See the STAR for more details.



Summary:
Depository MEI does not turn off when envelope taken and shutter held open

Description:
Spotted by Aparna on combined depository/dispenser

MEIs should turn off as ssson as failure detected



Summary:
Difference in characters of Arabic Fonts files.

Description:
Arabic Font Files (Test case 12.2 in 5.6.1-Universal Printing.doc)

Raw Data 

Character set 1:
For 3rd character # is printed instead of pound.Difference in 37th character.
Character set 2:
For 3rd character # is printed instead of pound.Difference in 56th character.
Character set 3:
For 3rd character # is printed instead of pound.Difference in 51th and 41st character.
Character set 4:
For 3rd character # is printed instead of pound.
Character set 5:
For 3rd character # is printed instead of pound.Difference in 37th and 41st character.

Forms 
Character set 1:
For 3rd character # is printed instead of pound.Difference in 37th character.Size variation of 44th and 48th cahracter.
Character set 2:
For 3rd character # is printed instead of pound.Difference in 56th and 63rd character.52,53 Characters are not thick as remaining cheracters.
Character set 3:
For 3rd character # is printed instead of pound.Difference in 51th ,41th character.52,53 Characters are not thick as remaining cheracters.
Character set 4:
For 3rd character # is printed instead of pound. 64 character didn't print properly.
Character set 5:
For 3rd character # is printed instead of pound. 62rd character didn't print properly.


on Alphanumeric:
After sending FONTID 1 message , is printed on statement printer in pace of ; .
After sending FONTID7 GBP sign should be printed on statement printer but not getting this sign.




Summary:
GBRU status is not reported correctly if GBRU shutter is jammed

Description:
Test No: 5.6.17.5.3.1.49(Shutter Jam on CDM1)
Machine Configuration: GBRU(as dispenser) &CDM

Error Severity '0' is reported when GBRU shutter is jammed while it tries to present the notes. And it is reporting severity '4' for the cassettes type2,3 if shutter jam occurs while dispensing notes from type2 and 3 even though cassettes are in good condition.

Logs are copied into the folder with this GR1T number in this path \\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4. GBRU_Type23.zip has logs taken when shutter jam occurred while dispensing from type2 and 3. GBRU_Type1234.zip has logs taken when shutter jam occurred while dispensing from type1,2,3 and 4.













Summary:
SDC Statement MEI is not flashing when the statement is given out

Description:
Test No: 5.6.11.3.6.1
SDC Statement MEI is not flashed when statement is presented.The MEI is flashed in the close state if the statement is not taken(MEI is not flashing if the statement is taken).
This issue is not seen on USB and Open Statement printer. 
Both Open and SDC Statement printer logs are attached.




Summary:
Memory leak due to suputils code

Description:
Spotted this while running memory leak test for SCPM supervisor functionality.

The DevPartner tool showed some memory leak in suputils.cpp which is related to dispenser code (a pointer is not getting destroyed after use).




Summary:
Where cash SP is lost or not re-opened  (-22) cash transactions succeed.

Description:
Due to issue 375305 the CDM was not re-opened after diagnostics. However cash transactions were responded to by a ready 9
as no CDM commands were possible. Require to send failed status if CDM SP is not available.



Summary:
TAR 366248:  Message Receiver worker used in a customisation, is not working consistently

Description:
Tar: 000000366248  History Sequence #: 1 Origination Date:  17-Dec-2007 10:38:58 GMT
Sequence Date:     17-Dec-2007 11:20:59 GMT
Priority: 2
Category: PROBLEM
Status/Reason: UND.INV / UND.INV-PEND.
Product:       G531-0283-0000             Version:  03.01.01
Component:     ADVANCE NDC                Version:  03.01.01
Customer Name:  BARCLAYS BANK
Entered By: Coupar, Peter
Responsible Person: Suresh, Ranjith

Short Description(s):
  1) Message Receiver worker used in a customisation, is not working consistently

Current Full Description:
   Customer has a customisation where they are using the Message Receiver 
   worker with an additional CCM TCP/IP communication channel.   This works
   most of the time, but intermittently a received message does not appear to
   be picked up by the application.
   
   Implementation uses a timer to re-initialise the workgroup containing the
   message receiver worker
   
   Tracing is available from TCP/IP up to the application level which shows the 
   following on a good message receipt :
   
   2194 - App Comms "ActivateReceive called on Communicator"
   2207 - App Comms "Request message"
   2209 - CCM "OnDataArrival"
   2213 - App Comms "Message Received"
   2215 - App Comms "Message Received String: '30?" - corresponds to message
   received 1 as detailed above
   2218 - App Messagein - message as above
   
   On a "missing" message see the following sequence :
   
   2234 - App Comms "ActivateReceive called on Communicator"
   2247 - App Comms "Request message"
   2249 - CCM "OnDataArrival"
   2253 - App Comms "Message Received"
   
   The latter two application Comms entries are msising, which implies an
   applciation level issue.




Summary:
TAR392381 - AA-NDC does not support re-install when encryption keys entered with DAPI7

Description:
AA-NDC does not support re-install of IUI when encryption keys have been
entered in DAPI 7. It deletes the keys and re-loads the factory key,
causing encryptor errors. 

AA-NDC should support this.




Summary:
TAR 405266 - EMV multiple application select does not work due to AA-NDC 8 fdk state issue

Description:
Further to the demo of the issue I given to Euan yesterday and Euans
analysis of the issue this P2 TAR is being raised in order to get a fix for
this external customers issue. 

Reason for P2 --- This is causing great issue during an EMV certification 

Issue recreation summary: - 

Enter a card with more than one emv application and allow multiple
application selection screen to timeout. 
If allowed to timeout the card holder is asked if they want more time or
not. 
If they press yes - they go back to app selection again (correct) 
If they press no - they go back to app selection again (wrong) 
If they press nothing - they go back to app selection again (wrong) 
If they press cancel on the EPP - app moves to close state as per download
(correct). 

This worked without issue in AA-NDC 03.02.01 with EMV 02.01.01, but fails as 
above with AA-NDC 03.03.01 and EMV 02.01.01 (with required hotfix). 

Stephen Peat said this was effectively an 8 fdk select state within AA-NDC
that is running. Euan has confirmed this is indeed an AA-NDC issue.



Summary:
TAR 393775 - PRN files over 32K in size do not print correctly to the USB receipt printer

Description:
Printing prn files ( created with NCR USB 80mm Renderer ) to the USB receipt 
printer that are over 32k in size there is a break in the graphic with
characters inserted in the line that breaks the graphic. 





Summary:
TAR 401602 - Using animated graphic in transaction request state screen causes hang

Description:
When an animated graphic such as an AVI or an MPEG file is used in a
transaction request state screen definition, the system hangs. 

To recreate, change the transaction request state definition to use a
graphic, e.g. in this case it was screen 026 : 

<FF><SI>@@<ESC>PEPIC100.PCX<ESC>\ this works 
<FF><SI>@@<ESC>PEPIC101.MPG<ESC>\ this hangs 
<FF><SI>@@<ESC>PEPIC100.PCX<ESC>\ this hangs 

example hang situation from merged debug trace : 

... 
<MESSAGEIN>18:36:26.031 - 08/04/2009 #0059 
[30[Unicode-x1C][Unicode-x1C][Unicode-x1C]11[Unicode-x1C]026 [Unicode-x0F]@@[Unicode-x1B]PEPIC101.MPG[Unicode-x1B]\]</MESSAGEIN> 
... 

<STATEDATA>applica.. 08/04/2009 18:42:17.093 [020] [I] Transaction
Request</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Screen Number 
[026]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Response Timeout State
#[038]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Track 2 Data 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Track 1 and/or 3 
[003]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Operation Code 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Amount Data 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send PIN Buffer 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send General Buff (or
X)[000]</STATEDATA> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.093 Module Start [State
Transaction Request - StateTransactionRequest.dll]</DEBUG> 
<MESSAGEOUT>18:42:17.203 - 08/04/2009 #0073 
[11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1?[Unicode-x1C]***************************************[Unicode-x1C][Unicode-x1C]A A 
[Unicode-x1C]00000000[Unicode-x1C]****************[Unicode-x1C][Unicode-x1C][Unicode-x1C]1***********************************************
*******************************[Unicode-x1C]21234100000000000000000000]</MESSAGEOUT> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.203 Reset Ready Flag 0 
<wid>28d836ma34</wid> 
</DEBUG> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.203 NDCScreenDisplayHooks
called,Final return value=1 </DEBUG> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.375 NDCScreenDisplayHooks
called,Final return value=1 </DEBUG><END> 

Incident initially opened as a priority 3, whilst waiting on feedback from
customer regarding impact.



Summary:
TAR 395635 - Commence Reprint being printed eroneously on journal

Description:
As previously sent in two emails and issue confirmed by RL: 

From: AbuMahfoud, Bahjat Basem 
Sent: 24 November 2008 05:22 
To: Auto-EMail, FGSC 
Subject: Journal Printer - Printing Commence Reprint between TRX Data 


Attachments: Document.pdf; Document2.pdf; Picture (Metafile) 
01 - Employee name: Bahjat Abu Mahfoud 
05 - Country: UAE - AUH 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +971 50 6119945 
20 - Customer Name: Al Hilal Bank 
25 - Priority: Priority 3 
30 - Products Affected: 6632 
35 - Platform OS: XP SP2 , XFS 04.05.01 
40 - Application: AANDC 03.02.01 with TAR 378052, 
50 - Environment: Live 


I have eventually received logs for this issue (Richard previously suggested 
AA-NDC had a problem but needed logs to verify - details in emails below) as 
requested and myself and Peter C have had a good look through them. It
looks to us as well that there is a problem somewhere here, but in something 
that is not fully logged and may be buried in a dll somewhere! Not sure as
you can tell :-( I apologise Richard as I know you are onsite now for a very 
urgent issue. 

We noticed a couple of strange entries in the logs and concentrated on and
around a txn at *078*01/18/09*09:03* record 4795 as shown on the paper jrnl
scan: 

[01/18/09 09:03:55] customisationlayer 18/01/2009 09:03:55.343 Bucket
inactive or duplicate entry008090118090355020000000010005010101010100000000

[01/18/09 09:03:55] customisationlayer 18/01/2009 09:03:55.359 Execute(104
(WFS_CMD_PTR_RAW_DATA),,dwTimeout=0)=-52 
RequestID = 46626 
hService = 319 
hResult = -52 (WFS_ERR_INVALID_DATA) 
u.dwEventID = 104 

(Date)18.01.2009 (Time)09:03.55,359 
XFS UJPTR Service Provider, XFS-DeviceControl 
<FREE>Worker hService: 319 (0x0000013f), RequestId: 46626
(0x0000b622)</FREE> 
<SCFILE>ActivityCmdRawData.cpp</SCFILE> 
<SCLINE>119</SCLINE> 
<FREE>WFS_CMD_PTR_RAW_DATA input parameter, ulSize, is invalid
rawData->ulSize [0]</FREE> 
=============================================================================
== 
Its wrong...'commence reprint' should not be printed like this. 

Debug log will be helpful. As will the customers HB files from an affected
unit. Just set option 16/17 and copy on the customers files to a unit here 
and see what happens. Should get the same effect. 


Richard. 
=============================================================================
== 




Summary:
TAR 399008 - AA-NDC reports incorrect M-status values for the USB 80mm Receipt Printers

Description:
Application is reporting incorrect m-status values for SelfServ receipt and
journal printers, as ignoring the data in the hardware error events from the 
UPTR SP, as they have a T-code 0. 

When Receipt Printer head is open - M-Status 09 is not reported to the host.




Summary:
TAR 399521 - Bad card read loops to suspend before ejecting card

Description:
Scenario 
6625 

Enter card 
Hear it retrying 
eventually - unable to read card screen is displayed - card not ejected 
Idle screen displays and card mei flashes 
Card retrying 
eventually - unable to read card screen is displayed - card not ejected 
Idle screen displays and card mei flashes 
Card retrying 

Continues until ATM goes out of service suspended - at no point does PIN
entry display. 

May be incorrect handeling of eject on suspend from TAR 377795 
For logs and any further information contact Robert Whyte FGSC



Summary:
TAR 361865 - PIN entry prompted for in both the T state and following B state with Dash

Description:
It looks like there is may be an issue with the B State (PIN Entry), when
this is used directly following a T State with a Dash reader. 
(Customer is using AA-NDC 03.01.01 with Dash reader.) 

The customer's stateflow goes from the T State to the B State (which is
valid) and the customer enters their PIN in the T state (as expected), but
then in the B State, the customer is then requested to re-enter the PIN (not 
expected). 

It is expected that the B State should have recognised that the PIN had
already been entered in the T state and should bypass the PIN entry section
in the B State. 

Recreated in lab using customer custom.dat on a vanilla 03.01.01 (with
change to the FIT download as follows
(30[Unicode-x1C]0[Unicode-x1C]0[Unicode-x1C]15[Unicode-x1C]000000255255255255255001000006000063000016015255255 ) and still
got the 2 PIN prompts from both states. 




Summary:
TAR 397063 - Rcpt Delivered Screen used in close state when No Rcpt Delivered expected

Description:
A transaction sequence correctly delivers a receipt during the processing of 
a Print Immediate transaction reply. However when the subsequent CLOSE
state is reached, the application appears to think that there is still a
receipt to be delivered as part of the close state processing. 

Therefore rather than the specified "No Receipt Delivered" screen 024 or 124 
being displayed in the close state (the central host uses a language offset
of 100), the application is displaying the "Receipt Delivered" screen which 
is defined as 040 or 140. 

The same download has been used with previous versions of AA-NDC . 02.06.06, 
03.02.01, and this issue appears to have been introduced from 03.03.xx. 

In the debug the following difference can be seen during the close state
processing for identical transaction sequences : 

03.02.01 
customi.. 12:39:56.346 ReceiptEjecetd - [0] 
<wid>5n8015dc129</wid> 

03.03.01 
applica.. (MAIN)(2652) 31/01/2009 13:00:17.281 ReceiptEjected - [1] 
<wid>5n8015dc129</wid> 



Summary:
TAR 398851 - Large amount of data in GBRU Error report causes terminal to hang

Description:
When a large amount of data is sent in a reply to AA-NDC with Debug running, 
a hang occurs because the data cannot be handled. This has already been seen 
as GRIT 406043, but has not been reported as a customer issue previously.




Summary:
TAR 394184 - Arabic receipt printing uses wrong character set

Description:
Customer has modified their resevd.def K01 to add the ESC 3 (select Arabic
char set) so that on SelfServ prints in Arabic by default. 

Issues :- 
1. In certain circumstances, the printing of their receipt prints garbage
i.e. instead of printing an English header and Arabic body of receipt as
expected, it prints garbage (looks as though using wrong character set -
therefore becomes unreadable). 

2. After printing an Arabic receipt, if they go into Supervisor to print the 
counters onto the receipt, that this also prints garbage on the receipt
(i.e. uses wrong character set). The only way to resolve this is for them
to do an INIT RECPT. 




Summary:
OOXFS logs not getting logged in OOXFS debug window after clearing all the windows

Description:
AANDC 3.2.1 MV (same as 405302)

Scenario:
1.Open the Debug logs, Perform a transaction, OOXFS logs are getting logged now.
2. Clear all windows by going to "Edit and selecting Clear all windows "
3. All the windows are cleared now.
4. perform a transaction now, there are no OOXFS logs being logged in OOXFS window, rest of logs are getting logged properly.

We need to restart the Applications to get the OOXFS logging.



Summary:
TAR 401220 - SIU SP is being swamped by Status requests while during a download

Description:
SST crashes for for downloads of 100+ messages.Happens because SIU SP is not handling async requests more than the it's queue size.
See the STAR for more information.



Summary:
TAR 395137 - Missing function mError from customisationlayer during CBC present. Dubai Issue.

Description:
Due to thread collision in mBParse area the nested screen function is not found although ANDC configured OK.

Process Filename: C:\ssds\apps\customisationlayer.exe 
SupplyPoint Owner: NCRScotland.SSDS 
SupplyPoint Source:mError 
Description: <SCFILE> .\MAPSRTCore\Sources\cpp\mbparse.cpp </SCFILE> 
<SCLINE> 507 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 1 

Domain: 0 Error Number: 153 Worker Id: Description: Authoring 
Error, Class Evaluator - 
'DisplayNestedScreen' is not recognised as a variable or function name. 
</FREE> 




Summary:
SCPM - ImageMark creates the detail for retracted cheques also when we do the transaction with accept and reject cheques together

Description:
Run the 5.5.29.19.11. In step 16 it will create the Xml file in passport directory for all the 3 cheques (2 accepted and 1 retracted).

and is we perform a Txn with the retracted cheques only then it is not generating the xml file which is the correct behaviour.






Summary:
Depository MEI does not turn off when envelope taken and shutter held open

Description:
Spotted by Aparna on combined depository/dispenser

MEIs should turn off as ssson as failure detected



Summary:
SCPM - Event logging that DMITRData cannot be accessed should be avoided by not using DMITRData when DM is not present - this would improve performance also

Description:
Every SCPM state inserts at least one event log entry warning on display. The evnt log then looks very busy with APTRAUSERCDI errors. Probably requires an NDCRenderer Change



Summary:
D450 Opteva - EPP Unsol not sent when EPP USB Cable is removed

Description:
EPP usb cable is removed and if tried to do a transaction, EPP is disabled and the transaction is timedout but no unsol is sent to host and the application is still in in-service.



Summary:
IP TAR : Ref manual - document on retract all cassette type supplies data will be retnd

Description:
Request provide details that when a retract occurs the Device Status
Information Supplies Cassette Type Statuses for the Dispenser will include the status of all the cassette types in the unsolicited status message and journal log. This is opposed to only the Supplies Status for the Cassette Type the dispense occurred on as this is what currently happens with NDC+.

See TAR for details 



Summary:
IP TAR 408010: Documentation does not specifiy full details for FONTDEFS.TXT data

Description:
Arabic characters are not displayed correctly when the Font size is changed using FONTDEFS.TXT
See TAR for details



Summary:
IP TAR 408715: Reference Manual incorrect: BNA accept state Table Note 43 

Description:
See TAR for details



Summary:
IP TAR 396046: How MAC is verified needs to be corrected as per actual functionality

Description:
See TAR for details



Summary:
IP TAR 405071 Typo in Developers Guide page 5-74 B006-6046-K000

Description:
Chapter 5, section "Configuring an Advance NDC Application" has the 
The element description for Key9 has 
"Defines the characters displayed when Key 2 is pressed. 
By default, this is 9WXY."

"Key 2" should be "Key 9"



Summary:
TAR 404847 Developer's Guide should clarify support for local customisation data supporting keyboard mapping as part of a screen

Description:
See TAR for details



Summary:
TAR 409357 - Promote : NDC Idle screen clearly seen before Promote attract sequence

Description:
Customer : Allied Irish Banks 

Configuration : 
6625 with Talladega. 
APTRA XFS 05.00.00, XP SP3 
AA-NDC 03.03.01 
EMV Exits 02.00.02, Promote RTL 03.01.00 

Problem Description : 
The customer is displaying a Promote campaign which starts with a Flash
Animation and then some JPG's but the NDC "Please Insert Your Card" screen
is displayed and can be clearly seen before the Flash Animation is started. 

A workaround to display a JPG first also failed as although less pronounced
the NDC screen was still visible. 

The issue is thuoght to be in Presentation Client in that it is not
disabling the NDC quickly enough on faster cores.




Summary:
TAR 408638 - AA-NDC - Partial picture not displayed on screen grid layout referenced 

Description:
Reported by the UK that when attempting to display partial jpeg pictures
within a screen (800 x 600) the pictures did not actually display at the
correct position referenced. 




Summary:
On IX  print comes as one continuous receipt when do Chain Transactions

Description:
when do Chain Transactions, Application is not cutting the receipt after 24 lines when 6b is off



Summary:
TAR 394448 Terminal State Hardware Fitness incorrectly reporting journal printer as fatal

Description:
See TAR for details



Summary:
ANDC Dispenser unsol with MStatus 19 is not reflected in Fault Display

Description:
ANDC Dispenser unsol with MStatus 19 is not reflected in Fault Display

Possibly incorrect mapping of fwIntermediateStacker property



Summary:
BufferC contains incorrect BNA Sensor information in Tamper and Sensor Host Command response.

Description:
Solicited reply to Get Sensors terminal command is affected. unsolicited TI messages, sent by other devices (other than BNA), are affected as well.

`w¿ field (BNA SENSOR STATUS) is not reported correctly. There are two problems:
1: Field length is not correct ¿ we are reporting that there are 4 bins but after that there are only 3 characters with TI state.
2: Retract bins are always reported as present.

Unsolicited TI statuses, sent by CIC, are not affected and work fine.

Please see the attached .rtf file for the email thread discussing this issue.




Summary:
SCPM MEI Flashing Issues

Description:
When the SCPM is enabled and ready to accept cheques and when returning cheques, the MEI is not always enabled.

No flashing was seen with the default MEI flash rate set and further investigation of settings of ECP option 25 showed the following -
ECP 25 = 000 (default), 001, 002, 005 - no flashing
ECP 25 = 003, 004 - continuously on

Also set it to 006 (which is out of range) and the last configured setting was actioned (as expected)

SST is installed with XFS 5.00.01.18 + SCPM_SP_92030004 + ANDC IT13 



Summary:
TAR 408638 - AA-NDC - Partial picture not displayed on screen grid layout referenced 

Description:
Reported by the UK that when attempting to display partial jpeg pictures
within a screen (800 x 600) the pictures did not actually display at the
correct position referenced. 




Summary:
If you select any option in 37 TCP/IP config Menu "Please Wait screen " is over writing contents of next screen on EOP.

Description:
If you select any option(say 15,16,14...) in 37 TCP/IP config menu in supervisor , please wait screen is still diasplaying after enterting in to next screen also, and it is over writing the contents of next screen.
steps to follow,
1. enter in to supervisor.
2. select 5 config.
3.selct 37 TCP/IP config menu.
4. select any option( try few options), plaese wait screen is diaplyed and moved to next screen.
5.but in back ground please wait screen is displayingf and over writing the contents.

Shown to Murthy, As this is recreatble and not required any logs for this.

This Issue is seen only on EOP, where are not seen happening on GOP.



Summary:
SCPM - IT build 13 : The images of returned cheques are not printed on the receipt

Description:
Test 5.5.29.19.4.6.2.13 fails because the image of returned cheque is not printed.




Summary:
WINCOR:  On card jam/card left in reader or card eject/card jam/card left in reader, the ATM does not try and capture the card after 5 minutes.

Description:
On card jam/card left in reader or card eject/card jam/card left in reader, the ATM does not try and capture the card after 5 minutes.
Unexpected message [12[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C]D1[Unicode-x1C]0[Unicode-x1C]20[Unicode-x1C]1] received on return from suspend after card reader jam 

raised by westpac.



Summary:
The Fault Display header info is wrong when device is Fatal.

Description:
If BNA is Fatal then it should not show BNA header, followed by line saying BNA Fatal, followed by any other lines eg JAMMED. It should replace the normal good header with BNA Fatal header, and then just follow that with other errors eg JAMMED. Similar issue was discovered during SCPM testing covered by G 435880.



Summary:
IP TAR FDK Keyboard mapping as docuemnted in teh Ref manual is unclear - Tar 403959

Description:
The examples provided in the Reference Manual need to be clarified, for details see Tar 403959




Summary:
Memory Leak - Variant was not being cleared before being updated

Description:
As part of CIC Memory Leak investigations, found a small leak in ANDC where a VariantCopy was being done without first having a VariantClear done



Summary:
SCPM: Trans Request Message needs to send the total amount of individual cheques when using the Single Cheque message interface

Description:
It looks as though the amount of individual cheques is not being totalled and sent in the Amount Entry field of the Transaction Request.  Bindu confirmed she did not implement it.

FINAL FUNCTIONALITY
==============
The amount buffer in the Transaction Request Message will be updated to contain the sum of the customer entered amounts for cheques, which are not to be returned (in the bunch cheque array) when
 
* The new message interface for bunch cheque transaction request is not being used (= Data Id 'g' of Transation Request is not included)
* Amount buffer is configured to be included in the Transaction Request (Table Entry 7 of Transaction Request State main params) 
* The amount buffer has not been updated prior to the Transaction Request State.
* The sum is greater than 0 and fits into the currently configured amount buffer size (8 or 12 digits).
In a vanilla ANDC, this implies that Bunch Cheque Acceptor is present and Bunch Cheque Accept State and Bunch Cheque Detail Display State have been executed in the transaction to enter the amounts.
==============




Summary:
Machine rebooted when cash handler goes to suspend to fatal and  24V reset is called

Description:
Steps to recreate the issue:
1) Add  <Resource>Cash Dispenser</Resource> to C:\Program Files\NCR APTRA\Advance NDC\Config\DeviceRecovery.xml
2)Initiate a transaction
3)Dispense notes from cassettes. Notes are dispensed.
4)Hold the notes when they are retracting. ATM goes to suspend mode.
5)Hold the notes and send GIS. Application tries to clear the suspend condtion but fails and dispenser goes to fatal.
6)Then P21 msg received by the host and the machine reboots.

Logs are attached to this GR1T






Summary:
cust resrvd scrns can be defnd from reg entry UseAdditionalReservedScreenFile - Tar 405573

Description:
The AA-NDC 03.03.01 Developer's Guide indicates on page 3-8 (ch. Migrating Existing NDC+ Applications to Advance NDC, section Changing RESRVD.DEF) that customised reserved screens can be defined in a file distinct from resrvd.def and referenced in the registry entry 

HKLM\SOFTWARE\NCR\Advance NDC\supervisor\UserAdditionalReservedScreenFile 

This is incorrect. The correct name for the registry value is
UseAdditionalReservedScreenFile (no r in-between Use & Additional) 




Summary:
Typo in Developers guide page 5-74 B006-6046-K000 - Tar 405071 

Description:
In Chapter 5 of the Developer's Guide, the description for the Key9 Element in the NDC Keyboard XML Schema incorrectly specifies Key 2 instead of Key 9.    See Tar for details.



Summary:
Card before Parallel Dispense and Print incorrectly described print timing - Tar 393580

Description:
The function card before Parallel dispense and Print indicates that the main receipt printing only takes place after the Cash Taken event. In fact, this will take place as soon as the dispense is requested (as the name suggests). See Tar for Details.



Summary:
AA-NDC Reference Manual does not document "header" for XML configuration - Tar 395141

Description:
When XML data is sent in a download for voice guidance, the application requires a header which indicates where the data is to be written. The details for this header have not been documented in the AA-NDC Reference Manual where the XML configuration is defined.  See Tar for details.




Summary:
CIM: Possible memory leak issue with ActiveXFS 92.11.00.01

Description:
reported by javier artime:  This is just a heads up. 
We have been investigating a memory leak issue within Advance NDC Cash-in Component 1.03 and just now, when aiming to do some other comparison, we came across these results: we have tested AANDC 93.04.00.04 with ActiveXFS 02.10.00 and 92.11.00.01. 
AANDC 93.04.00.04 (IT4) including cash-in component 01.02.01 is showing a private bytes leak of about 7k per deposit Tx when running on top of ActiveXFS 02.10.00 (this is comparable to the results obtained for the released version of AANDC 03.03.00). 
If the same versions of the entire software stack are used, but changing only to ActiveXFS 92.11.00.01, the Private Bytes leak observed is close to 100k per deposit TX. 
These results seem to be reproducible with all versions of AANDC and Cash-in Component. We¿re currently testing to confirm this impression. We¿re comparing also AANDC 03.03.01 using both ActiveXFS 02.10.00 and 92.11.00.01. All tests have run in the simulator but we have several specific scenarios run as well on the ATM which seem to confirm this hypothesis. 
I¿ll keep you informed of any progress on this investigation. Any comments or suggestions you may have are most welcome. 




Summary:
Memory leak in transaction request data for bunch cheque accept data

Description:
memory leak in the transaction request code (transreq.cpp - 1.34.1.4 ¿ line 1729) 

				char *buf = new char[data.length() + 1];
				buf = (char*)data.c_str();

The `buf¿ pointer is overwritten by the call to `(char*)data.c_str()¿ and is therefore never released.  The intermediate buffer isn¿t required.  It should be sufficient to do an `os << data¿ as the stream should know how to handle strings.




Summary:
Reprinting the data crashes when printing the 'K' Screens (that contain no printable data

Description:
Recreation steps from Reddy

1. Start the application. ( make sure Journal set to Paper only)
2. Perform a transaction and send NXT_PRNT reply, Data printed on Journal
3. Send OOS and send 3 FS FS FS 1A FS FS 1600117002 ( to enable the hardcopy backup)
4. Open the Print head for Journal printer.
5. Perform a transaction and send NXT_PRNT reply, Data written on to HBDATA,.LOG file.
6. repeat step 5 for 4 more times
7. Close the Journal Printer and head and repeat step 2.
8. Hardcopy back up reprinting starts and Application Crashes here




Summary:
Anomolies seen when alphanumeric enabled and alphanumeric extension state configured with lower case characters

Description:
The scenario is alphanumeric state entry enabled
Bunch Cheque Accept state (main table) references 3 extension states and all are >999
First extension state is ZZZ, second is A00 and third is 00a (see attached Word extract highlighted in red).  

Extension state 3 results in an error in Statedata.log in debuglog and the extension state parameters shown are not those downloaded.  Hhowever, the application progresses to the next state in the flow (AAA) which was in the extension state 3 downloaded but not seen in the output in Statedata.log.

It is quite difficult to explain but can be easily recreated if required.  Note that when uppercase is used, there is no such issue seen.




Summary:
SCPM: Cheque at Exit/Sensor Blocked at Accept State when the BunchChequeAcceptService is in ChequesLeft state does not Report any Unsol

Description:
This is related to GR1T 431250.

The BunchChequeAcceptService will be in ChequesLeft state.  This is correct because cheques were left from the previous transaction.  The next customer may take/remove the cheques - which is fine, and so the service will return to Idle now.  However, if they do not remove the cheques, then it means the application could still enter the Accept state, but it would take the HW Error exit without sending a command to the service.  This is because if the service is called to ScanCheques when there are cheques in the slot, the service will report HWError directly with no device interaction.  It means there would be no unsol reported.  We have decided to send a command to the service in this situation (i.e. when in ChequesLeft state).

In the case where there are multiple bunches, and there is a bunch still in the rebuncher, then the cheques will remain in the rebuncher until they are retracted or reset called - basically the BunchChequeAcceptService will remain in the ChequesLeft state until Retract is called.



Summary:
SCPM Trans Request Message - Amount Exponent Value does not tie up with Amount Entered in Detail Display State

Description:
Amount entry in the detail display state is using a downloaded screen with the default display/entry format indicating 2 decimal places - $ *****0.00. 
When for example 10.00 is entered, the transaction request message transmits an Amount Exponent Sign and Value of +01.

Debug logs attached.  Values entered for the last example were 10.01 for cheque ID 001 and 20.02 for cheque ID 002.  No PD trace but I can get one if required.



Summary:
Application hangs at startup if SCPM configured and receipt printer is fatal 

Description:
Spotted this while testing 24V reset. Recreated on SSTs in bays 19, 29 and 33

Simple to recreate. Open the print head of the Receipt printer or remove the paper. Start the applications and they will hang...Logs attached 



Summary:
5.5.29.19.4.6.2.13 - Two sided printing with SCPM

Description:
when testing this everything was ok on a 2ST reciept printer but when testing BUNCH16 and (BUNCH7) on a non 2ST printer an additional blank page was printed with the cheque image. Issue Shown to Catherine.

Forms based printing was used for the test and the reciept was not cut on the black mark



Summary:
Additional information printed to fault display

Description:
When jamming a cheque in the media fault display details the following on fault display:

CHEQUE PROCESSOR
  CHEQUE PROCESSOR FATAL
  MEDIA JAMMED

This implies that there are two problems with the device rather than just the one. Which can be confusing for service call outs. Spoke to Catherine and she agreed this should be GR1Tted

Have attached an image to show the issue



Summary:
BunchChqAccptSrv: Cheques jam during ScanCheques operation without service recovery action.

Description:
In some cases, cheques are jam during ScanCheques operation and the service does perform any recovery actions or notifies AttemptRecovery = true; even though the error can be fixed by calling Reset (eject) or Reset(retract).

Scenario:
- Call ScanCheques.
- Insert a cheque causing a HW error.
Verify the operation completes as HardwareError (ReturnRefused is a different case that is recovered during ReturnRefusedCheques).
Verify AttemptRecovery = false and no Reset has been sent to the device.



Summary:
IP update for 'Define Downloadable Bit Image'

Description:
There is a minor update needed to the 'Define Downloadable Bit Image' in the Reference Manual for Table 5:12 -  Define Downloadable Bit Image

The below information need to be added in the description:
"On USB Thermal Printers, bit images are not erased even printer power is turned off" 

This is because on USB Thermal Printers, Bit Images are stored into printer's Flash Memory not in the RAM.




Summary:
SCPM: C20 screen shown when not defined and when Retract screen set to 000 in close state

Description:
It should not change the screen away from Take Cheques screen yet it shows C20 in top corner of screen as though it is defaulting to C20 screen when Retracting Media screen is set to 000. 

This is test 5.5.29.19.6.10.



Summary:
405403 - Journal Page worker does NOT consider XFS limitation for creating dynamic form

Description:
There is a P3 issue raised by UK PS for AIB Bank on AANDC 03.03.01 and XFS
   05.00.00 concerning Universal Journal Printers functionality.(could become
   P2 if escalated by Bank) They have some customisation which makes use of the 
   Journal Page worker to pick up data for printing from a String Store. This
   data is having 161 lines and the Journal Page worker tries to take this
   entire data and print using one single form. 
   
   The Journal Page worker defines ?	SIZE          40, 161? for the form.
   However, the APTRA documentation for the UJPTR XFSFORM Definition clearly
   indicates that : The maximum SIZE for a journal printer for PORTRAIT
   printing only is as follows: Width = 40, Height = 160. 
   
   Still the Journal Page worker in AA-NDC application tries to create a form
   of height 161. The receipt page worker behaves properly when the same data
   is sent to it.
   
   This issue can also be simulated by using a print immediate command and
   populating 161 characters in the print data, each char seperated by
   LineFeed. It creates a form with size 40,161. 
   
   In the APTRA documentation, there is no upper limit mentioned on the data
   being passed onto the journal page worker. So, it is valid on the customers
   part to send any amount of data. 
   
   Also, it would be worth mentioning that currently this issue has been raised 
   as P3 on FGSC, but there could be a possible escalation from AIB in which
   case, we might raise this as a P2 TAR.



Summary:
TAR 406769 - Amount Display Screen in Amount Entry picking up old background

Description:
The Amount Display Screen within an Amount Entry state is intermittently
being displayed incorrectly, with the background from the previous
Transaction request state screen being picked. 

AA-NDC 03.03.01 
M16 screen includes the transparent background control. 

M16 - <dc2><esc>[00m<esc>[80m<esc>[60m<esc>Pi0<esc>\ 

The Amount Entry state defines the Screen Number as 043, and the Amount
Display Screen as 024 

043 - <ff><esc>P243<esc>\<si>@=043<gs>14317001800190020002100220023F324F4 
024 - <si>EJEUR ***0 

Issue is intermittent, but a similar issue has been recreated with the
standard released product. 

Priority is due to the current project timescales, as customer supposed to
have a build delivered today (Monday 8th) for a live pilot starting tomorrow 
(Tuesday 9th), with a gold build due to customer on Wed/Thursday (11th) at
latest. 




Summary:
SCPM: Bin Full condition - diagnostics can report High

Description:
An issue in reporting diagnostics is seen when reporting Bin Full condition when a bunch of cheques are moved to the bin in same transaction:

18:59:17  # 24    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]q0 [Unicode-x1D]0000201[Unicode-x1D]0010201[Unicode-x1D]0020201[Unicode-x1D]0030201[Unicode-x1D]0040201[Unicode-x1C]0000000[Unicode-x1C]28041601000000000000000000000000000000000000000000000001010000000000000100[Unicode-x1C]100051]
19:02:51  # 25    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]q0 [Unicode-x1D]0000201[Unicode-x1D]0010201[Unicode-x1D]0020201[Unicode-x1D]0030201[Unicode-x1D]0040201[Unicode-x1C]4000040[Unicode-x1C]28041601000000000000000000000000000000000000000000000001010000000000000100[Unicode-x1C]100041]

These two messages show Bin 1 go high then full, in separate transactions.

As you can see both show same diagnostics field. The Full status msg is actually having mstatus which says High.
Reason is that multiple native diagnostics responses are returned by platform, one for each cheque, eg:  

SrvcAddr 51 Class 2 TCode 13 TLen 1 0 SLen 1 2 MCode 0 MStatus 28 MLen 36 4 22 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 RSLen 8 0 0 0 1 0 1 2 0 RCLen 5 0 4 0 1 0
SrvcAddr 51 Class 2 TCode 13 TLen 1 0 SLen 1 2 MCode 0 MStatus 28 MLen 36 4 22 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 RSLen 8 0 0 0 1 0 1 2 0 RCLen 5 0 3 0 1 0
SrvcAddr 51 Class 2 TCode 13 TLen 1 0 SLen 1 2 MCode 0 MStatus 28 MLen 36 4 22 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 RSLen 8 0 0 0 1 0 1 2 0 RCLen 5 0 2 0 1 0
SrvcAddr 51 Class 2 TCode 13 TLen 1 0 SLen 1 2 MCode 0 MStatus 28 MLen 36 4 22 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 RSLen 8 0 0 0 1 0 1 2 0 RCLen 5 0 1 0 1 0
SrvcAddr 51 Class 2 TCode 23 TLen 1 0 SLen 1 4 MCode 2 MStatus 31 MLen 36 4 22 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 RSLen 8 0 0 0 0 0 1 3 0 RCLen 5 0 0 0 1 0

ANDC usually reported the first diagnostic response when reporting a status message. It should probably report the last one.



Summary:
SCPM:  Ensure NDCImageMarkProcessor reports correct values of amount decimal values

Description:
NDC components now keep the amounts multiplied by 100 to avoid decimal places. ImageMark recorder needs to have the amount specified normally, i.e. with decimal places. The new DecimalPlaces property should be set to 0 (in the case of ANDC).  The only difference now is that an amount of 0.01, which ANDC treats as 1 will be reported in the ImageMark XML file as 1 (instead of 001).  This seems to be fine based on the ImageMark API Spec.  This change was necessary based on the change done to address G427683.



Summary:
SCPM: Wrong Unsol message is sent when shutter is jammed open after bunch inserted and cheques still in infeed transport

Description:
Run the test case number 5.5.29.19.3.1.16.
Follows the following steps.
1)  Initiate the bunch cheque transaction
2)  Insert 2 cheques and keep the shutter held open.
3)  makes the shutter jam.

1 cheque is still in the user access area (the other was scanned) and Hardware error screen shows.
q4E unsol message is sent which means HWError in device with no customer access which is not correct as customer does still have access to the unscanned cheque.



Summary:
Application getting hanged when we  selected option 7 PRINT TCP/IP from supervisor on Front interface personas machine with no EOP.

Description:
Application getting hanged when we  selected option 7 PRINT TCP/IP from supervisor on Front interface personas machine with no EOP with SDC printers when defualt printer is set as "0" , this is seen in AANDC93.04.00.10 build with XFS5.1 IT18.
Steps to follow.
1. start AANDC apps.
2. go to supervisor
3.select 5 configure and select option 8 to set Printer.
4. enter "0" to set as defualt printer.
5. slect 37 option from configure menu to enter in to TCP/IP aoption menu.
6.select option 7-PRINT TCP/IP, please wait screen is seen, Application hangs.

Added debug, eventviewrr and PD logs also.



Summary:
Screen refresh issue and application hang issue when opting 6(Disp TCP/IP) option in TCP/IP config menu.This is happening in rear interface

Description:
There is screen refresh issue and application hang issue if we are selecting 6(Disp TCP/IP) menu in TCP/IP config option.When we are selecting this option the we are getting "Printing in progress" screen if we are selecting 99 to go to next screen and screen is flickring in beteen the screens.If we will opt option 6 for severral times and will press 99 to go to next screen the after some time application hangs.

Steps to recreate thsi issue:-

1) Start the application and select 7(Print TCP/IP) menufrom TCP/IP config menu
2) Select 6-Disp TCP/IP menu from TCP/IP config menu.
3) Do it for several times then you will find that pressing 99 to go for next screen is showing "Print in Progress" in between TCP/IP screens.
4) Select 6-Disp TCP/IP menu for several times and you will find that appliaction is hanging.

PDTrace is copied at the following location:-

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT10\Displayhang



Summary:
If journal printer is not available on SST and printer is set as default then opting Print TCP/IP menu is showing "Printing in Progress" screen

Description:
If the printer is set as default and journal printer is fatal or not available then selecting 7(Print TCP/IP) option in TCP/IP config menu is showing "printing in progress screen"

Steps to recreate this issue :-
1) Make the journal printer fatal and start the SST.
2) Start AANDC application and go to supervisor menu.
3) check that printer is set as default(For rear interface it should print on journal printer)
4) Select 5 -> 37 -> 7(Print TCP/IP) option.

Result :- "Printing in Progress" screen is displayed

PDTrace log file is copied at the following location

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT10\PrintingInProgresswhenacess7print




Summary:
Handle leak for hardcopy backup

Description:
Handle leak reported by test engineering for standard CPM TXs (base download for CPM + CPM_TR11 reply). average 0.8 handles per TX.



Summary:
Cash Accept state does not display multiple reasons

Description:
DisplayRejectedItemsScreen procedure in EnableBNA script host is using differnt variable name than mentioned in parameter's list.



Summary:
SCPM - Stamping should be enabled at Device Service level in Handling Flow code

Description:
The device service has been updated to support stamping. The handling flow should now be updated to enable stamping at device service level.



Summary:
Registration to the TCP/IP dlls is missing in installer (IT10)

Description:
With the IT10 we need to register the "NCR.APTRA.NDC.TCPIPSupervisorTask.dll" manually. This should be done with the installtion.



Summary:
Screen refresh issue is occuring if opting for Print option(i.e- option 7) in TCP/IP supervisor menu

Description:
We have screen refreshing issue if we are going to supervisor menu and selecting 5->37 -> 7 option in TCP/IP config menu.The screen is showing "printing in progress" and not returning back to TCP/IP menu after data is printed.

Steps to recreate this issue:-

1) go to supervisor menu .
2) select 5(Configuration Menu)-> 37(TCP/IP Config Menu)->7(Print Option)
3) Select option 7 several times and after some time "print in progress screen" will not be refreshed and pressing the cancel key will show TCP/IP screen.

PDTrace log file is copied at the following location:-

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT9\GR1T435425

 



Summary:
Upgrade install : installtion fails when we install AANDC 03.04 having AANDC 03.03 installed

Description:
I have seen this error on Dev PC.

1. Install AANDC 03.03 in Dev and sim Mode
2. Install ANDC 03.04 in dev and Sim mode, Install fails at DM component.

Attached the email conversation and activity log.



Summary:
Build 10 - Access violation during application startup

Description:
Access violation in SCPM code - destructor of mDynamicActivator



Summary:
TAR 397859 AA-NDC Authoring Help references "Pin Collector" Worker when not supported

Description:
See TAR 397859 for details



Summary:
TAR 397066 Ref manual specifies No-PIN message mode which is not applicable to AA-NDC

Description:
See TAR for details



Summary:
Optional to start/end exchange on cassette entry & when CDM service is opened.

Description:
After CDM clear  perfoem start end exchange to clear any manip status on cassettes.
Update to perform on cassette entry & when CDM service is opened as required by manip status.
Needs to be optional behaviour in case custodian wants to see manip.
Also Fault display required to show manip status. And Terminal commands if we attempt to pick from a manip type.



Summary:
STCONT: FDKs behave incorrectly in SCPM states when alphanumeric state numbers are enabled

Description:
The following GR1T was addressed in IT10:
GR1T 435127 - When Alphanumeric State entry is enabled, Cheque Detail Display State goes to Default Close from any of its exits

But there is still an issue:
The FDK Masks are wrong for this.  It means the FDKs behave in a wacky way when alphanumeric states are enabled...

zESCPMCfunsStateFunctionAutoCaller
0003000030000100999009990099900ZZZ10ZZZ2
0ZZZ0ZZZ0ZZZ09990999099900000000
0ZZZ0ZZZ0ZZZ00000000000000000000 <- ZZZ's should be 255
02550255025502550255000000000000   <- not needed



Summary:
TAR 395827 Incorrect DebugLog registry key specified in the Developer's Guide 

Description:
The AA-NDC Developer's Guide (Troubleshooting, Installing and Configuring
DebugLog 12-12) specifies the following registry key with regards to
DebugLog :- 

HKEY_LOCAL_MACHINE\SOFTWARE\NCR APTRA\Advance NDC\ 

When in actual fact the registry key is :- 

HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC 

i.e. NCR not NCR APTRA 




Summary:
TAR 395044 AA-NDC: Message format for unsol sensors status in ref manual misleading

Description:
See TAR for details



Summary:
TAR 394897 Ref manual incorrectly states H1 will be sent when paper low or out

Description:
AA-NDC Reference Manual states that an H1 will be sent when the paper is low 
or out. 
(refer to Table 9-43 Unsolicited Message Sequences for Option 35 (EJ Dual
Mode)) 
Yet the implemtentation of TAR 378572 advised that an H0 device status would 
be sent when paper is exhausted. 

Documentation needs to be updated as result or TAR 378372.




Summary:
Deliver ANDCSupervisorUserGroup.vbs to ANDC Security Directory

Description:
Deliver ANDCSupervisorUserGroup.vbs located in

NDCCore\Global\Security

to 

C:\Program Files\NCR APTRA\Advance NDC\Security



Summary:
Implement Option 39 for mag/non-mag card acceptance.

Description:
 Also check if this option can be implemented locally without requiring any Host change (to download Option 39) - use  Local configuration option.

Zenith bank MV POC - Card Accept in any direction.
 
This is TAR 335892 working. ANDC will accept non magnetic cards where the card reader is equipped to do so. However this also means cards incorrectly entered 
will be accepted to allow the chip to be 'located'.   This behaviour is acceptable on NCR terminals as there is configuration available in the card reader/Service provider.
There does not seem to be the same configuration on Wincor to only allow mag stripe - it is solely under application control. 
There is an Option digit in NDC (option 39) to control this. I'm checking with Alison T. if its been proposed as it is not in ANDC 3.4.



Summary:
Application is not able to enter into supervisor if ConsumerResource is released when the application is in idle.

Description:
Steps to create this issue:
1. Start the Application.
2. Load APPC, LD and send the list LD5085NT.
3. Lock the consumer resource by using NACM SOFTWARE ( NACMCommand.exe "OOS" UPS)
4. Press the mode switch to enter into Supervisor.
5. Application is not going to Supervisor.

But when we lock consumerresource when the application is in OOS and Offline mode it can successfully entering into Supervisor if we press modeswitch.

Similar to this TEST OBJECTIVE3 testcase from Log ConsumerResource Relinquish.doc also failing.

Logs are attached.





Summary:
Apps Crash !! When touched on Service Assist on front monitor ( only with Touch screen)

Description:
AANDC 93.04.00.09

Scenario:
1. Start the AANDC application.
2. Supervisor screen displayed on GOP/EOP
3. Select 8 - Transfer
4. Select on Service Assist . Apps Crashed. ( Please note that model number is set to 5875 so there is no Mast ICON displyed, this should be also be happening with MAST ICON with touch screen)

Logs copied on to dundee Appsight Data PC.  <<\IT9\Apps Crash - Service Assist>>
Application events logs attached to GR1T





Summary:
Out of Range testing for Bunch Cheque State Table Parameters

Description:
When testing out of range values for bunch cheque state parameters, progression to the default close state is expected.  The following was observed - 
1.  Cheque Detail Display state, Operation Mode = 000 did not progress to default close state.  The state was entered at cheque 1 always and navigation to subsequent cheques can't be done.  Selection of Proceed/Enter exits the state.  Valid values for operation mode are 001-003
2.  An invalid bin number in the Deposit Bin Number table entry in Bunch Cheque Handling state results in cheques being deposited to bin 1

Configuring valid values works as expected.



Summary:
SCPM: Powerfail - Reset not done when cheques in stacker at SoD and reset was done during transaction

Description:
Proper powerfail scenario turning off power: 

Inserted 2 cheques. 
Switched off and on ATM. 
After reboot, the device chuntered when driver started, but cheques were not cleared - correct
Started apps and again device chuntered as SP started, and cheques were not cleared - correct
No SoD Reset was called - Issue!
After getting powerup msg, asked for Fitness - all ok was reported.
Started a transaction.
Device chuntering again - this time cheques were auto cleared by device service - Issue!
Then even after successfully moving the cheques to bin, it reported HWError. q2E was sent and fitness was still reported as Good.
Went to Close State - no auto recovery was attempted.
Asked for Fitness - all ok was reported.
Started a new transaction - it worked fine, cheques could be entered as normal (I just cancelled the trans at this stage). At least device is now usable.

ANDC logs included. No PD during this run.



Summary:
The Voice Guidance FS (445-0719388) uses the wrong escapes sequence in section 7 "Voice Guidance and EMV Exits".

Description:
The Voice Guidance FS (445-0719388) uses the wrong escapes sequence in section 7 "Voice Guidance and EMV Exits".

The Escape sequence used is incorrect.
The correct escape is <ESC>P000;1;<so>"[audio id]"<ESC>/  where [audio id] is the audio to be referenced.  It is important that this audio id  is in quotes.

The example given is also incorrect formatted above and will not speak what it claims too.

The given sample "<esc>P0Master<so>u1234Card;<so>u1235VISA<esc>\"  Should be

<esc>P0000;1;<so>"1234"MasterCard;<so>"1235"VISA<esc>\

To speak what the specification claims it should.


In reality the attached document is what should be set-up for EMV Exits and voice guideance.  This section although gives you an idea of how to use the <so>"[audio id]"  it is not what is actually required to be set-up.





Summary:
Roll out GRIT 433317 (Hebrew Printing TAR)

Description:
Agreed to remove GRIT for ANDC 3.04 



Summary:
DIALUP COPYOFF is overwriting the files to CD and DVD when the IMAPI is present .

Description:
In all the supervisor functions we are not allowing to overwrite the files into CD and DVD if these files are already present.But it is happening for DIALUP COPYOFF functions when the IMAPI is present. If the file already present in the disk, we are  showing appropriate error message in all Supervisor functions. 

Steps to follow to create this:
1.Select CONFIGURE in SELECT menu.
2.Select 38 DIALUP CONFIG.
3. Select 6 COPY ON/OFF.
4. Select 2 COPY OFF and select DVDRW in the drives list.
visa2communicationserviceconfig.xml file will be copied to disk in the DVD drive.

Repeat the same steps 1 to 4, visa2communicationserviceconfig.xml file will be overwritten in the disk.

Same issue with Application Configuration : COPYOFF functionality as well.




Summary:
When Alphanumeric State entry is enabled, Cheque Detail Display State goes to Default Close from any of its exits

Description:
While testing with ECP 80 for alphanumeric state entry set, it seems that any of the exits from the Cheque Detail Display state results in the app progressing to the default close state.

No logs attached but showed this issue to Stephen G and he is aware of the problem and how to recreate it.



Summary:
SCPM: Scan after endorse issue with ImageMark

Description:
This occurs in Test 5.26.7 step 40 and 45. The test is for ImageMark, but the faulty area may be the actual scanning after endorse. The ImageMark folder does not contain scanned images after endorse, only the images from before endorse.

I ran the test 3 times in total. And for each test run I inserted 2 valid cheques. I did not include any non-valid cheques, not did I mark any cheques for Return. Both cheques were given an amount.

The subsequent test runs I observed the ChequeImages folder to see if after endorse scans were being created. I seen one file created each time I ran the test, although there were 2 cheques in the bunch. The first time the bmp created was called Front2.bmp and when i opened it it did not have the endorsement. Note: that after the test completed I checked the cheque in the bin and it was endorsed correctly on the front.  The 2nd retry was the same result except the bmp file created was called Front3.bmp - not sure if that is significant or not.



Summary:
 TIR 406440 - Request for TAR 395137 for use with 03.03.01 (TAR 395137 - Missing function mError from customisationlayer during CBC present. Dubai Issue.)

Description:
Due to thread collision in mBParse area the nested screen function is not found although ANDC configured OK.

Process Filename: C:\ssds\apps\customisationlayer.exe 
SupplyPoint Owner: NCRScotland.SSDS 
SupplyPoint Source:mError 
Description: <SCFILE> .\MAPSRTCore\Sources\cpp\mbparse.cpp </SCFILE> 
<SCLINE> 507 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 1 

Domain: 0 Error Number: 153 Worker Id: Description: Authoring 
Error, Class Evaluator - 
'DisplayNestedScreen' is not recognised as a variable or function name. 
</FREE> 




Summary:
SCPM: Both 'a' field and 'g' field included in TRequest when no CPM or SCPM present

Description:
This is from test 5.5.29.19.4.6.1.9. CPM and SCPM are not present. The TRequest table is set to report both 'a' and 'g' field. FS says in this case 'g' only should be reported. Test fails because both fields are included. Logs attached. I think it is low priority because it is also host responsibility to specify the field expected and because neither device is present.



Summary:
SCPM: Receipt contains pathname to incorrect cheque bmp instead of cheque image

Description:
This occurs in Test 6.1.13 step 6. Logs attached with screenshot of bmp names in explorer.

The filename on the receipt was:
C:\Program Files\NCR APTRA\Advance NDC\ChequeImages\CHQNCR-D143B2726BC20090610180238R001.BMP
The 10180238R part should be 10182300R.



Summary:
Updated DNS Suffix is not displayed in  option 6 "DISP CONFIG"  of TCP/IP Config menu.

Description:
PELE 2 Personna Machine with SDC Receipt and Journal Printers 

For test under 5.30 (Test options 6-16 when SST configured as Client)  

In test cases 5.19(Test Options 11(submenu options 3,4 only),option 13  when the SST configured asServer)  DNS Suffix updated through option 11 of TCP/IP config menu is not updated in the option 6 "DISP CONFIG" 




Summary:
ChequeManagement.H doesnt include a preprocessor definition to protect against multiple includes, resulting in the redifinition of symbols

Description:
ChequeManagement.H doesnt include a preprocessor definition to protect against multiple includes, resulting in the redifinition of symbols



Summary:
Supervisor Author Project cannot be built with IT9.

Description:
With ANDC 93.04.00 - IT9 build, supervisor Author application is not building.
Please see attachments for the error log.



Summary:
CPM Functionality not working in build IT9

Description:
The code thinks that SCPM is Present. 

Reddy recorded this failing test:
Cheque is not deposited after sending the CPM_TR11 transaction reply

Build: AANDC IT 9 
XFS : 05.00.01.18

Tested on a CPM 4 machine.
1. Insert card and select Cheque deposit
2. Insert Cheque and select deposit, send CPM_TR11 ( which we use very commonly).
3. Processing transaction screen is shown for more time.
4. Cheque is captured after some time and Cheque captured message printed on Journal. there is no receipt delivered as the cheuqe is captured.

Logs attached.





Summary:
Advance NDC PC delivers Supervisor.exe

Description:
Supervisor is now a module and the .exe is not needed, so better not deliver it.
Possibly a bug in andc.cmd, which forgets to delete it, while it seems to be able to delete the lot of exe's from the Customisation Layer modules.
Affects Dev PC (Supervisor.exe in \ntglobal\final\xfs\dll) and also Runtime SST (Advance NDC).
Not a big issue, but would be good to tidy this up ... possibly this issue exists from 3.3 days ... apologies.
Jan



Summary:
NDC Renderer and NDC State produce too much debug information even when things work well

Description:
The amount of debug traces is huge and is causing performance delays - obviously mainly in lab testing, but will also have an effect on production environment.



Summary:
STATEDATA debug log for Bunch Cheque Accept State does not match FS

Description:
The state table parameters logged for 'Please Remove Refused Cheques Screen' and 'Retracting Cheques Screen' are wrong compared to the spec.



Summary:
CCM TCPIP .Net Supervisor Tasks should offer soem way of enabling/Disabling  DHCP through a menu option

Description:
Although DHCP is automatically disabled when setting network values -the user may wish to re-enable or disable manually



Summary:
SCPM: Accept flow is looking at the wrong parameter for the refused reasons

Description:
It looks like our implementation is wrong ¿ the flow is looking at the wrong parameter, so matches what was being shown in the debug.

Our sample flows match the `wrong¿ code also ¿ which is why it works for us.



Summary:
EJFileName is getting created wrong in CD and DVD disks

Description:
EJ FileName is getting created by appending EJRCPY.LOG to the actual EJfilename.
Steps to Recreate:
1. Enable EJ and MultipleDestinations.
2. Select INITEJ in REPLENISH menu - Drives on the SST will be shown.
3.Select DVDRW or CDRW in drive list.
4.File name in the disk will be EJ______.001EJRCPY.LOG,  it should be EJ______.001.

BuildDetails : AANDC IT9
Log are attached.



Summary:
cheque depositing to bin1 when left in transport

Description:
For test 5.26.2.1
Steps to reproduce:

1.Insert cheque using wosa tool and the cheque is in transport.
2.Enter supervisor and exit.
3.On supervisor exit,the cheque is captured to bin1 instead of bin2.
 
Test no: 5.26.1 also has similar behaviour and is fail for the same above reason.



Summary:
VDMListener worker needs to be  to signal on  VDM requests in all modes

Description:
From: V, Kiran 

 we are able to select Mast icon and go to Diagnostics from Select Menu in Supervisor mode. But when we tried to do the same while the ATM is in OOS mode, the status of our authored appln is still remaining in ENTERPENDING mode(when we check VDM status in WosaTool). But appln core is active and just waiting for our authored appln to acknowledge and is not entering to Supv mode(not going to select menu) except it displays the screen as "Supervisor Mode".
 The authored application is waiting at VDM Listener itself even when ATM is OOS.

Hi Andrew,
 
He has an always active VDM Listener in his separate Authored APP but he finds that of the ATM is OOS but not in Supervisor and the MSSA is invoked, the VDM Listener in his Authored APP is not signaling. 
 
I noticed that at this point the VDM listener in the Supervisor dll will not be active...so how is the appcore detecting and what is it using to drive the system menu to answer the VDM request? 
 
Zubair




Summary:
The CodelineHeight registry key value should be  45 on USB Printers

Description:
 if you scale the cheque image for both rawdata and Forms based Printing as CodelineHeight =40 looks  printing of cheque image the full codeline is not blackend or whiten. So codelineHeight should be 45 on USB Printers.

 Change CodeLineHeight registry key value from 40 to 45  in UniversalPrinters.reg file



Summary:
SMS Data Collector was incorrectly hard coding the Clear / Backspace Keys and cursor position

Description:
SMS Data Collector was incorrectly hard coding the Clear / Backspace Keys and cursor position - Instead, the SP should be queried to determine what is available for use.



Summary:
Application crashed when Retract bin full on BNA2 and BNA is initialised

Description:
Tested with XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.02 + ANDC 93.04.00.08(ACTIVE XFS CONTROLS 92.11.00.01).
Hardware BNA2
Test no: 5.5.1.1.2.13.1.2
Recreation scenario:
1. Set option 44 to1
2. Send SETCLOSE2, GIS
3. Insert more than 90 say (95 notes) and and let confirmation screen time out. Card ejected and notes remained at ESCROW. 
4. Enter supervisor and Do Init BNA. Initialization started and crashed with please wait screen. The retract bin became full.
Logs are attached.



Summary:
*.gph files not getting deleted from C:\Program files\NCR APtra\Advance NDC\Data( in few scenarios)

Description:
Test 7.2.1 from 5.6.1-Universal Printing.doc

1. Start the Applications, Send OOS, Try to Print a BMP using escape sequence G, Image printed on receipt and Journal and *.GPH file created in the Data folder. Go in supervisor and exit from supervisor. *.GPH files are not deleted. these files are deleted only in the close state when we perform a transaction and try to print on receipt 

2. Start the Applications, Send OOS, Try to Print a BMP using escape sequence G, Image printed on receipt and Journal and *.GPH file created in the Data folder. Send GIs and Perform a transaction which will print on to Journal ( and not to receipt). *.GPH files are not deleted.

3. Start the application. Delete any *.GPH file ( if only present).Perform a transaction which will print on to Journal only( should be a Graphic image print) ( and not to receipt). *.GPH files are not deleted in the close state.



Summary:
TCPIPSupvTask: Change TTUForm to include "Printe Requested" form

Description:
TCPIPSupvTask: Change TTUForm to include "Printe Requested" form



Summary:
TAR 395635 - Commence Reprint being printed eroneously on journal

Description:
As previously sent in two emails and issue confirmed by RL: 

From: AbuMahfoud, Bahjat Basem 
Sent: 24 November 2008 05:22 
To: Auto-EMail, FGSC 
Subject: Journal Printer - Printing Commence Reprint between TRX Data 


Attachments: Document.pdf; Document2.pdf; Picture (Metafile) 
01 - Employee name: Bahjat Abu Mahfoud 
05 - Country: UAE - AUH 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +971 50 6119945 
20 - Customer Name: Al Hilal Bank 
25 - Priority: Priority 3 
30 - Products Affected: 6632 
35 - Platform OS: XP SP2 , XFS 04.05.01 
40 - Application: AANDC 03.02.01 with TAR 378052, 
50 - Environment: Live 


I have eventually received logs for this issue (Richard previously suggested 
AA-NDC had a problem but needed logs to verify - details in emails below) as 
requested and myself and Peter C have had a good look through them. It
looks to us as well that there is a problem somewhere here, but in something 
that is not fully logged and may be buried in a dll somewhere! Not sure as
you can tell :-( I apologise Richard as I know you are onsite now for a very 
urgent issue. 

We noticed a couple of strange entries in the logs and concentrated on and
around a txn at *078*01/18/09*09:03* record 4795 as shown on the paper jrnl
scan: 

[01/18/09 09:03:55] customisationlayer 18/01/2009 09:03:55.343 Bucket
inactive or duplicate entry008090118090355020000000010005010101010100000000

[01/18/09 09:03:55] customisationlayer 18/01/2009 09:03:55.359 Execute(104
(WFS_CMD_PTR_RAW_DATA),,dwTimeout=0)=-52 
RequestID = 46626 
hService = 319 
hResult = -52 (WFS_ERR_INVALID_DATA) 
u.dwEventID = 104 

(Date)18.01.2009 (Time)09:03.55,359 
XFS UJPTR Service Provider, XFS-DeviceControl 
<FREE>Worker hService: 319 (0x0000013f), RequestId: 46626
(0x0000b622)</FREE> 
<SCFILE>ActivityCmdRawData.cpp</SCFILE> 
<SCLINE>119</SCLINE> 
<FREE>WFS_CMD_PTR_RAW_DATA input parameter, ulSize, is invalid
rawData->ulSize [0]</FREE> 
=============================================================================
== 
Its wrong...'commence reprint' should not be printed like this. 

Debug log will be helpful. As will the customers HB files from an affected
unit. Just set option 16/17 and copy on the customers files to a unit here 
and see what happens. Should get the same effect. 


Richard. 
=============================================================================
== 




Summary:
TAR 393775 - PRN files over 32K in size do not print correctly to the USB receipt printer

Description:
Printing prn files ( created with NCR USB 80mm Renderer ) to the USB receipt 
printer that are over 32k in size there is a break in the graphic with
characters inserted in the line that breaks the graphic. 





Summary:
TAR 405266 - EMV multiple application select does not work due to AA-NDC 8 fdk state issue

Description:
Further to the demo of the issue I given to Euan yesterday and Euans
analysis of the issue this P2 TAR is being raised in order to get a fix for
this external customers issue. 

Reason for P2 --- This is causing great issue during an EMV certification 

Issue recreation summary: - 

Enter a card with more than one emv application and allow multiple
application selection screen to timeout. 
If allowed to timeout the card holder is asked if they want more time or
not. 
If they press yes - they go back to app selection again (correct) 
If they press no - they go back to app selection again (wrong) 
If they press nothing - they go back to app selection again (wrong) 
If they press cancel on the EPP - app moves to close state as per download
(correct). 

This worked without issue in AA-NDC 03.02.01 with EMV 02.01.01, but fails as 
above with AA-NDC 03.03.01 and EMV 02.01.01 (with required hotfix). 

Stephen Peat said this was effectively an 8 fdk select state within AA-NDC
that is running. Euan has confirmed this is indeed an AA-NDC issue.



Summary:
"57 - WRITE SIGN" should not display the drives list to copy the files when there is no Cash in Device in the ATM

Description:
I saw that "57 - WRITE SIGN" displays the drives list to copy the files when there is no Cash in Device in the ATM, this should display the "Device not Present"

Where as, "55 - Create Sign" and "56 - Extract Sign" shows " Device not Present" where is no Cash in device in the ATM machine.




Summary:
TAR 406088 - Paper low in Receipt printer is reported incorrectly in the journal 

Description:
Paper low in Receipt printer is reported incorrectly in the journal. 
The receipt printer is reporting low paper to the host in an unsolic 
(12:00:35 # 32 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]G0[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]2111]) and also when asked by the host
for supplies data 
(12:12:03 # 44 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]IAD1[Unicode-x1D]E11111[Unicode-x1D]G2111[Unicode-x1D]H211[Unicode-x1D]V11111] 
It is being recorded in the journal as 1 sufficient paper 000p[Unicode-x1B][040q[Unicode-x1B](I 
*0000*1*G*0,M-00,R-1111 
Which should be 000p[Unicode-x1B][040q[Unicode-x1B](I *0000*1*G*0,M-00,R-2111 

See STAR for mor info



Summary:
GBNA.ini file not creating during InitBNA as well as Exiting Supervisor

Description:
This GR1T has 2 issues 
1)GBNA.ini file is creating during SOD
 2) Since it creates GNBNA.ini file during SOD, I deleted that file after SOD  as part of these 5.4.1.6.1.2.9.12.2 & 5.4.1.6.1.2.9.13.2 test cases, After that no GBNA.ini was created.

Tested with Build Stack:     XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.08 
hardware :  GBNA 
Test number :5.4.5.2.1.2.8.4 

Recreation scenario:
I.InitBNA
---------
1. Close Apps. Remove gbna.ini file from c:\Program Files\NCR APTRA\Advance NDC\Data folder
2. Rack out the cassettes
3. Start Debug log,NDC host and ANDCApps
4.Delete GBNA.ini file from Data folder again
5.Go to Supervisor,rack in the cassettes back and run InitBNA
6. No GBNA.ini file was created at Data folder
7.Debug logs attached this GR1T "GBNA.ini_1.2.9.12.zip"

II.Exit Supervisor
---------------------
1. Close Apps. Remove gbna.ini file from c:\Program Files\NCR APTRA\Advance NDC\Data folder
2. Rack out the cassettes
3. Start Debug log,NDC host and ANDCApps
4.Delete GBNA.ini file from Data folder again
5.Go to Supervisor and run InitBNA
6.Exit from Supervisor
6. No GBNA.ini file was created at Data folder
7.Debug logs attached this GR1T "GBNA.ini_1.2.9.13.zip"




Summary:
Proper acknowledge\Error message is not shown when 0- RMT ADDRESS selected in 37 - TCP\IP CONFIG menu

Description:
Test number 5.37 from the attached document to RFC 419954

when 0- RMT ADDRESS selected in 37 - TCP\IP CONFIG menu,  "XML file error" should come if Remote Host attribute is removed from "TCPIPCommunicationServiceConfig.xml". But "Please wait" is shown and the application hanged.

Logs are copied into the folder with this GR1T number in the path \\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT8

This issue is seen by Laxmi Y



Summary:
 TAR 403262:  Issue with Prefill data in NDC Echo Worker

Description:
Short Description(s):
  1) Issue with Prefill data in NDC Echo Worker






Summary:
TAR 400490 - Not always responding to GOS after exit Supervisor

Description:
If an operator exits supervisor and then immediately re-enters supervisor.
Host sends a Go OOS command after the exit supervisor which is not
immediately actioned because supervisor is re-entered, but the Go OOS is not 
actioned (no Ready 9) after the subsequent exiting of supervisor. 

The incident is a priority 2, as the customer is holding up a rollout
because of this issue. 
Logs below show issue 

16:55:48.484 - 05/03/2009 #0004 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]2] - GOS 
16:55:48.984 - 05/03/2009 #0005 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]G0[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]2111] 
16:55:49.484 - 05/03/2009 #0006 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] - R9 to GOS 

16:56:02.875 - 05/03/2009 #0007 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21] - Sup Entry 
16:56:10.843 - 05/03/2009 #0008 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R09] - Sup Menu 9 Exit 
16:56:29.578 - 05/03/2009 #0009 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] - Sup Exit 

16:56:30.375 - 05/03/2009 #0010 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]2] - GOS - No response 

16:56:31.437 - 05/03/2009 #0011 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21] - Sup Entry 
16:56:36.031 - 05/03/2009 #0012 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R09] - Sup menu 9 exit 
16:56:55.562 - 05/03/2009 #0013 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] - Sup Exit 

16:57:58.046 - 05/03/2009 #0014 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]71] 
16:57:58.312 - 05/03/2009 #0015 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]HA0001[Unicode-x1C]B00[Unicode-x1C]CC00[Unicode-x1D]D01[Unicode-x1D]E01[Unicode-x1D]F02[Unicode-x1D]G01[Unicode-x1D]H01[Unicode-x1D]K00[Unicode-x1D]LD7[Unicode-x1D]O01[Unicode-x1D]P01[Unicode-x1D]Q02[Unicode-x1D]R02[Unicode-x1D]S10[Unicode-x1D]Z0
2[Unicode-x1D][ 
01[Unicode-x1D]V01[Unicode-x1D]a02] 

16:58:02.203 - 05/03/2009 #0016 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1] 
16:58:02.281 - 05/03/2009 #0017 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9]



Summary:
TAR 405082:- Setting worker attribute of Video Display worker causes Author to terminate

Description:
APTRA Author User's Guide (from release 03.02.01 and 03.03.00) lists the
   "video player" worker under "The following workers are unchanged but unused
   in the supplied Advance NDC application as they are not required for the
   standard Advance NDC functionality."   Therefore worker is supported.
    
   Create a new application in a 03.02.01 development environment. Add a a
   video player worker, and try to set the "Video String" parameter.   The
   result is that APTRA Author crashes and terminates.




Summary:
TAR 399521 - Bad card read loops to suspend before ejecting card

Description:
Scenario 
6625 

Enter card 
Hear it retrying 
eventually - unable to read card screen is displayed - card not ejected 
Idle screen displays and card mei flashes 
Card retrying 
eventually - unable to read card screen is displayed - card not ejected 
Idle screen displays and card mei flashes 
Card retrying 

Continues until ATM goes out of service suspended - at no point does PIN
entry display. 

May be incorrect handeling of eject on suspend from TAR 377795 
For logs and any further information contact Robert Whyte FGSC



Summary:
TAR 405265 - No security trace written to EJ for INIT BY SUPERVISOR

Description:
Ps have reported that While certifying AANDC 3.2 and 3.3, we found out that
when you do an Init EJ, the following gets recorded into the EJ: 

INIT BY SUPERVISOR 
*05/12/2009*15:01* 
B05D130 

In the highlighted line the customer is missing the Security Trace Number,
which causes havoc in their EJ viewer solution, because that one expects: 

*xxx*05/12/2009*15:01* 

After further tests in Dundee, the following is found when the EJ is copied
to flex disk : 

*084*05/22/2009*12:24* 
CHEQUE CAPTURE FAILED 
TSN: 
CARD: 0XXXXXXXXXXXX000000000 
[Unicode-x1B][020t * *1*P*21,M- 
*085*05/22/2009*12:25* 
[Unicode-x1B][05pSUPERVISOR MODE ENTRY[Unicode-x1B][00p 
[Unicode-x1B][020t * *1*R*04 
[Unicode-x1B][020t * *1*R*04 
[Unicode-x1B][020t 
INIT BY SUPERVISOR 
[Unicode-x1B][020t 
*05/22/2009*12:26* 
818F0200 

All above is on floppy 

All below is in the EJlog on HD 

[Unicode-x1B][020t*086*05/22/2009*12:26* 
[Unicode-x1B][05pEJ LOG COPIED OK[Unicode-x1B][00p 
[Unicode-x1B][020t 
818F0200 
[Unicode-x1B][020t * *1*R*09 
[Unicode-x1B][020t*087*05/22/2009*12:26* 
[Unicode-x1B][05pSUPERVISOR MODE EXIT[Unicode-x1B][00p 
* *1*P*20,M- 

It seems strange that INIT by Supervisor doesn't have a security trace but
EJ COPIED OK does. 

I also have this traced in the same EJ from a while back : 

[Unicode-x1B][020t*059*02/27/2009*11:12* 
[Unicode-x1B][05pEJ LOG INITIALISED OK[Unicode-x1B][00p 
[Unicode-x1B][020t*060*02/27/2009*11:12* 
[Unicode-x1B][05pEJ STARTED BY OPERATOR[Unicode-x1B][00p 

So, EJ STARTED BY OPERATOR also has a trace number, but not INIT BY
SUPERVISOR. 
And another thing just noticed, the format should be trace*date*time and on
the next line the string, eg 

[Unicode-x1B][020t*060*02/27/2009*11:12* 
[Unicode-x1B][05pEJ STARTED BY OPERATOR[Unicode-x1B][00p 

So we should expect the same for INIT BY SUPERVISOR for example : 

[Unicode-x1B][020t*060*02/27/2009*11:12* 
[Unicode-x1B][05pINIT BY SUPERVISOR[Unicode-x1B][00p 

Also, it appears that the ref manual appendix A, T journal trace states that 
t53 should have a security trace number : 

?T? Journal Trace 
?T? or ?t? screens contain the following messages: 
Envelope serial number 
Security trace 
Presenter error 
Envelope length 
Journal reprint. 

t53 INIT BY SUPERVISOR 




Summary:
Difference in characters of Arabic Fonts files.

Description:
Arabic Font Files (Test case 12.2 in 5.6.1-Universal Printing.doc)

Raw Data 

Character set 1:
For 3rd character # is printed instead of pound.Difference in 37th character.
Character set 2:
For 3rd character # is printed instead of pound.Difference in 56th character.
Character set 3:
For 3rd character # is printed instead of pound.Difference in 51th and 41st character.
Character set 4:
For 3rd character # is printed instead of pound.
Character set 5:
For 3rd character # is printed instead of pound.Difference in 37th and 41st character.

Forms 
Character set 1:
For 3rd character # is printed instead of pound.Difference in 37th character.Size variation of 44th and 48th cahracter.
Character set 2:
For 3rd character # is printed instead of pound.Difference in 56th and 63rd character.52,53 Characters are not thick as remaining cheracters.
Character set 3:
For 3rd character # is printed instead of pound.Difference in 51th ,41th character.52,53 Characters are not thick as remaining cheracters.
Character set 4:
For 3rd character # is printed instead of pound. 64 character didn't print properly.
Character set 5:
For 3rd character # is printed instead of pound. 62rd character didn't print properly.


on Alphanumeric:
After sending FONTID 1 message , is printed on statement printer in pace of ; .
After sending FONTID7 GBP sign should be printed on statement printer but not getting this sign.




Summary:
UEH on start-up on a CPM4 (and also seen UEH on start-up on a single cheque SCPM)

Description:
Reddy has seen an Application crash issue with IT 8 build on a machine which has a CPM4.

1. Start the Application, 002 Screen is shown and Apps got crashed.

He has copied all the required log files to this area.

\\wgbaandcinteg2\GRITLOGS\Investigations\03.04.00\IT8\CPM Crash

Key Observations:
1. Debug log shows Applica.. (MAIN)(1412) 02/06/2009 20:51:52.953 + Bunch Cheque Device Available 
2. Apps Crashing because of the SSDScpm.dll which showed in the UEH log.




Summary:
Application is getting crashed when INIT EJ option is called from supervisor.

Description:
When we selected INIT EJ option from supervisor(Access->option 40) AANDC application is getting crashed(93.04.00.08). 
appsight log is available in below location 
\\wgbaandcinteg2\GRITLOGS\Issues\ANDC 03.04.00\IT8



Summary:
C07 in resrvd.def does not reflect the change of path for Cheque Images

Description:
In build 08, the C07 screen still has the Advance NDC/Data path. The default in resrvd.def needs to match with the default in the registry, which is now Advance NDC/ChequeImages




Summary:
Unsol messages are not reporting to the NDC Host before powe up message

Description:
Unsol messages are not reporting to the NDC Host during Start of the day of AANDC - This issue has been observed during CPM and BNA Testing
BNA:-
I have seen the same issue when I did SOD tests on GBxx. W6 unsolicited Message sending failed due to comms are not opened by that time. More logs are added. Logs clearly says Message sending Failed (COMMS.log).
Can see w6 unsol in DEBUGOUT.log and can not find the same in NDCHostLog4005.log. There is GR1T raised on BNA for not reporting w6 unsol in SOD even when Escrow Notes CDI is showing counts.

CPM:-

issue is when there are unsol msgs during start of day(In my case CPM Power failure msg q3N). The unsols are not reporting to NDC Host application,which is still in listensing mode.

The unsol msgs is logs into Messageout.log but not to the NDC Host application¿.. And same issue is observed by srinivas when he was testing CIC power up message(w6)¿

To simulate this do the following steps

1) Initiate a Cheque Depoist transaction
2) Insert Cheque and select deposit on confirmation screen 
3).Send transaction reply to deposit cheque and immediately reboot the machine.
4. On power-up, it is obeserved that q3N unsol is not reported to NDC Host but it logs into messageout.log.




Summary:
IP Update - Turning off OCR on the PTR XFS SP for SCPM in order to have SCPM acting as CPM

Description:
Update IP to have this configuration for SCPM to be used as CPM



Summary:
TAR 406244:  "ReportCustomerData" value of 2 is not being handled by the CIC

Description:
See the STAR



Summary:
SCPM: NDCState should Dispose the flow once the flow execution has finished.

Description:
When a class implements IDispose and the user knows the object is not going to be used any longer, calling Dispose is a good practice to speed up resource de-allocation.



Summary:
Potential memory leak in BunchChequeID, ExecuteReset()

Description:
While integrating the Scan After endorse code, I spotted that in BunchChequeID class, there is a potential memory leak that would be seen for the Reset Command?

Allocation: in void BunchChequeID::AddListener(): ... eventHandler = new mDynamicActivator(d);
Deallocation only in destructor, but not in BunchChequeID::RemoveListener(). 

It is my understanding of the code that AddListener(), RemoveListener() are associated with each BunchChequeID::ExecuteReset() call - thus we will leak one instance of mDynamicActivator() for second, third etc. Reset Command sent.




Summary:
Advance NDC 93.04.00.08 does not execute CPM StartOfDay on a CPM Machine

Description:
Issue found in worker 10n10905dc130 - the Variant reported from the worker is 02, which is wrong.
Issue seems to be in the .NET code.
Attached Suresh's e-mail and also extra PD Trace for the .NET code. The GetIDVariant() returns 2. 
Or alternatively the worker needs to check if device is present.



Summary:
Bills are at exit and if Init BNA is executed, TXPOINT: NO TRANSACTION is printed on journal

Description:
Tested with XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.02 + ANDC 93.04.00.08(ACTIVE XFS CONTROLS 92.11.00.01).
CIC Dep Agg 1.03.02
Hardware : GBNA
Test no: 5.4.1.1.2.11.1
Recreation scenario:
1.Deposit following notes: 2* EUR 200 valid notes
2. Confirmation screen is displayed with notes inserted as 2
3. Press refund.Don¿t take the notes. Notes will remain at exit slot and w4 message is sent and BNA is fatal.
4. Switch to supervisor mode and run Init BNA
5. Check journal and TXPOINT: NO TRANSACTION is printed on journal.






Summary:
TAR 406088 - Paper low in Receipt printer is reported incorrectly in the journal 

Description:
Paper low in Receipt printer is reported incorrectly in the journal. 
The receipt printer is reporting low paper to the host in an unsolic 
(12:00:35 # 32 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]G0[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]2111]) and also when asked by the host
for supplies data 
(12:12:03 # 44 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]IAD1[Unicode-x1D]E11111[Unicode-x1D]G2111[Unicode-x1D]H211[Unicode-x1D]V11111] 
It is being recorded in the journal as 1 sufficient paper 000p[Unicode-x1B][040q[Unicode-x1B](I 
*0000*1*G*0,M-00,R-1111 
Which should be 000p[Unicode-x1B][040q[Unicode-x1B](I *0000*1*G*0,M-00,R-2111 

See STAR for mor info



Summary:
Reset failed is not printed on journal when lower transport is removed while initializing BNA.

Description:
Tested with XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.02 + ANDC 93.04.00.08(ACTIVE XFS CONTROLS 92.11.00.01).
CIC Dep Agg 1.03.02
Hardware : GBNA
Test no: 5.4.1.1.2.10.1
Recreation scenario:
1. Deposit following notes: 2* EUR 10
2. Press Deposit and don¿t send any reply 
3. Switch to supervisor and run Init BNA. Rack out lower transport while initializing.
Initialization failure is displayed on EOP. But reset failed not printed on journal.




Summary:
TAR 402725 - Form based receipt starts at top of paper, no margin for preprinted header

Description:
Customer issue is that receipts are being printed too near the top of the
receipt, overwriting the pre-printed header on the receipt paper. This did 
not occur with the previous release. 

Starting point : K01 screen, used to reset the receipt to default
settings. This includes the "Setting The First Line Position" control code
: 

1B 5B 31 36 33 75 Top margin 163/144 inch (this line is lifted
straight from the Reference manual) 

See STAR for mor info




Summary:
Application crash when tried to get amount using managed cpp cheque details wrapper

Description:
Application crash if accessed consumer entered amount (using cheque details wrapper managed cpp) without entering any thing in cheque details display state.
This is observed while testing the DBS exit code.




Summary:
When T_Point2 registry entry is changed to TRY, and reset at confirmation screen, TXPOINT:TRY not printed on journal during Init BNA after reboot.

Description:
Tested with   XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.02 + ANDC 93.04.00.08(ACTIVE XFS CONTROLS 92.11.00.01).
CIC Dep Agg 1.03.02

Hardware : GBNA
test no: 5.4.1.1.2.2.1
Recreation scenario:
1. Close the application and change the registry key value in this path:
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\BNA\CashInJPTR
T_Point2 as TRY.
2. start the application and Deposit following notes:
1* EUR 5 Valid notes
2*EUR50 Vaild notes
3.At Confirmation screen, reboot machine.
4.Start application again and switch over to supervisor mode and run Init BNA.
5.Journal shows TXPOINT:NOTES IN ESCROW instead of TXPOINT:TRY
Journal data is picked from WSC file instead of registry.



Summary:
AANDC CCM TCPIP - Firewall - When adding or deleting exceptions via the Advanced  Firewall settings - the confirmation is misleading

Description:
When adding or deleting exceptions via the Advanced  Firewall settings. The confirmation response just says "Firewall Added" or Firewall Deleted". This might cause someone to think that they had just disabled the firewall all together.AANDC need to modify the form to state Firewall Exception Added or Firewall Exception Deleted



Summary:
AANDC TCPIP Configuration Menu Changes required

Description:
Option 15 should be Multi Host (not option 17) - Option 17 should be XP Keep Alive (not Option 15)
Option 16 should be Named Remote Host Address 
Option 18 should be SSL
This requires updates to the Resrvd.def, Author work and SupvContainer and C# Wrapper



Summary:
CANCEL Key is not working in supervisor while running ¿Supervisor Menu testing (accessing supervisor options and prompting for username and password)¿ 

Description:
CANCEL Key is not working in supervisor while running ¿Supervisor Menu testing (accessing supervisor options and prompting for username and password)¿ on front monitor after running ¿ANDCSupervisorUserGroup.vbs¿.
 But CLEAR and ENTER keys are working fine and once correct username and apssword is given and pressed ENTER key it is going to next options aswell.

Added debuglog for ref.



Summary:
48 DISP RCNL LST - total value wraps onto next line and formatting is misalingned

Description:
When the number of notes, and total value for that denomination gets large, the data starts to look mis-alinged and wraps over a line. 

In the attached logs, the information for 116 * EUR 100 notes was printed OK on receipt and Journal, in that it all fitted on one line. If you run function
48 to display the, the total value spilled over to a 2nd line.

We need to think how large numbers of notes (at least 4 digit numbers), and large total value (6, 7 or 8 digit numbers) will be handled



Summary:
When TCP/IP and firewall configuration are  printed on Journal printer special characters are printed for small letter in the config information 

Description:
PELE 2 Personna Machine with SDC Receipt and Journal Printers

For test under 5.30 (Test options 6-16 when SST configured as Client)

In test cases 5.16(Test TCP/IP  Supervisor Options 6,7 when the SST configured asServer)  and  5.24(Test Option 14(Submenu options 9,10) when the SST configured as Server)when configuration information is printed on Journal, special characters are being printed for small letters.





Summary:
CCM TCPIP Printing Task - Should Display "Printing Requested" while the Print Command is being called and the "Printing in Progress" afterwards.

Description:
When the PrintForm command is started synchronously, the CCM Task should display Printing Requested and when the command returns with the print started then it should say Printing in Progress.



Summary:
48 DISP RCNL LST does not update date/time in header unless running first time after Supv entry

Description:
The date and time header used in functions 48 and 49 is only updated the first time the functions are executed after entering supervisor.

If you remain in supervisor for some time, and re-run 48 or 49, they show the same date/time as when the function was first run. I left the ATM on the Supervisor select menu all weekend
and re-ran function 48. It still had the same date/time as when the function was ran 2 days ago.

Exit Supervisor, enter supervisor and re-run 48/49 and they now have the updated date/time.

Logs attached



Summary:
48 DISP RCNL LST has incorrect date format in header

Description:
The FD, UTS, and code all have different formats for the date, in the header.

A code change is needed to have 2 digits for day, month, hours and minutes when each are < 9.






Summary:
CCM TCPIP - SSL - Default values do not match those documented in the SSL Help

Description:
the following Default values are incorrect comparing the help and the actual values
SecureHandshakeTimeout
SessionRenegotiateInterval



Summary:
Exporting PD Logs to drive causes the volume name to be changed

Description:
When exporting PD Logs using Supervisor function, when exporting to drive other than CD, the volume name of the drive is getting changed.

This is acceptable for flex drives, however, as export can happen to Local Disk drives / network drives, it shouldnt attempt to change the volume name

This will most likely cause problems when running with Security + Solidcore (Local Disk) and will fail in the case of network drives.



Summary:
PD Export Logs can only export 1 investigation to a drive at a time

Description:
PD Export Logs can only export 1 investigation to a drive at a time.

This is inconvienient for Network / Fixed drives, as the investigation needs copied and removed before a new one can be created
However, for CD/DVD this is a problem, as effectivly only 1 investigation can be written to each CD / DVD

Possible Solutions - 

Each investigation is identified by a GUID in PD - Use this Guid in the naming convention - <GUID>_1.cab
Use the naming convention <TIMESTAMP>1.cab
Put each investigation in a unique directory



Summary:
EXTRACT SIG: Single 6 digit entry for the date in i38 screen in Replenish Func 56 EXTRACT SIGS.

Description:
The screen length for the Enter Start Date line is 32 chars which is max size of operator panel. The End Date data input is then put on line below the End Date string. The i38 screen displays "/"'s and expects the Enter key to be pressed after each part of the date. This is different to rest of NDC where 6 digit string is expected and Enter pressed once. 
Also, camera function shares this screen and seems to try to use this method of input so consolidated fix must be performed in conjunction with ANDC team.
As one other issue with this function, when the i38 screen is shown in EXTRACT SIGS function there is no header to give the operator some sort of context as to the Start and End Date they are being asked to enter, so this should be added too.



Summary:
CCM TCPIP Supv Task - Display Config - entering Invalid Entry - Pressing 0 shows the screen "Invalid Entry" but pressing other keys i.e. 88 is showing the previous scree.

Description:
We have the option to press 99 to go to next screen .Pressing other values except 99 should show "Invalid Entry" on screen. If we are pressing 0 then we are able to see invali screen but if we are pressing other entry except "99" and "0" then previous screen is shown.

Steps to recreate this issue :-

1) start the AANDc application.
2) Go to supervisor menu.
3) Got  5(Configure menu)-> 37(TCP/IP) menu.
4) select option 6(i.e- Display TCP/IP menu) and press 88.
5) Previous screen will be displayed





Summary:
48 DISP RCNL LST does not display correctly on front interface

Description:
Procedure to reproduce the issue

ATM : - GBRU
Testcase no from Test Log:- 5.4.18.1.5.2 (5.2 from 421146 UTS)
Software Stack: 
XFS :- 05.00.01.10  ; AXFS :- 92.11.00.01
CIC Dep Agg :- 01.03.02 
ANDC :- 93.04.00.08 
CIC :- IT 4 (91.03.00.04)

Run test 5.2 from 421146
Transfer interface to front and run function 48

Same information was seen on EOP is not shown. It displays :-

    BNA RECONCILIATION
LIST
20
60
80
0




Summary:
TCPIP Supervisor Print TCPIP Configuration and Print Firewall should check presence/fitness of receipt/journal before invoking CCM TCPIP Task.

Description:
PELE 2 Personna Machine with SDC Receipt and Journal Printers

For test under 5.30 (Test options 6-16 when SST configured as Client)

In test cases 5.16(Test TCP/IP  Supervisor Options 6,7 when the SST configured asServer)  and  5.24(Test Option 14(Submenu options 9,10) when the SST configured as Server),when  receipt or journal printer is disconnected and if option to print configuration in choosen, "Printing in Progress" message is displayed.



Summary:
Reset is called again on Supervisor Exit when Device is not fatal 

Description:
On supervisor exit ,reset is called again ,when reset is successful in 54 INIT BNA and devive is not fatal.



Summary:
The version of Resrvd.def file is not merged to working member version - 1.113.1.12.

Description:
Resrvd.def file with version 1.113.1.12.1.2 should be merged to 1.113.1.12 as part of GR1T RFC 421146 implementation.

The workaround for this is to pick the version of 1.113.1.12.1.2 for IT.



Summary:
CCM TCPIP Printing Task - Should Display "Printing Requested" while the Print Command is being called and the "Printing in Progress" afterwards.

Description:
When the PrintForm command is started synchronously, the CCM Task should display Printing Requested and when the command returns with the print started then it should say Printing in Progress.



Summary:
Encryption keys loaded with the previous version of XFS and AANDC is not getting reflected after installation of latest version of XFS and AANDC for DAPI 7

Description:
The encryption keys loaded with the previous version of XFS and AANDC(e.g - XFS 5.0 and AANDC 3.3)  is not reflected on the latest version of XFS and AANDC(e.g - XFS 5.1.10 and AANDC 3.4) when we have installed the latest vaersion on same SST

Steps to recreate this issue :-
1) Install XFS5.0 and then install AANDC3.3
2) Load A key in DAPI7 mode (i.e- restricted mode) 
3) Do few transactions in such a way that Pin Entry state is called to confirm that keys are loaded properly. 
4) Again Ghost the SST with XFS 5.1.10 and AANDC 3.4 latest build.
5) Check the encryption keys in the access menu in supervisor. 
Result:-
The "A" key loaded in the previous installation will not be reflected in the latest installation.

The Appsight log is copied at the following location

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT7\GR1T433823




Summary:
Auto EJ Init operation when Auto INIT Copy drive is specified does not makes a copy of EJ in any of drives :CDRW,Networkdrive or fixed Drives or USB

Description:
For test case 5.17.2 Automatic EJ Init operation when the Automatic INIT Copy drive is specified makes a copy of the EJ in CDRW, Network drive or Fixed Drive or USB or Floppy.

Automatic EJ Init operation is not copying the EJ in any fo dirves CDRW, Network drive or Fixed Drive or USB , when  Automatic INIT Copy drive is specified.




Summary:
Advance NDC Installer - comp.ini does not define enough disk space required

Description:
The _comp.ini file for Advance NDC does not define enough space required.
According to Component Builder FS (445-0665135D), the unit is in KB.
Thus for Runtime installation, currently this is in the comp.ini
 MaxDiskSpace=5000
which means approx 5MB. Surely ANDC runtime installation needs more disk space.

Issue has been spotted when working on updates for .NET Assemblies _comp.ini. Usually probabably not seen as there is enough disk space. Thus making this the lowest priority issue.




Summary:
When Bunch Cheque Accept State Enable Image Processing parameter is set to any value other than 000, an exception occurs

Description:
Detail is as the summary and further information in the attachment.



Summary:
When only 1 page to display in the Reconciliation List, then there is no need to display <ENT> for more string.

Description:
Only one page to display in RCNL LST.
In this case, "SELECT FUNCTION _" should appear instead of <ENT> for more.



Summary:
When Printer is configured to BOTH, then Reconciliation List is not reporting.

Description:
When SET PRINTER option is set to 3 (BOTH) and option 48 is selected, then Reconciliation list is not printed.



Summary:
While zero counts in Deposited counts and non-zero counts on retract and retain fields, results in not displaying the Reconciliation list.

Description:
1: Clear counts
2: Enable Retract option.
3: Insert some valid notes and let them get retracted.
4: Go to Supervisor option 48 and see RCNL report.
               There is no report generated.



Summary:
Empty Reconciliation List message is not displayed on Supervisor

Description:
When Counts are cleared using 53 CLR BNA and option 48 - DSP RCNL LST is run, there is no error message - "RCNL LST EMPTY - CNTRS CLEARED" displayed.



Summary:
Proceed Key in the Cheque Detail Display State does not exit the state in Operation Modes 2&3 if more cheques can be displayed and Zero Amount is allowed

Description:
The Proceed Key in the cheque detail display states appears to be functioning in the same way as the Enter key ie selecting this key displays the next cheque and only when the last cheque has been displayed is the state exited.

This is with Operation Modes 2 & 3 and Allow Zero = 001 (zero amount allowed).  I had expected to be able to select Proceed on any of the cheques displayed before the last one to exit the state.

Had a quick word with Gordon about this in case a clarification was required in the FS but he believes Proceed should exit the state also in this scenario.



Summary:
IPs: ReportCustomerData registry key acceptable values are incorrectly documented.

Description:
Regarding the ReportCustomerData reg key.
PROBLEM:
It was originally documented as having 0, 1 and 2 for the values.
	0 - do not report customer data
	1- report customer data only when error
	2 - report customer data always
The code in fact has always treated the reg key as a boolean value.
	False - do not report customer data
	True - report customer data always
So, effectively we have always supported values of 0 and 2.
The latest docs reports this in a slightly ambiguous way, giving the default value but not the other options:
<<
	ReportCustomerData 	0
	To journal the cardholder PAN, the PANDX
	field must be configured in the FIT as
	described in the APTRA Advance NDC,
	Reference Manual.
>>
If it was this alone then most people would guess 1 would turn it on. However the change history lists the value of 2 not being supported. This is the part that seems to be misleading for the customer.
SOLUTION:
The docs should be updated to contain the detail from the FS:
<< 
	ReportCustomerData	REG_DWORD	Whether to print the cardholder account number on the journal
	whenever journalling status information.	
	Value = 0 (Default) - Does not print cardholder account number. 
	Value = 1 - Prints cardholder account number. Note: if no PAN then A/C NO. UNKNOWN is printed instead.
>> 




Summary:
SCPM IT7 - When retract bin configured as bin 2, capture unsol reports bin number as bin 1

Description:
SCPM SP registry updated to include BinConfiguration = 1.  This configures bin 2 as the retract bin.
Noticed when this was set that when cheques are captured, field g2 of the unsol reports reports bin number as 01.  
Response to the extended terminal command send supply counters correctly shows the cheques added to bin 2 count as does DISP CNTRS in supervisor Replenish menu.



Summary:
SCPM IT7 - Amount Entry in Cheque Detail Display State does not function correctly

Description:
A few anomolies seen when working with the amount entry in the cheque detail display state - 
1.  the amount entry field displays up to 12 characters when configured for the default of 8 via the ECP option
2.  when the display has reached its maximum (ie as per the ECP setting - 12 by default at the moment) it should be cleared back to 0.00 but this doesn't happen
3.  32 characters can be selected via the pinpad (as per the IP) however entering these quickly causes the keyboard to hang up at times.  To get out of this, the timeout from the state has to happen then the keyboard is enabled again.  This was more of a stress test but easily repeatable.




Summary:
AANDC uses a Default Template for PD. For Activate Related Issues found in NDCSPL Component need to Provide an Alternative Template with minimum Performance Impact

Description:
After Discussions with Ranjith it would appear that although our default template is sufficient for AANDC Author and Core C/C++ Code, For the managed Code and .Net Assemblies it i sunlikely this default template is going to be suitable. The concern is that switching on all tracing will however be too verbose and result in performance impact. There needs to be an alternative template that we provide that covers the needs of the .Net Assemblies for AANDC but does not adversely impact performance. This should not be the default. This Task Can be done outwith the release timeframe since the Template does not need to be associated with the install - it can be provided to FGSC for support incidents as XFS currently do.



Summary:
405529:  Keyboard Mapping does not work for any of the states other than 4FDk and 8FDK

Description:
1) Keyboard Mapping does not work for any of the states other than 4FDk and 8FDK

Current Full Description:
   UK PS had raised an incident with us 2 weeks back asking if keyboard mapping 
   was supported from local file. We had confirmed that it works and is
   supported. I had tested at that time for E & Y state. 
   
   Now they have reported that Keyboard Mapping does not work for any of the
   states other than 4FDk and 8FDK. It does not work for TimeOut, Amount Entry, 
   Info Entry, Enhanced Amount Entry and FDK Information Entry states. I have
   tried testing for Timeout and Amount Entry states and found that the same
   does not work even if we send keyboard mapped screen from host. Chapter 4 in 
   the reference manual has examples of keyboard mapping. If we create a
   message having similar details, the functionality still does not work as
   described in the manual. 
   
   So essentially this is a TAR which need to be tested at 2 different levels:
   1. By sending keyboard mapped screens from host for all states.
   2. By having  keyboard mapped screens in the Local Customisation Data.
   
    
   




Summary:
Drives selection menu should not be displyed if there is no PD started for COPY PD Logs

Description:
Scenario:
1. Start the Applications. Go to Supervsor
2. select 5 - Configure
3. Select 44 - Trouble shooting
4. Select Copy logs with out starting the PD.
Drives selection is shown which should not show. Should throw a error saying investigation not started with out displaying the drives.



Summary:
TAR 395137 - Missing function mError from customisationlayer during CBC present. Dubai Issue.

Description:
Due to thread collision in mBParse area the nested screen function is not found although ANDC configured OK.

Process Filename: C:\ssds\apps\customisationlayer.exe 
SupplyPoint Owner: NCRScotland.SSDS 
SupplyPoint Source:mError 
Description: <SCFILE> .\MAPSRTCore\Sources\cpp\mbparse.cpp </SCFILE> 
<SCLINE> 507 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 1 

Domain: 0 Error Number: 153 Worker Id: Description: Authoring 
Error, Class Evaluator - 
'DisplayNestedScreen' is not recognised as a variable or function name. 
</FREE> 




Summary:
Pressing Clear key at the time of entering TCP/IP config option clears the previous key and pressing the other key after that overrides the last key present.

Description:
If Clear key is pressed at the time of entering data in TCP/IP key options then last key is cleared and the next data pressed on Pinpad overrides the last key. If the last entered value is "." then we have to press twice to clear this value.
Steps to recreate this issue:-
1) In test case 5.19 in step 18 press NCR. then press clear. "." will not be cleared.Now enter "NCR.COM" , and press clear key. M is cleared and after that press M again. M will be overridden on "o" vale which is the second last value entered.

Please find the ASL file from the following Location: -

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4\GR1T433414



Summary:
Application hangs when entering the alpha numeric keys many time in TCPIP cofig menu options

Description:
Steps to recreate this issue
1) In test case 5.19 in TCPIP_SUPVTASKS UTS, try to enter alpha numeric value in steps 17 ,25,29.
2) Repeat the above steps several times.
3) after repeating above steps several time PINPAD will not work and application will hang 

 the ASL file is kept at the following location:-

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4\GR1T433412

PD Trace Log Attached




Summary:
TAR 401602 - Using animated graphic in transaction request state screen causes hang

Description:
When an animated graphic such as an AVI or an MPEG file is used in a
transaction request state screen definition, the system hangs. 

To recreate, change the transaction request state definition to use a
graphic, e.g. in this case it was screen 026 : 

<FF><SI>@@<ESC>PEPIC100.PCX<ESC>\ this works 
<FF><SI>@@<ESC>PEPIC101.MPG<ESC>\ this hangs 
<FF><SI>@@<ESC>PEPIC100.PCX<ESC>\ this hangs 

example hang situation from merged debug trace : 

... 
<MESSAGEIN>18:36:26.031 - 08/04/2009 #0059 
[30[Unicode-x1C][Unicode-x1C][Unicode-x1C]11[Unicode-x1C]026 [Unicode-x0F]@@[Unicode-x1B]PEPIC101.MPG[Unicode-x1B]\]</MESSAGEIN> 
... 

<STATEDATA>applica.. 08/04/2009 18:42:17.093 [020] [I] Transaction
Request</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Screen Number 
[026]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Response Timeout State
#[038]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Track 2 Data 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Track 1 and/or 3 
[003]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Operation Code 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send Amount Data 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send PIN Buffer 
[001]</STATEDATA> 
<STATEDATA>applica.. 08/04/2009 18:42:17.093 Send General Buff (or
X)[000]</STATEDATA> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.093 Module Start [State
Transaction Request - StateTransactionRequest.dll]</DEBUG> 
<MESSAGEOUT>18:42:17.203 - 08/04/2009 #0073 
[11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1?[Unicode-x1C]***************************************[Unicode-x1C][Unicode-x1C]A A 
[Unicode-x1C]00000000[Unicode-x1C]****************[Unicode-x1C][Unicode-x1C][Unicode-x1C]1***********************************************
*******************************[Unicode-x1C]21234100000000000000000000]</MESSAGEOUT> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.203 Reset Ready Flag 0 
<wid>28d836ma34</wid> 
</DEBUG> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.203 NDCScreenDisplayHooks
called,Final return value=1 </DEBUG> 
<DEBUG>applica.. (MAIN)(3356) 08/04/2009 18:42:17.375 NDCScreenDisplayHooks
called,Final return value=1 </DEBUG><END> 

Incident initially opened as a priority 3, whilst waiting on feedback from
customer regarding impact.



Summary:
TAR 399320 -  Terminal command is processed and responded to twice by the application

Description:
 A single Terminal command is processed twice by the applciation when
   received in specific circumstances :
   
   To recreate this issue on a simulated system :
   put the application in service
   Close NDCHost
   Wait until out of service mode reached.
   Change to Supervisor mode
   Leave for a small time
   Reconnect NDC Host 
   send a terminal command 1<FS><FS><FS>78
   E02 reject response will be sent
   Exit Supervisor mode back to normal mode
   The terminal command that was rejected is processed as pending and is
   rejected again.
   
   
   NDCHOST trace from after reconnect is :
   
   Mon Feb 09 15:37:53    Received : [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21]
   Mon Feb 09 15:38:08        Sent : [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]78]
   Mon Feb 09 15:38:09    Received : [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]A]
   Mon Feb 09 15:38:17    Received : [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R09]
   Mon Feb 09 15:38:27    Received : [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20]
   Mon Feb 09 15:38:34    Received : [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]A]
   
   This shows the two solicited rejects for one received command, both are
   E02's in debug.
   
   Full debuglog data is available if required.




Summary:
TAR 361865 - PIN entry prompted for in both the T state and following B state with Dash

Description:
It looks like there is may be an issue with the B State (PIN Entry), when
this is used directly following a T State with a Dash reader. 
(Customer is using AA-NDC 03.01.01 with Dash reader.) 

The customer's stateflow goes from the T State to the B State (which is
valid) and the customer enters their PIN in the T state (as expected), but
then in the B State, the customer is then requested to re-enter the PIN (not 
expected). 

It is expected that the B State should have recognised that the PIN had
already been entered in the T state and should bypass the PIN entry section
in the B State. 

Recreated in lab using customer custom.dat on a vanilla 03.01.01 (with
change to the FIT download as follows
(30[Unicode-x1C]0[Unicode-x1C]0[Unicode-x1C]15[Unicode-x1C]000000255255255255255001000006000063000016015255255 ) and still
got the 2 PIN prompts from both states. 




Summary:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service

Description:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service



Summary:
TAR 391716 - GBRU XML file not being accepted when  ECB6 settings included

Description:
When setting ECB6 settings defined within the GBRU XML these are not
accepted via the Supervisor 5 - 39 option. 

Settings used: 

<CatMode>1</CatMode> 
<Cat3RollBack>0</Cat3RollBack> 
<Cat3StoragePolicy>1</Cat3StoragePolicy> 
<SuspectCassetteID>CI1</SuspectCassetteID> 

Following errors recorded in PD trace: 

E.g. 
11/4/2008,11:18:28 AM,APTRA Problem
Determination,Error,None,32,N/A,ATM6676,Responsibility: NCRScotland 
Owner: NCRGBRUConfig.GBRUConfig 
Process Filename: C:\ssds\apps\applicationcore.exe 
Process ID: 3016 
Thread ID: 3060 
Object ID: 117978088 
Description: 
<F>ReadRegEntriesFromXML</F><Y>XML Error. Configuration : Ensure contents of 
element 'Cat3RollBack' matches schema</Y> 

and 

11/4/2008,11:02:39 AM,APTRA Problem
Determination,Error,None,32,N/A,ATM6676,Responsibility: NCRScotland 
Owner: NCRGBRUConfig.GBRUConfig 
Process Filename: C:\ssds\apps\applicationcore.exe 
Process ID: 292 
Thread ID: 196 
Object ID: 117978640 
Description: 
<F>ValidateSuspectCassette</F><Y>XML Error.Configuration data found in XML
for suspect cassette</Y> 




Summary:
TAR 405082:- Setting worker attribute of Video Display worker causes Author to terminate

Description:
APTRA Author User's Guide (from release 03.02.01 and 03.03.00) lists the
   "video player" worker under "The following workers are unchanged but unused
   in the supplied Advance NDC application as they are not required for the
   standard Advance NDC functionality."   Therefore worker is supported.
    
   Create a new application in a 03.02.01 development environment. Add a a
   video player worker, and try to set the "Video String" parameter.   The
   result is that APTRA Author crashes and terminates.




Summary:
Wrong unsolicited message is sent to host when cheque is inserted with wrong orientation in DPM.

Description:
In test case 5.14, 5.22 and 5.23 of Cheque processing Module wrong format of unsolicited message is sent to host in case of DPM, if cheque inserted with wrong orientation, cheque jammed during "cheque processing- customer access" and cheque jammed during a "cheque processing - No Access".

In case of test case 5.14 it is  mentioned that q5C message will be reported to host but in real q2C message is reported to host.

In test case 5.22 it is  mentioned that q5E message will be reported to host but in real q2E message is reported to host .

In test case 5.23  it's mentioned that q6C message is will be reported to host but in real q2C message is reported to host.



Summary:
"Please wait...." should be displayed while copying the files to the drive

Description:
"Please wait...."  is only displyed for CD/DVD writting  tasks while copying the files. this should be shown for all other supervisor options as well.



Summary:
TAR 400310 - AA-NDC - Detrmination whether Print Cntr/Set Cntr fails incorrect and message

Description:
When an ATM is configured for EJ and the EJ file is full or otherwise
fatal, if the 'Print Config' or 'Print Counts' supervisor function is
performed, the ATM immediately displays an error message. For our older
Americas AANDC releases based on 2.06, the error message is "INITIALISATION
FAILED", and for our newer releases based on 3.00 or 3.02, the error message 

See the STAR for more info
is "DEVICE NOT PRESENT". Neither of these error messages are appropriate for 
the condition when EJ is configured but the EJ file is full or otherwise
fatal. 




Summary:
DVD functionality should be implemented for Automatic INIT

Description:
DVD functionality not implemented for AUTO INIT EJ.



Summary:
TAR 400471 - AA-NDC will throw a ueh on rear settlement when promote is installed

Description:
With the following software installed it was found that AA-NDC 03.03.01
would reboot during a rear settlement transaction. 

XFS 05.00.00 (+ XFS hotfixes detailed in the AA-NDC 03.03.01 bulletin) 
XP SP3 (+ Security hotfixes detailed as critical up to the end of 2008) 
AA-NDC 03.03.01 
Promote SST RTL 03.01.00 
EMV/CAM2 Exits for AA-NDC 02.00.02 

Upon further analysis of App-Sight log generated on a unit running the above 
software while doing a rear settlement transaction, Euan Pattullo confirmed
that this was indeed and AA-NDC issue and agreed that a TAR should be opened.




Summary:
TAR 400471 - AA-NDC will throw a ueh on rear settlement when promote is installed

Description:
With the following software installed it was found that AA-NDC 03.03.01
would reboot during a rear settlement transaction. 

XFS 05.00.00 (+ XFS hotfixes detailed in the AA-NDC 03.03.01 bulletin) 
XP SP3 (+ Security hotfixes detailed as critical up to the end of 2008) 
AA-NDC 03.03.01 
Promote SST RTL 03.01.00 
EMV/CAM2 Exits for AA-NDC 02.00.02 

Upon further analysis of App-Sight log generated on a unit running the above 
software while doing a rear settlement transaction, Euan Pattullo confirmed
that this was indeed and AA-NDC issue and agreed that a TAR should be opened.




Summary:
TAR 398416 - Extended Encryption Key Change message with modifier of ?N? resets terminal

Description:
Euronet reported the following (understood to have been running AANDC
03.02.00 during lab testing) 

"Sent the ATM an ?Extended Encryption Key Change? message with modifier of
?N? to request a random ATM number. The effect was that the consumer screen 
on the ATM went blank, followed a few minutes later by Windows shutting
down, then Windows starting again. I was able to repeat this process a 2nd
time." 


Subsequently recreated in Lab 1 on AANDC 03.03.00 

In accompanying log files one event is: 

NDCHost - Fri Feb 20 12:35:44 Sent : [3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4N] 

UEH - FAULT ->02c35d9c 




Summary:
TAR 401220 - SIU SP is being swamped by Status requests while during a download

Description:
SST crashes for for downloads of 100+ messages.Happens because SIU SP is not handling async requests more than the it's queue size.
See the STAR for more information.



Summary:
TAR 399008 - AA-NDC reports incorrect M-status values for the USB 80mm Receipt Printers

Description:
Application is reporting incorrect m-status values for SelfServ receipt and journal printers, as ignoring the data in the hardware error events from the UPTR SP, as they have a T-code 0.  

When Receipt Printer head is open - M-Status 09 is not reported to the host. 



Summary:
TAR 402501 -  Print Failure on PRNT CMPNT VERS on AANDC

Description:
while trying to do the function PRNT CMPNT VERS from the MISC FUNCS menu in AANDC Supervisor when the supervisor display is transferred to the front. The issue that arises is that a ?PRINT FAILURE? message is displayed when the function is selected.

When PRNT SCRW VERS is selected it successfully prints out the scrw version on the receipt printer.

The issue occurs on USB receipt printers only. When tried on an SDC receipt printer the issue does not arise.



Summary:
SCPM: Journal format is incorrect for some status messages

Description:
There are 2 issues:
1) The MStatus field on the journal should be the 2-byte MStatus only, and not include the MData part.
2) The MStatus and Replenish values when Option83 = 0, should contain accurate info (same as when Option83=1), rather than emulating those status message fields.

Note: the test spec should be updated to reflect point 2. Point 1 is accurately reflected in the test spec.



Summary:
IP doesn't have complete information about ECBExtractPath registry Key 

Description:
IP has information about HKLM\Software\NCR\Advance NDC\BNA\ECBExtractPath,but value for key is not written.
Default value should be:
"C:\Program Files\NCR APTRA\Advance NDC\Data\" 



Summary:
While entering  alphanumeric data in TCPIP configuration through rear interface (EOP) , Clearing Key is not clearing the last element or letter that is entered.

Description:
PELE 2 Personna Machine.

For test under 5.30 (Test options 6-16 when SST configured as Client)

In test cases 5.19 (Test option 11 (submenu options 3,4 only), option 13 when the SST configured as Server) and 5.23 (Test Option 14(submenu options 7,8) when the SST is configured as Server.)  Clear key is not clearing the letter for alpha numeric data entry through rear interface on EOP.



Summary:
When TCP/IP and firewall configuration are  printed on Journal printer special characters are printed for small letter in the config information 

Description:
PELE 2 Personna Machine with SDC Receipt and Journal Printers

For test under 5.30 (Test options 6-16 when SST configured as Client)

In test cases 5.16(Test TCP/IP  Supervisor Options 6,7 when the SST configured asServer)  and  5.24(Test Option 14(Submenu options 9,10) when the SST configured as Server)when configuration information is printed on Journal, special characters are being printed for small letters.





Summary:
Data printed from TCp/IP menu  is not printed on Receipt Printer 

Description:
PELE 2 Personna Machine with SDC Receipt and Journal Printers

For test under 5.30 (Test options 6-16 when SST configured as Client)

In test cases 5.16(Test TCP/IP  Supervisor Options 6,7 when the SST configured asServer)  and  5.24(Test Option 14(Submenu options 9,10) when the SST configured as Server) steps to print configuration information on receipt are failing .





Summary:
EMV TAG MASKING registry key missing from AdvanceNDC.reg and causing crash with EMV Exits on IT6

Description:
EMV TAG MASKING registry key missing from AdvanceNDC.reg and causing crash with EMV Exits on IT6 when attempting to read keys from the registry



Summary:
Mstatus 00 is reported in the following transaction after AER is a failed attempt

Description:
Procedure to recreate the issue:

ATM : - BNA2
Testcase no from Test Log:- 5.5.3.5.11
Software Stack: 
XFS :- 05.00.01.10  ; AXFS :- 92.11.00.01
CIC Dep Agg :- 01.03.01 
ANDC :- 93.04.00.07 
CIC :- IT 3 (91.03.00.03)

Procedure followed:
1. Initiate a Deposit transaction
1. Insert good notes
2. Confirmation screen is diaplayed 
3. Select ADD More on confirmation screen and open the Feed unit hinge causing device fatal
3. Since device is fatal, AER is attempted and AER also fails as Hinge is not closed yet
4.Initiate a another deposit transaction - Hardware malfunction screen is reported and mstatus 00 is reported. Expected Mstatus 02 should be reported




Summary:
SCPM: FxCop Analysis updates required for NDC Keyboard component

Description:
FxCop analysis shows that NDC Keyboard service has some unused code and the methods should be marked as 'private' not protected.

Signing of assembly is also required but wil be deferred until GRIT 429640.



Summary:
Journal serviceconfig.xsd and receipt service config.xsd fiels are missing from AANDC93.04.00.07 Build.

Description:
Journal serviceconfig.xsd and receipt service config.xsd fiels are missing from Build because of this while running .NET TCP/IP supervisor tests, printing on Receipt is not happening. As per Murthy suggestion we dont require any logs for this becuase this is stright away identified as an Issue.



Summary:
SCPM: extra unsols being sent with potentially old status after status change in supervisor eg door opened

Description:
Scenario:
Enter Supervisor.
Open door and close door.
Exit Supervisor.
Unsol sent saying door open.



Summary:
IP Update in Developer's Guide required for TTU Forms Directory to be correctly specified in a Simlated Environment in the Simulator Settings for TTU

Description:
since the PCI changes required us to move all forms under Program Files, the user will also need to change the Simulator TTU SDE settings under Device Capabilities -> Forms Directory to have the forms directory to be set to C:\Program Files\NCR APTRA\Printing\TTU\forms (it seems to be necessary to use the Browse button in the simulator to set this directory rather than just pasting this path in). Then the simulator needs to be re-started. 

I am only raising this GRIt for the TTU - It should however be true for the Receipt, Journal and statement forms also....but I will leave Richard/Stephen to comment on that.



Summary:
Application crashed when invalid date is entered in End Date feild for Extract Sig function

Description:
Tested with XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.07(ACTIVE XFS CONTROLS 92.11.00.01)

Test case 5.4.15.5.6.3

When only one digit is entered in the year feild of End date and Enter pressed , application crashed with the below information
The error is near line number 18 of Script Host Worker ID: 52b1235na1.
VBScript has given the following error description:
	'ExportData
RetrieveDataByDate
RetrieveDataByDate
StartDate greater than EndDate'
The Source of the Exception is
	'CFDataRetriever'
Script is:
'ProcID**activate**END
Dim objWSC
Sub activate()
    Dim EcbExtractPath 
    Const BNAREGPATH = "HKEY_LOCAL_MACHINE\Software\NCR\Advance NDC\BNA\"
    Const ECBEXTRACT_DEFAULTPATH = "C:\Program F            





Summary:
SCPM: extra unsols being sent with old status after error recovery failed 

Description:
Scenario:
Cause a jam in stacker/rebuncher when retracting cheques.
Error recovery tries to clear and fails.
Clear error in Supervisor.
After exiting Supervisor an unsol is sent with status as it was at time of the attempted ErrorRecovery.



Summary:
Rejects Counts are not updated(i.e. Cumulative Count) Properly when more than 50 Invalid notes are entedred

Description:
Tested with  XP SP3 + XFS 05.00.00 + XFS 05.00.01.18 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.09(ACTIVE XFS CONTROLS 92.11.00.01
Test no:5.4.5.2.1.2.16.6.3,5.4.5.2.1.2.19.28.3
Issue recreation:
find attached docs "invalid_50notes_1.zip" & "invalid_50notes_2.zip"where it will contain the recreation steps.

--------------------------------------------------

Tested with  XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.07(ACTIVE XFS CONTROLS 92.11.00.01

Test no:5.4.5.2.1.2.16.6.3,5.4.5.2.1.2.19.28.3
Issue 1:
Tests expect to print REJECT COUNTS NOT UPDATED- ESC FULL on journal, if more than 50 invalid notes are inserted in a bunch.
 If more than 54 notes are inserted, RET and REJ counts are updated to 54 and all the notes are returned back.REJECT COUNTS NOT UPDATED- ESC FULL not printed on journal. 
Issue 2:
Consider the below scenario
1. Insert 54 invalid notes in a bunch. Notes are returned and counts are updated to 54.(RET and REJ) and shutter opens again
2. insert 53 notes when please insert screen is shown. Test spec says counts( RET and REJ) should not be updated if ESC full is reached. But counts are updated to 107.





Summary:
Square Box Symbol coming beside DNS Config heading in 11- DNS Address.

Description:
Build 7 

Copied from resrved.def file, Square box coming because of keeping a TAB in m56 screen at DNS COnfig.
'm56'	''
	'	  DNS CONFIG'
        ''
        ' 1  ENTER PRIMARY DNS'
        ' 2  ENTER SECONDARY DNS'
        ' 3  COPY DNS SUFFIX FROM DISK'
        ' 4  ENTER DNS SUFFIX'
        ''




Summary:
SSL Menu not showing all options

Description:
Build 7:

SSL Menu displaying only 10 options but the actual menu should display 12 options.



Summary:
Resource Manager should not install APTRA.chm nor replace the shortcut as this breaks the on-line documentation

Description:
The Resource Manager component is installing APTRA.chm file and is replacing the APTRA.chm that is provided by 3rd Party Runtime component.

Lis Shrimpton advised that only 3rd Party Runtime should install this file - not the other components.

The same is true about the APTRA(TM) Documentation shortcut.  The shortcut is replaced and this basically removes the fix for this shortcut in the 3rd Party Runtime component.  This shortcut needs to call ShowAptraHelp.exe rather than APTRA.chm directly so that the APTRA Product Lines online help would show.

I have attached the MSI log, which I think shows the issue.



Summary:
IPs: Document the notes destination after a retract to cassettes as it's not obvious.

Description:
We tell Reset command to reset to first cashin bin we find available, and platform then sorts the notes as it sees fit. This will not override platform rules eg. if Cassette 1 only accepts EUR5 notes then the EUR50 would have gone to Cassette 3 or 4 in below example. But also, platform does not necessarily sort Reset notes in same way as CashInEnd would.

Configuration
CatMode 1
Cat3Rollback 1
Cat3StoragePolicy 1
AER is enabled

Suspect notes go to the first cassette position (it¿s an allin cassette)
2nd cassette configured for EUR 5,10
3rd cassette configured for EUR 20, 50
4th cassette configured as all in

Procedure followed
1. Deposit following notes: 2*EUR 50 valid Notes, 3* EUR 50 Cat2  and 1*EUR 20 Cat3 Notes
2. Reset ATM at confirmation screen
3. At SOD the AER happens, and get correct w6 and w@

What I noticed was that the EUR20 Cat3 note is in the first cassette (correct), but also that the EUR50 Cat4 notes also got encashed to that first cassette, and NOT the 3rd cassette which is where EUR50 should go.



Summary:
(Usability) Application Settings and Dialup config Copy off function should give Appropriate errors 

Description:
Build 7:

1. go to Supervisor 5 ( Configure) ----> 38 Dial UP Config ----> 6 Copy OFF/ON 
2. Select 2 Copy OFF and Select CDRW. File is written on to CD. Select the same option again, Task throws a error Saying " File or DISK Not present". 
we should display "Error: File Already Exists " , we have E0036 in reserve.def file already defined for this, we should use this one.

this is same with 4 - Copy off function.



Summary:
PD Copy logs not copying on to a network drive

Description:
  Scenario: 1. Start the Applications and Go to supervisor 
2. Select 5 - Configure
 3. Select 44 - Trouble shooting. 
4.Select 1 Start and 2 STOP. Make sure there is a network drive available.
5. Select 3 Copy Logs, Drives Diplsyed, Select network drive, it shows DISK Error.

other option ( Silent Debug, COPY off,etc...) working fine with network drive.



Summary:
PD Copy logs not writting on to Blank CD

Description:
Build 7

 Scenario: 
1. Start the Applications and Go to supervisor 
2. Select 5 - Configure 
3. Select 44 - Trouble shooting. 
4.Select 1 Start and 2 STOP. Insert a Blank CD
5. Select 3 Copy Logs, Drives Diplsyed, Select CD RW  Nothing is written on to CDRW.

Tested with IMAPI and IMAPI2, Problem exists in both.



Summary:
Silent Debug not writting to CD

Description:
Build : 7

Scenario:
1. Start the Applications and Go to supervisor
2. Select 5 - Configure
3. Select 44 - Trouble shooting.
4. Select 4 - Start and then select 5 - Stop.
5. Select 7 Copy Logs, Drives Diplsyed, Select CD RW

Nothing is written on to CDRW.

Note: if you are using IMAPI2.dll,logs are written on to CD.





Summary:
.NET AXFS ReceiptPrinterResource is not supported

Description:
ReceiptPrinterResource is not supported, so need to use GenericPriniterResource for Receipt Printing component



Summary:
An access violation occurs when SSDSNDCDATA.DLL and SSDSNDCFIELD.DLLs use new .NET ssdsChequeAcceptManagement Dll

Description:
Issue further narrowed down to the two dlls mentioned in the heading.
Workaround is to not use the Windows XP theme.
The Themes service can be disabled - this prevents the issue from happening. Required registy changes for installer attached in this GRIT. The installer should also stop the Themes service.
Root cause not known - perhaps DllMain issue in some of ANDC Dlls. ApplicationCore.exe does not show this issue.

When the EMV Exits executables attmpt to start the SSDSNDCDATA.dll access violates when it is loading causing the exectuable to fail to start.

The same EMV Exits executable works on both a AANDDC 3.3.1. They also work on AANDC 3.04  when no SCPM device is present.

For EMV certification this must be fixed before Monday 1st June.



Summary:
Accept state to support marking cheques to be returned at the end of the transaction, based on failing codeline validation

Description:
When cheques are detected (by codeline validation) to be invalid and  RefuseReason = None, then the Accept state should mark these cheques to be Returned.  Note that the subsequent Display States would then show these cheques are to be returned due to failing codeline validation - based on the Text Dictionary definition - and the Handling state would return the cheques.

Refer to the attached email for more details.



Summary:
Advance NDC Development PC - ensure executables are co-located with the .NET assemblies

Description:
Executables:
 * ApplicationCore.exe
 * RunTest.exe
 * SupContainerWrapper.exe (in Advance NDC - considered for rework now)
 * VPITCPIPCOMServer.exe (in .NET Assemblies for ANDC)

These are likely not affected
 * AFASpeechPj.exe
 * AudioGuidanceXMLpj.exe
 * NCRSilentDebug.exe
 * NDCReboot.exe
 * InitEJ.exe
 * HideTB.exe
 * APTRAUSERCDI.exe
 * SimTimer.exe
 

Agreed to move the executables that need to be moved to C:\NTGlobal\AANDCAPPS
Shortcuts, scripts, path setting needs to be updated accordingly. Add C:\NTGlobal\AANDCAPPS to PATH. Update registration info for SupContainerWrapper.exe



Summary:
SCPM: NDCRenderer should use DisplayScreen rather than DisplayString

Description:
The NDC Renderer should use 'DisplayScreen' rather than 'DisplayString' so that the Display Manager has better context information for screen displays.  The DisplayScreen API will call the DisplayHook with a screen group and screen number so the DisplayManager will easily recognise the screen being displayed.  Using DisplayString does not give any of this information so will make it impossible to know the screen being displayed.

(Change needed for UT also)

Might also solve MPEG display issues.



Summary:
Application Core Crashes on BNA2 & development PC when Sensors message requested with Option 24 set to 2

Description:
Application Core Crashes on BNA2 & development PC when Sensors message requested with Option 24 set to 2
- details attached.




Summary:
GBRU status is not reported correctly if GBRU shutter is jammed

Description:
Test No: 5.6.17.5.3.1.49(Shutter Jam on CDM1)
Machine Configuration: GBRU(as dispenser) &CDM

Error Severity '0' is reported when GBRU shutter is jammed while it tries to present the notes. And it is reporting severity '4' for the cassettes type2,3 if shutter jam occurs while dispensing notes from type2 and 3 even though cassettes are in good condition.

Logs are copied into the folder with this GR1T number in this path \\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4. GBRU_Type23.zip has logs taken when shutter jam occurred while dispensing from type2 and 3. GBRU_Type1234.zip has logs taken when shutter jam occurred while dispensing from type1,2,3 and 4.













Summary:
SCPM: When Cheque Accept state takes device error exit no error unsol is sent

Description:
In this case the device is unusable, yet the host is not informed. Needs investigation as to best solution. Possible solutions:
1) Document it, as a previous error should have been sent and so Cheque operation should not have been offered.
2) Get NDC State to tell status handler that this device error exit has been taken (either by event or property on status handler).
3) Change flow to call the device service at all times, rather than bypassing this call when state of device is known to be not ready.
See attachment for some discussion on this issue.



Summary:
SCPM: After retract from exit slot all cheques reported in Bin 1 even if some were taken

Description:
This seems to be a limitation in that cheques that have customer access may or may not have been taken. So NDC may have to report that any cheque that had customer access is in an unknown location even if it is flagged by device service as being retracted. In discussion with Javier to understand if this is SCPM limitation or any bunch cheque device.



Summary:
SDC Statement MEI is not flashing when the statement is given out

Description:
Test No: 5.6.11.3.6.1
SDC Statement MEI is not flashed when statement is presented.The MEI is flashed in the close state if the statement is not taken(MEI is not flashing if the statement is taken).
This issue is not seen on USB and Open Statement printer. 
Both Open and SDC Statement printer logs are attached.




Summary:
NTGLOBAL Folder is created in c:\ for runtime installation

Description:
AANDC 93.04.00.07

1. Run the Setup.exe in the AANDC aggreagte and select the runtime installation.
2. After the inctallation, go to C:\. there is a NTGLOBAL folder created here which should not be created.

Attached the folder content.




Summary:
SCPM: All Threads Exception Handling

Description:
It is critical for the correct recovery of the application that all exceptions are either explicitly handled or raised to the operating system for corrective recovery. Exceptions cannot be allowed to display dialog boxes or be lost. All threads started in the application are started via a Delegate (including Event Delegates). The Delegate must contain a try-catch block that calls RaiseException on the Critical Exception Handler component if an exception is unhandled. 

See SPL practices: SPL Development Guidelines - .NET Framework Exception Handling Conventions
assetID=FS003549



Summary:
SCPM: FxCop Analysis updates required for NDC PD Collection component

Description:
FxCop analysis shows that the PD Collection component should better handle static DebugLog class and be signed with a strong key.

NDC PD Collection is a low level component and should be one of the first signed - signing this will make it easier for other developers to sign their own assemblies.



Summary:
IP Only:  Better to have the info when do we expect a Sol/Unsol in the reference manual when stating the g2/e2 field as S/U.

Description:
Attached the Email conversation with Collette.





Summary:
SCPM: FxCop Analysis updates required for EntryPoints component

Description:
FxCop analysis shows that the EntryPoints component should implement IDisposable, and also be signed with a strong name key.



Summary:
Unconsumed signal and a lot of completeness check warnings in supervisor340_021

Description:
AANDC 93.04.00.07 - Supervisor project: Supervisor340_021

- unconsumed signal reported
- a lot of other warnings that seem to be related to new 3.4 changes

Andrew explained that these errors are not critical - thus setting priority to low. Still should be tidied up soon.




Summary:
Signal More-True from More(402b7na1) is not consumed properly in Cash Accept State.

Description:
Signal More-True from More(402b7na1) is not consumed properly in Cash Accept State.
Wait For FDK(731b7na1) is shared in Extra P6 Screen(33b2128na3) added in 1st CIC 1.03 build.It has that signal which need to be consumed properly.




Summary:
SCPM IT6 - Codeline Data Logged in Debuglog MessageOut.Log

Description:
When Data ID 'g' information is to be sent in the transaction request message (fields cg1-cg16), the codeline data (field cg14) is logged to the MessageOut log for single and multiple cheque processing without being masked.  Consider PCI compliance.



Summary:
The sequence of the printing on journal printer after opting STD CASH option in replenish menu is wrong.

Description:
The sequence of the printing on the journal printer when we have dual cash dispenser on SST is wrong. the sequence of the printing on the journal printer should be 1)Prnt Cntrls 2) Clear Cash and 3) Add cash . But in real time after selecting STD cash option the sequence is 1)Clear Cas 2) Prnt Cntrls and 3) Clear Cash

The ASL file is copied at the following location
\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4\GR1T432587



Summary:
Diebold IX - No Cash given to the Card holder but Transaction is successful at the switch

Description:
Bank has reported that for few cash transactions, ATM was not giving cash to the cardholder but there is no reversal msg sent to the switch. Activity steps as below:

1. Selected Cash withdrawal transaction
2. Request is sent to the switch and Switch approved the transaction
3. ATM does not dispense the cash, Counters are not changed
4. There is no reversal message sent to the switch
6. Restarted the machine, problem was not reported again




Summary:
SCPM: Temporary cheque images for receipt printing are not being deleted in the Close state

Description:
Identified the issue is in the existing CPM script host code.  The ImagePath key is not being found in the registry (due to incorrect registry lookup in code), which is defaulting then to the .\Advance NDC\Data directory.  It means the images in the new .\Advance NDC\ChequeImages directory are not being deleted.



Summary:
Memory leaks found in cheque details wrapper

Description:
Memory leaks found in cheque details managed c++ code when tested with assembly stress tester.



Summary:
Wincor: cassette 'Low' issues

Description:
1. Notes low not detected if bHardwareSensor = 1.
2. also bHardwareSensor =1  Suppplies reported as good but fault display reports low after replenishment.

ProBase 1.0 (41.60)  1500XE



Summary:
SCPM: When all cheques are marked to be Returned a trans reply specifying a chequeID moves no cheques but sends Ready9

Description:
This trans reply should be rejected as it is invalid to specify a chequeID when no chequeIDs were contained in the Trans Request.



Summary:
When VG is enabled and we are sending transaction reply using Printer Flag ">" n times then the audio is played repeatedly.

Description:
Issue I.
Steps to Recreate this issue:-
1) Start the application and enable VG.
2) Do one transaction and send  PRNT_IMD  reply using Printer Flag.Transaction reply data will be played
3) Again send the same transaction reply. It will be noticed that this time VG plays the previous data as well as the present data.

Issue II : Most recently played chunk of data from TR Reply is repeatedly played until new data to play arrived in close state (Can see only when there is a good amount of delay between Tr Reply processing and Close state. Possible to recreate the issue on slowest machines.
Steps to Recreate this issue:-
1) Start the application and enable VG.
2) Do one transaction and send any NEXT_PRNT as transaction reply using Printer Flag and dynamica text.Transaction reply data will be played. The most recently played chunk of data is played repeatedly.

e.g -  Suppose that first time when we sent transaction reply using Print Data ">" and VG played the string " Hello .Thank You For Transaction". Again send the same message then this time "Hello.Thank You For Transaction" will be played twice.



Summary:
SCPM: Threshold unsols not sent

Description:
Endorser Low, Bin High type messages are not being sent when those conditions occur.



Summary:
NDC Keyboard Service returns wrong completion reason for Cancel

Description:
NDC Keyboard Service returns 'PINCompletionReason.PIN_FDK' instead of 'PINCompletionReason.PIN_FK' when Cancel key specified as a terminate key.



Summary:
Cheque image display with full path to picture file does not display correctly.

Description:
The NDC renderer had to strip out the full path to a graphic file when displayed as NDCCUST could not process this correctly.

Need to investigate why this is the case so that Advance NDC no longer requires the location of the images to be present in the PATH environment variable.



Summary:
TCPIP Supervisor Tasks - First Invocation of Task on a Front Display (CIFRenderer) does not obtain focus - instead the taskbar flashes for the renderer

Description:
The user then has to Alt Tab to give focus to the renderer. Subsequent invocations of ANY of the options on the same task are then ok. When another task is invoked, the same thing happens.
This will be a definite issue in the live and secure environment where the user cannot alt tab.



Summary:
Missing ' 84 POWERUP MSG     99 MORE' line in 5 - Configure menu

Description:
We have seen a issue with the menu structure because of adding the "43 Select Comms Type" Option. If we go into 99 more option in 5 - Configure menu, we are not seeing the ' 84 POWERUP MSG     99 MORE' Line on GOP/EOP.

	IT 5 Resrvd.def file


'm02'   ''
        '            CONFIGURE'
        ''
        ' 34 EJ OPTIONS 35 JOURNAL LEVEL'
        ' 37 TCPIP CONFIG 38 DIALUP CONFG'
        ' 39 GBXX CONFIGURATION'
        ' 44 TROUBLESHOOTING'
        ' 45 MAX STATEMENT LENGTH'
        ' 47 EXTENDED ADD CASH'
        ' 80 DISP CSH/ACC CONFIG'
        ' 81 PRNT CSH/ACC CONFIG'
        ' 82 GBNA.INI CONFIG'
        ' 84 POWERUP MSG     99 MORE'

	IT 6 Resrvd.def file

'm02'   ''
        '            CONFIGURE'
        ''
        ' 34 EJ OPTIONS 35 JOURNAL LEVEL'
        ' 37 TCPIP CONFIG 38 DIALUP CONFG'
        ' 39 GBXX CONFIGURATION'
        ' 44 TROUBLESHOOTING'
        ' 45 MAX STATEMENT LENGTH'
        ' 46 SELECT COMMS TYPE'  - New Option added.
        ' 47 EXTENDED ADD CASH'
        ' 80 DISP CSH/ACC CONFIG'
        ' 81 PRNT CSH/ACC CONFIG'
        ' 82 GBNA.INI CONFIG'
        ' 84 POWERUP MSG     99 MORE' -  This line is not getting Displayed on GOP/EOP.




Summary:
TI journalling not observed when option 24 is set to 0

Description:
Procedure to recreate the issue

ATM Configuration: 
GBRU mode :- 3
Cass Config :- CI1, CI2, CI3 

Testcase no from Test Log:- 5.4.6.2.2.1

Software Stack: 
XFS :- 05.00.01.10  ; AXFS :- 92.11.00.01
CIC Dep Agg :- 01.03.01 
ANDC :- 93.04.00.06 
CIC :- IT 2 (91.03.00.02)

Procedure Followed:(Option 24 will be 0 by default sine data folder is cleared)
1. Clear Data folder in c:\program files\NCR APTRA\Advance NDC
2. Start applications and 002 screen is shown
3. Remove CASS 1- BNA CASS 1 REMOVED is printed to journal
4. Insert CASS 1- nothing printed to journal and no tampering journalled at all, after the 1st logging in step3. I see events triggered from XFS for cass removal and insertions




Summary:
SCPM IT4 - Modify INIT DEPOS & Supv exit initialisation to ensure the BunchChequeAcceptService is not left in a bad state

Description:
Refer to GR1T 431250 for background info.  The scenario described in that GR1T is where the BunchChequeAcceptService could remain in the ChequesLeft state, meaning another cheque deposit transaction is not possible.

Based on a discussion on 12 May, we decided to raise a GR1T on INIT DEPOS to ensure the device service comes out of the ChequesLeft state (even if this means having to re-implement INIT DEPOS via the device service rather than AXFS).  There may be other similar scenarios which we have not thought of where INIT DEPOS (and exiting from supervisor) would not clear the device service?

The person who works on this GR1T needs to ensure they discuss the proposed fix with Javier - to check it's a complete fix and covers all possible scenarios.



Summary:
Application crashes after printing BNA CASSETTE RECONFIGURATION STARTED.

Description:
Build Stack:  XP SP3 + XFS 05.00.00 + XFS 05.00.01.06 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.06( Actve XFS 92.11.00.01)
Test case :5.4.13.1.2.1.2
Hardware: GBRU

Recreation scenario.
1.Set the registry HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\BNA\ CashinCassetteReconfigurePriority to CI1,CI2,CI3
2. Send OOS to ENHANCE from BNATest message file
Update BNA_T4 message as shown below and send it.
3   12 300>008016004008301302303000 301Z100101102103104105000000 302Z310059311058312000000 303Z038000000000000000000¿
(This is to enable only the required noteids)
Send the following message.
3   1A 000 45015
Send CONFIG
Send GIS 
3. Configure GBRUConfig.xml with  CI1 to accept EUR 50, 100, CI2 - EUR 100, CI3- EUR 200 and MaxCashInItems =5 in all 3 cassettes
4. Do 53- CLR BNA, option 39 in Configure menu. Configuration is successful and switch back to normal.
5. select Deposit transaction and Insert 6x50 and 6x200 notes
6. Select Deposit and send BNA_DEP reply. 
7. Application crashes after printing  BNA CASSETTE RECONFIGURATION STARTED on journal.

Event veiwer has logged the below error:
Error Number: 2 Worker Id: Description: VBScript has reported an error in a script passed to it.

The error is near line number 51 of Script Host Worker ID: 8b206na1.

VBScript has given the following error description:

'Type mismatch: 'Trim''

The Source of the Exception is

'Microsoft VBScript runtime error'

Script is:

'ProcID**activate**END

Dim NoteIdDictObj ' XFSDictionary populated with the vendor specific note id's accepted

' by the cassette which generated the threshold event and t </FREE>






Summary:
 TAR 403262:  Issue with Prefill data in NDC Echo Worker

Description:
Short Description(s):
  1) Issue with Prefill data in NDC Echo Worker






Summary:
SCPM: address code review comments on cheque accept status handling

Description:
Javier has had time to review the mappings in more detail and his comments are in attached email. This GRIT to track any changes and to get a CP number.



Summary:
Amount class returned in managed c++ is not having correct values

Description:
Amount class (consumer entered amount, legal amount and courtesy amount) not returning correct values in managed c++ code



Summary:
TAR 397063 - Rcpt Delivered Screen used in close state when No Rcpt Delivered expected

Description:
A transaction sequence correctly delivers a receipt during the processing of 
a Print Immediate transaction reply. However when the subsequent CLOSE
state is reached, the application appears to think that there is still a
receipt to be delivered as part of the close state processing. 

Therefore rather than the specified "No Receipt Delivered" screen 024 or 124 
being displayed in the close state (the central host uses a language offset
of 100), the application is displaying the "Receipt Delivered" screen which 
is defined as 040 or 140. 

The same download has been used with previous versions of AA-NDC . 02.06.06, 
03.02.01, and this issue appears to have been introduced from 03.03.xx. 

In the debug the following difference can be seen during the close state
processing for identical transaction sequences : 

03.02.01 
customi.. 12:39:56.346 ReceiptEjecetd - [0] 
<wid>5n8015dc129</wid> 

03.03.01 
applica.. (MAIN)(2652) 31/01/2009 13:00:17.281 ReceiptEjected - [1] 
<wid>5n8015dc129</wid> 



Summary:
SCPM: timeout exit taken from cheque accept state when No pressed on timeout screen

Description:
I would expect it to take Cancel exit if cardholder is still interacting with terminal.



Summary:
SCPM: retract message not sent for rejected cheques

Description:
Start transaction and begin to insert cheque but keep holding it.
It is rejected.
Hold it in exit slot until it starts to retract.
Let it be retracted.
No message is sent - it should send a retract message.



Summary:
Option 5 in 37- TCPIP CONFIG menu is not aligned properly

Description:
Build 93.04.00.06

Scenario:
1. Start the Apps
2. Go to Superviosr
3. press 5 - Enter
4. Press 37 Enter
Option 5  is not alligned properly in this screen.



Summary:
Track data is enclosed within Field Separators instead of Group Separators 

Description:
Please see below to reproduce issue
Simulator Test case

Testcase no from Test Log: 5.4.10.1.2.13

Software Stack:
ANDC :-  93.04.00.05
CIC :- IT 1 (91.03.00.01)

Pre-requsite: Set value for EnableP6DetectedUnsol as 2
Procedure Followed:
1. Intiate a deposite transaction 
2. Insert Cat2, Cat3 and Cat 4notes
3. Unsols  w?, w@ and w0 are observed as expected with note count when confirmation screen is displayed
4.Select deposit and complete the transaction
5. Check that w? unsol should have track1, track2, and track3  data each enclosed separately b/w Group Separators- Observed that they are separated by Field Separators instead of Group Separators 




Summary:
IT6 - Access Menu function 25 (Key Entry) still prompting for Password

Description:
The password prompt screen which was in the previous build should not now be displayed as default in IT6.

When function 25 (Key Entry) is selected in the Acces menu, the user is still prompted to enter the password.



Summary:
SCPM IT5 - The counts displayed in Supervisor via DISP CNTRS are 00000 when the Device is Fatal

Description:
I noticed during testing and count checking that whenever the device is fatal and I check the counts via the DISP CNTRS function in supervisor Replenish menu, the counts are all shown as zero.

Clearing the error and checking the counts again shows the count values again. 

Note - Ran a few of tests depositing cheques, cheques to reject bin, jammed cheques removed from the transport (...and should therefore not be included in any counts) and the counts always seem to be recovered



Summary:
SCPM: Change the default ImagePath defined in the ACCFG configuration file to match the new configured path in AANDC 3.4 IT6

Description:
The AANDC 3.4 IT6 build has changed the path for storing cheque images.  It is now configured at install time to be C:\Program Files\NCR APTRA\Advance NDC\ChequeImages.  Refer to GR1T 426499 - PA-DSS: ImagePath registry key should place images in directory other than C:\Program Files\NCR APTRA\Advance NDC\Data.

We should make this change also in the class configurator ACCFG file - in the case where the ImagePath registry key is not found, to default to this new path.



Summary:
In GBNA after shutter closing, Please enter notes screen is displayed for more than 5 seconds and then shows Time out screen

Description:
This GR1T has 2 issues 
1)in Cash Accept State, If notes are not  entered till timer expires, It displays "Enter notes screen" for more than 5-6 seconds even after shutter is closed before it goes to time out screen. 
        
2)If option 45 set to 0 and greater than 90 notes with few invalid notes are inserted, it refuses invalid notes then it refunds more than 90 notes, if notes are taken very quickly, "Please Remove More than 90 Notes Screen" screen is displayed after shutter is closed.




Tested with Build Stack:     XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.05
hardware :  GBNA
Test number :5.4.5.2.1.2.8.4

Recreation scenario:
1. Insert card and select deposit transaction
2. Shutter opens and please enter notes screen is shown
3. Start timer and do not insert notes
4. After 24 sec shutter closes but beeper sounds for 6 sec more with Please enter notes screen and then Time out screen is shown.

Time out screen and shutter close events are not in synchronisation.



Summary:
Escrowed Counterfeit note count is reported as valted note count in Cat 2 unsol message.

Description:
Tested with Build Stack:     XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.05		hardware: ATM with BNA 2
test case number : 5.4.8.1.2.7.2

Recreation scenario:
1. Insert 2 counterfeit notes
2. Check the w? unsol message sent and is reported as 
12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w?   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ " ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  "[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]0

Counterfeit notes are expected to report as escrowed counts in BNA2 before confirmation.
Logs are attached 



Summary:
CPM - code review of record.cpp shows Option83 is checked using "& 1"' but needs "& 2" as well

Description:
Looks like it is used in printing supply fields. Issue integrated onto 3.4 devpath.



Summary:
SCPM: q6J unsol sent after bunch entered with one Refused cheque being expelled or taken

Description:
No unsol should be sent in this scenario.



Summary:
Close state screen processing - C20 screen not handled correctly

Description:
Catherine was trying to use the C20 screen with the SCPM IT5 build.
- downloaded a C20 screen from NDCHost 
- set the Retracting Presented Media screen number in the extension state in the Close state to 000 and downloaded the updated Close State
- run a test where cheques are returned then retracted in the Close state

When the cheques presented timer times out and the cheques are being retracted, I am seeing screen 000 (¿which happens to be the Would You Like More Time screen in the download).
There was a GR1T raised for this some time ago and the root cause was seen as Incorrect Understanding of when to use C20 screen.
There is no C20 screen defined in the resrvd.def file.



Summary:
SCPM: SummaryState, to allow cyclical navigation if there are more cheques to display than will fit on a single screen.

Description:
In the current implementation when there are more cheques to display, if the last cheques set screen is displayed, 'Next FDK' is disabled. Consistently, Prev FDK is disabled when the first cheques screen is displayed (no cyclical navigation is allowed).
The flow should allow to cyclical navigation,  i.e. If the cheque displayed is the last cheque then pressing this FDK will cause the first cheque to be displayed AND If the cheque displayed is the first cheque then pressing this FDK will cause the last cheque to be displayed.



Summary:
Integrated Cash-in 1.03 changes into Advance NDC 3.04

Description:
This RFC will be used to track the integration of both products source code and author projects.



Summary:
PA-DSS: password protect Supervisor options which enable files to be copied to removable media e.g. ECB6 database file

Description:
Accepted in April 2009 CCB



Summary:
Reserved Screens U0057, U0058, U0059 for CPM mask account number differently from rest of ANDC

Description:
Reserved Screens U0057, U0058, U0059 for CPM mask account number differently from rest of ANDC



Summary:
SCPM IT5 - When Cancel Mask = 000 in Bunch Cheque Accept State, Cancel Key on Pinpad is not Enabled

Description:
Cancel Mask in Bunch Cheque Accept state = 000.  When Please Insert Cheques screen is displayed, the Cancel key on the pinpad should be enabled but it isn't.

Degug Log attached. 

(See Relationships tab also)



Summary:
Two unsol's are reported when open statement printer is made fatal by jamming the statement at the time of capture.

Description:
For the test case 3.5.5 Statement Error Reporting Capture Jam .(5.6.12-Open Statement Printer Support.doc) 

Athena Machine Open Statement Printer Configured

After step 7, when the statement printer is presented, it is allowed to retract. While retracting ,jam is made by holding the statement. The 2 Unsol's are reported (23:31:19  # 858    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]V0[Unicode-x1C]4[Unicode-x1C]044048010008110000[Unicode-x1C]00000] 23:31:20  # 859    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]V0[Unicode-x1C]4[Unicode-x1C]00[Unicode-x1C]00000] )
But we should get only one unsol with severity and m data . But we are getting extra unsol.




Summary:
SCPM IT5 - Numeric Key 1-9 Active When Cancel Mask (& Display) in Bunch Cheque Accept State

Description:
In the Bunch Cheque Accept state, Cancel Key mask is present and is active when the Please Insert Cheques screen is displayed.

When this screen is displayed, numeric keys 1-9 on the pinpad are also active and when any are selected, the transaction is cancelled.

Debug log attached

(Note - there was another issue seen when updating the Cancel mask to 000.  This will be raised as a separate GR1T and reference this one)




Summary:
SCPM: Bunch Cheque flows are journalling U0058 screen without dynamic data.

Description:
Status Hander is now responsible for journalling screens U0058/U0059. There should be no code to handle that in Bunch Cheque flows.



Summary:
BunchChequeHandling flow unit test fails using payment processor. 

Description:
'RecordTransactions' property added to ImageMarkProcessor. Now the bunch cheque handling unit test fails as the IPaymentprocessor interface does not support this property.
ImageMarkProcessor unit test OK.
ANDC Product OK as class config. sets property directly on object (not via interface) 



Summary:
SCPM: New transaction reply function registry name wrongly entered

Description:
It has been noticed that the new transaction reply function is wrongly named as "Reply Function Process Bunch Cheque" in the ApplicationLinks registry key. It should be "Reply Function Process Multiple Cheques"




Summary:
TAR 402725 - Form based receipt starts at top of paper, no margin for preprinted header

Description:
Customer issue is that receipts are being printed too near the top of the
receipt, overwriting the pre-printed header on the receipt paper. This did 
not occur with the previous release. 

Starting point : K01 screen, used to reset the receipt to default
settings. This includes the "Setting The First Line Position" control code
: 

1B 5B 31 36 33 75 Top margin 163/144 inch (this line is lifted
straight from the Reference manual) 

See STAR for mor info




Summary:
SCPM IT5 - Error Code '7' Returned in Unsol (q7E) when ECP 83 = 000

Description:
While testing GR1T 431166 fix, the unsolicited returned contained an error code of '7' (- 'q7E' reported).

FS states that error code of '7' is returned when ECP 83 bit 0 or 1 is set to 1.  ECP 83 in this case was set to 000.

(Note - fix for GR1T 431166 was fine.  Fatal severity was not reported)



Summary:
P6 unsol sent even though ECB6 NOT enabled when cat 2/3 notes inserted

Description:
ATM Configuration:
GBRU mode :- 3
Cass Config :- CI1, CI10, CI4, CI15

Testcase no from Test Log: 5.4.8.1.2.1.1 (test 2.1 from 416108 P6 Unsol UTS)

Software Stack:
XFS :-  05.00.01.10
CIC Dep Agg :-  01.03.01
ANDC :-  93.04.00.05
CIC :- IT 1

Procedure Follwed:
1. EnableP6DetectedUnsol as 1 and Catmode as 0 and reboot
2. Enter mix of cat 2, 3 and 4 notes as per the test
3. Cat 2 and 3 notes correctly rejected as invalid
4. Test spec say should NOT get w@ and w?, but these WERE sent.




Summary:
AER at SOD is not populating note id's correctly and not reporting Mstatus consistently

Description:
Please see below to reproduce issue
ATM Configuration:
ATM- BNA2
AER: Enabled
ECB6 : Disabled

Testcase no from Test Log:5.4.3.1.1.3.3.2

Software Stack:
XFS :-  05.00.01.10
CIC Dep Agg :-  01.03.01
ANDC :-  93.04.00.05
CIC :- IT 1 (91.03.00.01)

Procedure Followed: - This test was not always the same. It mostly reported Mstatus 26 but sometimes it is also observed that it reported 00
1.Start Applications
2.Send all the downloads from OOS to GIS
3.Send OOS, SETCLOSE2 and GIS
4.Initiate a Depoist transaction
5.Confirmation screen is displayed with note counts of notes inserted
6. Open the feed unit on BNA2 and restart ATM
7. After power-up, start apps and since feed unit is still left open, AER enabled at SOD will fail- Expected w6 with fatal fitness and Mstatus 03(relevant error). Sometimes,Ii see that mstatus 26 is reported and sometimes I see that  mstatus 00 is reported. 

Attached logs for both the scenarios when test passed and test failed

Additional discrepancies observed: Please refer to logs where test case passed. 
1. Power message had something as follws:
BILLS AT POWERUP
ESC:001
00-000
VAL:000
RET:000*

2. 54 INIT BNA reset which failed immediately was journalled as 
*068*05/04/2009*10:31*NOTES IN ESCROW ON INIT BNA (RESET)
01-001


 
Attached logs



Summary:
Integration Issues for CIC 1.03 IT Build 1(91.03.00.01))

Description:
1.TI Author changes are not integrarted properly.
   *BNA Component Catalog reflects the change and has updated worker ids but Cash-In Component Dlls has previous worker ids ,it doesn't contain the latest changes .

2.For G416503 ,latest CashInComponent.WSC file required in not present with this build.The reason for this is that version 1.11.1.2.1.2 has those changes and member revison was not updated after making changes,so this is not included with 93.04.00.05  build.



Summary:
TAR 394184 - Arabic receipt printing uses wrong character set

Description:
Customer has modified their resevd.def K01 to add the ESC 3 (select Arabic
char set) so that on SelfServ prints in Arabic by default. 

Issues :- 
1. In certain circumstances, the printing of their receipt prints garbage
i.e. instead of printing an English header and Arabic body of receipt as
expected, it prints garbage (looks as though using wrong character set -
therefore becomes unreadable). 

2. After printing an Arabic receipt, if they go into Supervisor to print the 
counters onto the receipt, that this also prints garbage on the receipt
(i.e. uses wrong character set). The only way to resolve this is for them
to do an INIT RECPT. 


Issue Recreatd on Persona Machine - When I have tested test objective 1 and test objective 3 of test case 5.5.28.5 on persona machine then the expected data is not printed on receipt printer.

steps to recreate issue for test objective1:

1) Change the K01 screen of resrvd.def file as mentioned in test case.
2) Run AANDC on persona machine.
3) Do the transaction and send transaction reply as mentioned in test case.
4) No data is printed on Receipt.

steps to recreate issue for test objective3:

1) undo the changes as made in K01 screen.
2) Run AANDC and send K01 message from the host as mentioned in test case.
3) Do the transaction and send transaction reply as mentioned in test case.
4) No data is printed on receipt

The ASL file is located at the following location on Dundee server for both failures.

\\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4\GR1T394184





Summary:
SCPM: Integrate SCPM development to ANDC 3.4

Description:
Integrate the bunch cheque transaction reply and supervisor c++ code/ Author updates to ANDC 3.4



Summary:
SCPM - Issue with image printing of cheques returned in transaction reply function

Description:
Print Buffers function does not print the images of the cheques returned during in the transaction reply execution, it only prints the images of the deposited cheques.



Summary:
SCPM IT5 - Unpredictable Behaviour when Almost Simultaneous Actions/Events Happen (- Keypress and State Timeout)

Description:
This issue was found by chance while testing and subsequent attempts to recreated it were not always successful.  I did however manage to recreate.

Test scenario - 
1.  Cheque Summary Display state with cheque summary information displayed.  
2.  Select a value on the pinpad to view cheque details just as the state was about to timeout
3.  The Timeout screen was displayed and the beeper sounded.  The FDKs in the timeout screen appeared to be enabled however when Yes was selected, the application progressed to the Cheque Detail state and the timeout beeper continued to sound
4.  Attempting to select keys eg entering an amount resulted in display and keypress issues.  Keypresses were not being actioned in a timely manner and Timeout re-entered
5.  No keys could be selected and the application progressed to the Close state

No PD logs currently available but could probably be receated.  Will update after discussion.



Summary:
SCPM IT5 - Unexpected Behaviour when Returned Cheque Taken Just as it is being Retracted

Description:
Insert a cheque which will be refused/rejected in the Bunch Cheque Accept State.  When returned, take the cheque just as the timer times out and the cheque is about to be retracted.
The retract operation continues, unsolicted 'q5J' with 0 severity is reported to the host and the application progresses to the Good next state.  In the test scenario, the next state was a Cheque Summary State where the cheque information was displayed and the Cheques Inserted count = 01.
Given that there was no cheque in the device, I had expected the Bunch Cheque Accept state to remain and no unsol to be reported for a refused/rejected cheque which was taken.



Summary:
Apps Crash !!! when Floppy drive selected in 3 - Copy Logs(under 44 - Troubleshooting)

Description:
AANDC 93.04.00.05

Scenario:
1. Start the Applications
2. Go to Supervisor
3. Select 5 - Configure
4. Select 44 - Troubleshooting
5. Select 3 - Copy logs now, Drive list is shown, Select floppy drive, Application is getting Crashed and machine is getting reboted.



Summary:
SCPM IT4 - MPEG Displays only once then Black Screen for subsequent Displays

Description:
Included a screen in the bunch cheque accept state with played an .mpg file.  This plays on the first occurrence of displaying this screen but does not play again when this screen is to be displayed.

Closing the app and restarting again allows the first occurence to be played but no others.



Summary:
q3N Unsol is not observed on reboot when cheque is still in transport

Description:
Opened in version 93.04.00.04 ANDC

Procedure followed:
1.Initiate a Cheque Depoist transaction
2.Insert Cheque and select deposit on confirmation screen
3.Send transaction reply to deposit cheque and immediately reboot the machine.
4. On power-up, it is obeserved that q3N unsol is not reported, but secutiry trcae in journal is logged as Cheque captured.

Same as above is repeated, but this time just close applications and start application instead of rebooting the machine. q3N is observed as expected




Summary:
Rejected notes counts are not updated and printed on journal

Description:
Tested with 
XP SP3 + XFS 05.00.00 + XFS 05.00.01.10 + CIC DEP Agg 1.03.01 + ANDC 93.04.00.05

Steps to recreate
1. Insert 2 invalid notes
2. Invalid notes are returned and cancel transaction
3. Go to supervisor and check the Disp Counters
4. Rejected notes count is zero rather than two.
Also EJ data does not show Rejected note counts

The same kind of issue(reject counts are not update for deactivated notes) seen while running 5.4.7.2.2.2.1.5 test of G417825
Steps to recreate
1.ECB6 mode 1, cat3 roll back to 1, Cat3StoragePolicy to1
2. Deactivate EUR10 note type
3. Insert EUR10 counterfiet note and take returned note
3. See the journal message is not expected..i.e no reject count updated
Note: See G417825_5.4.7.2.2.2.1.5.zip attached file for more info 




Summary:
SCPM: when jam occurs clearing cheques at SoD, unsol msg is not clear that it is a SoD scenario

Description:
q3N should be sent when cheques are successfully cleared at SoD. Currently it is sending q2C which means jam/hwerror when all notes are being captured, but it is losing the info that this is during a SoD scenario. Probably q2N or q5N should be sent if a jam or hwerror occurs during this SoD procedure. 



Summary:
SCPM: For PCI compliance the BunchChequeAcceptService and ImageMarkDepositRecorder archive/backup directories need to be encrypted

Description:
The BunchChequeAcceptService and ImageMarkDepositRecorder components have archive/backup configuration options (configured via properties) which copy cheque images and retain them for a period of time.  It means these images will be retained beyond a transaction.  These options are disabled by default.  However, the Security team have advised these archive/backup directories need to be encrypted even though the options are disabled by default.

Need to tie in with the AANDC 3.4 project team to decide the best method for encrypting the directory.  The latest stance on this is that we'll provide documentation detailing how to encrypt the directories (in the case where a customer decides to enable these options).



Summary:
Logo1 is Not getting printed on Receipt (on Universal Printers with Rawdata only)

Description:
AANDC 93.04.00.05

Test Number: 5.6.1b.7.1.2 , 5.6.1b.7.1.3

Make sure Dynamicform = 0 set in registry for Journal and Receipt
Scenario:
1. Start the Applications.
2. Copy all the images required for testing to C:\SSDS\DLL
3. Send DEF_LGO from UNVPRNT5.txt message file
4. Send PR_BIT
Receipt it delivered, First logo image is not getting printed on receipt.
Second logo image is printing well.

I did Same test with on persona machines and both logos are printed there.




Summary:
SCPM: Support an NDC Flow going from the Handling state to an Accept state

Description:
Problem: When the flow goes from Handling to Accept state, the cheques that were already deposited/retracted/returned during the Handling  state are considered part of the current operation. This causes the StatusHandler to report wrong status as well as problems in Display states and Transaction request messages.

Javier suggested we could Clear the ScannedCheques array in the Accept state in this scenario.
This is a possible solution, but it would cause issues for receipt printing at the end of a chained transaction, since some deposited cheques details will have been cleared and hence cannot be printed on the receipt.
Mike believes the CIC does a Clear in the Accept state, so Javier's proposal would be consistent with CIC.
After some discussion, we decided based on the current NDC specification that it's not intended to be a valid NDC flow to go from the Handling state to an Accept state.
After the Handling state the NDC flow should go through the Close state before allowing another Accept.  The Display state allows going back to an Accept state if a customer really wants to deposit more cheques in one transaction.
As a minimum we would need to document this functionality/limitation in the IP.
Note that if we decided to support chaining Bunch Cheque Deposit transaction (i.e. going from Handling state to an Accept state), then this would likely impact many component implementations, e.g. Accept flow, both Display flows, StatusHandler, Handling flow?



Summary:
SCPM: Re-work clearing the ScannedCheques array for better synchronisation with StatusHandler

Description:
Synchronising the StatusHandler with the Close flow clearing the ScannedCheques array.
Current implementation is working, based on the start-up initialisation where the StatusHandler is registered before the Flows.
However the current design is poor.
Possible solution is to add an Assigner at the end of the Close state authored flow (after suspend) to call the Clear (i.e. not to call Clear from the .NET flow).
This issue should be worked on at the same time as the Close hook issue - GR1T 427021.



Summary:
Coupon printing with forms in ANDC 3.2.1MV

Description:
Coupons not being produced.
Hang in close state with footer data present.



Summary:
Application core crash is observed when invalid notes are deposited as  "DictionaryParser.wsc" is not registered by default

Description:
ATM Configuration:
GBRU mode :- 3
Cass Config :- CI1, CI2, CI3, CI4

Testcase no from Test Log: 5.3.2.1.3

Software Stack:
XFS :-  05.00.01.10
CIC Dep Agg :-  01.03.01
ANDC :-  93.04.00.05
CIC :- IT 1 (91.03.00.01)

Procedure follwed:
1. Start Applications
2. Initiate a Deposit transaction
3. Insert a bad not and good note
4. Bad note is rejected and the Application core crashes
 



Summary:
Printer status is not reported properly in receipt and journal printer fatal conditions

Description:
Receipt and Journal printer status is not reportexd correctly during the paper out, jam and printer left open conditioins. Logs are copied into \\wgbaandcinteg2\gritlogs\Investigations\03.04.00\IT4\GR1T431303



Summary:
TCPIP Supervisor Task should use the same configuration file used by AANDC and TTU Renderer Should look for the forms under C:\Program Files\NCR APTRA\Printing\TTU\Forms\.

Description:
TCPIP Supervisor Task Should use the same configuration file used by AANDC.



Summary:
SCPM FxCop issues in BunchChequeTransactionReply code

Description:
Found issues in design of BunchChequeTransactionReply code



Summary:
SCPM - cheque ID 000 is accepted even when it is present in the second cheque group in buffer B

Description:
Spotted this during code coverage analysis



Summary:
SMS - PC Keyboard only accepts 1 character

Description:
SMS Data Collector - When configured to use PC Keyboard only accepts 1 character



Summary:
Simulated Supervisor Entry/Exit is happening during close state for every transaction, if any device is in Fatal

Description:
If any device is in Fatall, initiating simulated supervisor and giving XFS Reset to the devices in close state. This is happening after every transaction.



Summary:
SCPM IT4 - Cheque at Exit/Sensor Blocked at Accept State Does not Report any Unsol

Description:
Scenario is when testing Close state with return cheques/no retract if not taken.  This completes as expected and the application returns to idling.
Initiating another bunch cheque deposit with the cheque still at the exit results in Device Not Available screen displayed in bunch cheque accept state processing.  Nothing is reported to the host for this then there seems to be no way to recover from this error.  Running test in sysapp is successful but subsequent use by the application still displays the error in the bunch cheque accept state.

Logs available although this is very easily recreatable.



Summary:
SCPM: powerfail unsols are not sent at Start of Day

Description:
When cheques are cleared to bins at SoD an unsol message should be sent to host. No unsol is sent, and no record of any command is found in Status Handler.



Summary:
SCPM: Timeout unsol is sent when Timeout state is activated and More Time requested

Description:
This occurs if ScanCheques is called more than once due to timeout and restart within the Cheque Accept state.

This should not send an unsol if after selecting more time cheques are entered. Only if timeout/cancel state exits are taken should it send the timeout/cancel unsol.



Summary:
SCPM: Status Handler does not send Retract unsol from Close State in case when cheques are retained from stacker

Description:
This scenario should be treated in same way as if cheques had been returned, not taken and retracted, by sending q7E or q1E unsol message.



Summary:
Port Graphics extension for Forms fix to 3.2.1 from 3.3.1

Description:
Port form ANDC 3.3.1 for WestPac

ProDevice 41.60
AANDC 3.2.1MV

G403761: There is no image printed on Receipt and Journal with Print Grpahics Control Sequence









Summary:
Default codeline format for SCPM in Advance NDC

Description:
For ANDC, ensure that the default textual representation of the codeline in the messages to the host and towards ImageMark is the American Style encoding.
The default on the device service is the european style.



Summary:
SCPM IT - Timeout and Cancel Unsols are Only Reported in Bunch Cheque Accept State

Description:
Not sure if this is a defect or RFC but an anomoly appears to exist.
When a bunch cheque deposit is cancelled or times out in the Bunch Cheque Accept state, a cancel/timeout unsol is reported to the host and printed to the journal.  

When a cheque is in the device and cancel or timeout occurs in the Display Cheque Summary or Cheque Detail Display states, no cancel/timeout unsol is reported to the host.




Summary:
SCPM IT4 - Retract in Close Always Returns Fatal Severity

Description:
When a cheque returned in the Close state after a cancel is not taken then subsequently retracted, the retract unsol is correctly reported but the severity is always fatal.  The device isn't fatal.

Logs are available but Mike has seen this scenario and understands where to investigate - doesn't require logs.



Summary:
Ensure that retracted cheques are stored into Bin2 by default

Description:
Having consulted Javier L., the recommended approach is to change the default configuration of bins. 
By default, bin 1 is tagged as retracting bin as well as depositing bin, which causes that the device service will use bin 1 for retracts.
I tested that by setting this, the cheques are retracted to bin 2. Need to update the installer - decide between the new installer or old good NCR_SPs.reg
===
REGEDIT4
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\WOSA/XFS_ROOT\SERVICE_PROVIDERS\SCPM\GENERAL_CONFIGS]
"BinConfiguration"="1"
===





Summary:
SCPM IT4 - MSG Mode Beeper Option has Reverse Behaviour

Description:
Message mode option 2C controls whether the beeper is enabled for cheque deposit & eject.  Default behaviour when option is 0 is to sound beeper.  

When option is 0, the beeper is not sounded.  When the option is set to a valid value (ie 4) to disable the beeper, the beeper is sounded.



Summary:
TAR 398851 - Large amount of data in GBRU Error report causes terminal to hang

Description:
When a large amount of data is sent in a reply to AA-NDC with Debug running, 
a hang occurs because the data cannot be handled. This has already been seen 
as GRIT 406043, but has not been reported as a customer issue previously.




Summary:
TAR 402501 -  Print Failure on PRNT CMPNT VERS on AANDC

Description:
"while trying to do the function PRNT CMPNT VERS from the MISC FUNCS menu in 
AANDC Supervisor when the supervisor display is transferred to the front. 
The issue that arises is that a ?PRINT FAILURE? message is displayed when
the function is selected. 

When PRNT SCRW VERS is selected it successfully prints out the scrw version
on the receipt printer. 

The issue occurs on USB receipt printers only. When tried on an SDC receipt 
printer the issue does not arise. 

For more details See STAR



Summary:
TAR 383609 - Card reader reports No Card in Dash rdr as Cancelling Txn, but presents cash

Description:
See TAR.



Summary:
TAR 397725 - Create Signature function requires double press of enter

Description:
Using the AA-NDC supervisor function Create Signature (Replenish Menu,
option 55), if the note inserted fails to be recognised or has the same
orientation as the previous entry, then reserved screen e08: 
'' 
' UNKNOWN OR SAME ORIENTATION ' 
'' 
' PRESS ENTER TO INSERT NOTE ' 
' OR CANCEL TO EXIT FUNCTION ' 
Pressing ENTER results in the same screen being displayed - note entry is
only enabled when enter is pressed a second time. 

This should be easily recreatable by inserting an unknown note rather than
counterfeit of known note. 

I suspect that this problem may be because the Active Script Host 8b1319na1
activates workgroup 3 which displays this error screen and activates the
cancel and enter keys in both the GBNA_Taken event handler and the
GBNA_CreateP6SignatureOK event handler if invalidSig flag is set, but I
don't have debug logs to corroborate this theory, sorry. 

I have recreated this issue in our lab and it is different if you use an EOP 
or transfer to the front display. 
Using the EOP you require to press enter to get the screen e08 to display
then the second enter is required for note entry. 
When the display is transferred to the front display then the e08 screen is
displayed when the note is returned and two enter keys are required to
proceed to note entry.




Summary:
TAR 395928 -  Export Signature for (G)BNA fails for future dates with UD Location

Description:
The processing for the Supervisor function "Extract Signatures" fails when
using the US location and the date is set to a later month than the current
date. This can be readily recreated by setting the location to US then
starting AA-NDC Supervisor and slecting Option 4 (Replenish) then 56
(Extract Sigs)

RESRVD.DEF file has been updated for proper GUI display to enter the Start and End dates 




Summary:
SCPM: Status Handler to include journalling for cheque capture with U0058/U0059 screens

Description:
As this functionality is common in all areas of the application eg. SoD, Cheque accept state, close state, but not in Supervisor, then it is the responsibility of status handler to journal whenever cheques have been captured successfully or not, using screens U0058/U0059.



Summary:
TAR 400550 - Incorrect characters printed on USB 80mm Receipt and Journal Printers

Description:
The BNA Device Identification Graphic 'w' is printed to the journal using the wrong character set



Summary:
DieboldIX: AANDC Application hang due to EPP being unresponsvie

Description:
AANDC application hangs intermittently on Diebold IX. Keyboard becomes unresponsive. 
What ever the keys we press there will be no action. This has been observed in different states of the application. After some time the AANDC application goes to the timeout screen and asks do you want more time.



Summary:
SCPM: after sending early Ready9 from status handler the treq handler stays in treq state

Description:
New functionality is added to status handler to send Ready9 when all cheques are returned in TReq state, prior to sending retract unsol. In this scenario the Handler does not exit the state after the message is sent and only leaves after timeout.



Summary:
SupvTasks: .NET TCPIP Supervisor Task print config option displays configuration

Description:
Disp config option already displays tcp/ip configurations, print config should directly go for print tcp/ip configruation or display option in printconfig shoould be made optional.



Summary:
TAR 395230 - ]0 printed on the receipt when exiting Diagnostics

Description:
When exiting from Diagnostics, ]0 is printed onto the receipt. (Non-USB
printers only). The characters ]0 are printed on the receipt (Close square
bracket + zero) on every exit from Diagnostics. 

Easily recreatable : 
- Switch into Supervisor mode 
- Select 7 Diagnostics 
- Exit from Diagnostics 
- just prior to the Supervisor Select menu appearing on the EOP the ]0 is
printed on the receipt 

]0 is printed on the receipt whenever exit from Diagnostics is chosen. This 
impacts the next receipt to be printed. 




Summary:
Issue with Customer Entered Amount field in Cheque Details wrapper

Description:
The "ConsumerEnteredAmount" field in the ChequeDetails (.net) always returns null even when amount is entered in cheque detail display flow.



Summary:
SCPM: C11 Reject message sent after every cheque related Trans Reply

Description:
All Trans Reply messages for cheque are being rejected with C11 message. They should only be rejected when Reply is sent with cheque Function when no cheques are in device. Also, issue was seen where the C11 update for SCPM can adversely affect normal CPM, preventing the 'c' function from being rejected.



Summary:
ANDC 03.04.00 IT5 Installer Updates

Description:
Installer updates are required to 
	pickup and register ssdsDVDWriter.dll, 
	install security template file,
	register Supervisoir user group within Windows, 
	register CIC components



Summary:
TAR 392705 - Transaction reply screen update data voiced instead of expected AudioID

Description:
Customer reported issue on AA-NDC 03.03.00. 

They advised that if they send a transaction reply with a screen display
update to the transaction processing screen, that instead of playing the
audio which should be played with that screen, AA-NDC voices the data from
the screen update. 

For example, if they send the following transaction reply (screen update to
022), then "Hello 1234 Hello" is voiced when the "take your cash" screen 022 
is displayed. The AudioID 0022 they have associated is not voiced at all. 


4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C]01[Unicode-x1C]12342022022[Unicode-x0F]@@HELLO 1234 HELLO[Unicode-x1C]003$50 CASH WITHDAWAL 

If they update a screen that is displayed outside of the transaction request 
state (i.e. close screen 125) then it behaves correctly and does not voice
the screen update data. It voices the appropriate audioID for the screen
displayed. 

[4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C]01[Unicode-x1C]12342022125 [Unicode-x0F]@@HELLO 1234 HELLO[Unicode-x1C]003$50 CASH WITHDAWAL 



Summary:
TAR 393354:  Mstat 26(dec) returnd in unsolic instead of 38(dec) when Card Capture Bin Full

Description:
When the LFCC Bin was tested in a full scenario the Mstatus which is retured 
   is 26 (decimal)  - Speed out of specification slow - instead of 38 (decimal) 
   - LFCC bin full soon/full:
   
   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]0[Unicode-x1C]26[Unicode-x1C]4]




Summary:
Rename serviceFactory.xml to AdvanceNDC.accfg for (future) integration into APTRA Studio

Description:
Changing the extension of the Xml configuration file used by the class configurator will allow us to use the APTRA Studio tool to edit the file later.

Details in attachment.



Summary:
Exception Report Example Hook: Remove logging of customer-sensitive data from the example hook

Description:
Remove logging of the codeline from our example hook when we provide it in the AANDC 3.4 product release.  We should also remove logging of any other customer-sensitive data, such as card details.  This is to avoid introducing complications with being PA-DSS compliant in the AANDC 3.4 release (which is a requirement for AANDC 3.4).



Summary:
Integrate DVD support on to EJ multiple destination

Description:
This needs to be done on top of EJ file name requirement or reworked.



Summary:
Support '255' state Table Entry to suppress timeout behaviour

Description:
Need to update the Flow Reflection to recognise 255 as a value that stops Timeout behaviour in the flow.

Could add/extend an additional attribute that only sets the 'TimeoutFlow' attribute if the Timeout exit is not '255'



Summary:
SCPM: Move the Receipt Printing code from the PS Customisations archive to the NDCSPLBuild archive

Description:
Decided that the Receipt Printing code will be used by all/most offline SCPM customers, so it should be moved to the product archive and product deliverables.



Summary:
ErrorDetection on DVDWrite project needs be done during IntigrationTesting.  

Description:
ErrorDetection on DVDWrite project needs be done during IntigrationTesting. 



Summary:
Failing to write to disk with CDWrite component once after writing this disk with DVDWriteWrapper

Description:
Issue creattion:
1. Install IMAPI2 patch.
2. Write to CD using any supervisor function ( DVDWriteWrapper writes  to CD as IMAPI2 patch is installed)
3. Uninstall IMAPI2 patch.
4.Write to same CD using any supervisor function ( As IMAPI2 is uninstalled CDWrite component writes to CD) -  It is writing to CD but Contents of the CD will be invisible.





Summary:
AANDC SCPM - NDCJrnlSrv - Mapping forms to Reserved Screen Functionality - If field on form is not specified in Reserved Screen then ignore the field

Description:
this allows the reserved screens to take control of Journal Prints from Supervisor Tasks - sometimes the supervisor tasks are journalling items that are not required in AANDC such as task entry and exit



Summary:
NDCStates: wrong assembly name and namespace.

Description:
1. The assembly name and namespace are NCR.APTRA.NDC. It¿s not right and doesn¿t follow SPL rules. The name should be NCR.APTRA.NDC.NDCStates.
2. NDCState class is saved a file NDCStateCommon.cs. It should be in a file NDCState.cs
3. StateUknownFlow wrong file name.





Summary:
THe Advance NDC reference manual needs updated to reflect improvments in EMV Exits 

Description:
EMV Exits 02.02.00 contains updates which effect the AANDC reference manual. The manual should be updated to reflect these updates.

p12-3 DASH after ATR is syccessful it is now possible to fallback by usnig the EMV Smart DIP Take Card State
p10-59 Transaction Reply update there is now the possibility of a 'bc' field.

Further information can be found in the EMV Exits Functional Specification revision 445-0656521   I.  Section 3.10. STATE TYPE `Z007¿ (EMV SMART DIP TAKE CARD STATE)   &  Appendix L "FIELD bc ¿ TRANSACTION DATA OBJECTS UPDATE BUFFER"




Summary:
TCPIP Supervisor - Default Values AANDC 3.3 TCPIP Values at SOD to be setup by our code

Description:
Default Values should be setup when:-
1) SOD TPA CONNECTION is created
2) Message Delimitation is enabled - means all Message Delimeter attributes shouls have defaults as per AANDC 3.3
3) Config from client to server and Config from server to client should have defaults as per AANDC 3.3



Summary:
Wincor: Extended Encryption Key Exchange Failing With Master Key

Description:

See attachment for details.



Summary:
Enhanced EJ - CD Write Component - Buffer Overrun Error - Needs to be fixed in 3.3.1 and 3.2.2

Description:
CDWrapper.cpp Line 119 - Please fix in 3.3.1 and 3.2.2

wcsncpy(DriveLetter,destination,4); should be 

wcsncpy(DriveLetter,destination,2);



Summary:
TAR 393239 - Hang if Cancel pressed after Cash Deposit times out without notes entered

Description:
See STAR



Summary:
TCPIPSupvTask: SELECT option is not getting displayed in SSL MENU in TTU.

Description:
SSL MENU is not displaying SELECT option in TTU.



Summary:
TAR 391972 - Access Violation in Application Core when processing EJ status

Description:
See STAR



Summary:
AANDC does not supply the correct value for extension state next state parameters when Alphanumeric state option is enabled.

Description:
When performing Biometric Exits testing with the alphanumeric state number option enabled certain Biometric state took the incorrect next state number. This is an AANDC issue.

If the next state number is supplied from an extension state the value returned by the Advance NDC GetIntVal call for that parameter is not correct.  It remains as it was downloaded,  so 553 in base 36 is returned as the integer value 553.
 
When the state parameter is in the primary state table the value is returned correctly i.e. it is converted from base 36 into base 10, for example 553 is converted to 6663.



Summary:
TAR 392609 - TCP Local and Remote Parameters SupvConfig does not allow values between 1-255

Description:
In AA-NDC 03.03.00 the option to enter Local and Remote Port Numbers in
Supervisor - 37 - TCP/IP Config does not allow the values of 1-255 not to
be entered. 

This was previously addressed by TAR 326507 for AA-NDC 03.00.04 but has not
been migrated to AA-NDC 03.03.00. 



Summary:
Application crash while performing DISPRNT transaction

Description:
Set message mode to 100007 or 100001 and perform withdrawal transactiion
send DISPRNT message form ANGEL and let the cash get retracted.
After the cash retracts the application crashes.



Summary:
TAR 384855 Silent Debug rollover is losing data

Description:
With Silent Debug started and configured to generate daily log files, it has been seen that when the file cuts over after midnight, data is being written to and then lost from the new file.




Summary:
Remove instances of unsecure string handling functions identified for PA DSS compliance

Description:
Remove instances of unsecure string handling functions identified for PA DSS compliance



Summary:
"Powerup Msg = 28" is shown on I06 screen instead of DISABLED/ENABLED

Description:
AANDC 93.04.00.04

Scenario:
Start the Applications
Go to Supervisor
Enter 5 - Configure menu
Enter 6 - Message mode
Enter Message mode as 1001 ( it can be anything i am just giving an example)
I06 screen is Displayed.

Powerup Msg = 28 is shown instead of DISABLED.



Summary:
P6 unsol is sent in supervisor

Description:
Tested with XFS 95.00.01.08 and ANDC 3.03
Recreation Steps:
1. Make registry entry EnableP6DetectedUnsol=1
2. Deposit2* EUR 100 Cat4, 2* EUR 100 Cat3, 2* EUR 100 Cat2 notes
3. At confirmation screen, rack out the lower transport 
4. Select deposit and send BNA_DEP reply
5. Device goes to fatal state
6.Enter supervisor mode and rack in lower transport and do 54-INIT BNA
7. Init successful and then P6 unsol is sent (w@ unsol)







Summary:
VDMListener worker needs to be  to signal on  VDM requests in all modes

Description:
From: V, Kiran 

 we are able to select Mast icon and go to Diagnostics from Select Menu in Supervisor mode. But when we tried to do the same while the ATM is in OOS mode, the status of our authored appln is still remaining in ENTERPENDING mode(when we check VDM status in WosaTool). But appln core is active and just waiting for our authored appln to acknowledge and is not entering to Supv mode(not going to select menu) except it displays the screen as "Supervisor Mode".
 The authored application is waiting at VDM Listener itself even when ATM is OOS.

Hi Andrew,
 
He has an always active VDM Listener in his separate Authored APP but he finds that of the ATM is OOS but not in Supervisor and the MSSA is invoked, the VDM Listener in his Authored APP is not signaling. 
 
I noticed that at this point the VDM listener in the Supervisor dll will not be active...so how is the appcore detecting and what is it using to drive the system menu to answer the VDM request? 
 
Zubair




Summary:
TCPIPSupvTasks: NDCJrnlService prininting labels in EJ/JP printing.

Description:
NDC journal service is not mapping XFS form fiels to resrvd.def fields properly

Fixed By Modifiying the NDCJrnlSrv Behaviour (No to print the Dynamic Labels if the reserved screen doesn't have the label tags)



Summary:
BNA TI unsols are not sent when tested using simulator

Description:
Steps followed:
1. Change the cass status to WFS_CIM_STATCUMISSING
2. No unsol sent.
3. Change status to WFS_CIM_STATCUOK
4. No unsols sent.




Summary:
When >90 suspect notes are deposited, the P6 unsol is missing valted notes data

Description:
Tested with XFS 95.00.01.08 and ANDC 3.3 
Recreation steps: 
1. EnableP6DetectedUnsol=1
2. Start application and send download and set option 45 to 1
3. Deposit more than 90 suspect notes of the same kind
4. P6 unsol sent but valted notes data/string is missing in the unsol message for notes greater than 90
5. Sent BNA_DEP rely and transaction goes to close state.




Summary:
P6 unsol is not sent if P6 notes are detected at the start of the day

Description:
Tested with XFS 95.00.01.08 and ANDC 3.3 
Recreation steps:
(EnableErrorRecovery=1)
1. Deposit 2*EUR 100 valid notes, 3*EUR 100 Cat 2, 1*EUR 50 Cat 3 notes
2. Reboot the machine at confirmation screen
3. Start application after reboot by keeping mode switch in normal position
4. Cat 3 unsol is not sent after power up

The same issue is seen if Cat 3 notes are detected at SOD with mode switch in supervisor.





Summary:
Include the Transaction request state updates for EMV 02.02.00  in the AANDC Publications released with 3.04

Description:
The updates to the transaction request state which were required for EMV Exits 02.02.00 should be included in the AANDC Information Products that are released with AANDC 3.04.

The updates are defined in Revision K of the NDC Message Interface Specification  [445-0705907 Rev K] - GR1T RFCS 420910 and 420912 



Summary:
Tampering Unsolicited messge is not logged to Journal for BNA device

Description:
It is observed that when cassettes is inserted or removed, unsolicitied message is reported to host, but it is not not logged to journal like how it is observed for Cash Handler device. 

Attached logs capture information for reject bin removal and insertion, where Cash Handler unsolicited message is logged to journal while BNA device is not logged



Summary:
ANDC .NET assemblies to use strong names.

Description:
ANDC .net components work fine without strong names. Some added steps to name a c++/cli assembly.

SPL requires strongly named assemblies
http://susday645.corp.ncr.com:2001/wiki/index.php/Creating_a_New_Visual_Studio_Project_Step-by-Step?WL=1&refresh=yes

FXCop will raise a Critical Error if the assembly does not have a strong name.



Summary:
SCPM: Update the DisplayChequeSummaryState to support display based on screen paging

Description:
As per NDC Message Spec, RevK.

DisplayChequeSummaryState:  A useability improvement has been defined, to support screen paging display, rather than displaying based on the current cheque index always being at the top of the list of cheques.  This will overcome the issue where let's say there are 10 cheques to be deposited, with 5 cheques per page in the SummaryState, and then cheque 8 is viewed in the DetailState, then returning to the SummaryState shows cheque 8 at the top of the list (i.e. 8,9,10).  The change would show cheques 6,7,8,9 and 10.



Summary:
SCPM: Suppress cheque unsol messages for offline cheque deposit transactions

Description:
Now that we will be providing the Exception Reporting hook, which is needed by DBS, it means we will be providing the Status Handler.  The Status Handler is responsible for sending Sol/Unsol messages.  Obviously for an Offline cheque transaction we will not send Sol messages, but I'm wondering if we should send Unsol messages to the host?  the currently planned implementation will send cheque unsols even in the case of an offline transaction.

There is already an Enhanced Configuration Parameter 32 which is used to "enable" Unsol reporting for some specific devices.  We may be able to extend this option to "suppress" Unsol reporting for the cheque device.  This would require an RFC to be raised on the NDC Message Spec.



Summary:
SCPM: Add timeout exit to bunch cheque handling flow for cheques not taken and not retracted.

Description:
the new exit applies for all customer timeouts where cheques not taken. Replaces 'retracted' exit

As per AS 445-0705907 Rev K

review notes:
Clarify the exit to be used when MediaControl is 002 and media has not been taken  (cheques left in the exit slot). Notice there may be customer cheques in the re-buncher.
-	This exit seems a good Choice but the name of the exit is prone to errors.
-	 Good operation may also be a Choice but the cardholder hasn¿t taken the cheques and there may be cheques in the re-buncher and not presented yet.
ACCEPT:
-	Add a timeout exit.




Summary:
TCPIPSupvTasks: Some times TTU is not getting refreshed with forms.

Description:
when flow is going from AANDC screens to CCM screen in supervisor, TTU is not displaying CCM forms (not refreshing) but  FDKs  are active and taking input values.



Summary:
Reject bin TI status is not printed on journal when option 24 set to 0

Description:
Tested with XFS 95.00.01.08 and ANDC 3.3
Recreation steps:
1. Enter into 7-diagnostics
2. Remove Cash in cassette 2(CI2) from GBNA and insert back
3. Remove reject bin and insert back
4. Exit from Diagnostics
5. TI status for cassette removal and insertion printed on journal.But no TI status for reject bin is printed on journal.

This issue is intermittent and it is observed from debug log that event is not triggered for reject bin removal but event triggered for reject bin insertion. No TI journalling is done for reject bin removal or insertion. 



Summary:
Application core crash is observed when Option24 is set to 002 and 1FSFSFS74 is retreived

Description:
ATM configuration:
Cash Handler and no GBXX

S/W stack:
XFS5.0, CIC DEP 1.2.11, XFS 5.0.1, ANDC 3.03 released version above that TI UT dlls

Procedure Followed:
1. Send APPC.txt and LD downloads.
2.  Send GETTI ((1FSFSFS74)- Observed that GETTI did not have information for Cash Handler (E)
3.Set Option 24 to 002 and download this to Host
4. Sent GETTI (1FSFSFS74)- observed Application core crashed.


Additionally, I just want to mention that before I did this, I also observed that Cash Handler Cass removal/ insertion events were generated at XFS level, but application core did not pick that information. I am just providing Wincor Tool logs for this as did not see anything in the debug logs when testing this. 



Summary:
Wrong Screen Displayed when Retracting Cheques in Bunch Cheque Handling State with Media Control set to 000

Description:
When cheques are selected for return by the user and not taken in the Bunch Cheque Handling State, the screen defined in table entry 4 of extension state 1 is displayed during the retract (Wait for More Returned screen).

Media Control in this instance was 000 (deposit cheques) but they were selected for return in the Cheque Detail Display State.



Summary:
NEXT and PREVIOUS Screens are displayed in Cheque Summary Display State when FDK Masks are 000 and more cheques than can be displayed is entered 

Description:
Setting the Next and Previous FDK masks to 000 in Cheque Summary Display state but having screens referenced in the Next and Previous screen table entries results in the overlay being displayed when more cheques than can be displayed are entered. 

The FS states that these screens are not displayed if FDK mask is 000.  

It all works OK as long as the number of cheques entered is less than or equal to number of cheques that can be displayed in the Cheque Summary Display State.



Summary:
Installation of Display manager 93.00.03.01 is failed while installing AANDC93.04.00.04.

Description:
Display mnager 93.00.03.01 is throwng an installation error when installating AANDC93.04.00.04.

Attached required logs.



Summary:
Expose more via the ChequeDetails Wrapper

Description:
Need to add properties to access CurrentLocation and CustomerAccess, and verify if any others are missing that are needed (these may be needed for the DBS Exception Reporting).
Also need to be able to set the Location property, to allow offline control of the destination of individual cheques (although this is not needed for the DBS solution - it could be needed for other offline solutions).



Summary:
Cash-In Related Changes from GRIT 419965 (DVD Support) Need merged into CIC 1.3

Description:
Placeholder for this author work to be provided to the CIC team so it can be integrated. Aparna will provide the final authoring instructions when UTC. The changes affect the Create Sigs and Write Sigs functions



Summary:
Cash-In Related Changes from GRIT 419928 (24V Reset) Need merged into CIC 1.3

Description:
Placeholder for this author work to be provided to the CIC team so it can be integrated. Nagu will provide the final authoring instructions when UTC



Summary:
TCPIPSupvTasks: Create all TCPIP Supv objects in SOD to reduce access time in supervisor

Description:
For the first time when TCPIP supv objects are created, it is talking long time, to reduce it, create all objects in SOD rather than creating when accessed. Also reduce code complext of of GetObject function in TaskFactory class.



Summary:
CIC: XFS reports refuse notes reason starting from 0 where as NDC message spec specifies reason starting from 1

Description:
There is small difference in refuse reason index  between XFS reason code and NDC Message Spec reason code
XFS reason codes starts from 0 but NDC message spec reason code starts from 1, this results CashAccept State has to map XFS reason codes to NDC Message spec reason codes by just adding 1 to XFS reason code.



Summary:
Author Work required for SMS Keyboard Worker

Description:
Author work is required for SMS keyboard worker.  Deferred as impact on testers would be high with new functionality, existing test specs will need updated



Summary:
TCPIPSupvTasks: NetWorkValues tasks are not updating XML files

Description:
networkvalue tasks (updating remot port,local port etc....) are not updating XML file



Summary:
TCPIPSupvTasks: CIFRenderer should  look at same location which TTURender is looking

Description:
Since CIFRenderer and TTURenderer uses same forms to display supervisor menus, CIF renderer should depend on the path which TTU is depending on registry key.
If no registry key	



Summary:
Diebold IX with AXIOHM - require pointsize param in all forms

Description:
 text squashed if pointsize not defined in field.NCR value ignored if row/col. Wincor - value ignored if CPI used.
Opteva  pointsize supported but have defualt 7 if not supplied.

On DBD IX pointsize param is required




Summary:
Opteva DBD_DMJournalPtr reports as not configured.

Description:
ANDC looks at WFS_INF_PTR_CAPABILITIES->fwWriteForm=WFS_PTR_WRITETEXT for basic paper journal.
DBD_DMJournalPtr reports Zero for fwWriteForm as printer only supports raw data.
CEN Spec is not clear. 



Summary:
Reserved Screen Updates for RFC 419956 (Powerup on Comms reconnect) not done for Wincor screens

Description:
Reserved Screen Updates for RFC 419956 (Powerup on Comms reconnect) not done for Resrvd.4012 (Wincor specific)



Summary:
SCPM:  Update archive to use the latest versions of all .NET dependencies

Description:
Also note that for PA-DSS compliance, we need to pick up the latest versions of the following components:
.NET Hide Sensitive Data Service (*) - Eileen
.NET Data Record (*) - Eileen
.NET Data Record Interfaces (*) - Wolf
.NET Receipt Service (*) - Eileen

Bilal is currently checking if there are any PA-DSS changes required to the CodelineValSrv and ChqAccptSrvCore components.
Javier needs to update the cheque device service for PA-DSS compliance - refer to G427492.



Summary:
SCPM: to support different decimal amount format representations (currently 0.00 fixed format in Detail and Summary Flows)

Description:
Currently in Detail and Summary the decimal amount format is fixed to 0.00, it should support different decimal representation like 0.000

The 'real' issue is to do with the value of the cheque we are entering the amount for.  Currently we assume two decimal places so '1000' is really '10.00', the problem is tricky as the ImageMark stuff also has some assumptions about the value.



Summary:
Diebold IX with AXIOHM -The print allignment is not proper if we Print using Print_raw_data 

Description:
Raw data margin issue with axiohm thermal printer on IX.



Summary:
Junk data is printed on journal while reprinting the journal backup before which journal backup reprint halted

Description:
Build: AANDC 93.04.00.03  

Test Number : 5.10 form JournalPrinterTestSpec.doc  
Scenario: 
1. Start the apps. 
2. Enable the Journal backup ( 3 FS FS FS 1A FS FS 1600117002) 
3.Open the journal head and perform 4/5 transactions which should print on journal. 
4. Journal Backup gets started
 5. Replenish paper in Journal printer such that approximately 3 inches of Printer paper is available for Journal printing. Close the Head. 
6. Enter Supervisor and exit. 
7. backup re printing starts and stops as the paper gets exhausted.
 8. load full roll in JP.
9. Enter Supervisor and exit. 
10. repriting strats. for the first 3 lines there is a junk data printed. I will attach the scan copy to the GR1T later.

Logs Attached to GR1T.

 Appsight logs are on server: \\wgbaandcinteg2\gritlogs\Investigations\JP Unsol and Junk data.zip



Summary:
SCPM:  Handling and Close States need to be able to exit the state in the case when cheques are configured to be returned and not retracted, but the cheques are not taken

Description:
Issue found during code review... handling for returning and leaving cheques at the exit slot.  The device service does not return a completion event when configured to DoNothing.  It means the flow needs to handle exiting the State when cheques are not taken - this impacts the Close State and Handling State.  It's debatable whether the return and leave cheques handling is also required for the Accept State and TrReply function - but this would require an NDC message spec update.  Based on the current Handling State and Close state implementations, there would be a hang when DoNothing is configured for the device service - to avoid this DBS should always retract cheques - Zubair mentioned previously that he believes DBS retract cheques.  This GR1T has been raised to track updates to both States - likely to handle taking a Good exit.



Summary:
 AANDC Voice Guidance orientation script not allowed to play to the end ¿  change timer from config to fixed of 4mins (US implemented for Cardtronics)

Description:
Hi Bill - just to confirm that I will take this to a CCB for including in AANDC 3.4 on the basis that this is a small change and it is acceptable for us to implement the same solution as provided to Cardtronics.   Best Regards, Alison.
_____________________________________________ 
From: 	May, William J  
Sent:	18 March 2009 13:08
To:	Tait, Alison; Cipollone, Stefano
Cc:	Yakub, Zubair; Baker, Matthew D
Subject:	AANDC Voice Guidance orientation script not allowed to play to the end


Hi Alison and Stefano,

Cardtronics recently discovered that when they use Americas AANDC 3.02.11 voice guidance, their orientation script was interrupted part way through playing. This did not occur with Americas AANDC 3.00.30 voice guidance.

What happened is that when we were testing pre-release 3.02.10 last year, we found that the VG orientation script would play until finished and then just wait forever for the person to make their selection. The ATM never timed out. This could cause a problem on a standard audio ATM because there was no way to detect whether the person unplugged their headphone and walked away. On enhanced audio, this is not as much of a problem because the headjack removal is detected and the ATM returns to idle mode.

Anyway, we made a change for the final 3.02.10 release to have the ATM time out during the playing of the VG orientation script after a certain amount of time if no selection was made by the cardholder. The timer that was used for this was the VG-adjusted keyboard timer. Unfortunately, this adjusted keyboard timer is not normally large enough to allow a longer orientation script to complete.

We made a change for Cardtronics to use a fixed 4-minute timer for VG orientation script, rather than using the adjusted keyboard timer. Cardtronics is satisfied with this change, and we have made this change for our upcoming 3.02.20 release as well.

We tested AANDC 3.03.01 and found that this same issue exists with 3.03, and presumably will exist in 3.04 as well. We would like for you to consider making a change for 3.04 to correct this issue. At minimum, you could change to use the same fixed 4 minute timer as we did. If there is a better way to handle this, such as possibly being notified when the orientation script completes playing, that would be all the better. I am not sure what the options are for handling this issue, given that 'repetitions=' and 'configRetryCount=' options can be used to repeat the orientation script more than once.

See GRIT 424234.

Please let me know if this change will be considered for 3.04. Let me know if you have any questions or need to discuss this further.

Thanks and Regards,
Bill




Summary:
TCPIPSupvTasks: Create all supervisor task objects in SOD of app core 

Description:
Create all required tcpio supv task objects in SOD of app core, so that when tasks from supervisor are access will be quick to display tasks.



Summary:
Cheque Accept State - Cancel key not enabled when device re-enabled for cheque input

Description:
The cancel key is not enabled when the device is re-enabled after refused cheques have been taken.

Scenario is to add a invalid cheque (test note) and then take the 'cheque' when ejected.  The state re-enables the device and prompts the user to enter a cheque - no way of cancelling the operation.



Summary:
TCPIPSupvTasks: When CANCEL is pressed in SSL sub menus, it is going to 2 levels higher.

Description:
When CANCEL is pressed in SSL sub menus, it is going to 2 levels higher, it has to go immediate high level



Summary:
TCPIPSupvTasks: CONFIG AS option not working from Server to Client.

Description:
when changing configuration from Server to Client in CONFIG AS it is not working			



Summary:
Bunch Cheque Accept - Enable Image Processing state parameter ignored.

Description:

The Bunch Cheque Flow has a boolean properties 'DetermineChequeAcceptability' and 'AmountForEachCheque' which map to the state table entry 4 'Enable Image Processing'.  These property values are not used and cheque validation always takes place if there is a validation service assigned to the cheque service.

The Xml configuration for image capture also needs taken into account in the configuration of the service (Detailed in related G416341)



Summary:
EJ Hook ¿ required to allow PS to customise EJ (e.g. have two copies and checksum each line) for unique customer reqs

Description:
EJ hook requirement will be included as an undocumented feature for AANDC 3.4, an example will be provided to PS to manage as a customisation.




Summary:
Remove mstatus info for GBRU to CDM mapping NDC Reference Manual 

Description:
Remove mstatus info for GBRU to CDM mapping NDC Reference Manual - information should be extracted from eng doc and provided to Gasper/Switches directly




Summary:
Test with latest version of Solidcore C&C which is 2.01.00    

Description:
Test with latest version of Solidcore C&C which is 2.01.00    




Summary:
Test with the latest version of MSSA which is  02.01.00  

Description:
To test with MSSA 2.1.0



Summary:
Presentation Client Installer - NDCDisplayHook location needs moved to c:\program files\ncr aptra\advance ndc

Description:
File still installed to c:\ssds\dll 



Summary:
SCPM:  NDCTerminalService returns old Machine Number

Description:
When Machine Number is changed in supervisor, the NDCTerminal Service keeps returning the same number that was valid at start of day.
A quick look at the code showed that the machine number is read from the corresponding CDI store when the NDCTerminalService is constructed, rather than each time.



Summary:
Manual Config DNS task gets called even though user Selects Flex Config task

Description:
In TCPIP Configure Menu even though user selects the Flex DNS Config Task Manual DNS task gets called.



Summary:
Application Crash with mode switch not found error on D450 (SIU Audio)

Description:
Application Crash with mode switch not found error on D450 .

Application is sending SIU_SET_AUXILIARY command to set the Enhanced Audio Control while initializing SIU. This command failed with which SIU object is destroyed. While checking supervisor present, application crashes as there is no SIU object.




Summary:
SCPM: Move the Close State functionality from the MISCONT hook to USERFUNS.SCR and add an Assigner to the authored flow

Description:
This change was decided on 26th March 2008 when reviewing the Installer document.  It was deemed important to do this change to avoid impact to existing customers who are already using MISCONT to register a single Close State hook.  A similar GR1T was raised for the Start Of Day hook (i.e. 427020).



Summary:
SCPM: Move the Start Of Day functionality from the MISCONT hook to USERFUNS.SCR and add an Assigner to the authored flow

Description:
This change was decided on 26th March 2008 when reviewing the Installer document.  It was deemed important to do this change to avoid impact to existing customers who are already using MISCONT to register a single Start Of Day hook.



Summary:
Disable recording/checking of DetailedStatus when in Supervisor mode

Description:
To avoid the possibility of status reporting (and journalling U0058/59) during Supervisor mode, we should switch off recording of the DetailedStatus when in Supervisor mode.



Summary:
IP TAR - Dev guide clarification re local customisation in dev environement

Description:
See TAR 399412 for details; but note that point 4
SCXLOC and any referenced files, and the LOCAL file, must be in the
C:\SSDS\DLL folder on a development system as well as on the SST
mamy be out of date as the file directories have been changed for 3.04.




Summary:
TCPIPSupvTasks: ComVisible property was set to lTCPIPSupvTaskWrapper project level, only exported interface should be visible to COM

Description:
ComVisible property was set to lTCPIPSupvTaskWrapper project level, only exported interface should be visible to COM				



Summary:
TCPIPSupvTasks: All TCPIP Supervisor tasks are journling data like entry/exit, it should not journal all supervisor tasks

Description:
All TCPIP Supervisor tasks are journling data like entry/exit, it should not journal all supervisor tasks



Summary:
TCPIPSupvTask: Print Firewall option is not printing data on reciept/journal

Description:
TCPIPSupvTask: Print Firewall option is not printing data on reciept/journal



Summary:
TCPIPSupvTasks: cSSLConfiguration class is not integrated into Container which results SSL tasks not working properly

Description:
cSSLConfiguration class is supposed to be used for SSL configuration tasks but network value tasks are being used for SSL,it results wrong tasks displayed during SSLconfiguration



Summary:
Functional Specification update required for the Close State definition to match NDC Msg I/F.

Description:
Reported by John Lyall:
I was looking at the Close state definition in the CIC FS and the NDC Msg I/F spec. We need to update the CIC FS to match the Msg I/F.
The specific change is that the information for extension 1 is not up to date. Table entry 5 in Exten 1 is used to reference the state number for Exten 2. That isn¿t mentioned in the CIC FS. I was looking at the CIC FS, and couldn¿t see how you get from the main table entry to the actual state number for exten 2.
Looking at our BNATest file, I don¿t think we¿ve ever used a close state with extension 2 defined.



Summary:
NDCRenderer - label names for dictionaries don't support overlay screens

Description:

New requirement to support cheque destination indication means that screen dictionaries now have to take into account the overlay screen numbering system.  This wasn't seen as a requirement before.



Summary:
SCPM Close State - does not operate correctly when cheques left in exit slot in previous operation

Description:
Close state, when started with cheques in exit slot, does not operate correctly.
This limitation is caused by device service that doesn't expose functions like Retract or Expel. 



Summary:
Up-to-date resrvd.def for example Exit

Description:
From the review of CEN XFS and NDC Exits white paper integration into the Developer's Guide, an up-to-date resrvd.def file should be included in the ExitSamples project



Summary:
IP Defect: Ref Man missing info etc. (from GL)

Description:
Raised on behalf of Colin Davis (Global Learning)
Page 10-17, fields i and j, Option Number and Option Code.  These 2 fields can be repeated the same as fields k and l can be.  For field k and l page 10-20 has a specific not saying that they can be repeated.  There is no such note anywhere saying that fields i and j can be repeated.




Summary:
SCPM Start of Day - SOD Recover has to be managed on application layer

Description:
Existing implementation assumes that Recovery in performed by device service whenever needed. It was decided to change this because application needs to control this behaviour.



Summary:
cheque depositing to bin1 when left in transport

Description:
For test 5.26.2.1
Steps to reproduce:

1.Insert cheque using wosa tool and the cheque is in transport.
2.Enter supervisor and exit.
3.On supervisor exit,the cheque is captured to bin1 instead of bin2.(a.zip)
 
Test no: 5.26.1 also has similar behaviour and is fail for the same above reason.( before powerup.zip) 



Summary:
Setting endorse data directly on a cheque item incorrectly copies the internal cheque objects rather than referencing the real objects

Description:
There are two ways to update the endorse details of a cheque using the Cheque Details Wrapper:

Option 1:  Using the cheque details wrapper to set the endorse data indirectly based on the cheque index:

chequeDetails.SetEndorseData("THIS WORKS",ChequeIndex); 

Option 2:  Set the endorse data directly on a cheque item received from the cheque details wrapper:

CChequeItem* copiedItem = chequeDetails.GetChequeItem(ChequeIndex);
copiedItem->set_endorsementData("THIS WILL NOT WORK"); 

Option 2 will never work.

Option 1 only allows you to update the endorse data for a cheque - none of the other properties will be updated (Cheque Amount etc.).

Impact: The DBS Exit sets the endorse data prior to the Handling State.  If Option 2 was used then when the Handling State is run the endorse data is not actually set on the real cheque objects, so the cheques are not endorsed (or at least not endorsed correctly).

Workaround:  DBS can use Option 1.

Estimated to be about 2 days re-work to get it working as it was originally intended.



Summary:
XML Class Configurator errors need to be raised as exceptions.  NDCState receives exceptions, catches them, but does not resolve them (hides problems)

Description:
Raising this GR1T on behalf of Jan.  Initially assigning to Stephen to verify the characterisation is correct.  Propose it is then assigned to Jacek to work on the solution.

The NDCState receives exceptions, catches them, but does not resolve them (hides problems).

Applica.. (XXXX)(2848) 24/03/2009 10:35:10.015 ######## Exception - NDCState.AIDevices - 
GetDevice - Constructor on type 'NCR.APTRA.NDC.PaymentProcessing.NDCImageMarkProcessor' not found.
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.015 FlowFinder - FindEntryPoint - Numbers of parameters: 0, return type: Void
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.140 ######## Exception - StateExecutionContext ¿ 
GetOptionValue - Requested value 'HardwareFailureScreen' was not found.
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.140 NDCState - ConfigureFlow - About setting flow property: 
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.140     Parameter - ErrorScreenTimer
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.156     Parameter - autoCasting
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.156     Parameter - NULL
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.156 ######## Exception - StateExecutionContext - 
GetOptionValue - Requested value 'CashInRetract' was not found.
Applica.. (XXXX)(2848) 24/03/2009 10:35:10.171 NDCState - ConfigureFlow - About setting flow property:

Applica.. (MAIN)(2848) 09/06/2009 14:52:17.873 InitialiseConfiguration - InitialiseConfiguration - class configurator init start
Applica.. (MAIN)(2848) 09/06/2009 14:52:21.388 ######## Exception - NDCDataSource - 
GetFieldValue - Requested value 'Option83' was not found.
APTRAUS.. (XXXX)(3088) 09/06/2009 14:52:21.489 APTRAUSERCDI service : WARNING, Request for UNKNOWN store, name is Option83  
Applica.. (MAIN)(2848) 09/06/2009 14:52:23.712 InitialiseConfiguration - InitialiseConfiguration - class configurator init done
Applica.. (MAIN)(2848) 09/06/2009 14:52:23.722 DEVICE INITIALISATION




Summary:
ImageMarkRecorder is not being run, due to incorrect configuration in Class Configurator

Description:
The issue is in the contents of the serviceFactory.xml file.
Where it says:
<Argument Name="externalRecorder" Value="DepositRecorder"/>
needs to change to
<Argument Name="aRecorder" Value="DepositRecorder"/>

This is a result of a code review comment where a reviewer commented on the NDCImageMarkProcessor that its constructor parameter name should not be externalRecorder as every parameter is some external value.



Summary:
PA-DSS: ImagePath registry key should place images in directory other than C:\Program Files\NCR APTRA\Advance NDC\Data

Description:
ImagePath registry key should place images in directory other than C:\Program Files\NCR APTRA\Advance NDC\Data as the Cheque directory should be encrypted for PCI DSS.  

Encrypting the Data directory would also encrypt CUSTOM.DAT / pmdata files etc, which is not required



Summary:
When journal is out of paper info is stored using hardcopy backup.  When paper is replaced ATM is out of service until print on journal is completed from backup - this can take consdierable time e.g. 2hrs.  This is effecting ATM availability.  Wincor

Description:
ATM Availability/ competitive gap




Summary:
Application hang when we press cancel on I06 supervisor screen

Description:
Build:ANDC 93.04.00.03

Scenario:
Start the Applications
Go to supervisor
enter 5 to go in configure menu.
Enter 6 to enter the message mode.
Enter 10000004 ( you can enter any thing, just giving an example here)
There is a screen shown with updated message mode.
press cancel on the GOP/EOP. Application hangs here and we cann't perform any task from here.




Summary:
Opteva DBD_DMJournalPtr reports as not configured.

Description:
ANDC looks at WFS_INF_PTR_CAPABILITIES->fwWriteForm=WFS_PTR_WRITETEXT for basic paper journal.
DBD_DMJournalPtr reports Zero for fwWriteForm as printer only supports raw data.
CEN Spec is not clear. 



Summary:
If the ready 9 in response to a transaction reply is blocked by a VC the system hangs.

Description:
If the ready 9 in response to a transaction reply is blocked by a VC the system hangs. See attached logs.

This is required  for EMV Exits 02.02.00.

Created Related Gr1T 426370 on ANDC 3.03.02



Summary:
If the ready 9 in response to a transaction reply is blocked by a VC the system hangs.

Description:
If the ready 9 in response to a transaction reply is blocked by a VC the system hangs. See attached logs.

This is required  for EMV Exits 02.02.00

Created related Gr1t 426371 against ANDC 3.04



Summary:
Wincor - When the shutter is jammed, Clear cash fails

Description:
When there is a hardware error (say shutter jam) and tried to clear the counts on a wincor machine, it displays spaces after clearing (because Notes Dispensed + Notes Purged + Notes Remaining > Notes Initial). This is because, Set Cash Unit Info command on Wincor is failed with which the SP counts are not cleared.




Summary:
EPP 3 digit M-status handling

Description:
EPP 3 digit M-status handling - AANDC reads the mstatus as 2 digits and converts to hex and send as part of mData.  Here AANDC should have read the 3 Digits Mstatus and convert to hex and send with Mdata. We have found this as part of our investigation and planning to have a GRIT for this on the product and include in next release.




Summary:
Support the 2nd Extension State to the Transaction request state

Description:
Add support to AANDC for the 2nd extension state to the transaction request state as defined in Revision K of the NDC message interface specification [445-0705907] .  This is required to support two new EMV Exits features being added in the 02.02.00 EMV Exits project.

All that should be required is an update to the standard AANDC STCONT file.





Summary:
Keyboard timeout processing causes exception on timeout

Description:
The NDCKeyboard used by the NDCKeyboardService generates an event to indicate that the keyboard handling has been completed successfuly - this is being passed to the service as a key press event and as a result the service is in the middle of generating the event whilst the event handlers are being removed - so an exception occurs.



Summary:
SCPM: Tamper indication reporting on journal

Description:
To listen for events from Active XFS.  Note that this is needed for Offline and Host controlled solutions.
This requirement does not include TI reporting in VDM.



Summary:
SCPM: Tamper indication reporting to Host

Description:
To listen for events from Active XFS.
This requirement does not include TI reporting in VDM.



Summary:
Enable beeping via the Class Configurator & support message mode configuration changes

Description:
Beep support is required in the Accept, Handling and Close flows.



Summary:
SCXLOCAL and LOCAL files should be picked up from the path rather than a hard-coded location

Description:
These files are created by the customer - this RFC is to help those customers who have process in to place these copy these files into C:\SSDS\DLL (which was the pathe required in ANDC 3.3)

To allow these files still to be found in ANDC 3.04, the path will need to be searched for them - note that C:\SSDS\DLL still appears in the 3.04 path albeit after the new 3.04 ANDC path for this very reason



Summary:
Application is Hanging and not coming in service when Receipt printer is disconnected while Promote is running in SST.

Description:
Application is Hanging after selecting the Amount entry while Machine is running with AANDC93.04.00.02 with Promote SST RTL 3.0 , when Receipt printer is disconnected.
Scinario: Start Apps->send the required downloads->enter card->select FastCash->select any amount->Application Hang is seen.
Apllication is not responding i mean after sending the dowloads or may be before sending the download only when AANDC93.04.00.02 with Promote SST RTL 3.1 is running in machine, when Receipt printer is Disconnected.
Scinario:Start Apps->here also Apps will not respond will not seen 002 screen.
Scinario:Start Apps->002 screen is seen->send the downlaod->Receive ready9 for all downloads but Apps wil not respond and will not come In-service.
Added APPSIGHT Log in below location for both the Issues. 
\\wgbaandcinteg2\GRITLOGS\Issues\ANDC 03.04.00\IT2



Summary:
Pop up window's with error messages are Reporting when Apps is started when promote is installed.

Description:
Two pop up error messages are reporting on Browserclient screen when AANDC Application (AANDC93.04.00.02) is started. Promote SSTRTL 3.0 version is installed in Machine, this is happening with PRomote SSTRTL 3.1 version also.

Attached the the ZIP file with Snapshots of two error messages.



Summary:
Voice Guidance - Delay between words when seperate speech elements in TRply

Description:
There is an issue reported in from the US where the Voice Guidance functionality included in 03.03.00  is not working in the same manner as previously customised by US PS for 03.02.01.
              Basically when the same Transaction Reply messages that are/were used with NDC+ are used with AA-NDC 03.03.00 which have separate audio elements then there is a delay between each audio element being converted to speech. In the example quoted for Transaction Reply  "4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]00>"THIS","TESTS","THE","VOICING","OF","DATA"[Unicode-x1D]3NDC DEMO NEXT STATE AND PRINT TEST[Unicode-x1D]>152" results in the text being heard with a delay between each word:



Summary:
Voice Guidence does not active if the card reader is fatal or not connected.

Description:
If a card reader is fatal or not connected (and cardless transactions are enabled) Voice Guidence will not active in the card read states. From speaking to Jan and looking at the functional specification this is missing functionality and should be done. 

This applies to both the A and T state.



Summary:
New SMS Keyboard system is needed in Supervisor to allow entry of Windows Username and Passwords

Description:
A new SMS Keyboard worker is required to allow Username and Password entry in Supervisor for authentication purposes.

Existing SMS Keyboard functionality isnt suitable, as its either tied to NDCCust or implemented using VBScript - which isnt suitable for secure authentication, as it may be easily compromised.



Summary:
TCPIP Supervisor Task updations for Inclusion in AADNC 03.04.00

Description:
Update TCPIP Supervisor Task including this on AANDC 03.04.00



Summary:
Reference Manul should provide detail on Cheque Accept State codeline validation

Description:
I cannot find in the reference man. info on when ANDC considers a cheque with an invalid codeline.

==
NDC Message spec has this (Cheque Accept State):
Note 5: On entry to the Cheque Processor, the front of the cheque will be scanned, and an attempt will be made to read the MICR.  If the minimum number of characters from the Codeline is read successfully (see ref. 3) and no Reject characters are detected then the cheque is deemed to be correctly orientated. 

==
Original RFC (3.2)
RFC: Modify the MICR Code line data validation done by NDC to include checking if the data returned has mis-read characters, and if so, to use this to workout if the cheque is the correct orientation.
Currently (reported on AANDC 2.02) some cheques, when inserted with the MICR on the left rather than the right, are still reported by the CPM service with a code line.  APTRA Advance NDC just checks the length and if greater than 3 accepts the code line data as valid even if mis-read characters (!) are present in the code line data.  
(This means cheques must be re-processed manually at some point afterwards?)

Note - Code is correct - it check for number of codeline chars (4 or more is required and not reading errors).




Summary:
EJ log is occupying two lines in supervisor display when it has invalid Date of formate( lengthy date formate). 

Description:
The initial value of date format in registry is lets assume 'ddmmyyyy' and the logs are created successfully for Init EJ. So RCOPY displays only EJ file name without date of creation. Then the user accidently makes a mistake in registry entry EJFileDateFormat lets say  as  'ddmmyyyyy' which is invalid. So when the user try to display files using RCOPY, RCOPY checks for the current date format in registry and it finds invalid. So it tries to display files with date. Since the length of EJ file name EJMMMMMMddmmyyyy.xxx  and date of creation is more than that can be aligned in a single line, it occupies the next line too. The RCOPY display can display  a maximum of 10 files and the space to align 10 th file name is already occupied by other file names. So the display consists of latest 9 file names eventhough 10 files are populated to display for RCOPY display function. So in this case if the user enters 10, which is valid eventhough not displayed,  will be copied to flex disk.

Added APPSIGHT log in below location \\wgbaandcinteg2\GRITLOGS\Issues\ANDC 03.04.00\IT2



Summary:
Double Beep in Bunch Cheque States when pressing keys

Description:
Double beep heard when FDKs and keys on pin pad selected.



Summary:
Cheque Index set during a Cheque Detail Display State doesn't seem to be Initialised between cheque deposit transactions.

Description:
In Cheque Detail Display in Mode 1, the cheque index is updated as the user navigates through the cheques.  Returning to Cheque Summary state correctly displays the last cheque displayed in the Cheque Detail Display state in position [1] of the summary screen.

When this cheque deposit transaction is complete, initiating another bunch cheque deposit results in the display of the cheques entered for the latest transaction (eg in the Cheque Summary Display state) using the cheque index from the previous transaction.




Summary:
Bunch Cheque Accept State - Rejected cheque reasons functionality missing

Description:

There is no rejected reason display handling in the state - looks like it has been missed!?!



Summary:
TAR 398416 - Extended Encryption Key Change message with modifier of ?N? resets terminal

Description:
Euronet reported the following (understood to have been running AANDC
03.02.00 during lab testing) 

"Sent the ATM an ?Extended Encryption Key Change? message with modifier of
?N? to request a random ATM number. The effect was that the consumer screen 
on the ATM went blank, followed a few minutes later by Windows shutting
down, then Windows starting again. I was able to repeat this process a 2nd
time." 


Subsequently recreated in Lab 1 on AANDC 03.03.00 

In accompanying log files one event is: 

NDCHost - Fri Feb 20 12:35:44 Sent : [3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4N] 

UEH - FAULT ->02c35d9c 




Summary:
Supervisor Guide chaps 4 & 5 inconsistencies & errors in information (from GL)

Description:
Raised on behalf of Colin Davis (Global Learning)

A couple of minor points with the Supervisors Guide:
Page 4-36, ¿Level 0 Cardholder transaction data. This journal level is compatible with NDC+¿
            As we no longer provide the NDC+ manuals this doesn¿t actually tell us anything.

Page 4-37, ¿PRESENTER ERROR *2005*1*E*500000000,M-00,R-11110¿
Page 7-5, Presenter Error Message, this says that the only thing printed is the string ¿PRESENTER ERROR¿, but looking at the example on page 4-47, it prints 2 lines, the fixed string ¿PRESENTER ERROR¿ and on the line below, some status information.

Also in chapter 5 (p.25)
The quote marks in the lines of code should not be there. For example, ¿(SO) `4 FIRST FINANCIAL¿ (LF)¿ would cause an error because the single quote are invalid in this line of code.  The same applies to every other single quote mark on the page.

 

Line ¿`DATE¿ (SO) `10 TIME¿ (SO) `6 MACHINE¿ (LF)¿ the 10 is not valid here.  The code ¿(SO)x¿ inserts x number of spaces. I presume the manual is trying to insert 10 spaces, in which case the code should be ¿(SO):¿ (see page 5-6 for the explanation about SO). So actually ¿(SO)10¿ inserts 1 space and then prints 0 to the printer.

 

Finally, half way through the R01 data, there is a new table header, labelling the table as a new table 5-57, but it is in fact a continuation of table 5-26. I presume that at some point the manual had a page break here so a new table header was inserted.  Now that the whole thing fits onto one page it should not be listed as a separate table.

 








Summary:
When Date formate of EJ log is changed , creating new EJ log with out deleting oldest log and excceding maximum no of EJ back up also.

Description:
scenario 1:Max no of backups in EJ Option is set as 10, when date format is unique if 11th one is created then oldest one is erased this is already expected behaviour and happening but after creating 10 logs if I changed the date format 11th log is created and rest of the logs will remain same none of the log is erased. 

Scenario 2:I have created 9 files with type1 date format and changed the date format to Type2 and created 9 more When I created another log with Type2 the oldest one with type2 got erased, here I have changed the date format to type1 and created new log now the oldest log with type1 got erased.

Added APPSIGHT log in below location \\wgbaandcinteg2\GRITLOGS\Issues\ANDC 03.04.00\IT2




Summary:
SCPM & CPM: For PCI compliance, mask the codeline when the cheque is displayed

Description:
Info from Colin Herkes...
"Regarding the displaying of PAN on a cheque, being part of the codeline on a cheque... Clarification/confirmation is:  Requirement 2.2 states that the PAN should be masked where it is displayed.  Also be aware that requirement 2.3 states that the storage of this data must render the PAN unreadable."

Scoping info from StephenG (still to be reviewed)...
"NDCCUST update required to pre-process the cheque image during display.
Requires some image processing based on 'ESC P S' sequence before display.
Area blanked should be configurable(?) - implies we can switch it off??

To remove/mask bottom of image before display ~2 days - should be a simple LeadTools call.  I found the online help for a newer version:
http://www.leadtools.com/Help/LEADTOOLS/v15/Main/API/default.htm
But it needs somebody who knows what they are doing to make the required update to the code (Phil?)."



Summary:
SCPM: Change the Summary Display State to support the display of only up to 9 cheque details

Description:
Refer to NDC Message Spec, 445-0705907 RevK.

Also note that when selecting to display the details of a cheque, the Enter key does not need to be pressed and the key pressed is not echoed.



Summary:
SCPM: Update the Detail Display state, Summary Display state and NDCRenderer to support visual indication to cardholders when a cheque is going to be Returned

Description:
Refer to the NDC Message Spec, 445-0705907 RevK.  The Detail Display state and Summary Display state definitions have been updated to be able to visually indicate to cardholders when a cheque is going to be Returned.  There is also a new Text Dictionary defined (i.e. Cheque Acceptance State Dynamic Text Dictionary Definition) and new Dynamic Data Display Control.

This is needed as a usability improvement.
- In the Cheque Detail Display State, a cardholder can select a cheque to be Returned, and it will be returned at the end of the transaction.
- In the Bunch Cheque Accept State, a cheque may be refused due to failing codeline validation.  In the case where the Bunch Cheque device does not have the capability to immediately return the refused cheque, then it will be returned at the end of the transaction.



Summary:
SCPM: Update all bunch cheque states to handle the situation where there may be no cheques inserted into the device.

Description:
Refer to the NDC Message Spec, 445-0705907 RevK.

- Accept state: Good Next State only taken when at least one cheque has been successfully accepted into the device. If all cheques have either been refused or rejected then the state does not exit and the device is re-enabled for media insertion.

- Handling state: If no media is present when this state is executed then the Good Operation Next State is taken immediately.

- Detail Display state: For Mode 1, if no cheques are available the Cheque Detail Screen is still displayed, but no individual cheque details are displayed.  For Modes 2 and 3, the Proceed Next State exit is taken.

- Summary Display state: This state can be used when no cheques are available for display.  In this case, only the Cheque Summary Screen is displayed.



Summary:
When resource is released after exiting from supervisor, ¿CONSUMER RESOURCE RELINQUISHED¿  is printed on journal when we send GIS from host.

Description:
AANDC: 93.04.00.02

Problem:
Test Number 5.5.4.4 from IT log.
Test Objecitve 4 from Log ConsumerResource Relinquish.doc

at step 17: when we send GIS from host, there should not be   ¿CONSUMER RESOURCE RELINQUISHED¿  printed on journal, but its getting printed.

There are 3 more scenarios in which CONSUMER RESOURCE RELINQUISHED is printed where it shoud not.these 3 scenarions are performed with SM Primitives,

Scenario1:
1. Start the APPS and Load LD5085NT. Machine comes to inservice
2. Send OOS
3. from command line enter, Sstmanage.exe /LC test 10000
4. from command line enter, Sstmanage.exe /RC Test
5. Send GIS, Machine comes in service.
there should not be any CONSUMER RESOURCE RELINQUISHED printed on JP, but its getting Printed.

Scenario2:
1. Start the APPS and Load LD5085NT. Machine comes to inservice
2. Go to supervisor
3. from command line enter, Sstmanage.exe /LC test 10000
4. from command line enter, Sstmanage.exe /RC Test
5. Exit from Supervisor. Machine comes in service.
there should not be any CONSUMER RESOURCE RELINQUISHED printed on JP, but its getting Printed.

Scenario 3:
Enter a card to initiate a transaction.
At the command prompt enter:
Sstmanage.exe /LC test 10000
Wait for 10 seconds before pressing cancel to end the transaction and retrieve the card.
there should not be any CONSUMER RESOURCE RELINQUISHED printed on JP, but its getting Printed.




Summary:
For EMV 02.02.00 8 new extended trace reserved screens should be added to the AANDC resrvd.def file.

Description:
I have booked out 8 new reserved screens in the ndc.reg file required for EMV 02.02.00 but now need get them included in the 3.04 version of the reservd.def file.

Details are below

 U0080 "CHIP NOT ATTEMPTED"
 Traced when no attempt has been made to stage and power-on the chip in the ICC Begin ICC Initialisation state.
 
U0081 "ATR RECEIVED T=*"
  Traced when a valid ATR has been received from the chip. The first ¿*¿ in the screen will be replaced with either a `0¿ or `1¿ based on the protocol defined in the ATR.


 U0082 "CANDIDATE LIST *APPS"
Traced once the candidate list has been successfully built. The first ¿*¿ in the screen will be replaced with the number of usable applications in the candidate list.
 
 U0083 "APPLICATION SELECTED"
 Traced prior to the issuance of the FINAL SELECT command. The AID value of the application about to be selected will be trace on the following journal line.
 
 U0084 "GENAC 1 : *"
 Traced on successful completion of the 1st Generate Application Cryptogram command.  The first `*¿ in the screen will be replaced with either ¿AAC¿ or ¿ARQC¿ based on the Cryptogram returned by the command.

 U0085 "APP NOT USABLE"
 Traced when an application which was selected has been found not to useable.
 
 U0086 "PROCESSING * SCRIPT"
 Traced prior to the start of processing the Issuer Scripts. The first `*¿ will be replaced with either 71 or 72 depending on the script type. Only if a script is received of that type will the tracing be performed
 
 U0087 "GENAC 2 : *"
 Traced on successful completion of the 2nd Generate Application Cryptogram command.  The first `*¿ in the screen will be replaced with either ¿AAC¿ or ¿TC¿ based on the Cryptogram returned by the command.



Summary:
Add support for the Timeout state to the bunch cheque states

Description:
If Timeout occurs in the bunch cheque states, the state flow will not go to the Timeout State.  There will be no prompt to give the customer more time.



Summary:
Handling of local and enhanced configuration option changes at runtime

Description:
Need to define how we will handle configuration changes at runtime.

For example, scan cheque after endorse should be configured based on ECP option 83.  Note that the pre-release for DBS has ScanAfterEndorse always configured and it creates new images (i.e. it will not replace the original images taken during the cheque accept).



Summary:
Handling of registry configuration at Start Of Day

Description:
The SCPM driver should store cheque images based on the 'ImagePath' registry key (at HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\CPM) - currently this key is ignored and images are stored at C:\SSDS\BIN\TempChequeImages (this is not the correct path).

ImageMark XML and BMP files should be stored in an (upload) directory based on the 'Path' registry key (at HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\CPM) - currently this key is ignored and files are stored at C:\Program Files\NCR APTRA\Passport (this is the correct path).



Summary:
Close state screen processing - not all screen parameters handled correctly

Description:
Results in timeout screen and 'C20' being displayed during close operations.  If 'C20' is defined, then contents of C20 screen will be displayed correctly.
This problem was found by Stephen - raising the GR1T on his behalf.  Seems to be related to G423054.



Summary:
Bunch Cheque Accept State - Refused reasons dictionary not displayed

Description:
Renderer label names and state label names do not match so refused reasons are not displayed when items are refused



Summary:
IPs: Information missing about usage of CDI array stores to retrieve ECB6 Cat 2 and 3 counters.

Description:
Please see attached e-mail for a Q&A on this matter with UK PS.



Summary:
BunchChequeHandling state endorses with the screen number instead of screen contents

Description:
This problem was found during Component IT.
Later Richard mentioned the NDC State will need to retrieve the screen.
Need the NDC message spec to clarify how to avoid setting the endorse data in the Handling state and instead use the data set by a PS Customisation - in the case of the DBS solution.



Summary:
ImageMark - Bunch Cheque Handling exports ImageMark file irrespective of the registry value that is used to configure it

Description:
Not clear which component should fix it - e-mail attached.



Summary:
Integrate path update change within CashInCommonImplementation.wsc into main CI Component

Description:
As part of GRIT 419611 all default SSDS paths have been updated to c:\program files\ncr aptra\Advance NDC

One occurrance is within CashInCommonImplementation.wsc - just needs integrated into the main CIC. File revision containing change is 1.11.1.2 (from CP 419611:2)



Summary:
Journal Service updates doesnt use JOURNAL_FORMS key to check if forms or raw data printing is used.

Description:
Print The Data always prints using raw data.  No forms printing is performed, even if forms printing is configured



Summary:
Access Violation occurs in ApplicationCore at start of day in due to error in SSDSJrnlSrv.dll

Description:
Access Violation occurring in XFSSTREAM.dll due to error in SSDSJrnlSrv.dll

PrintTheData is not checking for NULL before sending the ExecuteAsync Print command, causing the XFSSTREAM to access violate

EventID 647995 in Appsight Log




Summary:
Express Recovery - 24v Reset for cheque processing

Description:
24V Reset needs to be carried out for both SCPM/CPM in AANDC in 3.04 timeframe. This requirement has already been discussed with Craig



Summary:
Require journal printer status to provide status for both EJ and physical jrnl.  

Description:
IP TAR 394602
Product provides this capability.    Document update re Option Digit 12 to highlight that if the paper is NOT out and the journal printer is fatal this option digit will report a warning
See TAR for details



Summary:
Additional Details required in Dev Guide for Table 5-8 to assist in usage.  

Description:
IP TAR
Provide extended
information on usage of Registry entries related to passbook.
See TAR 395593 for details



Summary:
Requirement to only test with XP SP3(previously accepted to test with XFS 05.00.01)

Description:
Test with XP SP3 Only



Summary:
Key Entry Failed in D450 - ix version with EPP4 (VISA)

Description:
While entering keys in supervisor, key entry failed on D450 - ix version. The EPP is of type EPP4 with VISA complaint.

Resolution is not use WFS_PIN_USESVENCKEY for diebold.



Summary:
NDCPDCollection: Some traces are not passed to the StdSupplyPoint.

Description:
 I've realized some traces cannot be  found when using the Problem Determination tool. 
As an example:
- EventArrived with an array of parameters is traced to PD collection.
- EventFired without parameters is not traced.
It seems that some traces are passed to the base class StdSupplyPoint while others are not.



Summary:
Bunch Cheque Summary State - When more than 'Max Items' cheques are entered the Cheque Summary State displays a 'Phantom' cheque

Description:

Cheque Accept State 'Max Items' configured to 5 
Enter 10 Cheques
5 returned, 
Cheque Summary State displays details for 6 Cheques...6th cheque details seems empty.

ScannedCheques seems to have an extra cheque that is also displayed in the detail state.



Summary:
Bunch Cheque Accept State - 'Escrow Full Error Screen' displayed when number of cheques entered is same as 'Max Items' 

Description:

I think the screen should be displayed only when there are more cheques than 'Max Items' and cheques are returned - seems a bit odd to display an error and not have to return any cheques to the customer, then move on as normal



Summary:
Bunch Cheque Close State - Cheques Retracted regardless of Cheque Retain/Return flag.

Description:
Flow parameter 'ProcessingMode' is looking at the wrong state table index and as a result is set to an invalid value.

Property should be :
[NDCFlowProperty(ParameterType.autoCasting, ParameterSource.Ext1StateTable, 3)]



Summary:
Remote Supervisor-Supervisor screen is not get focused when the Supervisor mode is entered using F11 key (remote supervisor) if TTU(EOP) device is present

Description:
Steps to reacreate
 1)Enable Remote Supervisor 
 2)Open Debug log and Start AANDC Apps 
 3)Press F11 when mode is NORMAL
 4)Mode changes to Supervisor but the NDC screen remains on the top (see debug log whether it is entered into supervisor or NOT)




Summary:
SCPM: Integrate ImageMarkRecorder into ANDC BunchChequeHandlingState for cheque deposit recording - Linkage with payment system solutions (Passport)

Description:
Support for image based cheque clearing systems - Linkage with payment system solutions (Passport) for SCPM



Summary:
SCPM: Integrate ImageMarkRecorder into ANDC Supervisor for clear bin event - Linkage with payment system solutions (Passport)

Description:
Support for image based cheque clearing systems - Linkage with payment system solutions (Passport) for SCPM



Summary:
CCMPCCM should have the capability to correct out of sequence responses

Description:
If message received in between send and sendcompleted, it should wait until, sendcompleted is received.



Summary:
Display Manager Secure Installation - Pop-up windows appear when Advance NDC is first started using the SSTAuto1 user

Description:
Original Issue 413301 stays on Phil to fix for VG etc.  Related GRIT raise (this one) for DM.
COM objects related with Voice Guidance and Display Manager not registered properly for SSTAuto1 user
Issue reported by Jiri.
Advance NDC fails to start because the COM components are not registered (pop-up error windows appear). The installer should manage to do i without running the registration batch files. The regit.bat and RegisterAll.bat files provide workarounds. RegisterAll.bat needs to be modified to run silently.



Summary:
¿CONSUMER RESOURCE RELINQUISHED¿  is printed on journal on when we exit from settlement mode

Description:
Build:
AANDC 93.04.00.01

1. Start the Applications, load APPC and angelld AND send LD5085NT. Send C09
2. Go to supervisor, go to 4 - replenish menu and select 15 - Supervisor transactions. Exit from supervisor.
3. Func menu is shown, press cancel

its observed the "¿CONSUMER RESOURCE RELINQUISHED¿ " is printed on journal which is not required.



Summary:
NDC renderer - needs to be able to create the NDC window if it is not already there.

Description:
NDC renderer will hang without the NDC window. Currently there is a workaround using NCR.APTRA.NDC.TestEnv.Renderer in the
flows unit test. This is not ideal due to the dependencies and there are issues with keyboard handling.




Summary:
The Display Manger User Guide example has "AmountBox.value = Mid(data,6,Len(data-6))" This is incorrect.

Description:
AmountBox.value = Mid(data,6,Len(data-6))
Should be
AmountBox.value = Mid(data,6,Len(data)-6)




Summary:
Display manager has hard coded path for Promote Display Hook  - should use Environment Variable ANDC_PATH

Description:
RFC 419611 on the AANDC Product requires us to change the DM installer to install everything to Program Files rather than SSDS\DLL

However - The DM code assumes that the Promote Display hook is under SSDS\DLL - should use env var ANDC_PATH



Summary:
RemoteSupervisor: Application is hanging when RemoteSupervisor is accessed and ENTER (xp kyeboard) key is pressed with MAST opton already enabled.

Description:
1)Enable MAST
2)Enter into Supervisor using F11 option (remote supervisor)
3)enter any of Main menu option and press ENTER (xp keyboard) key . It causes Application to hang there itself.



Summary:
RemoteSupervisor: Application is hanging when RemoteSupervisor is accessed and ENTER (xp kyeboard) key is pressed with MAST opton already enabled.

Description:
1)Enable MAST
2)Enter into Supervisor using F11 option (remote supervisor)
3)entry any of Main menu option and press ENTER (xp keyboard) key . It causes Application to hang there itself.



Summary:
PA-DSS requires secure authentication for supervisor functions which may allow access to card holder data

Description:
PA-DSS requires secure authentication for supervisor functions which may allow access to card holder data.

Add secure authentication to Supervisor, based on Windows authentication, and protect functions which allow access to cardholder data.

Configure Menu
	TCP/IP Configuration
	VISA2 Configuration (Dialup)
Access Menu
	Set Password
	Enter MAC
	Key Entry

The Set Password menu should be modified to allow the user to change the Windows based password.




Summary:
Incorrect default locations for coded updates for Installer DLL relocation GRIT 419611

Description:
During the development, the location for DLLs and APPs changed to the Advance NDC directory - the installer was updated but the header file for the code was not.

Additionally the Config directory for the exit files etc is incorrect in the code and needs updated...



Summary:
Release number showing as 030300 in response to terminal command Send Software ID and Release Number 1fsfsfs75 and also printed at SOD

Description:
Build:
AANDC 93.04.00.01

Scenario:
Start the AANDC Applications and Send OOS
Send the terminal command Send Software ID and Release Number 1fsfsfs75 , which returns 030300 instead of 030400

When we start the Applications, POwerup message is printed on journal with Software version number, here also its priting as Advance NDC 03.03.00 on the journal printer. This should be printed as Advance NDC 03.04.00

Additionally - ANDC 03.03.00 is getting printed at start of day after Power Up Reset message



Summary:
Voice Guidance - Delay between words when seperate speech elements in TRply

Description:
There is an issue reported in from the US where the Voice Guidance functionality included in 03.03.00  is not working in the same manner as previously customised by US PS for 03.02.01.
              Basically when the same Transaction Reply messages that are/were used with NDC+ are used with AA-NDC 03.03.00 which have separate audio elements then there is a delay between each audio element being converted to speech. In the example quoted for Transaction Reply  "4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]00>"THIS","TESTS","THE","VOICING","OF","DATA"[Unicode-x1D]3NDC DEMO NEXT STATE AND PRINT TEST[Unicode-x1D]>152" results in the text being heard with a delay between each word:



Summary:
Bunch Cheque Accept State - Please Wait For Device Screen '000' results in 'More Time' screen being displayed.

Description:
The FS indicates 'This screen is displayed while NDC is waiting for the device to be ready to accept cheques. Set this field to `000¿ if the screen is not to be changed while waiting for the device.'

Setting this field to '000' causes the 'Please Wait Screen' (000) to be displayed.

I suspect there are other issues with screen parameters - the other flows check that a screen value 'IsNullOrEmpty' to switch their behavior - the screen should never be null (or empty), and so probably needs to be checked against '000'



Summary:
DisplayManager: Display ManageR to support parameter based URL

Description:
Currently DM supports only static URLs mapped XML or screens. There should be a way to specify parameters appended to URL dyanmically. 



Summary:
User Guide : DM APIs should not be used from WebExit

Description:
IP TAR 394621: Display Manager User Guide should explain that DM APIs are not to be used from web exits. See TAR for details



Summary:
AA-NDC Ref Man : Byte 15 of Hardware Configuration Data - Sub-Field g4 wrong

Description:
IP TAR 393014
Info in Chapter 9, Hardware Configuration Data, Sub-Field g4
is incorrect. See TAR for details



Summary:
AA-NDC : blinking and transparent background not working together

Description:
IP TAR 394293: Reference must document that blinking text on transparent b/g not supported. See TAR for details.



Summary:
IP TAR A number of specific command reject codes are missing from the AA-NDC

Description:
A08 non-conforming; A05-A09 missing from chap 9 or 10 See TAR 394522 for details



Summary:
IP TAR - 1///76 does not return Barcode Reader in Sub-Field g4

Description:
Reference Manual does not explain that barcode data is not sent in H/W config status message. See TAR 394697 for details



Summary:
Clear key ALWAYS active when keyboard service enabled

Description:

The wrong logic for selecting clear and backspace always results in the clear key being active regardless of the keyboard definition used.



Summary:
Keyboard processing doesn't terminate immediately when input is cancelled

Description:
The mXFSKeyboardService class does not indicate back to the client that the keyboard operation has been cancelled, instead the operation times out out after the initial time set for the 'GetKey' event.

The service should immediatly indicate the keyboard entry operation has has been cancelled



Summary:
When the ConsumerResource is requested in the middle of transaction, after completion of that transaction CardReader is getting enabled for a second before releasing ConsumerResource.

Description:
When the ConsumerResource is requested in the middle of transaction, Transaction gets complete first  then SST comes to InService by enabling CardReader and then immediately CosumerResource will be  released . As CardReader is enabled for a second, there may be a chance to enter the card.



Summary:
TAR RFC 388273 - GBNA activity not sync'd well with screen displays. 2 sc delay in a call to LastCashinStatus. 

Description:
One of the issues reported in RFC 311025 has not been resolved. On GBNA when notes are inserted, and invalid notes are returned, the notes are presented for approximately 3 seconds before the 'Please Remove Notes screen is displayed." 
There does not seem to have been any improvement made in this RFC for returning notes. 
At the device level, the invalid notes are returned at 16:36:36 
24/09/2008 16:36:36.808 EVENTNOTICE : 0 0 - - ITEMSPRESENTED : 197 
The Debug log shows this is being processed by the app 3 seconds later : 
16:36:39.417 GBNA Event, NOTES PRESENTED 
This is easily recreated on GBNA, on BNA there is no issue. 
It was found by analysing PD traces that just after the invalid note is returned the application sends LastCashInStatus. The GBNA SP needs to queue this command until CashIn completes (when the note is presented). This queueing then prevents AXFS processing and posting the presented event until it has finished Cashin and LastCashInStatus command. 
From discussions with other Engineering teams this is the expected behaviour on GBNA. The GBNA SP cannot process CashIn and CashInStatus at the same time as both require device access (CIM SP does not have this limitation). AXFS would need a design change to be able to post events immediately. In this scenario, the main AXFS thread is blocked waiting for the synchronous call to WFS_INF_CIM_CASH_IN_STATUS (called from LastCashInStatus property) to return from the SP, and therefore can't process the SPs event. 
In short, AANDC should not send LastCashInStatus during a cashin operation. 



Summary:
IP: document that ECB6 counters are not journalled during Encash unless Option 44 is set

Description:
This should only be an issue in cases where notes have been re-classified as a different ECB6 category during 2nd BV pass (GBxx only), and when Option 44 is not set. Otherwise the counts will be shown during the initial insertion; if Option 44 is set then journalling will be done at the same time the Cat 4 Vaulted counts are shown.



Summary:
PCI - Add an extra field to the BNA ECB6 unsol to contain 'customer' data following the rules defined for the card capture unsol

Description:
Add an extra field to the BNA ECB6 unsol to contain track data to identify a customer depositing ECB 6 LEvel 2/ Level 3 notes.
The aim of this RFC is to enable information to be sent (stored) at Host as soon as customer enters cash, so that the PAN data stored in ECB6 database can be masked. If there's the need to track the notes to a specific customer it can be done with the aid of the data stored by the host.
This needs to be supported by a change in the NDC specs (see child GR1T). 
This is related to PCI DSS compliance.




Summary:
Cancel FDK should not be active during Confirmation screen

Description:
Cancel FDK should not be active in Confirmation screen.
It is Removed from FDK Mask for the confirmation screen that allows "Add More" and Confirmation screen that does not allow "Add More" option
 




Summary:
Some state entry CDIs are converted to Hex within BNA extension state 3 when they should not be.

Description:
In BNA extension state 3, all CDIs representing the state entries are converted to Hex. State Entries 7, 8 and 9 should not be converted to Hex.

See code in cdudata.cpp (line 2457):
				if (pExState->Type() == 'Z')
				{
					pExState->PrimaryStateType = type;//GR1T 355878 - If Extension State set the base state type			
					if( (type == '>') && (position == 3 )) // Grit206555 RSR 14/3/2000
					{
						// BNA - This is the Cash Accept 3rd Extension State that has
						// hexadecimal values so set second argument to UpdateCdi to true
						pExState->UpdateCdi(position, true);
					}
					else
					{
						pExState->UpdateCdi(position);
					}




Summary:
TAR 384855 Silent Debug rollover is losing data

Description:
With Silent Debug started and configured to generate daily log files, it has been seen that when the file cuts over after midnight, data is being written to and then lost from the new file.




Summary:
Test AANDC with XFS 05.00.01

Description:
Test only




Summary:
ANDC 3.3 Issues with the quality of receipt characters (forms-based printing)

Description:
AANDC uses NDC AlphaNumeric X font to print the data on receipts using forms.  There is an observations  that the quality of receipt print is not as good as RAW Data receipt print.



Summary:
TAR 395230 - ]0 printed on the receipt when exiting Diagnostics

Description:
When exiting from Diagnostics, ]0 is printed onto the receipt. (Non-USB
printers only). The characters ]0 are printed on the receipt (Close square
bracket + zero) on every exit from Diagnostics. 

Easily recreatable : 
- Switch into Supervisor mode 
- Select 7 Diagnostics 
- Exit from Diagnostics 
- just prior to the Supervisor Select menu appearing on the EOP the ]0 is
printed on the receipt 

]0 is printed on the receipt whenever exit from Diagnostics is chosen. This 
impacts the next receipt to be printed. 




Summary:
SCPM project to take ownership of creating a new MSI installer to include the .NET assemblies (.NET components and dependencies)

Description:
Not required for DBS.
The installer will include support for SCPM and TCP/IP Comms.



Summary:
SCPM: Support for printing multiple cheque images in a transaction receipt, in native NDC bunch cheque deposit sol

Description:
Not required for DBS.



Summary:
DisplayManager: DM should load promote's ndcdisplayhook.dll once and use same handle every time to call methods

Description:
DM loads promote's ndcdisplayhook.dll every time ndcdisplayscreen hook method is called and unloads at the end of method, instead it should load once and use every time.



Summary:
Developer's Guide has various errors

Description:
raised on behalf of Global Learning (ian Davidson). B66046.pdf has various errors that require fixing.

See attachment



Summary:
Implement a supervisor option to provide a reconciliation list.

Description:
The reconciliation report includes Individual Denomination counts and Summary Totals. Two supervisor options are used, while one option displays the report, the other prints it onto a configured printer device.

The format of the reconciliation report is given in the Attachments. As per the attachments, the deposit transaction record(that includes, note counts and error report) is not implemented in this RFC. It is considered as a seperate requirement.



Summary:
Beep is not coming for FDKS when  SMS mode is enabled of Information Entry state

Description:
Beep is not coming for FDKS when  SMS mode is enabled of Information Entry state



Summary:
ConsumerResource is not getting released in OOS, Supervisor and Offline modes

Description:
AANDC 03.03.00 is not releasing ConsumerResource properly. AANDC 03.02.00  is releasing ConsumerResource in OOS mode , Supervisor mode and in OffLine modes. But AANDC 03.03.00 is not releasing in those modes.  



Summary:
"New PC core 2GHz and 2.8GHz Being introduced (Q2 09)"

Description:
Test only




Summary:
"DVD-ROM is to be positioned as a replacement for floppy drives.  Need to make sure there are no app functions which are dependent on floppy drives "

Description:
"PD trace is saved to a floppy today
Potential issue raised by US for copying dialup config parameters"




Summary:
When journal is out of paper info is stored using hardcopy backup.  When paper is replaced ATM is out of service until print on journal is completed from backup - this can take consdierable time e.g. 2hrs.  This is effecting ATM availability.  Wincor

Description:
ATM Availability/ competitive gap




Summary:
Display a campaign in the close state only if the txn is successful. The campaign must not be displayed if the customer card has been captured or the txn was rejected  

Description:
Need to take device status into consideration.  



Summary:
Review processing of flowpoints during close state operation  - allow close state flowpoint to be configurable i.e.  either before card/receipt¿after Card but before receipt¿.after card and receipt etc.

Description:
Review processing of flowpoints during close state operation  - allow close state flowpoint to be configurable i.e.  either before card/receipt¿after Card but before receipt¿.after card and receipt etc.




Summary:
Review/redesign of approving flowpoints were multiple transaction requests/replies are issued to eliminate same Campaign being display too many times

Description:
All RFCs are raised as a result of offering targeted marketing during chained transactions.   Show the relate message only if the txn was successfully authorised.   



Summary:
Ej File Name is currently EJmmmmmm.nnn....needs to be configurable to be Ejmmmmmmddmmyyyy.nnn and EJ______.nnn as EJ.nnn

Description:
Needs to be configurable i.e. default is no ddmmyyyy as today but should be able to be switched on via reg key. Also need to be able to specify the date format in the reg key i.e. maybe yyyymmdd or mmddyy or ddmmyy etc.

Also in the case where there is no Machine number today we give EJ_______.nnn - need a separate configuration to format this as Ej.nnn



Summary:
Send comms up message to Host after comms is restored

Description:
Wincor have implemented this for a customer.  Zubair to manage as a customisation in the short term.




Summary:
Supervisor - To integrate the TCP/IP configuration task developed by Comms team

Description:
TCP/IP Support Task v01.01.00 (SSL but can be disabled as default) - supervisor task





Summary:
Support - SSL - TCP/IP v 3.00 (SSL but can be disabled as default)

Description:
Support - SSL - TCP/IP v 3.00 (SSL but can be disabled as default)




Summary:
To pick up the .Net CCM TCPIP with the COM interoperability layer

Description:
To pick up the .Net CCM TCPIP with the COM interoperability layer



Summary:
TAR RFC :  AA-NDC does not print header on prnt cntrs with machine number and date

Description:
Difference between NDC and AANDC functionality.  Work completed as a customisation to meet immediate need




Summary:
 AA-NDC: Changes/additions for USB printer configuration

Description:
Default settings should be common across printer models. AA-NDC should provide these. 
AS - provide equivalent (as close as possible) print across both devices.  




Summary:
NDC Host support for dual dispensing - More a clarification on AANDC implemenation of dual dispensing - from reading the documentation it looks like no support has been implemented to allow the the host to explicitly say which dispenser to use  ?

Description:
Review IP for pontential improvement in terms of documenting what is supported.  AANDC 3.2 supported extended cassette via the Host.  Host determines which cassette to dispense from and therefore it is effectively controlling which dispenser is used.   




Summary:
Self Healing - 24V re-set (via application)  

Description:
An additional step to recover the ATM by switching the 24V power on & off to the ATM devices - the business advantage is that a full reboot is not required.  This should be done as part of enhanced recovery process - if not enabled then the self-healing r




Summary:
Provide ability for customer to enter the "whole" amount of currency but from a switch perspective a decimal point is sent

Description:
Diebold/Wincor solution does this and PS have completed customisations for this




Summary:
SCPM: PCI compliance

Description:
PCI DSS requirement



Summary:
PCI-DSS - where a electronic Payments system is used ensure cheque images are stored encrypted

Description:
PCI DSS requirement



Summary:
PCI-DSS - If data is stored the event of a power failure or other scenario where the ATM will be down then this data should be encrypted

Description:
PCI DSS requirement



Summary:
PCI DSS - RFC to mask card data when a card is captured

Description:
PCI DSS requirement



Summary:
PCI DSS - RFC to remove encrypted PIN from all logging activities

Description:
PCI DSS requirement



Summary:
PCI DSS - RFC to remove track data from all logging activities

Description:
PCI DSS requirement



Summary:
Support for Wincor EPP ID which is 16 bytes 

Description:
Requirement is to implement new Extended Encryption Key Change message modifier ('V') that allows a variable length Serial Number to be sent based on the capabilities of the EPP device. 



Summary:
IP work to standardize DM User Guide for Advance NDC needs to be completed

Description:
The conversion of the publication to the standard used for the rest of the ANDC publication should be completed for the next update. Remaining work includes:

Preface needs to be completed 
Chapter 2, How to Configure Display Manager is not set out in the same way as the Developer's Guide and the terminology needs to be looked at too 
Appendix B has tables that require numbers and headings 
Appendix B schema explanation layout does not match that used in the Developer's Guide 
Glossary needs to be populated 
The index could be improved 
Throughout - terminology, list introductions, and language (for example, Chapter 3 begins "It may be required to use Display Manager in a different manner...") need to be checked for register.
Headings followed immediately by another heading need some text.
XML examples should be made into figures and given figure numbers & titles



Summary:
TAR 394587 - AA-NDC Developer's Guide has errors in Sample code for Voice Guidance

Description:
TAR To track the update of the voice guidence xml example:

Line 6  <afaTrigger useLang="false" triggerKeyPos="6" confirmationAudioID="confirm" confirmationKeyPose="6" timeoutAudioID="timeOut"/>  
Fixed  <afaTrigger useLang="false" triggerKeyPos="6" confirmationAudioID="confirm" timeoutAudioID="timeOut"/>
Line 8   <afaLang screen=0190" opCodePos="7">
Fixed  <afaLang screen="0190" opCodePos="7">
Line 10  <LangOption lang="sp" keyPos="2" opCode="D" opCodeNoALT="B" screenOffset="0" treqField="&#60;"/>
Fixed  <LangOption lang="sp" keyPos="2" opCode="D" opCodeNoALT="B" screenOffset="0" treqFieldID="&#60;"/>
Line 43  <Key pos="2" code="F3">
Fixed  <Key pos="2" code="F3"/>
Line 53  <Key pos="1 code="F6"/>
Fixed  <Key pos="1" code="F6"/>
Line 67  <Key pos="10 code="FA"/>
Fixed  <Key pos="10" code="FA"/>
Line 74  <Text lang="en" state="private"> You have chosen to display the screens. </TEXT>
Fixed  <Text lang="en" state="private"> You have chosen to display the screens. </Text>
Line 75  <Audio audioID="adsYes" group="0000">
Fixed  <Audio audioID="adsYes" groupID="0000">
Line 78  <Audio audioID="adsNo" group="0000">
Fixed  <Audio audioID="adsNo" groupID="0000">
Line 82  <Audio audioID="orientNo" group="0000">
Fixed  <Audio audioID="orientNo" groupID="0000">
Line 86  <Audio audioID="orientYes" group="0000">
Fixed  <Audio audioID="orientYes" groupID="0000">
Line 90  <Audio audioID="timeOut" group="0000">
Fixed  <Audio audioID="timeOut" groupID="0000">
Line 92  <Recorded file="timeout" state="private"/>
Fixed  <Recording file="timeout" state="private"/>
Line 94  <Audio audioID="confirm" group="0000" repetitions="0" keyboardID="010">
Fixed  <Audio audioID="confirm" groupID="0000" repetitions="0" keyboardID="010">
Line 98  <Audio audioID="0190" group="0000" keyboardID="010" repetitions="0">
Fixed  <Audio audioID="0190" groupID="0000" keyboardID="010" repetitions="0">
Line 102 <Audio audioID="0191" groupID="0000" repetitions="0" keyboard="010">
Fixed  <Audio audioID="0191" groupID="0000" repetitions="0" keyboardID="010">
Line 108 <Recorded file="PlayWelcome" state="private"/>
Fixed  <Recording file="PlayWelcome" state="private"/> <!-- And moved out of <Text> block -->
Line 116 <Audio audioID="0192" group="0000" repetitions="0" keyboardID="010">
Fixed  <Audio audioID="0192" groupID="0000" repetitions="0" keyboardID="010">
Line 169 <Audio audioID="0102" groupID="0000" keyboardID="102" repetitions="0" keyText="true">
Fixed  <!-- <Audio audioID="0102" groupID="0000" keyboardID="102" repetitions="0" keyText="true"> -->
Line 175 <Audio audio ID="0015" groupID="0000" repetitions="0" keyboardID="100" keyText="true">
Fixed  <Audio audioID="0015" groupID="0000" repetitions="0" keyboardID="100" keyText="true">
Line 192 <Audio audioID="0026" groupID="0000" repetiions="0">
Fixed  <Audio audioID="0026" groupID="0000" repetitions="0">

working xml attached.



Summary:
"DynamicReporting"="1"  in NCR_SPs.reg is not supported by CDM SP

Description:
Spotted above entry in the NCR_SPs.reg for both CDM and CDM 2 - this value does not appear in the CDM SP FS Rev P however so will not be used and should be removed...



Summary:
DisplayManager:DM Installation for DevPC is installing html pages in c:\NTGlobal\Final\XFS\Dll and configuring registry as C:\SSDS\DLL

Description:
DisplayManager Installation component is configuring registry key "DefaultPage" under [HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\DisplayManager] as DefaultPage="C:\ssds\dll\mainpage.htm" instead of "c:\NTGlobal\Final\XFS\Dll" for DevPC



Summary:
Migrate SSDS directory to c:\Program Files\NCR\Aptra\Advance NDC

Description:
Original RFC states "Any new delivered DLL/FRF/STR files placed and loaded from C:\Program Files\NCR\Aptra\Advance NDC\....to facilitate migration away from C:\ssds\"

From Jans scoping document the requirement is to move files to new subdirectories of Advance NDC e.g. Apps, DLL, Config and Media 



Summary:
SCPM: Package the CodeLine Validation Service (updated for the DBS Requirements around the fields defined by the on us character)

Description:
The AANDC requirement is to package the CVS, and ensure it accommodates the same level of validation as per the CPM implementation (i.e. more than 3 characters and no read error characters).

The following is the requirement being addressed in the CVS for DBS (Singapore cheques)...
1) Two characters immediately preceding the first on us character
2) Characters between the second and third on us characters
Below is the analysis done - The new test cases are detailed as follow:-

<NCRCodelineTest> 
      <Number>16</Number> 
      <Description>Two characters immediately preceding the first on us character</Description> 
      <Run>True</Run> 
      <Required>True</Required> 
       <Param>
          <Name>NotEqualTo</Name> 
          <Value>55</Value> 
  </Param>
      <RejectReason>9</RejectReason> 
    </NCRCodelineTest>

Test : 
1. verify whether the codeline contains one of the on-us characters( < or ] ). (note that '<' is the on-us character in  E13B and ']' is the on-us character in CMC7)
2. If present then get the position of the first on-us character(from right to left). 
3. get the immediate two right side characters.
4. compare the characters with the value specified in the Value tag of the test.
5. if the comparison is successful then test fails(invalid codeline) else passes.

<NCRCodelineTest> 
      <Number>17</Number> 
      <Description>Characters between the second and third on us characters</Description> 
      <Run>True</Run> 
      <Required>True</Required> 
       <Param>
          <Name>Length</Name> 
          <Value>1</Value> 
  </Param>
      <RejectReason>9</RejectReason> 
    </NCRCodelineTest>

Test : 
1. verify whether the codeline contains one of the on-us characters( < or ] ). 
2. If present then get the position's of the second and third on-us characters(from right to left). 
3. Check the number of characters present in between the positions
4. compare the number of characters with the value specified in the Value tag of the test.
5. if the comparison is successful then test passes(valid codeline) else fails.

Refer to GR1T 419540 for more details.



Summary:
Support large PD investigations being copied to  multiple drives and  also support DialUp Congfiguration CopyOn CopyOf functions can use multiple drives.

Description:
PD Investigation COPYLOGS function can only copy the PD investigation log files to diskette. Now saving to any removable drive should be supported. Similarly COPY ON/OFF functions of the DIALUP CONFIG.  




Summary:
SCPM: Support for transaction journalling

Description:
Support Journal printing, EJ, Dual, Hardcopy backup for a SCPM transaction.



Summary:
SCPM: Make information available to be used in DBS Exception Reports, for offline bunch cheque deposit

Description:
Exception Reports - These essentially take the place of the information that would normally be sent to the host through solic and unsolics and is for transaction reporting/audit and reconciliation. So any information that would normally be sent to the host has to be made available to a customization to prepare an exception report i.e. Transaction Failed - Cheque Jam, Hardware Failure, Retract Count, Returned Count.



Summary:
SCPM: Provide ability for an Exit to rotate/scale a cheque image for subsequently printing on a receipt

Description:
DBS/SEA will prepare the cheque data including the cheque image required to be printed ¿ DBS need to be able to format the cheque image i.e. rotate/scale etc. Hence functions to do this need to be made available to DBS.



Summary:
Retract support on SelfServ receipt printer, should be configurable

Description:
AANDC to have the capability to disable the receipt retract feature at
both of the following scenarios: 
1) During Start of Day, a blank receipt is printed and retracted 
2) During transaction, if customer does not remove the receipt, receipt is
retracted. 

USB Thermal Printers Feature is having the following registry option to
disable receipt retract feature: 

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR
Features)\Usb80mmThermalPrinters\Operational
Parameters\RPNT-01-UsbThermal\CONFIG] 
"CaptureIfPageNotTaken"=dword:00000000 

It will be best for AANDC to use the same registry to
determine whether to retract or not. 




Summary:
IDC SP Internal error causes Customisation layer to endlessly loop.

Description:
Several customers have experienced problems with smart card issues causing a 
continual loop in AA-NDC, filling the event logs with non-fatal errors but
without raising any status to the host. 
Whilst the root causes of the errors lie in the device or service provider
and are being addressed individually, the application error handling is
serving to compound these errors, causing decreased availability for the
customer and making root cause difficult to diagnose since event logs have
overwritten the original errors. 
This request is to have the AA-NDC Customisation Layer handle these
scenarios more gracefully. 
The majority of these scenarios are triggered by a SCIF error which will not 
generally cause the IDC device to become unavailable since magnetic stripe
capability is still available. The subsequent processing can then lead to
the IDC SP returning WFS_ERR_INTERNALERROR to any command and causing a card 
reader worker (acceptor, ejector or capture) to signal "Abandoned". 

An example of this involves an INVALIDDATA return from a WFS_CMD_IDC_CHIPIO
Command which causes the current state to exit to a close state. 
The close state attempts to eject the card and because the card error
recovery has destaged the card without an explicit command from the SP, the
SP attempt to release the card from the smart card position, leading to a
bad response and an InternalError being raised. This then causes teh Card
Ejector worker to signal "Abandoned" 
The Abandoned flow in the close state checks that the card is present and
then tries another eject with the same result and then a capture - again
following the Abandoned path, before exiting from the close state. 
Since the card reader is not fatal, the application enters the card read
state where a similar sequence of abandoned signals is gone through before
exiting through the "Check for Suspend" signal. 
Since the card reader is in neither a Suspend nor Fatal condition, the
application enters the card read state where..... 
This continues filling up the event log with m-status 50, severity 2 until
the terminal is put out of service or manually reset - which could be some
time since AA-NDC has no suspend or fatal status messages to pass on to the
host. 

After taking an Abandoned path out of 3 consecutive card reader workers, it
would seem reasonable to assume that the card reader is in an unstable state 
and so should be reset - either by reboot (CEN2 - AA-NDC 02.06.xx) or XFS
Reset (CEN3 - AA-NDC 03.xx.yy) 

This type of problem can easily be replicated in the XFS Simulator by
setting the response to a WFS_CMD_IDC_READRAWDATA command to be
WFS_ERR_INTERNALERROR. After receiving a Go In Service terminal command, the 
application loops, continually sending the WFS_CMD_IDC_READRAWDATA to the
IDC SP until an Out Of Service terminal command is received. 

No IP customer solution is required to be provided for this RFC as the root
causes of issues are also being addressed via TARs on the appropriate
products. Resolution in AA-NDC 03.02.00 will be sufficient at this time
although a fix being available for customers with current releases may also
be prudent given the impact of this issue.



Summary:
Add a debug log/trace feature to the Author tool

Description:
The Author tool crashes a lot and is starting to have a big impact on developments.  To assist with investigating the cause of crashes, the Author tool should log/trace issues.  This was raised in the ANDC 3.3 DSS lessons learned.



Summary:
Request to log message when consumer resource relinquished

Description:
Customer issue arose where the ATM would appear not to Go In Service. The
root cause of the issue, was a resource management software issue, with an
SNMP management system (TPS Insight) changing the SNMP SSTService state to
Out Of Service, and not returning it back to In Service. This impacts the
application and results in the above behaviour. 

It is difficult for both branch staff and also customer engineers to
determine what is happening as there is no ready indication at the terminal
as to why the application is not available. 

It would be extremely helpful if the application could log something when
this situation arises, either via the fault display, or probably better to
the journal, to indicates the condition to the user/customer engineer that
the application has relinquished control to another resource. 

Note on an NDC+ system, there was a similar function to AA-NDC and Resource
Management, with the Software Management (SM) products, where Software
Management could take control from NDC+ at an appropriate point in time. 
When that occurred the ATM could be configured through an option to send a
message to the NDC TPA host to indicate that the SM host system had taken
control of the system, with a further message being sent when control was
relinquished by the SM product. Described in the "Software Management
Installation Status Messages" section of the NDC+ manual which is not
included in the AA-NDC reference manual. At least that way the NDC TPA host 
which is supposed to control the terminal is informed what is happening on
the terminal.




Summary:
Request to correctly report the 5867 (Brazil P77) product class

Description:
Request to add the 5867 as a supported product class. 

Banorte in Mexico has experienced an issue when upgrading 5867 systems to
AA-NDC. The product class has been entered through system application as
5867 as per the unit labelling, however in the solicited response from the
ATM the product class is reported as 00, which the (ACI ?) host does not
recognise and therefore does not permit transactions to take place. 

Customer has been recommended to work around issue by entering the product
class as 5877.



Summary:
ANDC Issues with the quality of receipt characters (forms-based printing)

Description:
AANDC uses NDC Arabic X font to print the data on receipts using forms.  There is an observations  that the quality of receipt print is not as good as RAW Data receipt print.



Summary:
ANDC 3.3 Issues with the quality of receipt characters (forms-based printing)

Description:
AANDC uses NDC AlphaNumeric X font to print the data on receipts using forms.  There is an observations  that the quality of receipt print is not as good as RAW Data receipt print.



Summary:
TAR RFC 387992 - Ext 1 Table Entry 8 for Cash Accept to be used for All Excess notes returned

Description:
The agreed solution is a bit different from the one required in the RFC. It has been discussed with Stefano Cipollone, Gordon Forsyth, BeeLian Gan and Chong Honkchong from the SEA team. 
It requires a specs update to define a screen for all notes refused (different from the application limit one). This screen contains a dictionary indexed with the reason for refusal. More details can be obtained from the Solution developed by Jacek Adamski.zip file attached. The solution contained therein includes a fix for a delay observed in the refused notes screen.



Summary:
TAR RFC 385798 - RFC to send an Unsolic with Mstatus 02 when GBNA already FATAL on Cash Deposit.

Description:
Problem Description: GBNA is still Fatal (due to a Bunch Transport Error) but AA-NDC sends an Unsolicited message with M-Status 00.
Perform two Cash Deposit transactions where the notes are jammed in the transport.
On the first Cash Deposit the GBNA device is being actioned and, as expected, it reports FATAL and Mstatus 37 (Bunch Transport Error). 
On the 2nd attempted Cash Deposit the device is not actioned. A H/W error is immediately reported when the Cash Deposit transaction is selected. AA-NDC still sends an Unsolicited Message but it maps an Mstatus 00 as there is no Mstatus 37 from the device (as no device error is logged as the device is already FATAL). 

Proposed RFC: The Mstatus should be changed from 00 to 02 "Operation not attempted because the device is FATAL from a previous operation. A reset of SOH to HEALTHY must be performed to clear this." 



Summary:
ECB6 - provide a screen which gives guidance to customers on what to do next when counterfeit notes have been detected.

Description:
This RFC is to implement a screen that should be shown before confirmation screen whenever a counterfeit or suspect notes have been detected within the notes inserted. 
When suspect notes are not configured to be retained by the ATM,then this screen is displayed for counterfeit notes only.
The screen has 2 FDK allowing to proceed to confirmation screen or to cancel the transaction and a timeout which proceeds to confirmation screen.
Extension State 3, table entry 9 is used to define this screen.
In order to implement this RFC the NDC spec should be updated. Please see the relationships tab for details.



Summary:
Send ECB6 counts in unsols w? and w@.

Description:
Cat2 notes are sent using w? unsol and cat3 notes are sent using w@ unsol whenever they are detected in CashIn operation.




Summary:
IP: The developer's guide (AANDC 3.3) page 5-57 states that deposit ATMs should be rebooted every month. 

Description:
This wrong statement is a reference taken from CIC 1.1 Release Bulletin. It was included there to document a handle leak in that specific version. This was fixed in AANDC 3.3 but the mention was included by mistake in the IPs. It has to be removed.
This same information appears in the Revision Record as well.
Full quote:
NCR recommends that any SST used for deposit transactions is rebooted at least once a month as the number of permitted consecutive transactions is limited by a Windows registry setting. For more details, refer to the Microsoft article ¿Maximum NT User Handles Per Process Is 10,000 in Windows XP¿ (article ID 327699) at http://support.microsoft.com.




Summary:
TAR 393354:  Mstat 26(dec) returnd in unsolic instead of 38(dec) when Card Capture Bin Full

Description:
When the LFCC Bin was tested in a full scenario the Mstatus which is retured 
   is 26 (decimal)  - Speed out of specification slow - instead of 38 (decimal) 
   - LFCC bin full soon/full:
   
   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]0[Unicode-x1C]26[Unicode-x1C]4]




Summary:
TAR 393239 - Hang if Cancel pressed after Cash Deposit times out without notes entered

Description:
See STAR



Summary:
TAR392381 - AA-NDC does not support re-install when encryption keys entered with DAPI7

Description:
AA-NDC does not support re-install of IUI when encryption keys have been
entered in DAPI 7. It deletes the keys and re-loads the factory key,
causing encryptor errors. 

AA-NDC should support this.




Summary:
TAR 391972 - Access Violation in Application Core when processing EJ status

Description:
See STAR



Summary:
Update to ANDCSP Installshield project to include ANDC 03.03.00 installer updates

Description:
Update to ANDCSP Installshield project to include ANDC 03.03.00 installer updates



Summary:
AANDC does not supply the correct value for extension state next state parameters when Alphanumeric state option is enabled.

Description:
When performing Biometric Exits testing with the alphanumeric state number option enabled certain Biometric state took the incorrect next state number. This is an AANDC issue.

If the next state number is supplied from an extension state the value returned by the Advance NDC GetIntVal call for that parameter is not correct.  It remains as it was downloaded,  so 553 in base 36 is returned as the integer value 553.
 
When the state parameter is in the primary state table the value is returned correctly i.e. it is converted from base 36 into base 10, for example 553 is converted to 6663.



Summary:
TAR 392705 - Transaction reply screen update data voiced instead of expected AudioID

Description:
Customer reported issue on AA-NDC 03.03.00. 

They advised that if they send a transaction reply with a screen display
update to the transaction processing screen, that instead of playing the
audio which should be played with that screen, AA-NDC voices the data from
the screen update. 

For example, if they send the following transaction reply (screen update to
022), then "Hello 1234 Hello" is voiced when the "take your cash" screen 022 
is displayed. The AudioID 0022 they have associated is not voiced at all. 


4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C]01[Unicode-x1C]12342022022[Unicode-x0F]@@HELLO 1234 HELLO[Unicode-x1C]003$50 CASH WITHDAWAL 

If they update a screen that is displayed outside of the transaction request 
state (i.e. close screen 125) then it behaves correctly and does not voice
the screen update data. It voices the appropriate audioID for the screen
displayed. 

[4[Unicode-x1C][Unicode-x1C][Unicode-x1C]025[Unicode-x1C]01[Unicode-x1C]12342022125 [Unicode-x0F]@@HELLO 1234 HELLO[Unicode-x1C]003$50 CASH WITHDAWAL 



Summary:
Fault Display functionality for Nationwide

Description:
Integrate Fault Display (G384510) to Nationwide Sandbox and add memory leak fix G412822 on top of it



Summary:
Use Trim function wherever CashUnitID property is used

Description:
Use Trim function wherever CashUnitID property is used just to make the application more robust. Also, there were cases where the CashUnitID property was returned with trailing spaces.

No functional description required for this fix and it's a 100% code issue. This issue can be recreted and tested on Dev PC and Mainly some of regression tests carried out.



Summary:
SCPM: StartOfDay and Close State

Description:
SOD and Close State developments in support of SCPM.
DBS Phase 1

Note:  The SOD initialisation will need to implement/configure the following (as per the NDC message spec):
- Image Capture Format is configured through NDCIMGFMT.xml
- Image Quality Assessment is configured through NDCIMGQA.xml

Also need SOD to configure the following in support of ImageMark Passport:
- Source Location 
- ImageMark Passport Upload Directory
- Codeline configuration
- Validation service
- Courtesy Amount Recognition (future)



Summary:
SCPM - Imaging after endorsement

Description:
SEA needs the following Cheque image to be lifted after endorsement in addition to before endorsement (image of a cheque as deposited) on both Single Cheque and Multiple Cheque. Validated by Area head, Marketing and feasibilty agreed by Cheri Roe - CPM Product Manager



Summary:
SCPM: PCI compliance

Description:
Raised to consider encrypting multiple cheque images



Summary:
SCPM: Support for Display Manager - dynamic screen content

Description:
Does not seem to be required by DBS.



Summary:
SCPM: Supervisor functionality to emulate CPM functions (INIT, Print Counts, Clear Bins/Pockets)

Description:
DBS Phase 1



Summary:
SCPM: Support for printing a transaction receipt, in offline bunch cheque deposit

Description:
DBS Phase 1



Summary:
SCPM: Support PS customisations using Author, C-Exit and .NET Exit

Description:
DBS Phase 1



Summary:
SCPM: AutoErrorRecovery

Description:
DBS, optional for Phase 1, required for Phase 2.



Summary:
SCPM: BunchChequeHandling State

Description:
BunchChequeHandlingState development in support of SCPM.
DBS Phase 1



Summary:
SCPM: Fault Display

Description:
DBS Phase 2



Summary:
TAR 392609 - TCP Local and Remote Parameters SupvConfig does not allow values between 1-255

Description:
In AA-NDC 03.03.00 the option to enter Local and Remote Port Numbers in
Supervisor - 37 - TCP/IP Config does not allow the values of 1-255 not to
be entered. 

This was previously addressed by TAR 326507 for AA-NDC 03.00.04 but has not
been migrated to AA-NDC 03.03.00. 



Summary:
Application crash while performing DISPRNT transaction

Description:
Set message mode to 100007 or 100001 and perform withdrawal transactiion
send DISPRNT message form ANGEL and let the cash get retracted.
After the cash retracts the application crashes.



Summary:
ECB6 Status Message

Description:
ECB6 Status message will include 2 new unsolicited message to report Counterfeit and Suspect notes to Host whenever P6 event containing category 2 or 3 information is received from platform.



Summary:
Enhanced EJ - CD Write Component - Buffer Overrun Error - Needs to be fixed in 3.3.1 and 3.2.2

Description:
CDWrapper.cpp Line 119 - Please fix in 3.3.1 and 3.2.2

wcsncpy(DriveLetter,destination,4); should be 

wcsncpy(DriveLetter,destination,2);



Summary:
ANDC 3.2.1MV forms - CHAR SET 1 & 2 commands change font. G1 & G0 do not apply.

Description:
In K01 the * (Shift-in) is not processed by the forms processing to change the font back to char set 1.
It is correct CHAR SET 1 & 2 commands change font.



Summary:
Diebold IX with AXIOHM - require pointsize param in all forms & alignment & dynamic forms issue.

Description:
1. Point size  text squashed if pointsize not defined in field.NCR value ignored if row/col. Wincor - value ignored if CPI used.
Opteva  pointsize supported but have defualt 7 if not supplied.
2. Alignment of form needs to be below previous form on same page.
3. Need to use media control=0 to avoid gap in multform prints
4. updating the forms directory causes , stored forms data to be purged form printer. All forms need to be present to print page.
5. media length needs to be less than black mark to avoid double page eject.



Summary:
when Mouse Cursor is set to NULL and display manger is installed then at the time of Playing AVI file through HTML is not hiding mouse cursor from screen

Description:
Whem Display manger is installed on SSTand Playing the AVI file through HTML the mouse cursor is visible while the idle loop avi is being displayed.  It is hidden at all other times but re-appears during the AVI animation.




Summary:
TAR 338232: AA-NDC: Access violation from Customisation Layer during a Cash & Receipt print transaction

Description:
See TAR



Summary:
Coupon Printing - Receipt printer object not checked properly when printing promote coupon.

Description:
Application is getting crashed when trying to print coupon without receipt printer is connected (changed the Alias name and tested).

IMP_OR_EXP bool IsTwoSidedPaperLoaded()
{

	LPWFSPTRSTATUS PrnStatus;
	mMVReceiptPrinter * printerToUse = mOOXFS::GetReceiptPrinter();
	if( printerToUse != NULL )
...
}

This should have been written like below...

	LPWFSPTRSTATUS PrnStatus = NULL;
	mMVReceiptPrinter * printerToUse = mOOXFS::GetReceiptPrinter();
	if( printerToUse != NULL && printerToUse->IsPresent() )




Summary:
Second Cheque image is printing as garbage via a Rawdata print on Universal machines with 203dpi (there is no issue on a Personas printer)

Description:
This issue has been raised as a separate GR1T, so that GR1T 413253 is only related to Forms printing.
Note that test 5.5.11 (Front and rear images lifted and printed) was Passed in IT7 on Universal with rawdata printing, so maybe this functionality has been broken since then, else what is different about the test mentioned below?

ANDC     : 93.03.00.17
XFS         : 05.00.00
Testcase : 5.11.42
Scenario  :
Set the receipt length to 49 ( msg mode 10000002)
1)Start the applications and make sure CPM device is fit and its working fine.
2)Insert the card and Do an transaction.
3) send the CPM_PRNT( from ANDC_MV_COE12) as transaction reply from NDCHost.
4)The first image is coming with the good size and the second one is too big 

with Raw data there is a Junk data printed for the second image and it takes very long time to print.
this is tested on a USB Printer



Summary:
Supervisor C-Exits need to register their own Blocking hook

Description:
Supervisor C-Exits need to register their own Blocking hook. 
In order to work around defect 411555 where no key press events are seen by an Exit the ExitSample code needs to define and register its own blocking hook.
This hook should look for events sent to its own window before calling the previously defined blocking hook.



Summary:
Application fails to go 7- Diagnostics State

Description:
Using Build 18. Application doesn't go to Diagnostics after pressing  7- Diagnostics.  This is casuing a hang.  If Andcia.exe process is killed then it goes diagnostics.



Summary:
For each HW error, Unknown error fault display text is added of Passbook mapping object

Description:
statcust.cpp- mPassbookPrinterMapping::MapSeverity()
when the fwdevice is HW Error, Unknown Error the fault display is getting added for all kinds of hard ware errors. for example if there is a toner out occured, then HW error occurs and the Fualt display is added PASSBOOK FATAL, TONER OUT. Also UNKNOWN ERROR  is added to the fault display which is default.




Summary:
SNMP Mode Change Memory Leak

Description:

Memory leak identified during SNMP testing - sending OOS and GIS commands.

In parallel memory leak investigation found memory leak in TCPIP which turned out to be the same issue identified in the SNMP testing.



Summary:
Produce instructions for PS to install ANDC on MV hardware

Description:
Keep a guide so that PS are self sufficient in installing and trouble shooting ANDC on MV atms.




Summary:
No Envelope is Dispensed if we send DEP_910 TREP just after finishing  the deposit transaction( in the same Transaction)

Description:
AANDC 93.03.00.17

Tested on a non combined Envelope Depository

Scenario:
1. Start the applications
2. Load APPC and LD
3. Insert card and perform a transaction, TREQ sent to Host
4. Send DEP_910 , there is a Envelope Dispensed and Take it, Depository gets enabled , deposit the envelope
5. Deposit Completed, Select Yes on 4 FDK Screen, and Select Fast cash, and any amount
6. TREQ sent to host , send the DEP_910, Depository Enabled with out dispensing a Envelope.

7. Deposit a Envelope and select Yes on 4 - FDK Slection.
8. select any transaction, TREQ is sent to host, send DEP_910 reply, Envelope is Dispemsed this time.

Logs Attched,

Tested with AANDC 03.02 and 03.02.01 and this issue is not there.



Summary:
Secure Installation - Pop-up windows appear when Advance NDC is first started using the SSTAuto1 user

Description:
COM objects related with Voice Guidance and Display Manager not registered properly for SSTAuto1 user

Issue reported by Jiri.
Advance NDC fails to start because the COM components are not registered (pop-up error windows appear). The installer should manage to do i without running the registration batch files. The regit.bat and RegisterAll.bat files provide workarounds. RegisterAll.bat needs to be modified to run silently.



Summary:
Envelope Depository MEI Doesn't flash when Shutter gets opened ( Combined Depository)

Description:
Build AADC 93.03.00.17

Athena - Combined Envelope Depository.
Scenario:
1. Start the Apps
2. Load APPC and LD
3. Insert card and Perform a transaction
4.Send the DEP_910 as reply, Take the Envelope when dispensed. ( MEI Falshes and Turn off after taking the Envelope)
5. Shutter gets opened for deposit but MEI is not flashing.

Logs Attched.





Summary:
Fatal(4) status is not reporting when the notes from cassette are out when the option76 set to 001.  

Description:
ANDC     : 93.03.00.17
XFS         : 05.00.00
Testcase : 5.7.25.5.2.3.37- Notes Low then Out.
Scenario  :
Pre-Requisite: Set the 4 cassettes configuration as Cassette type 1,Cassette type 5,Cassette type 6 and Cassette type 7.

1)Start the apps and send the message 3[Unicode-x1C][Unicode-x1C][Unicode-x1C]1A[Unicode-x1C]000[Unicode-x1C]76001and then send the download.
2)Application comes to IN-Service mode.
3)Remove cassette 7 and ensure only around 50 notes remain and replace the cassette.
4)Insert card and Perform `DISP40_7¿ transaction to dispense 40 notes from cassette type 7 only.
5)It presents the 40 notes successfully and it reports the Unsol message 12fs000fsfsE000000000000040fs00000000fsx..xfs10000002(2 means Notes low for cassette type 7).
6)Again Perform `DISP40_7¿ transaction.
7) No Notes are dispensed and it reports Solicited message 22fs000fsfs8fsE200000000000000fs00000004fsx..xfs11000113.

But here it is not reporting the Fatal(4) for cassette type 7.It is reporting as 22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000000000[Unicode-x1C]00000000[Unicode-x1C]0401130003000000002020[Unicode-x1C]10000203.
 
If we perform again same transaction  `DISP40_7,then it is reporting the Fatal(4) condition.

This issue doesn't happens with option 76 set to 000.



Summary:
Application trying to Send P21 unsol Continuously When we went to Supervisor with no host connection

Description:
Build : 93.03.00.17


1. Make Sure Comms is Configured before running this. 
2. Start the Applications and Don¿t Start the NDC Host.
3. 002 screen is shown
4. Go to Supervisor
5. Now , apps keep on trying to send the P21 to host until we exit from Supervisor , I can see this in the Message out log.Debug logs gets full. until we exit from supervisor , its keep on sending.
6. Exit from supervisor now, this time, it doesn¿t try to send any p21/p20 to host ( it just stores the data so that when there is a connection it will send the unsol)

Kept the Priority to Low.



Summary:
Second Cheque image is printing with very bigger size using Forms when trying to print two cheque images on the receipt

Description:
ANDC     : 93.03.00.17
XFS         : 05.00.00
Testcase : 5.11.42
Scenario  :
Set the receipt length to 49 ( msg mode 10000002)
1)Start the applications and make sure CPM device is fit and its working fine.
2)Insert the card and Do an transaction.
3) send the CPM_PRNT( from ANDC_MV_COE12) as transaction reply from NDCHost.
4)The first image is coming with the good size and the second one is too big 

with Raw data there is a Junk data printed for the second image and it takes very long time to print - GR1T 413500 has been raised to track this issue.
this is tested on a USB Printer



Summary:
AANDC IPs should document HW limitation on BNA2 related to inserting Cat2/Cat3 notes along with Invalid notes that are not Taken

Description:
SP does not report those notes as ECB6 notes, so they are reported to host in w0 msg as Good notes. Even when they are cleared using INIT BNA they are not reported as ECB6 notes.



Summary:
w3 message with fatal fitness observed when "Transaction Selection" menu is timed out

Description:
This is observed in only the scenario that is mentioned below. Without follwoing the below scenario if "Transaction selection" menu is timed out, you do not see any w3 message.

Procedure Followed:
1. Enable close state behaviour Setclose 2
2. Initiate a Deposit transaction
3. Leave Confirmation screen to time out.
4. Close state behaviour Setclose2 is executed and notes are left at escrow.
5. Enter supervisor, do 54 INIT BNA - INIT BNA is successful and notes encashed
6. Exit Supervisor
7.Insert card and leave "Transaction Selection" menu to time out- This results in a w3 status message with fatal fitness.

When the same is repeated with AER enabled, no w3 message is reported at step 7.

Observed during Adhoc testing for the build CICIT17




Summary:
Passbook-STATCUST-for DEV_HWERROR default should be fatal - only under the specific case where retract bin is high should we retrun routine

Description:
XFS gives:- fwDevice =               0 (WFS_PTR_DEVHWERROR)
we should set msev = mFatal except for Retract Bin High when it should be msev = mRoutine
 



Summary:
AANDC IPs should document that BNAx cannot report accurately the intelligent cassettes status with inner cover open

Description:
See related G410815 for description of platform limitation.



Summary:
Clear Suspned fails on OPTR User Error and Application hangs in the close state.

Description:
Scenario:
1) Create the USER ERROR on OPTR.
2) Let the platform Device Suspend Timeout and Platform Clears the error
3) Let complete the ANDC suspend timeout. SST should come to Idle loop, which is not happening.



Summary:
(Settlement - DAPI7): Clear key on EPP is acting as a input data on Pin entry with in the settelement mode

Description:
Build:
AANDC IT 17

EPP with DAPI 7 Configured.

Scenario:
1. Load Key A from supervisor and Send LD_COMMS ( to create the comms key )
2. Send APPC and LD
3. Send OOS and Send C09TRAN1 from C09test.txt ( 3[Unicode-x1C][Unicode-x1C][Unicode-x1C]11[Unicode-x1C]C091%B423567890123456^999NAME/ISO  ^12345678?;1234567890123456789=22222225379?;98765432102?10212002552552552552552552552552550000000000TRANS  0??1)
then GIS

4. Go to supervisor and Select 4 replenish , run 15 supervisor Transactions
5. Exit from supervisor
6. PIN ENTRY is  displayed on Front
7. Press Clear Button, There is a 'X' mark shown on the Disply and if we keep on pressing its taking it as input data, rather than Clear Function. 

When we press Cancel also there is "X" Displayed and though it was exiting from FUNC



Summary:
INIT RECEIPT and INIT STATEMENT fails when Media is changed from 2ST to Non 2ST.

Description:
Environment : 
AANDC IT 16+ XFS 05.00.00 + SP patches.

Procedure:

Intially the USB Two Sided Receipt Printer has 2ST Paper Loaded in it, make sure that receipt printer is in good condition and start the the application
Move to Supervisor
Goto Replenish Menu
Select Option 9 INIT Receipt 
Receipt is presented with data printed on front and back sides and INTIALISATION SUCCESS will display on EOP
change the media in RECIEPT PRINTER TO NON 2ST and make sure receipt printer is in good condition
Rerun the INIT RECEIPT in REPLENISH MENU 
Intialisation will failure and no receipt will present.

Follow the same procedure for INIT STATEMENT also.



Summary:
Issue with c-Exit : Application is continuously running in loop, it is not coming to inservice.

Description:
TestScenario:
1. Install EMV
2. Copy exit.dll, STCONT,VCCONT and MISCONT files from <<\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.0 Service Packs\APTRA Advance NDC 3.00.04\Documents\Tests\TAR325325\EXIT_FILES\>> 
3.Start Applications.
4. Send DL_001 list file. - It is rejecting 16 to 20 messages from that list.
5.Send GIS- Application is continuously running in loop , not coming to inservice.

BuildDetails:
	AANDC IT16.
	XFS 5.0

This issue was seen while running test 5.7.23.10 from the AANDC 03.03.00 ITS.doc.

Logs are attached.



Summary:
Application is hanging while AANDC is running with EMV.

Description:
Issue when AANDC is running with EMV. Application is hanging in some places, it is not at all going to the nextstate.

Testcase 21.1.5 from CAM2 SysTPlan 0.19 021210.doc

TestScenario:
1. Start Applications.
2. Send DL_001 list and then GIS. SST comes to Inservice.
3. Insert CD_045 card.
4. PleaseWait screen gets displayed  and it is not at all going to the next state. Application hanged at this place.

Logs are attached.



Summary:
Supervisor loops when CDM END Exchange fail while running 8 - ADD CASH

Description:

1. Set the EnableExtendedCaseettes = 1 in the registry and Keep Type 5/67 cassettes in the Dispenser and Reboot the machine
2. Start the Apps and Go to Supervisor and then 4 replenish
3. Select 8 - ADD CASH
As the END exchange is getting filed, Supervisor loops on there¿.and Doesn't come back, shows the please wait screen.

END Exchange is getting filed because CurrencyIDType5/6/7  and ValuesType5/6/7 are set to blank in the registry by default when we enable the ExtendedCasettes to 1.
If we set these values Properly and reboot the machines, END exchange will get succeed and we will not see this issue.

END exchange may get failed in other ways also, So  at that time supervisor will loop on and Doesn't come back¿( Machine has to be rebooted)

Srinivas had a look at the Author for this issue and discussed with Phil
Srinivas has provided a supervisor DLL, which worked fine.




Summary:
AANDC Hangs when Receipt Printer is fatal and Intiates a transaction which has Coupon Printing configured.

Description:
AANDC is Hanging when the Recipt printer is fatal and user intiates a transaction which has coupon printing configured at different flow points

Environment:
SST RTL 3.0 + AANDC IT 16 + Presentation Client Patches + XFS 5.00.00 + SP Patches

The Following Test Fails 3.6.1 From 5.6.11-New Promote Flowpoint.doc IT Make the Receipt Printer Fatal Before to start the Test

The Issue looks like SST RTL Fault, not releasing the control until coupon printing is completed.

I have Seen the Hang After Transaction Reply and the Logs are Attached.



Summary:
Updates for 2ST causes Presentation Client to display ActiveX bar in Internet Explorer (hosted in Presentation Client)

Description:
A DebugLog message sender has been put into the cutStyleToString script file, which causes an ActiveX control which has not been made safe for scripting, causing the ActiveX control being blocked, making internet explorer display the yellow information bar.

The call to the ActiveX control should be removed, as its not necessary.



Summary:
TAR 360974:  BEEPER DOES NOT SOUND WHEN CARD IS RETURNED ON CARD READ STATE.

Description:
BEEPER DOES NOT SOUND WHEN CARD IS RETURNED ON CARD READ STATE.




Summary:
TAR 384855 Silent Debug rollover is losing data

Description:
With Silent Debug started and configured to generate daily log files, it has been seen that when the file cuts over after midnight, data is being written to and then lost from the new file.




Summary:
TAR 384530: Length Size and Length Format are reversed in supervisor display

Description:
 
   In the supervisor display for TCP/IP configuration, the Length Size and
   Length format data is reversed so 
   entering 	size=2, length=1 
   displays as 	size=1, length=2. 
   
   The data is displayed correctly in the individual field entry screens and
   assigned correctly when entered in these fields.
   
   The string is set up in script worker ID: 27n6778dc129.




Summary:
IT16 Memory Leaks

Description:

Memory Leaks found during IT16.



Summary:
BMP file is not getting printed with Print Control Graphics Sequence on Persona Machines

Description:
XFS 5.0 with Latest Patches
AANDC IT 16
Tested on a Persona Machine
Scenario:
Copy the YESLOGO16.BMP to C:\ssds\dll
Start the Application
Send K07_00 from UNVPRNT5.txt
Send the APPC and LD download
Perform a Transaction and Send the reply YESLOGO5

there is no image printed on the receipt, There is a GPH file created in the DATA folder and the Path of the data folder is printed on the receipt.

Logs Attached



Summary:
Display Manager - When DM is top most Window (DMNoTopMost = 0) and we enter Supervisor, DM makes itself non top most. But when we enter Diagnostics - it resets to top

Description:
I recreated as follows:-
Have an XLF file with 67, 3 defines to 003.htm
DMNoTopMost = 0
Go into Supervisor - DM is now No Longer Top Most
Transfer Interface to Front Display (Very Important)
Select 7 - Diagnostics
DM is suddenly TopMost again (even if you do not see it - it shows it is)



Summary:
First cheque image printing as blackended with Transaction Reply has P01 followed by P00.

Description:
ANDC       : 93.03.00.16
XFS          : 05.00.00.
Testcase :  5.11.42
Scenario :

1)Start the Apps and Make sure CPM is fitted with it and working fine.
2)Load the CPMBase.txt and send the messages from FIT 001 to STATE 661.
3)Do an transaction and send the reply as CPM_PRNT from ANDC_MV_C0E 12.log
4)The cheque images should be print as image with Black CodeLine(P01) followed by CodeLine shown(P00).

But here it is printing cheque images with Black CodeLine(P01) TWICE on Receipt and Journal printers.



Summary:
Passbook - STATHAND - Passbook Eject before Cash Dispense during Transaction - If Passbook is Jammed there should be a Solic response to the host (not an unsolic)

Description:
The reason this should be solicited is by the fact that the cash was not presented due to the passbook jam. The host needs to know to reverse this transaction and this typically only done on receipt of a solicited status message.
This is similar to the case of a card before cash transaction where the card eject results in a jam and hence the cash is purged.
In ADI (2.6) the Record.cpp had code in it for reporting this  solicited since the error occurred during Tx and not in Close. However in the migration to 3.3 this functionality seems to have been missed. I have attached the ADI record.cpp : See iNDCStatusMessageThread::Run() and lines of code starting from //Check For Passbook Errors



Summary:
TAR 388132: :  AA-NDC : host disconnecting in Close State before MsgOnCP timer expires

Description:
   Customer : US PS
   
   Priority :
   Low priority agreed with US PS. See email below. Can deliver fix after
   AA-NDC 03.03.00.
   _____________________________________________ 
   From: 	May, William J  
   Sent:	24 September 2008 14:08
   To:	Suresh, Ranjith
   Cc:	Thomas, Gordon
   Subject:	RE: RAZCX9UMR - host disconnecting in Close State in another
   scenario with fix to TAR 385803 applied
   
   Hi Ranjith,
   
   That's OK. I understand everyone is very busy right now.
   
   Thanks and Regards,
   Bill
   
   _____________________________________________ 
   From: 	Suresh, Ranjith  
   Sent:	Wednesday, September 24, 2008 5:00 AM
   To:	Thomas, Gordon; May, William J
   Subject:	RE: RAZCX9UMR - host disconnecting in Close State in another
   scenario with fix to TAR 385803 applied
   
   Hi Bill
   
   We are in a pretty tight schedule at the moment, but its unlikely we will be 
   able to manage a fix by next week, making it very unlikely that you can pick 
   it up for this patch release your working on.  We will work on this as soon
   as 3.3 is released.  If it turns out to be a show stopper do get back to us, 
   and we will repriotise our workload to satisfy you.
   
   Apologies for the inconvenience.
   
   Regards
   Ranjith
   ==============
   SW configuration :
   AA-NDC 03.02.00
   CCM VISA2 91.00.04.07 (MessageOnCP option enabled)
   ===============
   Problem Description :
   
   The problem is that with MsgOnCP enabled, when the ATM sends the CP Rdy 9
   completion message and host does not sends any message in response, when the 
   ATM goes through the close state it disconnects without waiting for the
   MsgOnCP timer to expire. With the 3.00.01-based version, the line remains
   connected after going through the close state, until the MsgOnCP timer
   expires.
   
   "Bad" (with AA-NDC 03.02.00) and for comparison purposes "Good" (with AA-NDC 
   03.00.01) PD traces have been supplied that show the issue
   
   PD Trace analysis as follows :-
   
   "Bad trace" - AA-NDC 03.02.00
   Line 3216 - Transaction Request (10:38:34)
   Line 4442 - Transaction Reply (Function B - Parallel dispense and print and
   card eject) (10:38:50)
   Line 4559 - Ready9 (10:39:01)
   Line 4571 - CPReady9 (10:39:02)
   Line 4659 - Close State exit (10:39:02)
   Line 4695 - Visa2CommsLink - TransactionEnd (10:39:02)
   Line 4759 - Visa2DataLink - Disconnect (10:39:11)
   Line 4761 - HayesModem - Disconnect (10:39:11)
   Line 5149 - Dialup - MessageOnCP Timer Expired or Disconnection (10:39:13)
   
   "Good trace" - AA-NDC 03.00.01
   Line 3064 - Transaction Request (15:34:10)
   Line 4295 - Transaction Reply (Function B - Parallel dispense and print and
   card eject) (15:34:26)
   Line 4447 - Ready9 (15:34:36)
   Line 4460 - CPReady9 (15:34:36)
   Line 4601 - Visa2CommsLink - TransactionEnd (15:34:37)
   Line 4635 - Close State exit (15:34:37)
   Line 4746 - Dialup - MessageOnCP Timer Expired or Disconnection (15:35:07)
   Line 4760 - Visa2DataLink - Disconnect (15:35:07)
   Line 4762 - HayesModem - Disconnect (15:35:07)




Summary:
TAR 387991: Optional data fields are padded, contain zeros and fields A,B & T not sent

Description:
Customer has been testing the Optional Data Fields TAR fix (387348) and has
   encountered new issues in AA-NDC.  
   
   The issues are :-
   
   1. In AA-NDC the fields are set to fixed lengths. AA-NDC is padding the
   fields with spaces.  Whereas, NDC+ does not pad any of these fields.  As a
   result of the additional spaces, this generates a transaction request which
   is approx. 1170 characters in length.  Whereas, similar message in NDC+
   would have been approx. 237 characters
   
   2. In AA-NDC the fields contain zero's i.e. D0, whereas in NDC+ there are no 
   zero's
   
   3. In AA-NDC the fields A, B & T are not sent whereas in NDC+ these fields
   are sent




Summary:
TAR 387838 - Incorrect card capture bin status reported on exit from suspend

Description:
After a card capture bin overfill condition was reached, the card reader
entered suspend mode (due to a card jam). Upon exit from Suspend, a
unsolicited message was reported to the host and this advised that there was 
no longer an overfill condition on the card reader which was incorrect as
the card reader capture bin had not been emptied and the platform was still
reporting retainbinfull. 
AA-NDC reported an incorrect capture bin status. 

Messageout log :- 
16:08:18 # 38 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]3[Unicode-x1C]130B020839[Unicode-x1C]4] - entry to suspend on jam - 
bin full 
16:13:19 # 39 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]3[Unicode-x1C]1305002839[Unicode-x1C]1] - exit from suspend - no
overfill? 

OOXFS :- 
ApplicationCore 23/09/2008 16:13:19.234 mMVDeviceImp - Received STATUS 
fwDevice = 6 (WFS_CDM_CASHUNITINVALID) 
fwMedia = 2 (WFS_IDC_MEDIANOTPRESENT) 
fwRetainBin = 3 (WFS_IDC_RETAINBINFULL) 
fwSecurity = 1 (WFS_IDC_SECNOTSUPP) 
usCards = 10 
fwChipPower = 5 (WFS_IDC_CHIPNOCARD) 
lpszExtra = <NULL> 

XFS trace :- 
(Date)23.09.2008 (Time)16:13.20,328 
XFS IDC Service Provider, XFS-Framework 
<FREE>Worker hService: 42 (0x0000002a), RequestId: 1262 (0x000004ee)</FREE> 
<F>WFSResultData</F><P> 
<N>statusPtr</N> 
<PTR>78286780</PTR></P><P> 
<N>statusPtr->fwDevice</N> <UI2>0</UI2></P><P> 
<N>statusPtr->fwMedia</N> <UI2>2</UI2></P><P> 
<N>statusPtr->fwRetainBin</N> <UI2>3</UI2></P><P> 

The issue could be recreated as follows :- 
- Enter Supervisor and Clear Cards 
- Perform 10 transactions with the transaction reply set to capture the
card 
- After 10th transaction, the card capture bin full is reported on the EOP 
- Hold card at throat to invoke Suspend 
- 1st Unsolic advising of suspend reported by application 
- Remove card after all card reader retries stop 
- After 5 minutes, 2nd unsolic is generated with incorrect card capture bin
status 

Card Reader settings :- 
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR
Features)\RS232IMCRW\Operational Parameters] 
"ENHANCED SHUTTER SECURITY"=dword:00000001 
"JAMMED THROAT CARD RETURN"=dword:00000001 
"INTERNAL JAMMED CARD RETURN"=dword:00000001 
"CONFIGURE ECD"=dword:00000001 

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR
Features)\SdcMotorisedCardReaderWriter\Operational Parameters] 
"ENHANCED SHUTTER SECURITY"=dword:00000001 
"JAMMED THROAT CARD RETURN"=dword:00000001 
"INTERNAL JAMMED CARD RETURN"=dword:00000001 
"CONFIGURE ECD"=dword:00000001 

LFCC 



Summary:
TAR 387682 - AA-NDC : during deposit not sending Fatal msg when goes from Suspend to Fatal

Description:
Issue can be recreated as follows :- 

Hold onto an envelope to prevent it being deposited, and the device goes
into Suspend, and when the Suspend times out keep a hold of the envelope to
prevent in being deposited and the device goes Fatal (see following notes)
:- 

1) On Suspend, AA-NDC sent Unsolic message (Suspend) to host. 
2) Wait until device Suspend T/O (2 mins) and hold onto envelope to prevent
deposit. 
3) Device goes fatal but AA-NDC does not send an Unsolic message (Fatal) to
host. (However device Fatal displayed on rear). 
4) Wait 5 mins for AA-NDC to timeout from Suspend and it goes In-Service. 
5) Attempt to perform a transaction on Fatal device and Unsolic message
(Fatal) sent to host. 

The XFStrace shows the application got an event, and could have acted upon
that event (to send a Fatal message to the host) but did not. 

If a Fatal message was sent to the host immediately the device goes Fatal
then the host could act upon that and not offer deposits, which would be a
solution. 

If you compare how other devices, such as the Card Reader, work in the same
scenario then they do immediately send an Unsolicited Fatal message to the
host so the Depository is inconsistent in the way it is behaving. 



Summary:
TAR 387454 - Hang in Customisation Layer when message reflected in Virtual Controller

Description:
If the VC exit processing is used to intercept a Transaction Request and return a transaction Reply to the terminal, the system will hang after a few 
interations. When the hang occurs, the message is reflected and seen in "MessageIn". It is logged by the Application Core in Debug, but the
acknowledgement from the Customisation Layer is not seen.



Summary:
Data is not cleared in FUNC menu when we press FDK F on GOP/EOP

Description:
Build:
XFS 5.0 with latest Patches
AANDC IT 16

Scenario:
1. Start the Apps and Load APPC, LD (Send LD5085NT)
2. Send OOS, then C09 and then GIS
3. Go to Supervisor
4. Go to replenish menu and Select 15 - Supervisor Trans , Funciton done is displayed.
5. Exit from Supervisor.
6. FUNC is Displayed on GOP/EOP/Main Monitor, Select 0 , Prompt for Cash buffer is shown
7. Enter some data ( below 8 Numbers) and Press FDK F, Its taking as enter here and asking for the Buffer values, FDK D should be working as Enter and FDK F should be working as Clear , but here both the Keys are taken as enter only.
in rest of the Supervisor menus, this Functionality works fine.( Pressing FDK D works as Enter and Pressing FDK F works as Clear)





Summary:
Interface of ssdsNDCCUST.DLL changed and broke C-Exits binary compatibility

Description:
In build 15, the ordinals on the ssdsNDCCUST.DLL are different when compared with 3.2 release. The impact of this that all C-Exits that use e.g the DisplayScreen funtion exported by ssdsNDCCUST.DLL would have to be re-built. Consequently, Advance NDC would not support released EMV Exits that do use DisplayScreen().




Summary:
AssociatedKeyboard - Remove the Default Keyboard Definition for Timeout in Reservd.def file

Description:
Reserved.def file defined a keyboard definition which is not required.  



Summary:
Issue with Enabling and Disabling promote using supervisor

Description:
Once the Promote is disabled by the Supervisor there is no option in supervisor to enable the promote. 

Steps to fallow:
1.Install Promote and load any campaign
2. Start Application
3. Do one transaction - Campaign shows some screens.
4. Enter in to Supervisor - Select AccessMenu - ( 15 & 20 Promote related functions can be seen in the Access menu)
5. Select Option 20 and Disable promote by entering 01.
6. Exit Supervisor and do one transaction - AANDC screens gets displayed no promote screens.
7. Enter supervisor - Select Access menu - There are no 15 & 20 options related to promote.
   there should be option 20 to disable and enable the Promote.

BuildDetails:
	AANDC IT 15.
	XFS 5.0
	Promote SST RTL 3.1

Logs are attached.




Summary:
Include Data Manipulation 02.01.06 and ECB6 Database Support 01.01.00 in the AANDC 3.3 aggregate

Description:
RFC is accepted with one clarification provided by Javier that the ECB6 Database Support Overview 01.00.00 is not required.  RFC is therefore amended to include the following two components 
- Data Manipulation 02.01.06
- ECB6 Database Support 01.01.00



Summary:
(Forms Printing) Double Width and Double Height character controls missed from forms processing.

Description:

Thermal controls for double width and double height characters missed from forms generation.  Forms processing needs updated to accommodate these controls.



Summary:
DualFeedHopperUsage for Dual Roll Receipt should be set to AutoAsSingleSupply in NCR_SPs.reg file

Description:
The Device Primitive default value for the hopper configuration is set to "Auto".
According to the SP help, both paper supplies will be reported in this case since they are not logically tied together (for CEN 3 and above sessions. CEN 2 will only report 1 paper supply)
 
(from the online help)
Manual - The status for both WFS_PTR_SUPPLYUPPER and WFS_PTR_SUPPLYLOWER is reported.
Auto - The status for both WFS_PTR_SUPPLYUPPER and WFS_PTR_SUPPLYLOWER is reported.
AutoAsSingleSupply - The status of WFS_PTR_SUPPLYUPPER only is reported but this will be the combined status of both hoppers as though both hoppers are a single supply of paper.
 



Summary:
Testing Voice Guidance with SMS enabled is not voicing the alpha keys in information entry state 

Description:
Related to Test Case 5.27 in VG , when SMS option is enabled then in information entry state pressing the alpha charactersfor SMS entry is not voicing the characters.If we are appending numerics after alpha characters in the SMS string as the last entry then voicing the complete string of SMS.



Summary:
SST is rebooting when the AANDC is running with Promote SST RTL3.0

Description:
SST is rebooting after imeediate receiving of GIS message.

Steps to follow:
1. Install Promote 3.0
2.Start AANDC application - Application is up and 002 screen gets displayed
3.Send the screens & states & FITs - Application receives all messages and Ready9 sends to host.
4. Send GIS - Application is crashing and then SST is rebooting

Eventviewer log file is attached.

Build Details:
	AANDC IT 15
	XFS 5.0
	Promote 3.0
	PresentationClient Version:92.08.00.5



Summary:
Not prompted for reboot after reg change with Func 39 GBxxConfig function

Description:
On a non-ECB6 enabled GBRU. The CatMode tag was set to 1 and other ECB6 reg settings were put into XML. Logs and XML attached. After running GBXX CONFIG function is should have prompted for a reboot but there was no prompt. Eventually did a reboot by hand. 

Even after reboot the 2nd pass at Config may have been iffy. No logs for this part, but I think it failed and *.bin and *.prp files needed to be deleted. This should be checked once as part of this GRIT. Seen by John and myself while testing something else, so could not investigate it fully at the time.



Summary:
Receipt unsol shows fitness as 0 when receipt went to fatal ( print head open)

Description:
Tested on a USB printer with XFS 5.0 and latest XFS patches ( USB80mm 92010101) and AANDC IT 14

I have seen the below issue While testing the Below test case from 5.9.2 Media Control.doc.
3.9.1.1 Verify R00 Processing after Printer Failure

 ( I am not writing the scenario which is there in the test spec as it can also be re created very easily with the below scenario)

1. Start the Apps and load APPC, LD
2. Open the Print Head.
3. Perform a Transaction by sending the NXT_PRNT ( edit the printer flag to 2 )
4. There is a unsol reported to host, which has a fitness of 0.
5. if send the GET FIT command , receipt Printer is shown as Fatal ( 4).

Logs are attached.

Expected results are :  unsol should be G1 ( we are getting G0  which mean print operations is OK where as it has not printed anything) and fitnees in the unsol should be 4 ( we are getting 0 as of now)




Summary:
Ensure PresentationClient Hook is optimised when ContentProvider is not installed

Description:
Current Presentation Client hook always try to create interface to ProsentationClient eventhough content provider is not instaled. Unnecessary code execute, which leaked as well.



Summary:
Fix Memory Leaks found in NDCDisplayHook of Presentation Client

Description:
Leaks found in APPC/LD download with CBDP reply - Idle loop 



Summary:
severity of the card reader set to 2 after exiting from supervisor with card reader in fatal

Description:
build:
XFS 5.0
AANDC 93.03.00.15

Scenario:
1. Start the Apps
2. Load APPC and LD, insert card and press cancel on the key board, Hold the card reader belt so that it cant move.Fatal unsol sent to host.
3. go to supervisor and exit from there.
4. there is a unsol sent to host but the severity is set to 2 instead of 4.

there are 2 issues here.
1. there are 4 unsols reported host when we made the card reader fatal ( we use to get only 2 unsol with the previosu build, this is what expected)
2. when we exit from supervisor , fitness in the unsol is set to 2 insted of 4. ( this use to work fine with the previous build)

I will attach the logs



Summary:
There is a '']'' shown on GOP/EOP between ''82 GBNA.INI CONFIG'' and ''99 MORE'' options in 5-Configure menu

Description:
Build:
AANDC 93.03.00.15

Scenario:
1. Start the apps, go to supervisor
2. go to 5 Configure menu
3. Press 99 more option.
4. if we look between options ''82 GBNA.INI CONFIG'' and ''99 MORE'' , there is '']'' shown.

I had a look at the reserve.def file and found the reason, reserve.def has a TAB ( instead of spaces) between   ''82 GBNA.INI CONFIG'' and ''99 MORE''
as below
' 82 GBNA.INI CONFIG	99 MORE'
for keeping the spaces between these two, we have used the TAB function on the Keyboard,instead of 4 Spaces.

reserve.def file need to be updated.



Summary:
Issue with INITSTMT on USBStatementPrinter

Description:
When the INITSTMT is performed it is ejecting the statement while it is trying to retract I am not allowing it to retract( by holding the statement). In this case it has to show the "Printer Error" message but it is showing the "Printer Initialised" message not the "PrinterError".
But with OPTR it is working fine. 
Testcase no : 5.7.24.3.1.7.2

BuildDetails:
AANDC IT14
XFS 5.0

Logs are attached.



Summary:
Application Crash at SoD when trying to access array out of bounds in TI Journalling script host

Description:
Reported by Bindu. See attached logs.

Issue is just after reading physical cassette name it accesses the array when the variable may not have been initialised.

On brief investigation it looks like that line of code should be moved into above If statement.



Summary:
Passbook: Incorrect message to host after passbook capture

Description:
UK PS raised the fact that an incorrect message is sent to host after passbook capture.
Checked this with Zubi and he confirmed.

Test description:
"When the passbook is captured an unsolicited message will be sent to inform host of the capture. "

Looks like we are not sending the mdata info in the message (please note that mstatus is '0' and this is correct).
In more details we send:
12[Unicode-x1C]000000000[Unicode-x1C][Unicode-x1C]X0[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]01100
instead should be sent:
12[Unicode-x1C]000000000[Unicode-x1C][Unicode-x1C]X0[Unicode-x1C]0[Unicode-x1C]001400000000004000000200[Unicode-x1C]01100




Summary:
Close state 'Receipt delivered' screen incorrect

Description:
Receipt is ejected at correct time but screen shows 'no receipt'. - where no receipt ejected in close screen is 'take receipt'
try ANDC_COE_MV download or COPMbase.

Seemed to observe on ATM yesterday - confirmed with Build 15 on simulator.



Summary:
Signature for 2 suspect notes not logged in ECB6Log XML file,when 3 suspect notes and 3 counterfeit notes are Inserted

Description:
Observed while running test 5.7.1.1.2.2.2.5.3.2 from CIC ITS on BNA2
Steps:
1.Insert 2 counterfeit,2 suspect ,4 valid notes.
2.In the confirmation screen press "Add More"
3.Insert 1 counterfeit and 1 suspect note
4.press deposit followed by BNA_Dep
5.Check ECB6 log in C:\Documents and Settings\All Users\Application Data\NCR APTRA\Electronic Journal Service\ECB6Log
6.It has logged signature for 3 counterfeit notes ,but only 1 suspect note(2 signatures are missing).
Note :ECB Refund Category 3 Handling is 0





Summary:
Potential Memory Overwrite in Status Handler

Description:

I found an issue while debugging another problem - there is a potential memory overwrite if invalid status information is found.  I would like this tightened up:

	unsigned mstatusI = mstatus[1] >= 'A' ? mstatus[1] - 'A' + 10 : mstatus[1] - '0';
	mstatusI += (mstatus[0] >= 'A' ? mstatus[0] - 'A' + 10 : mstatus[0] - '0') * 16;

	sprintf(mstatus, "%02d", mstatusI);

to:

	unsigned char mstatusI = mstatus[1] >= 'A' ? mstatus[1] - 'A' + 10 : mstatus[1] - '0';
	mstatusI += (mstatus[0] >= 'A' ? mstatus[0] - 'A' + 10 : mstatus[0] - '0') * 16;

	sprintf_s(mstatus, 3, "%02d", mstatusI);



Summary:
CPM Deposit with VG enabled-When i pressed  1on pinpad  to select deposit Cheque option the orientation is going to Amount entry state.

Description:
Test no:"5.6.7a.5.9.9-DESCRIPTION: CPM Deposit Function ID ':' functions properly with VG. This tests a good CPM deposit with voice guidance enabled and voice guided session selected" in log.
1. start the VG transaction, proceed untill Card inseration screen.
2. After inserting the card, Screen with two options 1.Cheque deposit 2.Amount entry will be dispalyed.
3.You can hear the voice saying press 1 for cheque deposit press 2 to amount entry.
4.Issue 1:when i pressed 1 on pinpad we suppose to get cheque deposit screen but here we are getting amount entry screen.
5.Issue 2: if i press 2  it is not going to amount entry state.

These two functionalities are working properly if use touch screen or FDK to select the options.



Summary:
Add documentation to IPs about BNAx limitation which results in counts not updated on CIM SP.

Description:
See this grit's parent for a complete explanation. 


This is a device limitation for which there are many customer knowledge articles with FGSC (ID# KAPC10000F2D56, EU1000D32AE, S11000E3CCE etc.) some of which are based on AANDC customer calls. Some extracts follow and we cannot change this behaviour:


Question:
 What counts are reported for the BNA after a jam occurs when there are notes in the Escrow?
Answer:
In general, the counts for a deposit transaction are updated when the transaction completes. This means that the counts are not updated for a transaction that fails due to an error while the transaction is in progress. The reason for this is that there is no way to identify exactly where notes were left after a fault.
If notes were being entered into the module when the error occurred, there is no count reported  of how many, if any, notes have reached the Escrow or of how many notes are in the transport.
If notes were being encashed, there is no indication of how many notes had been encashed, how many notes were still in the Escrow and how many notes were in the transport.
For this reason, no counts are added and manual reconciliation must be performed,

Tech Note:
It is not possible to accurately count the number of notes and denominations that have passed the recognition unit after a jam. The BNA enters an error state at this point and the counts are not accurate at all.

Additional Information/Comments:
Statement from product management on this scenario, "These issues are concerned with the accurate identification and counts of notes after a jam scenario. The position that was given is that this is something we have to live with. It is the way the module has been designed and we don't foresee any change."
Tech Note:
A Force Encash will try to clear all notes to the bin therefore the counters are invalid as notes may not yet have been verified and counted to escrow.
In the particular situation seen a problem was encountered during a BNA transaction. The application followed normal error recovery process by issuing an Force Refund command. However this command failed, so a Force Encash was issued.
At this point it is not possible to tell accurately the amount of notes and denominations that were sent to the cash bin.

This is not the recommended way to handle this error. When the Force Refund fails the application should NOT issue a Force Encash. 
Instead at this point the application should put the BNA out of service. Then manual intervention would be required to collect the notes in the BNA and re-balance as necessary.
This would stop any of the notes involved in part of the 'problem' transaction being sent to the bin.



Summary:
Build PDBs and archive them at the time of release builds for use with Appsight

Description:
Appsight requires the PDBs to be built which will eventually get stored in a symbol server in the future.
This is required to get the full benefits of appsight.



Summary:
Statement Printing - Character 7F does not print unless followed by another character

Description:
USB Statement printing tests

For font identifiers C, D and M (Alpha 1, 2 & 4 condensed fonts), the character 7F does not print unless it is followed by some other text. (Note char 7E not tested on it's own but problem may exist with this char also).



Summary:
SMS style entry should support entering a <space> character

Description:
This change is dependent on first addressing GR1T 407970.



Summary:
(Forms) : There is no receipt delivered if the Printer data has a image just before 24 lines and Printer data exceeds the 49 lines

Description:
Build:
XFS 5.0 Latest Patches
AANDC 93.03.00.14

Scenario:
1. Start the Apps and Use the APPC and LD messaged.
2. Set the Roll width, No Of Columns to 40 and 1 in supervisor.
3. Send the K07_00 ( which will set the path \ssds\dll), Copy the Attached the Logo2.BMP to C:\SSDS\DLL
4. Send the K09_00A.
5. Insert Card and Perform a transaction and send the PRINTIMG ( in the Attached file)
6. There is no receipt Delivered.

I could guess the Cause: after 20th line in the PRINTIMG message, I have tried to print the BMP file which has a Height of 7, because of this there is no second form file created ( it has to create one more as the we have 24 line cut) and in the same form file, line count was more than 49 lines, it has thrown a error saying Form invalid ( in the event Viewer), as media is set to only 49 Maximum Height.





Summary:
(Forms Printing) - Font Identifier S & T (Statement Alpha 6) Missing From Registry Configuration

Description:
Font Identifier S & T is missing from the UniversalPrinters.reg file.

Condensed Size Alpha 6 ('S')
12 cpi Alpha 6 ('T') 

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\PRINTING\Statement Forms\Print Data\Font Identifiers\S]
@="Condensed Alphanumeric 6"
"Font Size"=dword:00000003
"Font Name"="NDC Alphanumeric 6"
"Arabic Font Name"="NDC Arabic 6"

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\PRINTING\Statement Forms\Print Data\Font Identifiers\T]
@="12 cpi Alphanumeric 6"
"Font Size"=dword:00000001
"Font Name"="NDC Alphanumeric 6"
"Arabic Font Name"="NDC Arabic 6"
"CPI"="12"



Summary:
2ST - Back side print will remain on the selected side for all prints until it is reverted by next host escape sequence 

Description:
The print will remain on the back until a front control sequence is received. This means the  print will remain on the selected side for all prints until it is reverted by ESC 'q' x.




Summary:
Registry entries missing on Installation Testing

Description:
The following are the registry entries missing when checked immediately after installation:

Path: HKLM\SOFTWARE\NCR\Advance NDC\BNA
ConfirmScreenCat2TotalString 

HKLM\SOFTWARE\NCR\Advance NDC\BNA\CashInJPTR
ReportDiagnosticData

Also, it is necessary to remove the registry entry for Native mstatus as we donot use it any more.

Path:HKLM\SOFTWARE\NCR\Advance NDC\BNA
NativeMstatus 



Summary:
APTRA Author is closed when tried to remove a new application by right clicking and selecting remove.

Description:
The steps done for this are:

Create a new application link
build the application link
right click and select remove

At this point, aptra author is closed saying "NDC XP Author has encountered a problem and needs to close. We are sorry for the inconvenience"
This happens most of the time.



Summary:
Date and time stamp not changing after building the application link for the second time

Description:
If the application links already existing are rebuilt, the date and time stamp are not changing.

For a new application link,
Buiding the new application link for the first time shows the correct date and time stamp. but if the application link is rebuilt, the date and time stamp is not being updated. 



Summary:
Font Issues - Issues seen on USB Receipt Printer using Form Printing Specifying Arabic Fonts

Description:
Various (potential) issues seen when comparing Forms printing on USB receipt printer to (non-USB) personas rawdata printing and specifiyin ARABIC fonts (Escape 3 sent). The Personas printing is assumed to be correct.

Only issue appears to be alignment of the chars and size of the chars in comparrison to the personas printing. They are very different



Summary:
Font Issues - Issues seen on USB Receipt Printer using Raw-Data Character Mapping Printing Specifying Arabic Fonts

Description:
Various (potential) issues seen when comparing Raw-data printing on USB receipt printer to (non-USB) personas printing and specifiyin ARABIC fonts (Escape 3 sent). The Personas printing is assumed to be correct. Details below specify incorrect characters using a Row,Column notation as per the IPs where rows are numbered from 2 to 7 (top to bottom) and columns are numbered 0 to F (left to right).  

1) Font Identifiers 1( Single Size Arabic 1) and > (Double Size Arabic 1) - character 60 should be blank but it is not
2) Font Identifiers J (Single Size Arabic 5), 7 (Single Size Arabic 3), L (Double Size Arabic 5) and B (Double Size Alpha 3) - character 61 looks incorrect (looks like a c with a / rather than an o with a /)
3) Font Identifiers Q (Single Size Arabic 6) and R (Double Size Arabic 6) - for character 24 dollar symbol displayed rather than a euro symbol




Summary:
when NDCSecurityCamera.xml is configured with flow point 024 and number of snapshots as 3, test camera shows camera failure

Description:
Tested with ANDC 93.03.00.14 and XFS 5.0
NDCSecurityCamera.xml is missing the default flow point 024 for test camera. If we configure 024 with more than one snap shots camera filure is shown in prompt. But pictures are taken and are present in snapshots folder. But when it is configured with number of snapshots as 1, test camera works fine and SupervisorTest.bmp is present in C drive.



Summary:
Font Issues - Issues seen on USB Receipt Printer using Raw-Data Character Mapping Printing

Description:
Various (potential) issues seen when comparing Raw-data printing on USB receipt printer to (non-USB) personas printing. The Personas printing is assumed to be correct. Details below specify incorrect characters using a Row,Column notation as per the IPs where rows are numbered from 2 to 7 (top to bottom) and columns are numbered 0 to F (left to right).

1) Font Identifiers 1( Single Size Alpha 1) and > (Double Size Alpha 1) - check characters 76 and 7B (they do not match IPs but do match personas font)
2) Font Identifiers 2 (Single Size Alpha 2) and ? (Double Size Alpha 2) - character 7A not correct (does not match IPs or personas font), character 6B does not look correct
3) Font Identifiers 7 (Single Size Alpha 3) and B (Double Size Alpha 3) - character 5A not correct (does not match IPs or personas font) and check 7D (it does not match the IPs but does match personas font)
4) Font Identifiers I (Single Size Alpha 4), J (Single Size Alpha 5), K (Double Size Alpha 4) and L (Double Size Alpha 5) - check character 7F (matches IPs but does not match personas font)
5) Font Identifiers Q (Single Size Alpha 6) and R (Double Size Alpha 6) - character 24 is displayed as a dollar rather than euro symbol




Summary:
Font Issues - Issues seen on USB Receipt Printer using Form Printing

Description:
Various (potential) issues seen when comparing Forms printing on USB receipt printer to (non-USB) personas rawdata printing. The Personas printing is assumed to be correct. Details below specify incorrect characters using a Row,Column notation as per the IPs where rows are numbered from 2 to 7 (top to bottom) and columns are numbered 0 to F (left to right).

1) Font Identifiers 1 (Single Size Alpha 1) and > (Double Size Alpha 1) - characters 7D and 7E are rotated through 90 degrees, 76 and 7B match the IPs but not the personas font 
2) Font Identifiers 7 (Single Size Alpha 3) and B  (Double Size Alpha 3)- character 20 (£) missing, 3D and 3E are rotated through 90 degrees, check 7D (it does match the manual but not the personas which just displays a block)
3) Font Identifier I (Single Size Alpha 4) and K (Double Size Alpha 4) - check 7F (it does match the manual but not the personas which just displays a block)
4) Font Identifier J (Single Size Alpha 5) and L (Double Size Alpha 5) - check 7D (it does match the manual but not the personas which just displays a block)




Summary:
Envelope Dispenser fitness shows as 3 when envelope depository went to suspend

Description:
build:
XFS 5.0 with latest patches
AANDC 93.03.00.14

Tested on a Persona Machine which has a seperate Envelope Dispenser and Depository
Scenario:
1. Load APPC and LD
2. insert card and Perform a transaction.......send the DEP_910 , Take the envelope
3. Make the depository into suspend condition ( Hold the Envelope Deposited )
4. Send the Getfit command
5. fitness shows 3 for Depository and also it shows 3 for Enveloper Dispenser even, Envelope dispenser doesnt went to suspend condition.

Logs Attached.



Summary:
Deposit Count for CPM, envelope & card capture not working

Description:
whenever we deposit the cheque , in supervisor 3-Displ Counter (under the replenish menu) not updating the deposit counter.
and in that case when you will come out from supervisor and again  will go in supervisor then it will update the Deposit counter.
because of this issue also Xml file is not generating in the Path reg value, when we clear the individual BINS.

AANDC:- 93.03.00.14	
XFS Build:- Verfied Build 5.




Summary:
Apps Crash !! When we touch the FDK A  poistion on Touch screen in Barcode State

Description:
Build:
xfs 5.0 With Latest Patches
AANDC 93.03.00.14

Athena Machine with Tocuh/ FDK

1. Start the Application
2. Use the NWCUSTOMBARCODE message file
3. Update the STATE007 message as below to set the Cancel next State(018) & Cancel FDK (001):
       150&050420018473473002001238
4.send messages from SCREEEN00 to FIT00045
5.send Messages : STATE007, SCRBAR, ENCONFIG and GIS 
6.Insert card , Barcode state is entered, touch on the FDK A position ( if its a FDK machine , use the mouse to Click at FDK A position), Apps getting Crashed....Where as it has to move on to next state ( which is 8 FDK State )...if i click on Cancel on the EPP in this state, its going to next state with out any issue.

UEH and Event logs attched.




Summary:
USB Receipt - After Reset printer prints ok but status shows media jam.

Description:
hold paper roll & perform print.
Printer is hw/error & jammed.
Do reset
Do print.
Print OK - paper delivered.
Status shows Dev OK but media Jammed.

XFS 5.0 Release build with  USB80mm 92.01.01.01


--------
ANDC desc:
Build:
XFS 5.0 with latest patches
AANDC IT 14

Athena I machine with forms configured.

Scenario:
1. Start the Applications.
2. Insert card and Perform a Transaction by sending the NXT_PRNT ( edit the printer flag to 2), Hold the Paper so that it can't move.
3. Card is ejected, Send the GET FIT , we get the Receipt Printer status as 4 which is Fatal.
4. Go to Supervisor and run the 9 INIT RCPT in replenish menu, receipt is delivered and it shows¿..INITIALIZATION FAILURE though the receipt has given.
5. if I look at the device status with the Wosatool, There was no error ( Device was online)
6. fault Display shows the Receipt FATAL Media Jammed message.
7. I can do a transaction now by sending the NXT_PRNT ( edit the printer flag to 2), receipt is delivered.
8. If I send the GET FIT now, receipt printer status is set to 4 still and Fault display shows the Media Jammed Message , though its printing the receipt properly.

logs attached.



Summary:
AsyncEvaluate attribute incorrectly set potentially causing wrong behaviour

Description:
Note that one of the wrong behaviours is a crash with Devpartner instrumented debug build on one of the testers in director 2c15p2. This is how I got to search for these

All Customisation Layer
1) Tester 6c13p2 - testing for beep when Card is ejected. The current AsyncEvaluate=TRUE probably means that the beep will start late (delayed by the threadstart).

2) Tester 5c13p2
     Presented cash beep - similar issue as 1)

3) Tester 8s14gs20
    Night Safe depositor beep - similar issue as 1)

3) Director 3c616p5 - two testers with AsyncEvaluate set to TRUE in one workgroup. It could be undeterministic which will signal (theoritically). Here conditions are mutually exlusive so it just means a delay.

4) Director 2c15p2 - contains 8 testers, all with AsyncEvaluate set to TRUE - problem similar to 3)  - here Devpartner instrumented code crashed. Perhaps some threads (which did not managed to signal) are killed prematurely or something.

5) Tester  8s14gs20
   Deep for deposit - similar issue as 1)

6) Director2n150m3
  Contains assigner 5n150m3 with AsyncEval=TRUE, but passthru 36s36gs20 runs is parallel ... so this will not work as intended I guess.




Summary:
Fix Memory Leaks found in IT14

Description:
Leaks found in APPC/LD download with CBDP reply.



Summary:
If GBRU shutter is jammed open during the suspend clear, device goes fatal but no unsol is sent at that time

Description:
Subsequently, when GBRU error recovery is attempted it fails immediately. A fatal unsol is sent at this point. An unsol should have been sent after failed suspend clear.

As confirmed by Phil - To match other devices the fatal unsolic should be sent at the point it goes fatal so this looks like a separate issue that should have a GRIT raised for it.



Summary:
correct unsole message is not coming in DPM

Description:
correct Unsole message is not coming  in the following scenario while doing the testing with DPM.

Case 1 :- when we are inserting unacceptable cheque then it is capturing the cheque when we don't take in reject state.
               In this case Unsol message q1 and q7 reported as fatal.while it was capturing as a good way(no fatal) followed by q2E unsol message

Case 2:- when it capture the unacceptable status cheque and at the same time we open the transpor.
              In this case q2c fatal message is coming instead of q5c.

Case 3: - when field 3 in w state is.in this case if we don't take the cheque in reject state cheque is still on the shutter.
              Unsole message is coming with diffrenet Bin sensor  like 12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]q1 [Unicode-x1C]00000000[Unicode-x1C]00[Unicode-x1C]1100111. ( its reporitng 3 bins though we have only 1 bin for ST1 DPM)

AANDC Version :- 93.03.00.14
XFS version:- Build 5 verfied	

So in most of the cases we found that Unsole message is not coming as a correct way.



Summary:
NDCCommsConnection ID created/destroyed unnecessarily

Description:
While looking for memory leaks, I found this code in ndcsend.cpp in the cAction == REPLY_USER_MSG. This code is creating and destroying a mNDCConnectionID worker each time. 
This is probably not required as the worker has the mNDCConnectionID in its workgroup.
The constructor/destructor of the mNDCConnectionID seems quite costly - so in any case should create only once.

Similar code in SendMessageFromHost - should also create the worker only once.






Summary:
No unsol being sent when GBRU shutter is jammed open after taking the cash

Description:
Bindu checked the code and noticed the following.

in STATRESP project:
// Cash dispenser commands
const char PRESENT               = 12;
const char CASH_TAKEN            = 0;
const char RETRACT               = 15;
const char CLEAR                 = 1;
const char STACK                 = 11;
const char RETURN_CASSETTE_STATUS = 4;
const char DISPENSE               = 2;
const char CHECK_IF_BILLS_LEFT   = 0x15; // TAR 250863
const char CASH_DEPOSIT            = 0x7F; // G381127 (RECYCLING) to handle cassette re-enabling
const char RESET               = 0;        // GR1T 386867

CASH_TAKEN and RESET have been assigned the same value and I think the following code in mCashHandler.cpp is causing the issue (not allowing the suspend unsol to be sent).

else if (Severity[0]=='3' || DispDevStatus == CASH_ERR_RETRACT  ||
            (Error == TRUE && (TheCommand == RETRACT || TheCommand == RESET ))) //Failed retract/reset
      {
            // From ClearSuspend only want to log fatal unsoliciteds
            if( TheCommand == RESET && Severity[0] != '4')
                  return FALSE;

And in statcust, we use the value 0 for the ADI command if no command mapping was found.

if (cmdWrap && ADI_NOTMAPPED_CMD == (aADICommand = MapCommand(cmdWrap)))
        aADICommand = 0; // Not mapped, then use the good neutral

So, the issue here is that the suspend unsol after the present command is having the command code as 0, but this command is being treated as Reset in the statresp code and the record is getting deleted as the severity is not fatal (according to the above code). Not sure why we have used 0 to indicate both good neutral command code and Reset.




Summary:
workerID(10n10364dc130 ) signal is not consumed , so VG is not getting Enabled 

Description:
In StateCardRead state and in idle loop the signal generated by tester worker having worker ID(10n10364dc130) is not getting consumed. Due to this VG is not getting enabled.



Summary:
In deposit transaction time out, select "No" to the "Do you want more time" question the screen does not change back to the "Please Wait" screen.This happens with VG and non-VG transaction.

Description:
If you let a deposit transaction timeout, then select "No" to the "Do you want more time" question the screen does not change back to the "Please Wait" screen. It stays on the "Do you want more time" screen. However the ATM has sent the cancelled transaction status back to the host and is waiting for another tran reply. Found this issue performing test case 5.9.1. This happens with Night deposit transactions as well. I also tried the with a non-vg transaction (with vg enabled). The problem still occurred



Summary:
Supervisor C-Exits do not work as expected in ANDC 3.3

Description:
- Jiri reported that his supervisor exits work, but no key presses are echoed. However, the final keyboard event is received Ok. The same code works and echoes keypresses on the previous release. Jiri tested only on the front interface.
- Our ExitSamples.dll, which has a supervisor exit menu, does not work either
    * on front, keys are not echoed and the PRINT RECEIPT function crashed
    * on EOP, the system hangs in a loop - the screen is re-displayed every 0.5s and no keypress is accepted.
- on the simulator, our ExitSamples seem to work Ok




Summary:
StateCardRead (author proj) does not build due to incorrect workflow

Description:
2 workflows exist from worker StartKeyboardEntry (4n9859dc130) but the worker itself no longer exists. Looks like this worker has been replaced by worker Start KBD (Volume) so likely these signals can be associated with this worker (needs confirmed however)



Summary:
Test print in INIT RECPT & INIT STMT should print a second test print on the rear of the paper for 2ST

Description:
Currently test print will be on front side and receipt/statement will be ejected. We have not updated any code related to test printing on back side of receipt/statement. It behaves same as non 2ST printer if we select INIT RECT or INIT STMT.
During our 2ST development we talked about printing on back side of receipt/statement for INIT RECT/INIT STMT.




Summary:
TAR 387991: Optional data fields are padded, contain zeros and fields A,B & T not sent

Description:
Customer has been testing the Optional Data Fields TAR fix (387348) and has
   encountered new issues in AA-NDC.  
   
   The issues are :-
   
   1. In AA-NDC the fields are set to fixed lengths. AA-NDC is padding the
   fields with spaces.  Whereas, NDC+ does not pad any of these fields.  As a
   result of the additional spaces, this generates a transaction request which
   is approx. 1170 characters in length.  Whereas, similar message in NDC+
   would have been approx. 237 characters
   
   2. In AA-NDC the fields contain zero's i.e. D0, whereas in NDC+ there are no 
   zero's
   
   3. In AA-NDC the fields A, B & T are not sent whereas in NDC+ these fields
   are sent




Summary:
Forms Printing: Improve the spacing of consecutive journal prints

Description:
There is an improvement over the default operational parameters of the Printer feature that makes line spacing between consecutive prints look 'nicer'

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\Usb80mmThermalPrinters\Operational Parameters\JPNT-01-UsbThermal\CONFIG]
; Make Journal Line Spacing Smaller
"Length"=dword:00000001
"FormFeedOption"="eBlackMark_OffFixedLen"

[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\Usb80mmThermalPrinters\Operational Parameters\RPNT-01-UsbThermal\CONFIG]
; Set Top Of Form Closer To Top Of Receipt
"SetLine1Position"=dword:00000007
"SetSide2Line1Position"=dword:0000001c



Summary:
GBNA: Cat2 notes are included in the Escrow counts.

Description:
When Cat2 notes are inserted, notes retained Screen is not shown. Instead, they are included as Escrow counts. The same is the case with the journal message, which displays Cat2 notes under ESC section. Seen only on GBNA.




Summary:
Handle change to date format in i38 screen

Description:
Need to swap Day and Month directors in Create Sigs function. The i38 screen has been modified to use the American date system.



Summary:
TAR 386916: Amount Entry details should reflect what happens if length exceeded

Description:
See TAR



Summary:
TAR 385943: Next state for Cardless transaction  needs to be a registry string

Description:
See TAR



Summary:
TAR 385812: Documentation - Extended Add Cash function not documented

Description:
See TAR



Summary:
TAR 366826: Control codes being counted as print data for line length

Description:
See TAR for details.



Summary:
TAR 385678: AA-NDC: Offline Timer not allowing online mode when set to < 5 seconds

Description:
See TAR



Summary:
TAR 382496: hang at the end of the close state when sending a GOS during a transaction

Description:
See TAR



Summary:
TAR 381677: Restart modes 2 and 3: aandc being wrongly reloaded on a con ID of 0

Description:
See TAR



Summary:
TAR 387142: AA-NDC : InitEJ failing when running InitByBatch.bat file

Description:
See TAR



Summary:
TAR 385825: Cust Layer merror and reboot after invalid MCN sent followed by GIS

Description:
See TAR



Summary:
USB Statement Printer - Only one statement is printed with last 8 lines when reply contains 100 lines and Statement Max length is set to 92.

Description:
USB Statement Printer - Only one statement is printed with last 8 lines when reply contains 100 lines and Statement Max length is set to 92.

Build:
XFS 05.00
ANDC 03.03.00.13

Reference:
Test 3.4.3 from `5.6.12-Open Statement Printer Support.doc¿ 

Scenario:
1.) Start Applications.
2.) Switch the mode switch and enter supervisor.
3.) From the configure menu select option 45 MAX STATEMENT LENGTH and prompted enter 92 as the new statement length.
4.)Exit supervisor and perform a statement print transaction and send the transaction reply NINETYTH from STATEMENT.txt message file.

Failure:
Only one statement presented with one line. i.e. last line.

5.) Perform a statement and print transaction and send the transaction reply ONEHUNDR.

Failure:
Only one receipt is printed with 8 lines.i.e last 8 line.

Logs and Form files are attached.




Summary:
TAR 380023 - incorrect handeling of notes jammed in the BNA

Description:
If notes are jammed in the BNA after carrying out the following transaction
flow Insert card, enter PIN, select Cash Deposit: 
Step 1 : Inserted 3 bills one is rejected 
Step 2 : Confirmation Screen ( stats : 2 notes ) 
Step 3 : Select Add Notes 
Step 4: Insert notes and create JAM- I created the JAM by inserting a bulk
of paper (notes size) bundled with adhesive tape - this will create a JAM
during leafing. 
Step 5: Confirmation screen is displayed notifying about the 2 notes (same
as Step 2) 

The logs show the device returns a mstatus 26 with a severity of 2 warning. 
This is as far as the BNA will return unless the severity is escalated by
the application. 
In discussions with Mike Spafford and Stephen Whitmore it was decided that
AA-NDC should always report a failure if a hardware error is received while
notes are being deposited, encashed or refunded. 
As in this case the card holder gets the confirmation screen indicating only 
the first cash entered has been registered with no indication as to what has 
happened to the second cash entered.



Summary:
Mode Change Hooks - First hook reports incorrect next mode

Description:
Problem only with first hook call, which should e.g. be (Initialisation,OutOfService) - but is (Initialisation,Offline)
Issue is with the current authoring, which sets mode to Offline or Supervisor eventhough it goes to OOS first



Summary:
Forms: Ensure that form-based prints can run in parallel

Description:
We want to avoid a unsynchronised situation
1) a worker starts a print - this generates a set of forms that are printed one after the other
2) another worker starts a different print - this overwrites the forms that were created by the first worker
The currrent code seems to assign form number 1 to the first page of every print job. Stephen suggested that perhaps we can keep incrementing this number for different prints and this will enable us to run two prints in parallel.



Summary:
Dev & Sim Installation -- Nothing is displayed on the app screen when ANDC started and Download Sent

Description:
Installed IT13 on a clean PC (no previous version of ANDC had been installed).  When ApplicationCore was started, a blank blue screen was displayed (ie no 002 or 003).  Sending a download was successful but still nothing displayed on the screen.

Discussed this with Euan and Andrew.  Removing (renaming) NDCDisplayHook.dll in C:\NTGlobal\Final\XFS\Dll then restarting the apps was required get the display to work.



Summary:
Statement Fatal message is not reported to Host and not printed on journal.

Description:
1.Start Statement trasaction by sending transaction reply STATCONT .
2.When the statement is presented, hold onto it at the mouth of the statement printer and prevent if from being captured untill Suspend condition is created.
3.Suspend condition is created and suspend unsolicited is reported to the Host and printed on the journal.
4.Send GIS from NDCHost Continue to hold onto the Statement ,Statement printer goes to Fatal condition and SST coming back to In service.
5.But Fatal unsol is not reported to Host and not printed on journal.
6.After above procedure(coming back to In service) if we try to perform any statement transaction, this time Fatal unsol is reported to host and printing on jorunal. 

Logs also attached for more info.



Summary:
Presentation Client Installer doesnt register components as safe for scripting in development environment, and product code has changed instead of package code

Description:
Presentation Client Installer doesnt register components properly, or as safe for scripting in development environment.  This leads to BrowserClient not starting / application popup in dev environment, and prompting to run ActiveX scripts in BrowserClient.

Changed product code results in Uninstall key being incorrect, and multiple versions of PresentationClient being installed, i.e. as part of Promote 3.0, causing issues with scripts.



Summary:
Card left in reader after restarting application causes looping of retain card command

Description:
Card left in reader after restarting application causes looping of retain card command.



Summary:
Passbook-STATCUST-On a Passbook Jam during Capture, XFS returns MEDIAJAMMED Severity 2 but AANDC logs a bucket entry of severity 4 and fitness getter returns FATAL

Description:
XFS gives:-

fwDevice =               0 (WFS_PTR_DEVONLINE)
 fwMedia =                2 (WFS_PTR_MEDIAJAMMED)
 fwPaper[SUPPLYUPPER] =   3 (WFS_PTR_PAPERNOTSUPP)
 fwToner =                0 (WFS_PTR_TONERFULL)
 fwInk =                  3 (WFS_PTR_INKNOTSUPP)
 fwLamp =                 3 (WFS_PTR_LAMPNOTSUPP)

We Log:-
DBSCustomisationLayer 29/02/2008 17:17:47.842  BUCKET ENTRY             
 DeviceID =               024
 Date/Time =              080229171747
 Command =                05
 Command Data =           
 Response Type =          0
 TCode =                  04
 Transaction Data =       
 Severity Data =          04
 Replenish Info =         0001010000
 Replenish Count =        
 MCode =                  02
 MStatus =                07
 MData =                  

There seems to be a mapping issue here.




Summary:
MAST Hang when exiting supervisor at the same time as entering MAST

Description:
Scenario:
1. Go to Supervisor.
2. Press 9 Enter on GOP , Press the MAST ICON on GOP.
3. Flick the mode Switch to Normal.

Application Doesn't respond any more, on MAST ICON it shows please wait and Nothing happens ( waited for nearly 10 min)




Summary:
SendToDebugLog does not correctly process dynamic parameters

Description:
1) When SendToDebugLog is invoked to log with dynamic data e.g. ("debug"."%s","Hello") - the dynamic part - "Hello" is not properly logged.
2) The SendToDebugLog call is not declared as extern "C"
3) Some logging traces seemed to be missing
4) Perhaps we could add timestamp information for all windows other than ooxfs,debug - code could be copied from debuglog.cpp




Summary:
Include SNMP agent aggregate in ANDC 3.3 - currently only including one SNMP component

Description:
Info from Eileen... I see that once again only 1 snmp component is included in andc 93.3.0.13.  You need to include both snmp components (snmp agent & snmp master agent).




Summary:
Voice Guidance - Tests 5.20.1 and a5.20.1 Volume Adjustment key - If you press the volume adjust key 16 times all the keys except the cancel key go dead

Description:
When Volume adjust key WFS_FK_00 is pressed 16 times to adjust the volume then all the keys except cancel key go dead



Summary:
Support USB BNA reg keys in same way as RS232 reg keys.

Description:
CIC sets one of the feature's reg keys - Disable Automatic Resets under the RS232 BNA key. This needs to be copied to the USB reg key as well.



Summary:
Quality of cheque image print via a receipt forms print is poor

Description:
Quality of cheque image print via a receipt forms print is poor



Summary:
Application going to suspend mode when all card read conditions failed 

Description:
Build:
AANDC 93.03.00.13
XFS 95.00.00.23

Scenario:
1. Start the Applications and use the APPC and LD down load.
this will set the read condition to 
Cond 1  -   TK 1 2 3
Cond 2 -    Tk 1 2
Cond 3 -    T k 2 3
2. use a card which has blank tracks for Tk1 and Tk3, it has got some data for Tk2.
3. Card is ejected and Application moves on to Suspend mode. which is not a expected behaviour.

There is one more way to recreate it , if we dont have such card above mentioned.

Set the NON MAGNETIC ACCEPT to 1 in the registry mentioned below ( depending on the device)
USB IMRW --- HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\USBIMCRW\Operational Parameters
RS232 IMCRW - HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\RS233IMCRW\Operational Parameters
SDC MCRW --   HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\SdcMotorisedCardReaderWriter\Operational Parameters

Restart the machine to effect the above setting.
1. Start the Applications and use the APPC and LD down load.
this will set the read condition to 
Cond 1  -   TK 1 2 3
Cond 2 -    Tk 1 2
Cond 3 -    T k 2 3
2. insert the card in a reverse manner.
3. Card is ejected and Application moves on to Suspend mode. which is not a expected behaviour.



Summary:
(ST1) Cheque image shown vertically on Cheque confirmation screen

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Make sure Document processor detected
Scenario:
1. Start the Apps and Load CPM reply
2. Insert card ,Pin and then inser cheque.
Cheque is Shown vertically here.



Summary:
ImageMark Path registy value not installed

Description:
There is a small bug in AdvanceNDC.reg. The Path needs to have double \\ as delimiters, however, there is only a single delimited in one place - C:\Program Files ... rather than C:\\Program Files
On my PC this results in the registry value not installed when I click on the file. Trivial change, but annoying that we did not see it so far.

; Path to store ImageMark Feature cheque images and XML file into
"Path"="C:\Program Files\\NCR APTRA\\Passport"





Summary:
Multiple Display Hooks - Message box with heading option is not displayed without pressing any key on the PIN pad.

Description:
Multiple Display Hooks - Message box with heading option is not displayed without pressing any key on the PIN pad and also after pressing CANCEL button on Message Box Default $0 amount mask is displayed.

Build details:
XFS 95.00.00.23.
ANDC 93.03.00.11.

Reference:
Test 5.11.8.3.4

Scenario:
1.)Start Applications.
2.) load NDCDemo.txt and Send messages from SCREEN00 to CONID and STATE_NE then GIS.
3.) Insert Card and Enter PIN & press Enter.
4.) Select CASH WITH RECEIPT (FDK C)
5.) select OTHERS (FDK D).

Expected result:
Message Box with heading "option" will be displayed with YES/NO/CANCEL options.
Failure:
After pressing any key on PIN pad only Message Box is displayed.

6.)Press YES button on Message Box.
7.) Press NO button on message Box.
8.) Press CANCEL button on the Message Box.

Expected result:
Default $0 amount mask will not be displayed and rest of ndc screen will be displayed.
Failure:
$0 amount mask is displayed in the screen.




Summary:
The same cheque Image are printing on Journal Printer when Forms Printing feature and  EJ with Hard Copy option are enabled

Description:
Reference: 
1) Make sure the Dynamicforms(HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\PRINTING\Journal Forms) registry set to 1
2) Run Tests 5.5.1 on USB Jouranl Printer from CPM UTS (445-0708851B) and use EOP(16 and 17) messages to enable EJ with Hard Copy Option

Tested with ANDC 93.03.00.11 and XFS 23



Summary:
Two w3 status messages reported when comms are disconnected at confirmation screen

Description:
This is observed executing test 1.2.19.12.1 from regression test spec on BNA1. 

Initiate a deposit transaction and when confirmation screen is displayed, disconnect comms for BNA. The device is reported fatal as expected but it is observed that two w3 status messages are reported with fatal fitness. Logs attached





Summary:
TAR 387348 - Optional Data fields requested are missing from the transaction request

Description:
Customer has an extension state defined for the Transaction Request state. 
   
   As part of that extension state, they request optional data fields.  
   These optional data fields are missing from their transaction request.
   
   Their stateflow is defined as follows :-
   Applica.. 17:42:56.123 [185] [I] Transaction Request
   Applica.. 17:42:56.123       Screen Number           [118]
   Applica.. 17:42:56.123       Response Timeout State #[243]
   Applica.. 17:42:56.123       Send Track 2 Data       [001]
   Applica.. 17:42:56.123       Send Track 1 and/or 3   [000]
   Applica.. 17:42:56.123       Send Operation Code     [001]
   Applica.. 17:42:56.123       Send Amount Data        [001]
   Applica.. 17:42:56.123       Send PIN Buffer         [129]
   Applica.. 17:42:56.123       Send General Buff (or X)[186]
   Applica.. 17:42:56.123    Extension State - Pos [1]
   Applica.. 17:42:56.123       1  2  3  4  5  6  7  8  9
   Applica.. 17:42:56.123       Z003255015063000000000000
   
   1   2   3   4   5   6   7   8  9
   Z 003 255 015 063 000 000 000 000
   063 = 3F  = Q R S T U V
   
   The state flow shows that in the extension state, table entry 5 is defined
   as to  send optional data fields Q R S T U V in the transaction request.
   
   However, these are missing from their transaction request :-
   	10:37:33  # 23    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]17[Unicode-x1C]*************************************[Unicode-x1C][Unicode-x1C]A A   
     [Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]C]
   
   When table entries 3 and 4 are set both to 000, then the fields Q R S V & V
   are then seen in the transaction request :-
   	10:41:42  # 33    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]18[Unicode-x1C]*************************************[Unicode-x1C][Unicode-x1C]A A   
     [Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]Q0                [Unicode-x1D]                [Unicode-x1C]R00000             0    
            [Unicode-x1C]S          [Unicode-x1C]U[Unicode-x1C]V]
   (All fields except T are then sent.) (T is reserved)




Summary:
Application Links: Improve the way the DLL name is edited and add a warning indicating the current files will be overwritten.

Description:
The way in which the DLL name of an application link is edited is not clear.  Remove the feature and make the copying of an application link change the name of the target DLL automatically so that the original will not be overwritten.

Also, need to warn the user that building a link may overwrite the original DLL.



Summary:
For any mode change, the application is going through the Close state

Description:
When there is a mode change happening, Application is moving on to close state (for example when Apps in Inservice mode, sending OOS from host causes the state to move on to close state), I can see debug info " calling close state " in debug logs when we send OOS from host. Because of this when machine tries to go into supervisor from normal mode, it take a bit of time ( as its going to close state).



Summary:
Presentation Client Installer fails for Runtime install

Description:
When Presentation Client Installer is run for Runtime install, it fails, with an internal error in the MSI.



Summary:
SendMessageToHost looses messages and introduces long delays when called from a Virtual Controller [IT12]

Description:
SendMessageToHost looses messages and introduces long delays when called from a Virtual Controller [IT12]



Summary:
Handle Leaks in AANDC application

Description:
Handle leaks have been found while running the AANDC application for dispense and print function. The leaks are also found with Next state and print function. There is approximately 4 handles leak per transaction.



Summary:
TAR 385941 - GBNA is not reporting fatal in Send Config Info

Description:
(G)BNA (and CPM) with another problem with the response to 1___76 (also have 
   full logs if required):
    
   (G)BNA (and CPM) is not reporting itself as fatal in the term state message
   but does in the previous unsol (full explanation in 1st email in chain at
   bottom):
    
   3. This is to make the GBNA fatal. The ATM should send: 
   12:27:30  # 21    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w3    
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   [Unicode-x1C]4[Unicode-x1C]374956F719[Unicode-x1C]0] -
   sev=fatal
   
   4. Send a Send Configuration Information Terminal Command: 
   12:28:38  # 24    [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]76] 
   
   5. ATM replies with: 
   12:28:38  # 25    - the red h/w fitness character should be a
   4?[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10002[Unicode-x1C]00000040000000000000000000000000000000[Unicode-x1C]247F000900000280000
   000C7000001010202107F7F003F000002010000000000000003000000[Unicode-x1C]1111001100000000000
   0000000[Unicode-x1C]011110000000]




Summary:
Pictures are not taking in the REFUND NOTES TAKEN Flow point(017).

Description:
ANDC      :  93.03.00.11
XFS          :  95.00.00.23
Testcase  :  5.6.49.5.21.1
Scenario  :
               1)Start the Applications and Enable the Camera control option.
               2)Load the BNAtest.txt and send the files from OOS to GIS.
               3)Enter card and then select DepositCash function.
               4)Insert GoodNotes and then select REFUND option in the confirmation screen.
               5)Take the Notes and then check for the taken pictures  in the path <C:\Program Files\NCR APTRA\Advance NDC\Snapshots>.

But here,their is no pictures in the above path for the REFUND NOTES TAKEN flow point(017).



Summary:
Journal Flowpoints data printed twice on Journal with Journal Trace set to 1 and camera control enabled

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Scenario :
1. Start the Apps, Enable the camera control by sending Enhanced parameter 00 to 001.
2. Set the Journal Trace level to 1 in supervisor
3. USE the APPC and LD down load.
4. Perform a Transaction and send DISP910 from Resp_1 message file.
5. Verify on the journal for the Flowpoint file name

for the flowpoint 008 there is no file name printed on journal.
and the Host data in DISP910 is printed Twice on the JP.

at time its observed that, Flowpoint file name is printed twice on the JP and No host data printed which is there in DISP910.

I am not sure if the camera test spec covered to test all the function IDs ( like Fast cash, CBDP)



Summary:
RecyclingInfo should be not cleared when trasnaction request is sent

Description:
Code which clears idLastDepositTrRecyclingInfo buffer, should be moved to mNDCTrHand::ProcFunc().
It is not allowed to clear any last transaction status data until transaction request is received because this data is still valid and can be used if expected transaction reply will be never received. 
Existing code clears buffer when transaction request is even not sent to the host.




Summary:
Avoid Sync Calls in card read state

Description:
Tester worker with Sync Call on the main thread in the card read state. missed from state type split



Summary:
Define and Print Downloadable bit image is not working as expected

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Test case:
Test case 7.1.2 from 5.6.1 universal printing,Doc
this test is run on a persona machine ( sdc receipt printer)
Make sure there were no Logos loaded on to printer.
Keep the required Graphics in SSDS\DLL folder.

at step 9: there is a receipt delivered but there is no bit image printed on the receipt
DLBITIMR message is trying to load BITMAP.BMP and NCR.LGO ( as BMP is not supported by Raw data print)
I have changed these file name to LOGO1.LGO  and LOGO2.LGO in the message ( these 2 files were there in C:\ssds\DLL folder) and there is no Bit images printed on the receipt.

if i load these 2 logos on to the printer by sending K09_00A and then send the DLBITMR later, both logos are getting printed on the receipt as those were already loaded.
that means, when there were no logos loaded on to the printer and and we try to define and print the bit images, images are not being printed on the receipt.



Summary:
2ST Coupon Prinitng - Device fatal is not reporting when receipt printer is in fatal and only coupon is prinitng without transaction data

Description:
1) Load any campaign having coupon print at Transaction Approve state
2) Make the receipt fatal
3) Perform cash transaction
4) Coupon should not print and device fatal should be reported to host during approving transaction



Summary:
If card reader FATAL and cardless active then idle screen not shown

Description:
Application continues to show OOS screen when it should be idling



Summary:
Certificates - function missing - mNDC_ImportRSAKey::Remove_RSASignatureKey_Worker 

Description:
This funtion (mNDC_ImportRSAKey::Remove_RSASignatureKey_Worker) definition is missing from sandbox, while adding the Certificates code



Summary:
Correct KVV's are not returned when the cenversion is 3.03 and when the command WFS_CMD_PIN_GENERATE_KCV is not supported.

Description:
ANDC      : 93.03.00.11
XFS         : 95.00.00.23
Testcase : 5.5.62.1.4.1.2
Scenario  :
                This test need to be done on an XFS simulator.
                Pre-Requisites:Please follow the testcase.

               1)Start The Applications.
               2)Load the Appc.txt and ANGELLD and send the list file LD5085NT.
               3)Go to Supervisor and Rename the registry location kvv under HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\Security to kvv1.
                4)Send GET_KVVS from EEKC message file.
                5)It returns 23<fs>000<fs><fs>4<fs>000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
                6)Select 6-Access menu -> 25-Key Entry -> 9-Change Key Entry Mode -> 1-Single length without XOR -> 6-Confirm new mode and Mode will change successfully.
                7)Enter the keys for the KEYA and KEYA STORED is displayed.
                8)Exit Supervisor and Send GET_KVVS. 
                9)It Returns 23<fs>000<fs><fs>4<fs>313233000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.

But here it returns as 23<fs>000<fs><fs>4<fs>000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 when we send GET_KVVS.The KEY1 value in the registry is not updated with the 313233.



Summary:
Two receipts printed at SOD

Description:
The SP prints a receipt and the application prints a receipt at SOD - only one should really be needed so the BlankReceiptAtStart reg setting for the SP should be set to false to stop two reciepts




Summary:
(Form based) There is no path printed on receipt and Journal when we send the Invalid K08 screen ( remotely)

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Test case : 9.2.4 from 5.6.1 UNiversal Printing.Doc

at step 5 : when we send the K08_02 , there is no Path Printed on Receipt and JOurnal.

with the Raw data print ( same scenario), when we send the K08_02, it printed the path on the receipt but not on Journal ( Path should have been printed on the Journal also )






Summary:
(OOXFS logs issue) Wrong information logged into OOXFS logs

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Scenario:
1. Start the Application , send the APPC and LD.
2. inset card, Press cancel on EPP and Hold the card so that it cant be ejected/retained.
3. machine comes to online.
4. Go to Supervisor and ext from there.

when we Look in to the OOXFS  logs, it shows the Fwdevice as below.
 fwDevice =               4 (WFS_CDM_CASHUNITFULL)  ( its showing the Class as CDM which should be a IDC.this should be shown as WFS_IDC_HWERROR, This is what returned by XFS when we issue a Status Command for IDC)
 fwMedia =                3 (WFS_IDC_MEDIAJAMMED)
 fwRetainBin =            3 (WFS_IDC_RETAINBINFULL)
 fwSecurity =             1 (WFS_IDC_SECNOTSUPP)
 usCards =                10
 fwChipPower =            7 (WFS_IDC_CHIPUNKNOWN)
 lpszExtra =              <NULL>

refer to the OOXFS logs



Summary:
Update promote coupon printing author flow based on the XFS device variant fix G410241

Description:
Update Author flow for checking device variant for graphic print support before printing promote coupon, using Device Variant Getter. Dependency on the XFS device variant fix G410241

Updates need to be done based on fix G410241:
Project: CustomisationLayer.pj
Catalog: Transaction Reply Functions - Application: Dispense & Print
Catalog: State Types - Application: Transaction Reqeust State





Summary:
TAR 386026 - Journal character set corrupted by Device status message

Description:
TAR 386026 - Journal character set corrupted by Device status message

The issue is that the device status message includes a printer command which 
selects Character Set I. Once this has been sent, the set requires to be
chnaged back using Supervisor function. 




Summary:
Character '' ] '' is getting printed on Journal when we exit from 1 - Diagnostics

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

This is seen on a persona machine.

Scenario
1. Start the Application
2. Go to Supervisor
3. enter into 7- Diagnostics
4. Exit from Diagnostics.
'' ] '' is getting printed on the Journal, this problem is not seen on Athena machine ( form based)



Summary:
Access Violation occurs when PerformTimeoutState is called in a message interceptor[IT11]

Description:
If the PerformTimeoutState is called when a transaction reply is seen in a message interceptor the system crashes with an access viloation.  

This does not happen if a call to GetNDCKeyboardEntry is made by the interceptor before calling the PerformTimeoutState.   

I suspect that some sort of keyboard initialisation is missing from the internals of PerformTimeoutState



Summary:
Voice guidance - In State R, in time out state 'YES' is selected then the voice "ZERO DOLLARS" is played instead of the voice "KEY IN THE AMOUNT AND PRESS ENTER PRESS CLEAR KEY IF YOU WISH TO REENTER THE AMOUNT". 

Description:
Voice guidance - In State R, in time out state 'YES' is selected then the voice "ZERO DOLLARS" is played instead of the voice "KEY IN THE AMOUNT AND PRESS ENTER PRESS CLEAR KEY IF YOU WISH TO REENTER THE AMOUNT". 

Build Details: 
XFS 95.00.00.23 
ANDC 93.03.00.11 

Reference: 
Test 5.6.7.5.5.11. 

Scenario: 
1.) Initiate a VG transaction choosing the hide-screen option and enter a card at "Enter Card" prompt. 
2.) Listen to the audio and select a PIN entry method, by pressing the Numeric keys. 
3.) Enter PIN. 
4.) Select the option R STATE . and don't respond and let it time out.
5.) Listen to the audio and select the option YES.

Failure:
In time out state 'YES' is selected then the voice "ZERO DOLLARS" is played. But before time out the voice "KEY IN THE AMOUNT AND PRESS ENTER PRESS CLEAR KEY IF YOU WISH TO REENTER THE AMOUNT" is played. 






Summary:
Placeholders data in Audio recording message file is not playing properly while doing VG transaction.

Description:
ANDC      : 93.03.00.11
XFS         : 95.00.00.23
Testcase : 5.6.7a.5.13.9
Scanario  :
                1)Copy the message file AudioGuidanceData_Recording.xml to ¿C:\Program Files\NCR APTRA\Advance NDC\Config" and rename it to 
                  AudioGuidanceData.xml.
                2)Copy the DAUDIO04.WAV from ssds\dll folder to the media file path ¿C:\Program Files\NCR APTRA\Advance NDC\Media¿.
                3)Start the Applications and make sure VG is Enabled.
                4)Load vgload2.txt in to NDCHost and send the messages from LOAD01 to LOAD22, CONFIG and LOAD23.
                5)Perform a VG transaction and proceed to the transaction request state.
                6)Send the reply TestWav6 from NDCHost and Observe the audio played during transaction reply processing.
                7)An audio played voicing the text ¿Testing Recording voice in combination with text tag with place holders defined, Placeholder 1 Placeholder 2¿, followed by the recording file ¿DAUDIO04.WAV¿, followed by the text ¿Second text tag with place holder data, Placeholder 3, Place Holder 4¿. 

But when we send the reply TestWav6,in the second text tag it is playing the audio as "Placeholder 1, Place Holder 2" instead of "Placeholder 3, Place Holder 4".



Summary:
ANDC 3.03 build 11 does not show voice guidance in the Author help

Description:
It is not in build 11 as the help file is in a new directory that the installer does not know about yet :-(
..\VoiceGuidance\Binaries\Help

These tasks need to be done
update installer
update andc devdeliver (internal tool)

I copied the VG help file (h10063.hlp * its .idx file) to c:\NTGlobal\HELP but VG still doesn't show in the help contents and is not found through a search



Summary:
TAR 382018 - Enhanced Confirmation screen wrong when GBNA.ini file changed

Description:
DBS require the GBNA.ini file to be defined as : 

23,265,SGD500- 
23,263,SGD100- 
23,262,SGD50- 
23,260,SGD10- 
23,259,SGD5# 
23,261,SGD20# 
23,264,SGD200# 

When all active notes are inserted the enhanced confirmation screen does not 
show 500. It shows 100's twice : 

SG 100 X 4 = 400 
SG 10 X 1 = 10 
SG 50 X 3 = 150 
SG 100 X 4 = 400 
TOTAL = 960 

PS have confirmed this is the same behaviour on vanilla 321. 

it is belived this issue is in the Sort Denominations function of
CashinCommonImplementation.wsc : 

customi.. 02:36:43.765 ***************Sort
Denominations_Start*************** 
customi.. 02:36:43.765 detected need to sort with i=1 
customi.. 02:36:43.765 Going to place 1 at ****** why no value
for "pos" + why no "Comparing SGD500 and SGD100" 
customi.. 02:36:43.781 detected need to sort with i=2 
customi.. 02:36:43.781 Comparing SGD100 and SGD50 
customi.. 02:36:43.781 Going to place 2 at 1 
customi.. 02:36:43.781 detected need to sort with i=3 
customi.. 02:36:43.781 Comparing SGD100 and SGD10 
customi.. 02:36:43.781 Comparing SGD50 and SGD10 
customi.. 02:36:43.781 Going to place 3 at 1 
customi.. 02:36:43.781 ***************Sort Denominations_End*************** 


The bank is fixing Type 1 as $1000, Type 2 as $100, Type 3 as $50 and Type 4 
as $10, that's why we need to implement this order. The host can't continue
if our denom type in transaction request send up can't match their type.



Summary:
Beep sound coming two times when we press keys on Pinpad while doing VG transaction after inserting the card in Touch screen only.

Description:
ANDC     :  93.03.00.11
XFS        :   95.00.00.23
Scenario :
              1)Start the Applications and make sure VG is enabled.
              2)Load the message file AudioGuidancemsg.txt into NDCHost and send the messages from XML001 to XML061.
              3)Load the message file VgLoad.txt and send the messages from Load01 to Load23. 
              4)Do an VG transaction and trasanction request will send to NDCHost.
While doing VG transaction after inserting the card,beep sound is coming two times when we press any key on Pinpad for selecting the option .This issue is happening in  Touch screen SST only and after inserting the card only.



Summary:
SNMP reports the ATM state as unknown in NCR and Gasper mode

Description:
Test 5.7.4.3 and test 5.7.4.4
In Gasper mode, on start up, the state of the machine is being reported as J (unknown) and not 2.
In NCR mode, on start up, the state of the machine is beiug reported as 1 (unknown) and not 2.
Also when in NCR mode and a download was sent, no traps were seen.
Logs provided for both tests.



Summary:
VoiceGuidance - In Amount Entry State 'F' $0.00 is displayed in screen above to the screen data "SCREEN HIDDEN FOR PRIVACY" when hide screen option is set.

Description:
In F State $0.00 is displayed in screen above to the screen data "SCREEN HIDDEN FOR PRIVACY" when hide screen option is set.

Build Details: 
XFS 95.00.00.23 
ANDC 93.03.00.11 

Reference: 
Test 5.6.7.5.5.3. 

Scenario:
1.) Initiate a VG transaction choosing the hide-screen option and enter a card at "Enter Card" prompt.
2.) Listen to the audio and select a PIN entry method, by pressing the Numeric keys.
3.) Enter PIN.
4.) Select the option F STATE .

Failure:
     In F State $0.00 is displayed in screen above to the screen data "SCREEN HIDDEN FOR PRIVACY".
    This happening only when Hide Screen option is set.



Summary:
When the snapshot folder is full, Supplies should remain as Full until Delete Snapshots is performed

Description:
When CAPACITY EXHAUSTED is reached we delete 5% of images - this functionality is fine.  However, we also change the Supplies to Nearly Full - this could mislead a supervisor operator because they are unlikely to know that 5% of snapshots have already been deleted.  We should continue to report CAPACITY EXHAUSTED until a Delete Snapshots operation is performed in Supervisor.  Note: The Supplies status should also be updated in the case where the snapshots are deleted through another mechanism (e.g. script is run via software management to delete the snapshots).

We should only report a Nearly Full unsol once and a Full unsol once, until the snapshots are deleted via Delete Snapshots (or software management).

Ensure the FS and UTS are also updated for this GR1T.



Summary:
Change Timer 69 default

Description:
Timer 69 default is 2 seconds - should be 6 seconds.

This has been raised as TAR 384372 but Ranjith asked for this to be GR1Tted on 03.03.00



Summary:
w0 message reported with fatal fitness after rejected note left at throat

Description:
This is observed when executing test 1.2.6.3.1 from Regression test spec on BNA2

Insert invalid not and do not remove the invalid note from exit throat after it gets rejected. A w0 message with fatal fitness followed by a w4 with fatal fitness is reported.( retract option should be disabled). Expected that w0 message should not include fatal fitness.
Build stack: ANDCIT11+CIC IT14



Summary:
Card Read State T with DASH reader installed and Magnetic Read conditions only not functions correctly when card not remove during Card read state T.

Description:
Card Read State T with DASH reader installed and Magnetic Read conditions only not functions correctly when card not remove during Card read state T.

Build Details:
XFS 95.00.00.23
ANDC 93.03.00.11

Reference:
Test 5.7.15.6.1.4.

Test Scenario:
1.)Start Applications.
2.)Load the DASHDOWNLOAD Message file into NDCHost. Edit the message ST000065 and change the T state as 000T0100128010002002002001500. Send all message files from GOS to GIS.
3.)Enter Chip Card but not remove it.

Expected Result:
nothing happens and No Card reader error message sent to the host.After 5 minutes remove card.PIN entry screen is displayed.

Failure:
After some time ATM Suspend screen is displayed and not comming to inservice.
After sending GIS only SST comes to inservice.




Summary:
Automated build process does not build VCCore when building for debug

Description:
there is some sort of type library error when building AFAInterfaces. This needs to be built manually for release and then the automated build process kicked off agian.



Summary:
Suspend message and Fatal messages are not sent when Card not remove during card read state T.

Description:
Build Details:
XFS 95.00.00.23
ANDC 93.03.00.11

Reference:
Test 5.7.15.6.1.1.

Test Scenario:
1.)Start Applications.
2.)Load DASHDOWNLAOD message file into NDCHost and send all message files from GOS to GIS.
3.)Enter Chip Card and complete any transaction.
4.)Donot remove the card from card reader.

Expected result:
ATM Suspend screen will be displayed and Card reader suspend message is sent to the host.
e.g.12fs000fsfsD1fs3fs...
DASH Sevirity regestry setting now set to '3'.

Failure:
ATM Suspend screen  displayed.
Card reader suspend message is not sent to the host.
DASH Severity regestry value set to '3'.

5.) Donot remove the card during suspend period.
Card reader fatal message is not sent to the host.
But DASH Severity regestry value set to '4' after 5 minutes.




Summary:
No unsol reported to the Host while doing a deposit transaction when envelope deposit went to Fatal from suspend condition (Device is ENV Depository and Dispenser)

Description:
Build:
XFS 05.00.00 + patches
AANDC 93.03.00.14

This test is performed on Envelope Dispenser & Depository (Athena).

Scenario:
1. Start the AANDC Applications, Send APPC and LD down load.
2. Perform a Transaction by sending the DEP_910 from Reps_1 message file.
3. Envelope is dispensed, Take the Envelope. insert the Envelope into depository and hold the Envelope so that it cant go in.
4. Suspend condition is reported to the host, Application moves on to suspend mode
5. Hold the Envelope when device tries to clear the Transport.
6. Fatal unsol reported to host. (The Unsol is not reported to the host)
7. Perform a transaction now and send the DEP_910 reply, as deposit is already in Fatal it reports a sol message.


Logs attached.



Summary:
(form based) Blank receipt is delivered when we send 22LNLFFF message

Description:
Build:
XFS 95.00.00.23
AANDC 93.03.00.11

Test case: 5.1.2 from 5.6.1 universal printing.doc

Scenario: 
at step 14: when we send the 22LNLFFF message, first receipt is printed with the 2 lines of R00 data and 22 lines of host print  data........there is one more blank receipt delivered after that which should not be the case.

I have tested this with Raw data print, there is no Blank receipt delivered after sending the 22LNLFFF message. 



Summary:
PASSBOOK STATUS HANDLING - Missing Status message on a WFS_CMD_PTR_RETRACT_MEDIA command

Description:
Issue reported by Nationwide.
Nationwide (Ian Makin) have already spoken with Jan about this and he has identified that the issue is that the  WFS_CMD_PTR_RETRACT_MEDIA command which is used by the Passbook Capture worker is not being mapped in the status handling.  This causes us a problem where the passbook printer goes fatal on a capture  but the host never receives the status message.  As mentioned below this is considered a priority 2 issue as we have a delivery to Nationwide at the end of this month.
Logs Attached - email below
From:	Vesely, Jan
Sent:	05 September 2008 11:10
To:	Makin, Ian
Cc:	Morton, Neil; Poole, Pam; Lackie, Eddie; Kanike, Mahadevappa; Mellor, Craig
Subject:	RE: NDC Missing Fatal Severity Status Entry.
Hi Ian

I looked at the code and I think I found the issue.
Is is in the statcust.cpp area where we are mapping CEN-XFS commands ¿ method
BYTE mPassbookPrinterMapping::MapCommand(const WFSRESULT* eRes)

where the WFS_CMD_PTR_RETRACT_MEDIA command is not mapped. This results in bucket not created as you highlighted.

In the OOXFS FS, this command is also not listed to be mapped. Thus it is not in the status handling code and the status handling unit test code.
The assumption was to use CTRL_MEDIA command with CTRL_RETRACT control ... not RETRACT_MEDIA.

It seems in the IP Documentation that CEN-XFS 3.2 Passbook can be retracted in two ways:
¿	CTRL_MEDIA command with CTRL_RETRACT param 
¿	RETRACT_MEDIA command

Unfortunately our status mapping supports only the first ¿ the worker uses the second. So we have a disconnect between the worker and status mapping/handling developments.

Regards,
Jan





Summary:
Unnecessary delete of an mstring which causes a crash when running the apps with devpartner

Description:
In the method ValidateTCPIPEntry (in ndcfuns.cpp), deleting of pLengthFormat is not required.
This might be in various places. Need to update them.

Ref:
IMP_OR_EXP unsigned ValidateTCPIPEntry(unsigned entryNo, mString entryString, unsigned bAdvanced, mString FileName)
{
	char* TempBuffer = new char[3];
	BOOL bValid = TRUE;
	int  nSection = 0;

	//Get the current length format for validating the lengthsize
	mString* pLengthFormat;
	pLengthFormat = GetTCPIPEntry(2, "", 1); // get length format (index is 2)
	int	LengthFormat = pLengthFormat->AsInteger();
	//delete pLengthFormat;       //comment out this delete.



Summary:
Application is crashing while doing VG transaction.

Description:
ANDC       : 93.03.00.11
XFS          : 95.00.00.23
Testcase  : 5.6.7a.5.7.1
Scenario  :
               1)Start the Applications and make sure VG is Enabled.
               2)Download AudioGuidanceData.xml by sending all the messages from AudioGuidance.txt message file.
               3)Load vgload2_Treply into NDCHost and send the messages from LOAD01 to LOAD23.
               4)Do an VG transaction and transaction request message send to Host.
After inserting the card and  when we select the numeric digit '1' for language selection, then the application is crashing.




Summary:
Characters in Windows font files are not printing/scaled correctly

Description:
Build:
AANDC 93.03.00.11
this is only with form based printing.
for example, Character I and * are getting printed in a bold manner ( on receipt and Journal printers)



Summary:
EmulateNDCPlusEnvDisp not in Advance NDC reg file

Description:
Raised by IP that they could not see this reg key upon installation. It is in the pubs.



Summary:
IsGBRUOffline does not check HRESULT OR pWFSResult

Description:
Application Exception generated while testing Diagnostic Dispense fix on GBRU - IsGBRUOffline function does not check the results of the GetInfo command that is sent. In this instance a pWFSResult returned was NULL resulting in the exception



Summary:
VoiceGuidance: The "defaultResponse" attribute for ads option doesn't work as mentioned in FS

Description:
The "defaultResponse" attribute for ads option specifies the default behaviour. If this attribute is set to "true" for ads, the ads should be played when the ads selection option is skipped. But it behaves differently. The ads are not played when this option is skipped and the "defaultResponse" attribute is set to True. 

The behaviour is also not correct when the "defaultResponse" attribute is not defined in the xml. When it is not defined, it should take the value NO and the ads shouldn't be played. But the ads are being played when this attribute is not defined.




Summary:
Memory Leak - unfreed CEN-XFS memory

Description:
CashHandlerWC.cpp - in the following method the result of the synchronous call is not cleared using WFSFreeResult(). Also please update the SIE macro at the top - the source still shows revision 1.64, but we are on 1.69.3.7 - I think there is a missing ending $ character: needs to be $Id: $
I spotted the issue by chance when I was looking for a code example for Suresh :-)

1)
//RFC 330533: remove sychronisation issues
unsigned int _stdcall ThreadGetInfoPresentStatus(void * InputParams)
{
			
		mCashResourceID *CRIDPtr = (mCashResourceID *)InputParams;

		WORD wPosition = WFS_CDM_POSNULL;
		LPWFSRESULT	pWFSResult = NULL;
		CRIDPtr->SetPresentedStatus(FALSE);
				
		mMVCurrencyDispenser * cashhandler = mOOXFS::GetCurrencyDispenser();
		if(cashhandler && cashhandler->IsPresent())
		{
				HRESULT hr = cashhandler->GetInfo(WFS_INF_CDM_PRESENT_STATUS, &wPosition, &pWFSResult);
				
				if (WFS_SUCCESS == hr)
				{
					LPWFSCDMPRESENTSTATUS PresentStatus = (LPWFSCDMPRESENTSTATUS)pWFSResult->lpBuffer;
					CRIDPtr->SetPresentedStatus(TRUE);
				}				
		}		
		_endthreadex(0);
		return 0;
}

2) Also it is strange that the result of the synchronous calls is not checked:
	LPWFSCDMPRESENTSTATUS PresentStatus = (LPWFSCDMPRESENTSTATUS)pWFSResult->lpBuffer;
	CRIDPtr->SetPresentedStatus(TRUE);





Summary:
L1 unsol always reported on powerup

Description:
Build:
93.03.00.10

Scenario:
Make sure keys are loaded properly in Any mode and restart the machine.

1. Start the Applications
2. Load APPC and LD, Send LD5085NT
3. Perform a Transaction by enptering PIN, transaction is successful.
4.There is a L1 unsol sent to host ( with M status - 28 ), this happens always for the first transaction.
4. Perform one more Transaction by enptering PIN, transaction is successful, there is no L1 reported now.




Summary:
ANDC IT10 DevPC Install creates ssds\dll directory, installing NDCDisplayHook.dll into it. (PresClnt)

Description:
ANDC IT10 DevPC Install creates ssds\dll directory, installing NDCDisplayHook.dll into it. (PresClnt)

ssds\dll directory should not be created on a DevPC install



Summary:
Incorrect CASH Counts are given and printed when Hold the shutter closed after sending the dispence reply.

Description:
Incorrect CASH Counts are given and printed when Hold the shutter closed after sending the dispence reply.

Build Details:
XFS : 95.00.00.16. 
AANDC : 93.03.00.10. 

Reference:Test 5.7.26.3.1.15

Test Scenario:
1.) Start Applications and send douwnload messages .
2.) Initiate a transaction and send FAST5 from Reps_1 message file.
      Take the card, hold the shutter closed.Don't let it opened during dispense.

Expected Results:
Note is stacked but not presented
The following message is sent
22 000  8 E2000000000 40000 23 12000
GBRU reset is performed at the end of the session with supervisor entry/ exit simulation
and an OOS screen is shown during the reset 
Make sure that the cash counts are printed before and after the reset is performed and make sure that the counts are correct ¿ The Rejected count for cassette 1 is incremented by 1 and Cassette Total is 100
P21 message sent to the host
GBRU Reset will commence and R9 message sent to host
When reset completes
P20 message sent to host 
The following is printed onto the journal
CASH DISPENSE ERROR
CASH COUNTS BEFORE RESET:
<Cash Counts before Reset are printed here>
*1910*1*P*21,M-
072*10/11/2001*13.13*
      SUPERVISOR MODE ENTRY
072*10/11/2001*13.13*
      SUPERVISOR MODE EXIT
      *1910*1*R*09
      *1910*1*P*20,M-
RESET TO REJECT AREA FAILED
CASH COUNTS AFTER RESET:
<Cash Counts after Reset are printed here>
CASH DISPENSE ERROR RECOVERY COMPLETE
The message Reset is Successful or  Failed is printed to the journal depending on the result of the reset
Make sure that the above reset moves the note to Reject area
ATM goes to idle loop

Failure:
But The Rejected count for cassette 1 is not incremented by 1 and Cassette Total is given as 99.
Following information is printed:
CASH COUNTS BEFORE RESET:
		TYPE 1	TYPE 2
CASSETTE		00099	00100
+REJECTED		00000	00000
=REMAINING	00099	00100
+DISPENSED		00000	00000
=TOTAL		00099	00100

		TYPE 3	TYPE 4
CASSETTE		00099	00100
+REJECTED		00000	00000
=REMAINING	00099	00100
+DISPENSED		00000	00000
=TOTAL		00099	00100

Same counts are printed after reset also.



Summary:
Night safe: If Cancel pressed before drop bag then unsolicited status message is reported instead of solicited message.

Description:
In Night safe: If Cancel pressed before drop bag then unsolicited status message is reported instead of solicited message.

Build Details:
XFS 95.00.00.16
AANDC 93.00.00.10

Reference:
Test case  5.5.7.7

Test Scenario:
1.) Start Applications and load NIGHTSAFE message file.
2.) Send messages from SCREEN00 to FIT00045 and send GIS.
3.) Carry out a good NSD-
     Enter Card
     Select English Language if prompted
     Enter PIN
     Select Balance Transactio
     Send transaction NSAFEDEP reply with function ID = 6.
     Drop bag into night safe or if using hardware simulation, open the bag drop switch.
         
4.) Repeat step 3 but press CANCEL after the bag drop.
5.) Repeate step 3 but press CANCEL before the bag drop.

Expected result:
Timer 8 is terminated when cancel pressed.
Beeping stops.
Solicited status message sent to the host and printed to the journal when CANCEL pressed.

But Solicited message is not sent to the host. After ready 9 message Unsolicited message is sent to the host.




Summary:
Enhanced Audio is working as Enhanced Audio ocassionaly if Jack is already inserted but it should work as standard audio in this case

Description:
When VG is enabled and  Jack is inserted and after completion of transaction enhanced audio should work as standard audio and configured key should be pressed to start the VG session. But somtimes when jack is already inserted after completion of VG transaction , Application is going to language selection state directly without pressing the configured key.



Summary:
No pictures are taken by camera when cash is retracted

Description:
Tested with XFS 95.00.00.16 + ANDC 93.03.00.10
Eventhough NDCSecuritycamera.xml is configured with flowpoint 010, pictures are not taken while cash retract. For all the cash retract transactions pictures are not taken



Summary:
Dialup - MessageOnCP Timer causes an issue with Transaction / Session begin / ends

Description:
MessageOnCP timer is configured.

When SST Dials up to send message, the CP Message timer is activated.  When the CP Message timer finishes successfully, it ends all dials, tidying up the number of Begin Transaction / Begin Sessions with the correct number of End Transactions / End Sessions.

If a transaction has been started as the CP timer is ending all dials, its possible the Transaction begin will be tidied with a Transaction End.  The SST will still dialup to send a message due to Dial On Send in VISA 2.

This is more of a problem for In Session lifetime, as it will cause a large number of extra dials.

The window to get into this behaviour is very small.	

This is not a new issue, and will have been present from 3.2 timeframe, but hasnt been rerported from the field yet.



Summary:
DM: Modifications required to fit into AANDC support for Multiple Display hook

Description:
1) DM should no longer deliver DISPCONT or GenHook

2) DM NdcDisplayHook should be renamed to be DMDisplayHook  (FS Updates and Ip updates required also)

3) DMDisplayHook should be installed to the AANDC Installdir.



Summary:
Update DISPCONT functionality not to use fixed C:\SSDS\DLL path

Description:
See e-mail attached. Zubair agreed today to change it and update FS to guide customers in their 3.3 migration of DISPCONT functionality.



Summary:
MAST icon very small on front supervisor

Description:
Icon is small such that it cannot easily be seen which devices are in error. Can it be the same size as the Icon presented by GOP on the rear?



Summary:
Getting Key load error while testing with MAC ( Single length Mode only) 

Description:
Scenario:
XFS 95.00.00.16
AANDC 93.03.00.10

Test case : 3.4.5.13 from 5.10.14 - Encryption Regression.doc

Scenario :
Load the Keys in Single length mode as mentioned in the test spec
exit from Supervisor
Send LS_Comms,LS_MAC from EEMAC message file
Send S_State1, S_FITS1 ,Screens, COnfig messages and then GIS
insert card and enter PIN.
there is no transaction request sent to host, card is ejected.

when we look into debug logs, it was showing a Key load error message.

same test has been passed with Double legth restricted mode.



Summary:
Application Builder should build application and OCX control in a tempary directory away from the target directory.

Description:
When an error occurs during the application build process of the OCX, the batch file deletes the target directory instead of the sub directory it uses to create the OCX control in.  this can result in your FINAL\XFS\DLL directory being deleted requiring a re-install of the product.



Summary:
Fault Display does not include information about reject and retract bins

Description:
This is observed executing test 2.3.16 from INIT BNA UTS

Delete property and bin files, reboot the machine and start applications. Fault Display shows that all the Cash In cassettes are fatal & counterfeit bin is fatal, but does not include information that Reject bin is fatal and Retract bin is fatal

Logs attached. 





Summary:
DM: Incase html screen is not mapped and if application goes to Pls wait screen(TREQ)-->ITR-->Pls wait screen(TREQ), ITR screen is not getting refreshed

Description:
if DMNoTopMost=0 and html screen are not mapped to PlsWait (TREQ)screen and ITR. if application goes to PlsWait-->ITR-->PlsWait, ITR screen is not getting refreshed, same this is happening in info entry states like 
AmountEntry (F)
Enhanced PIN Entry state (M)
Enhanced Amount Entry State(R)
CardRead-PIN Entry Initiasation State (T)
FDK Information State (X)



Summary:
No journal printing done when copy snap shots and delete snap shots functions are done in supervisor for security camera

Description:
Tested with XFS 95.00.00.16 + ANDC 93.03.00.10

Test: 5.40.3 and 5.40.4

When Snapshots are copied or deleted from supervisor, no journal printing is done.



Summary:
Card Removed Manually message is not recorded to EJ

Description:
Card regression testing. (State A)
Test 12.1 Step 21
Performed a transaction with message DISP910 asnd removed the card manually.
The message "CARD REMOVED MANUALLY" was not printed to the EJ
Also an issue with Test 12.5 (State T)
logs supplied



Summary:
Installer is not always prompting for reboot even though a reboot is required

Description:
Known scenario: A DevPC install requires a reboot at the end of the installation in order to be able to run the AppCore from the C:\NTGlobal\AANDCAPPS folder, however the installer does not prompt for a reboot.




Summary:
Dispenser fitness is not showing as 4 (FATAL) after exiting from supervisor with Purge bin removed

Description:
Build :
XFS 95.00.00.16
AANDC 93.03.00.10

Scenario :
1. Start the Application
2. Go to supervisor
3. remove the purge bin 
4. Exit from supervisor now. Dispenser is cleared now.
5. send 1 fs fs fs 73 from host, fitness shown as E0 where we should get 4.

I also observed the below	steps : 
6. send 1 fs fs fs 76 from host, it shows Reject bin is removed in the Sensor status and Reject bin supplies is good.
when we remove any cassette and then exit from supervisor, supplies of the casstte is showing as 0 ( not configured), but for the same scenario with  reject bin its showing Reject bin supplies as 1 ( good state)




Summary:
Forms: Severity showing as 0 in the unsol status message when Journal printer went to Low

Description:
Build:
XFS 95.00.00.16
AANDC 93.03.00.10

Test : 4.5.1 from 5.6.1 universal printing.doc.

at step 9 : i am receving a unsol message here, but the severity showing as 0.

logs attched.

note : for making a low condition, keep a small roll/block the sensor and perform 15-20 transaction.



Summary:
Failed Signatures log incorrectly when both CAT2 and CAT3 notes are inserted.

Description:
When CAT2 and CAT3 notes are inserted and both the notes got failed to read, then the journal log displays them incorrectly as shown below:

CAT2 - 1 * EUR5 
CAT3 - 1 * EUR5

Journal log:

FAILED SINATURES: CAT3: 2





Summary:
Failed Signatures doesn't log in Retract Operation.

Description:
Retract operation is not logging Failed Signatures.



Summary:
Application hangs after Retract, when attempting to generate GetP6SignatureFailed event

Description:
Error source is from an object\variable get_P6Info from Retract Script Host.

When retract Operation is enabled and GetP6SignatureFailed event is generated due to P6 notes, the application hangs, generating the above mentioned error.



Summary:
When invalid date is entered and then a valid date is entered, in the select drive screen for security screen, invalid value text persisting

Description:
Tested with XFS 95.00.0016 + ANDC 93.03.00.10
Test : 5.40.3 Copy Snapshots

Recreation steps:
1.Select Copy snapshots function in Security camera function in Replenish menu
2. Enter an invalid date. so the prompt shows invalid value. 
3. Enter a valid date and Press ENTER
4. Select Drive screen with INVALID VALUE and SELECT FUNCTION text is displayed even though date entered is valid.



Summary:
H1 unsol is not coming when the Journal is fatal and the HardcopyBackup stopped by setting option digits 16 & 17 to 000.

Description:
Scenario:
	1. Enable Hardcopy backup feature by setting Option digit 16 or 17.
	2. Open the JournalPrinter printhead
	3. Do one transaction that has to print on journal. HBData.log file gets created and print data is written to that file.
	4. Disable HardCopyBackUp feature by sending option digits 16 & 17 to 000.
	5. Do one transaction that has to print on journal. H9 & H1 usols has to be sent to the host. But it is not coming.

This issue was seen while running 5.7.28.5.11.

Logs are attached.

BuildDetails: AANDC IT10
                    XFS IT16.




Summary:
Application crash with HardCopy backup feature.

Description:
In two scenarios Application is crashing
Scenario1:
	1. Open the JournalPrinter PrintHead
	2. Start the Application.
	3. Enable the HardCopyBackup feature.
	4. Do one transaction that has to print data onto the Journal.
	5. After printing data into the HBDATA.LOG file Application is crashing.

Scenario2 : 
	If we continuously running transactions after the printhead is opened is crashing the application.

Logs are attached.




Summary:
Voice is not playing for the numeric digit '0' in the ITR state.

Description:
ANDC        : 93.03.00.10
XFS           : 95.00.00.16
Testcase   : 5.6.7a.5.8.4.
Scenario    :
                  1)Start the applications and make sure VG is Enabled.
                  2)Load AudioGuidanceMsg.txt and send all the messages.
                  3)Load vgload.txt and send the messages from LOAD01 to LOAD23. 
                  4)Perform a VG transaction and proceed to transaction request state.
                  5)Send the reply message OARNDC1 and observe the screen update and the audio played.
                  6)press numeric keys 0-9 and observe the audio played.
                  7)The audio played voicing each each key press.

But here,the audio is not playing  for the numeric digit '0' only.



Summary:
Pictures are not taken in the EnvelopeDeposit flow point by camera.

Description:
ANDC      :   93.03.00.10
XFS          :  95.00.00.16
testcase  :  5.6.49.5.26.4
Scenario  :
               1)Start the Apllications.
               2)Laod the message files Appc.txt and LD and then send the LD5085NT.
               3)Do an transaction and send the reply as DEP_910.
               4)Take the Envelope and Deposit the Envelope and Ensure that there are 2 snapshots are taken by the camera when the Envelope is depositing.

But here,the snapshots are not taken in the Envelope deposit flow by the camera.



Summary:
Taking Envelope with the FILLENV supervisor function is not showing "ENVELOPE TAKEN"  message

Description:
Scenario:
	1. Select FILLENV(option 41) in the Replenish menu, it will present the envelope.
	2. Take the envelope . " Envelope Taken" message has to be shown .
	3. It is showing "Function Done" not the "Envelope Taken" message

This is tested with:
		AANDC IT10
		XFS IT16.
		On Athena Machine.

This isue was seen while running testcase 5.7.24.3.1.5.2.






Summary:
AANDC must blank out the EMV PAN and Track 2 data objects contained within some EMV fields when tracing to the MessageOut window.

Description:
AANDC must blank out the EMV PAN and Track 2 data objects contained within some EMV fields when tracing to the MessageOut window.

The messages which could contain this data are -
Transaction request message - In the EMV CAM buffer AND also in the Last Transaction Status Field.
Solicited Responses to an EMV transaction Reply - There is an extra EMV field which could also contain this information.



Summary:
When Copy Snapshots is selected with Write protected or Full USB/ Floppy drive, Function Done is displayed instead of COPY TO DRIVE FAILED.

Description:
Tested with XFS 95.00.00.16+ AANDC 93.03.00.10
Recreation steps:
1. Insert a USB/ Floppy disk which is write protected or full.
2. Go to Supervisor menu and select Replenish
3. Select function 42 Security camera
4. Select Copy Snapshots.
5. Enter start and end date.
6. Select Drive
7. Function done is displayed. but when the drive is checked, no snaps are copied.

Also when drive is empty,  select copy snapshots, FUNCTION DONE is displayed instead of NO DRIVES AVAILABLE.



Summary:
Supervisor menu hangs when FDK F is pressed in submenu

Description:
Tested in XFS 95.00.00.16+ AANDC 93.03.00.10
Recreation scenario
1. Go to supervisor and select replenish menu
2. Select 5 clear cash and press FDK D
3. Counters with select function prompt is displayed at bottom.
4. Enter any digit and press FDK F instead of Clear. Digit is cleared and menu hangs. No keys are active.

Only in a screen where result of a function is displayed and select function is displayed at the bottom, we can see hanging. In all the other cases FDK F acting as clear key and no hanging.



Summary:
Application not responding when invalid value entered in Select drive menu for security camera

Description:
Tested with XFS 95.00.00.16 + AANDC 93.03.00.10

Recreation steps:
1. Go to supervisor and select replenish menu.
2. Select function 42
3. select Copy snapshots
4. Enter start date and end date.
5. Enter an invalid value in select drive screen
6.Application crashing or not responding with the below error
esponsibility: NCRScotland.SSDS
Owner: mError
Process Filename: C:\ssds\apps\applicationcore.exe
Process ID: 3460
Thread ID: 2740
Object ID: 114834760
Description: 
<SCFILE> .\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>      <SCLINE> 1383 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 114       Error Number: 2    Worker Id:     Description: VBScript has reported an error in a script passed to it.
The error is near line number 14 of Script Host Worker ID: 4n10178dc130.
Subscript out of range: '[number: 2]''
The Source of the Exception is
	'Microsoft VBScript runtime error'
Script is:
'ProcID**activate**END
Sub activate() 
'Getting the User selected destination drive letter to store the snapshots**         
   Dim driveLetterArr 
   'Logicaldrives.Data fromat ex:[A:\;E:\;N:\]




Summary:
Get Extended counts not including BNA data (Grp ID I) unless bits 0 or 1 of option 45 set

Description:
   According to the NDC Msg I/F, Get Counter terminal comman (1fsfsfs42) should incllude the BNA counts in data group I, if bit 3 (enhanced fitness/supplies) has been set.
I tried with this set (value of 8), and various other combinations. It was found that the data IS included when bit 0 (BNA counts in Last Txn) or bit 1 (>90 notes).

No logs provided, as simple to recreate, and was demonstrated to Mike in teh lab.



Summary:
When snap is opened in editing mode and when delete snap shots function is selcted from supervisor, all the files from snapshots folder is deleted.

Description:
Tested with XFS 95.00.00.16 + 93.03.00.10
Test: 5.40.4 Delete Snap shots
Recreation steps:
1. Open any one file from c:\program files\Advance NDC\Snapshots folder in editing mode
2. Go to supervisor and select replenish
3. Select delete snap shots function
4. Check the snapshots folder contents. All the files are deleted. But the editing window is still open.
test spec says files are partially deleted.



Summary:
When snaps are deleted using DELETE SNAPSHOTS function, and when camera is initialised via TEST CAMERA, fault display is not clearing camera status.

Description:
Tested with XFS 95.00.00.16+ ANDC 93.03.00.10
Test no:5.41.2
Recreation steps:
1. Make folder size 100% capacity and make sure fault display shows capacity exhausted.
2. Go to supervisor and select Replenish
3. Select function 42 Security camera
4. Select option 3 delete Snap shots- Function done displayed. Images are deleted.
5. Select Test camera- camera failure displayed instead of camera initialised. Camera does not take the picture.
6. Check fault display- shows Camera capacity nearly exhausted.




Summary:
When Test Camera option is selected in supervisor, camera failure is displayed instead of Camera Initialised.

Description:
Tested with XFS 95.00.00.16 + ANDC 93.03.00.10
Recreation steps:
1. Do a good transaction and make sure pictures are taken correctly.
2. Go to supervisor and select replenish
3. Select option 42 Security Camera
4. Select option 1 Test Camera
6. Camera failure is displayed instead of Camera Initialised.
7. there are no faults displayed in fault display.
7. exit supervisor and do a good transaction. pictures are taken at correct flow points

Camera is not taking picture when test camera function is selected. There is no blinking I can observe when test camera function is selected. But still If I do a transaction after coming out from supervisor, camera successfully takes picture. Also the camera takes Picture in sysapp.
No picture is displayed in GOP when Test camera function is selected and SupervisorTest.bmp file not found in Snapshots folder.

Test case no: 5.41.2 Camera is in Good state, 5.40.2 test camera



Summary:
Volume Adjust at any time is working only after card insertion and not in idle loop.

Description:
In Test Case 5.20.1 volume is adjusted only after card insertion and not in idle loop.VG FS is not mentioning that when volume should be adjusted.



Summary:
Issue with EnvelopeDepositery MEI.

Description:
Envelop device  MEI starts flashing from EnvelopDispenser state to until the envelope is deposited.

TestScenario:
	1. Load the download APPC& LD and send the  LD5085NT message list.
	2. Select TransactionTests and then DEP&MISC and then DEP910.
	3. Envelop gets dispensed and MEI starts flashing.
	4. Take the envelop , TransactionRequest sends to host.( MEI is still flashing).
	5. Send the Deposit reply. (MEI is still flashing)
	6. Deposit the envelope when the shutter is opened ( After depositing the Envelope MEI stops flashing).
	
This issue was seen while testing the testcase 5.7.3.2.6.

   Build Details:
                         AANDC IT10.
                         XFS IT 16.





Summary:
When camera is fatal and  supervisor entry and exit occurs, no unsol is sent to host

Description:
Tested with XFS 95.00.00.16 + ANDC93.03.00.10
Test case no: 5.6.49.5.42.1 Advance NDC- Unsol is reported to the host with DIG 'M' when ECP option 32's bit 1 is set to 1
Recreation steps:
1. Make camera fatal by unplugging the connector. 
2.Start application and send download
3.send ECP option32- 3fsfsfs1Afs000fs32002 and gis
4. fatal unsol with m-status indicating communication error obtains
5. Go to supervisor and go in service
6. No fatal unsol is sent
7. Send OOs
8. Send GIS
9. No fatal unsol sent

Also when camera status is low and supervisor entry and exit occurs, no unsol is sent



Summary:
Application hangs when attempting to play wav file when wav file is not present

Description:
 If the wav file is not located at the desired location(e.g -C:\Program Files\NCR APTRA\Advance NDC\Media) then in test case 5.13.9 application hangs on "please wait" screen after sending transection request and sending transection  reply as TestWav1 message from host.



Summary:
Camera is triggered for an invalid XMl file.

Description:
ANDC         : 93.03.00.10
XFS            : 95.00.00.16
Testcase    :  5.6.49.5.34.2
Scenario    :
                  Pre-requisites :a) Make sure Camera Control  option is Enabled.
                                           b)Make sure that all flowpoints are configured in xml file with the following details:
                                                 ¿NoOfSnapshots =2¿
                                                 ¿Delay = 6000¿ ( out of range ¿this makes an xml file invalid)

                  1)Start the Applications.
                  2)Load the message file NWCustom and send all messages from SCREEN00 to FIT00045.
                  3)Send GIS and do an cash dispense transaction.
                  4)Check "C:\Program Files\NCR APTRA\Advance NDC\Snapshots" and Ensure that no picture is taken for this transaction. 

But here,the pictures are taken for this transaction.Thatmeans,the .xml file is validating for the value "Delay=6000".



Summary:
STCONT file contains incomplete Biometric Exits entries [Build IT10]

Description:
The STCONT file contains incomplete entries for the Biometric state types. These should be removed. 
The STCONT entries are the last two in the file "z0005" and "z0006"



Summary:
when Host sends Final XML Message to the SST then application is crashing due to CDI store which is not used properly in active script

Description:
when Host sends Final XML Message to the SST then application is crashing due to CDI store which is not used properly in active script(4n9866dc130)



Summary:
DebugLog is crashing whenever we are saving  any logs with diffrent name (Rename any log)

Description:
we found this isuue in general scenario. whenever we are saving any log file of Debug window with different name then any operation on that Log window  crash the complete Debug Logs.

following are the steps to create this issue.
step 1:- start the application , start the Debug Logs and start the Host simulator.

step 2 :-  save any log file at any location with diffrenet name (For e.g save Debug to Debug1.txt on desktop)
 
step 3:- send any message to host.

Result :- Debug logs will crash at that time.




Summary:
''AlwaysPrintChequesOnBack'' and ''CodeLineHeight'' registry keys are not available in UniversalPrinters.reg

Description:
build:
AANDC 93.003.00.10

''AlwaysPrintChequesOnBack'' and ''CodeLineHeight'' registry keys should be avavilable under ''HKLM\SOFTWARE\NCR\Advance NDC\CPM'' upon runnning the UniversalPrinters.reg



Summary:
For the test case 5.6.1.5.33, TEST THE PROMOTE WITH DM FULLSCREEN, a white screen is displayed when FDK A is pressed in ITR screen.

Description:
Tested on ANDC 93.03.00.10 + XFS 95.00.00.16

As per the test case when Promote is active, 10.htm and 172.htm has to be removed. So when FDK A is pressed in ITR screen, 172.htm ( Transaction request html page) has to be displayed. But it is already removed as per the pre-requisites of the test. If the test is repeated with 10.htm and 172.htm in c:\ssds\Display folder, focus is coming to display manager after displaying promote campaign for few seconds.



Summary:
VoiceGuidance - When the max. amount of digits are entered during amount entry and amount becomes zero, the previous amount is voiced

Description:
When the maximum amount of digits have been entered and the amount goes back to $ 0.00, the previous amount is voiced. It should be voicing "Zero dollars and zero cents".



Summary:
Picture is not taken in the cheque capture flow point by camera.

Description:
ANDC         :  93.03.00.10
XFS            :  95.00.00.16
Testcase    :  5.6.49.5.26.1
Scenario    :
                 1)Start the Applications.
                 2)Load message file CPMBse.txt and send messages from FIT001 to STAT 661.
                 3)Enter card and select "deposit cheque" FDK and Insert a valid cheque.
                 4)Then,select CANCEL.
                 5)Cheque will be ejected and DO NOT TAKE the cheque.
                 6)Cheque will capture to BIN2 and 2 snapshots are taken in the cheque capture flow point.

But here,the 2 snapshots are not taken  in the cheque capture flow point.




Summary:
When Advance NDC is terminated in Idle Loop by ALT-F4, card reader stays enabled and the MEI keeps flashing

Description:
It seems the ooxfs termination is not running to its completion - it seems to hang there.

   applicationcore 25/08/2008 14:48:44.546  - mOOXFS::RemoveExternalWindow removing 0004059E
   applicationcore 25/08/2008 14:48:44.546 mOOXFS::Terminate started
   applicationcore 25/08/2008 14:48:44.546  - IDCardUnit1 being destroyed

It is not good that the reader is still enabled - card can be entered eventhough there is no app to process it.
I believe this used to run fine in the past - so it must be a 3.3 new issue.



Summary:
Masking PAN info when recording on journal - used for ECB6 journalling ,ECB6 database and Debug logs. 

Description:
This is to make all PAN recording in CIC to be compliant with PCI DSS requirements. All PAN appearances in any short of record should be masked.
In the cash-in area, customer (Track 2) details are printed to the journal when reporting customer data is enabled by registry(ReportCustomerData) and any device error occurred at any point of transaction.
Also if any suspect or counterfeit notes are deposited in transaction,then ECB6 Log creates entry for them with PAN Data.



Summary:
Add 5 new biometric extended trace screens into Resrvd.def

Description:
The following screens are required to be added to resrvd.def in order to support the extended tracing in the Biometric C-Exits. They are already booked out in ndc.reg.

't31'   'FGRPRINT X CAPTURED'
't32'   'FGRPRINT NOT CAPTURED'
't55'   'FGRPRINT FDK/CNL PRESS'
't56'   'FGRPRINT TIMEOUT'
't57'   'FGRPRINT DEV ERROR'
't72'   'FGRPRINT DATA SENT'



Summary:
After entering/exiting Supervisor, need to send a LineForm Scan as part of the Passbook Reader worker

Description:
The NBS Development team have found an issue that relates to the BypassLineScan funtionality. The problem is that if you go into supervisor and change settings for the passbook then come back out, these changes persist. What we need to happen is that when we leave supervisor and come back into enabling the passbook device, we need to send the line scan again- just as we did at Start of Day. This problem only arises if you have BypassLineScan set to 1.(on)

The problem is that when you ener supervisor then sysapp, the line definitions can change. These need to be set up again by sending a LineForm Scan as part of the reader worker to set up the customers chosen definitions again. At a lower level this is done by the SX Command DefineDefinitions. 




Summary:
In Offline Mode, voice is spoken even though VG is disabled

Description:
On DevPC, started ANDC with Remote Host set to 0, hence ANDC started in Offline Mode.  Even though VG is disabled (Message Mode is 10000000000000000), Michelle repeatedly voices "We're sorry, the audio feature of this ATM is currently not available.  Please try again later.".



Summary:
In printer Initialising testing then Printer data is has diffrent formate for Athena machine.

Description:
In printer initialisation testing , printer data is not coming as par test cases for athena machine whereas it is coming fine on Persona machine.
there are some test cases on persona machine which all gives the incorrect result on printer data.

AANDC version :- 93.03.00.10
XfS version :- 95.00.00.16

Steps for full intialisation( follow the pre-requisite)

step 1 :-start the application , Debug and NDC host

step 2 :- verify the printer data.(Un proper result as par test case)
Same incorrect result is coming for partial insialisation .



Summary:
INIT BNA fails if HWError was there at SoD and NoteTypes cannot be read

Description:
Seen on BNA2. This is correct, but it requires a Reset to clear the HWError and allow the Note Types to be read - catch 22.

Suggest putting an extra Reset if reading NoteTypes failed then retry reading NoteTypes. It won't have correct counts info again so maybe needs journal output to say that, but at least it can recover the device. Similar issue as the AER SoD one - G406154.



Summary:
Fitness of the envelope dispenser is set to 0 when we restart the AANDC Applications With Envelope dispenser in fatal condition

Description:
XFS 95.00.00.16
AANDC 93.03.00.10

Scenario:

Pre requi : This is Done on a Persona machine which has Seperate Envelope Dispenser and Depository.

1. Start the AANDC Application, Use the APPC LD messages.
2.Perform a transaction and Send DEP_910 fom Reps_1 message file, Block the Exit on Envelope Dispenser, Complete the deposit transaction by keeping a different envelope.
3. Perform one more transaction and Send DEP_910 fom Reps_1 message file, again Block the Exit on Envelope Dispenser, Complete the deposit transaction by keeping a different envelope.
4.Verify the Fitness of the Enevelope Dispsner, now its set to 4 which is fatal.
5. Close down AANDC Application and Start it Again.
6. 002 Screen is shown now...Send the Fitness command , Envelope Dispenser Fitness shows 0 now which means its in good condition.

Logs Attached.



Summary:
State Executor does not execute default close state when a state tries to go to state 0

Description:
This is related to code in mSignal* mNDCProcStateExecutor::ProcessEvent (pstatexe.cpp), which has a case statement for
CLOSE_STATE and for STATE_0. It looks that this processing has been missed and that test for "GRIT 302431 (TAR 259881) - allow state 000 as the next state in the flow" should fail.
We could probably use the reserved state 255, which we could make to be the default close state.



Summary:
Merge Camera picture flowpoints into BNA transactions

Description:
Security Camera functionality was introduced in ANDC 93.03.00.10 build.  We did not merge the picture taking flowpoints for BNA transactions because this code is maintained by the CIC team.  The flowpoints need to be merged in the CIC.  The flowpoints were tested during the Camera unit test, so should be low risk to integrate.
Contact Mahade Kanike or Jan Vesely for details on the code to be merged.



Summary:
Usability issues for Copy Snapshots screens (m63 and i38)

Description:
There is a usability issue related to Copy Snapshots Data Range functionality, where the date format is shown in a different format (in screen m63) from the date format which is to be entered (in screen i38).  Also when you enter the date the `/¿ characters disappear.



Summary:
Forms: 49 lines receipt cut is not happening properly with form based printing.

Description:
Build:
XFS 95.00.00.16
AANDC 93.03.00.10

Set the message mode to 10000002
Dynamic forms = 1
Scenario:
1. Start the AANDC Applications.
2. USE APPC,LD message files.
3. Edit the Long message in reps_1 to have more than 49 lines print data.
4. perform a transaction and send the reply Long , there is no receipt delivered.

Note: if the Printer data has exatly 49 lines, it gave a receipt with the 49 line data.

Its observed that there are 2 forms files (receipt1.def, receipt2.def) created when we have more than 49 line print data, and it doesn't try to print the first form file, second form file is directly used for priting ( with out printing first form file). 
for example, if there are 3 form files created, first two form files are not used for printing, 3rd form file is directly called out for pritning.this happens only with 49 lines receipt cut.

I  tried this with 24 lines cut( default cut), it prints all the data one by one receipt.
 



Summary:
CLR CASH Hangs 

Description:
 Issue seen running teh recycling/ECB6 overlap tests.

Selcting 5 CLR CASH results in a hang - this has been re-produced 3 times. Logs are attached



Summary:
 Get Extended Counts response is missing data group K

Description:
 Issue seen running test 5.7.2.8.1.2.3 from the 1.02 IT - It's test 1.2.3 from the Recycling/ECB6 overlap.

All of these steps worked as expected :-

CLR BNA
Added notes and replenish using ADD CASH
Deposited mix of cat2, 3 and 4 notes
Counts are OK in 3 DSP CNTRS, 2 DISP CASH and 58 PRN BNA CNTRS

The issue I saw is that sending the get extended counts (1fsfsfs42) resulted in no data being included for  data group K

The BNA summary counts, fields g44-g48 should be 
Total Notes Refunded ¿ 00000
Total Notes Rejected ¿ 00000
Total Notes Encashed ¿ 00015
Total Notes to Escrow ¿ 00015



Summary:
matrix printers.reg depository width different from personas.reg

Description:
IT10.   should be the same at 80.  Also need to check depository width specified in universalprinters.reg.



Summary:
Application crashes when machine reset occurs with card reader fatal

Description:
Tested with XFS5 IT 16 + ANDC IT9, XFS5 IT16 +ANDC IT10

Steps to recreate:
1. Make the card reader fatal by holding belt while card insertion
2. When SST is idling with fatal card reader, reset ATM
3. Do not allow to clear the fatal state while power up.
4. Start application with fatal card reader ( do not clear the error)
5. After device initialisation Application crashes.

But if the application is closed with fatal card reader and restarting application ( no reset of ATM) with fatal card reader, application loads successfully with Card reader fatal indication in fault display



Summary:
Move the reloading xml code from mCameraXMLConfig to mXML class

Description:
Reloading the xml file when it is modified during the middle of the transaction. This implementation is done in Camera xml configuration(mCameraXMLconfig class ). This code is common for all the xml related functionality, so better to move this reloading implementation to mXML class. 
we also have a deferred code review comment to place some of the new code into the common mXML area ... this is to do with the ability to reload the xml file contents when it has changed, rather than always loading it.



Summary:
if the R01 screen data has more than 24 lines,the data which is after 24 lines is not getting printed in Close state

Description:
Build:
XFS 95.00.00.16
AANDC 93.03.00.10

Test case Numer : Number 3 from TAR 357529 test spec ( 5.11 Tar integration Document)
This test case is working fine,while running the this test case i have seen a issue.

at step12: Before doing this step please follow below procedure
1.Send OOS, Edit the R00R01OK to have 5 more lines the End of message by keeping LF and some data
2.Send R00R01OK and GIS now.
3. Perform a Transaction and send the 3LINE message, there is a receipt delivered with ( R00 and R01 data)
4. select NO now, there is a Blank receipt delivered now ., there is no remaining R01 data Printed here.

this works fine when we have a FF at the END of the 3LINE message, there are 2 receipt delivered immediatly ( on the second receipt I got the reamining R01 data Printed)




Summary:
Investigate and fix performance issues found during IT

Description:
See attached emails.



Summary:
Unnecessary delete of an mstring which causes a crash when running the apps with devpartner

Description:
In the method ValidateTCPIPEntry (in ndcfuns.cpp), deleting of pLengthFormat is not required.
This might be in various places. Need to update them.

Ref:
IMP_OR_EXP unsigned ValidateTCPIPEntry(unsigned entryNo, mString entryString, unsigned bAdvanced, mString FileName)
{
	char* TempBuffer = new char[3];
	BOOL bValid = TRUE;
	int  nSection = 0;

	//Get the current length format for validating the lengthsize
	mString* pLengthFormat;
	pLengthFormat = GetTCPIPEntry(2, "", 1); // get length format (index is 2)
	int	LengthFormat = pLengthFormat->AsInteger();
	//delete pLengthFormat;       //comment out this delete.



Summary:
TAR 383243 - AA-NDC Developers Guide provides wrong registry values for coupon prnt

Description:
See TAR.



Summary:
TAR 382726 - Reference Manual does not document product class value for EP62

Description:
See TAR.



Summary:
TAR 382476 - AA-NDC: Clarify Knife supplies status reporting on 40 col journal printer

Description:
See TAR.



Summary:
TAR 380998 - Table 9-15 in the Reference manual is missing information

Description:
See TAR.



Summary:
TAR 380916 - Author Online Help : need to document Runtime Error - Domain 0, Error No. 2202

Description:
See TAR.



Summary:
TAR 380456 - The Reference Manual table on printer codes is confusing

Description:
See TAR.



Summary:
TAR 379797 - Ref. Manual does not detail the SelfServ product classes in HW config message

Description:
See TAR.



Summary:
TAR 379448 - AA:NDC ref manual needs clarified: State G decimal places

Description:
See TAR.



Summary:
TAR 379069 - AA-NDC : step missing from USB file rendering process in Developer's Guide

Description:
See TAR.



Summary:
"R00" is printed at the first line on the receipt for every transaction

Description:
Build:	
XFS 95.00.00.10
AANDC 93.03.00.10

Scenario:
1. Start the AANDC Applications
2. Send the APPC, LD messages
3. Insert card and peform a transactions , send the DISP910.
4. Take cash, receipt is printed , but it has "R00" on first line of the receipt.
This is happeing for all of the transaction replies.

Note: This is tested on a athena machine with Formbased and non form based.
When we send R00 screen data and perform a transaction, now R00 is not there, I do get the R00 screen data printed on the receipt.
Now i sent the R00R01NUL message ( which will nullify the R00/R01 Screen data) and peform a transaction,now there is no "R00" on the First line, its printed as it is in the host data.




Summary:
Camera XML configuration should get the default attribute data from Schema file when there are no attributes with xml elements

Description:
when there are no atrtributes present with the flowpoint's element then Camera XMl configuration has to read the default attribute values from Camera XML schema .





Summary:
ECB6 screen uses "i30" screen but it is already reserved for Nationwide FAST.

Description:
CIC ECB6 implementation should use another screen which has not been previously reserved. Note, this is the screen to enter 2 sets of dates for the ECB6 logs to return in Supervisor. ANDC3.3 is also adding a similar screen as i38. We can look to re-use this or if it is too different (they are removing extra spaces compared to ECB6 i30 screen), then we can reserve another free screen number.



Summary:
TAR 378572 - AA-NDC: No journal paper out status sent in dual mode Option 35 = 000/001

Description:
See TAR.
This issue was already addressed as part of GR1T 400480.  A separate GR1T has been raised to track the change into the ANDC 3.3 release.  Need to populate the release bulletin info in this GR1T for TAR 378572.



Summary:
TAR 383609 - Card reader reports No Card in Dash rdr as Cancelling Txn, but presents cash

Description:
See TAR.



Summary:
TAR 383145 - Some settings in the ANDC.MSI file and the NCR_SPs.reg file can be overwritten

Description:
See TAR
Note that work still needs to be done to address this TAR.



Summary:
TAR 382509 - Timing of card capture bin overfill unsolic

Description:
See TAR



Summary:
TAR 381548 - AANDC - Outbound message reflection does not work if MAC enabled

Description:
See TAR



Summary:
TAR 379873 - AA-NDC: 2nd dipenser not used after 3xpick fails

Description:
See TAR



Summary:
TAR 375413 - Diebold restart mode does not function correctly when Promote is installed

Description:
See TAR



Summary:
TAR 384117 - Encryption keys are not being migrated when IUI with 03.02.01 is installed

Description:
GRIT406631 (AANDC 3.02.01)
Using an IUI to upgrade existing systems to AA-NDC 03.02.01.  After installation it is not possible to access the existing encryption keys. The encryption keys are still present in the encryptor, however the application has not configured the key library to access the keys.  The KVV values for the existing keys are being reported as "KEY LOADED" instead of the actual KVV value, and it has also been seen that the V key is reported in this state, although no V key has ever been loaded.  The encryption keys have to be re-entered to get the system to function correctly.



Summary:
STCONT file need to be updated for SMS Key Entry in Information State

Description:
STCONT file need to be updated for SMS Key Entry in Information State



Summary:
Issue with AANDC PassbookAcceptor/Reader/Writer Workers - XFS command still active after worker is stopped

Description:
The workers need to have the workersignalled flag reinitialised in the start method so that the stop cancels the xfs command when the worker has not signalled but is stopped



Summary:
Requirement to add Date stamps to every entry into Debug and State windows of SilentDebug utility

Description:
Snapshot from Malaysian Debuglog....
Here is a short quote from debug.log generated on AANDC 2.6.2 by NCRDebugLog.exe (we are using versoin of this tool dated 05.06.06). 

[26/06/08 22:53:07] customi.. 22:53:07.963     PIN ENTRY INITIATE  

<wid>4s1108g105</wid>


[26/06/08 22:53:10] applica.. 22:53:10.517 String [X]
[26/06/08 22:53:10] applica.. 22:53:10.917 String [X]
[26/06/08 22:53:11] applica.. 22:53:11.468 String [X]
[26/06/08 22:53:11] applica.. 22:53:11.889 String [X]
[26/06/08 22:53:11] customi.. 22:53:11.899     PIN COLLECTED  

To add the date and time stamps as above into the product



Summary:
ECB6 - suspect count doubled after retract in INIT BNA

Description:
I ran test 5.4.3.1 (Shutter fails to open when returning Invalid notes) from the ECB6 UTS.

It involves this :-

Enter 5 good notes, 2 invalid, 2 cat3 and 3 cat3
Jam shutter so invalid notes can¿t be returned
Get a w3 ¿ all OK so far
Then go to INIT BNA and see what it does versus the counts

This is what happened to the notes after INIT BNA :-

Cat2 were in counterfeit bin
Good, invalid and cat3 were in retract bin

Func 58/59 report the correct counts

Funcs 3 and 4 correctly have 10 for retracted (total of good, invalid and cat3), and Total counterfeit is correctly 2.

The issue seen is that the Total Suspect count is 6, instead of 3.




Summary:
DM: Change screen number 999 to  9999 to store temp ndc screen in Dynamicmapping

Description:
Currently DM uses screen number 999 and screen group 'u'  to process and store dynamic mappings.There is a possibilty that DM may override 999 screen if customer already using this screen number. So it is better to use 9999 to store temp NDC screens.



Summary:
Not reporting the Fitness status as 4(Fatal) when TTS Engine is uninstalled in VoiceGuidance testing.

Description:
AANDC          :  93.03.00.09
XFS               :  95.00.00.10
Testcase      :   5.6.7a.5.11.2

Scenario      :
                    1)Start the Applications and make sure VG is enabled.
                    2)Download AudioGuidanceData.xml by sending all the messages from AudioGuidance.txt message file.
                    3)Load vgload.txt in to the NDCHost and send the messages from LOAD01 to LOAD23.
                    4)Send message 71 from NDCHost to get h/w configuration information and it will report 'a02'  for Enhanced audio.
                    5)Send message 73 from NDCHost to get h/w fitness information and it will report 'a4' for Enhanced audio.

but here,it is not reporting the Fitness status as 'a4' when we uninstall the TTS engine.It is reporting the Fitness status as 'a0'.




Summary:
GBxx Tamper Indication - Cassette inserted is printed on journal when cassette is still left out

Description:
Observed when executing test 2.3 from Tamper Indication UTS.	

Procedure followed:
1. Rack out lower transport
2. Remove cass 1 - JP : BNA CASS 1 REMOVED
3. Rack in lower Transport- JP : BNA Cass 1 INSERTED  (this should not be printed as Cass1 is still out)
                                                   BNA Cass 1 REMOVED   (this will be redundant info as it already printed Cass 1 removed once)
4. Insert Cass 1 -  JP : Nothing logged (Expected 'BNA CASS 1 INSERTED' should be logged)



Summary:
XML file name is not generated with the Current TSN

Description:
whenever we are doing transaction for CPM then the generating Xml file TSN is not matched the current TSN which we performed.

AANDC version :- 93.03.00.09
Xfs Version :- 93.05.00.10

We performed the following steps.

step 1 :- We performed the successfull transaction by sending the CPM_TR11 Trep with TSN is 4105.
step 2:- Again we performed the successful transaction  by sending the CPM_TR11 Trep with TSN is 4106 (In this step is generating the Xml file name is with TSN4105 not with 4106)






Summary:
DevPartner - Uninitialised Memory in Encryptor workers

Description:
1) enckeys.cpp 1.43.3.2, line 3489

	 if (TheEncryptor == NULL || EncryptorVariant != EKC_SERVICE_VARIANT) {

A quick look at the code revealed that the constructor is not initialising the members of the class - mThreadedSecurityWorker class.

2) enckeys.cpp 1.43.3.2, line 3553

    if (AttachState == WasReservedNowAttached) {

As above.

3) enckeys.cpp 1.43.3.2, line 3555

  } else if (AttachState == AbortAttach) {

As above.




Summary:
DevPartner - Reported Memory Leaks

Description:
1) PERSIST.CPP 1.29.1.3, line 84
      primary[i] = new mPersistInt;

The problem that this is not freed up in the destructor. The destructor is only doing a shallow destroy - leaves all the elements undestroyed.

2) ndcfuns.cpp 1.179.2.10, line 751
mSharableInt * IsDualDispenser = new mSharableInt;

This object is never freed up.



Summary:
Memory Leak -COMCDI issues

Description:
see first history (COMCDI issues)



Summary:
Platform Investigation: BNA2 - Reset fails when ECB is enabled

Description:
[From Praveen]
BNA2 is not usable when ECB is enabled.
Can you kindly forward the logs to the concerned team.

We've queried the device status using WOSATOOL and it shows Device hardware error.

Reset too fails with the device hardware error. Reason for the same is available in the attached application event log.

We've set the following registry key and rebooted the system. 
HKEY_LOCAL_MACHINE\Software\Classes\WOSA/XFS_ROOT\SERVICE_PROVIDERS\CIM\GENERAL_CONFIGS
SecurityRequested: REG_SZ = 1

SysApp shows no error, and self test passes.



Summary:
DevPartner - Uninitialised Memory used mEnvelopeDepositoryTI worker

Description:
DEPOSTI.CPP revision 1.9, line 182
	if (pWFSResult->RequestID == mReqID)

It seems that mReqID is not initialised in constructor, nor it is reset to 0 in the Start method when we do not have the device.



Summary:
Copyright info on AANDC Component Install says 2007 - needs to be 2008

Description:
Copyright info on AANDC Component Install says 2007 - needs to be 2008



Summary:
DevPartner - 2 Buffer Overruns found in Cash Handling Code

Description:
1) Write overun: ooxfsimp.cpp revision 1.42.1.18, line 2481
     mMVCurrencyImp::StoreDispenseInfo method

          for (int i = 0; i < (GetMappingObject()->CashUnitMapper->GetNoOfCashunits() + 1); i++) dispData[i] = 0;

The problem seems to be that GetNoOfCashunits() already returns NUMBER_OF_NDC_TYPES + 1. So the code on this line probably should not be adding +1 to this value in the for loop.Similar issue could be on other lines where GetNoOfCashunits() is used. So that needs to be checked.

Note that DevPartner also complained about buffer overrun on line 2457 (delete [] dispData). I think this is caused by the bug on line 2481

2) Buffer Read overrun: ndcfuns.cpp 1.179.2.10, line 849

	pCashUnits[nLogical]->ulMinimum = LowBillsThreshold[nLogical];//GRIT 326164						

It seems that LowBillsThreshold[] array goes from 0 .. NUMBER_OF_NDC_TYPES. However, the number of logical cash units will be one element bigger - the purge bin will be included. Thus in the loop the code will be trying to  read one element beyond its boundary.




Summary:
DevPartner - Memory leak found in mCashUnitMapper::TamperStatus

Description:
Allocated buffer locally in method, but not freed before method exit.



Summary:
Create Implementation Guide for PCI DSS as per details PA-DSS audit procedures Appendix A

Description:
Details of what is to be included in the document are given in Appendix A of the PA-DSS audit procedures document, attached to the RFC



Summary:
DM:Change the way mouse hook is working to support touchscreen

Description:
Presently DM supports touch feature using mouse hook through COM component which will be initialised from Browser. some times it is causing issues. Moving mouse hook functionality to DM Container rather than COM compoenent will solve this problem



Summary:
(2ST Statement) Statement is not getting printed on back side of the 2ST paper on USB Statement Printer

Description:
XFS 95.00.00.10
AANDC 93.03.00.09
Dynamicforms = 1
Scenario:
1.Start the applications, Load APPC , LD. 
2.Perform a transaction and send the STATCONT message from REPS_1.txt by adding ESC q 1 before NDC DEMO - STATEMENT PRINT
3.NDC DEMO - STATEMENT PRINT should be printed on back side of the statement,  But this is getting printed on the front side.



Summary:
Fault Display-Inconsistent reporting of cassette status on Cassettes removal & insertion

Description:
This is observed when executing test 1.2.4.1 from FD UTS

BNA1:
When 1st cassette is removed and inserted back the status is updated only on supervisor entry and exit.But when 2nd cassette is removed ,1st cassette is reported as FATAL.This is cleared only when the cassettes are back in place followed by rebooting, running the test in SYSAPP and running INIT BNA or sometimes need to do a reset from wosa tool.

BNA2:
For the same test on BNA2  it is observed that cassette 2 removed is not reported but the device goes FATAL.




Summary:
There is no statement delivered with formbased statement printing

Description:
XFS 95.00.00.10
AANDC 93.03.00.09

Tried this scenario on SPTR and USPTR
Dynamic forms for statement is set to 1
Scenario:
1. Start the Applications,load the APPC,LD messages.
2.Perform a transaction and send the STATCONT from reps_1, there is no Statement delivered. 

Reason:
Form path and media path  is not set in SP level, so it was defaulted to C:\XFS\DATA\SPTR\Forms
but AANDC Application is creating the forms at C:\Program Files\NCR APTRA\Printing\Statement\Forms.

We need to change the Form path to "C:\Program Files\NCR APTRA\Printing\Statement\Forms" by the installer in the registry.
Media Path to "C:\Program Files\NCR APTRA\Printing\Statement\media"
Location :
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Wosa/XFS Root\Service Providers\SPTR\General_Configs
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Wosa/XFS Root\Service Providers\USPTR\General_Configs
Also,
Above SPTR registry settings has to be added in Personas.Reg file
Above USPTR registry settings has to added in Universal.reg file.



Summary:
ImageMark Passport ATM Image agent feature generated XML file is not maintaining the correct Transaction ID.

Description:
Scenario: 
   1. Do one successful Cheque deposit transaction (Transaction ID is 4104)
   2. Do one successful cash dispense transaction.
   3. Enter Supervisor and select CLRDEPOS in Replenish menu.
   4. XML file gets created in C:\Program Files\NCR APTRA\Passport and it is having <TransactionId>0</TransactionId>  not the 4104.

Issue was seen while testing 5.5.5.5.26.6.
Build Details:
	AANDC IT9.
	XFS IT 10.

Logs and XML file attached




Summary:
Screen displyed after CLRDEPOS and CLRBINS is still showing the cheques deposited counters not the 0's

Description:
Scenario:
1. Do one sucessful CPM cheque deposit transaction (suppose it is depositing to the PKT1)
2. Enter Supervisor. In REPLENISH menu select CLRDEPOS.
2. Screen Displyed with the 

	CARDS CAPTURED        XXXXX
	LAST CLEARED     DD/MM/YY HH:MM

	ACTIVITY COUNT   =     XXXXXX
	PKT 1 00001 CLRD DD/MM/YY HH:MM
	PKT 2 / REJECT BIN
	           00000 CLRD DD/MM/YY HH:MM
	PKT 3 00000 CLRD DD/MM/YY HH:MM
Screen showing PKT1 counter value 1.
Same issue with CLRBINS as well.

Build Details:
	XFS IT10
	AANDC IT9.
Logs are attached.



Summary:
Mast: merror  where ANDC run on Wincor

Description:
merror if VDM mode not present  "Couldnt get handle to VDM Service" - VDM not supported by wincor.
Please concider
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC]
"VDMSupported"=dword:00000000
and remove the need for merrors.

ANDC 3.3 IT 9



Summary:
In VG memory leak testing, there is a memory leak and application is being slow after 40-45 transaction

Description:
In VG Memory leak teting the test case is failed due to memory leak availibility.

we tested memory leak under the 3 circumstances.
1) VG is disable -------- Memory leak is around 4KB/Txn
2) VG is enable and Non-VG  transaction is performed ------- 16KB/Txn
3) VG is enabale and VG transaction is performed------ After 40-45 transaction application is being slow and we are not able to continue next transaction.


AANDC version :- 93.03.00.09
Xfs version:- 95.00.00.10



Summary:
Supervisor Hanging when trying to display MAST Icon

Description:
Supervisor hanging intermitently when displaying MAST Icon / Service Assist Text

This is caused by Caller / Passthru pair in same workgroup.



Summary:
There is no Debug information to check whether the DLL( State Type and Tx reply Dlls) was loaded by PRELOAD/ONSTART

Description:
AANDC 93.03.00.09

Scenario :

When we set the State type Dlls to load by ONSTART in the registry, there is no information logged in Debug to verify whether its loaded or not.
presently,we are checking this with a help of a Application called Process explorer ( from microsoft)
It will be good to have this info in the Debug Logs it self.



Summary:
VG:  crash during dev partner test.

Description:
While running dev partner the application core crashed due to an error in VG script.

cint() should be preceded with IsNumeric().  Not seen with normal build so low priority.
An instance of this bug is in Appcore & card read state projects (maybe more)

The error is near line number 7 of Script Host Worker ID: 17n9866dc130.
VBScript has given the following error description:
	'Type mismatch: 'cint''
The Source of the Exception is
	'Microsoft VBScript runtime error'
Script is:
'ProcID**activate**END
Sub activate()
                    
    Dim theMsgMode
    theMsgMode = msgmode.Data
    
    If (Len(theMsgMode) > 2) Then
        Digit1 = cint(mid(theMsgMode,2,1))




Summary:
EMV Application names are not properly coming.

Description:
In EMV application selection and EMV Application confirmation screens, along with EMVApplication name some control characters are coming.

BUILD:
AANDC IT build 9.
XFS IT 10
EMV 02.01.01

This issue was seen while running 5.7.27.12.3.2, 5.7.27.21.1.4, 5.7.27.21.1.5 , 5.7.27.24.1.3
Logs are attached



Summary:
Statement is not captured on Start of the day

Description:
XFS 95.00.00.05
AANDC 93.03.00.08

test case : 3.4.15 from 5.6.12 open statement printer support .doc

Scenario:
Start the Application by keeping a statement at exit of statement printer, applications comes up , but the Statement is still at exit.



Summary:
when Account number is entered then number is not spoken when key mask is disabled and VG enabled.

Description:
Build: 
XFS 95.00.00.10 
AANDC 93.03.00.09 
Hardware:SST with FDKS and VG enabled. 
Reference:TESTs 5.6.7.5.5.5 and 5.6.7.5.5.6.

Scenario: 
1.Start application and send  Enable VG,Make sure Left Key option is not enabled.
2.Initiate a VG transaction by not choosing the hide-screen option and enter a card at ¿Enter Card¿ prompt.
3.Listen to the audio and select a PIN entry method, by pressing the Numeric keys. 
4.Enter PIN .
5.Select the option H STATE and  enter the amount.

Expected Result:
State `H¿ is entered and if the hid-screen option is not selected, the `H¿ sate screen with ¿ENTER ACCOUNT NUMBER¿ prompt is displayed. Audio played instructing to enter the account number. Numbers should be voiced as it is entered. The number will be spoken after each key press. Each number is spoken individually.Example: Press ¿1¿ voice will say ¿One¿, then press ¿0¿ voice will now say ¿0¿

Failure:
when Account number is entered then number is not spoken.This is happening in both Hide Screen option is selected and not selected.entered digits are shown as 'X' when Hide screen option is OFF and key mask is disabled.

I observered the following issue when key mask is enabled.
When digits are entered in account entry state(H state) and if Clear key is pressed then Amount entry state is displayed and when we entered digits then the number will be spoken after each key press. This problem is happens only when Hide screen is OFF and FDK B is pressed in account entry state.





Summary:
When VG enabled,In PIN entry state(B state) FDK A is not activated - which is inconsistent with Touch.

Description:
Build: 
XFS 95.00.00.10 
AANDC 93.03.00.09 
Hardware:SST with FDKS and VG enabled.
Reference:TEST 5.6.7.5.4.3

Scenario: 
1.Start application and send  Enable VG.
2.Send XML001-XML061 messages from AudioGuidance.txt file.
3.Send LOAD01-LOAD23 messages from vgload.txt.
4.Start a VG transaction by not choosing the hide screen option and at "Enter card" prompts enter a card and select a language.
5.Listen to the audio and select Pin entry state B.
6.Enter PIN and press FDK A.

Failure: FDK A is not activated when left key optoin is not enabled. But in touch screen FDK A is activated. FDK I is not activated when left key option is enabled.




Summary:
Statement Forms based printing does not work

Description:
Product RFC: 392679 has broken form based printing for Statement and Journal.

In trFormsPrinter::VendorProcessing the conversion function is attempted to be dynamically loaded with 3 parameters (printbuff, NULL and bufflen) the converstion functions ConvertStatementForms and ConvertReceiptForms now take 4 params which means when the 4th parameter is used then the application access violates.

This has been in since IT7. So regression testing will need to be checked for this RFC



Summary:
Dual printing solicited command not sent

Description:
Test 3.1.2 in document 5.6.1 universal printing doc.
Step 9: After sending the ACC_PAYM messgae from NDCHost to ATM the test indicates that a solicited status message E02 should be returned, this did not happen. 
IT9 on machine BAY 15.



Summary:
INIT BNA fails when some suspect notes are at throat after power-up 

Description:
In Catmode 2,2 suspect notes are rejected back and when they are at throat machine reboots,on power-up after starting application and going to supervisor and doing INIT BNA ,it fails.
Tets Failed:5.7.1.1.1.1.5.8.2 From CIC 1.2 ITS



Summary:
Audio is not playing in the Four FDK seletion('E')state.

Description:
AANDC            : 93.03.00.09
XFS                  : 95.00.00.10
Testcase          : 5.6.7.5.13.11.

Scenario          :

                       1)Start the Apps and NDCHost.
                       2)Make sure VG is Enabled.
                       3)Load Alt1_AudioGuidanceMsg.txt message  file in to NDCHost and send all the messages XML001- XML 063.
                       4)Load vgload.txt in to NDCHost and send the messages from LOAD01 to LOAD22, CONFIG and LOAD23.
                       5)Start a VGSession by pressing the trigger key on Standard audio configured SST, or By inserting the head jack on Enhanced audio configured SST.
                       6)Select English as the language by pressing the numeric key 1. Insert the Card and this will set all the remaining options to default.
                       7)Again select the language ENGLISH and proceed to next state('E')state.
                       8)Listen the audio and select the appropriate selection.

But,here the Audio is not playing in the 'E' state to make a appropriate selection.



Summary:
TAR 381690 - AA-NDC: Return to last mode & auto restart into supervisor exits to wrong mode

Description:
On Power fail after entering supervisor from in-service mode. On reboot, the ATM comes up into supervisor, but on exiting supervisor, goes into out of service mode instead of in-service (previous mode).



Summary:
TAR 377795 - FIT Data used during PIN Entry in T-state is not correct

Description:
When a motorised card reader is used with the T-state, as state 000, the PIN 
is collected within the T-state. After the first transaction from power up, 
each transaction appears to use data from the previous transaction FIT
table, at least the PMXPN value. 

The PMXPN value of the relevant FIT entry determines the maximum number of PIN digits that can be entered, and PIN entry should terminate automatically after the maximum digits have been entered, or if the enter key is pressed after a minimum of 4 digits have been entered, but less than the PMXPN value.




Summary:
 In VG test Case (RefNo  5.6.7.5.24.1) when the Audio device is fatal then no error screen is coming on supervisor.

Description:
In the test case 5.6.7.5.24.1 we fatal the tha Audio device by Uninstalling the TTS engine then after running the AANDC appplication , no error screen is showing on fault disply.

AANDC : 93.03.00.09
XFS :- 5.00.00.10

here is the test case steps.

1) Make the sound driver fatal on enhanced audio sst and start the Application core and Send GIS command.

2) when the fault is displayed on EOP and supervisor entered ,press 26 (In Result no E1811 screen no is showing on fault display).




Summary:
Feature Required To Allow Application Links To Be Managed Better From Author

Description:
Application Links added for the state type split development introduced more applications and configuration requirements on the product.  These need to be easily built and managed from the Author.



Summary:
IP update for G403890 'There are two receipts delivered,When R00 Pre header has a Form feed'

Description:
APTRA¿ Advance NDC
Reference Manual  c. page 5-22

To replace the para:

Note: Pre-print screens must not contain form feed .. etc..

Form feed controls:

Where the host data contains Form feed control (0Ch)  any remianing R01 data is added before the page break.
Screen `R00¿ is printed on the second and subsequent receipts,  when produced by the same print function.

With R00, any Form Feed Characters are converted to spaces before the R00 is pre-pended to the host data.

R01 Form Feed characters will cause any remaing host data to be added before the Form Feed.  If there is remaining R01 data after the form feed this is not printed.



Summary:
TAR 381898 - Screen number appears on screen when nesting screen with NULL data

Description:
AA NDC 03.02.00
   
   The problem reported here deals with the appearance where screen messages
   containing NULL data are nested. In the vanilla release of AA NDC 03.02.00 a 
   screen of this structure would not be displayed however after TAR fix 375303 
   is applied the screen number is displayed.
   
   This is easily recreated. Delete the custom.dat file, run the application
   and apply a fresh download. Change the card accept screen (010) to nest a
   new screen (for example 999) and then add a new screen 999 with no data to
   the message file. 
   
   If the vanilla 03.02.00 product is used (specifically the vanilla release
   version of SSDSNDCCust.dll) then the card accept screen is shown with no
   overlay.
   
   If the SSDSNDCCust.dll (as released by TAR 375303 and dated April 25 2008)
   is applied and the above sequence repeated then the number 999 appears
   overlayed on the card accept screen. The screen number should not be
   presented in this scenario.
   
   This has been demonstrated to Euan P. If any further details are required
   then please contact Duncan harvey ext 2508.




Summary:
TAR 380999: AA-NDC : Hang in CustomisationLayer whilst transitioning between States

Description:
See TAR for details.

Note that the hotfix for TAR 380999, updated revisons are as follows:

TAR 372866 
	FormConverter.cpp		1.4.1.2	- Member Update
TAR 366826
	MatrixPrinters.reg		1.2.1.2.1.2	- Member Update
	PersonasPrinter.reg		1.3.1.2.1.2	- Member Update
	UniversalPrinters.reg		1.4.1.2.1.2	- Member Update
	Converter.cpp		1.22.1.2.1.2	- Member Update
	GenericPrinter.cpp		1.34.1.2.2.2	- Member Update
	GenericPrinter.h		1.25.1.2.1.2	- Member Update
TAR 380999
	GenericPrinters.cpp		//MY UPDATE	- Change revison 1.34.1.2.2.2



Summary:
(ST1- CPM) q2E ( Device Error) Status message is received for every successful cheque transaction

Description:
XFS 95.00.00.05
AANDC 93.03.00.08

Scenario :
Problem 1 : Perform a Cheque deposit Transaction and we see a q2E status message for every Cheque Transaction

Problem 2: for every Terminal command ( Get Supplies, GET fit, Get hardware info), responses seen are wrong for ST1 CPM.



Summary:
ValidateXMLDataWithSchema is not generalized function, it is specific to Barcode reader XML files

Description:
ValidateXMLDataWithSchema is not generalized function, The code is more specific to Barcode  XML files



Summary:
Journalling AER at SOD should be set even if NoteTypes cannot accessed at the SP

Description:
This is observed executing tests 5.4 from AER UTS.

AER is journalled prior to decide whether reset is required or to be bypassed. Because of this it is printed to JP that AER is attempted & yet if it is bypassed, does not have any results as RESET FAILED or RESET SUCCESSFUL printed. Expected that when AER is not attempted in SOD, Journalling shouldn't be done. 

Please refer to the attachments tab for more details



Summary:
Misrecognition error printed on Journal when notes in escrow are not replaced

Description:
This is observed executing test 1.2.6.4 from CIC regression spec.

Do recurrent deposit transaction until  (4th) cassette is reported full. In this process, check the journal print to see if mis-recognition error is reported at any instance. Expected that Mis recognition error should not be logged in this case.



Summary:
An extra w0 message with fatal fitness is reported after w3 message

Description:
This is observed when executing test  2.3.16 from INIT BNA UTS

A w3 message is reported with fatal fitness later followed by this is another status message w0 yet with a Fatal condition.

From the debug logs, CheckDeviceAllOK is True, yet cassettes are still all reported as Fatal.

applica.. 12:42:15.140 CheckDeviceAllOK = True
applica.. 12:42:15.187 Activate - <14b1411na2> - Prepare Fitness & Supplies Fields for Status Msg
applica.. 12:42:15.187   AllBNAFitness  = 00014002400340044256425742584

Please refer to the attachements for more details



Summary:
(ST1 - CPM ): Cheque is not getting Endorsed

Description:
Build:
XFS 95.00.00.05
AANDC 93.03.00.08

Scenario:
1.Perform a cheque deposit transaction by sending the CPM_TR11 reply. which will deposit the Cheque and Endorse the data on back of the Cheque. there is no Endorse data printed on back of the cheque.

This problem is seen only with ST1 CPM, on all other CPMs its working fine.



Summary:
Audio unsol message format which is reported to Host and Printed on journal is wrong

Description:
Build : AANDC 93.03.00.09

Scenario :
1. Delete the Audioguidance XML file, Start the Applications.
2, Load the Messages from Load1 to Load24....there is a Unsol message reported to host.
Device identifier showing as "Da" in the unsol where as it should show only "a".
unsol is printed on the journal but device identifier showing as D instead of a.

test spec also needs to updated , as the test spec says that we will be getting "Da" in the unsol which is wrong.



Summary:
When MAST icon on rear  pressed while in supervisor on front, OOS screen is not shown but desktop is seen.

Description:
XFS IT10 + ANDC IT9

Test no: 5.2.31

Recreation steps:
1. transfer supervisor menu from rear to front.
2. Enter Password. Menu displayed on front.
3. Press MAST icon on rear interface.
4. OOS screen is not displayed. Application core window disappears.
5. Exit diagnostics on rear.
6. Supervisor menu appears in front.



Summary:
Cash Out Reset is called at application startup where the last trasaction is Cash In

Description:
Cash Out reset is called at application startup even though the last transaction was a cash in (TransactionType registry is set to 1). This is due to a small bug in ApplicationCore GBRU SOD code - Wrong variable names are being used while reading the  TransactionType and ResetRequired registry values.

Also, it has been noticed in the GBRU SOD code that an explicit reset is being called if the device is a normal dispenser. This is not required because the normal dispenser gets reset automatically when an instance of cash handler is created.



Summary:
(ST1 - CPM) Cheque is not Getting captured

Description:
Build:
XFS 95.00.00.05
AANDC 93.03.00.08

Test case number:  5.9.1 and 5.9.2 from 5.7.1 CPM.Doc ( with option 83 set to 000 and 001)
Cheque is not getting captured, Showing the device error message and sedning unsol message (Q2W and Q2C) 



Summary:
Dynamic Menu State

Description:
1.FDK's are mapped to only one device 
2.Dual Cash Dispenser is not supported. 



Summary:
Implementing the availabilityof CPM and Coin Dispenser in AANDC 3.2 DeviceAvailibility dll

Description:
DeviceAvailability dll at first was implemented for AANDC 3.0. Now it's been updated for ANANDC 3.2. As part of it support for Coin Dispenser and CPM have to be  included.



Summary:
Configurable retract destination (Option 74) enabled does not include suspect note count  

Description:
With option 74 enabled, do a refund transaction with a good  note & suspect note. Later, when 3 DISP CNTRS and 58 DISP BNA CNTS are checked, counts reflect information only about the good note inserted and there is no information about the suspect note.



Summary:
unsolicited mesage functionality is not integrated properly with IT build 9

Description:
Unsolicited message functionality is not integrated in customisationLayer.mpj file properly. In the CardRead state we are sending 
unsolicited message and for that unsol message workgroup should be the start workgroup in idle loop. But , in IT build 9  it is not selected as the start workgroup .




Summary:
USERFUNS.SCR file needs to be updated for sending unsolicited message

Description:
Userfun.scr file is not updated to call external function "AudioUnsolicitedMessage" to support to send unsolicited message to host. This is causing application to crash.



Summary:
SilentDebug remote start information contains missing information

Description:
Developers Guide on using SilentDebug remotely is missing information.

Current Pubs contains

Dim objSilentDebugStore
Set objSilentDebugStore = CreateObject(¿COMCDISTORE.COMCDIimpl¿)
On Error Resume Next
`1 - Integer Type
If objSilentDebugStore.setStoreId (3348,1) = 0 then
objSilentDebug.Data = 1

Upate should be

Dim objSilentDebugStore
Set objSilentDebugStore = CreateObject(¿COMCDISTORE.COMCDIimpl¿)
On Error Resume Next
`1 - Integer Type
If objSilentDebugStore.setStoreId (3348,1) = 0 then
objSilentDebugStore.Data = 1



Summary:
Night safe - Yes/No screen is displayed for a period of 10 seconds and then a transaction request screen gets displayed when 'NO' is selected at timeout screen and close the dore immediately.

Description:
Build:
XFS 95.00.00.05
AANDC 93.03.00.08
HardWare:SST With Night safe or 'night safe simulator device'.
Reference: Test 5.5.7.12.

Scenario:
1.Start Applications and send SCREEN00 to FIT00045 and then GIS from NIGHTSAFE file.
2.Insert card and select English.
3.Enter PIN and select Balance.
4.Send the transaction reply NSAFDEP.
5.Open the Door and Allow the transaction to time out.
6.Select 'NO' at timeout screen and 
   For Enhanced :- Close the door immediatly.
   For Basic :- Drop the bag and close the door.

Expected result: transaction request screen immediately gets displayed after cloing the door and there is no 10 seconds delay.

But the transaction request screen is not immediately gets displayed after selecting 'NO' at timeout screen and closing the door. Yes/No screen is displayed for a period of 10 seconds and after that transactio request screen is displayed.



Summary:
(Form Based)First line on the receipt print Always taking offset as 1,1 

Description:
XFS 95.00.00.10
AANDC 93.03.00.09

Note: we are seeing this issue wit IT 9, it was working fine in IT 8

Scenario:
1. Start the Apps and Load APPC, LD
2. Perform a transacrion by sending NXT_PRTN from reps_1 message file.( edit the printer flag to 2 to print on receipt)
first line is pinted with out any margin, rest of the lines correctly printed with Margins.

This is working finw with raw data print.

Logs,Scan of the receipts and Form file attached.



Summary:
Night Safe -  Insert bag screen is not displays for a period of 10 sec after pressing cancel key when deposit is initiated.

Description:
Build:
XFS 95.00.00.05
AANDC 93.03.00.08
Hardware:SST with Night Safe or 'night safe simulator device'.
Reference:5.5.7.11

Scenario:
1.Start Application.
2.Send SCREEN00 to FIT00045 and then GIS from NIGHTSAFE download file.
3.Insert Card amd select English.
4.Enter PIN and Select Balance.
5.Send the transaction reply NSAFDEP.
6.Open the door and press Cancel.

Expected result:   Insert bag screen displays after pressing cancel for a period of 10 seconds and then a transaction request screen gets displayed.

But Insert bag screen is not displays for a period of 10 seconds, there is no 10 seconds delay.

I tested on both Basic and Enhanced ( night safe simulator ) . In both getting same result.




Summary:
Test FDK and Touchscreen combination.  Also consider interatcion with Service Assistant selection)

Description:
6631/6636 products will have this capability to allow us to compete against Omron in SEA



Summary:
Barcode - test Class 1 reader as this is ROHS and is being shipped when barcode reader is being ordered

Description:
Found that when they let the barcode read timeout (pressing NO on the 'More Time? Screen), then they repeat the timeout on the subsequent transaction, the barcode reader goes fatal, and they have to clear the fault in SysApp before they can use the barcode reader again. 



Summary:
w4 status message includes returned counts

Description:
This is observed executing test 1.4.5 from AER ITS that a w4 message included returned counts. 

With retract disabled, initiate adeposit transaction and send BNA_REF as the transaction reply. Do not remove the notes at exit throat and device reports fatal with w4 message. This mesage included the returned counts but expected w4 should not include any counts.



Summary:
Missed some of the Existing Registry entries in AdvanceNdc.reg

Description:
Missed some of the Existing Registry entries in AdvanceNdc.reg file while updating  Next State Number for Cardless Transaction



Summary:
Envelope is not getting retracted after a envelope Suspend condition scenario is cleared

Description:
BUILD:
AANDC 93.03.00.08
XFS 95.00.00.10

Note: This is tested on Seperate Envelope depository/Dispenser.

Scenario:
1. Start the Applications and Load APPC , LD.
2. Insert and card and select Fast cash.
3. Send the DEP_910 reply from reps_1 message file.
4. Envelope is dispensed, don't take it.
5. Hold the Envelope depository Shutter so that it can't open.Card is ejected , machine moves on to suspend state with out retracting the envelope.
6. After 2 minutes ( device suspend time out), depository is cleared,.
7. Send a GIS now, Machine is coming to inservice with out retracting the envelope sp Envelope is still at Exit.

on a Normal scenarion , Envelope is getting retracted in close state when a Succesful deposit is done with out taking the envelope.

Logs attached.



Summary:
SNMP inservice trap is not being shown in Trap Receiver after the suspend timeout

Description:
When a card is jammed at the entry slot, application proceeds to suspend mode with SNMP suspend trap shown in Trap Receiver. After the suspend timeout, application goes to in service, but no SNMP inservice trap is being shown in Trap Receiver that the application is inservice.
This problem occured both with Gasper implementation SNMP and NCR implementation SNMP.

Reference: Tests 3 and 4 from 5.10.11 SNMP Agent Regression Testing

Tested with XFS 5.0 IT10 + ANDC 3.3 IT8 + SNMP Agent 93.04.00.57



Summary:
Capture functionality not functions correctly when the statement is at the throat of the device.Statement is not captured when the statement is at the throat of the device. 

Description:
Build:

XFS 95.00.00.05
AANDC 93.03.00.07
Hardware: SST with Open document printer.
Reference:Test 5.7.14.1.4.4.11

Scenario:
1.Insert Card and Enter PIN.
2.Select Fast Cash and select any amount.
3.Perform a statement print transaction and send the transaction reply STATCONT from NDCHost.When statement is presented,do not take it, allow the SST to timeout and the statement to be captured.

Expected result: Statement MEI is flashing when statement is presented.Statement is presented. Statement is captured. MEI is turned off when statement is captured.SST return to IDLE.

But statement is not captured when statement is presented,not taken it.





Summary:
Wrong handling for when Invalid notes Taken just as Timer 78 expires.

Description:
Procedure:
1. Insert combination of good+bad notes
2. Invalid notes are rejected.
3. Remove the invaled notes when the timer just expires(both should be almost in synchronisation. Removing the invalid note     
    and time out)
4. Hardware Malfunction screen,  w4 message is reported immediately followed by confirmation screen
5. Then I select refund on confirmation screen. 
6. Notes are refunded and after I remove the notes device goes fatal and a w4 message is reported again.

Step 3 is due to Taken Caller still being listened for even when Timer 78 has expired. Step 6 needs further analysis, to see if it is fixed by fixing the Step 3 issue, or if it is a standalone bug.



Summary:
Sideways Receipt cancel functionality : No G4 message is sent to the host when cancel key enabled and pressed cancel at the time of statement is printing.

Description:
Build:

XFS 95.00.00.05
AANDC 93.03.00.08

Reference:Tests  5.7.14.1.3.8.3,5.7.14.1.4.8.3

Scenario:

1.Enter Supervisor
   Select 5 - CONFIGURE
   Select 6 - MESSAGE MODE
   Enter 10007
   Exit Supervisor and return to In-Service.
2.Insert Card and Enter PIN.
3.Select Fast Cash and Select Any Amount.
4.Perform a Print Statement and Wait transaction and send the transaction reply SIDEWAYS from the Host. While the statement is printing, press the CANCEL key.

Expected result is The statement is being printing. The Cancel key is enabled this time, the beep from the key press is heard and the printing stops.A printing cancelled unsolicited (V4) is returned to the host.
But The Cancel key is enabled and the beep from the key press is heard.A Printing Cancelled Unsolicited (V4) is not returned to the host when cancel key is pressed.




Summary:
Correct information is not reported in response to the terminal command Send Hardware Configuration Information when the Night safe is not configured.

Description:
Build:

XFS 95.00.00.10
AANDC 93.03.00.08

Hardware: SST with No night safe or 'night safe simulator device' attached.
Reference:5.5.71

Scenario:

1.start applications,Debug log and NDC Host.
2.Send the Send Hardware Configuration Information terminal command HWCONFIG (1fsfsfs71) from NDCHost to get hardware configuration only.
Expected result is Hardware configuration field g4 does not include DIG 'K' as the NDC is not configured.But we are getting the Device  identifier 'K' shown in the respose to the get hardware information.



Summary:
TAR 382509:  Timing of card capture bin overfill unsolic

Description:
When LFCC Overfill condition is detected, Advance NDC doesnt report Full to the Host until enter / exit supervisor.

It should report full when LFCC Maximim Cards is reached.



Summary:
Missing 'DisableThreadLibraryCalls' function call from DLLMain

Description:
Some modules are missing a call to 'DisableThreadLibraryCalls' in their DLLMain entrypoint.  This is recommended for multi-threaded applications to help reduce the pweformance overhead for initialising dlls.  ALL Advance NDC DLLs should have this set.

So far found to be missing in NDCDATA/NDCCUST/ActiveX controls/AudioGuidance.



Summary:
Second fatal message for the card reader is not reporting when Card reader and Dispener become fatal

Description:
While Running 5.6.94, 5.11.53, Test1-To test that when a Suspended device is cleared, but the Suspend condition remains, the device goes fatal and an unsolicited is generated.
When Card reader(MCRW) and Dispenser become fatal we suppose to get second fatal message"12 000  D1 4 20060000B9 4". But we are not Receiving it.
Logs Attached for more info.



Summary:
Printer Initialisation Registry entry missing from the Build 

Description:
Printer initialisation Registry Option is not included in Build 8



Summary:
Envelope depository Doesn't report fatal and 43 INIT DEPOS shows Depository initialised,after opening the interlock

Description:
Build:
AANDC 93.03.00.08
XFS 95.00.00.05

Scenario:
1. Start the Applications and Load APPC,LD
2. Insert card and select Fast Cash, Send the DEP_910 from Reps_1 message file.
3. take the Envelope Dispensed from Dispenser.
4. Depository Shutter gets opend now, Open the safe door/interlock now.
5. Deposit gets failed, Take the card ( Fatal Status message sent to host as below)
 13:18:38  # 81    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F0[Unicode-x1C]4[Unicode-x1C]550000000000010000000001[Unicode-x1C]1]
13:18:39  # 82    [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]F2[Unicode-x1C]4[Unicode-x1C]55[Unicode-x1C]1]

6. Send the GETFIT terminal command now, fitnees show as F0. Fault Display doesn't show anything.
7. Go to Supervor and run 43 INIT Depos in replenish menu , it shows deposit initialised.Sysapp clearly shows depository interlock open message.

There are 3 issues here afer opening the depository interlock ( this is only with interlock scenario , if we do some other Jam/BIn removals, Fitness and INIT depos works as expected)
1. FItness showing as 0 after it went Fatal
2. Fault display doesn't show anything.
3.INIT Depos shows depository initialised.

Logs attached



Summary:
OOXFS logs not getting logged in OOXFS debug window after clearing all the windows

Description:
AANDC 93.03.00.08

Scenario:
1.Open the Debug logs, Perform a transaction, OOXFS logs are getting logged now.
2. Clear all windows by going to "Edit and selecting Clear all windows "
3. All the windows are cleared now.
4. perform a transaction now, there are no OOXFS logs being logged in OOXFS window, rest of logs are getting logged properly.

We need to restart the Applications to get the OOXFS logging.



Summary:
Application going to transaction selection menu when we send GIS just after Card reader clears its suspend condition

Description:
XFS 95.00.00.05 ( Tried with XFS IT 10 also,still the same problem)
AANDC 93.03.00.08 

Scenario :
1. Start the Applications and load APPC and LD.
2. Machine comes to online. insert and hold the card so that card cann't get in to the reader.
3. Application moves on to suspend mode.leave the card at exit.
4. after 2 minues, suspend condition is cleared by the device.
5. Send the GIS from the host now, Machine comes to online amd Moves on to Transaction selection menu and i can do a transaction also ( with out inserting the card )

this works fine if we wait for 5 minutes AANDC Suspend timout.

Logs attached



Summary:
When DownLoadHtml flag is set to invalid value, temp folder is not getting created in c:\ssds\dll

Description:
Test case 5.6.1.5.10,TEST WHEN THE DOWNLOADHTML FLAG VALUE IS invalid - steps 5 and 6.
AANDC IT build 8 and XFS 5  IT5

When DownLoadHtml flag is set to invalid say, hex 10, and when download DYNDEF1-DYNDEF5 is sent, Html files 010,111,112 are not getting created in temp folder in c:\ssds\dll. Also 126,013,172 are not getting created in C:\Program Files\NCR APTRA\Advance NDC\DisplayManager\Screens\html folder.




Summary:
Application 'crash' where Hardcopy backup and VC/PrintToJournal used.

Description:
Where a VC is used with PrintToJournal and the journal head is open then closed the application core 'disappears'
upon the first print that would cause reprint.
Athena USB journal. ANDC 3.3 build 8. no event log or debug log info produced.
Hardcopy backup ok without exit active.

If this can be tested with another exit in the first instance.



Summary:
Forms: Create the windows font files for character sets

Description:
Priority is International 6 for the Euro symbol (24), but also need to create other missing character sets (i.e. International 3-5 and Arabic 2-6).



Summary:
VoiceGuidance - REGTOOL5.DLL needs to be registered

Description:
AANDC 93.03.08 - The VG dependency dll REGTOOL5.dll from SSDS\DLL folder should be registered by AANDC.



Summary:
AER Lite should not try to Reset device if all cashin cassettes are Fatal or a Retract bin is Fatal

Description:
AER Lite is trying to reset the device if overall device status is Fatal. However, the reason for this may be that the cassettes are all Full, and Resetting the device is not going to fix that. Also if the cassettes are Fatal for some other reason (INOP, MANIP, etc) reset will not help. So, AER should be avoided when all the cashin cassettes are fatal, or when one Retract bin is fatal.

Reported by Vinitha:
test no: 5.7.1.3.1.1.2(384510 - FD tests)
1.cass 1 and 2 are full but device is not showing fatal.
2.when tried to do another transaction,then only device went fatal showing a h/w malfunction screen.
3.AER is already enabled on sst,so it cleared this fatal condition and showed as GBNA Reset OK. 

At this step I have a doubt if AER should be initiated. Eventhough the the error is cleared,SST cannot be used for deposit as the 2 cassettes are already full. Should reset be OK here or should it be still fatal as FD says FATAL after sometime only

4.at this stage fitness(GETFIT) is still reported as 4.
5.now after a few seconds,FD is showing as device fatal.





Summary:
Fault Display should report BNA Fatal when all Cashin cassettes Fatal or one Retract bin fatal

Description:
If all cashin cassettes are Full then it reports them as Full but it does not show overall device status as Fatal.

Following steps are observed while executing FD tests to change deposit cassette state from FULL SOON to FULL state.

test no: 5.7.1.3.1.1.2(384510 - FD tests)
1.cass 1 and 2 are full but device is not showing fatal.
2.when tried to do another transaction,then only device went fatal showing a h/w malfunction screen.




Summary:
In Supervisor,3 DISP CNTRS,ESCRW RFND count is always incremented with suspect note inserted,With Registry Set up 8,(NO Refund of cat3 notes) for  Bna2,the suspect notes are retained by the ATM.

Description:
On BNA2,for registry setting
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRASelf-ServiceSupport(NCRFeatures)\RS232BunchNoteAcceptor\Operational Parameters
Key ECB Refund Category 3 Handling as 1, then the cat3 notes are not returned back on Refund.
But for tests 5.7.1.1.2.2.2.4.1.2  , 5.7.1.1.2.2.2.4.2.2 ,5.7.1.1.2.2.2.4.4.2 , 5.7.1.1.2.2.2.4.6.2 from CIC ITS,the ESCRW REFND count is getting incremented by the total of suspect notes and valid notes inserted.
All the counts in 58 BNA counters are 0 for tests 5.7.1.1.2.2.2.2.1.2,5.7.1.1.2.2.2.2.2.2,5.7.1.1.2.2.2.2.4.2





Summary:
Forms: Receipt Footer Worker missing Forms Processing

Description:

Receipt Footer Worker triggers of RAW data commands only - need to update for FORMS printing also.



Summary:
MAST - Configure > TCP/IP Configure menu doesnt have an active task flag

Description:
MAST - Configure > TCP/IP Configure menu doesnt have an active task flag, meaning if in the middle of setting up comms, and MAST pressed, or Auto Exit initiated, will exit in middle of configuration



Summary:
MAST - When pressing MAST Icon when cash handlers begin to cycle at SOD results in Supervisor Present worker mError due to not being able to find Mode Switch

Description:
MAST - When pressing MAST Icon when cash handlers begin to cycle at SOD results in Supervisor Present worker mError due to not being able to find Mode Switch

This is caused by a bad hresult from a GetInfoAsync command



Summary:
Wrong Constant Name used in CashInCommonImplementation wsc file

Description:
A wrong constant name is used in recycling code which will affect the dispenser counts on dual dispenser config.



Summary:
For the test non SMS  mode entry is enabled when 9th state entry is set set to NND..000, Buffer B  value doesn't contain information entered by user

Description:
AANDC IT8 and XFS IT 95.00.00.05

Test case:5.6.4a.5.11.1
Steps to recreate:
1. Load sms.txt and change state data from 015H02525502617015255255001 to 015H02525502617015255255003
2.Send GIs
3. Select transaction test from transactionselectscreen
4.Select Pay from account, current account
5. Enter account number and press FDKA
6. Check the transactionrequestfor Buffer B value.

Buffer B contains no value.

7.Complete transactionbysending FAST 5 replyfrom Reps_1.txt



Summary:
In single GBRU system testing Dispance counter is not updating while BNA counter is updating

Description:
In single GBRU testing whenever we are depositing the notes then Dispance couter are not updating and it is showing some -(minus) value and also it is not updating in the GETCOUNT information.

AANDC version:- 93.03.00.08
Xfs Version:- 95.00.00.05
Test log refrence number :- 5.6.6.5.5.1.3.2

Step to find this issue.

1) Enter supervisor and clear BNA

2)Send option 15 as 1 and option 45 as 73.
3) Deposite the cash
4)send OOS followed by GETCOUNT.(in GETCOUNT information Dispance counter are not updating)





Summary:
The 80 column statement printer does not print all 80 columns even after returning from Supervisor.

Description:
AANDC Bulid : 93.03.00.08
XFS               : 95.00.00.05
TestCase      : 5.6.77.2

Scenario       :
                    1)Start the Applications.
                    2)Load message file APPC and message file ANGELLD in NDCHost,
                        Send the list file LD5085NT.
                    3)Load the message file ¿REPS_1.txt¿ and edit the message STATCONT so that the data to be printed is 80 characters long (4    022  3456Q079 008NDC DEMO - STATEMENT PRINT 8¿¿)
                    4)Insert a card and initiate any transaction.
                    5)Send the modified STATCONT transaction reply.
                    6)Ensure only one line of data is printed with 80 characters on it.
But, here it is printing the data as 40 columns per one line.
                    7)Enter Supervisor,select DIAGNOSTICS(7) option and do the Selftest to makesure Stateprinter is good.
                    8)Leave the DIAGNOSTICS and Exit from Supervisor.
                    9)Select any transaction and send the modified STATCONT reply.
                   10)Ensure only one line of data is printed with 80 characters on it. 
But,here it is printing the data as 40 columns per one line.

We verified the same case in PERSONAS machine,it is working fine.





Summary:
For  test case  5.6.1.5.35, TEST DM BANNER WHEN THE PROMOTE IS INSTALLED, ITR reply contents are not displayed on NDC screen

Description:
Steps to recreate:
1. Follow pre-requisites of test 5.35. 
2.Insert card
3. Select balance transaction 
4. Send ITR as reply
5. No account details are displayed on NDC screen from ITR reply.
6. Press FDK A
7. No reply sent
8. TXn time out and goes to close state.
After few minutes, machine reboots.

Tested with XFS build 95.00.00.05 and AANDC IT8 build



Summary:
Crash! AppCore crashes often when using cardless transactions.

Description:
This became prevalent with andc3.3 IT8 build during CIC testing on top of XFS5 IT5. The event log has no info, or one entry saying exception occurred in AppCore. It would occur in a few places during CashIn trans but it is also reproducable using Balance Enquiry followed by Display & Prnt TReply. Issue has now been reproduced on XFS4.5.1 (with latest GBxx components), using BNATest download with TABLE1 modified to bypass PIN Entry (first 002 replaced by 003), and cardless reg settings set as shown with attached logs. 

Crash would occur every time in same place if following the same steps. If inserting a card rather than using cardless (even with cardless reg settings still set up) it would not crash in same place. And then doing a cardless trans following a trans with a card, it would no longer crash.



Summary:
COMMUNICATIONS FATAL is displaying in the FaultDisplay instead of COMMUNICATIONS CLOSED when the "VPITCPIPCommsService" process is closed.

Description:
COMMUNICATIONS FATAL is displaying in the FaultDisplay instead of COMMUNICATIONS CLOSED when the "VPITCPIPCommsService" process is closed.
Sowtware details:
XFS : 95.00.00.05.
AANDC : 93.03.00.07.

Reference:Test 5.7.23.5,5.7.23.8.

Logs are attached




Summary:
For the test 5.5.45.8.1 Paper Journal Disconnected and Dual Configured, Disp Config is showing JRNL= Dual instead of DISK

Description:
Steps to recreate:

1.In supervisor go to 5. Configure menu
2. Select 30 set journal mode 2 (dual)
3. Check disp config ( JRNL= DUAL)
4. exit supervisor and power down SST
5. Disconnect Paper journal printer
6.Restart application.
7. Check in supervisor, Disp config option

Shows JRNL= Dual instead of DISK.
but the byte 7 of Send config information shows ej configured.



Summary:
For 5.7.6.3.4.6 settlement tests( Tests that PIN block can be  generated during settlement transaction), application idling in +++Invalid sate.

Description:
After sending download from state1tm SSt is not coming to GIS. It idles through +++ invalid next state and then to default close state.



Summary:
Duplicate worker ID needs to be replaced

Description:
Raised by Kazior, Zbigniew...

During migration AANDC 3.0 to 3.2 we have found duplicate worker ID: 8m5k1 in 3.0.2 is an Integer Store (8m5k1 ¿ count) but in 3.2.1 is a Director (8m5k1 ¿ Set Journal Level). 

I appreciate if you replace that Id in next version of AANDC as I understand the workers IDs should have been unique. We have overcome it by replacing that worker but it took us some time to find out why we cannot import some functionality and had to replace section by section to find out what is the issue.


Input from Craig...

PS probably were given a PS Customisation for 3.0.2 (I don't know what the customisation was) and then they tried to migrate their customisations to 3.2 where the same componentID exists!  In 3.2 the worker is related to Set Journal Level.  So, maybe this worker was introduced by Mahade as part of an Extended Journalling PS Customisation?  Then perhaps Sambit brought the Extended Journalling customisation into the core product but did not do a Module Copy?

Anyway, this is just my thoughts on what may have happened.



Summary:
For test case 5.5.3.1.3.11,TEST CASE 22 when browsecomplete1NextState is pressed state flow goes to timeout next state instead of browse failed next state

Description:
Steps to recreate:
1. Send WebexitDownload.msg from screen00 to state007
2. Send WebInnvld message and GIS
3. select webexit transaction
4.Select Browsecomplete1NextState 

The screen does not show browse failed but  a normal transaction selection screen is shown ( which is timeout next state) and machine rebooted after few minutes.




Summary:
Information Entered is not logged onto Journal when JournalEntry is set to true

Description:
While testing SMS mode, if JournalEntry is set to true and information entered (say account number), the information need to be logged onto the Journal as INPUT: Data entered by user.
But the message 'INPUT:%' is the only message that is logged in the journal without the data entered by the user.

Tested with XFS 5.0 IT8 and ANDC 93.03.00.08

Reference: Test 5.10.7 from Card Holder Keyboard testing



Summary:
Clearing the content of Key data in NDCKeyboard.xml doesnot go to close state

Description:
While testing SMS mode, clearing of the key data in the NDCKeyboard.xml file is not going to default close state but is going to the information entry state

Tested with XFS 5.0 IT8 and ANDC 93.03.00.08

Reference: Test 5.10.3 from Card Holder Keyboard testing



Summary:
Blank Statement delivered in the close state for every Statement transaction ( USB Statement printer)

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

This is tested with USB statement Printer on a selfservice machine.

Scenario:
1. Start the Apps and load APPC and LD.
2. insert card and select fast cash, and send the reply STATCONT from reps_1
3. there is a statement delivered now, select NO on the "Do you want to do more tarnsactions " Screen.
4. Application moves on to Close state and there is a blank Statement delivered now.

This is also tested on a SDC statement ( persona machines) and not seeing this problem.



Summary:
TAR 381534 - BNAFitness changes after SOD when no media in h/w present

Description:
At SOD  MYCUSTL.. 11:30:21.734 tmpBNAfitness is -1 (Missing)  And this is still the case at:  Applica.. 11:35:56.718 SUPERVISOR ENTRY TEST FOR BNA DEBUG BNA FITNESS = -1 (Missing)  But then goes to:  SAPACSu.. 11:37:42.140 BNAFitness = 4 (Fatal)



Summary:
TAR 376192 - BNA counts inconsistant between supervisor PRNT CNTRS and BNA CNTS

Description:
Customer simulated a simple jam case and switch to Supv mode to Init BNA to
clear the jam. The jammed notes (5 of them) are being retracted to the
Retract bin. They printed out the counters and found that the Retract counts 
are not consistent. For Supv Func 4 Prnt Ctrs, it's showing the retracted
count (5). But for Supv Func 59 Prn BNA Cnts, the retract count is 0. 

PS is in the development phase for a customer and in fact are already in the 
midst of testing the counters now. They can't wait for the new release (in
which it is planned to address this) unless it can be released soon, else
they need a patch as early as possible. 



Summary:
TAR 369720 - If notes are in the Escrow at power-up, Fatal fitness is cleared after Txn

Description:
If a terminal reboots while a deposit is in progress, notes may be left in
the Escrow. When this happens, the BNA will be reported as Fatal after the
reboot, but when the first transaction is completed, the Fitness is cleared
even when the transaction is not a deposit transaction. 




Summary:
When Alphanumerickeystyle is set to "SMS",pinpad is hanging some times while entering Account number.

Description:
While running the Test case:5.6.4.5.10.15 in log, i have seen an Issue ,When Alphanumerickeystyle is set to "SMS",pinpad is hanging some times while entering Account number.Logs also attached for reference.



Summary:
TAR 367589 - Shutter jam on Rollback with PostUserErrorOnSuspend set

Description:
This is for OCBC CashIn/Cashout pre-release based on AANDC 03.01.01  FGSC were informed that for a cash out issue the NDC team recommended OCBC use the registry key PostUserErrorOnSuspend.  Using this key, Jamming the shutter open on rollback (take notes then prevent shutter from closing) results in only an XFS System Error Event which cashin code does not handle. I've had it confirmed by the platform team that this is the correct behaviour for this registry setting. Cash in only handles XFS error events, not system errors.  I have logs etc and it is easy to recreate.  Net result is that the error is not correctly reported to the host (M-Status 22).



Summary:
IT8 Application Core Author Build Final does not complete successfully with Vanilla install

Description:
IT8 Application Core Author Build Final does not complete successfully with Vanilla install



Summary:
Wrong journal entries and counters  when a combination of p6 and invalid notes are entered

Description:
In Catmode 2 when counterfeit notes,suspect notes and valid notes are entered in combination,then in supervisor,3 DISP CNTRS counter for counterfeit notes are not incremented,also in confirmation screen,number of counterfeit notes retained is not displayed,instead they are included in valid notes count.In journal also they are included in valid note count.
similar is the case when in catmode 1 ,invalid notes are inserted in combination with suspect,counterfeit and valid notes.



Summary:
OOXFS log being flooded with mXFSSession events

Description:
Looks like debug that has been forgotten about before checking in. Probably should be assigned to Andrew K



Summary:
Author Apps - Valid 'Exit' workers need to be renamed so that they are easily identified

Description:
Currently there is nothing to easily identify these so that 'real' unconsumed signals may be missed when a completeness check is performed



Summary:
DM should make itself no top most when in Web Exit.

Description:
Web Exit should always use DM - never Web Exit Control - this raises the issue that Dm may still have focus when NDC tries to display - for this reason in a web exit Dm must always be NoTopMost







Summary:
DM: If VG Lock screen option is on and Topmost is sent for DM window then DM will always show previous html page.

Description:
If DMNoTopMost=0 and VGLockScreen option is on DM will continue to display previous html display rather than blank ndc screen.



Summary:
Problem with Cash Dispenser with Ad-hoc  general device testing

Description:
For test case  5.4.1.6.1.1, in step 1.1,the SST behaviour is as expected but in step 2, the machine is going to Suspend state not to idle .So in order to perform another transaction, GIS is sent. If GIS is sent, the device starts self clearing and the notes are retracted and the successive cash transaction is successful. After sending GIS, I hold the notes while they are retracted. Then for the successive transaction the device became FATAL not SUSPEND.



Summary:
DM: Add a Documentation Only install type to the Display Manager installer & comp.ini

Description:
When doing this change, also ensure the Component's full and abbeviated names are agreed with SCM (in APTRA Components list) and use the correct names in the installer.



Summary:
PresClient: DevPC install fails when trying to install Presentation Client

Description:
Activity log shows:
Error Return=0x00000643 - ERROR_INSTALL_FAILURE

and a popup was shown saying error when it failed



Summary:
Missing vgcore.h header file

Description:
VGCore.h header file need to be in C:\NTGlobal\Final\XFS\Dll to build the Author applications successfully. This was missing in ANDC 93.03.00.07.



Summary:
Changing ModeSwitchTrigger registry key to 1 is causing to Application crash.

Description:
5.5.27.7- Ensure the safe door unsolicited message is not generated when the SST is tampered.
To run this testcase registry key "ModeSwitchTrigger" value has to be changed to 1. This is causing to application crash.Eventviewer error is attached.



Summary:
VG: If NDCDisplayHook calls DisplayScreen API and returns -1 , AANDC is displaying blank screen with "6553" as data on screen

Description:
If NDCScreenDisplay hook wants to display it own screen and it does not want to allow AANDC to draw, it will return -1 which is causing to display blank NDCscreen.



Summary:
Receipt is not printed properly using font designator 'G'

Description:
ANDC-93.03.00.06
XFS-95.00.00.03

Test Case No: 5.5.11.1.2

Scenario:
Start Apps and Load BNATest into NDCHost.
Send all messages from OOS to GIS.
Perform a transaction and send the reply 910DPRNT to get the receipt.
Change the reply 910DPRNT as per test case (place "ESC ( G" before the text "NDC DEMO").
Perform the above transaction again to get the receipt.

Now the fonts on both the receipts are same(It is not the case).

Logs Attached.





Summary:
Receipt is not delivered for some values of ChequeSizeNormal/ChequeSizeRotated (Dynamic Forms = 1)

Description:
Dynamic Forms Set to 1 for Forms Printing

When ChequeSizeRotated is set to 10, no receipt is delivered at the end of the transaction. (Reference: Test 5.5.2 with Dynamic Forms = 1)

Also when ChequeSizeNormal is set to 9 or 76 or 10, no receipt is being delivered at the end of the transaction. (Reference: Test 5.5.5, 5.5.6, 5.5.7 with Dynamic Forms = 1)

Tested on ANDC 93.03.00.07 and XFS 95.00.00.05



Summary:
SST is not dialing up before initiating a transaction when Pre-Dial is configured

Description:
When Pre-Dial is configured from supevisor and restarted the SST, SST need to dial up after entering PIN before initiating a transaction, but SST dials up as in normal mode after sending a transaction request.

Tested with ANDC 93.03.00.07 and XFS 05.00.00.05

Reference: Test 2.14 from ANDC Dialup RFC Testing.



Summary:
Accumulated Suspect note count not incremented when suspect notes are retracted 

Description:
when cat3rollback is set to 1 on a GBxx machine and suspect notes are not taken from the exit slot after a timeout, suspect notes are retracted but the supervisory option 3 disp cntrs doesn't show the updated count.



Summary:
Promote coupon/advertisement support - dynamic content on the rear of the receipt

Description:
Promote coupon/advertisement support - on rear of receipt (front customer transaction info) or separate receipt.  Also possible to have coupons on boths sides on receipt.  Or a combination of coupon and graphic printing.

See attachments for more details.



Summary:
Forms Printing - Left Margin Control Setting should have no effect on the current print position.

Description:
Left Margin Control Setting should have no effect on the current print position.  Forms generation is adding a line feed ready to start printing on the new margin setting.  This causes an extra line feed to be added and 'TOP CASSETTE REMOVED' etc journals have an additional line space added.

Raw Data does not force a line feed and continues to print from the current line position.



Summary:
Application core getting crashed when we run 13 INIT STMT in replenish menu (USB Statement Printer)

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Scenario: 
Start the Applications, go to supervisor.
and select 4- replenish
select 13 - INIT STMT option, apps is getting closed now.

Note: this is tested on Persona Machine with SDC Statement Printer, its worrking fine there.

Logs attached.



Summary:
Issue with AANDC Passbook Printer Worker - Needs to  be aware when the last page in a book is reached and when the page is full signal New Book Required

Description:
The 2.6 versions of the worker used to work this way. The extra data (overflow) should be copied to a store for use  in a subsequent print operation
This is needed by Singapore PS - on top of AANDC 93.03.00.51 (special release of AANDC 3.2.1 + Passbook).
We will also need to integrate into the AANDC 3.3 product release.



Summary:
Issue with AANDC Passbook Printer Worker - Needs to Count the number of lines and when the page is full signal Page Turn Required

Description:
The 2.6 versions of the worker used to work this way. The extra data (overflow) should be copied to a store for use  in a subsequent print operation
This is needed by Singapore PS - on top of AANDC 93.03.00.51 (special release of AANDC 3.2.1 + Passbook).
We will also need to integrate into the AANDC 3.3 product release.



Summary:
ANDC needs to support 2nd extension state for Close State

Description:
A new extension state has been defined for the Close State to add new functionality and allow support for such things as Please Wait screen during Media Retract, etc.



Summary:
TAR 381568 - Full details from M-Data are not included in Device Status message

Description:
Issue Found in:
ANDC 3.02.01 with CIC 01.01.01
For the single digit MData , CIC returns 00 ( example: non zero digit x is returned as 00 afer Evalution of MData in the script).




Summary:
TAR 372090 - AA-NDC: Problems with 'extended add cash' functionality and documentation

Description:
Details supplied by Sergey below and Ranjith ok'd the raising of TAR.
Functionality and Documentation need fixed/updated: 




Anyway, access looks like legal - see resrvd.def of AANDC 3.2.1: 

'm02' '' 
' CONFIGURE' 
'' 
' 34 EJ OPTIONS 35 JOURNAL LEVEL' 
' 37 TCP/IP CONFIG' 
' 38 DIALUP CONFIG' 
' 39 GBXX CONFIGURATION' 
' 44 TROUBLESHOOTING' 
' 45 MAX STATEMENT LENGTH' 
' 47 EXTENDED ADD CASH' 
' 80 DISP CSH/ACC CONFIG' 
' 81 PRNT CSH/ACC CONFIG' 
' 82 GBNA.INI CONFIG' 
' 99 MORE' 
'' 

- it really works. 

Before this, we was going to raise RFC to make this menu accessible on NCR
ATMs. Fortunately, it became accessible without our requests. The only one
little step required now to make it working good. 

Sincerely yours, 
Sergey Kotov 

---------- 

From: Kotov, Sergey 
Sent: 04 March 2008 15:44 
To: Auto-EMail, FGSC 
Cc: Orlov, Mark; Lemehov, Dmitry; Nikishkin, Stanislav; Podorolsky,
Vladimir; Liverovski, Leonid; Domnikovsky, Stanislav 

Subject: New Supervisor menu "5 CONFIGURE \ 47 EXTENDED ADD CASH"
does not work properly on NCR ATMs 

Attachments: addcash_menu.jpg; upd_note_types.jpg; cas_mapping.jpg 
01 - Employee name: Sergey Kotov 
05 - Country: Russia 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +7-495-961-30-30 mobile: +7-916-453-25-29 
20 - Customer Name: AlfaBank 
25 - Priority: Priority 3 
30 - Products Affected: 5877,6676 
35 - Platform OS: APTRA XFS 4.5.0 
40 - Application: AA NDC 3.2.1 
45 - Other Software: EMV/CAM2 Exits for AA NDC 
50 - Environment: Development 
55 - Frequency: Always 
60 - Installed: 900 
Dear Sir or Madam, 

Would you assist me in the following issue. 

In AANDC we got access to the multivendor version of "ADD CASH" menu on NCR
ATMs. It's an excellent news, because we strongly need some functionality of 
this menu for current customization projects. (We have a big number of
requests from Banks to improve their replenishment functionality, and one of 
these requested improvements is a "note types editor" in Supervisor.) 


But, unfortunately, we've meet some troubles in using of this new
functionality. 

First of all, the new menu is not documented in the current Reference Manual 
(and it differs from the description in MV-Support Ref.Manual). 

But more sufficient trouble is that the "6 UPDATE NOTE TYPES" menu shows
incorrectly formatted table of note types: 


For the comparison see the table given by "CONFIGURE CASH UNITS" menu: 

There were also some other troubles with "EXTENDED ADD CASH" menu - some
items were required additional key pressings, some did not made any visible
effect, some caused reboot. 

All these problems make us to suppose that this functionality was not
properly tested before including into released version of AANDC. 

On other hand, this functionality can be really very useful (in combination
with some local customizations). So, some efforts are desired to make this
menu really workable. 




Sincerely yours, 
Sergey Kotov 




Summary:
TAR 381548:  AANDC - Outbound message reflection does not work if MAC enabled

Description:
When MAC is configured to be on Transaction Reply messages and a Transaction Reply is reflected, MAC is still expected in the transaction reply parser.
However, an Exit should be inside the security point and MAC should not be present when the message is reflected by the virtual controller.



Summary:
There are two receipts delivered,When R00 Pre header has a Form feed

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case No : 5.1.4 from 5.6.1 Universal printing .Doc

at step 9: After sending the NXT_PR01, there is a receipt delivered with Pre header and one more receipt delived with the Host data in the close state.

Note: I have modified the PREPRN03 to have a FF at the end.



Summary:
Forms: "]" is not getting pinted on the receipt and Journal along with the Graphic file name when the Graphic file is corrupted or not present

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case : 7.1.2 ( RP) and 7.2.2 (JP) from 5.6.1 Universal Printing.Doc
Pre requisite : Dynamic forms = 1.

At step 9: when we send the DLBITIMR/DLBITIMJ from host, receipt is printed but there is no "]" printed before the Graphic file name. as there were no graphic files presents it should be printing Character "]" in front of the file name.



Summary:
M-Status reported to the host in Status message is different then what it is reported by XFS ( USB Printers)

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case: 4.4.4 from 5.6.1 Universal Printing.Doc

Scenario:
1. Start the Apps and Perform a Transaction by sending Yeslogo5 message.
2. while the message is getting printed on receipt , hold the Paper so that it cann't move forward.
there is a G1 status message reported to the Host.
M- Status is reported as 07 but i when i look in to OOXFS and Event viewer , M-status is 17.
and there is no M-data reported in the status message.

This is the same case for Journal printer also.

Note: I have tried this on a Persona Machine and its reporting the correct M -status and Complete M-data.

Logs attached



Summary:
Forms: Character set is not changing to Arabic from international ( Dynamic forms = 1)

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Testcase : 6.1.6 from 5.6.1 universal printing.Doc

at step 3: when we send the PRINTIM11 and then PRNTTEST message, it is still printing the International Character set.

Note: When we send same messages with the Dynamic forms =0 ( Raw data Print), its printing the Arabic character set.

Logs and form file attached



Summary:
Windows SP3 testing - XFS team are now testing as part of XFS 5.0 - no issues to date except with Solidcore

Description:
Include in shake out testing and review if possible to cert for this release



Summary:
Include Dual Core with a Celeron processor in test plan

Description:
Driver was in XFS 4.5.1 and cert. in XFS 4.5.1 - not doc'ts in RB
Accepted based on h/w availability



Summary:
Issue with AANDC Passbook Worker for LineNumber definition to return the next/LAST printable line as the LineNumber

Description:
This is needed by Singapore PS - on top of AANDC 93.03.00.51 (special release of AANDC 3.2.1 + Passbook).
We will also need to integrate into the AANDC 3.3 product release.



Summary:
Active XFS v2.10 req'd for SCPM support and therefore will be included with this release

Description:
Active XFS v2.10 req'd for SCPM support and therefore will be included with this release



Summary:
SolidCore v1.00.05 - bug fixes.  No need to test with Solidcore Control & Compliance

Description:
According to JimK we should test with this rather than Control & Compliance



Summary:
Remove XFS Simulator from AANDC as this is now a released product

Description:
Remove XFS Simulator from AANDC as this is now a released product



Summary:
Display Manager should Offer an Internal API to manage the browser interface for non displaying web pages or slow displaying web pages and passing parameters to these pages

Description:
Need to offer API for Navigate, Show and Hide and Parameter Passing

The RFC accepted in the CCB stated "Pass parameters when navigating to the specified web page for a Web Exit State".



Summary:
Display manager does a fileexists check which is too constrictive. 

Description:
File exists check should only be for DriveLetter:

Change Control.bas







Summary:
VoiceGuidance - VoiceDic.xml file didn't work with RealSpeak TTS engine

Description:
AANDC 93.03.07 - VoiceGuidance: VoiceDic.xml file came with IT build 7, didn't work with Realspeak TTS engine. The NoAudio.xml file is also missing in Build 7.



Summary:
VoiceGuidance - When print flags 'w' and '>' both are present then it should ignore the print flag '>'

Description:
AANDC 93.03.07 - VoiceGuidance: When print flags 'w' and '>' are present in the transaction reply then it should ignore the flag '>' and should play only 'w' flag. But, when 'w' flag is defined before '>' flag then it is playing both the print flags. This works fine when print flag '>' is defined before 'w' flag in transaction reply.



Summary:
VoiceGuidance - When CLEAR key is pressed during amount entry, the previous amount is continued to play

Description:
AANDC 93.03.07 - VoiceGuidance: When CLEAR key is pressed during Amount entry the amount which was selected previously before pressing the CLEAR key is continued to play.Ideally when the amount is cleared it should play the amount 0.



Summary:
VoiceGuidance - Delay in timeout state when left key option is enabled 

Description:
AANDC 93.03.07 key - VoiceGuidance: When Left key option is enabled then noticed delay of about 10secs before moving to the next screen after an option is selected in time out state. This is same in all the timeout states (B, Y, X, E etc etc). 

Note: When hide screen option is selected then this delay is not seen



Summary:
VoiceGuidance - When hide screen option is selected then FDKs shouldn't be enabled

Description:
AANDC 93.03.07-VoiceGuidance: When hide screen option is selected during VGInitiation session then screen is hidden and FDKs shouldn't be enabled. But it always enabled irrespective of hide screen option.



Summary:
VoiceGuidance - During screen download, the OOS voice starts over without playing till completion

Description:
AANDC 93.03.07 (VoiceGuidance): During the host download, the OOS audio "We're sorry, this machine is presently unavailable" starts over without playing the complete text



Summary:
There is no image printed on Receipt and Journal with Print Grpahics Control Sequence

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case no : 7.2.1 from 5.6.1 universal printing.doc
This is tested on a Persona machine  ( Raw data Print )

at step 4: when we send the YESLOGO 5  , there is no image printed on the receipt, there is a path printed on Receipt.






Summary:
Forms: No Data is printed on the Journal when Vertical Tab is used in host data ( Dynamic forms = 1)

Description:
XFS 95.00.00.03
AANDC 93.03.00.07

Test case No : 6.1.4 from 5.6.1 Universal Printing.Doc.

When we send the PRNTIM07 , there is no data Printed on the Journal.
It reports the H1 sol message to host with M- status 06

Note : The message is being printed to Journal with Raw data print.



Summary:
The test 5.6.1a.5.24, TESTING DM WITH >999 SCREENS, not creating 1112.htm in C:\Program Files\NCR APTRA\Advance NDC\DisplayManager\Screens\html folder

Description:
Platform XFS 5.00.00.05
AANDC 93.03.00.07
 Test failed at step6. When statement request is sent 1112.htm is not getting created in the above mentioned folder. So the screen is not displaying 1112.htm as a banner on top of Statement selection NDC screen.
Steps to recreate:

Load the download file ¿DMDownLoad.msg¿ and send the messages from OOS to STMOBILE ,STL1000 to SCL10004 and thenGIS.

Insert the card.
Select the language English.	
Enter the PIN.
Select the Statement Request Transaction.	





Summary:
Install Barcode forms in Program Files\Printing\Barcode area, rather than in \xfs\data

Description:
Not an issue, but for consistency, move the barcode form to follow where all the other CEN-XFS forms have moved already.



Summary:
receipt Line count issue - Receipt not captured at the end of a Settlement transaction

Description:
For test case 5.7.9.1.8, last receipt is expected to be retracted but it is not.

Builds Used: AANDC: 93.03.00.06  XFS: 94.05.01.03



Summary:
Receipt is not retracted in the Close State and device did not become FATAL.

Description:
For Test case 5.7.9.1.3, if the receipt is held when an attempt is made not to retract it, the terminal  made 3,4 attempts to retarcts it and drops down it and also the device is not FATAL. And the successive print txn is successful.

Builds Used: AANDC:93.03.00.06; XFS: 94.05.01.03 



Summary:
ANDC Installer needs to support ECBCommonImplementation.wsc

Description:
We have introduced a new wsc file called ECBCommonImplementation.wsc.

Can you add the registration details to the installer? Registry entries will be same as other wsc files with specific details (eg CLSID) noted in the file as usual.



Summary:
Forms: Barcode on receipt is not working with form based printing

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case : 8.1.1 from 5.6.1 universal printing.Doc

at step 6: after sending the BARCO_01 , there is no barcode printed on the receipt.

Note: Barcode is getting printed on receipt when Raw data print is used.

Logs and form is attached.



Summary:
Issue while printing stand-alone coupons. One blank receipt is coming between original receipt and coupon.

Description:
while printing stand-alone coupons with promote, one blank receipt is coming between original receipt and coupon.

SoftWare Details:
AANDC 03.03.00
XFS 5.0
Promote 3.0

This issue have been seen while running testcase 5.7.2.2.3.6.2. Logs are attched.



Summary:
Need to support beep functionality, issues related to timer0, XML processing for Alphanumberic Keyboard support 

Description:
Need to support beep functionality, issues related to timer0, XML processing for Alphanumberic Keyboard support 



Summary:
Card reader suspend is also reported to the host when we did the Cash handler suspend codition

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Hardware : Athena MAchine with Dash reader fitted
Scenario : 
1. Perform a CB cash Transaction and hold the Shutter closed to make the CDM Suspend.
2. There is a Unsol reported for Cash handler ( E2 with Suspend detected)
3. There is one more sol reported for Dash card reader which say card reader is also in susped condition.
When we llok into event viewer and OOXFS log, there is no error reported for Dash card reader.

Logs Attached 



Summary:
SIU Common Mapping causes short status bucket entries to be generated

Description:
The SIU makes use of the mCommonMapping class to map status - the class does not set a value for aDeviceID so any records generated are short of the information.  The knock on effect of this results in a memory corruption while generating an mStatus in the status handler as the status record is expected to be of a minimum size and the data is 3 bytes short.

Setting the 'aDeviceID' member to a suitable value ensures that the SIU records are processed correctly. (ooxfsimp.cpp - mMVSIUImp::InitialStatus - )





Summary:
AANDC application is being terminated with EMV when ever we are sending transaction request

Description:
with the testing of TAR 368336 ,whenever we are sending the Treq to the host AANDC Application is terminating while Emv is still running.
we found this issue in all the test cases for the tar 368336.
we run the test case ref no 1 (ENsure that AANDC DIsplay screen with screen Number greater that 999) in to the following hardware version

AANDC:-93.03.00.07
XFS:- 95.00.00.05
EMVCAM2 version :- 02.01.01 (with all patches)

we found this issue in following scenario 

Step 6:- Send GIS message
step 7:- Enter ICC card '368336_ManualLanguages'
Step 8:- Select French
Step 9 :- Select 'CAM APP2'
Step 10:- Key '1234'
Step 10 :- Select BALANCE (here whenever we are sebdibg aby trabsaction thet AANDC application is being crash)



Summary:
EJ Search tool issues

Description:
1) If empty EJ file is selecetd, tool crashes with runtime error - 13. In Search Pattern function, EJArray is not checked for empty condition.
2)Too lcrashes if EJUtilityConfig.xml is readonly.
3) If any file other than EJDATA.log ( which doesn't have the search string or Currency type) is selected, DepositLogs folder is not created.
    But tool shows "Output persent in the following location: C:\Program Files\NCR APTRA\Advance NDC\Data".
4)If EJ Files with multiple cuurency types are used, all the currency types are logged in Deposit.log in 
"Transaction Details" regardless of the " Currency type". "Counters Details" log only currency type in "Currency Type".
5)While updating the xml file, if null value is entered for search string or currency type, it is accepting the null entries.
6)Count values for currency type does not logges properly in Desposit.log files if currency type is changed in xml file.





Summary:
Forms: Logo is not getting printed on the receipt with form based printing enabled

Description:
XFS 95.00.00.05
AANDC 93.03.00.07

Test case: 5.1.3 from 5.6.1 Universal Printing.Doc.
I am testing this on a Athena machine which has USB receipt printer and enabled the Dynamis forms.

at step 11: after sending the CBCAsh there is no image printed on the receipt.

This problem can be seen when trying to print the CPM image with form based printing on USB printers

Attached the Form file for reference




Summary:
"BIN1 IS REMOVED" message  is printing on the Journal when Enhanced option 24 is set to 001 and to 000.

Description:
AANDC Build  : 93.03.00.06
XFS                : 95.00.00.06
TestCase       : 5.5.5a.5.35.2
Scenario        : 
                     1)Start the applications ,NDCHost and debugLog.
                     2)Send the download ¿CPMBase.txt¿ from  FIT 001- STAT 661.
                     3)Send enhance option 24 as 001and then Send GIS.
                     4)Remove the BIN1.
                     5)Make sure that ¿BIN 1 IS REMOVED¿ is not printed on the journal.
                     6)It shows ¿BIN 1 MISSING¿ in the EOP.
But,it is printing the ¿BIN 1 IS REMOVED¿ on the Journal and it is not showing the "BIN 1 MISSING¿ in the EOP.






Summary:
VDM.txt file is successfuly deleting  in the Diagnostic mode.

Description:
AANDC Build : 93.03.00.06
XFS               : 95.00.00.03
TestCase      : 5.5.43.11.1.15
Scenario       : 
                    1)Start the applications,NDCHost and DebugLog.
                    2)Enter SupervisorMode.
                    3)Select option 7 to enter Diagnostics.
                    4)Delete the VDM.txt from C:\Program Files\NCR APTRA\Advance NDC\data.
Here,when we try for delete opertion on VDM.txt,Access is denied for Delete opertion.
But,the VDM.txt file is deleting in Diagnostics mode.
 



Summary:
When Envelope Dispenser goes to Fatal,it is showing the Hardware Fitness as 0 instead of 4 if we send Enhanced Configuration Information message(1FS FS FS 76) from Host.

Description:
When Envelope Dispenser in Fatal condition, it suppose to report the fatal conditon as 4 when we send Enhanced config information 1fsfsfs76 but it is not reporting Fatal conditon as 4 and it is reporting '0' only.



Summary:
Correct status is not reported in response to a print/hardware info terminal command when JP is not configured

Description:
When Journal Printer is not configured and an attempt to print to the journal, Application is not sending sol message or an unsol message to the host. it just returns ready 9 message.

Also when Get Hardware Information terminal command (1<fs><fs><fs>71) is sent, H00 is returned. But when Journal printer is not configured then the response to the hardware info terminal command shouldn't contian Journal Printer ID 'H'

Reference: Test 5.7.8a.3.2.2

Tested with XFS 4.5.1 + ANDC 93.03.00.06



Summary:
QAC++ reported a memory issue with legacy Printing code

Description:
QAC++ reported a memory issue with legacy Printing code



Summary:
Issues seen exiting from Diagnostics

Description:
 Two issues:

-> Supervisor menu isn't shown when exiting from diagnostics: 

                The steps for this are: 
                1. Enter Diagnostics from supervisor by pressing 7 and enter key from the rear interface (GOP). 
                2. Press Exit from diagnostics. 

-> SST reboot when tried to press exit from diagnostics after removing cassettes (when in diagnostics): Steps 14-16 in shake out testing doc. 



Summary:
Junk data is being printed on the receipt when screens are sent from the host

Description:
when a download is being sent to the terminal, for each screen message it is printing junk data (mostly square brackets) on the receipt. This happens also when GIS is sent and when the terminal returns to idle screen after a transaction.

Tested with XFS 5.0 IT5 and ANDC 93.03.00.07.



Summary:
SSDS DLL Interface worker - when Application Links are used completeness check error for DLL Name attribute cannot be avoided

Description:
When an Application Link attribute is specified, the DLL Name attribute must be left unspecified. This produces a completeness check error.
I suggest we adjust the code for this attribute to allow it to be set to an empty string causing no effect. Thus current code

void mDLLInterface::set_DLLName (mString& aDLLName)
{
    DLLName = aDLLName;	// set the attribute

	LoadDLL();
}

Would be replaced with

void mDLLInterface::set_DLLName (mString& aDLLName)
{
    DLLName = aDLLName;	// set the attribute

   if (0 < aDLLName.GetLength())
	LoadDLL();
}




Summary:
For the test 5.4.1.4.1-4.1	Ensuring RCOPY/INIT EJRNL functions correctly, cassette sensor unsol is not printing on EJ 

Description:
The steps for simulation are.
1. Configure only EJ
2.Copy the `EJDATA.LOG file from the `FULL' directory in the location (\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC Regression Tests\Updates from Process Activities\Support Files) and paste it into C:\Program Files\NCR APTRA\Advance NDC\Data
3.Select 40- INIT EJRNL in REPLENISH menu.
4. Remove and insert any one cassette while INIT progressing.
5. After successful init, the sensor unsol is not printed in EJDATA.log 



Summary:
CHECK CDM displayed instead of CHECK COIN in Replenish Menu

Description:
Spotted while doing Coin fixing - apparently had already been agreed to be changed but not actually implemented



Summary:
VG not working properly with Aptra Promote

Description:
There is no synchronisation between screen diplayed and voice played when Aptra promote is installed in SST.SST is showing different screen and playing different voice(e.g - After sending GIS command from Host to SST , SST is going inService mode but "Temporary out of Service " voice is played.



Summary:
CPM Passport integration: issues with support for Bin Empty XML

Description:
Support for the XML file for Bin Empty:
- It has to be optional as it is not always required
- If it is enabled the file should not be generated in the situation where there has been no cheques deposited since the last "bin empty" activity.




Summary:
Unsol message flow for VG is  not integrated in IT7 Build

Description:
Unsolicited status message for VG is not integrated in Customisation Layer Application for IT7 build.



Summary:
DM:- NDC screen is not showing while sending the MINISH01 Trep in Test case 5.36

Description:
in test case ref no 5.36 for DM testing , NDC screen should display while sending the statement transaction reply(MINISH01) to the host.but it is not moving to NDC screen and it is showing banner on the top of promote.

AANDC version :- 93.03.00.06
XFS version :- 04.05.01
Promote version:- 03.00.00

Following are the steps where e faced this issue in test case no 5.36 for DM

Step 6:- Select Statement request

step 7:- Press FDKB

step 8:- Send the reply MINISH01

in this step the banner is coming on the top of the promote while in test case it is showing banner should display on the top of NDC screen.
 



Summary:
XML and XSD files for Alphanumberic Keyboard support are not delivered by build IT7

Description:
NDCKeyboard.xml and NDCKeyboard.xsd files are not delivered by build IT7.
The issue is that these files have not been archived in SIE yet so that the installer would pick them up.
They should be archived in ...Components\NDCCore\Global\Config



Summary:
DM :- HTML pages are not showing and <DISPMAN> tag is showing in NDC screen

Description:
In Display manager testing , Test case no 5.11 is not showing HTML Screens and also showing <DISPMAN> tag and screen defination in NDC screen(Means contents of NDC screen is  corrupted)

AANDC Version :- 93.03.00.06
XFS Version :- 04.05.01

we are facing this issue when we do following steps in the Display manager test case no 5.11

Step 4: - Insert card
step 5:- select language (NDC screen contenets showing screen download defination)
step 6:- Enter PIN (HTML screen is not showing for for this state and NDC scree contents are not displayin correctly)



Summary:
DM:- Application is abnormally terminated when we are sending Trep REP_DYN1 or REP_DYN2

Description:
In Display manager when we are testing Test Case no 5.8 (Test when the html defination is in the Screen download , TReply and in ITR )
then Application is being terminated abnormally when we are sending Trep REP_DYN1 or REP_DYN2.

AANDC version :- 93.03.00.06
XFS version :- 04.05.01

In 5.8 test cases we are doing following step:-

step 8:- Select Statement transaction
step 9:- Press Fdk B
step 10 :-Send the reply REP_DYN2

and also
step 12:- Send Balance transaction
step 13 :- Send the Reply REP_DYN1
Step :- 



Summary:
Voice Guidance - The order to play the dynamic place holder data with audio nested is incorrect

Description:
The order to play the dynamic place holder data with nested audio should be in the same order received from the host.



Summary:
Compiler warnings in NDCCUSTF

Description:
I now spotted compiler warnings in NDCCUSTF that your developers left behind having done their Promote RFC updates.

cduwnd.cpp
.\Sources\cpp\cduwnd.cpp(703) : warning C4101: 'clsid' : unreferenced local variable
.\Sources\cpp\cduwnd.cpp(2724) : warning C4101: 'clsid' : unreferenced local variable
cduvidwin.cpp
.\Sources\cpp\cduvidwin.cpp(218) : warning C4101: 'clsid' : unreferenced local variable
Generating Code...


Our developer guidelines discourage leaving compiler warnings without a good reason.
When you are leaving warnings in, soon there are so many that nobody ever reads them.

Also we are trying not to leave old unused code in the source files (commented out stuff)

	//if ( CLSIDFromProgID( OLESTR( "NCRaFlowDlgs20.Session" ),&clsid) == S_OK )






Summary:
99 more in reserved screen m02 never seen.

Description:
There is a 99 more in the m02 screen that will be overwritten by the ack/err line.
needs to be removed as there are no further menus. May flicker up but i've not seen this.

'm02'   ''
        '            CONFIGURE'

        ' 99 MORE'





Summary:
When ChequeSizeRotated/ChequeSizeNormal are set to 10, no image is printed on receipt for codeline 1 and 2 (DynamicForms = 0)

Description:
The registry values for ChequeSizeRotated or ChequeSizeNormal are set to 10 and if the codeline is 1 or 2 in the transaction reply (i.e., for transaction replies CPM_TR19 and CPM_TR20), no image is being printed on the receipt
(Dynamic Forms set to Zero)

Reference: Tests 5.5.3, 5.5.4,5.5.6, 5.5.7 from CPM UTS (445-0708851B)

Tested with ANDC 93.03.00.06 and XFS 4.5.1



Summary:
By default, Cheque image is printing on journal

Description:
Printing of cheque image on journal shouldn't be configured by default, but still cheque image is being printed on journal by default.

Reference: Tests 5.5.1 from CPM UTS (445-0708851B)

Tested with ANDC 93.03.00.06 and XFS 4.5.1



Summary:
For test case 5.7.10.4.7.3,Statement & Wait - Successful Transaction, the MEI flashes before the receipt is delivered.

Description:
1.1.1	Statement & Wait  Successful Transaction

 
TEST OBJECTIVE	This test will ensure that more that one transaction reply to print to the receipt in the same transaction can be carried out successfully.	 

  
	Test Procedure					Expected Results	   
Perform a Receipt print transaction and send the transaction reply SIDE_WT from NDCHost	The receipt data is printed and the ready 9 is returned to the Host
							Receipt  MEI (if present) should NOT be flashing	   
2.		Send transaction reply SIDE_NS from NDCHost	Receipt MEI (if present) is flashing when the Receipt is  presented
Take the card 
The transaction completes successfully, MEI stops flashing and the ready 9 is returned to NDCHost	 


For the above test case the MEI flashes before the receipt is presented to the customer for the transaction reply SIDE_WT



Summary:
For the test 5.5.3.1.3.11, ' Page cannot be displyed' html screen is shown before every browse failed next sate

Description:
For the above mentioned test,  when browsecomplete1nextstate is pressed, Page cannot be shown screen is displayed before BrowseFailed screen. This issue is seen for the steps 30, 35, 37,39,41,43,45,47. Also the same issue persits for  test case 20.



Summary:
Diebold IX - no retract area causes count issue.

Description:
ANDC 3.2.1MV
As retracted notes can only be placed in reject area - the reject count will rise where dispensed notes are retracted.
As the dispenced counts also rise the ANDC counters are not shown as andc will detect the error.
This is not an SP issue as the CEN spec requires clarification and the interpratation by diebold can be seen as correct.	
NCR does not count dispensed notes even if retracted to reject area

The fix is to detect this issue and adjust the reject count down by the number of notes dispensed in retract.

need to test the threshold to verify multiple status messages are not sent when the reject bin hits the limit.



Summary:
Internet explorer script error is prompting when an external site is loaded when display manager installed.

Description:
For the test case 5.5.3.1.3.5 TEST CASE 16, when web exit state is selected, google page is shown and internet script error is prompted. Error says parent.leftframe.COMCDIINTERFACE is null or not an object. After this error application is not responding and restarting of application is needed. The test failed at step number 58. Test cases 19 and 21 also failed with the same reason. Also the loading of ActiveX objects are failed SST.







Summary:
TAR 380457 - The MatrixPrinters.reg file is inconsistent

Description:
The Matrixprinters.reg file contains entries for the receipt printer for
CHEQUE and GRAPHICS, with the cheque entry blank, but the graphics entry
populated : 

"GRAPHICS"="1B 47 var 1B 5C" 
"CHEQUE"="" 

The standard settings at installation, and the corresponding entries in the
PersonasPrinters.reg file, have both these values set to the same, i.e. "1B
47 var 1B 5C" 

This control code is the "print epson graphics" control code and is not
supported on matrix printers. The matrixprinters.reg file therefore looks
to be inconsistent as it has the code for one sequence but not the other.




Summary:
TAR 364939, TAR 365250, TAR365254 - Incorrect MStatus / MData is returned when clearing suspend to fatal

Description:
TAR 364939, TAR 365250, TAR365254 - Incorrect MStatus / MData is returned when clearing suspend to fatal



Summary:
Coin Dispense - Unsol sent when hopper is low even if no request to dispense from that hopper

Description:
This was part of 402015 but has been seperated as a new issue
While dispensing coins from the hopper which has enough coins  but another hopper is low it is sending an unsol message to the host. This issue was seen while running testcase 2.1.18.



Summary:
Full Pindata is not getting cleared when clear key is pressed.

Description:
Last digit in the PinData is getting cleared when we press the clear key not the entire PinData.



Summary:
TAR 362944 - Unwanted optional params returned in last transaction status of Trans Req

Description:
Hi Bryan, 

Your understanding is correct. I don't want to have those optional fields.
This host handles purely cash dispenser, so it is quite specific as all
these kinds of optional devices never appear in their system. So I don't
think the host can handle even though there are 26 zeros. 

Thanks & regards, 
Bee Lian 



-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: Friday, November 02, 2007 5:05 PM 
To: Gan, BeeLian 
Cc: McDermid, Bryan; Coupar, Peter 
Subject: RE: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


BeeLian, just to let you know that I have picked up the P1 issue as well and 
have escalated the first issue to the Engineering Management team - not much 
more we can do here (FGSC) other than keep pushing them. I'll try to
characterise the new issue ASAP and demonstrate to Engineering. 

On the new issue - would the host be able to handle it if there were 26
zeroes? 

But I know your point was that this field being optional, should not be
included - I assume the fix you would like is to not have this field
included in the Transaction Request? 

Best Regards 

Bryan 

Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 
WEB: <http://www.dundee.ncr.com/ssgsc> 
CKS: <http://cks.columbiasc.ncr.com> 






-----------------------------------------------------------------------------
--- 
From: Gan, BeeLian 
Sent: 02 November 2007 08:46 
To: McDermid, Bryan 
Cc: Coupar, Peter; Suresh, Ranjith; Pattullo, Euan 
Subject: RE: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


Hi Bryan, 

Appreciate your understanding on the pressure that I am having now. 
I need a fix by end of today your time. 
Sorry if it seems like too much to ask. Our original plan was: 
- to complete the generic testing on vanilla AANDC 3.2 by end of today, 
- followed by some testing on local enhancements (camera solution) 
- To recreate some issues found on 2.6.6 to confirm whether they are fixed
in 3.2 

I have to leave Vietnam by next thursday (8-Nov). So basically I have only 3 
more days (next Monday to Wednesday). 
And i have to let you know that we have no local NCR or distributor support
here in Ho Chi Minh city. 
If I cannot get all these done within these few days, we have to fly a PS
from another country. 

P/S: 
- Pls note that I have raised another issue on the same machine one hour
ago: 
AANDC 3.2 - Transaction Request has extra data in field 'r' 

Attached herewith the incident report. Bryan, I need your help to look after 
that call as well, as I believe they are inter-related. 

So as you can imagine, I am stucked now :(. We can't bring the ATM in
service automatically due to this Supply Counters message. After host forced 
the ATM in service (by manually issue GIS command), our transaction request
message contains extra data in field 'r', again host is unable to handle and 
does not send transaction reply. 
So now, we can't even proceed with anything. 

Appreciate your understanding. Pls provide me your estimate when the
solution to both issues can be delivered. 

Thanks & Regards, 
Bee Lian 


Hi Ranjith, 

This is the information for BeeLian's P1 issue which may be related to the
P2 TAR I opened yesterday. Logs are attached as given to me. You can see the 
difference between 2.6.6 and 3.2 as BL describes this in the email. 

I have confirmed that the problem happens on my standard 3.2 build in the
lab and attach my message out file 

I am getting this info to you ASAP and I am just about to raise a P1 TAR for 
the reasons detailed below. 

Currently, we are checking out if the problem occurs on a simulator and I
will also check what 3.1.1 does. 

From what I am seeing, it looks like the ATM thinks it has a coin dispenser
and is sending this info, wrongly, in field 'r' of the TREQ. 

Please let me know if you need anything more and if I can help. 





Summary:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function

Description:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function



Summary:
Crash seen when MediaType set to 10 and Add Cash performed

Description:
Seen by Greece PC who incorrectly set MediaType to 10 instead of 12 when configuring this SST - this value should be ignored rather than crash 



Summary:
Forms Printing - Set First Line Position Assumes Wrong Starting Position

Description:
The setting of the first line position assumes that 018 is the first printable line.  The printer physically cannot print before 164 (1 inch) from the top - so any value less than 164 for set first line should be set to 164.



Summary:
The unsol printed in journal missing sensor information if cassette removal and insertion are done in diagnostics

Description:
The unsol printed on journal is missing sensor (P) bytes 1-8 when printed on journal. The message sent to host is having all the bytes correctly including cassette sensor status.but  in Journal the message printed is *   *1*P*         11111. 

Test case no:5.5.43.11.2.13




Summary:
After reboot, the EJ recurrence thread is not loaded unless mode change to supervisor is done

Description:
For the test 5.5.19.1, to ensure that EJ scheduled Daily cutover occurs at specified time, fails to do cut over when the scheduled init pattern is set to daily and time is at 00:00 hrs. The test failed from 26-28.The scenario is as follows:
1. Set the scheduled init pattern as daily and set time as 00:00hrs
2. Change the local time to 23.45hrs
3. Reboot the system.
4.After reboot start AutoEJ debug log
5 Load the application
6. Configured time is over, still cutover didn't occur.
7. Nothing is logging to AutoEJ
8. Enter supervisor
8. EJ Log copied OK




Summary:
Forms Printing - Font Identifier Need Updated With Windows Font names

Description:

In order to print the NDC fonts without mapping characters the NDCAlphanumeric1 and NDCAlphanumeric2 fonts should be used.  This requires an update to the registry configuration.



Summary:
Forms Printing - Graphic Filename Needs Escaped

Description:

The full path name in the GRAPHIC field needs to have all the '\' characters replaced with '\\' characters, otherwise an 'invalid escape sequence' is reported by the service provider.



Summary:
When the hopper counters are 0 and hopper becomes empty  DISPSUPPLY is showing "Hopper Out" but the CheckCoin and FaultDisply is not showing "HopperEmpty".

Description:
Scenario:

 Scenario:
Each hopper is having 4 coins.
ADDCOINS - added 4 for all hoppers. 
Transaction dispensed 4 coins from each hopper.
DISPSupply is showing Hopper out.
CheckCOIN and FaultDisplay are showing Hopper low not the Hopper Empty

This issue was seen while running Testcase 2.1.25
Logs are attached.



Summary:
Issue with Hopper1.Even though the hopper1 counters are 0 it is not showing "Hopper1 Out" in the DISPSupply.

Description:
 Scenario:
Each hopper is having 4 coins.
ADDCOINS - added 4 for all hoppers. 
Trnsaction dispensed 4 coins from each hopper.
DISPSupply is showing Hopper1 is low and for other hoppers it is showing out.


This issue was seen while running TestCase 2.1.25
Logs are attached




Summary:
Issue with ADDCOINS functionality. ADD COIN shows total and Remaining count as blank after adding some amount of coins to the Hopper

Description:
Same issue like GRIT 390011.



Summary:
DisplayManager: DM is losing focus when it goes to supervisor with TTU  and with DMNoTopMost=0. Build 93.00.01.03

Description:
splayManager: DM is losing focus when it goes to supervisor with TTU  and with DMNoTopMost=0. Build 93.00.01.03



Summary:
Impact on Display Manager for Alpahnumeric keyboard support for BA 18(ST1)	

Description:
Alpahnumeric keyboard support for BA 18 - Process and display each and every key present on BA Keyboard.. so Display Manger also process each key and post the message to the Cduwindow



Summary:
(CPM) there is no registry key created for PrintOnErr at HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\CPM

Description:
Build:
XFS 95.00.00.03
AANDC 93.03.00.06

Test case number : 5.5.5.5.24.1 





Summary:
(CPM):Cheque is getting deposited when we send the CPM_R13A ( invalid message)

Description:
Build:
XFS 95.00.00.03
AANDC 93.03.00.06

Test case Number : 5.5.5.5.20

Scenario : After sending the CPM_R13A , cheque is getting deposited where we are expcting a A02 reject messsage.



Summary:
(Dev and Sim installation) MAPS_GLOBAL environment Variable Value has not set to a Correct Value

Description:
Build:
AANDC 93.03.00.06

This is problem is seen with AANDC developmet and Simulation mode installtion.
MAPS_GLOBAL environment variable value is set to "C:\Ntglobal\", which is wrong.
it should be set to "C:\Ntglobal"
Because of this apps is not getting started.



Summary:
TAR 370897 - CICO Dispenser Fatal not sent to host when cannot dispense (itemsleft)

Description:
Scenario is that OCBC have changed the cashin script to support Retract to
Escrow. Standard apps only retract to the Reject area. So, in a deposit txn
some notes are left in the escrow after a retract. 
They then try a withdrawal and it fails as expected (the SP returns an error 
to the dispense command WFS_ERR_CDM_ITEMSLEFT - but no M-Status as the
command has not been sent to the driver). 

Since there is no M-Status the application does not set this to Fatal, and
returns a mapped MS19 instead of MS10. 

After discussions with Engineering there is a need to resolve this in
standard product, "code can be updated to hard code the severity to FATAL if 
WFS_ERR_CDM_ITEMSLEFT is returned by the SP" 
or "we should be going fatal on fwIntermediateStacker = 1
(WFS_CDM_ISNOTEMPTY)" as there may be situations when this situation may
arise independently from the customization to retract to Escrow. 





Summary:
(CPM)Application not moving on to close state after pressing Cancel FDK (for the first time)

Description:
Build:
XFS 95.00.00.03
AANDC 93.03.00.06

Test case Number: 5.5.5.5.7.5 

Scenario:
1. Start the Apps and Download the CPMbase Messages.
2. insert card and select deposit , insert the Cheque....and press cancel on the KEY PAD, Take the cheque.
3.Chnage the State 499 to Set the Cancel Key Mask ( for FDK A)
4. insert card and select Deposit, Press FDK A on cheque Acceptance state.....
Display Shows Bad orientation screen and comes back to Cheque Acceptance State, which has to call Close state.....
if we press the FDK A again , its going to close state.

Logs Attached.



Summary:
Counts are not updated after incomplete dispense on Diebold IX

Description:
Rejected and remaining counters are not updated after an incomplete dispense on a Diebold IX machine.
On Diebold IX, after a bad stack, the notes will be in the stacker. Reject command need to be sent for clearing the stacker.

Need to do a reject after bad stack on Diebold machine	



Summary:
TAR 376585 - Different behaviour in the supplies status reported in dispenser error message

Description:
Different behaviour in the supplies status reported in dispenser error messages between AANDC 2.6.6 and AANDC 3.2.1. 
AANDC 2.6.6 behaviour of the supply status changing to 0 No New State on a repeated transaction is the same as NDC+. With AANDC 3.2.1 the Purge bin status and the cassette that is being dispensed from, the statuses remain as for a first transaction.



Summary:
NDCCUST Issue - When an NDCDisplayHook is present and always returns 0 then 8 FDK selection state access violates

Description:
This issue can be recreated by ALWAYS returning zero from an NDCDisplay hook. There seems to be some keyboard initialisation that is done during the displays code in NDC that the 8 FDK selection State expects to have been performed.



Summary:
GBRU SP does not update its counts for after diagnostics dispense

Description:
When notes are moved by performing a diagnostic dispense or clear the GBRU SP does not update its counts at any time. Counts are only subsequently updated when an action such as removing and re-inserting the Retract bin is performed. See attached e-mail 



Summary:
cdudata.cpp - LogStateTable() logging standard state numbers in base 36 into STATEDATA (correct) but for exit states logging in base 10 (decimal)which confuses user.

Description:
When ECP option 80 is set which means base 36 is enabled state numbers . LogStateTable function in cdudata.cpp is logging all standard state numbers in base 36 into STATEDATA (which is correct) but for exit states it is loging them into base 10 (decimal)which confuses user.

Example:

Applica.. 15:57:42.568 [000] [A] Card Read
Applica.. 15:57:42.568       Screen Number           [010]
Applica.. 15:57:42.568       Good Read Next State    [013]
Applica.. 15:57:42.568       Error Misread Screen No [155]
Applica.. 15:57:42.583       Read Condition 1        [002]
Applica.. 15:57:42.583       Read Condition 2        [002]
Applica.. 15:57:42.583       Read Condition 3        [002]
Applica.. 15:57:42.583       Card Return Flag        [001]
Applica.. 15:57:42.583       No FIT Match Next State [013]
Applica.. 15:57:48.646  
Applica.. 15:57:48.646 [013] [B] PIN Entry
Applica.. 15:57:48.646       Screen Number           [013]
Applica.. 15:57:48.646       Timeout Next State      [990]
Applica.. 15:57:48.646       Cancel Next State       [121]
Applica.. 15:57:48.646       PIN Check Good Next     [990]
Applica.. 15:57:48.646       Check Max Bad Pins Next [000]
Applica.. 15:57:48.646       PIN Check Error Screen  [255]
Applica.. 15:57:48.646       Remote PIN Next State   [990]
Applica.. 15:57:48.646       Local PIN Max PIN Retry [990]
Applica.. 15:57:51.661  
Applica.. 15:57:51.661 [11988] [O] Not Specified     <---------------------ISSUE!!!!!!!!
Applica.. 15:57:51.661      O021991073015013255255255
Applica.. 15:57:51.739  
Applica.. 15:57:51.739 [021] [I] Transaction Request




Summary:
Applicanion is not getting connected to host when the installation path was not default

Description:
Build:
XFS 04.05.01
AANDC 93.03.00.06

Test case : 1.4.1 from AANDC 03 03 00 installtion.Doc

Scenario:
Install the AANDC with a different path other than the default path (i.e other than C:\Program files\NCRAPTRA), Installtion is succeful.
Problem 1 : After completion of the installtion is asking for a reboot
Problem 2:
Start the Applications
Go to supervisor , select 5 Configure .....and select 37 now... All the local port, remote port ,local ip , remote IP are showing blanks.
when we set those values and Check it again , all are showing Blank.
Set all of them and reboot the machine, Start the apps after power up.....
Application is not getting connected to HOST.



Summary:
CPM Forms Installed in the wrong place (ENDORSE data is not getting printed on the Cheque)

Description:
Build:
XFS 95.00.00.03
AANDC 93.03.00.06

Test case : 1.1 from 5.7.1 CPM.DOC

Scenario:
1. Load the CPM base down load messages.
2.insert the card and select Cheque depostit.
3. Insert the cheque and select cheque deposit, send CPM_TR11 message.

There is no ENDORSE data getting printed on the cheque.

CPM SP is configured to look for the Form at C:\Program files\NCR Aptra\Printing\CPM\Forms
But there are no forms in this location.

AANDC installer is copying the Form files to C:\XFS\DATA\CPM folder, this needs to be changed.
Installer has to copy the forms and Media to the C:\Program files\NCR Aptra\Printing\CPM folder.



Summary:
TAR 378972: AA-NDC : add information for printing cheque image on receipt to ref manual

Description:
See TAR



Summary:
TAR 377609: Require document HKLM\SWARE\NCR\Advance NDC EmulateNDCPlusEnvDisp

Description:
See TAR



Summary:
TAR 377377: Description in Developer Guide of web exit state url index format is unclear

Description:
See TAR



Summary:
TAR 376768: Reference Manual (B66180) needs updated to include ISO 8859 fonts

Description:
See TAR



Summary:
TAR 376300: Ref. Manual description of Pre-Set Op Code Buffer extension state improvement

Description:
See TAR



Summary:
TAR 376130: Misleading description of the Extended Encryption message for deleting a key

Description:
See TAR



Summary:
TAR 373034: Developer's Guide - App C - Note Counters - Incomplete information

Description:
See TAR



Summary:
TAR 371763: New func. added in 03.02.01 is documented in rel bul, conflicts with dev guide

Description:
See TAR



Summary:
TAR 371148: AA-NDC: Default lines/inch set incorrectly on Universal Printers

Description:
See TAR



Summary:
TAR 370332: Only one digital audio control is played in an idle sequence

Description:
See TAR



Summary:
TAR 365813: AA-NDC Reference Manual does not specify state processing for cardless Txn

Description:
See TAR



Summary:
(Settlemet Transaction):C15 screen showing as a Valid screen when C15INVAl message sent from host

Description:
Build:
XFS 04.05.01
AANDC 93.03.00.06

Test case number: 5.5.14.3
Test Objective 3 from Supervisor Settlement testing.Doc 

At step 6: We are seeing the C15 is a Valid screen data.
After sending C15Inval message, Go to Supervisor...and select 4 and then 15....
Enter 5 now, Function Done is shown.

Logs Attached.



Summary:
(Settlemet transaction):After sending a transaction reply, we are getting one more Transation request to host

Description:
Build:
XFS 04.05.01
AANDC 93.03.00.06

Scenario:
1. Load the ¿SettlementDownLoad ¿download file to NDC Host and sends the messages from SCREEN00 to C19SCRN  and C15INVAL.
2.Enter Supevisor , select 4 - replnish and enetr 15 ..
Enter 0 now, function done displayed.
3.Exit from Supervisor and Send GIS
4.Func is displayed on GOP, Enter 1 and then enter values for Buffers.
5. Transaction request sent to host, send a Balance reply..
6. We are getting one more Transacation request to the Host now, which should not be the case.
where Func promt should be displayed again.

Logs attached



Summary:
Simulated supervisor entry and exit occurs after a successful transaction for test 5.5.32.10.1.1

Description:
For the test case 5.5.32.10.1.1, after the step 12, simulated supervisor entry occurs. The scenario 1 is as follows:
1.Open safe door
2. Do a test cash with safe door open
3. Test cash failed with dispenser fault
4. Exit Supervisor( No simulated supervisor entry as the interlock is open)
5. Close safe door
6. Application goes to in service
7. Do a dispense transaction-successful
8. Simulator supervisor starts after closing of present transaction.

Scenario 2:

1. With inter lock open do a test cash
2. Test cash failed with dispenser fault
3. Press 9 and change mode switch to inservice
4. Dispenser starts clearing.
5. Application is in in service
6. Again simulated supervisor entry and exit occurs.





Summary:
(WebExit):Pop box is shown when the HTML page is deleted from the C:\SSDS\DLL

Description:
Build:
XFS 05.00.00.03
AANDC  93.03.00.06

Scenario:
1. Start the Application.Copy the WebexitUrltable.XML to the Config folder.
2. Load the messages from Webexitdownload message file ( SCRN000 to State007)
3. Send the WebextBs message and then send GIS
4. Delete the Test.Htm from C:\SSDS\DLL
5. Insert Card, enter pin, select web exit
there is a pop shown, saying that "file cann't be located at C:/SSDS/DLL"
Sate has to move on to Browserfailnext sate which is not happening.




Summary:
(WebExit): HTML page is Spreading over to GOP

Description:
Build:
XFS 95.00.00.03
AANDC 93.03.00.06

Scenario:
1. Start the APps
2. Load the Messages from WebexitDownload file
3.insert card, Select english and enter Pin......
4. Select webexit..., HTML page is displayed but the HTML page is not completly shown on the ATM monitor, Half of the part is shown on the GOP, because of this customer will not be able to see the full page on ATM Screen and Bank persons cann't go to Supervior mode as the screen is completly covred on GOP.



Summary:
Application not coming to inservice after loading the DASHDOWN load message file

Description:
Build:
XFS 05.00.00.03
AANDC 93.03.00.06

Scenario:
1. Start the Applications
2. Load the DASH Down load message file ( Send ST000065 to GIS )
All the messages are getting loaded till GIS.
After GIS is sent, Apps not coming to in service.
Below message was seen in Debug log repeatedly in loop.

APTRAUS.. 18:33:53.906 APTRAUSERCDI service : WARNING, Request for UNKNOWN store, name is PendSpvsrMsgEntry   

Logs attached



Summary:
Application not returning to Inservice after Envelope depository went to suspend.

Description:
Build: 
AANDC 93.03.00.06 
XFS 95.00.00.03

 Scenario:
1. Insert a card and initiate an envelope deposit transaction.
2. Send the DEP_910 from host.
3. Take the envelope which is dispensed.
4. Deposit the envelope and jam the shutter open
5. Send NXT_PRNT and wait for end of suspend period with shutter still jammed.
6. SST goes to Out of service after 5 mins not comes to inservice.
7. After sending GIS SST goes to inservice.




Summary:
A pop-up message & applications hung while counts are checked after a deposit transaction with CICO enabled

Description:
This is observed when doing a misrecognition error test scenario as apart of G395068. 

Modiy the registry key settings as to do a cash out transaction(on GBXX). Do a cash out error and check that Cash Out Error screen is displayed when INIT BNA is performed. With the settings still kept as it is with CICO enabled &  when did a misrecognition error scenario, a pop-up message was shown and applications hung when checking for counts in supervisor.

Issue not reproducible



Summary:
TAR 377213 - Idle Loop displayed but no card entry, when OOS sent after Card Reader Fatal

Description:
When the card reader goes fatal after 3 cardholder tampering events in a row, and OOS command  is sent to the terminal, but the terminal does not go OOS instead the idle loop is displayed and the card reader is not enabled.



Summary:
ECB6-Counterfeit note count not incremented when a jam occurs before the note reaches the escrow

Description:
Observed whiel executing test 5.4.1

Insert combination of Cat2,3 &4 notes and do a jam before notes reach escrow.Later,enter supervisor and do INIT BNA to clear the jam. When counts are checked, 3DISP CNTS does not have TOTAL COUNTERFEIT count incremented for the cat2 note inserted.



Summary:
TAR 370987 - 30 sec delay after statement print

Description:
During the close state if "Statement at Top" is found to be true (statement delivered to cardholder) then the full Timer 95 expires and a statement capture is attempted, even if the statement has already been taken.



Summary:
Programmed Currency Count should only be updated at SoD if Denom CDIs are also populated.

Description:
Currently Programmed Currency Count is updated if ANT Dict is populated after reading the GBNA.ini file, but it should be only after the Denom CDIs are populated when the SP is queried using ItemNoteTypes. 



Summary:
For the test 5.6.11.1.3, in receipt, space required between INT and NOT IN 'INTNOT INSTALLED'.

Description:
For the test 5.6.11.1.3, EMV Exist for ANDC NOT Installed, at step number 7(PRNT CMPNT VERS),receipt printing is wrong. Space is  required between  INT and NOT in 'INTNOT INSTALLED'.



Summary:
AANDC 3.3 cannot be re-installed after de-installation of aandc 3.3 (For test case 5.3.1.16.1.1)

Description:
Presentation client was not removed during 3.3 de-installation but the de-installation successful message shown. There was no previous AANDC version present on the SST.  The installation of 3.3 was successful. But it had raised a warning with the following information.

A non fatal error occurred. Date : 12/06/2008 Time : 12:13:10
Entry Type=WARNING
File: ScriptItemAdd.cpp, Line: 196
Details : Component action completed successfully.
UninstallKey not found.
Component will not be added to software inventory.
Type: Component, Name: Presentation Client (for APTRA Advance NDC), Version: 02.06.00





Summary:
Application getting closed after inserting the Cheque

Description:
Build:
AANDC 93.03.00.06
XFS 95.00.00.03

Scenario:
1.Load the mesages from CPMBASE
2.Insert a Card, and select cheque deposit.
3.CPM shutter opens, insert a cheque
4. Application crashes now.
Logs attached



Summary:
NDCDataCollector activates a terminate key that is not present

Description:
When the CLEAR key is not present on the PinPad, but NDCDataCollector is asked to enable it as a terminate key, NDC Datacollector does not use the alternative BACKSPACE key properly - it will do this swap for the active keys, but not for the terminate keys part of the CEN-XFS command, causing an HRESULT -411 (WFS_ERR_PIN_KEYNOTSUPPORTED) to be returned to the application.
Issue has been exposed by the Voice Guidance TX initialisation flows.



Summary:
TAR 377754 - KVVs are returned as spaces intead of zeroes if no key present

Description:
As discussed, when a key has not been entered into the system, a request for 
   the KVV should return a value of 6 zeroes. It is currently returning a value 
   of 6 spaces. Debug details provided by Email separately:-
   
   Host sends get KVV: 
   [3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4H]
   AA-NDC response: 
   [23[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]4[Unicode-x1C]58C7B5BF8424F5DDDA     
   02B9AF82E13600962BADC67DE2F2430CD7DCB0B5634CBE91F9F4FB0F2FCFC33F4539571E18EC3
   8]
   Note the 6 spaces after F5DDDA as B key is not valid and therefore not
   loaded in mode 4 - this should be 6 zeroes.



Summary:
TAR 376765 - Fonts are smaller than standard NDCAlpha1 font - font des "`" to "u"

Description:
   All single size fonts are half size and have wrong offset, all double size  character sets look to be correct size but have a slightly wrong offset.



Summary:
TAR 376765 - Fonts are smaller than standard NDCAlpha1 font - font des "`" to "u"

Description:
   All single size fonts are half size and have wrong offset, all double size  character sets look to be correct size but have a slightly wrong offset.



Summary:
TAR 376710 : INIT DEPOS clears a cheque jam, but leaves device status as fatal

Description:
The CPM device status is changed to fatal on a cheque jam, which is
   successfully cleared in Supervisor by INIT DEPOS, but on returning to
   In-Service the device is still reported by the application as being fatal.   
   The device can still be used successfully.
   
   
   The main message sequence is as follows :
   
   09:37:40.703 - 30/04/2008   #0010  
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]G0[Unicode-x1D]H0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]w0[Unicode-x1D]q0]
   The device status is good
   09:38:22.453 - 30/04/2008   #0011   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]q5E[Unicode-x1C]2[Unicode-x1C]00000000000000[Unicode-x1C]0000]
   a jam is created at insert  
   09:38:52.812 - 30/04/2008   #0013  
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]G0[Unicode-x1D]H0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]w0[Unicode-x1D]q4]
   The device is now fatal
   09:39:05.000 - 30/04/2008   #0014   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21]
   Enter Supervisor
   09:39:05.375 - 30/04/2008   #0015   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R04]
   The device is successfully cleared 
   09:39:07.359 - 30/04/2008   #0016   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P612]
   using INIT DEPOS  
   09:39:21.109 - 30/04/2008   #0017   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R09]
   09:39:21.171 - 30/04/2008   #0018   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P602]
   09:39:27.000 - 30/04/2008   #0019   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20]
   Exit Supervisor
   09:39:41.718 - 30/04/2008   #0021  
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]G0[Unicode-x1D]H0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]w0[Unicode-x1D]q4]
   Device is still fatal
   09:39:54.015 - 30/04/2008   #0023   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9]
   09:40:26.093 - 30/04/2008   #0024  
   [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]14[Unicode-x1C]***************************************[Unicode-x1C][Unicode-x1C]BA  C  
   [Unicode-x1C]00680600[Unicode-x1C][Unicode-x1C]00680600[Unicode-x1C][Unicode-x1C][Unicode-x1C]2880030000000000000000000000000000000000000000000000[Unicode-x1C]a*
   ******************************]
   09:40:40.343 - 30/04/2008   #0025   [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]680[Unicode-x1C][Unicode-x1C]8800:192075[Unicode-x0F]@@[Unicode-x1C]001***
   4543132690175127-000???...   
   Process CPM cheque  
   09:40:47.015 - 30/04/2008   #0026   [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]q0 [Unicode-x1C]4[Unicode-x1C]00000000000000[Unicode-x1C]0000]      
           Unsolic - successful, but fatal
   09:40:47.171 - 30/04/2008   #0027   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]B]                              
           Good transaction
   
   
   Logs and further analysis details have been passed by e-mail.




Summary:
Dynamic Overspill was disabled during Status Handling work

Description:
This needs to be re-worked to re-enabled it, if it is to continue to be supported. Existing released solution had too many issues.



Summary:
Status Handling: XFSErrorEvent handling causes some status reporting to be wrong

Description:
2 issues after getting XFSErrorEvents:
1) multiple XFSErrorEvents during same transaction can result in subsequent one overwriting previous one's Diagnostic status before it is reported to host. Don't update string if already populated, it is already cleared after msg reported to host.
2) If severity is reported as 1 or 2 in vendor specific string it can continue to be reported even after device status is cleared. Reason is those values are not reported by XFS so there is no AvailabilityChanged to return it to Good. Only set the AppLevel fitness to this value, rather than device status.



Summary:
R00/R01 data is not nullified after sending the R00R01NL message

Description:
Scenario:
1. Run test case 3.2 from 5.9.2 MV Media Control.Doc, which will send some R00 and R01 Screen data.
2. Send the R00R01NL (3fsfsfs11fsR00fsR01) message which will nullify the Srceen data for R00 and R01..,...
3. Perform a Transaction by sending NXT_Print, Application still print the R00 and R01 Screen data , which should not happen.







Summary:
Merge Passbook functionality on top of AANDC 3.2.1 (special release, AANDC 3.2.1 + Passbook)

Description:
This is required by APAC PS.



Summary:
Touch event not enabled for the first transaction just after Applications comes up

Description:
Scenario:
1. Start the Applications and load the APPC, LD messages.
2. Insert card and Enter Pin.
3. Transaction selection screen is shown¿.and when I click on the menu option, State doesn¿t move on ( as if there was no touch was made), eventually state moves on to Time out screen and here I can touch on Yes/No menu options and its works fine.

This happens only for the First transaction when application comes up.



Summary:
There is no Sol message sent to the host when Envelope depository bin is removed

Description:
scenario :
1. Start the AANDC applications and load APPC, LD
2. Remove the envelope Depository Bin, there is a Sensor unsol sent to the host.
3.Start performing the Transaction and send the DEP_910 reply.
4.Envelope is dispensed, take the envelope.
5.Depository failed to intialise and doesnt open the shutter.
6.There should be a sol message sent to the Host at this moment, which we are not seeing now.





Summary:
Status Handling: Removing cassette outside of Supervisor not reported in following status msg

Description:
This functionality was originally by design as it was intended for the host to query status on exit from Supervisor and cassettes should only be removed inside Supervisor, however this is not ideal, as it resulted in a NO CHANGE in supplies being sent along with a FATAL for the fitness of that cassette. An improvement opportunity has been uncovered where the need for the host to call GetSupplies on exit from Supervisor can be removed. So it should show any change in supplies status since last time status was sent, whether it was a terminal command response or a transaction status msg. This will fix the removing cassette scenario.



Summary:
Include SNMP agent product 3.4 in ANDC 3.3

Description:
x



Summary:
CIM: Unhandled exception thrown on SetDevice causes ANDC to reboot

Description:
Make sure that RebootOnexception set to 1 at HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Exception Handling\UEH
Start the application.
there is a exception raised by AANDC.we can see this in eventlogs.
machines reboots after 240 sec.

if reboot on exception set to 0, application core still works fine.



Summary:
There is no data printed on JP when Journal option is set to paper and H1 unsols are reported to host when JP is in good State (plus TAR 378052)

Description:
Build:
XFS 95.00.00.03 or XFS 04.05.01
AANDC 93.03.00.06

H1 unsol reported When ever we toggle to supervisor and exit from supervisor and while in transaction,though JP status is good.

There is no data printed on to journal ( like Supervisor entry , exit, power up .....etc)

Logs are attached





Summary:
TOTAL NOTES RETAINED and ADD MORE strings overlap on confirmation screen

Description:
Steps to recreate:

Enable Enhanced Confirmation screen and insert SAR 50, SAR 100, USD 10 and 1 Cat 2 note (Result is in the attachment).



Summary:
PresClient: Include Dialogs in the runtime dependency comp.ini list

Description:
Presentation Client has a runtime dependency on Dialogs.  It means its comp.ini should list Dialogs in the [DependsOnRuntime] section.  For example:
[DependsOnRuntime]
<Problem Determination Collection><02.00.01>=
<Content Provider><01.00.00>=
<Dialogs><02.00.03>=



Summary:
Status Handling: UpdateStatus function move to wsc file introduced some issues

Description:
UpdateStatus function was moved to wsc file, and called from Event Monitor as well as SoD now, due to single EXE changes. This had a knock-on effect of introducing some issues. 
1) AppLevel BNAFitness flag is updated based on device status which is now incorrect as this should only be done at the very SoD (this is shown by sending w6 device status is shown as 0 instead of 4).
2) GBNA properties are accessed whether or not device is present, but it should be bypassed if Not Present. (crash occurs when starting apps on ATM with no BNA present).



Summary:
Customisation layer is terminated when deposit transaction is initiated after cash out error

Description:
run test 1.2.9.16.1 part5 from CIC Regression Spec


Do a cash out transaction and create cash out error by racking out the lower transport when the note is in the transport. The device will go fatal. With the device still in fatal condition, initiate a deposit transaction. Customisation layer is terminated at this point when transaction selection menu is displayed- expecting a w3 message with fatal fitness in this case



Summary:
AER- Encash counts not updated after transaction reply sent and power fail occurs. 

Description:
run test 1.3.9.1 from AER ITS

Initiate deposit transaction, send transaction reply.Reboot the machine after sending transaction reply. After power up AER at SOD is attempted & when counts are checked in 3 DISP CNTRS encash counts are not updated. Also 58 DISP BNA CNTS does not update encash counts 



Summary:
AER- Misrecognition error is not journalled if it did happen

Description:
run test 1.4.1.1 from AER ITS

When 1 good note say EUR10 is replaced with another good note EUR100, Misrecognition error is not journalled.



Summary:
ANDC should delete receipt/journal forms in the Close state

Description:
This has not yet been addressed because the service provider appears to hold a handle to the file, so it can't be deleted.  However it can be set to zero length.



Summary:
ECB6 mode 1/AER - Close State AER after refund error doesn't include suspect counts for note types in DISP CNTRS

Description:
  Issue seen running test 2.4.2.4 from ECB6 ITS.

ECB6 mode 1, enter mix of cat 2, 3, 4 notes, do refund at confirmation screen and jam shutter closed.

AER is attempted in the Close State. Everything is OK apart from when running 3 DISP CNTRS, the suspect notes were NOT included along with good notes in the note 
type counts. The cassette total for the note type just shows good notes, but it should inlcude suspect as they were also vaulted.

Note that if you do a BNA-DEP and create an error, the notes end up in exactly the same cassettes as in this scenario, but here we do a refund
with error. In the BNA-DEP case all information in DISP CNTRS is correct, i.e. cassette count for note type is good + suspect
Easily recreated.



Summary:
w6 and other status message have ~ for escrow count of first note type

Description:
   Have logs of a w6 with incorrect ~ character in the escrow count for first note type. Once this occured
all subsequent BNA status messages have this character - including w0, w3 etc

Looks like something is not getting initialised when building the message.

Logs attached



Summary:
 ECB6/AER - after powerfail and SOD AER notes go to wrong cassettes and counts are wrong

Description:
 Issue seen running test 2.4.2.1 from ECB6 ITS.

ECB6 mode 1, mix of cat 2,3,4 notes entered, power fail before notes reach escrow.

AER happens at SOD, and what we see is :-
All good and cat3 notes end up in first/suspect cassette - expecting good notes to go to correct casette according to currency/denom

DISP CNTRS had several issues.......
Encashed seems to double the good notes and add the suspect .
For the note types entered, get 1 for retracted yet no notes were retracted
Notes in transport was 2 yet non in reject bin

Func 58 also showed retract/reject bin counts updated yet no notes moved to these.

Easily recreated and logs attached



Summary:
 ECB6 mode 2 - counts incorrect after powefail with cat2/3/4 notes and then AER

Description:
  Issue seen running test 2.4.2.3 from the ECB6 ITS.

Entered mix of cat2, 3 and 4 notes, in ECB6 mode 2. Suspect notes rejected as invalid, and do power fail with notes at exit.

On startup, AER is performed.
2 suspect notes ended up in reject bin, notes in transport count was 2 and total suspect was 4 (double the number of notes). Was actually expecting total suspect
to be 0 in ECB6 mode 2.

Secondly, the 4 good notes ended up in the first cassette, the suspect cassette. Was expecting these to go to correct cassettes for denimination other than suspect cassette.

The vaulted count was double the number of good notes that had been entered.

Can be easily recreated, and logs are attached
 



Summary:
After crash, when app restarts and GIS sent it bypasses CardRead and PIN states to previous state where it crashed.

Description:
During some testing, the AppCore crashed in the Cash Accept State. The next time I started the apps as soon as I sent a GIS it jumped to the Cash Accept State bypassing Card Read State and PIN Entry. No reboot was involved in this test scenario.

Suggested solution from Jan: when Application Core Starts the idNextStateNumber should be set to 0.
Jan says:
It is strange that the store was not initialised to 0 at startup ¿ seems that the previous termination was not complete or something.

See this ... 
  CDIIntegerStore ( idNextStateNumber,         0    ) ,




Summary:
Prepare a full debug build with DevPartner and run the analysis during the IT phase

Description:
To run typical transactions and some of the significant new functionality.



Summary:
 ECB6 mode 2 - journalling should not show cat3 information

Description:
  Issue seen running any test with ECB6 mode as 2. I ran test 2.3.2.1 from the ECB6 ITS.

Journalling is showing the CAT3 header with information, whilst I was not expecting this to be journalled in ECB6 mode 2.



Summary:
 ECB6 mode 2 - good note was re-identified incorrectly as counterfeit note

Description:
   Issue seen running 2.3.2.1 from ECB6 ITS.

Enter mix of cat2, 3 and 4 notes, and Add More putting in a cat 2 and 3 note.
The cat3 notes are correctly rejected as invalid and are taken.

I then did cancel at the confirmation screen.

The issue seen was that after the 2nd insertion (cat2 and 3), somehow one of the good notes counts has been changed to a cat2 note.
Also the confirmation screen previously showed 4 good notes correctly, but after inserting cat2 and 3 it thought there were
only 3 good notes. The journalling matches this.
The counterfeit bin had 3 notes in at, but count said 4.

See logs, and this can be recreated easily.




Summary:
DISP CNTRS hung on screen for note types 5-8

Description:
Seen running test 2.3.2.1 from ECB6 ITS.

Had run this test, whose details are probably not relevant. When running DISP CNTRS the application hung at the screen
showing note types 5-8, and the application core eventually terminated.

I've captured the logs in case this shows the cause. Tried to re-create but did not get issue again.

 



Summary:
 ECB6 mode 2 - pop when retracting suspect notes that were not taken

Description:
  Isssue seen running test 2.3.1.1 from ECB6 ITS.

Running in ECB6 mode 2, with retract enabled and have cleared counts

Enter 2 suspect notes which are rejected, and taken. Add another suspect note but don't take it. When it was retracting there
was a pop up. See attached logs.

After re-starting apps, checked cassettes, and note was in retract bin. DISP CNTRS showed 1 against Note type EUR10 retracted, but this note was rejected
as invalid, so should not show under note type counts.
on final screen of DISP CNTRS retracted/rejected were correct, and total suspect had value of 6 whilst I expected 0.



Summary:
 w4 has updated returned counts when they should be blank

Description:
  Issue seen running test 2.2.3.7 in ECB6 ITS.

Suspect notes entered, send BNA-REF, don't take notes with retract disabled.

The w4 that was sent had updated returned counts, whereas Mike says they should be blank,

See attached file with logs



Summary:
ECB6 mode 1 - retracted suspect notes not updating Total Suspect in DISP CNTRS

Description:
 Seen running test 2.2.3.4 from ECB6 ITS.

Enter suspect notes, refund at confirmation screen, don't take them, and have retract enabled.
The notes get retracted to retract bin, correctly. DISP CNTRS should show these notes against
Total Suspect count, as the notes are in the ATM. It does not update this count, which is the issue.

Also seen any other time you do retract, e.g. after BNA-REF and don't take notes



Summary:
CLR BNA - total counterfeit always printed as 0 before counts cleared

Description:
  Seen running many tests, but use 2.2.2.1 as example.

Enter countefeit notes only and cancel, with counterfeit notes captured correctly.

Running CLR BNA shows current counts on journal before they are cleared. Total Counterfeit and Total Suspect are always being journalled
with values of 0, whilst it should journal the current value BEFORE it gets cleared.



Summary:
AER- Count of >90 notes not reported when AER is attenmpted after colse state to leave notes at escrow

Description:
run test 1.4.2.2 

With emulation mode set(accept >90 notes), and confirmation screen is timed out to leave notes at escrow, AER attempted after close state vaults the notes to CI casseette but does not report the count of notes that are inserted above 90. It just reports vaulted count as VAL: 90 even if notes inserted is greater than 90.




Summary:
String stores not shared across Dll boundaries

Description:
In CIC we set a string store in Cash Accept state and read it in TRequest Encash function, both of which are DLLs created by State Type Split work. The value set was not the same as the value read. It had returned to its default value, as though it was not shared at all.

I can show the Author project and logs on demand. I think it will be easily reproducible in a simple test app with 2 dlls one of which sets a store and the other outputs it to debug.



Summary:
Passbook - OOXFS - For FUJITSU Free Format the number returned from the Line Form read is the segment information - not the page number. This is returned as 0 by ooxfs

Description:
We should amend the code to behave as per the ADI code for the segment data:-

 BYTE one = (TheResponse -> GetTData( 0 )) - 0x30;
  BYTE two = (TheResponse -> GetTData( 1 )) - 0x30;
 
  int Result = one << 4;
  Result += two;
    
  Number = Result;
 




Summary:
UCDI stores are initialised after Start Of Day activity in Single EXE

Description:
Some UCDI stores are accessed and are not being properly set at Start of Day seemingly because the UCDI initialising script host is after the Start of Day activities in the flow. This caused issues on CIC.

As a workaround on CIC I have modified the AppCore project as shown in the attached picture. Moved Init CDI Variables script host (0l346b8) before Start of Day director. It seemed to fix the issue with CIC, but should be validated, before being used as final solution.



Summary:
AER- Power failure after transation reply sent does not increment counts in 58 DISP BNA CNTS

Description:
run test 1.3.15.3

When power failure occurs after transaction reply is sent, 3 DISP CNTS show encash counts incremented but 58 DISP BNA CNTA does have all 0 values as no notes did get deposited



Summary:
AER- Counts not updated correctly when notes inserted above escrow capacity

Description:
run test 1.3.7.2

When notes are inserted above escrow capacity and few good notes are rejected because these notes are above escrow capacity & a power failure occurs at this point, AER at SOD does not increment any counts in 3 DISP CNTS for the good notes at exit slot. The good notes physically did move to the reject bin in this case.

Other observations made while executing this test:
Both reject and retract count is incremented for a EUR10 note, while the note physically moved to reject bin(Note: there is an instance of double notes detected when executing this test)

Refer to logs in the attachements



Summary:
AER- Counts not incremented for invalid notes that moved to reject bin during AER at SOD

Description:
run test 1.3.1.2 from AER ITS.

In 3 DISP CNTS, no counts did increment during AER at SOD when power fail occured with invalid notes at exit slot. The invalid notes when checked physically, did move to the reject bin, but this does not reflect in the counts.(Say in this case "Notes In Transport" should increment the count of invalid notes)
 



Summary:
AANDC should support glory trace tool format.

Description:
Few issues are as follows with present AANDC.
I detected some issues at the trace and target signatures.
Trace signatures:
I checked the signature size and format in the XML file. Both are still wrong. The signature in the XML file should have 12340 bytes, in yours there are only 3904 bytes. 
The note informations (denomination, orientation, currency, etc.) are still missing. Following must be considered when storing the signatures:
- The signatures will be normally delivered with a header from XFS (this is configurable at the registry). This header mustn't be stored.
- The signatures needn't be converted to ASCII characters anymore with the new ECB6 database. The new database converts the data know and stores them in Unicode format. The reconversion will be done with the GloryConverter then, so the signature itself should be passed in a byte array at it is got from XFS (but without header of course).
Example of one byte at signature: 03 (hexadecimal format)
=> That will be stored at the XML file as following in Unicode format: 00 30 00 33 (hexadecimal format) => you can only see this, if you open the XML file with a hex editor
- The new ECB6 database must be used. The package you have sent to me is the same as we tested successfully. We switched off the index handling at the database to increase the performance. But I don't think that this has an affect to the issue.
Target signatures:
The traget signatures must have a size of 12673 bytes, yours have only 12621. At your signature I can see that the note informations (denomination, orientation, currency, etc.) are missing => e.g. 4th byte must be 25 hex, that's 37 decimal which is the Euro currency
=> It seems that not the whole signature is stored after taking it at the supervisor with the createP6Signature command
The file name of the target signature file is wrong. They have a fix name and must be the following:
A0000000.TAG6 for orientation A
B0000000.TAG6 for orientation B 
C0000000.TAG6 for orientation C 
D0000000.TAG6 for orientation D
All 4 target files must be available. If one is missing, tracing is not possible and an error is shown. There's the problem that counterfeits are recognized as Cat. 1 on some orientations and no traget will is produced then. With the new Trace Tool it is possible to determine a denomination and currency before reading the note => then a signature will be taken and the corresponding target file created. I don't know, if this is also possible with the XFS command createP6Signature.
As next step I would propose that the AANDC team should check all this to make sure that the software is working correctly.
Regards,
Thomas

Some useful information regarding the same from Thomas.
When do we use Trace tool utility and when do we use the glory trace tool ?
[Thomas]: Glory Trace tool is for the BNA. I assume you mean with 'Trace Tool utility' the GBRU. So this is only for GBRU use.
How can aandc take care of creating destination files understood by both the utilities? may be some configurable option?
[Thomas]: The signature has a header. This contains a field named 'series' where 'BNA ' or 'GBRU-GBNA' is stored. With this you can differ between GBRU/GBNA and BNA signatures. More information about the signature format can be found in the APTRA XFS documentation at CIM and GBRU-GBNA Service Provider. Please search for WFS_INF_CIM_GET_P6_SIGNATURE. But AANDC must know in any case, if there's a GBRU or BNA installed, because different Service Providers are used for them.

Rationale: 
a) Target signatures(file name of each orientation) needs to have an extension of  *.TAG6 for glory tracetool and *.Sig for Trace tool utility(used by czech). 
[Thomas]: That's right. 
 b) Target signatures created by createP6Signature doesn't contain the header information with our present code. This was well understood by Trace tool utility but what i can see from Thomas mail below, it seems to me that  we should still include that information to be understood by glory trace tool?
[Thomas]: The header mustn't included in the signautre that is stored to the ECB6 database. If you get the header at the createP6Signature command, it must be ignored. Delivering the header can be switched off with the registry setting HKEY_LOCAL_MACHINE\Software\Classes\WOSA/XFS_ROOT\SERVICE_PROVIDERS\CIM key\Interoperability\SignatureFormat
I ask you this because none of the above things were captured in BNA ECB6 FS and we are already in compliant with Tracetool utility and that utility see no issues with our signature format and file names.
From what i learnt, Tracetool utility is a later version of glory trace tool? Can some one confirm this please?
or is it that Glory Trace tool is always used for comparing trace and target signatures on a BNA device and Trace tool utility is used for comparision on a GBxx ? 
[Thomas]: The Trace Tool Utility is only for GBRU/GBNA. Glory Trace Tool is onyl for BNA2. Both have the same functionality: doing the note tracing. But both tools are different, they use different files and signature formats. So the GBRU trace tool can't be used for BNA and vice versa.



Summary:
ECB6 - DISP CNTRS inconsistent after suspect notes only entered and deposit tr reply

Description:
Run test 2.2.2.3 from ECB6 ITS.

At step 9, DISP CNTRS shows 2 for Notes in Transport. Has correct values of 2 for Encashed,
 Escrw Deps and Total suspect. Shows 1 note (correct) for each note type entered
Also, func 58 - shows 1 EUR10 and 20 under REJECT on screen 3 (both were suspect) as 
well as under the correct cassette. As result total amounts per denom incorrect, as each note
has been double counted 



Summary:
ECB6 - DISP CNTRS : encashed and refunded counts incorrect after cat3 notes entered, refund at confirm and cat3rollback 0

Description:
run tests 2.2.2.1 from ECB6 ITS.

Enter only cat3 notes and select refund at confirmation screen.

Run 3 DSP CNTRS. Should have number of notes entered for note types , but has 0
Encashed should be number of notes entered and vaulted, but was 0 and Refunded was showing as the number of notes entered.
All suspect notes did go to the suspect cassette
Essentially, it behaves as if the notes were actually refunded although they are not



Summary:
Add support for Please Wait screen during Retract after TReply Refund notes not Taken

Description:
Defined in NDC Msg I/F Spec Rev F.
Basically it will use a Nested screen approach in the TReply message, same as Card Before Cash. One nested screen will show the Please Take Notes as today, and another will be the Please Wait screen shown during Retract operation.



Summary:
TAR 371988 - Application halts when sending supplies status, using XFS simulator

Description:
The application intermittently halts during processing of a Send Supply Counters terminal command, when the PC Cheque Processing Module is included in the simulation. In the customer environment this occurred relatively frequently.



Summary:
TAR 371988 - Application halts when sending supplies status, using XFS simulatator

Description:
The application intermittently halts during processing of a Send Supply Counters terminal command, when the PC Cheque Processing Module is included in the simulation. In the customer environment this occurred relatively frequently.



Summary:
TAR 374243 - Cardless transaction is not controlled by Option 77

Description:
In the AA-NDC Reference Manual, the definition for Option 77 states that a value of "000" means Cardless transactions are not allowed (default). When setting the value to "000" the cardless processing is not deactivating correctly and still enabling the keys.




Summary:
TAR 374243 - Cardless transaction is not controlled by Option 77

Description:
In the AA-NDC Reference Manual, the definition for Option 77 states that a value of "000" means Cardless transactions are not allowed (default). When setting the value to "000" the cardless processing is not deactivating correctly and still enabling the keys.




Summary:
TAR 373500 -  EJ uploading stops when supervisor entered and fails to restart on exit

Description:
If supervisor mode is entered when the EJ upload is in progress. It appears
to hang further uploads till a reset or until an EJ Options & Timers message 
is sent.



Summary:
TAR 373500 -  EJ uploading stops when supervisor entered and fails to restart on exit

Description:
If supervisor mode is entered when the EJ upload is in progress. It appears
to hang further uploads till a reset or until an EJ Options & Timers message 
is sent.



Summary:
TAR 371744 - When invalid next state is greater than 3 digits it causes application freeze

Description:
The issue was found during option 80 alphanumeric state testing. When
invalid next state is greater than 3 digits it will cause an application
freeze. Details as below. 

Option 80 is turn on 

1. Host reply next state ?810? which is ?10404? in numeric format. 

[4[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]810[Unicode-x1C]00000100[Unicode-x1C]80642077075HJ13/02/08H411:47KL 1000.00 LL 
0.00 ML 880645.16 [Unicode-x1C]300] 

2. Invalid next state is display in STATE WINDOW. 

Applica.. 11:47:20.045 +++ Invalid Next State [810] - Default Close
State 
Applica.. 11:47:20.061 
Applica.. 11:47:20.061 [810] [J] Close 
Applica.. 11:47:20.061 Receipt Delivered Screen 
[002] 
Applica.. 11:47:20.061 Next State Number 
[000] 
Applica.. 11:47:20.061 No Receipt Delivered Scr 
[002] 
Applica.. 11:47:20.061 Card Retained Screen 
[002] 
Applica.. 11:47:20.061 Statement Delivered Scr 
[002] 
Applica.. 11:47:20.061 Must Be 000 (Reserved) 
[000] 
Applica.. 11:47:20.061 DPM Doc Captured Scr 
[002] 
Applica.. 11:47:20.061 Extension State 
[000] 


Applica.. 12:14:29.156 
Applica.. 12:14:29.156 [000] [A] Card Read 
Applica.. 12:14:29.156 Screen Number 
[010] 

3. At that moment in debug log it?s going to close state 

SAPACCu.. 11:47:20.061 
********************************************************** 

CALLING CLOSE STATE EXIT 

********************************************************** 



4. Application is freeze, it need to restart application to continue. 

APTRA Advance NDC 03.02.00 (2007) 

Supervisor Application : Waiting for AC call 
<wid>16n7894dc129</wid> 
Applica.. 12:10:36.890 *** Loading Reserved Screen File
C:\ssds\Dll\resrvd.def *** 




Summary:
TAR 367716 -  Customer now experiencing problem tracked in GR1T 345727 - ej upload offline

Description:
When comms are down, EJ upload should not be attempted. What is happening is that when the next instance for an EJ Upload to be sent comes around, an attempt is made to send the message repeatedly until the Retry Threshold value (Option 61 in EJ Options & Timers message) is reached (so if option is set to '000' - send forever -  then the atempted message sending will not stop). This issue can be seen most clearly by viewing the MESSAGEOUT window in DebugLog where the sending attempts can be seen. When comms are restored, the correct upload message is sent to the host and no further issue can be seen.



Summary:
Journal Tracing in State Card Read - "Card Inserted" is not printing

Description:
In "Print Paragraph" worker we have one attribute called "Paragraph Text". In this attribute we need to place the Dynamic Text Identifier which will be replaced by the Dynamic Text at run time. 
Normally the Dynamic Text Identifier is " * ". Even, the help for "Print Paragraph" worker shows "*" as the Dynamic Text Identifier.

However, Here the Dynamic Text Identifier being considered has been changed to "+" in the control codes. So if we have "+" in the "Paragraph Text", it will be replaced with Dynamic Text. 
In the current Author code, while printing "Card Inserted" we have " *" in the Paragraph Text attribute. So this is the reason Journal Page worker is not printing "Card Inserted" on to the Journal, and it is printing only " *" on to the Journal as it takes "*" as static data.




Summary:
(AANDC 03.03 PRE IT)FDK is not getting enabled when we send the Interactive Transaction Response Message in cash transaction

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

1. Start the AANDC applications and load APPC, LD
2. insert card and select fast cash.
3. send the ITR004 from  reps_2 message file.
4.FDK is not getting activated at this time.

Logs attached.



Summary:
(AANDC 03.03 PRE IT)Journal mode is changing to EJ after a reboot with Journal configured to Paper with Backup

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

Scenario:
1. Make sure that Journal is set to Paper only mode.
2. Send the Enhanced parameter load to set the journal back up.( 16 001 and 17 002)
3. close down all the applications and restart the machine.
4. start the applications once the machine is up.
5. Go to supervisor and check the Journal mode, it is set to DISK now.

Logs attached



Summary:
(AANDC 03.03 PRE IT) Two envelopes were dispensed when we did the deposit transaction using state type C function

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

Scenario:
1. Start the applications
2. load APPC and LD
3. Insert card and PIN, select Transaction Tests followed by Deposit & Misc followed by Deposit 910 followed by Current Account
4. Envelope was dispensed and take it and press enter.
5. send the DEP_910 as reply, we are getting one more envelope dispensed here followed by depository getting enabled.



Summary:
Clear Cash should only call Clear BNA (and vice-versa) when Recycling enabled

Description:
Currently no checking is performed so if a GBRU is present in the system this happens even if no recycling

Check should be added such that if GBRU is present on system with GBRU Mode set to 0 AND Recycling enabled (by option 45) then this functionality is enabled, otherwise it should be disabled



Summary:
ADI reset commands sent from Platform - Causes multiple unsols sent to the host on Cardcapture

Description:
While investigating TAR 376296: AA-NDC : multiple fatal status messages for single card jam, it was discovered that the platform is issuing ADI reset commands during a Capture command when the card is jammed.  This is causing multiple unsols getting sent to the HOST.  The TAr mentioned above is being converted to an IP TAR. As if Host sends an OOS these unsols arent seen.
FYI- But we have a solution that Filters out ADI resets responses so it doesnt send any unsols in this scenario.  



Summary:
Biometric Finger Selection and Fingerprint capture states should be supported in the statedata debuglog trace.

Description:
The tracing written to the statedata window of the debuglog should support the two new biometric state types - Fingerprint capture state and finger selection state.  The definitions of these state types is in the latest main NDC message specification.



Summary:
Biometric timers 80 & 81 need to be supported in AANDC

Description:
AANDC should process and store the new biometric based timers number 80 and 81 and make them available to a C-Exit via the GetIntVal call.
The default values for these timers  are published in the Main NDC message specification.



Summary:
TAR 375303 -  With AA-NDC , an incomplete screen control code causes Promote to terminate

Description:
When APTRA PROMOTE 03.00.00 is installed on an ATM with APTRA Advance NDC
(AA-NDC), and an incorrectly specified screen is downloaded from the host
system, either in a screen download message, or as part of an Interactive
transaction reply, the ncrappcndcsc1.exe terminates with an error, and the
AA-NDC Applicationcore then hangs. 

Application Event log entry : 
Faulting application ncrappcndcsc1.exe, version 2.0.0.1, faulting module
msvcr80.dll, version 8.0.50727.762, fault address 0x00008a8c 


The incorrectly specified screen contains a screen definition which
comprises solely of a shift in character 0x0F. 
These "invalid" screens have worked previously with both earlier AA-NDC and
Promote products, and the host system will not change these as it would be a 
major exercise. 

Details (PD and Debuglog data) have been forwarded to Ranjith Suresh and
Iain Wilkie, but are available from FGSC if further copies are required. 

For the screen data load message it has been seen that the issue arises
during the AA-NDC Customisation Data Decomposer worker processing, and prior 
to any specific PresentationClient logging in PD. 

TAR raised initially on Promote, as the issue does not occur without Promote 
installed, and it is a Promote application that is terminating
unexpectedly. 




Summary:
TAR 374380 -  Selective MAC includes extra characters in Data to be MACed

Description:
Selective MAC includes extra characters in Data to be MACed



Summary:
TAR 374007 - AA-NDC : Touch Screen FDKs mapped incorrectly for MAST functionality

Description:
AA-NDC 03.02.01 
MAST Functionality 

When the Supervisor Interface is transferred to the front and touch screen
is used the FDK C which is required to activate the function is not mapped
correctly - it is instead returning FDK F. Diagnostics ids therefore unable
to be entered. The FDK Mapping appears to be for Key Encryption Entry. 

Release Bulletin for AA-NDC 03.02.01 states that this functionality should
work using both front and rear interfaces: 

03.02.01 
Product RFC 
387754 
Including MAST functionality in AANDC 
Updated AANDC to include MAST functionality. Supervisor application needs
update to show a reserved screen (screen number "m61" and the default text
is "Service Assist") corresponding to FDK C (second from bottom right FDK)/
Touch area and when that FDK/ Touch area is pressed, it will enter the
System Application if the MAST registry setting is enabled. MAST Registry
entry is under the following path: 

[HKLM\Software\NCR\Advance NDC\supervisor] DWORD MAST 

The default for MAST DWORD is 0. 

MAST can take the following values: 

0 = Normal behaviour 
1 = "Service Assist" text is displayed corresponding to FDK C and FDK C is
enabled which when pressed enters Diagnostics. 

This functionality is the same as using the DIAGNOSTICS menu option on the
SELECT menu. 




Summary:
TAR 374007 - AA-NDC : Touch Screen FDKs mapped incorrectly for MAST functionality

Description:
AA-NDC 03.02.01 
MAST Functionality 

When the Supervisor Interface is transferred to the front and touch screen
is used the FDK C which is required to activate the function is not mapped
correctly - it is instead returning FDK F. Diagnostics ids therefore unable
to be entered. The FDK Mapping appears to be for Key Encryption Entry. 

Release Bulletin for AA-NDC 03.02.01 states that this functionality should
work using both front and rear interfaces: 

03.02.01 
Product RFC 
387754 
Including MAST functionality in AANDC 
Updated AANDC to include MAST functionality. Supervisor application needs
update to show a reserved screen (screen number "m61" and the default text
is "Service Assist") corresponding to FDK C (second from bottom right FDK)/
Touch area and when that FDK/ Touch area is pressed, it will enter the
System Application if the MAST registry setting is enabled. MAST Registry
entry is under the following path: 

[HKLM\Software\NCR\Advance NDC\supervisor] DWORD MAST 

The default for MAST DWORD is 0. 

MAST can take the following values: 

0 = Normal behaviour 
1 = "Service Assist" text is displayed corresponding to FDK C and FDK C is
enabled which when pressed enters Diagnostics. 

This functionality is the same as using the DIAGNOSTICS menu option on the
SELECT menu. 




Summary:
TAR 373126: Cheque Image is unreadable on USB Receipt Printer

Description:
When a cheque image is printed on a USB Receipt printer, it is not correctly 
   scaled and is therefore too small to be readable.
   
   Looking at the images printed on receipts, the Bitmap image for the Cheque
   appars to have been developed for the RS232 Receipt Printer and no action
   was taken to ensure that the image on the USB Receipt Printer was readable.
   Given that there is no documentation to indicate that there is a dependency
   on the printer, this has been raised as a Priority issue by UK PS as they
   require to demonstrate the correct (i.e. readable image in same format for
   all printers) function to AIB by the end of this week (28/3/08).
   




Summary:
TAR 373115 - AA-NDC : Byte 2 range for TCP/IP Remote IP Address too restrictive

Description:
Customer : IXE - Mexico
   Priority : high as need to configure correct Remote IP Address for testing.
   This is holding things up.
   
   S/W config : AA-NDC 03.02.01
   
   Problem Description :
   Need to enter Remote Address 010.255.021.005 but won't accept a value of 255 
   for byte 2.
   
   FGSC checked AA-NDC 03.02.01 Supervisor Reference manual and it states the
   following ranges for the 4 bytes for the TCP/IP Remote IP Address :-
   Byte 1 000 to 253
   Byte 2 000 to 255
   Byte 3 000 to 255
   Byte 4 000 to 255
   
   Tested on an AA-NDC 03.02.00 system and Byte 2 would not accept a value of
   255.
   010.255.021.005 resulted in INVALID VALUE
   010.254.021.005 was accepted.
   
   So a TAR as documented range for Byte 2 not covered.




Summary:
TAR 372866 - Open printer prints a square instead of specific character strings

Description:
AA NDC 3.2.0, XFS 4.5.0, open statement printer using Arial or Lucida
(console) fonts 

This problem has been reported in by Israel. When they try to print, in
Hebrew, the sequence "d or "D as part of the print data in a Transaction
Reply a square is printed on the paper. 

The problem is that the print data "d is converted into \x22d and inserted
into the form by AA NDC (\x22 is the hex sequence for "). The parser
interprets the d as a hex value too hence a box is printed as it tries to
print an "unknown print character". NB This is an issue for letters 'a'
through 'e'). The sequence \"d in the form will be printed correctly. 




Summary:
TAR 371295 - AA-NDC: Null C09 screen causes UEH on  Rear Settlement Transaction

Description:
AA-NDC 03.02.00 
XFS 04.05.00 

Problem has also been reproduced in Dundee. Logs available. 

Recreatable Just send an empty C09 which is accepted, setup a supervisor
txn and return to in service mode. 

-------- 

We have found that when host downloads a null C09 screen (just the C09
screen number immediately followed by field separator), then if the
replenisher goes into supervisor to select Replenish function 15 for rear
settlement, the ATM locks up. 

We initially found this issue while testing Americas AANDC 3.02.10, but also 
found the same issue exists with Dundee base AANDC 3.02.00. 

I do not have logs to send you right now - I can capture logs and send them
later if needed, but we have traced the problem to where we believe it is
the 'deformatter' worker that is not properly handling screen data with zero 
length. 

This issue has occurred in the Visa DPS lab during their testing of Americas 
AANDC 3.02.10, and we expect that they are going to require a fix before
they will certify 3.02.10. This is why I made this a Priority 2 issue



Summary:
TAR 370805 - NDC Echo worker does not display entries correctly

Description:
When the NDC echo worker is used the entries are incorrectly displayed. The entries are displayed alongside the previous entry on the screen (until the mask is full). The clear key resets the display position and appears to function correctly but infact continues with the same incorrect diaplay formatting as above. 

The following best represents the output on a screen when the NDC echo worker is used. 

mask ***.** and right to left echo 
original display -> . 
type "1" screen displays -> . .1 
type "2" screen displays -> . .1 .12 
type "3" screen displays -> . .1 .12 1.23 

hit "CLR" 

display now shows -> .12 
type "4" screen displays -> .12 1.24 




Summary:
TAR 368372 - Memory leak in Application core when using touchscreen to select FDK area

Description:
Memory leak in Application core when using touchscreen to select FDK area



Summary:
TAR 371634 - System Resets with XFS Manager -42, out of memory.   Leak in keylib access.

Description:
Following extensive investigations under TAR 366878 on XFS, where a memory
leak was discoverd in the XFS Manager, it was also highlighted that a
 further memory leak in the XFS Manager was being generated by AA-NDC :
   
The code calling  INFO_GET_KEY_NAMES does not free the result at all!
   
This is called every time we collect a pin on NCR.
   
There is another instance of a call to INFO_GET_KEY_NAMES  but this is only
run on Encryptor initialisation - so very rarely & not during transactions.
It also is not freed.




Summary:
SCPM: Full bunch cheque message interface with host change (NDC Host Control)

Description:
This requirement is to address the TrRequestState & ProcessMultipleCheques Reply developments in support of SCPM.



Summary:
SCPM: DisplayChequeSummary State

Description:
DisplayChequeSummaryState development in support of SCPM.
DBS Phase 1.



Summary:
SCPM: ChequeDetailDisplay State

Description:
ChequeDetailDisplayState development in support of SCPM.  Not required by DBS.



Summary:
SCPM: BunchChequeAccept State

Description:
BunchChequeAccept State development in support of SCPM.
DBS Phase 1.



Summary:
SCPM: (Unsol) status reporting to host & terminal commands

Description:
DBS Phase 2



Summary:
SCPM: Exits Framework for .NET implementation

Description:
Exits Framework development in support of SCPM
This includes:
- C-Exits I/F available in C#
- C# Exit State Execution using EntryPointSynchroniser
- Wrap NDC Keyboard (which supports touch)
- NDCRenderer



Summary:
(AANDC 03.03 PRE IT)Supervisor screen is not getting updated with the counters entered while running 8 ADD CASH

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

Scenario:
1.start the applications and Go to supervisor
2.Go replenish menu and select 5 CLR CASH
3.Select 8 ADD cash,enter cassette type as 1 and notes 100, sceen is not update with the 100 note count for type 1. its the same for all cassettes
4.press cancel
5. select 2 DISP Cash , all counter shown as 0.
6. exit supervisor, send GRT Counters ( 1 fs fs fs 4), we see the updated counters info.
7. Go to supervisor now and run 2 DISP CASH , now it shows the updated counters.

Logs attached.






Summary:
(AANDC 03.03 PRE IT)Application core getting crashed while entering the keys in supervisor after touching on touch screen

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

Prereuisite: This is only happening on a touch screen machine

Scenario:
1.Go to Supervisor
2.Select 6 access and 25 key entry
3.Select Enter Key A and start entering the keys.
4.select A/B on the touch screen, Application core is getting crashed.

Logs Attached.



Summary:
(AANDC 03.03 - PRE IT) Application not going into Supervisor after Envelope depository went to suspend

Description:
Build:
AANDC 93.03.03.05
XFS 04.05.00

Scenario:
1. insert card and selet the fast cash option
2. send the DEP_910 from host.
3. Take the envelope and Hold the shutter of the Envelope depository so that it cant open.
4. Take card and eventually application moves on to suspend mode.
5. Toggle the mode switch to supervisor.
6. Application doesn't move on to Supervisor.

logs attached.




Summary:
Printer margins should be not calculated by the application on NCR hadware

Description:
RFC rasied as a result of TAR 376683 - Statement printer is not being initialised by K03 screen contents

The left and right margins functionality was changed for AANDC 03.02.00 to calculate the margin inside the application using software counters. This works fine but if an external application (in the case of the TAR about the customer is using sysapp) physically changes the device margin (at the firmware level) then the application cannot reset it back. The purpose of the kscreen is to ensure the printers are returned to application defaults which now cannot happen with the margins. This RFC is to make the software based margin control configurable to ensure that the control codes for the kscreens are correctly actioned on NCR hardware.

Current workaround is to set the ProcessKscreen registry setting to 0



Summary:
Customisation layer crash when attempting to do a trn reply bna ref

Description:
Customisation layer crash when attempting to do a trn reply bna ref



Summary:
Web Exit State should ALWAYS use DM for Web Exit - Never Web Exit Control

Description:
This will get rid of termination issues and duplication of work.



Summary:
void mOOXFS::RaiseError(char * command, int hr) buffer overflow

Description:
void mOOXFS::RaiseError(char * command, int hr) causes buffer overflow - buffer only 80 bytes in length.



Summary:
Support 3DES on BAPE

Description:
Support 3DES on BAPE



Summary:
ECB6: Counts are reported in -ve values when ECB6 is disabled

Description:
Install ECB6 and keep it in disable mode(i.e. set CATMODE to 0 in note categorisation registry path)

Do any simple deposit transaction and when counts are checked, counts updated in -ve values.

(This test passed when executed on a simulator. Counts did get updated correctly. Expecting this test to pass on ATM only when real note template is installed)



Summary:
Update worker help of ActiveScriptHost

Description:
Current help text:
Data Objects:  This work group contains the COM object workers to be manipulated within the associated script. You can place Real Store, Integer Store, String Store, or Variant Store workers in this work group. If a displayable Active Control worker is placed in this work group, then it is also displayed.

New text: ... You can place Real Store, Integer Store, String Store, Variant Store, Common Integer Store, Common String Store, Persistent Integer Store, Persistent Real Store, Persistent String Store, Sharable Integer Store, Sharable Real Store and Sharable String Store, Integer Array Element workers in this work group.  ...





Summary:
DisplayManager: Add file header info and method header info in all the files where headers are missing

Description:
Add file header info and method header info in all the files where headers are missing



Summary:
TAR 362993 - No unsolic card reader status when card reader fatal on supervisor exit

Description:
No unsolic card reader status when card reader fatal on supervisor exit



Summary:
TAR 362993 - No unsolic card reader status when card reader fatal on supervisor exit

Description:
No unsolic card reader status when card reader fatal on supervisor exit



Summary:
TAR 357532 - In Dual mode the EJ Data is disabled if the paper journal is fatal

Description:
In Dual mode the EJ Data is disabled if the paper journal is fatal



Summary:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer

Description:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer



Summary:
TAR RFC 376131: AA-NDC : AANDC 03.02 Allows Encryption Mode value to be changed in DAPI7 (INTL) on NCR ATM's

Description:
See TAR 376131



Summary:
TAR 375322: Requirement for Track 2 Data in cardless transaction is not documented

Description:
See TAR 375322.



Summary:
TAR 375736: AA-NDC: Reference manual has incorrect information on Printer Control Codes

Description:
See TAR 375736.



Summary:
Integrate CIC 1.2 into AANDC 3.3

Description:
Integrate CIC 1.2 into AANDC 3.3



Summary:
TAR RFC 375742: Cardless Activation with no TK2 data fails when 'T' State used

Description:
Refer to STAR...
T State requires a valid FIT Match to initiate Cardless transaction.

In order to perform a cardless transaction, the state required for the
transaction is defined in Enhanced Configuration Parameter Option 77. This
state should be executed whenever an active key is pressed however dummy
Track 2 data is also required. 

Currently, there is an issue when using the "T" state in that, even if the
SkipFITMatch regsitry setting has the value "1" (to bypass the FIT Match),
the FIT Match is not performed, but the Next State processing is not
executed and the flow returns directly to the "000" state. This request is
to docuemnt the requirement for the regisitry to bypass the FIT Match in the 
same way as it does for "A" state.



Summary:
TAR 365888 - Dash Reader fails to display error screen after Misread

Description:
Dash Reader fails to display error screen after Misread



Summary:
TAR 365888 - Dash Reader fails to display error screen after Misread

Description:
Dash Reader fails to display error screen after Misread



Summary:
TAR 361152 ¿ AA-NDC: Change usage of Timer 72 for non Dash card readers to Timer 2

Description:
TAR 361152 ¿ AA-NDC: Change usage of Timer 72 for non Dash card readers to Timer 2



Summary:
TAR 359080 - AA-NDC 3.2: GR1T wrongly implemented - Notes Presented V's Cash Presented

Description:
AA-NDC 3.2: GR1T wrongly implemented - Notes Presented V's Cash Presented



Summary:
TAR 357862 ¿ Screen displayed too long if Dash reader fails Read on Exit

Description:
Screen displayed too long if Dash reader fails Read on Exit



Summary:
AANDC Voice Guidance XML Configuration should add new optional element to include language identifier within Voice Guidance Buffer

Description:
To allow the voice guidance language to be configured while restricting the Voice Guidance Transaction Request Buffer to '<' some new data needs to be added to the Transaction Request Message. The XML config file should have an optional element added that enables the ISO 639-1(2 char)value to be added to the Voice Guidance Buffer. By default no data should be included in the buffer.



Summary:
AANDC IP Should document that Voice Guidance Buffer should be configured to '<'

Description:
The AANDC IP should document that the Voice Guidance Transaction Request Buffer is always configured to the '<' character within the Voice Guidance XML configuration file



Summary:
Passport incorrectly integrated in build 04

Description:
Suresh found issues in the integration of Passport in build 04. The original instructions were not accurate and updated instructions have now been provided.



Summary:
Author ID's used in the 03.03.00 project

Description:
Need to ensure that all developer workerID are module copied over to the NDC Administrator User ID or clearly document in the publications which Author ID cannot be used.

For example, the state type slip work all has the Author ID Xn93m3 (where X is a unique number) this means customer cannot use an ID marked nm. is this will cause problems with there integrations.



Summary:
ECB6 : Signature for counterfeit note is not logged in ECB6 EJ

Description:
With registry set up as: 
ECB6 Mode 1, Cat3 Rollback 1, Cat3StoragePolicy 0 

Signature for counterfeit not is not logged when hardware error occurs during Cash insertion. Say, Insert notes(good+suspect+ counterfeit) & rack out lower transport. Then signature for suspect notes is logged, but not for counterfeit notes

This is observed while executing test 5.4.1 & 5.4.2 from ECB6 UTS





Summary:
Move MV ADD CASH Menu so that ADD CASH is same on mixed network.

Description:
MV ADD CASH option shows a new menu for setting up casettes on Wincor. Would be better if the normal add cash menu was shown so that replenishment instructions are the same on a mixed network. MV ADD CASH can be moved to configure menu to set up the cassettes for the first time - there after normal ADD CASH is all that is required as long as the physical cassettes are configured when they arrive at the ATM. Will require IP updates.



from Email greece PS 20/3/07
4. The Replenishment ADD CASH Menu created some concern with the inclusion of cassette configuration options in there (as I had predicted it would). For the moment I only did some "cosmetic" changes in RESRVD to make the supervisor replenishment functions more streamlined in appearance (as in the attached "resrvd.up2"), but for the next product release take into account the following recommendation: Take completely out of the Replenish ADD CASH Menu functions 1, 4, 6, & 7 and place them in the Configure Menu as a sub-menu that will allow configuration of the cash units. In the Replenish ADD CASH sub-menu renumber the available functions as 0, 5, 8 & 10 so that they match the function numbers that are available outside the sub-menu (except for the '0'). In this way the procedures of adding cash will be much closer to the ones on an NCR ATM. You have to consider that this is of great help to a bank that has NCR and WNI ATMs with our NDC since they want to be talking about same function numbers for same procedures. I hope the argument is understood. [Lawson, Richard]  OK thanks for this -  the reason the add cash menu is like this is that these are the sequential steps you have to take to completely set up the cassettes  - However I take your point and it may be better to move this menu to configure only to be used for the situation where the cassettes need set up.  After the cassettes are set up the normal ADD CASH/STD CASH is sufficient.




Summary:
(AANDC PRE IT 03.03):CDM Fitness is not changed to 0,after suspend condition is cleared by application

Description:
Build:
AANDC 93.03.00.04
XFS 04.05.00

Scenario:
1. make the CDM to suspend state by holding the shutter.
2. Machine goes out of service.
3. Fitness of CDM is 3 now.
4. wait for application to clear the suspend condition.
5. after 5 minutes, Suspend condition will be cleared and machine goes to online.
6. Send the GET FIT from host, Dispenser fitness is still reported as 3 where as it should report as 0.



Summary:
TAR 362596 - Cardless transaction reports Fatal MCRW in close state if MCRW is Fatal.

Description:
Cardless transaction reports Fatal MCRW in close state if MCRW is Fatal.



Summary:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable

Description:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable




Summary:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable

Description:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable




Summary:
Delete catalog BNA 1.02.03.

Description:
It contains old BNA workers which are not needed any more. It should be deleted so that the workers are deleted and so there is no chance for developers to accidentally use those old workers in place of CIC ones. This happened recently and caused a bug to be released with CIC1.1.1, and a TAR to be raised (TAR 375566).



Summary:
TAR 375566 - Insertion Timer is not cancelled when notes are entered

Description:
When Notes are inserted into the BNA module, Timer 77 (Notes insetion timer) 
   should be cancelled. This does not happen because the caller ID referenced
   in the Listener in this workgroup (WG15 in BNA Enable Script) does not match 
   the caller in the Stop FDK workgroup (WG14 in BNA Enable Script). This means 
   that when notes are refused, the CashIn is cancelled before the notes are
   taken, which in turn causes the SP to report a User error for any subsequent 
   operation other than a Retract command.



Summary:
Incorrect Coin counts with 4 hopper dispenser and option digit 79 set to 1.

Description:
With enhanced configuration option 79 set to 1, during DISP, CLR, ADD coins, PRNT CNTRS and STD Coin, all 8 hoppers are shown dispite that face that there is only four connected. As all 8 hoppers are diplayed coins can be added to hoppers 5 to 8.




Summary:
Incorrect Coin counts with 4 hopper dispenser and option digit 79 set to 1.

Description:
With enhanced configuration option 79 set to 1, during DISP, CLR, ADD coins, PRNT CNTRS and STD Coin, all 8 hoppers are shown dispite that face that there is only four connected. As all 8 hoppers are diplayed coins can be added to hoppers 5 to 8.




Summary:
TAR 361839 - Card read error is reported for every transaction when Cardless Transaction is active

Description:
Card read error is reported for every transaction when Cardless Transaction is active



Summary:
TAR 361839 - Card read error is reported for every transaction when Cardless Transaction is active

Description:
Card read error is reported for every transaction when Cardless Transaction is active



Summary:
TAR 363174 - TAR RFC 270388 has broken backwards compatibility for CPM receipt print

Description:
TAR 363174 - TAR RFC 270388 has broken backwards compatibility for CPM receipt print



Summary:
TAR 360789 ¿ Retract Message "Presenter Error" is fixed. Manual indicates Screen T30 used

Description:
TAR 360789 ¿ Retract Message "Presenter Error" is fixed. Manual indicates Screen T30 used



Summary:
TAR 359344 - Timer 7 is bypassed when No Retract option is set

Description:
TAR 359344 - Timer 7 is bypassed when No Retract option is set



Summary:
TAR 357853 - AA-NDC: Card left in DASH on Transaction reply causes command reject 

Description:
TAR 357853 - AA-NDC: Card left in DASH on Transaction reply causes command reject 




Summary:
DisplayManager: voice guidance can lock display screen, DM has to support this feature.

Description:
Display Manager also should lock display screen when VG enables this feature.
If idLockCurrentScreen = 1 we should not display anything. This should be on a screen by screen basis.



Summary:
DisplayManager: There should be an option to stop html dowloaded from the host.

Description:
There is an opinion that malicious script code can be downloaded as part of html, that can harm. Option should be provided to prevent it.



Summary:
SNR: Add Serial Number Read functionality to Init BNA to handle error scenarios

Description:
Currently, the serial numbers of the notes in transport are not returned by the platform when cash in fails after notes insertion. To handle this, implement SNR in supervisor Init BNA and make sure it is activated only if last cash in fails because the serial numbers would have already been logged if cash in command completes successfully.



Summary:
On MV system where counts are printed dont print cassette mapping  config.

Description:
where cash counts are printed the cassette mapping config is printed. This was removed locally by greece for the millenium project  to match NCR systems. move this functionality to display/print configuration.






Summary:
Debug out only shows "Application Core" as the active process

Description:
When looking at debug and OOXFS window in debug log all the process names are application core - this means trying to find workers within the application may be harder to find. 
debug log should be updated not to use the process name but the application source 



Summary:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service

Description:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service



Summary:
Error in WFSCleanUp creates an mError

Description:
When WFSCleanUp returns a HRESULT <> WFS_SUCCESS, an mError is raised.

Due to fix 364998, this can know happen in this scenario: A small test application is created and this application does not use CEN-XFS (does not do OOXFSInitialise), then when the application is terminated, OOXFS::Terminate is called, which will call WFSCleanUp. In this case WFSCleanUp will fail, because WFSStartUp has not been called and an mError will be raised.

The easiest solution is to avoid the mError exception in this case as we are terminating anyway. 



Summary:
UTS still to be updated for 'Verify that the State Flow can be exited through the normal method of the `Exit Condition Tester'

Description:
Info available in email from StephenG.

Document reviewed and updated.

mapsapp2\APTRA Advance NDC 3.03\Documents\Final\StateTypeSplit




Summary:
During a transaction, no response is returned to sending a terminal command from the host

Description:
When we send any terminal command from host while transaction is running, no response is returned to the host after completion of the transaction (seen this problem while running UT).
Seen by Reddy during Pre-IT.



Summary:
No P20 message seen at host after exiting from supervisor

Description:
P20 is printed on the journal.
Seen by Reddy during Pre-IT.



Summary:
In CBDP, the application can go out-of-service during a transaction

Description:
If we send OOS while any transaction is processing, application is entering into OOS before completing the current transaction. If GIS is send while application is in OOS, the transaction is continuing from the state where it entered into OOS.

Scenario for the issue:
1) Start Application
2) Select Cash Transaction -  Transaction type and Fast Cash screen will be displayed
3) Send OOS
4) Select Fast Cash - application goes to OOS (but application should go to OOS after completing the current transaction)
5) Send GIS (while in OOS)  - application shows the amount screen and continue the flow

But this issue was not there during Unit Testing. I tried but could not able to find the cause for this issue.



Summary:
Address sync call update in Security.cpp

Description:
Based on Phil's list of sync call updates required:
"Security.cpp - One instance called from mNDCEPPKeyModeInitialiser::Start method and another from mNDCEPP_RSAImportDESKey::Start method. Maybe complicated to fix though.  Raise GRIT and fix as a BUG."

According to Nagu, the mentioned updates are not in security.cpp.



Summary:
Init Resources work group appears to have been put in the wrong place in State Type Split Customisation Layer

Description:
Original GR1T detailed... "Init Resources work group (in 2s686g213) from ANDC 3.2 Customisation Layer which was used to Reset the devices after suspend, has been missed in State Type Split Customisation Layer. I hope Init Resources should be added after Handle Suspend in Close State application (State Types catalog).  Spafford, Michael has identified this missed update."
It seems though that Init Resources should be moved into the Suspend Handling to cover all scenarios.



Summary:
Display only COUNTERFEIT in 58 DISP BNA CASS CNTRS. Remove "NONE" from the header

Description:
Display only COUNTERFEIT in 58 DISP BNA CASS CNTRS. Remove "NONE" from the header



Summary:
AANDC3.3 - Passbook Workers - Need to ensure that Passbook Workers are synchronise with the Accept (Read Form) otherwise the workers will think there is no PB present

Description:
Singapore PS reported an issue where the Writer was always reporting abandoned. Further tracing showed:-
DBSPBCu.. 12:12:37.703 mPassbookWriter: ProcessEvent() Passbook not present

This wa sthe case even though a Accept preceding the write had been successful. It was determined that the most likely cause was a synchronisation issue where the final accept processing had not completed when the write worker was obtaining status. A schange has already been made to the Passbook Reader to resolve this an most likely a similar change is required for tthe other passbook workers including the writer



Summary:
Quality of cheque image print on legacy Personas thermal printers is not as good as in AANDC 3.2

Description:
The default cheque image print (i.e. not resized, not rotated) is not quite as good as in AANDC 3.2.  Need to analyse Chile PS code to determine how to improve quality of image, or alternatively use AANDC 3.2 code for default prints.



Summary:
Re-Evaluate the limit of ChequeSizeRotated for vertical cheque image printing

Description:
The limit of 75mm for vertical printing is not good as customers are going to ask for bigger images. The paper width is 80mm on all NCR printers, so the horizontal limit of 75mm is fine.

The 40 Column Ref Man B6461203, which is for PersonaS Thermal Printers only, does not say that you cannot print big images ... it only says that you should not send big chunks of data in one command:

Note 1: It is recommended that large files (25K to 30K) should not be sent to the receipt and journal printers at the same time, as communications problems may arise.

This obviously means we would need to chunk the Epson file into smaller sections and repeat the Print Epson Graphics command.

The PersonaS printer might allow to have a bigger vertical image (less data due to lower resolution) compared with the USB printers.

On USB Thermal Printers ¿ Don't know what the limit is. The vendor¿s specification we have does not include this information. Most likely it is the same case. Due to resolution change, for the same image width we need to send more image data.

In summary, we have an issue with the limit of ChequeSizeRotated, where 75mm is not good enough. We need a bigger limit ... Probably something in around 120mm as a guess ... so that the receipts do not become too long either.

The image printing code needs to be tweaked for the Forms-based printing anyway. With forms-based printing, where the whole printing job is done differently, we are not likely to see limitations of this kind. We have seen a demonstration of graphics print in the lab ¿ that was a nice big image.

Agreed at UTC milestone meeting for CPM Enhancements to raise a GRIT to carry this issue post UTC issue. This is because it is not worth spending time to work around the 25K limit if we have to move to forms-based printing anyway.




Summary:
ECB6 : Escrow Refund counts include counts of Cat3 notes when Cat3Rollback is set to 0

Description:
With settings as
Retract option enabled; Cat Mode1; Cat3Rollback 0 & Cat3StoragePolicy 1&0(do this in two different scenarios) 

Insert good+suspect+counterfeit notes in combination, and select Refund on the confirmatin screen. Cat3 notes are not refunded, as Cat3Rollback is set to 0. But when 3 DISP CNTS are checked in Supervisor, ESCRW RFND counts include cat3 note count as refunded

Refer to the logs in the attachements. This is observed when executing test 5.2.10 from ECB6 UTS



Summary:
ECB6 : Total supect note count is incremented & a pop messsage is displayed when notes are left to time out and allowed to retract

Description:
With the settings as 
CatMode 2; Cat3Rollback 1; Cat3StoragePolicy 1 & retract enabled

Insert notes in combination of good+suspect+counterfeit. Suspect notes will be detected as invalid notes & are rejected. Do not take the rejected notes and allow them to retract. Check for counts in supervisor, 3 DISP CNTS increment the count for Total suspect notes inserted(total suspect note counts are incremented in everycase with CAT mode set to 2) & a pop up message is displayed when notes are retracted. This is observed when executing test case 5.3.4 from ECB6 UTS

Refer to the logs in the attachments





Summary:
Increase size of PMDATA as done for Adv Dev Recycling project under CP 381127.

Description:
Need to merge this fix into CIC120 devpath. This GRIT created to track that.



Summary:
For passbook support, to use only stripe data to determine the next available line for printing

Description:
Currently, the information on the stripe is read and then the page is scanned. If the Next available line picked up from the Scan does not match the line number held on the Stripe the passbook is rejected with a Line Mis Match error. This change will use only the stripe data to determine the next available line for printing.

More background info...

Current Functionality:	The information on the stripe is read and stored by the
		Passbook Reader.  This stripe data includes the next
		available line number.  The page is also scanned, using the
		Passbook Reader, to obtain the next available line.
Problem:		The next available line in the page scan sometimes does
		not match the next available line number obtained from the stripe.
Impact:		In this case, passbooks are being rejected with a Line Mis-Match error.
Proposal:		Not to use page scanning, and only to use data read on the stripe.

What can currently be authored to avoid the Line Mis-Match error:
The data read from the stripe (using the Passbook Reader) is parsed to obtain the next available line.  This is used to set the Line Number Store worker with the next available line (and hence override the scanned line number).  The Line Number Store is set correctly prior to activating the Passbook Printer worker.

So, the problem really is only to avoid scanning the page number, and hence improve the performance.  This is similar to the new configuration option Eddie added to avoid scanning for the page number.



Summary:
Clear Suspend not working due to failing to include the correct versions of ResManBSS.cpp and ResManBSSWC.h

Description:
Identified the reason for Clear Suspend issue. We have missed the latest versions of ResManBSS.cpp and ResManBSSWC.h. Clear Suspend is working fine after updating  these files.  We need to take the below versions:
ResManBSSWC.h  -  1.5.1.2
ResManBSS.cpp  -  1.14.1.2



Summary:
Init Resources work group from ANDC 3.2 Customisation Layer has been missed in State Type Split Customisation Layer

Description:
Init Resources work group (in 2s686g213) from ANDC 3.2 Customisation Layer which was used to Reset the devices after suspend, has been missed in State Type Split Customisation Layer. I hope Init Resources should be added after Handle Suspend in Close State application (State Types catalog).  Spafford, Michael has identified this missed update.



Summary:
INIT BNA improvements

Description:
INIT BNA is difficult to maintain and has a few issues which are just waiting to be discovered. Also, there are two versions, one for Replenish 54 function and one for Exit Supervisor. These should be consolidated into one, and the one tidied up to remove the bugs, to make it more maintainable, and easier to follow and make changes. Also, to be ready for move to single EXE where it can make use of shared GBNA ActiveXFS control, so no need to call SetDevice in every script host.

As part of the development a new UpdateCounts function is introduced which is used for updating Cassette counts CDIs. Hopefully, this can be re-used in other parts of the application.



Summary:
Journaling after Close State leave notes in escrow and AER enabled doesn't update  the counts.

Description:
Journal Message when notes are left at escrow in close state and AER is enabled is as shown below

JRNL:

CASHIN AUTO ERROR RECOVERY STARTED
RESET OK
...
...
OPERATION OK
ESC: 000
VAL: 000
RET: 000
...



Summary:
AER at Start Of Day doesn't update Counts either in Supervisor or in Journal.

Description:
when AER is enabled at Start Of Day, following report has emerged:
1: Total Encashed Counts doesn't get updated.
2: 58 DISP BNA CNTRS updates the counts, but does incorrectly.
3: Following Journal Message is printed which is wrong:
JRNL:

CASHIN AUTO ERROR RECOVERY STARTED
RESET OK
...
...
OPERATION OK
ESC: 001
EUR5 - 000, EUR10 - 000,
EUR20 - 001, EUR50 - 000,
EUR100 - 000, EUR200 - 000,
VAL: 000
RET: 000
...
...
The above message is seen in case of Bills detected at powere-up, yet the device is in good state. 



Summary:
CashInEnd failed event affects AER in updating counts twice. 

Description:
When CashInEnd error event is generated, then Encash Counts are made equal to escrow counts. In addition to this, the Encash Counts are again updated after AER is started. This results in updating the counts twice.



Summary:
AANDC3.3 - Supervisor mpj - Replenish Director Share Broken

Description:
The Replensih Director under 7n137m3 has two different instances 8n137m3 and 6l525y13 - There should only be one instance. Care should be taken when fixing this because ther eis an unknown over which one has all the fixes or maybe one has some fixes/changes and the the other has some other changes.



Summary:
ECB6 : "Notes in Transport" count is incremented with Cat3rollBack set to 0 and notes inserted in combination of good+suspect

Description:
With the registry key setting as Cat3RollBack set to 0, do a deposit transaction with good+suspect notes in combination. Select deposit on the confirmation screen & send BNA_DEP. Check the counts in supervisor, "Notes in Transport" count in 3 DISP CNTRS is updated to updated to 3(always)& Reject counts in 58 DISP BNA CNTS is updated to 3 as well.

This is observed while executing test case 5.2.16.1 from ECB6 UTS. Refer to logs in attachments. 



Summary:
ECB6 : Escrow  Refund counts include counterfeit note count also included is refund count

Description:
Do a deposit transaction with good+suspect+counterfeit notes inserted in combination & send BNA_REF transaction reply. Then ESCRW RFND count in 3DISP BNA CNTS includes the count of counterfeit notes as refunded(while the counterfeit notes moved to counterfeit bin)

Find the logs in attachements. This is observed while executing test case 5.2.14 from ECB6 UTS



Summary:
Load MAC message always fails.

Description:
Seen in United Arab Emirates with ANDC 3.0.3 over Level 4 ATM simulator. message details in logs attached.

As a result of 319506 where the encryptor version is less than 3.02 the KVV evalworker will signal failed.
update to fix for 342300 thet tries get KVV commnd before reverting to registry.



Summary:
Wincor - Application mError after SIU Set_Event

Description:
Bug in ANDC , we try to register for mode switch event where it is not supported - fix in ooxfs.dll



Summary:
Wincor -supervisor on front - clear key is backspace action not clear.

Description:
clear key needs to clear full input. may be configuration



Summary:
Wincor - Application mError where shutter open during test cash

Description:
Application cannot clear reject counts and mErrors due to shutter being open.
 remove mError & update logic to shutter test to try close even if open fails...
Also need to reject where notes on transport before can perform test cash units or reset.



Summary:
Support for 'Normal Printing' Escape Sequence (ESC 7) & ESC 6 inverse

Description:
Require ESC '7' control sequence to be stripped from print stream.  Found on site at ATH MV POC.



Summary:
Include GR1T 380513 fixed in ANDC 3.01.02 into ANDC 03.03.00

Description:
When doing an Envelope Deposit during a Cardless Transaction, when no Track 2 data is specified in the registry, a System Escape occurs.



Summary:
ECB6: Inconsistent counts reported when counterfeit notes are inserted in large numbers

Description:
Counts are not reported consistenly when counterfeit notes are inserted in large numbers(say above 45-60).This was observed while executing test case 5.2.3 on GBRU from the UTS for ECB6

Please refer to the logs in the attachments. Logs for the same scenario are attached which reported different counters when executed thrice



Summary:
ECB6: Counts are updated in negative values when counterfeit and invalid notes are inserted in combination

Description:
When 1 counterfeit note and 1 invalid note are inserted at "Please enter notes" screen, counts are updated in negative values. 

Please find the logs in the attachments. 



Summary:
TAR 338850 - AA-NDC: Enhanced config download option 77 resets registry even if not sent

Description:
Cardless transaction paramters are defined by registry settings as defined
in the AA-NDC Developers guide. 

The kay location is 

HKLM\SOFTWARE\NCR\Advance NDC\Extensions\Cardless Transactions 

One parameter is the next state value. 

This value can also be set by using option 77 in the enhanced configuration
parameters message. 

The customer has set the registry set at install time to a specific value,
to avoid host changes. However when any enhanced configuration parameter
message is received where option 77 is not included, the registry value is
reset to the last DOWNLOADED value, or the default of 0 if not previously
downloaded. This overwrites the customer defined value. 

The request is to have either the registry value initially set to become the 
default value, or for the enhanced configuration message processing not to
modify the option 77 registry setting if not included in the message. 

The simplest option would be to read the registry value at start up and put
this into the default store for this option.




Summary:
Cardless Transaction does not support alphanumeric states

Description:
noticed when testing TAR 374243
Enhanced configuration parmeter 77 which controls and defines the next state numder for cardless entry only supports values between 000 to 255. This means that a customer cannot specify an alphanumeric state, for example ZD4 as a next state number for cardless entry. If an enhanced configuration command option 77 is sent using an alphanumeric state type number not in the range of 000 to 255 then a ready9 is returned and the next state number is not changed.

I'm not sure if this is a valid requirement or not but raising the GR1T just in case this is an issue.



Summary:
TAR 357973 - Fix broken TAR 333655 + journal delta cash counts for Diagnostics operations

Description:
TAR 333655 (AA-NDC cash counts are incorrectly updated after a diagnostic
dispense) was addressed in AANDC 3.1.1 but has been broken in AANDC 3.2.0. 
In addition to TAR 333655, AANDC should also journal Diagnostics dispense
counts as per NDC+. This involves journalling the delta counts if the
dispensed or rejected counts change while in Diagnostics via a Diagnostics
Test Dispense or Diagnostics Test Cash. Unlike NDC+, AANDC cannot
immediately journal the delta in counts (based on XFS standard) but can
journal after exiting Diagnostics and returning to Supervisor - in the case
of a power fail, AANDC can journal the change in Diagnostics counts at Start 
of Day (this is not supported by NDC+). 
Note:  This GR1T/TAR relates to note counts, not coin counts.



Summary:
TAR 357973 - Fix broken TAR 333655 + journal delta cash counts for Diagnostics operations

Description:
TAR 333655 (AA-NDC cash counts are incorrectly updated after a diagnostic
dispense) was addressed in AANDC 3.1.1 but has been broken in AANDC 3.2.0. 
In addition to TAR 333655, AANDC should also journal Diagnostics dispense
counts as per NDC+. This involves journalling the delta counts if the
dispensed or rejected counts change while in Diagnostics via a Diagnostics
Test Dispense or Diagnostics Test Cash. Unlike NDC+, AANDC cannot
immediately journal the delta in counts (based on XFS standard) but can
journal after exiting Diagnostics and returning to Supervisor - in the case
of a power fail, AANDC can journal the change in Diagnostics counts at Start 
of Day (this is not supported by NDC+). 
Note:  This GR1T/TAR relates to note counts, not coin counts.



Summary:
Support/Report product class 6636  / Support/Report product class 6618

Description:
Support/Report product class 6636  / Support/Report product class 6618



Summary:
Support for USB Coin Dispenser

Description:
Minor change to stop HOPPER REMOVED from being always being displayed when using the USB Coin dispenser



Summary:
Support for USB Coin Dispenser

Description:
Minor change to stop HOPPER REMOVED from being always being displayed when using the USB Coin dispenser



Summary:
TAR 368336 Application selection fails to display correctly for > 999 screens

Description:
As indicated by the discussions between Jiri and Stephen Peat that have been 
provided to Euan and Ranjith, there is an issue with the StoreScreen
processing which means that the application display and language processing
is not performed correctly if there are more than 999 screens



Summary:
TAR 368336 Application selection fails to display correctly for > 999 screens

Description:
As indicated by the discussions between Jiri and Stephen Peat that have been 
provided to Euan and Ranjith, there is an issue with the StoreScreen
processing which means that the application display and language processing
is not performed correctly if there are more than 999 screens



Summary:
TAR 366467 - Enh Param 46 does not update USBIMCRW registry settings

Description:
Enhanced Configuration Parameter 46, which is used to configure the card
reader ECD (jitter) parameter remotely, updates both the SDCMCRW and
RS232IMCRW components (IMCRW added by TAR 326278), but it makes no chnage to 
the required registry settings for the USBIMCRW which is first released as
part of the 66XX units. 



Summary:
Request for non-magnetic card read function to be available in NDC

Description:
As discussed with StephenG and Alison:

Malaysia urgently require non-magnetic card read function in AA-NDC 03. This has been possible with earlier releases using the ADI interface but now it is not possible because the NDC card worker function appears to conflict with the non-magnetic card processing defined by Malysia in their local customisation.

Stephen has indicated that the change required would be a major issue for local customisation but relatively simple at the AA-NDC development level and therefore the best route is to request this change internally so that the NDC worker checks the registry for non-magnetic cards and issues an accept based on this setting.

As indicated in the regular conference call today, this is an urgent requirement which is p[reventing rollout.




Summary:
Request for non-magnetic card read function to be available in NDC

Description:
As discussed with StephenG and Alison:

Malaysia urgently require non-magnetic card read function in AA-NDC 03. This has been possible with earlier releases using the ADI interface but now it is not possible because the NDC card worker function appears to conflict with the non-magnetic card processing defined by Malysia in their local customisation.

Stephen has indicated that the change required would be a major issue for local customisation but relatively simple at the AA-NDC development level and therefore the best route is to request this change internally so that the NDC worker checks the registry for non-magnetic cards and issues an accept based on this setting.

As indicated in the regular conference call today, this is an urgent requirement which is p[reventing rollout.




Summary:
TAR RFC  324723 The NDC Data Collector does not support the "00" and "000" XFS key codes

Description:
"The NDC Data Collector does not support the "00" and "000" XFS key codes
   and ignores the keypress for these key codes. It should be modified to
   support these keycodes" 
    




Summary:
TAR 363068 - Incorrect solicited error message sent when env depository bin removed

Description:
Incorrect solicited error message sent when env depository bin removed



Summary:
TAR 363077: Cash out empty fatal goes to Cash low after enter/exit SV

Description:
From the logs supplied, the dispenser is reporting the cassette as empty on an exit from SV, AA-NDC then takes this and sends a message with the cassette as low



Summary:
TAR 364601 - AA-NDC: Additional blank receipt printed when using XFS 04.05.00

Description:
An additional unexpected blank receipt is ejected when sending a 24 line
receipt, with black mark mode enabled on the printer. This functioned
correctly in a previous AA-NDC release. 

Root cause traced to change in the XFS RPTR Service Provider functionality,
which has changed implementation from using the Printer_Without_Cut command
to using the Printer_Print command, which automatically adds an additional
line feed to the data sent by the application. 

The current AA-NDC NCR_SPs.reg file sets up the RPTR SP configurable
parameter "VariableLengthReceipts" which in previous SP versions implemented 
the Printer_Without_Cut printer command. However from XFS 04.05.00, the
Printer SP also requires an additional parameter to be configured to
implement the specific printer command which permits AA-NDC to function
correctly. The parameter is AllowBMSpecialPrint and this has to be set to
"TRUE". This additional parameter, nor the VariableLengthReceipts
parameter are documented in the list of configurable parameters in the XFS
online help (TAR 364599 has been raised on XFS to document these
parameters. 

TAR raised as a follow up action, for implementation in any future service
pack/releases. Customer has a working solution.




Summary:
TAR 364171 - AA-NDC: Receipt out causes 2 faults displayed on Fault display

Description:
Scenario is as follows: 
Access the receipt printer in the ATM without entering supervisor. 
Remove the remainder of the receipt paper from the roll, tearing it off
where it enters the printer feed mechanism 
Perform a transaction that prints a receipt. 
Paper out condition is detected and reported. 
Check the Fault Display (either directly on EOP or after entering
supervisor). 
The following is displayed: 
NUMBER OF FAULTS: 2 
RECEIPT FATAL 
MEDIA NOT PRESENT 
PAPER OUT 
Access Supervisor / Diagnostics and view Device Status List 
DSL reflects only one fault: 
RECEIPT PRINTER 
PAPER EMPTY 
SELF CLEARING 

both Westpac and NCR Australia would prefer that the FD displays only one
fault rather than implying there is two problems (with both of them the same 
thing, but using different words!). We expect the FD to be consistent with
the DSL. 

XFS appears to show both errors, but only reports on the main issue (i.e.
PAPER EMPTY) as shown from the OOXFS Trace: 
<OOXFS>supervisor 14/11/2007 15:15:29.673 mMVPTRDeviceImp - Received STATUS

fwDevice = 4 (WFS_PTR_DEVHWERROR) 
fwMedia = 1 (WFS_PTR_MEDIANOTPRESENT) 
fwPaper[SUPPLYUPPER] = 2 (WFS_PTR_PAPEROUT) 
fwToner = 0 (WFS_PTR_TONERFULL) 
fwInk = 3 (WFS_PTR_INKNOTSUPP) 
fwLamp = 3 (WFS_PTR_LAMPNOTSUPP) 
lppRetractBins = <NULL> 
usMediaOnStacker = 0 
lpszExtra = <NULL> 



This issue has been recreated by FGSC on Vanilla APTRA XFS 04.05.00 and
AA-NDC 03.02.00. 

Customer logs are available for analysis. 

Customer configuration: 
XP SP2 / XFS 4.5 
AANDC 3.2 
Other Software: 
T357442 - AVI displays only the last frame in states other than Card Read 
ssdsNDCCUST.DLL 15/08/2007 
T357450 - Depository not sending fatal when using TIDep & 
MStatus 00 being sent on solicited status events from the depository 
SSDSEnvDispenserDepTI.dll 04/09/2007 Superceded by T359904 
T357529 - Receipts not being cut when transaction reply includes additional 
group separators 
SsdsPrn40Col.dll 17/08/2007 
ssdsNDCPRNT.DLL 17/08/2007 
ReceiptPrint.dll 17/08/2007 
T357973 - Dispense during diagnostics not logged to journal and not
affecting totals 
OOXFS.dll 05/09/2007 
SSDSResIDsSS.dll 04/09/2007 
ssdsNDCDATA.DLL 04/09/2007 
resrvd.def 30/08/2007 
Supervisor.* 04/09/2007 
ApplicationCore.* 04/09/2007 
T359904 - Timeout on Jam on Env Dep handled incorrectly 
SSDSEnvDispenserDepTI.dll 19/09/2007 Includes changes for T357450 
T358584 - White BG after overnight FD 
SSDSOpDisply.dll 27/09/2007 




Summary:
TAR 363403 - AA-NDC: Interlock not displayed or cleared from EOP fault display

Description:
See TAR



Summary:
TAR 359742 - After replacing EPP - AA-NDC does not reinitialise EPP when it should

Description:
When an EPP is replaced or re-initialised, AA-NDC is not re-initialising the 
EPP (as expected). The SST resets and on boot AA-NDC detects that the EPP
is in mode 1 - which is incorrect as the EPP is blank. 




Summary:
TAR 363349 - When invalid state is found, debug (statedata) contains transaction reply data

Description:
When debuglog is running, and an invalid next state is reported, there
appears to be data from the last transaction reply appended to the end of
the data added to the statedata file : e.g. 

applica.. 11:34:48.937 +++ Invalid Next State [255] - Default Close
StateE?AND PRINT 
Applica.. 16:24:37.000 +++ Invalid Next State [00W] - Default Close
StateWAIT 

Although this is just a loggin anomaly, there may be some issue with a non
nul terminated string being used which may cause unexpected results. 




Summary:
TAR 363349 - When invalid state is found, debug (statedata) contains transaction reply data

Description:
When debuglog is running, and an invalid next state is reported, there
appears to be data from the last transaction reply appended to the end of
the data added to the statedata file : e.g. 

applica.. 11:34:48.937 +++ Invalid Next State [255] - Default Close
StateE?AND PRINT 
Applica.. 16:24:37.000 +++ Invalid Next State [00W] - Default Close
StateWAIT 

Although this is just a loggin anomaly, there may be some issue with a non
nul terminated string being used which may cause unexpected results. 




Summary:
TAR 362872 - Solic response to send supply counters (1.....4) has 5 Group Sep at the end

Description:
-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: 01 November 2007 14:44 
To: Suresh, Ranjith 
Cc: Pattullo, Euan; McDermid, Bryan; Coupar, Peter 
Subject: FW: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 
Importance: High 


Hi Ranjith 

I have an urgent issue brought in by BeeLian: (She is flying to Vietnam and
will be on site from tomorrow for a short time) 

For some reason 3.2 has added 5 Group Separators at the end of the Solic
reply to get Supply Counters and this change is causing her host not to put
the ATM In Service. My logs for 266, 311 and 320 follow: 

13:48:00 # 266 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000003000000000065535655350000000000000010006500000000000000
0001980000000000000000000000000000000000000000] 
14:03:40 # 311 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000000655356553500000655350000000018000000000900000000000000
0000000000000000000000000000000000030000000000] 
13:34:57 # 320 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000002655356553500000655350000000018000000000900000000020000
0002420000000000000000000000000000030000000000[Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D]] 

The manual implies that these GS's are only included if any of the optional
fields are present and they are not! And why only 5 GS's, there could be a
lot more. 

Is there any reason why these are now included and are you ok for me to
raise a P2 TAR? 

Regards 

Bryan 
Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 
WEB: <http://www.dundee.ncr.com/ssgsc> 
CKS: <http://cks.columbiasc.ncr.com> 






-----------------------------------------------------------------------------
--- 
From: Auto-EMail, FGSC 
Sent: 01 November 2007 13:21 
To: Gan, BeeLian 
Cc: McDermid, Bryan 
Subject: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


To: Beelian Gan, 

We have received your communication on this issue, thank you. It has been
assigned to Bryan McDermid of FGSC. Bryan McDermid will reply in due
course. The issue has been logged on our Sentinel tracking system as
Sentinel Problem RAZCLYL2B, "MY - |AA-NDC|SW|DEV| - reply to send supplies
has extra GS's in 3.2" (Priority 2). 

If you wish to check the status, you may do so by accessing the following
location on the World Wide Web -
http://rpc1866.daytonoh.ncr.com/status/display_full_incident.html using the 
Sentinel Problem ID given above, you will be able to view any updates to
your issue. 




Please Do Not Reply to this email. Replies should be sent to the engineer
assigned to your incident 

FGSC Automated Acknowledgement. 
---------- 

From: Gan, BeeLian 
Sent: 01 November 2007 12:22 
To: Auto-EMail, FGSC 
Cc: Chong, HockChoong 
Subject: AANDC 3.2 - ATM cannot go in service Due to Supply Counters
Message 

Attachments: Host Log - Supplies 3.2 vs 2.6.6.txt; Supply In-Out Messages 
3.2.txt; hwcfg0.txt; swcfg0.txt 
01 - Employee name: Gan Bee Lian 
05 - Country: Malaysia 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: 603-21175618 
20 - Customer Name: Sacombank Vietnam 
25 - Priority: Priority 2 
30 - Products Affected: 5877 
35 - Platform OS: Aptra XFS 04.05.00, XP 
40 - Application: AANDC 3.2.0 
50 - Environment: Development 
55 - Frequency: Always 
We recently upgraded an ATM from AANDC 2.6.6 to 3.2. 
There are some differences noticed on terminal to center message "Send
Supply Counters" (1?4) which has caused the host program to stop sending the 
subsequent terminal commands and hence did not bring machine in service. 

There are 2 differences: 
1) After field g11, terminal sends 5 trailing <group separator> without the
present of any optional fields. 

14:42:39 # 6 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]2 
00000000049900000000000100000001000000000000000000000000000000000000000000000
000000000000000000000000000000[Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D]] 

According to AANDC 3.2 reference manual: 
Table Note 45: If any optional group is present, all of the group 
separators preceding it will be included, enabling the host to 
identify the group 



Summary:
TAR 361428 - EJ Scheduled Daily Cutover occurs at 0400hrs when set to 0000hrs

Description:
Issue with the EJ Scheduled Daily Cutover not occurring at 00:00. 

This is the details of the configuration and testing I performed ;- 
Installed XFS 04.05.00 with AA-NDC 03.02.00 
Configured the ATM to use JRNL Mode = Dual 
EJ Mode = Multiple 
Scheduled Cutover = Enabled 
Pattern = Daily 
Automatic Init Copy Drive = C:\ 

Test 1 - Set the Scheduled Cutover Time = 1500 
Reset the ATM, restarted the apps the EJ cutover occurred at 15:04 (Note:
why not 15:00?) 

Test 2 - Set the Scheduled Cutover Time = 0000 
No reset and the logs show that the EJ cutover occurred at 04:02. Should've
been 00:00 

Therefore, when I changed the time to 15:00 and reset, the cutover worked 
However, when set to 00:00 (no reset) the cutover occured at 04:02. 

Also curious is that although I set the time to be specifically on the hour, 
the cutover's did not happen on the hour and were 2-4 minutes after the
hour? 

The debug logs and event logs do not appear to show much of concern. 
Supplied logs to RS and EP. 




Summary:
TAR 358584 - AANDC: Tx i/f to front in SV mode - screen goes 'blocky' after <15hrs

Description:
As discussed, emailed and shown to Ranjith: 

Hi, 

Anyway: Out/In SV, screen is still white and blocky - only way to clear is
to reset ATM. Peter seemed to think it was a painting issue - I don't know. 

Thanks for looking - I will propose what you say to Trish, raise the TAR and 
let you know. 

Cheers 

Bryan 
Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 





-----------------------------------------------------------------------------
--- 
From: Suresh, Ranjith 
Sent: 29 August 2007 14:09 
To: McDermid, Bryan 
Cc: Coupar, Peter 
Subject: RE: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Came around no one there. Also went to the lab and saw the issue. Tried
messing around with notepad to see if its a painting issue and its not. 
Forgot to check somthing, if you exit superviosor and come back in, do you
see the problem. Seems very bizzare, according to Trish its not one of her
priority issues, Realistically no one is going to stay in supervisor for a
whole day, and also the app hasnt hung either. So we can raise a TAR and
we will look at it in the future release, if Trish agrees. 

Regards 
Ranjith 



-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: 29 August 2007 11:53 
To: Suresh, Ranjith 
Cc: McDermid, Bryan; Coupar, Peter 
Subject: FW: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Hi Ranjith, 

This is the second of the three issues. Fail is as attachment and is
reproduced by: 

1. let app start 
2. enter SV 
3. Transfer to front 
4. Show fault display (option 26) 
5. Leave on this screen for a number of hours - occurs readily overnight,
therefore < 15hrs 

Seen on two Australian builds: both 3.1.1 and 4.2.1 with a commonality of
Solidcore as well - Trish has full details 3 emails down. Seen on both Pele2 
and PIVAT cores - I have reproduced on a P86 with Pele2. 

This does not appear to hang the ATM for me, but think Trish may have seen
this. I have the fail on the ATM at the moment and would appreciate if you
would take a look at this ASAP, please? The ATM needs to be freed up for
other Oz issues. 

Thanks 

Bryan



Summary:
TAR 358583: Process CPM Transaction reply without fields ba1 and ba2 is rejected (A02)

Description:
Customer implementing AA-NDC 03.02.00 with XFS 04.05.00 and CPM 4. 

A transaction reply which has been functioning on a 03.01.01 system no
longer functions with 03.02.00. The transaction reply is rejected with
specific command reject A02. The customisationlayer receives the message
but does not pass it to the function handler. This implies a change in the 
functionality of the transaction request state worker between releases,
which causes a host impact. 

Message used is as follows (some data removed for privacy) 

[08/28/07 12:44:51] [4[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]135[Unicode-x1C][Unicode-x1C]0001:014[Unicode-x1C]601----------CHEQUE
DEPOSIT---------- 

CARD NUMBER: 

ACCT NUMBER: 
[Unicode-x1D]2[Unicode-x1B](> Cheque Deposit ............ 

[Unicode-x1B](1DATE: 08/28/2007 TIME: 12:45:43 

ACCT #: 
CARD #: 
TERMINAL ID: 00000008 

SUCCESSFUL CHEQUE DEPOSITED 
MICR: 
] 

Reject response is : 
[08/28/07 12:44:51] [22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]C[Unicode-x1C]A02] 


On a 03.01.01 system response in debug is : 

applica.. 11:32:17.890 Message Handler - new message received:
[4[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]135[Unicode-x1C][Unicode-x1C]0006:014[Unicode-x1C]701----------CHEQUE DEPOSIT---------- 

CARD NUMBER: 

ACCT NUMBER: 
[Unicode-x1D]2[Unicode-x1B](> CHEQUE DEPOSIT .. 

[Unicode-x1B](1DATE: 08/29/2007 TIME: 11:33:13 

ACCT #: 
CARD #: 
TERMINAL ID: 00000008 

SUCCESSFUL CHEQUE DEPOSITED 
MICR: 
] 
<wid>1n87dc7</wid> 

... 

customi.. 11:32:17.968 Check Device - CPM Fitness = 0 
<wid>4a312s7</wid> 

customi.. 11:32:17.984 5A321S7 Device Healthy worker 
applica.. 11:32:18.000 String [] 
customi.. 11:32:18.015 2a406s7 Endorse & Stamp Activated 



No specific reason is listed in debuglog for the rejection. 

Testing has shown that the message will be accepted if optional fields ba1
and ba2 are included in the transaction reply message, together with their
proceeding field separator. There is nothing to specify that these fields
are now mandatory for a cheque transaction.




Summary:
TAR 357534 - Opcode not updated when cancel and timout next states same as FDK next state

Description:
Set the "Cancel Next State" value in an E state to be the same value as all
the active FDKs in that E state. This causes the opcode to not be populated
with any value specified by this state when an active FDK is pressed. 
Similar issue also reported in the Y state. 

This is a US build, using their 03.00.30 product version built on std
03.00.01. 

Customer has also tested base 03.02.00 release and similar issue seen. 
Recreated in 03.01.01. 

Priority 2 as requested by customer due to : "We have asked the customer to
change their download to workaround the issue, but they are not willing to
change it. This is somewhat of a high priority as it is holding up their
rollout of Voice Guidance to meet new governmental requirements"




Summary:
TAR 357529:  Receipts not being cut when trans reply includes additional group separators

Description:
Customer has upgraded to AA-NDC 03.02.00 from AA-NDC 03.01.01 and are encountering issues with receipts not being cut.

Specifically, when an additional group separator is used in the transaction reply, then the cut command does not seem to happen.

Their transaction reply examples are as follows :-
 
17:42:28  # 33    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x1D]3HOLA
[Unicode-x0C]]
17:43:13  # 36    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x1D]2HOLA
[Unicode-x0C]]
17:43:46  # 39    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x0C]]
17:44:06  # 42    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x0C]]

- After receiving #33 Receipt was printed but not cut
- After receiving #36 Receipt was printed but not cut
- After receiving #39 Receipt was printed and cut, with the information from message 33,36 and 39
- After receiving #42 Receipt was printed and cut

The difference being that messages 39 and 42 don't have the additional Group Separators in the print data. 

*********
Consulted with Ranjith and has requested TAR be raised. Logs available if required





Summary:
TAR 357470 Unexpected \ character added when using the Print Graphics control code

Description:
When testing the Print Graphics control code in a transaction reply it was
seen that that an unexpected \ character was being added to the data sent to 
the printer, causing it not to print the graphic as expected. 

ESC G <filename> ESC \ control sequence. 

The Reference Manual currently does not define the specification for the
filename. It does still refer the user to the S4i documentation for the
file format, but not the file name : 

"The format for the Epson graphics file is described in the Programmer?s
Manual for the 40 Column Printer (B006-4612)." 

This is identical to NDC+. 

The S4i publication describes the <filename> as : 

"The format for the filename is \path\name.ext." 

During testing of AA-NDC, 03.01.01, and 03.02.00, and presumably earlier
03.xx versions, a "\" is added to the beginning of the filename data which
is included from the host, which means that if the above description is
followed, then two backslashes are passed to the printer which then does not 
print the file as expected. 

e.g. 

12:04:42 # 33 [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]002NDC DEMO 

NEXT STATE 
AND PRINT 

[Unicode-x1B]G\40COLFIL\9.IMG[Unicode-x1B]\ ] 

customisationlayer 08/08/2007 12:04:42.498
ExecuteAsync(104(WFS_CMD_PTR_RAW_DATA),,605,0)=0 
customisationlayer 08/08/2007 12:04:42.518 
PRINTER DATA 
0000 1b 5b 37 70 1b 5b 33 32 71 1b 5b 37 70 1b 5b 33 .[7p.[32q.[7p.[3 
0010 32 71 4e 44 43 20 44 45 4d 4f 0d 0d 4e 45 58 54 2qNDC DEMO..NEXT 
0020 20 53 54 41 54 45 0d 41 4e 44 20 50 52 49 4e 54 STATE.AND PRINT 
0030 0d 0d 1b 47 5c 5c 34 30 43 4f 4c 46 49 4c 5c 39 ...G\\40COLFIL\9 
0040 2e 49 4d 47 1b 5c 0c 00 .IMG.\.. 


This should either be addressed in the reference manual description, or the
product changed to not add an unexpected \ character. However note that the 
ESC G control code sequence has been supported since NDC+, and NDC+ would
have functioned as per the 40 Col Programmers Manual, therefore a change to
the documentation only, may result in backward compatibility issues with any 
existing host implementations. 




Summary:
TAR 362884: Cardless transaction with touch does not work during mpeg in idle screen

Description:
See Star	



Summary:
ECB6: Applications hangs on inserting counterfeit notes only and selecting add more and then pressing cancel

Description:
Applications hangs on executing following steps:
1.Inserting 2 counterfeit notes only in the "please enter notes" screen
2.Select "ADD MORE" option
3.Press cancel



Summary:
MV Support Reference Manual missing status mapping info for 3 devices

Description:
Status mapping for the following devices should be added to App. B of B66344.pdf:
Barcode reader
CPM
Coin dispenser

The order of info could be more usefully presented: e.g. alphabetically, or devices that have status mapping followed by devices that don't.



Summary:
Run QAC++ & VS Code Analyser on State Split & Single EXE code changes

Description:
Agreed to perform static analysis of Worker Class changes (DLL Interface and State Executor), AANDCIA changes and sync call changes post UTC.



Summary:
Configuration of States & Tr Reply Functions should be consistent w.r.t. registering & pre-loading/loading when required

Description:
The State Type DLL names should be configurable in the registry, and able to make use of DLL pre-load/load on call functionality, similar to support for Tr Reply Function DLLs.
Need to decide whether to add a registration method for Tr Reply Functions, similar to STCONT, to avoid the need for end-users having to use an Assigner to call a C-function and hence the implies having to use the Author (this is particularly important in the case of .NET implemented Tr Reply Functions).



Summary:
Sharable Integer stores not working across processes and Persistent stores not settable in script host

Description:
I have added a shared store to CL Author app called "NoOfBNARetractBins" and set it to 3.

I tried to read it in AppCore termstat.cpp using:

	mSharableInt * mNoOfRetractBinsStore = new mSharableInt();
	mNoOfRetractBinsStore->set_StoreName(mString("NoOfBNARetractBins"));
	mNoOfRetractBinsStore->set_InitialValue(0);
	mNoOfRetractBins = mNoOfRetractBinsStore->GetInteger();
	delete mNoOfRetractBinsStore;

Also, tried to access it in a small Author testapp. Both times when I read the value it is 0.

Update:

Another issue shows when setting Persistent stores in script host. Simply using this script
TransactionSt.Data = 15

Then in next workgroup along, when outputing its value it is 0. Then tried it with Sharable store and same result. So it seems sharable store issue is related and it is not specific to cross process activity.



Summary:
BNA3 Certification

Description:
Testing Cash-in Component over a BNA3 device. This is a certification activity only. No code changes are expected. 



Summary:
TAR RFC 366816 - Request to make the retract destination configurable

Description:
As discussed with Som, Israel have raised a request for the option to retract good notes and bad notes to separate locations. This is possible by retracting the notes to the Cash cassettes. When this is done, any unrecognised notes will be retracted to the location specified in the retract command - for BNA2 this will always be a cash bin, but for GBRU/GBNA, this may be either the Retract or Reject Bin. The options for the GBRU/GBNA are configurable as registry settings for the SP.

Please note (as agreed with Som) that this will need to be added as a configurable option to allow compatibility with the earlier releases which would always retract to the retract area.



Summary:
TAR 372706 - AA-NDC: CustomisationLayer Crash when Note Ids Configured

Description:
CustomisationLayer "crashing" when Note Ids are identified as being changed
and requiring configured. 

The following is observed in the debug log: 

customi.. 15:15:49.685 * ActiveNoteTypes.Data.Count = 5 
customi.. 15:15:49.685 ** sSetCurId(0) 6684 
customi.. 15:15:49.685 ** sSetCurId(1) 6657 
customi.. 15:15:49.685 ** sSetCurId(2) 6659 
customi.. 15:15:49.685 ** sSetCurId(3) 6660 
customi.. 15:15:49.685 ** sSetCurId(4) 6661 
customi.. 15:15:49.685 **** ActiveNoteEntry = 0; tFlag = 0; bitmask = 31 
customi.. 15:15:49.685 !!! DataChanged = True !!! 
customi.. 15:15:49.685 **** ActiveNoteEntry = 1; tFlag = 0; bitmask = 15 
customi.. 15:15:49.685 !!! DataChanged = True !!! 
customi.. 15:15:49.685 **** ActiveNoteEntry = 2; tFlag = 0; bitmask = 7 
customi.. 15:15:49.685 !!! DataChanged = True !!! 
customi.. 15:15:49.685 **** ActiveNoteEntry = 3; tFlag = 0; bitmask = 3 
customi.. 15:15:49.685 !!! DataChanged = True !!! 
customi.. 15:15:49.685 **** ActiveNoteEntry = 4; tFlag = 0; bitmask = 1 
customi.. 15:15:49.685 !!! DataChanged = True !!! 
customi.. 15:15:49.685 This is 1st execution of state after restart.
Configuring note types has to be executed in any case. 
customi.. 15:15:49.685 **** ConfigureNoteTypes NEEDED ***** 
customi.. 15:15:49.685 CashinCommonImplementation: Entering
IsGBNAPropertyUsable(GBNA, ITEM_NOTE_TYPES) 
customi.. 15:15:49.700 Retrieving GBNA Object Property: True 
customi.. 15:15:49.700 GBNA Returned Object: False 
customi.. 15:15:49.700 GBNA Returned Nothing: False 
customi.. 15:15:49.700 GBNA Returned Null: False 
customi.. 15:15:49.700 GBNA Returned Empty: True 
customi.. 15:15:49.700 CashinCommonImplementation: Exiting
IsGBNAPropertyUsable(); object is unusable. 

And the application halts with the following application event log
recorded: 

Level: 2 Domain: 114 Error Number: 2 Worker Id: 
Description: VBScript has reported an error in a script passed to it. 
The error is near line number 230 of Script Host Worker ID: 228b7na1. 
VBScript has given the following error description: 
'Object required: 'ConfiguredNoteTypes'' 
The Source of the Exception is 
'Microsoft VBScript runtime error' 

Initial investigation by Euan P: 

The issue is caused by line 219 of the BnaUpdateActiveStatus (228b7na1)
Active Script Host Worker. The Set operator is causing the isNull function
on the next line to always evaluate to FALSE (not null) even when the
IsGBNAPropertyUsable function is definitely returning Null. 

Set ConfiguredNoteTypes = objWSC.IsGBNAPropertyUsable(GBNA, ITEM_NOTE_TYPES) 


If you remove the Set from line 219 everything seems to work correctly (the
Null is correctly evaluated). 




Summary:
TAR 357450 - AA-NDC - No solicited error message sent when envelope depository fatal

Description:
No solicited error messages are sent to the host when the envelope
depository is fatal: 


The logs show a jam is created (T2 Sensor blocked)on combined P86
Dispenser\Depository - an envelope deposit transaction is requested - the
envelope dispense fails and an unsolicited is sent - the host then sends a
deposit and print. The shutter is not opened and no envelope is deposited
and AA-NDC replies with a Ready 9 only. There is no solicited error messages 
sent for the depository 

Debug: 
customi.. 16:15:58.495 DEPOSIT - ENVELOPE JAM 
<wid>2l15y4626</wid> 

customi.. 16:15:59.086
********************************************************** 
CALLING CLOSE STATE EXIT 
********************************************************** 
<wid>2s1914g220</wid> 

Messages In/Out 
16:15:52 # 75 
[11[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C]BB1D759E[Unicode-x1C]1?[Unicode-x1C];5313585511211006=07101011695434900000?[Unicode-x1C][Unicode-x1C]GA 
[Unicode-x1C]00000000[Unicode-x1C]9?03?49=265;40?7[Unicode-x1C]00006500[Unicode-x1C][Unicode-x1C][Unicode-x1C]20020100000000000000000000[Unicode-x1C]8FA7AB59] 

16:15:52 # 76 [4[Unicode-x1C]000003456[Unicode-x1C]BB1D759E[Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C]00214[Unicode-x1C]?02 

531358 006 $65.00 3L86 
DEPOSITED TO CHEQUE ACCT. 
316657 649 06/08/07 16:16 

PLACE THIS CARD IN ENVELOPE [Unicode-x1C]C26FA353] 

16:15:57 # 77 [12[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C]\1[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]2] 

16:15:57 # 78 [22[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C][Unicode-x1C]9] 

16:15:57 # 79 [4[Unicode-x1C]000123456[Unicode-x1C]BB1D759E[Unicode-x1C]730[Unicode-x1C]00000000[Unicode-x1C]00211055[Unicode-x1C]?02 

531358 006 $65.00 3L86 
DEPOSITED TO CHEQUE ACCT. 
316657 649 06/08/07 16:16 

OPENING BALANCE 99945.23+ 

CASH AMOUNT 65.00+ 
CHEQUE AMOUNT 0.00+ 
AMOUNT DEPOSITED 65.00+ 

CLOSING BALANCE 100010.23+ 

THE CLOSING BALANCE IS SUBJECT TO 
DEPOSIT VERIFICATION. [Unicode-x1C]D82F9BD8] 

16:15:58 # 80 [22[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C][Unicode-x1C]9] 


Euan P aware and has identified likely reason. 




Summary:
TAR 357442: AVI"s do not display corectly when called separately in certain states

Description:
AVI files display correctly when screens are called within an idle loop in the Card Read state, however when the same screens are called in other
states the AVI's do not play, only the AVI background is displayed.   States 
tested were the Amount Entry and Transaction Request State.

The same AVI files were tested on a 03.01.01 system in the same manner as above and played correctly in all states.




Summary:
TAR 355894 - Alarms with status unsolic message always sent as if in Supervisor

Description:
As described in emails below and shown to EP: Issue not seen on standard 302 
or 303 but seen on 302 with TAR fixes 320245 - supported on PKO 

Hi Lukasz, 

I have set up a system with 'alarms with status' and have confirmed what you 
see with your build. I have noted however that both AA-NDC 03.00.02 and
03.00.03 behave correctly. I cannot get the TI to fail unless alarms with
status is present. 

When I boot up the PKO build and enhanced alarms on (in alarm state), it
will automatically go to the 003 screen despite not being in SV mode on the
EOP - to clear this I enter SV via the switch and exit with '9'. This allows 
a download and will GIS. If I go OOS it will not allow me to GIS again until 
I repeat the above process (SV switch 9 exit). 

This is looking like a problem with cumulative TAR fix 320245, but I have a
question: 

Is there any other Customisations in this area that you may have other than
this? 
Particularly in this area: The supervisor byte is controlled by the CDI
store CurrentMode (Store ID 1250) being set to 3 (SUPERVISOR). If the CDI
store is 3 then the byte is one otherwise the byte should be 0. 

I am just about to raise the TAR on this and will get back to you. 

I take it there are no plans to move the application forward in Poland in
the near future? 

Best Regards 

Bryan 

From: Kazior, Zbigniew 
Sent: 18 June 2007 18:18 
To: Auto-EMail, FGSC 
Cc: Cipollone, Stefano 
Subject: PKO: AANDC 3.0.2 & TI Unsolicited Message & Supervisor Mode
Switch status wrongly reported 

Attachments: bledy alarmow.zip 
01 - Employee name: Zbigniew Kazior 
05 - Country: Poland 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +48 691 480 108 
20 - Customer Name: CITIBANK 
25 - Priority: Priority 3 
30 - Products Affected: All 
35 - Platform OS: XP 
40 - Application: AANDC 3.0.2 / XFS 4.2.1 / EMV 2.0.1 / XP 
45 - Other Software: cumulative ServicePack T320245 
50 - Environment: Live 
55 - Frequency: seldom 
60 - Installed: 218 
65 - Affected: 100% 

Team, 
We have found another issue in AANDC related to TI Unsolicited message &
Supervisor mode switch reporting: 
Extract from documentation: 
If byte 1 = ?1?, TI sensor change, or ?3?, Alarm state change, bytes 2-13
give details of the 
state of the following sensors: 
?0? Supervisor mode inactive 
?1? Supervisor mode active 
Extract from Logs: 
IN service mode: 
[05/21/07 15:18:08] 
[05/21/07 15:18:08] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]B0000] 
[05/21/07 15:18:53] 
[05/21/07 15:18:53] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
{ZK: ATM is Normal but status of byte 2 is reported as SUPERVISOR - 
should has been reported as "0" - Sup Mode Inactive} 

[05/21/07 15:18:55] 
[05/21/07 15:18:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:19:01] 
[05/21/07 15:19:01] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3111001011111] 
[05/21/07 15:19:03] 
[05/21/07 15:19:03] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:21:54] 
Supervisor mode entry: 
[05/21/07 15:21:54] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21] 
[05/21/07 15:21:55] 
[05/21/07 15:21:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R004] 
[05/21/07 15:22:00] 
[05/21/07 15:22:00] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R009] 
[05/21/07 15:22:15] 
Supervisor mode exit: 
[05/21/07 15:22:15] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] 
[05/21/07 15:22:15] 
[05/21/07 15:22:15] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:16] 
[05/21/07 15:22:16] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:27] 
[05/21/07 15:22:27] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
[05/21/07 15:22:48] 
[05/21/07 15:22:48] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:55] 
[05/21/07 15:22:55] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 



Vanilla AANDC has the same issue: 
I attach logs: 

Issue is not critical but has been officially reported. 

Best Regards 

Zbigniew Kazior 
Senior Consultant 




Summary:
TAR 356078 -  Language Select from Card State "V" does not use current PLNDX value

Description:
The host sends a modified TK2 data in buffer 'L' of the
   transaction reply message with one of the TK2 data characters set to the
   cardholder's language preference. They then go to a Language Select from
   Card 'V' state to set up the language code and screen group to use for
   screen display and the Language Switch 'S' state for the remainder of the
   transaction.
   
   This functionality has been shown to function with the standard NDC+
   product, with the language offset being updated from the "current" track 2
   buffer each time the Language Select from Card State is run.
   
   AA-NDC appears to update CDI store 2073 "Language Code" only after a card is 
   read in the card read state.  The data does not change after receipt of a
   transaction reply with updated track data has been received and a V-state
   has been run. The updated track data is used in subsequent transaction
   requests though.




Summary:
Change CIC catalog names in Author projects

Description:
The CIC catalog name in CustLayer is currently ¿*BNA Component¿ and the Supervisor one is ¿*BNA Components Supervisor¿. They should be more like ¿Cash In Component¿ and ¿Cash In Component Supervisor¿. Find suitable names and remove "*" at the front of the name. Update CIC FS when the modification has been done.



Summary:
reg setting to allow application control over resets on BNA2

Description:
HKLM\SOFTWARE\NCR\Aptra Self-Service Support (NCR Features)\RS232BunchNoteAcceptor\Operational Parameters\Disable Automatic Resets should be set to 1.



Summary:
INIT BNA should always try to use Retract cmd to end CashIn active state.

Description:
InitBNA function is currently using either CashInEnd or Retract depending on whether the Option 45 bit 2 is set. This doesn't make sense as it is supposed to be ending the cashin state to allow the Reset command to clear the BNA. Proposal is to always use Retract (except on BNA1 where is it not an option, and where CashInEnd must still be used), along with the same paramters that Reset uses. Currently that means RT1 if available, or RT2 if RT1 is unavailable, or CashIn cassettes if both RT1 and RT2 are unavailable. Just re-use same function. 

The other thing to decide is what total counters to update. Need info from Som on this as it is usually going to cover the case when notes have been left in escrow in Close State. So do customers consider that bank money or cardholder money. If bank money then update the Deposit CDIs 3164-3213. Or if it is cardholder money then update Retract CDIs 3292-3341. However, it seems that the whole INIT BNA function should update either of these two counts depending on which part of the transaction the notes got jammed and so a flag should be set to record this.



Summary:
UT - Get Fitness/ Get Supply command return different data to solicited status on dual cash handler system

Description:
Caused by using different logic in the terminal command code to that which originally generated the solicited status message



Summary:
TAR RFC 365997: Re-using the vaulted counts part of the message on a w7 retract message to contain the retract counts.

Description:
Please see attachment.



Summary:
Problems with AANDC Receipts - Double Width and Euro using Normal Recipt Page

Description:
See IP TAR 366109 and the Attachment to this GR1T.



Summary:
AA-NDC Reference Manual - Note in "C" State Description

Description:
See IP TAR 363299



Summary:
Developer Guide Table 5-18 does not fully specify registry values to change

Description:
See IP TAR 363195



Summary:
VISA key can be entered in Restricted Mode in Supervisor Access Menu

Description:
See IP TAR 363300



Summary:
Description of EPP response to Send Hardware Configuration is incorrect

Description:
See IP TAR 363071



Summary:
B006-6180-J000 Issue 1 July 2007: ref to diebold emulation to be removed

Description:
See IP TAR 362852



Summary:
Reference Manual description of picture palette information is not applicable

Description:
See IP TAR 369040



Summary:
Supervisor Reference Manual should document limitation for SysApp display

Description:
See IP TAR 369966



Summary:
How to configure rem/loc port on TCPIP section needs updated in SuperV manual

Description:
See IP TAR 370699



Summary:
Undocumented size limit for TCP/IP messages

Description:
See IP TAR 315034



Summary:
NDC echo worker online help lists no attributes when attributes are available

Description:
See IP TAR 370811



Summary:
Description of printer data field for flag "b" has dropped vital restriction

Description:
See IP TAR 359285



Summary:
Publications list workers as supported which are not supported

Description:
See IP TAR 366109



Summary:
DisplayManager:Issue with Language Offset

Description:
Language Offset is not correctly applying to the screen number when the html to display is not found.



Summary:
UT - Seperated Counters on dual system - does not display counters for CDM2 on DISP CASH

Description:
Incorrect workflow in Supervisor application



Summary:
UT - Performing Clear Cash prints 65535 for Notes Remaining if deposit transaction has been performed

Description:
Update to subtract deposited counts in calculation required



Summary:
UT - Notes In Cassette Count for CDM Type (in dual env) returned as 65535 when notes deposited to same type on GBRU and combined counters in use

Description:
Test 5.2.1.7 of ITS - performing an extended counters then device D shows 65535



Summary:
AA-NDC : NOTES TAKEN logged in the middle of transaction information on the EJ

Description:
TAR 360152 - AA-NDC : NOTES TAKEN logged in the middle of transaction information on the EJ



Summary:
Add variant reporting of GBNA / GBRU / BNA as a response to a hardware configuration terminal command

Description:
Need to report presence of GBNA and GBRU as well as BNA. This will allow hostst to interpret mstatus/mdata information correctly. Work with Bindu's fix for reporting GBRU info.



Summary:
Provide a Cardholder Keyboard Entry exit utility (required to support a Biometrics Exit)

Description:
Provide a Cardholder Keyboard Entry exit utility (required to support a Biometrics Exit)



Summary:
2ST - Receipt

Description:
2ST - Receipt



Summary:
Application supervisor to support top level selection of FLM app

Description:
Implement support for calling SysApp when Bottom-Right FDK is pressed into AANDC Main Supervisor Menu (Second from Bottom) - implemented in AANDC 3.2.1
Implement "safe handling" of VDM requests from external application inside AANDC and simulate Supervisor Entry/Exit when VDM request is asked when ATM is in User mode.
Modify AANDC Front Supervisor to display MAST Icon in correspondence to the Bottom-Left FDK (possibly second from bottom)



Summary:
Support GBRU with dispenser combination - Dual Dispense

Description:
Support GBRU with dispenser combination - Dual Dispense.
Som confirmed that the GBRU will always be the primary dispenser.



Summary:
Apply the timeout set for the pin requirement to the clear key

Description:
TAR 364429 - Apply the timeout set for the pin requirement to the clear key



Summary:
Alphanumeric keyboard support for BA18 (ST1)

Description:
Alphanumeric keyboard support for BA18 (ST1)



Summary:
Support for Generic Pls Wait Screen in AANDC

Description:
Support for Generic Pls Wait Screen in AANDC



Summary:
AANDC support for Sankyo scanner in BA18 (ST1) - Certification Only

Description:
AANDC support for Sankyo scanner in BA18 (ST1) - Certification Only



Summary:
With the Retract option switched off, if the cash is left in throat, after some defined time, the cash taken event is to be journalled

Description:
With the Retract option switched off, if the cash is left in throat, after some defined time, the cash taken event is to be journalled



Summary:
Integrate the fix - Request to add "G" as a valid font designator - it worked in NDC+

Description:
TAR RFC 363168 - Request to add 'G' as a valid font designator - it worked in NDC+



Summary:
Request for option on cheque accept to never accept cheque without valid MICR

Description:
TAR 363307 - Request for option on cheque accept to never accept cheque without valid MICR



Summary:
To make ECP Option 71 available in AANDC

Description:
TAR 312946 - Request for Enhanced Configuration Parameter - Option 71 - Timeout State Entry



Summary:
AA-NDC: Allow capablility to rebuild OCX

Description:
TAR 364795 - AA-NDC: Allow capablility to rebuild OCX



Summary:
2ST for statement

Description:
2ST for statement



Summary:
Details on fault display and device status list could be more consistent

Description:
TAR 368723 - Details on fault display and device status list could be more consistent



Summary:
Fault status indicates error unknown in NDC 3 but error reason in 2.6

Description:
TAR 364158 - Fault status indicates error unknown in NDC 3 but error reason in 2.6



Summary:
Dual Roll - Same Media

Description:
Dual Roll - Same Media



Summary:
Journal host time out transactions

Description:
Journal host time out transactions



Summary:
Support for remotely identifying if EPP is PCI compliant

Description:
Support for remotely identifying if EPP is PCI compliant



Summary:
Dual Dispenser - Cassette based reporting of counters in the supervisor replenishment menu

Description:
Dual Dispenser - Cassette based reporting of counters in the supervisor replenishment menu



Summary:
Add a possibility to CPM Close State to leave returned cheque in the ejected position

Description:
The current Close state parameter for CPM is Return/Retain. The suggestion is to add Return&Leave. I consider this valuable as unacceptable cheques should never be attempted to be captured (application guideline).
When the Cheque Accept State completes with the Exception Next State, customers may choose to use this new value in the Close State.



Summary:
Include Display Manager into AANDC

Description:
Include Display Manager into AANDC



Summary:
Package Presentation Client and Dialogs with AANDC 3.3

Description:
Package Presentation Client and Dialogs with AANDC 3.3



Summary:
DisplayManager: When CLEAR key is pressed  in PINENTRY, DisplayManager is clearing content in HTML Pages

Description:
When CLEAR key is pressed  in PINENTRY, DisplayManager is clearing content in HTML Pages



Summary:
Support Voice Guidance in CIC (without confirmation screen)

Description:
Support Voice Guidance in CIC (without confirmation screen)



Summary:
Voice Guidance - Support local XML File option

Description:
Voice Guidance - Support local XML File option



Summary:
Voice Guidance - Support US XML File Download method

Description:
Voice Guidance - Support US XML File Download method



Summary:
UT - Both dispense disable and enable thresholds should be reset to default values if invalid value specified

Description:
Confusing logic at the moment - simplify 



Summary:
UT - Recycling Mode registry key should only report device variant as recycler when set to 1

Description:
Currently checks for > 0 rather than == 1



Summary:
UT - Counts go negative when total notes dispensed across both dispensers greater than added and blanks displayed for cassette type only present on CDM

Description:
2 issues 

When using combined counts, when more notes dispensed (or rejected) across both dispensers than added then combined count becomes negative in the Notes In Cassette field of Add Cash/Disp Cash

When a cassette type is only present on the CDM then counts are blanked (in Add Cash/Disp Cash) for that type



Summary:
Change CDI store values in the Author Projects for ECB6 to reflect the changes in SCM.

Description:
There wax a mixup with SCM with CDI stores of ECB6 defined in ndcdatae.h, which resulted in some stores that had been defined being lost, between revisions 1.52 and 1.53

So, the stores defined in 1.52 were not reflecting in 1.53 due to which the slot alloted for cdi stores in 1.52 have been captured by cdi stores of ECB6.



Summary:
Fault display shows incorrect status (FULL) for Cassette 2, when Cassette 2 status changes from OK to HIGH with Cassette 1 already FULL.

Description:
This is an existing bug in CIC. With cassette 1 already FULL, the supplies status of cassett 2 is set to FULL even though it is still HIGH.



Summary:
ECB6: Do not display CAT2 or CAT3 header on journal unless those note categories are detected.

Description:
Currently they are always shown even when ECB6 functionality is turned off. They should only be shown when those specific note categories are detected so as not to waste journal space. If only CAT 2 is detected only show CAT 2 header - no need to show CAT 3 either.



Summary:
ECB6: when SNR is integrated add extra journal screen when Get Sig fails

Description:
Currently SNR will output a message to journal saying SERIAL NUMBER FAILED with a count of how many notes were failed to be read. With ECB6 enabled the Cat2/Cat3 notes should have a full signature, not just a serial number so another journal message should be output in this case to SIGNATURE FAILED.



Summary:
TAR 367378: BNA Supplies status is incorrectly reported

Description:
As per discussions with Som and Mike, if a terminal command is sent
requesting supplies status, the BNA Status is frequently sent as "w0" which, 
according to the manual means "not configured/reserved". This should be
reported as "1" for good, "3" for "Nearly Full" and "4" for "Full". 




Summary:
Prepare CIC for ANDC single executable.

Description:
ANDC3.3 will have a single ANDC executable. The 3 projects today will still exist, but the Sup and CL will operate within the context of the AppCore. This means there will no longer be sharing between apps, and it should mean we can have some workers which are always active if needed (eg TI, status handling, etc).
It also means some work is needed to ensure CIC is ok after the change. For example, SoD funcitonality is being moved to AppCore where we don't have any CIC currently.
This needs to be addressed when integrating CIC 1.2 into ANDC 3.3.



Summary:
 Folder name and filename format which are created on using supervisor 55CreateSig should be the same as specified in the CIC FS

Description:
The folder name format and file name format which are created after using supervisor,4 Replenish ,55 Create sig should be the same as specified in the CIC FS



Summary:
ECB6: Accurately report location of Cat3 notes with respect to Escrow/Vault counters

Description:
Change the way Cat3 notes are reported to host and journalled.
Currently when they are inserted the Cat 3 notes are reported (along with Cat 4) that they are in escrow.
But on GBxx if Cat3Rollback = 0 then they are not in escrow - they are in cassette.
So, we should report that more accurately, and say they are vaulted.
The good thing about this is that host can now see Cat3 notes which cannot be rolled back to customer.
Note: it does not apply to BNA2 where notes stay in escrow until CashInEnd/Rollback is actioned.



Summary:
ECB6 Notes re-identified on 2nd pass upsets the counts

Description:
The journal counters and maybe others could be wrong when doing TR Encash or Close State Vault, and the ECB6 notes are re-identified into other ECB6 categories.



Summary:
Opteva ANDC 3.2.1  Envelope deposit not working

Description:
OK in Wincor - hang & timeout on Opteva



Summary:
AER must support ECB6 functionality

Description:
When AER is integrated into the projects containing ECB6 it must be updated to support ECB6 functionality. This includes logging signatures, journalling, updating counters, etc.

Another Integration change that is not strictly related to ECB6 and was discussed with Praveen, was to replace the Retract to Stacker behaviour with a simple CashInEnd. This will keep approach consistent on BNA2 and GBxx, as BNA2 did not support retract to stacker. This should simplify the code, and of course ECB6 should be handled in this case too.



Summary:
ATM Freeze when only cat2 notes are inserted in BNA and a refund is selected

Description:
ATM Freeze when only cat2 notes are inserted in BNA and a refund is selected

Also the same cat2 note count is treated as valid in the next transaction and added to the transaction request message.



Summary:
Overall Device Status should be updated based on the individual cassette status

Description:
The overall device status (CDI 3219 and first byte of CDI 4052) needs to be updated based on the individual cassette status if the device is in good state. This has to be done before supervisor fault display/disp supplies/print supplies functions, at customisation layer SOD, at supervisor exit and during a deposit transaction.

Still need to decide on how it should be updated.



Summary:
CustomisationLayer BNAFitnessDict variant store is not updated after some change in cassettes status in supervisor mode

Description:
Spotted this issue during fault display testing.

When using the cassettes for the first time on GBRU, the cassettes will be in INOP state until GBXX config option is run.
When the cassettes are in INOP state -
- start the apps
- enable extended messaging
- switch to supervisor and perform GBXXConfig
- exit supervisor
- send getfitness command status of all the cassettes would be GOOD
- when a cassette status change (eg: OK to HIGH) during a transaction, the severity status for all the cassettes except the one which has been accessed will be reported as FATAL





Summary:
DisplayManager: Issue with Dynamic HTML display

Description:
In case of Dynamic html display as a banner, dynamic html page is getting displayed. But NDC screen is not displaying properly, it is coming along with the dynamic html information. Same problem is with Dynamic HTML page display as a fullscreen also , in this case it is displaying NDC screen with the dynamic html content and focus is going to that.



Summary:
DLL Data Boundary Share Requires Rework.

Description:
Shared Stores Called From Script Hosts Give Exception
The IUnknown pointer for the ComDataElement class is not set when the IUnknown interface is queried from a script host.

Shared Stores Created From Code Have No Component Id



Summary:
Support a mechanism to map XFS Logical cassette types to CIM NDC types.

Description:
Currently the CIM NDC types reported in the extended status messages are directly derived from the XFS Logical type. So the order the SP reports these types is the order they will be reported to host. The issue with this is that the SP reports them in an order based on what cassettes are in the ATM when the ATM is first configured (ie SP first installed or after changing GBRUMode reg key). PS should be able to set up a mapping so that whatever order the SP reports the cassettes, then the host will still get them reported in an expected order. This would involve some sort of mapping table in registry similar to that used by CashOut functionality.

Note: this is a local solution only. If CIC was to support Enhanced Cash Deposit (ECD) then there could be a host controlled mapping too.



Summary:
Provide an API to allow trace data to be written to DebugLog/Silent Debug

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Provide a printing interface to allow Exits to print on all printers (currently only support PrintToJournal(..) interface for journal printing)

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Provide a compiler independent way of allocating/de-allocating memory

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Provide guidelines on the stores in ndcdatae.h which can be used by Exits

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Allow multiple display and keyboard hooks to co-exist (e.g. this is needed for Display Manager)

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Add hooks to allow mode changes to be monitored by an Exit (currently only supervisor mode changes can be monitored)

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Support SendMessageFromHost(..) functionality to send a message to the application as though it came from the host

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Associate the Timeout State with a new state letter, to allow it to be invoked from an Exit or replaced by a customer implemented Exit

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Allow PerformNDCState() to be used to invoke all internal ANDC state types

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Allow States A,B,M,b,w,k,C,L,m,I,J to be invoked by an Exit via PerformNDCState() call

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Extend the number of new state types reserved for Exits (currently only d,e,f,g are reserved)

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
Allow States B,M,b,>,w,k,C,L,m to be implemented by an Exit without requiring an author change

Description:
For more details, refer to <\\sgbdun100\Orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.03\Reviews\c-exit enhancements\FS & Requirements\C-Exits Enhancements - Extracted Requirements (priority - A1).doc>



Summary:
XFS Memory leaks

Description:
2 leaks detected during XFS Memory TAR 366878 investigation

1. ooxfsimp.cpp 1.42 line 1489
LPWFSRESULT unitStat; is not freed.

2. security.cpp 1.57 line 1414
 &Result is not freed where crypt fails



Summary:
If the ConfigNoteTypes fails at start of transaction then it should take the device error exit.

Description:
Currently it is carrying on with the transaction and using the set of active notes that was previously configured. It should not allow that and it should take the device error exit and send a w3 message with Fatal to the host.



Summary:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function

Description:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function



Summary:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function

Description:
TAR 362892:  When using alphanumeric state entry, txn reply next state does not function



Summary:
Description of Local Customisation Data not precise (Developer GUide)

Description:
Developer's Guide Page 5-51

This is GRIT is raised based on feedback from Jiri Tywoniak (PS Czech Republic) who tried to use the Local Customisation Data feature and struggled to get it working

1) Lines in the files (e.g. in the LOCAL file) are not delimited by line-feed and carriage return, but by <EOT>. This is shown in the example, but not explicitly mentioned in the text. He overlooked that detail and that caused him some trouble - there is no way you can tell from the debug log trace information 
2) The text says
          The maximum length of each screen, state or FIT is 1024 bytes.

But this is not correct - the maximum length of each message is limited to 1024. Each message can have multiple screen definitions. When it is longer, it is not processed at all (this is not described either).
Jiri struggled here a lot - only after he chunked his data a lot did he manage his download to work.






Summary:
TAR 365992 - AA-NDC reports notes retracted if notes are taken as retract is issued

Description:
TAR 365992 - AA-NDC reports notes retracted if notes are taken as retract is issued



Summary:
XFS Memory leak in Coidispenser counters code

Description:
observed during code review
file: cdicount.cpp
fuction: void CDMSPCounters::PutCounter(int ndc_type, int value)
leaks on this line:
	hr = coin->Execute(WFS_CMD_CDM_SET_CASH_UNIT_INFO, pCUInfo, &pWFSResult);

pWFSResult already holds XFS Memory that will become lost.




Summary:
Show MAST XFS 4.5.1 Icon in View Only mode

Description:
Show MAST XFS 4.5.1 Icon in View Only mode



Summary:
TAR 364414 - AA-NDC Reference Manual does not document that error code 5 may be unsolicited

Description:
The AA-NDC Reference Manual indicates that the Error code 5 (No Notes in
Escrow) is always a solicited event received in response to a Transaction
Reply when no notes were entered. This is not true as there is also a
possibility that there may be a situation where AA-NDC attempts to clear the 
escrow because notes may be in the Escrow during the Close state. In this
isntance, an unsolicited response would be generated and would confirm that
the earlier processing (which would have generated a message as a warning
regarding a possible problem) did complete successfully. 

This allows the Host to confirm the counts that it has for deposits




Summary:
Misrecognition error is not printed on to the journal when a misrecognition error occurs during Encash.

Description:
When swapping a note in escrow say good note with a bad note/good note with another good note, in either of the cases Mis recognition error is not printed on the journal. This is observed while executing test case 1.2.13.5 in CIC Regression Specification



Summary:
Rejected/Retracted counts in DSP CNTRS for BNA after Test Cash and dispense/retract

Description:
Issue found running tests from Recycling ITS

 Run Test 5.5.1.4.4 ¿ Reject Bin Counts

Cleared cash dispenser/BNA counts using 2 CLR CASH
Did Add Cash
Did Test Cash ¿ 1 note from each cassette went to reject bin
Did 2 DSP CASH ¿ counts OK and reflects rejected notes

Then did cash dispense of 2 notes, but didn¿t take money so it was retracted
Did 2 DSP CASH ¿ all still OK, still have 1 for each reject count and note dispensed/retracted shows against DISPENSED

Now do 3 DSP CNTRS
The counts for each of the note types are all 0, which is correct
On the final screen of this function, I see REJECTED as 0, and RETRACTED as 2.

Given that 2 notes were rejected as a result of a Test Cash, and 2 retracted as a result of a cash dispense then retract, I would expect to see consistency.
Why are the BNA counts seeing the 2 notes that were retracted, but not the 2 that were rejected.

Note ¿ no cash deposit transactions done during this process.




Summary:
Retract bin supplies and fitness not correct when it goes full

Description:
Issue found running tests from Recycling ITS.

Test 5.5.1.4.3 ¿ Retract bin full from cash deposits

Made retract bin nearly full, and did repeated cash deposit, refund, retract money, until bin went full ¿ was showing on fault display. At the time the retract bin went full I got :-

14:57:01  # 91    [12 000  w3      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    40014002000300040 41524AE300 30010002000300040]

In the above w3 I would have expected to see supplies status as 4 (overfill) instead of 3. The Reject bin full message was displayed on fault display.

In this state I got the message below for GETFIT, which looks OK (overall BNA fitness as 4) :-

15:00:25  # 95    [22 000  F JAA0 B0 C0 D0 E00000 L0 O0 Q0 w40014002000300040 V4]

I got this for GETSUPPLY, which reports reject bin for cash dispenser as fatal, but BNA as 3 (high)

15:00:28  # 97    [22 000  F IAD1 E42220 V31111 w30010002000300040]




Summary:
BNA fitness incorrectly reported as 2

Description:
GBRU device in a good state, and cassettes nearly empty, 

Send GETFIT and get the following response:-

22 000  F JAA0 B0 C0 D0 E00000 L0 O0 Q0 w20010002000300040

Status of cash dispenser reported as no error, and all cassettes good. For BNA, the cassette status is all good, but the overall device fitness is reported as 2 (Warning). That isn't seem correct, as there are no errors with the device. 



Summary:
TAR 369715 - Supplies status is incorectly reported if Cash Cassette becomes full

Description:
If the BNA reports that the cassette is full, the fitness is correctly
reported as Fatal, but the Supplies status is reported as "Unchanged
("0"):- 
17:18:41 # 776 [12 000005032  w0 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~4 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 4 4 04000000000000 0]

This happens when cash unit full threshold event followed by cash unit error event with the reason of cassette full. 




Summary:
Some counters are not reset during Retract operation.

Description:
From Srivani:

Yes, the 4th point I have mentioned in my mail is a bug I found. we were resetting the escrowed and Returned counts that are used to report the <90 notes. But we need to reset the counts for > 90 notes. One more bug I have found is, inside Retract Operation(515b7na1) ASH  the positions of Escrowednotesgreaterthan90 and escrowcountforpartialemulation are interchanged and we were populating the wrong stores. 
 
The following lines of code I have added to GBNA_RetractOK() method
 
Escrowednotesgreaterthan90.Data = ""
 EscrowCountgr8than90.Data = "000" 
JustReturnedgr8than90.Data = "000"




Summary:
Two sub-totals are displayed on Enhanced Confirmation screen when same denomination notes are inserted

Description:
When 50 note id's are active, 2 sub-totals for same denomination are displayed on the Enhanced Confirmation screen.Where as, one total is displayed if 10 note id's are active for the same denomination. This is due to improper synchronisation between comparision of note id's to the display on Enhanced Confirmation screen. Please refer to the logs in the attachments.



Summary:
Can Automatic INIT Copy Drive be configured to specify a folder in the Drive

Description:
TAR 363441 - Can Automatic INIT Copy Drive be configured to specify a folder in the Drive
Request to support folder paths in EJ automatic init copy.
Presently Automatic Init copy for EJ supports only root drive to copy seconday EJ backup file. Requirement is it should copy EJ backup file in specified folder path rather than root drive.



Summary:
Disp Config not shared in all the places

Description:
Disp Config should be shared in all the places. Need to apply the same change as Grit 375312 in all the other places where ever Disp config is used.



Summary:
Support/Report product class 6636  / Support/Report product class 6618

Description:
Support/Report product class 6636  / Support/Report product class 6618



Summary:
TAR RFC  324723 The NDC Data Collector does not support the "00" and "000" XFS key codes

Description:
"The NDC Data Collector does not support the "00" and "000" XFS key codes
   and ignores the keypress for these key codes. It should be modified to
   support these keycodes" 
    




Summary:
Make the location of GBRUConfig.xml congurable through a reg key

Description:
Currently it is hard coded in script host. It would be useful to make it configurable and at the very least move it to config folder. Also, there is new support for downloading XML files in ANDC3.2. It would be useful to be able to set it to that folder when/if we decide to support host downloads of the config file.



Summary:
Enhanced Confirmation Screen doesn't handle Note Revisions

Description:
When Denominations of Different Revisions of the same NoteId is inserted, then each Revision is considered as a different entry.

Ex 
Test Sequence

Inserted (in the same bunch):
MYR 2 (note ID 1794)  x 1,
MYR5 (note ID 1795)   x 1, 
MYR5 (note ID 18179) x 1, 
MYR10 (note ID 1796) x 1, 
MYR10 (note ID 18180) x 1, 


Expected Result (Confirmation Screen display): 
MYR 2 x 1,
MYR5  x 2, 
MYR10  x 2,

Actual Result (Confirmation screen display):
MYR 2 x 1,
MYR5  x 1, 
MYR5  x 1, 
MYR10  x 1, 
MYR10  x 1, 




Summary:
Enhanced Confirmation Screen doesn't handle Note Revisions

Description:
When Denominations of Different Revisions of the same NoteId is inserted, then each Revision is considered as a different entry.

Ex 
Test Sequence

Inserted (in the same bunch):
MYR 2 (note ID 1794)  x 1,
MYR5 (note ID 1795)   x 1, 
MYR5 (note ID 18179) x 1, 
MYR10 (note ID 1796) x 1, 
MYR10 (note ID 18180) x 1, 


Expected Result (Confirmation Screen display): 
MYR 2 x 1,
MYR5  x 2, 
MYR10  x 2,

Actual Result (Confirmation screen display):
MYR 2 x 1,
MYR5  x 1, 
MYR5  x 1, 
MYR10  x 1, 
MYR10  x 1, 




Summary:
TAR 355792: AA-NDC reports successful deposit after CashInEnd reports Hardware error

Description:
As per details in debug logs in STAR, when a XFS hardware error is reported on CashInEnd, this fitness in incorrectly reset to zero and a good response is sent to the Host although no notes have been removed.




Summary:
Memory and handlefs leak discovered when performing cash-in transactions.

Description:
During memory leak testing for Cash In transactions, two kind of leaks have been discovered:
	1.75 KB memory leak per Cash In transaction
	1 un-freed Handle per Cash In transaction




Summary:
Cash Out - Init BNA function fails with Cash Out Error

Description:
Init BNA function fails on a GBRU showing Cash Out Error screen and it succeeds only when it is performed after CLR BNA. The reason is that the BNA object is used in Init BNA prior to opening a session.



Summary:
TAR 361139: GBxx configuration fails if missing cassettes are not in XML file

Description:
The issue detailed below involves the ADEP GBxx configuration utility. 
Briefly - the configuration will fail if there are previously configured
cassettes (that are now missing). When this happens in production there is
no way to recover using the application. Instead the ATM needs re-installed, 
or bin/prp files deleted or re-configured by hand with wosatool. None of
these options are acceptable to customers. 




Summary:
Start Exchange command is sent twice during Clear BNA 

Description:
Problem description given by Singapore PS:

The Init BNA gives Initialization failure after clearing the BNA counters ( option 53 ). The sequence of events which caused init failure is described below.
Encash error ( lifting up the top lid of GBRU after confirmation and before 2nd validation) 
Fast cash- unsuccessful 
Deposit- unsuccessful 
Test cash- failed with cash in error 
Init BNA ¿ successful 
Print counters( option 4 ) 
Print BNA counters ( option 55 ) 
Removal and replacement of reject bin   12/05/2007 15:40:06.247 
CLR BNA ( option 53) 15:40:15.591 REPLENISH 53. 
Init BNA ¿ Initialisation failure with cash in is in exchange state. 
05/12/07 15:40:39] OCBCSup.. 15:40:39.575 Error.Description : Device: BillAcceptor1,Description: Retract; The Cash In is in the exchange state

 

STD cash- failed with cash unit error 
Cleared the device in Diagnostics- Pass 
Init BNA- Initialisation 



Summary:
DisplayManager:Issue with NavigationError event when the WebExit is using DM

Description:
Once the webexit navigates to an error page, during next transaction whenever any event raises on the displayed WebExit html page it is directly raising NavigationError event instead of navigating to that event.



Summary:
w1 message after conf. screen timeout does not include escrow counts

Description:
If notes are in escrow and w0 is reported with correct counts. Then timeout occurs on confirmation screen, the w1 msg dows not contain escrow counts, even though the notes are still in escrow.



Summary:
mstatus 10 is being reported when a cassette goes full

Description:
Issue found running test 1.2.13.1 from CIC regression test spec, during IT of ANDC 3.2.1.CIC 1.01.01.

A cassette has been made to go high and then full. When the cassette reaches full, an mstatus 10 is returned in the status message. Mike Spafford does not believe this is correct.

See the information in the attached email chain and teh logs in the zip file



Summary:
Individual cassette going full causes overall device fitness to be Fatal

Description:
Issue found running test 1.2.13.1 from CIC regression test spec, during IT of ANDC 3.2.1.CIC 1.01.01.

A cassette has been made to go high and then full. When the cassette reaches full, the overall device fitness is being reported as 4(fatal), which is not the correct overall state of the device.

See the information in the attached email chain and teh logs in the zip file



Summary:
RemoteSupervisor: keys loading is into EPP is failing when keys are entered using Function (FDKs)keys from remote supervisor

Description:
keys loading is into EPP is failing when keys are entered using Function (FDKs)keys from remote supervisor



Summary:
Extended status reporting issue when no valid destination cassette for some notes.

Description:
The issue is if some cassettes are set up to accept Individual note types. And there are no AllIn bins or the AllIn bins are full. Then if the individual cassette becomes full, but there are still other individual bins available then the situation arises where the device is in service but it keeps rejecting good notes that would normally go to that Full individual bin (ie. no longer have a valid destination).

The host does not know about contents of bins only that one is full. So it may not send someone to replenish that immeduately. All the host would see is many w0 messages with notes rejected in them.

So, we can either just document this, recommending AllIn bins are kept in good state and replenished immediately, or they use dynamic overspill when using all Individual bins, or we introduce a configuration option that could send it Fatal if the situation occurs.
Or another possibility is to just set it Fatal rather than make it configurable.




Summary:
TAR 364414 - AA-NDC Reference Manual does not document that error code 5 may be unsolicited

Description:
The AA-NDC Reference Manual indicates that the Error code 5 (No Notes in
Escrow) is always a solicited event received in response to a Transaction
Reply when no notes were entered. This is not true as there is also a
possibility that there may be a situation where AA-NDC attempts to clear the 
escrow because notes may be in the Escrow during the Close state. In this
isntance, an unsolicited response would be generated and would confirm that
the earlier processing (which would have generated a message as a warning
regarding a possible problem) did complete successfully. 

This allows the Host to confirm the counts that it has for deposits




Summary:
Add support for Option 45 bit 4.

Description:
Option 45 bit 4 determines when the supplies status reports high and full when using BNA Emulation mode (ie. single byte of status). If set to 0 then supplies should report High/Full as soon as one cassette goes High/Full. This should also be default behaviour if bit 4 is not supported. If set to 1 then it will only report High/Full when all cassettes are final cassette is High/Full eg on a 4 cassette system if 3 are Good, and 1 is Full, then report Good. If 3 are High and one is Full then report High. If 3 are Full and one is High report High. If all 4 are Full then report Full.(Need to check if one Retract bin going Full should report Full or all of them need to go Full).

Note 1: from Gordon - The intention was for the solution to be very simple and maintain the original interface. If cassettes were storing different notes then setting bit 4 to zero would ensure that the device full condition was reported. If all cassettes were storing all notes then setting bit 4 to one would allow the device to be filled completely. It was thought that if something more complex was required then the Enhanced Interface would be used.

Note 2: We should document the following - If bit 4 is set to 1 and individual note sorting cassettes are used, and one of those goes Full, then supplies status will not report Full however some notes will no longer have a valid destination cassette - these notes will be rejected when inserted. So host will not be informed of this issue. (Note: if recycling is used then the notes will be accepted and during Encash the notes will go to Reject bin - This difference is caused by SP implementation). So it should be documented it is best not to use Individual cassettes with this bit setting.



Summary:
Adhere to the PCI-DSS standards (ensure customer data such as PAN is not traced in PD)

Description:
Need to check if Presentation Client traces the PAN.  Apparently the Content Provider traces the issuer id (in Rules Engine?)
This was discussed as part of the Relate SDK 1.2 release in October 2007.  Email from Jim Kirkhope:

Adherence to the standard is not yet a requirement for most ATMs ¿ the exceptions today are those in retail locations e.g. 7Eleven.

However, compliance will become a requirement at some stage and additionally customers e.g. BofA are asking what NCRs plans are with respect to PCI DSS.

Therefore postponing for a future release is acceptable here unless one of the customers is BofA. Otherwise a future release date will suffice ¿ as long as it is the next one and is not more than 6 months in the future.

Regards 
Jim 
------------------------------------------------------------------- 
James Kirkhope MTM BSc - Software Security Product Manager 
Telephone: 44 (0) 1382 592292 
Voice Plus: 341-2292 
Fax: 44 (0) 1382 622243 
E-mail: jim.kirkhope@Scotland.ncr.com 
------------------------------------------------------------------- 



Summary:
Extended Message doesn't report the supplies and fitness when the Customisation Layer is in Idle State.

Description:
When ECP mode is set to 8, and queried for Extended supplies or fitness, terminal responds to the query, depanding, on the current state of the Customisation Layer.
1: The extended message would report correctly, only after initiating a deposit transaction.
2: The extended message do not report extended supplies or fitness correctly, if queried when the Customisation Layer is in Idle state and no deposit transaction is initiated so far. 



Summary:
Issue when CashUnitThreshold and CashUnitError with Reason CASH_UNIT_FULL both are recieved when a cassette is FULL

Description:
Spotted this in code during Recycling development.

In the encash and retract code, both Cash Unit Threshold event and Cash Unit Error event with Reason FULL are handled but they are not handled properly. If both the events are received one after the other there is a chance of reporting the cassette status as NO_CHANGE which is not correct. So even if both the events are received, we need to make sure that the supplies are updated only once.

Note: Issue is seen in code only, this is not tested.




Summary:
Misrecognition error is not printed on to the journal when a misrecognition error occurs during Encash.

Description:
When swapping a note in escrow say good note with a bad note/good note with another good note, in either of the cases Mis recognition error is not printed on the journal. This is observed while executing test case 1.2.13.5 in CIC Regression Specification



Summary:
Memory Leak in mNDCSensorsStatusBuilder::GetStatusInfoData

Description:
Found new memory leak during scoping
Suitable for Service 03.02.xx
Memory allocated for 'hopperSensor' data not deleted.
ApplicationCore\Termstat termstat.cpp



Summary:
Status reporting for Fitness and Supplies has many issues

Description:
This status reporting needs to be fixed for CIC1.2 as there are too many outstanding issues and we can't wait for re-engineering to fix them. Also Fault Display is affected directly by this.
Re-design status reporting by doing the following:
1) Remove the need for the dictionary objects.
2) Use the cdi to track extended current status - set it after any threshold or cashuniterror event.
3) at the point the status msg is to be sent check extended msg flag and parse cdi if required to get one byte status.
4) No Change will be reported as supplies status for any cassette that has not been touched during current operation, but supplies will be reported for those that have been touched even if supplies value has not changed (same as Cash Handler).



Summary:
All refs to "¿HSM Root Key¿" should be changed to "NCR Sub Key"

Description:
tow request have come in for this name change; see attached email messages. The following ANDC publications have been identified so far:
- AA-NDC Reference Manual B66180   
- AA-NDC Developers Guide B66046 
- AA-NDC Overview B66597

May affect system documentation too.





Summary:
Including MAST functionality in AANDC

Description:
Supervisor application needs update to show a reserved screen corresponding to FDK C (second from bottom right FDK) when MAST is enabled. Also when that FDK is pressed, it need to go into System Application if the MAST is enabled.
This should be supported on both front interface as well as rear interface.



Summary:
TAR 359947 - Hang during deposit, need to press cancel key

Description:
TAR 359947 - Hang during deposit, need to press cancel key



Summary:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable

Description:
TAR 365370 - If a card is in Dash reader and read state is T, Card reader becomes unusable




Summary:
TAR 365888 - Dash Reader fails to display error screen after Misread

Description:
Dash Reader fails to display error screen after Misread



Summary:
TAR 362993 - No unsolic card reader status when card reader fatal on supervisor exit

Description:
No unsolic card reader status when card reader fatal on supervisor exit



Summary:
TAR 361839 - Card read error is reported for every transaction when Cardless Transaction is active

Description:
Card read error is reported for every transaction when Cardless Transaction is active



Summary:
Enhanced confirmation screen showing inconsistent total

Description:
when insering multiple revision of same denomination, Enhanced confirmation screen is showing total as appended string.



Summary:
Card Number in ECB Log is always "A/C NO UNKNOWN" 

Description:
Card Number in ECBlog is always "A/C NO UNKNOWN". this is because of a bug in "if" condition.
Source: ECBCommonImplementation.WSC
Function: GetCardNumber(comCDI)



Summary:
TAR 368336 Application selection fails to display correctly for > 999 screens

Description:
As indicated by the discussions between Jiri and Stephen Peat that have been 
provided to Euan and Ranjith, there is an issue with the StoreScreen
processing which means that the application display and language processing
is not performed correctly if there are more than 999 screens



Summary:
Remove unused registry settings and put all CIC reg settings in CIC reg file.

Description:
The AdvanceNDC.reg file contains old BNA reg settings which are probably not used any more. Check they are not used and remove them from the reg file:
;
; Cash Deposit Settings
;
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC]
;Active Template in the machine
"CurrencyID"="EUR"
;Maximum Cashin Items
"MaxCashinItems"=dword:00001388
;If Retract Flag is set to 1 it implies that the cashin device can retract the notes which are present at the throat or at the escrow.
"RetractFlag"=dword:00000001
;Report200Notes Option is used to parameterize sending of note counts in device status and transaction request messages
"Report200Notes"=dword:00000000

Also, any other CIC settings under the AdvanceNDC\BNA key should be moved to the CIC_RegSettings.reg file.



Summary:
DisplayManager: DM loses focus when in amount entry with amount mask "[Unicode-x1B]I       RP. ..0,05"

Description:
DM loses focus when in amount entry with amount mask "[Unicode-x1B]I       RP. ..0,05"



Summary:
delete vs delete[]

Description:
Found new memory leaks using VS 2005 Code Analysis (BasicSSWCL/JRNLCPY)
Suitable for Service 03.02.xx



Summary:
TAR 367378: BNA Supplies status is incorrectly reported

Description:
As per discussions with Som and Mike, if a terminal command is sent
requesting supplies status, the BNA Status is frequently sent as "w0" which, 
according to the manual means "not configured/reserved". This should be
reported as "1" for good, "3" for "Nearly Full" and "4" for "Full". 




Summary:
TAR 367771 - If retract is enabled, this should occur immediately on expiry of Timer 78

Description:
See TAR



Summary:
GetSupplies after startup returns incorrect data

Description:
Issue seen running new tests in regression test spec.Exended supplies data not returned until after a transaction was done

Follow the test in the attachement to recreate the issue and see the logs attached.



Summary:
Enhanced fitness not reported for each casette

Description:
Issue seen running new tests in regression test spec. Fitness data is not being reported for each cassette

Follow the test in the attachement to recreate the issue and see the logs attached.



Summary:
Reference Manual has erroneous info about Timer 78 - it applies whether retract is enabled or not.

Description:
See attached email.

Also ref man says default duration is 30 but NDC message spec says it is 40 - check which one is correct, amend Ref Man. if nec. or transfer to Gordon Forsyth.



Summary:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer

Description:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer



Summary:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer

Description:
TAR 366638 - Update for SNMP Agent Memory Leak in Customisation Layer



Summary:
TAR 364939, TAR 365250, TAR365254 - Incorrect MStatus / MData is returned when clearing suspend to fatal

Description:
TAR 364939, TAR 365250, TAR365254 - Incorrect MStatus / MData is returned when clearing suspend to fatal



Summary:
Rework the ClearSuspend method of the Passbook Resource Id

Description:
This code cannot be completed properly at this time. This GRIT is raised so that this is not forgotten.
See attached e-mail for more details.





Summary:
TAR 364601 - AA-NDC: Additional blank receipt printed when using XFS 04.05.00

Description:
An additional unexpected blank receipt is ejected when sending a 24 line
receipt, with black mark mode enabled on the printer. This functioned
correctly in a previous AA-NDC release. 

Root cause traced to change in the XFS RPTR Service Provider functionality,
which has changed implementation from using the Printer_Without_Cut command
to using the Printer_Print command, which automatically adds an additional
line feed to the data sent by the application. 

The current AA-NDC NCR_SPs.reg file sets up the RPTR SP configurable
parameter "VariableLengthReceipts" which in previous SP versions implemented 
the Printer_Without_Cut printer command. However from XFS 04.05.00, the
Printer SP also requires an additional parameter to be configured to
implement the specific printer command which permits AA-NDC to function
correctly. The parameter is AllowBMSpecialPrint and this has to be set to
"TRUE". This additional parameter, nor the VariableLengthReceipts
parameter are documented in the list of configurable parameters in the XFS
online help (TAR 364599 has been raised on XFS to document these
parameters. 

TAR raised as a follow up action, for implementation in any future service
pack/releases. Customer has a working solution.




Summary:
Defects Found From Code Analysis

Description:
See attachement - Memory Leak should be considered for inclusion in Service Packs

Also, problem with debug code in STATCUST.CPP (OOXFS) mChequeProcessingModuleMapping::MapSeverity - Last Debug Prin tries to display contents of mString - result is that the address of the mString is displayed as a string, which will result in a crash.



Summary:
TAR 363068 - Incorrect solicited error message sent when env depository bin removed

Description:
Incorrect solicited error message sent when env depository bin removed



Summary:
TAR 366248:  Message Receiver worker used in a customisation, is not working consistently

Description:
Tar: 000000366248  History Sequence #: 1 Origination Date:  17-Dec-2007 10:38:58 GMT
Sequence Date:     17-Dec-2007 11:20:59 GMT
Priority: 2
Category: PROBLEM
Status/Reason: UND.INV / UND.INV-PEND.
Product:       G531-0283-0000             Version:  03.01.01
Component:     ADVANCE NDC                Version:  03.01.01
Customer Name:  BARCLAYS BANK
Entered By: Coupar, Peter
Responsible Person: Suresh, Ranjith

Short Description(s):
  1) Message Receiver worker used in a customisation, is not working consistently

Current Full Description:
   Customer has a customisation where they are using the Message Receiver 
   worker with an additional CCM TCP/IP communication channel.   This works
   most of the time, but intermittently a received message does not appear to
   be picked up by the application.
   
   Implementation uses a timer to re-initialise the workgroup containing the
   message receiver worker
   
   Tracing is available from TCP/IP up to the application level which shows the 
   following on a good message receipt :
   
   2194 - App Comms "ActivateReceive called on Communicator"
   2207 - App Comms "Request message"
   2209 - CCM "OnDataArrival"
   2213 - App Comms "Message Received"
   2215 - App Comms "Message Received String: '30?" - corresponds to message
   received 1 as detailed above
   2218 - App Messagein - message as above
   
   On a "missing" message see the following sequence :
   
   2234 - App Comms "ActivateReceive called on Communicator"
   2247 - App Comms "Request message"
   2249 - CCM "OnDataArrival"
   2253 - App Comms "Message Received"
   
   The latter two application Comms entries are msising, which implies an
   applciation level issue.




Summary:
Introduce empty function and reserved screen entries to allow future implementation of CIC fault display.

Description:
Main aim of this RFC is to modify the AANDC main application part so that in the future CIC fault display can be added easily. 
Modify the existing ScanFaults function in the mMVFaultMessages class of ApplicationCore project (DeviceStatus.cpp) to add support for BNA. We need to introduce a new function for BNA Faults to give the error string to display to the Fault Display worker. Also, we need to introduce new BNA related reserved screen entries into the resrvd.def file.
For more information on this issue please contact Javier Artime.



Summary:
TAR 366467 - Enh Param 46 does not update USBIMCRW registry settings

Description:
Enhanced Configuration Parameter 46, which is used to configure the card
reader ECD (jitter) parameter remotely, updates both the SDCMCRW and
RS232IMCRW components (IMCRW added by TAR 326278), but it makes no chnage to 
the required registry settings for the USBIMCRW which is first released as
part of the 66XX units. 



Summary:
Supervisor function which prints EMV versions needs to support new EMV component

Description:
Currently the authored EMV supervisor function that prints the EMV component versions (CAM & ICC) does not print the version of the new EMV "INT" component. The INT version number covers the components of EMV which interface into AANDC. 

The printing is currently done for CAM and ICC based on the value of a key in the registry. 

The AANDC supervisor function should now also  look for the following registry key "SOFTWARE\NCR\APTRA\EMV Exits\INT" which contains the interface component version number. If it is found ti should print the INT version number, in the same way it currently does for CAM and ICC.

This key is supported in EMV version 02.01.00 and beyond.



Summary:
Update Release Reporting to 3.02.01.  Currently still 3.02.00

Description:
Dev PC testing - top level worker in all apps still contains build info as 3.02.00.  SHould be updated to 3.02.01.



Summary:
Dev PC Tests - Tidy Up Required

Description:
Find Results present in AppCore catalog.



Summary:
Include GR1T 380513 fixed in ANDC 3.01.02 into ANDC 3.02.01 

Description:
GR1T raised on cardless transactions during 3.01.02 testing should be considered for ANDC 3.02.01 (summary - When doing an Envelope Deposit during a Cardless Transaction, a system escape occurs)



Summary:
Include Memory Leak During Idle fix applied to ANDC 3.01.02

Description:
Raised to ensure that the memory leak fix applied in ANDC 3.01.02 is considered for ANDC 3.02.01.



Summary:
Include CCM VISA2 1.00.04 in ANDC 3.02.01 Build(s) 

Description:
RFC raised to ensure the latest version of CCM VISA2 is included in the ANDC 3.02.01 deliveries 



Summary:
TAR 364411 - BNA reports a Fatal fitness when Despoit/Refund attempted without deposit

Description:
see Tar



Summary:
TAR 362939:  BNA Fitness reports as good when Device error is listed in DSL

Description:
See Star



Summary:
TAR 358999 - AA-NDC fails to check and report Notes deposited after notes refused

Description:
As per debug logs provided to Mike Spafford, if notes are inserted at the
BNA and refused without validation, the note counts are not updated when the 
cusotmer subsequently re-inserts the notes. 

The scenario will typically occur if a bundle of notes are inserted into a
BNA2 module in such a way that they cannot be separated for validation. This 
may happen in one of two ways:- 

1. If the notes are spread out so that there is an excessive distance
between the leading edge of the first note and the trailing edge of the last 
note to be entered. This could happen if the customer tries to enter notes
with an overlap such that the start of the second note is more than half a
note length after the first note. 
2. If so many notes are entered that the bundle is too thick for the rollers 
to be able to process the notes individually. 

In either of these situations, the notes will be returned to the customer.
At this stage, AA-NDC check for notes being taken and finds that there are
no notes in the module. If he re-inserts immediately after withdrawing the
notes, the notes will be accepted by the firmware, the driver will correctly 
report that notes have been processed however AA-NDC bypasses the count
processing because it performed a check on the origina insertion. This means 
that the notes remain in the escrow and are not counted. 




Summary:
TAR 360866 ¿ Retract counts in Supervisor are updated if notes are taken as retract starts

Description:
TAR 360866 ¿ Retract counts in Supervisor are updated if notes are taken as retract starts



Summary:
TAR 360866 - Retract counts in Supervisor are updated if notes are taken as retract starts

Description:
TAR 360866 - Retract counts in Supervisor are updated if notes are taken as retract starts



Summary:
TAR 357853 - AA-NDC: Card left in DASH on Transaction reply causes command reject 

Description:
TAR 357853 - AA-NDC: Card left in DASH on Transaction reply causes command reject 




Summary:
TAR 363174 - TAR RFC 270388 has broken backwards compatibility for CPM receipt print

Description:
TAR 363174 - TAR RFC 270388 has broken backwards compatibility for CPM receipt print



Summary:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service

Description:
TAR 362605 - Switch quickly between Sup and Normal results in application not going in service



Summary:
TAR 361152 ¿ AA-NDC: Change usage of Timer 72 for non Dash card readers to Timer 2

Description:
TAR 361152 ¿ AA-NDC: Change usage of Timer 72 for non Dash card readers to Timer 2.




Summary:
TAR 360789 ¿ Retract Message "Presenter Error" is fixed. Manual indicates Screen T30 used

Description:
TAR 360789 ¿ Retract Message "Presenter Error" is fixed. Manual indicates Screen T30 used



Summary:
TAR 359560 ¿ Dispense and Print does not report NotesTaken on Journal if No Retract is set

Description:
TAR 359560 ¿ Dispense and Print does not report NotesTaken on Journal if No Retract is set



Summary:
TAR 359344 ¿ Timer 7 is bypassed when No Retract option is set

Description:
TAR 359344 ¿ Timer 7 is bypassed when No Retract option is set



Summary:
TAR 359080 - AA-NDC 3.2: GR1T wrongly implemented - Notes Presented V's Cash Presented

Description:
AA-NDC 3.2: GR1T wrongly implemented - Notes Presented V's Cash Presented



Summary:
TAR 357862 ¿ Screen displayed too long if Dash reader fails Read on Exit

Description:
Screen displayed too long if Dash reader fails Read on Exit



Summary:
TAR 357532 - In Dual mode the EJ Data is disabled if the paper journal is fatal

Description:
In Dual mode the EJ Data is disabled if the paper journal is fatal



Summary:
TAR 362596 - Cardless transaction reports Fatal MCRW in close state if MCRW is Fatal.

Description:
Cardless transaction reports Fatal MCRW in close state if MCRW is Fatal.



Summary:
TAR 365057 - Supervisor crashes when trying to use GBxx config utility after replenishment

Description:
Issue on AANDC 03.02.00. 

If the user selects 5-39 GBxx Config, it works OK and correctly configures
the device as per the XML file. 

After this, if the user then racks out the GBxx lower transport, then racks
back in. After leaving plenty of time for the device to come back online,
select 5-39 GBxx Config again and Supervisor crashes followed by a forced
UEH. 

There's only 2 significant entries in the PD trace (that traces all levels
of the software stack) so this looks like an NDC issue. 

Process Filename: C:\ssds\apps\supervisor.exe 
SupplyPoint Owner: NCRScotland.SSDS 
SupplyPoint Source:mError 
Description: <SCFILE> .\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE> 
<SCLINE> 1383 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 2 
Domain: 114 Error Number: 2 Worker Id: Description: VBScript
has reported an error in a script passed to it. 
The error is near line number 3 of Script Host Worker ID: 3n6835dc129. 
VBScript has given the following error description: 
'' 
The Source of the Exception is 
'' 
Script is: 
'ProcID**activate**END 
Sub activate() 
Dim DBG 
config.FilePath = "c:\Program Files\NCR APTRA\Advance
NDC\data\GBRUConfig.xml" ' GRIT 330101 - change path to ANDC's data folder. 
config.StartCo </FREE>
EE>




Summary:
DisplayManager:sample html file BALANCEREPLY.htm refereing wrong component in leftframe.html

Description:
BALANCEREPLY.htm referring parent.leftFrame.UCDIINTERFACE instead of parent.leftFrame.COM_UCDI_INTERFACE
EMV_ApplicationSelection.htm   should refer RETRIEVESCRINTERFACE instead of SCREENRETRIEVALINTERFACE 
EMV_ApplicationConfirmation.htm  should refer RETRIEVESCRINTERFACE instead of SCREENRETRIEVALINTERFACE



Summary:
Start Exchange command is sent twice during Clear BNA 

Description:
Problem description given by Singapore PS:

The Init BNA gives Initialization failure after clearing the BNA counters ( option 53 ). The sequence of events which caused init failure is described below.
Encash error ( lifting up the top lid of GBRU after confirmation and before 2nd validation) 
Fast cash- unsuccessful 
Deposit- unsuccessful 
Test cash- failed with cash in error 
Init BNA ¿ successful 
Print counters( option 4 ) 
Print BNA counters ( option 55 ) 
Removal and replacement of reject bin   12/05/2007 15:40:06.247 
CLR BNA ( option 53) 15:40:15.591 REPLENISH 53. 
Init BNA ¿ Initialisation failure with cash in is in exchange state. 
05/12/07 15:40:39] OCBCSup.. 15:40:39.575 Error.Description : Device: BillAcceptor1,Description: Retract; The Cash In is in the exchange state

 

STD cash- failed with cash unit error 
Cleared the device in Diagnostics- Pass 
Init BNA- Initialisation 



Summary:
Implement Fault Display "Lite" for CIC

Description:
Add Fault Display functionality to CIC using the existing CDI stores used for reporting status. The screens to display on the fault display will be based on these CDIs. Also add functionality to show CIC Supplies info in Replenish menu funcs DISP SPPLY and PRNT SPPLY.

As the info displayed will be based on the existing CDIs and the existing CDIs will vary in content depending on whether or not extended status reporting option is set, then the screens will either be able to show info about cassettes and device or overall device status only.



Summary:
TAR 363403 - AA-NDC: Interlock not displayed or cleared from EOP fault display

Description:
See TAR



Summary:
Wincor - Env depository enabled twice

Description:
Greece with ANDC 3.0.4MV

Millennium reported a problem with deposits on one of the pilot MV WNI ATMs.
When performing deposits frequently (every 3-6 attenpts) while the envelope is normally inserted in the depository slot and transferred through the transport to the deposit bin, the shutter does not close and the transaction finally displays the Timeout-Cancel screen to the cardholder, no receipt is printed and the transaction is also canceled (reversed) on the host. WNI engineer went to the ATM and did what he could to see if there was any problem with the depository shutter/sensors, but the problem was not corrected, so the Bank called us. Nikos went to the branch and confirmed the appearance of the problem after 3-4 valid deposits. He got the attached logs where the last deposit should be the one where the problem occured. Although it still sounds like a h/w issue to me, we need to investigate from our side as well. I am sending you the logs I just received and haven't yet looked at them, so please let me know if something obvious appears in there or we need to investigate further.

Regards,
Evangelos



Summary:
Misplaced deposit store in CDI-CPM catalog

Description:
Recently while working for CPM in Aptra Author, i found a small misplacement of a store. In catalog "CDI - CPM", an integer store "Bills in Escrow Count"(11a75tm2) is present. May be some misplacement. But, still informing you since its in the base product. This is noticed in AANDC 3.2 Release version.



Summary:
Dialogs release bulletin contains incorrect information

Description:
The release bulletin for Dialogs (02.00.03) contains the line: "For an overview of Dialogs, see the APTRA Promote Package Overview on the documentation-only CD-ROM B006-6341." This CD is no longer supplied and the text should be removed or replaced with a description of the component.



Summary:
TAR 358129 - Implement Auto Error Recovery "Lite".

Description:
It should be the same as Full AER, except the destination of any notes moved during the reset will go to the CashIn cassettes.
Functionality should be implemented as follows:
Can be turned On or Off using reg key (no other configuration offered).
Error Recovery is performed AFTER a Fatal status has been sent to host.
Error Recovery is performed at end of close state, before next transaction
Always reset to CashIn cassettes.
If CashIn is Active then do a CashInEnd first.
Send up simulated Supervisor entry-exit msgs around the reset.
Use the suspend Temp OOS screen while doing the reset.
Reset even if notes have been left in escrow or at exit slot.
Counts must be accurate as reported in Supervisor.
Send an unsol msg to host saying notes have been vaulted.
Journal the same.
Add a new resrvd.def screen for special "Reset Done" journal header.



Summary:
Memory Leak During Idle Sequence

Description:
Memory leak measured during idle sequence.



Summary:
After replacing EPP - AA-NDC does not reinitialise EPP when it should

Description:
When an EPP is replaced or re-initialised, AA-NDC is not re-initialising the 
EPP (as expected). The SST resets and on boot AA-NDC detects that the EPP
is in mode 1 - which is incorrect as the EPP is blank. 




Summary:
When invalid state is found, debug (statedata) contains transaction reply data

Description:
When debuglog is running, and an invalid next state is reported, there
appears to be data from the last transaction reply appended to the end of
the data added to the statedata file : e.g. 

applica.. 11:34:48.937 +++ Invalid Next State [255] - Default Close
StateE?AND PRINT 
Applica.. 16:24:37.000 +++ Invalid Next State [00W] - Default Close
StateWAIT 

Although this is just a loggin anomaly, there may be some issue with a non
nul terminated string being used which may cause unexpected results. 




Summary:
TAR RFC 364429 -  To limit the number of times the clear key can be used in PIN to 2 after this limit clear key will no longer be actioned.

Description:
It is only possible to count the number of clears and only action 2¿then any more clears - don't action them.

Again a registry key will control whether this is enabled or not.





Summary:
TAR 364295 - AA-NDC: Tran Reply Printer Data not printed if "nearly full" deposit performed

Description:
See STAR



Summary:
TAR 364171 - AA-NDC: Receipt out causes 2 faults displayed on Fault display

Description:
Scenario is as follows: 
Access the receipt printer in the ATM without entering supervisor. 
Remove the remainder of the receipt paper from the roll, tearing it off
where it enters the printer feed mechanism 
Perform a transaction that prints a receipt. 
Paper out condition is detected and reported. 
Check the Fault Display (either directly on EOP or after entering
supervisor). 
The following is displayed: 
NUMBER OF FAULTS: 2 
RECEIPT FATAL 
MEDIA NOT PRESENT 
PAPER OUT 
Access Supervisor / Diagnostics and view Device Status List 
DSL reflects only one fault: 
RECEIPT PRINTER 
PAPER EMPTY 
SELF CLEARING 

both Westpac and NCR Australia would prefer that the FD displays only one
fault rather than implying there is two problems (with both of them the same 
thing, but using different words!). We expect the FD to be consistent with
the DSL. 

XFS appears to show both errors, but only reports on the main issue (i.e.
PAPER EMPTY) as shown from the OOXFS Trace: 
<OOXFS>supervisor 14/11/2007 15:15:29.673 mMVPTRDeviceImp - Received STATUS

fwDevice = 4 (WFS_PTR_DEVHWERROR) 
fwMedia = 1 (WFS_PTR_MEDIANOTPRESENT) 
fwPaper[SUPPLYUPPER] = 2 (WFS_PTR_PAPEROUT) 
fwToner = 0 (WFS_PTR_TONERFULL) 
fwInk = 3 (WFS_PTR_INKNOTSUPP) 
fwLamp = 3 (WFS_PTR_LAMPNOTSUPP) 
lppRetractBins = <NULL> 
usMediaOnStacker = 0 
lpszExtra = <NULL> 



This issue has been recreated by FGSC on Vanilla APTRA XFS 04.05.00 and
AA-NDC 03.02.00. 

Customer logs are available for analysis. 

Customer configuration: 
XP SP2 / XFS 4.5 
AANDC 3.2 
Other Software: 
T357442 - AVI displays only the last frame in states other than Card Read 
ssdsNDCCUST.DLL 15/08/2007 
T357450 - Depository not sending fatal when using TIDep & 
MStatus 00 being sent on solicited status events from the depository 
SSDSEnvDispenserDepTI.dll 04/09/2007 Superceded by T359904 
T357529 - Receipts not being cut when transaction reply includes additional 
group separators 
SsdsPrn40Col.dll 17/08/2007 
ssdsNDCPRNT.DLL 17/08/2007 
ReceiptPrint.dll 17/08/2007 
T357973 - Dispense during diagnostics not logged to journal and not
affecting totals 
OOXFS.dll 05/09/2007 
SSDSResIDsSS.dll 04/09/2007 
ssdsNDCDATA.DLL 04/09/2007 
resrvd.def 30/08/2007 
Supervisor.* 04/09/2007 
ApplicationCore.* 04/09/2007 
T359904 - Timeout on Jam on Env Dep handled incorrectly 
SSDSEnvDispenserDepTI.dll 19/09/2007 Includes changes for T357450 
T358584 - White BG after overnight FD 
SSDSOpDisply.dll 27/09/2007 




Summary:
Request for non-magnetic card read function to be available in NDC

Description:
As discussed with StephenG and Alison:

Malaysia urgently require non-magnetic card read function in AA-NDC 03. This has been possible with earlier releases using the ADI interface but now it is not possible because the NDC card worker function appears to conflict with the non-magnetic card processing defined by Malysia in their local customisation.

Stephen has indicated that the change required would be a major issue for local customisation but relatively simple at the AA-NDC development level and therefore the best route is to request this change internally so that the NDC worker checks the registry for non-magnetic cards and issues an accept based on this setting.

As indicated in the regular conference call today, this is an urgent requirement which is p[reventing rollout.




Summary:
Unexpected line feed added to R00 screen data causes unexpected 2nd receipt

Description:
Data for receipt contains 24 lines of data with a form feed on the last line.
 
Root cause traced to host also downloading an R00 screen definition containing just a simple, non print data, control sequence "<ESC> [ 085 u" which is used to define the top of the form position.
   
The application is sending a print command to the printer which includes the R00 data pre-pended to the transaction reply data, but with an added line feed character in between.   This additional line feed character causes the final line to be part of a new receipt and hence the second unexpected receipt.
   
NDC+ has been tested and does not print a second receipt under the same conditions.This issue also previously appears to have been addressed in release 02.06.03 by TAR 298257.




Summary:
ANDC manuals explain why unsolics are sent, but not why - info needs to be added

Description:
See attachment



Summary:
Memory Leak During Idle Sequence

Description:
Memory leak measured during idle sequence.



Summary:
TAR 363077: Cash out empty fatal goes to Cash low after enter/exit SV

Description:
From the logs supplied, the dispenser is reporting the cassette as empty on an exit from SV, AA-NDC then takes this and sends a message with the cassette as low



Summary:
TAR 362939:  BNA Fitness reports as good when Device error is listed in DSL

Description:
See Star



Summary:
TAR 362884: Cardless transaction with touch does not work during mpeg in idle screen

Description:
See Star	



Summary:
Update the build process to allow automated verification of a check point for unexpected member revision changes

Description:
Add the following step into the build process after a check point has been done

andc verify <previous_check_point> <new_check_point>

This will verify that member revision numbers of files that changed between these check points follow the member revision guidelines. 

Reason: This would catch the problem of TAR 362892 where a member revision was moved back incorrectly from of NDCCORE\NDCFIELD\FLDNXTS.CPP 1.5.2.5 back to 1.5. 

The easiest check will include these
1) member revision of a file that changed between the check points contains either 2 or 4 digits
2) member revision a file that had 2 digits changed to a 4 digit number like this: A.B -> A.B.C.D where D > 1
3) member revision a file that had 4 digits changed like this: A.B.C.D -> A.B.C.E where E > D




Summary:
Include release bulletin info from AANDC 3.1 in the AANDC 3.x IPs

Description:
The following info should have been moved from the AANDC 3.1 release bulletin into the IPs:
"When building an application in the Author, the application name supplied should not be more than 64 characters in length or contain spaces in the name, otherwise undesired effects may occur when building the application."
There is other info which has also not been moved into the IPs, which is now a problem in AANDC 3.2 as the info was removed from its release bulletin.



Summary:
TAR 362944 - Unwanted optional params returned in last transaction status of Trans Req

Description:
Hi Bryan, 

Your understanding is correct. I don't want to have those optional fields.
This host handles purely cash dispenser, so it is quite specific as all
these kinds of optional devices never appear in their system. So I don't
think the host can handle even though there are 26 zeros. 

Thanks & regards, 
Bee Lian 



-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: Friday, November 02, 2007 5:05 PM 
To: Gan, BeeLian 
Cc: McDermid, Bryan; Coupar, Peter 
Subject: RE: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


BeeLian, just to let you know that I have picked up the P1 issue as well and 
have escalated the first issue to the Engineering Management team - not much 
more we can do here (FGSC) other than keep pushing them. I'll try to
characterise the new issue ASAP and demonstrate to Engineering. 

On the new issue - would the host be able to handle it if there were 26
zeroes? 

But I know your point was that this field being optional, should not be
included - I assume the fix you would like is to not have this field
included in the Transaction Request? 

Best Regards 

Bryan 

Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 
WEB: <http://www.dundee.ncr.com/ssgsc> 
CKS: <http://cks.columbiasc.ncr.com> 






-----------------------------------------------------------------------------
--- 
From: Gan, BeeLian 
Sent: 02 November 2007 08:46 
To: McDermid, Bryan 
Cc: Coupar, Peter; Suresh, Ranjith; Pattullo, Euan 
Subject: RE: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


Hi Bryan, 

Appreciate your understanding on the pressure that I am having now. 
I need a fix by end of today your time. 
Sorry if it seems like too much to ask. Our original plan was: 
- to complete the generic testing on vanilla AANDC 3.2 by end of today, 
- followed by some testing on local enhancements (camera solution) 
- To recreate some issues found on 2.6.6 to confirm whether they are fixed
in 3.2 

I have to leave Vietnam by next thursday (8-Nov). So basically I have only 3 
more days (next Monday to Wednesday). 
And i have to let you know that we have no local NCR or distributor support
here in Ho Chi Minh city. 
If I cannot get all these done within these few days, we have to fly a PS
from another country. 

P/S: 
- Pls note that I have raised another issue on the same machine one hour
ago: 
AANDC 3.2 - Transaction Request has extra data in field 'r' 

Attached herewith the incident report. Bryan, I need your help to look after 
that call as well, as I believe they are inter-related. 

So as you can imagine, I am stucked now :(. We can't bring the ATM in
service automatically due to this Supply Counters message. After host forced 
the ATM in service (by manually issue GIS command), our transaction request
message contains extra data in field 'r', again host is unable to handle and 
does not send transaction reply. 
So now, we can't even proceed with anything. 

Appreciate your understanding. Pls provide me your estimate when the
solution to both issues can be delivered. 

Thanks & Regards, 
Bee Lian 


Hi Ranjith, 

This is the information for BeeLian's P1 issue which may be related to the
P2 TAR I opened yesterday. Logs are attached as given to me. You can see the 
difference between 2.6.6 and 3.2 as BL describes this in the email. 

I have confirmed that the problem happens on my standard 3.2 build in the
lab and attach my message out file 

I am getting this info to you ASAP and I am just about to raise a P1 TAR for 
the reasons detailed below. 

Currently, we are checking out if the problem occurs on a simulator and I
will also check what 3.1.1 does. 

From what I am seeing, it looks like the ATM thinks it has a coin dispenser
and is sending this info, wrongly, in field 'r' of the TREQ. 

Please let me know if you need anything more and if I can help. 





Summary:
TAR 362872 - Solic response to send supply counters (1.....4) has 5 Group Sep at the end

Description:
-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: 01 November 2007 14:44 
To: Suresh, Ranjith 
Cc: Pattullo, Euan; McDermid, Bryan; Coupar, Peter 
Subject: FW: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 
Importance: High 


Hi Ranjith 

I have an urgent issue brought in by BeeLian: (She is flying to Vietnam and
will be on site from tomorrow for a short time) 

For some reason 3.2 has added 5 Group Separators at the end of the Solic
reply to get Supply Counters and this change is causing her host not to put
the ATM In Service. My logs for 266, 311 and 320 follow: 

13:48:00 # 266 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000003000000000065535655350000000000000010006500000000000000
0001980000000000000000000000000000000000000000] 
14:03:40 # 311 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000000655356553500000655350000000018000000000900000000000000
0000000000000000000000000000000000030000000000] 
13:34:57 # 320 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]212340000002655356553500000655350000000018000000000900000000020000
0002420000000000000000000000000000030000000000[Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D]] 

The manual implies that these GS's are only included if any of the optional
fields are present and they are not! And why only 5 GS's, there could be a
lot more. 

Is there any reason why these are now included and are you ok for me to
raise a P2 TAR? 

Regards 

Bryan 
Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 
WEB: <http://www.dundee.ncr.com/ssgsc> 
CKS: <http://cks.columbiasc.ncr.com> 






-----------------------------------------------------------------------------
--- 
From: Auto-EMail, FGSC 
Sent: 01 November 2007 13:21 
To: Gan, BeeLian 
Cc: McDermid, Bryan 
Subject: RAZCLYL2B - MY: reply to send supplies has extra GS's in 3.2 


To: Beelian Gan, 

We have received your communication on this issue, thank you. It has been
assigned to Bryan McDermid of FGSC. Bryan McDermid will reply in due
course. The issue has been logged on our Sentinel tracking system as
Sentinel Problem RAZCLYL2B, "MY - |AA-NDC|SW|DEV| - reply to send supplies
has extra GS's in 3.2" (Priority 2). 

If you wish to check the status, you may do so by accessing the following
location on the World Wide Web -
http://rpc1866.daytonoh.ncr.com/status/display_full_incident.html using the 
Sentinel Problem ID given above, you will be able to view any updates to
your issue. 




Please Do Not Reply to this email. Replies should be sent to the engineer
assigned to your incident 

FGSC Automated Acknowledgement. 
---------- 

From: Gan, BeeLian 
Sent: 01 November 2007 12:22 
To: Auto-EMail, FGSC 
Cc: Chong, HockChoong 
Subject: AANDC 3.2 - ATM cannot go in service Due to Supply Counters
Message 

Attachments: Host Log - Supplies 3.2 vs 2.6.6.txt; Supply In-Out Messages 
3.2.txt; hwcfg0.txt; swcfg0.txt 
01 - Employee name: Gan Bee Lian 
05 - Country: Malaysia 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: 603-21175618 
20 - Customer Name: Sacombank Vietnam 
25 - Priority: Priority 2 
30 - Products Affected: 5877 
35 - Platform OS: Aptra XFS 04.05.00, XP 
40 - Application: AANDC 3.2.0 
50 - Environment: Development 
55 - Frequency: Always 
We recently upgraded an ATM from AANDC 2.6.6 to 3.2. 
There are some differences noticed on terminal to center message "Send
Supply Counters" (1?4) which has caused the host program to stop sending the 
subsequent terminal commands and hence did not bring machine in service. 

There are 2 differences: 
1) After field g11, terminal sends 5 trailing <group separator> without the
present of any optional fields. 

14:42:39 # 6 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]2 
00000000049900000000000100000001000000000000000000000000000000000000000000000
000000000000000000000000000000[Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D][Unicode-x1D]] 

According to AANDC 3.2 reference manual: 
Table Note 45: If any optional group is present, all of the group 
separators preceding it will be included, enabling the host to 
identify the group 



Summary:
Recycling - Updates on Dispenser side for Counts and Messaging

Description:
To cover following updates
	Counts - removal of check of InitialTotalNotes when GBRU used as dispenser
	Messaging - updates for Ready B message and unsolicited for re-enabling cassette



Summary:
Incorrect Coin counts with 4 hopper dispenser and option digit 79 set to 1.

Description:
With enhanced configuration option 79 set to 1, during DISP, CLR, ADD coins, PRNT CNTRS and STD Coin, all 8 hoppers are shown dispite that face that there is only four connected. As all 8 hoppers are diplayed coins can be added to hoppers 5 to 8.




Summary:
USB Coin Status low not updated after replenish.

Description:
When hooper is replenished, DISP SUPPLY and Send supplies cmd still show hopper low until another coin transaction is carried out, also EOP does not show hopper low.



Summary:
Support for USB Coin Dispenser on AANDC 03.02.00

Description:
Minor change to stop HOPPER REMOVED from being always being displayed when using the USB Coin dispenser



Summary:
TAR RFC 365798: Add a new screen for "please wait" in Cash Accept Extension State

Description:
Add please wait screens in these areas:
Cash Accept State - Please Wait for Device
Cash Accept State - Notes Being Retracted
Close State - Notes Being Retracted
Refund Cash Transaction Replay - Refunded Notes Being Retracted (still to be decided if it is needed for this GRIT)

In general we should display screen as below:
1) Use specific screens when available
2) Use the generic (C20) Please Wait screen if it is defined 
3) Do what we currently do

See attachment for proposal, and NDC Msg I/F Spec Rev F for finalised details including Cash Accept State Extension State 1 Param 9 update which is not mentioned in proposal.



Summary:
URL table. AANDC 3.1 web exit state involves a table that holds the URLs for the indexes. Use screen number to do the index and the screen definition to define the URL - Use XML download from the host or available locally to achieve the same function

Description:
URL table. AANDC 3.1 web exit state involves a table that holds the URLs for the indexes. Use screen number to do the index and the screen definition to define the URL - Use XML download from the host or available locally to achieve the same functionality



Summary:
Support Athena Phase II

Description:
Support - Athena û Phase II, XFS 4.6



Summary:
SCPM - Multiple Cheque Application Changes

Description:
Detailed Requirements to be made available



Summary:
Universal Statement Printer

Description:
Maybe certification only - There is a variable form length which raises concern but donÆt know for sure whether there will be application impact or not



Summary:
Cardholder 'Authorised' Verification for off host transactions

Description:
In order to expand off-host transactions (i.e. Web Transactions) there is a requirement to validate that the cardholder is authorised to proceed to use any new terminal services that may be offered.  This helps simplify any authorisation and identification scenarios that may be required to be performed by the new transaction if the cardholder has previously been authenticate via the NDC Host. 

Validation could be performed by a Balance Enquiry that only serves to ensure that the PIN is valid - no Balance transaction would be displayed to the user (only a please wait).



Summary:
Enhanced Capacity GBXX Cassettes

Description:
Enhanced Capacity GBXX Cassettes



Summary:
Vertical printing of a more readable cheque image on receipt as a configurable option in addition to the current horizontal printing

Description:
Vertical printing of a more readable cheque image on receipt as a configurable option in addition to the current horizontal printing



Summary:
Extend the web state to have 5 good next state numbers rather than the current one good next state number

Description:
Extend the web state to have 5 good next state numbers rather than the current one good next state number



Summary:
To enable MAC roll in-service as per the comms key in-service roll.

Description:
See TAR



Summary:
Request for txn journalling to distinguish between card and cardless txns.

Description:
See TAR



Summary:
Amount entry on same screen as cheque image display

Description:
Amount entry on same screen as cheque image display



Summary:
Support for forms based printing for Reciept & Journal

Description:
Support for forms based printing for Reciept & Journal



Summary:
Image based "prompt" to guide the user for a good barcode scan - Support it in the same manner as the current G screen support

Description:
Images used by SEA available for reference



Summary:
2ST - 2 Sided Thermal - Support cheque image printing on the reverse - local configuration

Description:
This will be a configurable option at platform level
1. Front and Back specified through XFS forms (application driven)
2. Multiple print forms will be queued and then the job will be split in the middle 
3. Odd number printed on one side and even number on the other
We need to spend some engg time to understand what amount of application changes (if any) will be required



Summary:
Integrate Recycling Advanced Development

Description:
Integrate Recycling Advanced Development



Summary:
SMS Alphanumeric entry using standard numeric key board - On the user side

Description:
Alphanumeric entry using standard numeric key board - On the user side



Summary:
Request to move Printer Initialisation commands from the Card Read State

Description:
Customer has observed that there is approximately a 4 second delay in returning to the Card Read State after a transaction when using a new style TEC PFS Thermal Receipt printer compared to using the old style TEC Thermal Receipt Printer. 
On further investigation this was attributed to the fact that the printer initialisation control codes defined in the Resrvd.def file were being sent to the printer each time and that this included a customer defined font file (defined in screens K07 and K08). The 3kb file was found to take longer to download with the PFS printer than with the legacy printer. 
Ultimately, this is an issue with the new style thermal receipt printer, though this would have to be a fix to either the hardware or firmware. The bigger the customer font file, the longer it takes to complete download to the printer. However, this is a more costly fix to NCR, also in terms of time. A TAR will be rasied on the printer with the intention that this be addressed in the next firmware release by the printer vendor (TEC). 
However, it is only neccessary to download the font file at the start of day as this will remain resident on the printer over a soft reset (it will only be cleared from the printer memory if power is removed i.e a reboot). The only way for AANDC to do this at the start of dday is by having it defined in the Resrvd.def file, though this means it is also downloaded every time enter the card read state.



Summary:
AA-NDC doesn't support the changing of assosciated keys/FDK's within timeout 

Description:
As discussed our customer is having problems being able to change the activated FDKs within the timeout screen for 
AA-NDC. In all versions of NDC and AA-NDC up to and including AA-NDC 02.05.00 you were able to send a message from 
the host as below: 

[30<FS>001<FS>002<FS>11<FS>C00<SO>000<GS>200010002000300040005000600070008F20
900100011001200130014001500160017001800190020F6210022F523002400<GS><GS>] 

From AA-NDC 02.06.xx it is not possible to send the above message to make associated keyboard changes for screens and 
states. This is clearly documented in the AA-NDC manuals. However, there is no alternative published 
to replace this functionality. 

It has been agreed that this functionality should be readded as an RFC




Summary:
Request to implement reserved screens C10-C19 for settlement transactions

Description:
Previously in NDC+ there was functionality to use up to 10 different settlement transactions by using C10-C19. However in the documentation for AANDC it makes no mention of these screens, only referring to the reserved screen C09 for supervisor transactions.




Summary:
Enhanced Night Safe Support

Description:
Enhanced Night Safe Support



Summary:
Support for image based cheque clearing systems - Linkage with payment system solutions (Passport)

Description:
Support for image based cheque clearing systems - Linkage with payment system solutions (Passport)



Summary:
USB Camera support - general RFC

Description:
More detailed requirements available - see attachment



Summary:
Voice Guidance - Support for a mix of wav and text-to-speech - Support other TTS engines

Description:
Voice Guidance - Support for a mix of wav and text-to-speech - Support other TTS engines



Summary:
Voice Guidance - Wav File Support

Description:
Voice Guidance - Wav File Support



Summary:
Voice Guidance - Extend US implementation to support EMV for AANDC base product inclusion

Description:
Voice Guidance - Extend US implementation to support EMV for AANDC base product inclusion



Summary:
Voice Guidance - US Implementation (text-to-speech)

Description:
Voice Guidance - US Implementation (text-to-speech)



Summary:
Passbook Support - Phase 1/2

Description:
Phase 1/2 - Worker migration and status handling



Summary:
NOTRAN SNMP traps - No transaction or mode change

Description:
Currently available as customization but needs to be included in the product



Summary:
CPM - Imaging after endorsement

Description:
SEA needs the following Cheque image to be lifted after endorsement in addition to before endorsement (image of a cheque as deposited) on both Single Cheque and Multiple Cheque. Validated by Area head, Marketing and feasibilty agreed by Cheri Roe - CPM Product Manager



Summary:
No description is available in the publications regarding endorse on capture

Description:
See TAR



Summary:
There is no documentation regarding the new cheque print functionality

Description:
See TAR



Summary:
AA-NDC Supervisors Guide should indicate the Notes Taken only for Retract ON

Description:
See TAR



Summary:
Timer 10 is not referenced defined in AA-NDC Reference Manual

Description:
See TAR



Summary:
Developers Guide description of using XFS Simulator is missing an instruction

Description:
See TAR



Summary:
Description of transaction reply field ba2, missing information and conflict

Description:
See TAR



Summary:
TAR 357534 - Opcode not updated when cancel and timout next states same as FDK next state

Description:
Set the "Cancel Next State" value in an E state to be the same value as all
the active FDKs in that E state. This causes the opcode to not be populated
with any value specified by this state when an active FDK is pressed. 
Similar issue also reported in the Y state. 

This is a US build, using their 03.00.30 product version built on std
03.00.01. 

Customer has also tested base 03.02.00 release and similar issue seen. 
Recreated in 03.01.01. 

Priority 2 as requested by customer due to : "We have asked the customer to
change their download to workaround the issue, but they are not willing to
change it. This is somewhat of a high priority as it is holding up their
rollout of Voice Guidance to meet new governmental requirements"




Summary:
When doing an Envelope Deposit during a Cardless Transaction, a system escape occurs.

Description:
When doing an Envelope Deposit during a Cardless Transaction, when no Track 2 data is specified in the registry, a System Escape occurs.



Summary:
Discrepancy in cardless transaction handling

Description:
Supplied registry settings have Next State Number as a DWORD value, but when Enh Config Param is downloaded with option 77, Next State Number is is changed to a string value. Customisation Layer also expects a string value. Vanilla registry settings should match app behaviour and Developer's Guide updated accordingly



Summary:
Use the PostUserErrorOnSuspend SP registry setting in Advance NDC

Description:
Following GRIT 371178, update NCR_SPs.reg file to always use this setting (uncomment the line). Do this for from the start of ANDC 3.3 integration test to verify it does not cause any issues. No issues are expected to be seen though. Suspend testing will be the main area of regression testing.
This change was not integrated into the 3.02 release as it was too late to ensure it had no adverse effects. Required for GBXX suspend handling.



Summary:
Recycling - Cash In specific updates to enable Recycling and to report counts to host

Description:
Changes made:
 - Updates to Config/Enhanced Config Parameters Load
 - Update to CashInStart to allow use of recycling units
 - Few updates to Cash Out code to allow use of recycle units
 - Added new functions to wsc file to report Recycle Cash Units info in ReadyB, TR Request and Extended counters
 - Updates made to catch Counts_Changed event during dispense transaction and provide the supplies and fitness of updated cassettes which are needed for CDM counts reporting in ReadyB





Summary:
Memory leak in Applicationcore.exe

Description:
There is a hugememory  leak in Aplicationcore
The Handle Count and Private Bytes are increasing w.r.t time.
	



Summary:
Cash Out - Reject Bin Full condition is not reported in response to GetSUPPLY terminal command

Description:
When a cassette runs out of notes during stack, the notes in escrow are moved to reject bin. If reject bin goes FULL at this point, the supplies of reject bin is not reported as 4 in response to GET SUPPLY terminal command.



Summary:
Last Transaction Status counts should not be cumulative

Description:
The Last Transaction Status Counts for the BNA in the Transaction Request message should not be cumulative counts, they should only contain information for the previous transaction.



Summary:
TAR 355894 - Alarms with status unsolic message always sent as if in Supervisor

Description:
As described in emails below and shown to EP: Issue not seen on standard 302 
or 303 but seen on 302 with TAR fixes 320245 - supported on PKO 

Hi Lukasz, 

I have set up a system with 'alarms with status' and have confirmed what you 
see with your build. I have noted however that both AA-NDC 03.00.02 and
03.00.03 behave correctly. I cannot get the TI to fail unless alarms with
status is present. 

When I boot up the PKO build and enhanced alarms on (in alarm state), it
will automatically go to the 003 screen despite not being in SV mode on the
EOP - to clear this I enter SV via the switch and exit with '9'. This allows 
a download and will GIS. If I go OOS it will not allow me to GIS again until 
I repeat the above process (SV switch 9 exit). 

This is looking like a problem with cumulative TAR fix 320245, but I have a
question: 

Is there any other Customisations in this area that you may have other than
this? 
Particularly in this area: The supervisor byte is controlled by the CDI
store CurrentMode (Store ID 1250) being set to 3 (SUPERVISOR). If the CDI
store is 3 then the byte is one otherwise the byte should be 0. 

I am just about to raise the TAR on this and will get back to you. 

I take it there are no plans to move the application forward in Poland in
the near future? 

Best Regards 

Bryan 

From: Kazior, Zbigniew 
Sent: 18 June 2007 18:18 
To: Auto-EMail, FGSC 
Cc: Cipollone, Stefano 
Subject: PKO: AANDC 3.0.2 & TI Unsolicited Message & Supervisor Mode
Switch status wrongly reported 

Attachments: bledy alarmow.zip 
01 - Employee name: Zbigniew Kazior 
05 - Country: Poland 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +48 691 480 108 
20 - Customer Name: CITIBANK 
25 - Priority: Priority 3 
30 - Products Affected: All 
35 - Platform OS: XP 
40 - Application: AANDC 3.0.2 / XFS 4.2.1 / EMV 2.0.1 / XP 
45 - Other Software: cumulative ServicePack T320245 
50 - Environment: Live 
55 - Frequency: seldom 
60 - Installed: 218 
65 - Affected: 100% 

Team, 
We have found another issue in AANDC related to TI Unsolicited message &
Supervisor mode switch reporting: 
Extract from documentation: 
If byte 1 = ?1?, TI sensor change, or ?3?, Alarm state change, bytes 2-13
give details of the 
state of the following sensors: 
?0? Supervisor mode inactive 
?1? Supervisor mode active 
Extract from Logs: 
IN service mode: 
[05/21/07 15:18:08] 
[05/21/07 15:18:08] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]B0000] 
[05/21/07 15:18:53] 
[05/21/07 15:18:53] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
{ZK: ATM is Normal but status of byte 2 is reported as SUPERVISOR - 
should has been reported as "0" - Sup Mode Inactive} 

[05/21/07 15:18:55] 
[05/21/07 15:18:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:19:01] 
[05/21/07 15:19:01] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3111001011111] 
[05/21/07 15:19:03] 
[05/21/07 15:19:03] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:21:54] 
Supervisor mode entry: 
[05/21/07 15:21:54] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21] 
[05/21/07 15:21:55] 
[05/21/07 15:21:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R004] 
[05/21/07 15:22:00] 
[05/21/07 15:22:00] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R009] 
[05/21/07 15:22:15] 
Supervisor mode exit: 
[05/21/07 15:22:15] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] 
[05/21/07 15:22:15] 
[05/21/07 15:22:15] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:16] 
[05/21/07 15:22:16] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:27] 
[05/21/07 15:22:27] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
[05/21/07 15:22:48] 
[05/21/07 15:22:48] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:55] 
[05/21/07 15:22:55] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 



Vanilla AANDC has the same issue: 
I attach logs: 

Issue is not critical but has been officially reported. 

Best Regards 

Zbigniew Kazior 
Senior Consultant 




Summary:
Serial Number Read (SNR) EJ-only printing

Description:
Printing SNR only on EJ even if dual journaling available. 



Summary:
TAR 348467 - Request for journal to print counts after transaction is cancelled by host.

Description:
Request raised by Azad Mankara for QTEL, Qatar on CIC 10. 

Request for when a tranaction is cancelled (by the host) that the counts are 
printed on the Journal. 

Info from Azad - 
From within a transaction, if GBNA refund notes for other than cancel key
pressed, no returned counts are being printed by AANDC. At this point I
cannot do any host changes for this and what I need is AANDC itself has to
print the same on journal like other returned counts used to get
journaling. 



Summary:
TAR RFC 331015 - Request for INIT BNA to report counts of notes cleared

Description:
As discussed, the request has been raised for the count of notes encashed as a result of an INIT BNA command to be reported on the journal. 
Currently, this data is not reported but RFC 312351 has been raised and accepted for this issue. 
The implementation will need to quote the platform dependency based on the platform release in which the RFC312351 is included.



Summary:
Cash Out - Supervisor Test Cash shows CASH IN ERROR screen when there was an error during last test cash

Description:
Details given by customer:

We are simulating Test Cash error by blocking the exit sensor, operator panel shows "DISPENSER FAULT". Previously when we tested this scenario, we just redo Test Cash again and it will be successful. The notes will be moved to reject bin and counters are correct. 

Now, when we try to redo Test Cash again, we get CASH IN ERROR on the operator panel immediately and we are unable to clear the notes. We didn't make any changes with Test Cash.

If we do Init BNA <54> it will show INITIALISATION FAILURE and the notes can still be seen at the separator. This behaviour is consistent with previous testing.

Could you check and let us know why we are now unable to clear the notes with Test Cash? In the end we had to go diagnostics, clear GBRU, INIT BNA before Test Cash is finally successful, but the counters are wrong.

Attached the logs here. Look for 'Andrea'

We are using PcGBRU_91030009.zip and gbru_sp_91030009.zip




Summary:
TAR 358584 - AANDC: Tx i/f to front in SV mode - screen goes 'blocky' after <15hrs

Description:
As discussed, emailed and shown to Ranjith: 

Hi, 

Anyway: Out/In SV, screen is still white and blocky - only way to clear is
to reset ATM. Peter seemed to think it was a painting issue - I don't know. 

Thanks for looking - I will propose what you say to Trish, raise the TAR and 
let you know. 

Cheers 

Bryan 
Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 





-----------------------------------------------------------------------------
--- 
From: Suresh, Ranjith 
Sent: 29 August 2007 14:09 
To: McDermid, Bryan 
Cc: Coupar, Peter 
Subject: RE: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Came around no one there. Also went to the lab and saw the issue. Tried
messing around with notepad to see if its a painting issue and its not. 
Forgot to check somthing, if you exit superviosor and come back in, do you
see the problem. Seems very bizzare, according to Trish its not one of her
priority issues, Realistically no one is going to stay in supervisor for a
whole day, and also the app hasnt hung either. So we can raise a TAR and
we will look at it in the future release, if Trish agrees. 

Regards 
Ranjith 



-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: 29 August 2007 11:53 
To: Suresh, Ranjith 
Cc: McDermid, Bryan; Coupar, Peter 
Subject: FW: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Hi Ranjith, 

This is the second of the three issues. Fail is as attachment and is
reproduced by: 

1. let app start 
2. enter SV 
3. Transfer to front 
4. Show fault display (option 26) 
5. Leave on this screen for a number of hours - occurs readily overnight,
therefore < 15hrs 

Seen on two Australian builds: both 3.1.1 and 4.2.1 with a commonality of
Solidcore as well - Trish has full details 3 emails down. Seen on both Pele2 
and PIVAT cores - I have reproduced on a P86 with Pele2. 

This does not appear to hang the ATM for me, but think Trish may have seen
this. I have the fail on the ATM at the moment and would appreciate if you
would take a look at this ASAP, please? The ATM needs to be freed up for
other Oz issues. 

Thanks 

Bryan



Summary:
Revisit/research generating the Reference Manual from a single source (for example NDC Message Spec)

Description:
With a view to reducing reviewing effort, improving accuracy, offering more choice to customers, and increasing flexibility and speed of IP generation, methodologies need to be investigated for creating one data source of the NDC message from which different outputs/formats can be generated (spec, reference guide, customer specials: PDF, Word, Web)



Summary:
New publication to provide guidance on extending ANDC

Description:
This publication "Extending Advance NDCE was orginally planned for 3.02 but deferred. It will bring together all the information, which is currently scatter throughout the book set, about methods of extending the product, (Exits etc.) For the 1st release, it will not include using the Author to extend Advance NDC



Summary:
Integrate 2 remaining white papers into the ANDC publication set

Description:
 only "NDC Exits and CEN-XFS in Advance NDC" and "Advance NDC Display and Keyboard Hooks" have still to be integrated.



Summary:
Tech Pubs: missing info on BNA Close State option

Description:
The reference guide, page 2-37 says that the "BNA Notes Return/Retain/Leave Flag" in the Close State extension state can be 000 to 002.  But it does not explain which value has what function. It should also say:
000 - Return
001 - Retain
002 - Leave notes in escrow (this also sets the device to Fatal so it cannot be used again until cleared using InitBNA in Supervisor).




Summary:
ANDC Reference Manual (b66180 - rev J) Track read info and chip connect bit read conditions need clarification

Description:
Raised on behalf of Ian Davidson, Global Learning
Info in chaps 2 & 12 needs to be clarified. See attached email



Summary:
TAR 358584 - AANDC: Tx i/f to front in SV mode - screen goes 'blocky' after <15hrs

Description:
As discussed, emailed and shown to Ranjith: 

Hi, 

Anyway: Out/In SV, screen is still white and blocky - only way to clear is
to reset ATM. Peter seemed to think it was a painting issue - I don't know. 

Thanks for looking - I will propose what you say to Trish, raise the TAR and 
let you know. 

Cheers 

Bryan 
Bryan McDermid, Solutions Engineer 
Financial Global Support Centre 
Tel: +44 1382 71 4014 
Fax: +44 1382 59 2164 
Email: bryan.mcdermid@ncr.com 





-----------------------------------------------------------------------------
--- 
From: Suresh, Ranjith 
Sent: 29 August 2007 14:09 
To: McDermid, Bryan 
Cc: Coupar, Peter 
Subject: RE: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Came around no one there. Also went to the lab and saw the issue. Tried
messing around with notepad to see if its a painting issue and its not. 
Forgot to check somthing, if you exit superviosor and come back in, do you
see the problem. Seems very bizzare, according to Trish its not one of her
priority issues, Realistically no one is going to stay in supervisor for a
whole day, and also the app hasnt hung either. So we can raise a TAR and
we will look at it in the future release, if Trish agrees. 

Regards 
Ranjith 



-----------------------------------------------------------------------------
--- 
From: McDermid, Bryan 
Sent: 29 August 2007 11:53 
To: Suresh, Ranjith 
Cc: McDermid, Bryan; Coupar, Peter 
Subject: FW: RAZCJ3N5X - AU - Screen background white after ATM left on
Fault Display 


Hi Ranjith, 

This is the second of the three issues. Fail is as attachment and is
reproduced by: 

1. let app start 
2. enter SV 
3. Transfer to front 
4. Show fault display (option 26) 
5. Leave on this screen for a number of hours - occurs readily overnight,
therefore < 15hrs 

Seen on two Australian builds: both 3.1.1 and 4.2.1 with a commonality of
Solidcore as well - Trish has full details 3 emails down. Seen on both Pele2 
and PIVAT cores - I have reproduced on a P86 with Pele2. 

This does not appear to hang the ATM for me, but think Trish may have seen
this. I have the fail on the ATM at the moment and would appreciate if you
would take a look at this ASAP, please? The ATM needs to be freed up for
other Oz issues. 

Thanks 

Bryan



Summary:
Include ActiveXFS Controls 2.08.01 in ANDC 3.01.02 Build(s)

Description:
RFC raised to ensure the latest version of ActiveXFS controls is included in the ANDC 3.01.02 deliveries.



Summary:
TAR 359947 - Hang during deposit, need to press cancel key

Description:
The problem is not easy to re-create. 
The only scenario that is confirmed is: 
IF it happens, it is always the first transaction after reboot. 
BUT it does not always hang after every reboot. 

So if we encounter the hang -> we reboot the machine -> the first
transaction after the reboot may be ok. 
And in production environment, we seldom reboot the machine, so this issue
only happens intermittently in production. 

We do not have any specific method to re-create the problem. 
We basically trying luck by restart AANDC, try deposit. 
If it does not happen, repeat the process (restart AANDC -> Deposit). 

The "hang" occurs here and the user needs to press cancel to proceed. 

[10/05/07 09:51:23] MyCustL.. 09:51:23.202 GBNA_Inserted 
[10/05/07 09:51:23] MyCustL.. 09:51:23.202 stop fdk's mei and beep is
called 
[10/05/07 09:51:23] MyCustL.. 09:51:23.202 stop fdk's mei and beep is
completed 
[10/05/07 09:51:23] MyCustL.. 09:51:23.217 Processing Notes screen is
called 
[10/05/07 09:51:23] MyCustL.. 09:51:23.217 Processing Notes screen
completed 
[10/05/07 09:51:23] MyCustL.. 09:51:23.217 Turn BNA MEI/BEEP Off 
<wid>53m2s1</wid> 
[10/05/07 09:51:23] MyCustL.. 09:51:23.217 Stop FDK Keys Caller 
<wid>55m2s1</wid> 
[10/05/07 09:53:08] MyCustL.. 09:53:08.748 Processing Screen is being shown 
<wid>122n5304dc128</wid> 

Logs and customer project has been provided already. A Ghost image was
downloaded in Hyderabad to recreate.



Summary:
Wincor -Allow loading of .dof printer binary files.

Description:
.dof files are used to load character sets in Greece and other countries to TP06 / ND9C matrix printers.  ANDC 3.2 may already have this ability through the bvar keyword in the vendor conversion registry together with the esc G sequence. Some development may be required to create a suitable escape sequence for resrvd.def so that the binary file is loaded during printer initialisation.
The issue came up as Greece ps used a script to load the .dof at start of day but this failed where the printer was fatal - and could not be reloaded with the character sets afterwards.



Summary:
TAR 357442: AVI"s do not display corectly when called separately in certain states

Description:
AVI files display correctly when screens are called within an idle loop in the Card Read state, however when the same screens are called in other
states the AVI's do not play, only the AVI background is displayed.   States 
tested were the Amount Entry and Transaction Request State.

The same AVI files were tested on a 03.01.01 system in the same manner as above and played correctly in all states.




Summary:
TAR 338850 - AA-NDC: Enhanced config download option 77 resets registry even if not sent

Description:
Cardless transaction paramters are defined by registry settings as defined
in the AA-NDC Developers guide. 

The key location is 

HKLM\SOFTWARE\NCR\Advance NDC\Extensions\Cardless Transactions 

One parameter is the next state value. 

This value can also be set by using option 77 in the enhanced configuration
parameters message. 

The customer has set the registry set at install time to a specific value,
to avoid host changes. However when any enhanced configuration parameter
message is received where option 77 is not included, the registry value is
reset to the last DOWNLOADED value, or the default of 0 if not previously
downloaded. This overwrites the customer defined value. 

The request is to have either the registry value initially set to become the 
default value, or for the enhanced configuration message processing not to
modify the option 77 registry setting if not included in the message. 

The simplest option would be to read the registry value at start up and put
this into the default store for this option.




Summary:
Printer configuration info missing from the Dev guide & MV Support Ref. Man

Description:
See attachment.



Summary:
Include CIC 01.01.00 in ANDC 03.01.02

Description:
Include the released version of CIC 01.01.00 into 03.01.02 Service Pack



Summary:
Cash Out - Init BNA function fails with Cash Out Error

Description:
Init BNA function fails on a GBRU showing Cash Out Error screen and it succeeds only when it is performed after CLR BNA. The reason is that the BNA object is used in Init BNA prior to opening a session.



Summary:
TAR 358873 - 8 second delay in opening shutter on BNA2

Description:
The processing during the BNA enable function within NDC performs a number of status requests. This causes a delay of c.3 seconds in the time taken between requesting a deposit and permitting notes to be entered. This causes an overall effect whereby the time taken to enable the BNA may be in excess of 5 seconds from the customer point of view. 

This request is to review the status processing so that the time may be reduced.



Summary:
TAR 358999 - AA-NDC fails to check and report Notes deposited after notes refused

Description:
As per debug logs provided to Mike Spafford, if notes are inserted at the
BNA and refused without validation, the note counts are not updated when the 
cusotmer subsequently re-inserts the notes. 

The scenario will typically occur if a bundle of notes are inserted into a
BNA2 module in such a way that they cannot be separated for validation. This 
may happen in one of two ways:- 

1. If the notes are spread out so that there is an excessive distance
between the leading edge of the first note and the trailing edge of the last 
note to be entered. This could happen if the customer tries to enter notes
with an overlap such that the start of the second note is more than half a
note length after the first note. 
2. If so many notes are entered that the bundle is too thick for the rollers 
to be able to process the notes individually. 

In either of these situations, the notes will be returned to the customer.
At this stage, AA-NDC check for notes being taken and finds that there are
no notes in the module. If he re-inserts immediately after withdrawing the
notes, the notes will be accepted by the firmware, the driver will correctly 
report that notes have been processed however AA-NDC bypasses the count
processing because it performed a check on the origina insertion. This means 
that the notes remain in the escrow and are not counted. 




Summary:
TAR 356078 -  Language Select from Card State "V" does not use current PLNDX value

Description:
The host sends a modified TK2 data in buffer 'L' of the
   transaction reply message with one of the TK2 data characters set to the
   cardholder's language preference. They then go to a Language Select from
   Card 'V' state to set up the language code and screen group to use for
   screen display and the Language Switch 'S' state for the remainder of the
   transaction.
   
   This functionality has been shown to function with the standard NDC+
   product, with the language offset being updated from the "current" track 2
   buffer each time the Language Select from Card State is run.
   
   AA-NDC appears to update CDI store 2073 "Language Code" only after a card is 
   read in the card read state.  The data does not change after receipt of a
   transaction reply with updated track data has been received and a V-state
   has been run. The updated track data is used in subsequent transaction
   requests though.




Summary:
TAR 337986 Reserved screens for audio incorrect in resrvd.defV

Description:
pLEASE REFER TO STAR



Summary:
TAR 337986 Reserved screens for audio incorrect in resrvd.defV

Description:
pLEASE REFER TO STAR



Summary:
TAR 358583: Process CPM Transaction reply without fields ba1 and ba2 is rejected (A02)

Description:
Customer implementing AA-NDC 03.02.00 with XFS 04.05.00 and CPM 4. 

A transaction reply which has been functioning on a 03.01.01 system no
longer functions with 03.02.00. The transaction reply is rejected with
specific command reject A02. The customisationlayer receives the message
but does not pass it to the function handler. This implies a change in the 
functionality of the transaction request state worker between releases,
which causes a host impact. 

Message used is as follows (some data removed for privacy) 

[08/28/07 12:44:51] [4[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]135[Unicode-x1C][Unicode-x1C]0001:014[Unicode-x1C]601----------CHEQUE
DEPOSIT---------- 

CARD NUMBER: 

ACCT NUMBER: 
[Unicode-x1D]2[Unicode-x1B](> Cheque Deposit ............ 

[Unicode-x1B](1DATE: 08/28/2007 TIME: 12:45:43 

ACCT #: 
CARD #: 
TERMINAL ID: 00000008 

SUCCESSFUL CHEQUE DEPOSITED 
MICR: 
] 

Reject response is : 
[08/28/07 12:44:51] [22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]C[Unicode-x1C]A02] 


On a 03.01.01 system response in debug is : 

applica.. 11:32:17.890 Message Handler - new message received:
[4[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]135[Unicode-x1C][Unicode-x1C]0006:014[Unicode-x1C]701----------CHEQUE DEPOSIT---------- 

CARD NUMBER: 

ACCT NUMBER: 
[Unicode-x1D]2[Unicode-x1B](> CHEQUE DEPOSIT .. 

[Unicode-x1B](1DATE: 08/29/2007 TIME: 11:33:13 

ACCT #: 
CARD #: 
TERMINAL ID: 00000008 

SUCCESSFUL CHEQUE DEPOSITED 
MICR: 
] 
<wid>1n87dc7</wid> 

... 

customi.. 11:32:17.968 Check Device - CPM Fitness = 0 
<wid>4a312s7</wid> 

customi.. 11:32:17.984 5A321S7 Device Healthy worker 
applica.. 11:32:18.000 String [] 
customi.. 11:32:18.015 2a406s7 Endorse & Stamp Activated 



No specific reason is listed in debuglog for the rejection. 

Testing has shown that the message will be accepted if optional fields ba1
and ba2 are included in the transaction reply message, together with their
proceeding field separator. There is nothing to specify that these fields
are now mandatory for a cheque transaction.




Summary:
Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
When TAR fix supplied for TAR 338745, updated ssdsndccust.dll, is applied to 
a 02.06.06 system running on PELE 2 hardware, with graphics driver 3196 (the 
driver shipped with XFS) the first MPEG in a two mpeg idle sequence is not
displayed correctly. The initial frame is displayed and then the screen
changes to a blue screen for the duration of the MPEG file. The MPEG file
does play as the audio can be heard, and moving another non full screen
window over the in-focus applicationcore window does display a portion of
the MPEG as the smaller window is moved. 

This issue only occurred when the updated SSDSNDCCUST.DLL file was
installed. Replacing with the previous file, the issue does not occur. 

If the display hardware acceleration is reduced then the first mpeg does
display correctly, but there are then unacceptable screen flashes when
changing between the two idle screens. 

These issues are similar to previous issues seen when using AA-NDC in
conjunction with APTRA Promote, and which are still outstanding under TAR
294761. Note these issues have been recreated on systems without Promote. 

Details have been passed on to development (RS and SG) of the relevant
screen definitions and customer graphic files.




Summary:
ISO3 Pinblock contains incorrect PAD characters

Description:
Customer implementing ISO Format 3 PIN block has reported that the PIN block 
is incorrectly formed. The PAD characters used in the PIN block should be
random in the range 10 -15 (A-F) as described in the reference manual. 
Testing with both AA-NDC 02.06.06 and 03.00.04 has shown that the PIN block
pad characters are random, but are not restricted to the 10 -15 range. 
Testing with NDC+ did show the correct format of PIN block. 




Summary:
Include GIF Licence key in product

Description:
Include GIF Licence key in product.
Previously access to GIF support was via licence key which was shipped via separate PID - this is no longer required.  This request is to include the licence key information in the product, thus automatically enabling it for customers.  See attachement for more details.



Summary:
Problems with mpegs on idle loop

Description:
During idle loop with mpeg - plays ok on first loop only, thereafter, the
last frame is displayed iimmediately before the mpeg is played each
subsequent time. 

I have demonstrated this to Andrew K on AA-NDC 2.6.6 

Problem reported on 3.1.0 but reproduced on 2.66 and 3.1.1 with two mpegs
split by two pcxs - original email below 




Summary:
TAR 352651:  Cassette types not present, are reported with fatal fitness after a test cash

Description:
When there are currency cassette types not present in the currency
   dispenser, the solicited response to a Send Configuration Information
   terminal command incorrectly reports these types as fatal, after a test cash 
   has been performed.
   
   Reporting "missing" cassette types as fatal results in host monitoring
   issues, and potentially unnecessary service calls.
   
   This issue was recreated in the lab as follows :
   XFS 04.02.01
   Updated CDM SP 03.06.01 (recommended hotfix)
   AA-NDC 03.01.01
   
   On a four high dispenser a type 3 and a type 4 cassette were fitted in the
   top two pick positions.   The lower two pick positions were left empty.
   
   From start up, before a test cash the result was as follows :
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000000000000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   All cassette types are reported with "good" fitness
   
   After performing the test cash 
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000004400000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   The two missing cassette types are now reported as being fatal.
   
   Debuglog details and XFStrace from testing have been forwarded to Ranjith
   Suresh.
   
   TAR raised at priority 2 due to customer timescales, original deployment was 
   planned for end of May, but has slipped to first week in June.




Summary:
TAR 347177 - AA-NDC key change messaage

Description:
The AA-NDC manual chapter 10 - Encryption Key change <fs> directly after
field g states it is optional. Infact it is not optional as with the <fs> is 
place for messages as below the messages are not accepted. 

With the <fs> removed AA-NDC functions correctly. 

Example messages 

3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4F[Unicode-x1C] 
3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4G[Unicode-x1C] 
3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4K[Unicode-x1C] 

NDC+ plus allows you to send the messages with the <fs> in place. 

The TAR has been raised for AA-NDC to mimic NDC+ as customer doesn't believe 
they should have to change their host functionality because AA-NDC should
work as per NDC+ functionality.




Summary:
TAR 346639 - Local PIN verification with PEKEY fails in 3.x in double length key mode

Description:
Local PIN verification using the PEKEY, does not function in AA-NDC 03.xx,
when using double length key mode with XOR. 

A FIT which specifies the PEKEY is loaded, and on completion of PIN entry,
the PIN entry state B, exits out the Cancel Next State, when it was expected 
to prompt for an incorrect PIN. 
The same sequence works when using Single Length encryption key mode. 

The publication description is not explicit, as to mixing key lengths,
however the customer (US PS) has reported, and it has been confirmed in lab
testing by FGSC, that this functionality does work with AA-NDC 02.06.xx
when using double length key mode with XOR. 

US PS expectation is that a fix will be made available for this for
multivendor solution. 

Appropriate debuglog, ulistening traces, and xfstraces are available from
FGSC if required. 


To recreate the issue use the following FIT table in conjunction with a
stateflow which uses the PIN Entry state. 

30[Unicode-x1C]0[Unicode-x1C]0[Unicode-x1C]15[Unicode-x1C]0000002552552552552550010000060040150000161432552550010350691031370
01035069000000000000000000000000000000000000[Unicode-x1C]00100025525525525525500100000600
00000000000002552550000000000000000000000000000000000000000000000000000000000
00 

Ensure that a Master key is loaded 
Enter any card and any PIN 
In single length key mode the PIN entry state should remain current and the
screen prompt for key re-entry due to an incorrect PIN should be displayed. 
In double length mode, the PIN entry state will exit out the cancel next
state. 

The application sends the PIN SP a WFS_CMD_PIN_IMPORT_KEY command, which is
responded to by a WFS_ERR_PIN_USEVIOLATION error. This error appears to be 
due to the PIN SP not supporting the mix of encryption key lengths. 



Summary:
TAR 343122 - Customer C-Exits no longer working with AANDCIA.exe

Description:
Customer C-Exits no longer working with AA-NDC 03.01.01. However, the same
C-Exits were working with AA-NDC 03.01.00. 

Symptom is that WFSStartup is failing with -1 (already started) 

<OOXFS> applicationcore 30/01/2007 07:47:02.843 - WFSStartUp() =
0</OOXFS> 
<OOXFS> applicationcore 30/01/2007 07:47:03.296 - WFSCleanUp()=0</OOXFS> 
<OOXFS> applicationcore 30/01/2007 07:47:03.343 - WFSStartUp() = 0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:47:07.296 - WFSStartUp() = 0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:47:07.781 - WFSCleanUp()=0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:30.640 - WFSStartUp() = 0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:30.937 - WFSCleanUp()=0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:31.234 - WFSStartUp() = 0</OOXFS> 
<OOXFS> customisationlayer 30/01/2007 07:48:00.765 - WFSStartUp() =
0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:48:07.359 - WFSStartUp() = -1</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:48:08.125 - WFSCleanUp()=0</OOXFS>



Summary:
TAR 340924 - Track 2 IMCRW with Smart card is reported as non smart in get config

Description:
Customer running AA_NDC 03.00.03 with XFS 04.02.01 ha reported tha the
variant version returned in response to the get configuration command for an 
NCR ATM with an Track 2 IMCRW with smart card reader is "03". This should
be 08. 

FGSC have recreated in the lab, using the appropriate card reader
(445-0664128) and have seen the same result using AA-NDC 03.00.04. 

14:34:39 # 1 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]7] 
14:34:39 # 2 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10001[Unicode-x1C]0000000400000000000000[Unicode-x1C]167F000301000583000000070000010102001
07F7F01[Unicode-x1C]00041011000000010110011[Unicode-x1C]011110011011] 


14:34:41 # 3 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]76] 
14:34:42 # 4 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10001[Unicode-x1C]00000004000000000000000000000000000000[Unicode-x1C]167F00030100058300000
007000001010200107F7F0100000000010000000000000000000000[Unicode-x1C]000410110000000101100
11000[Unicode-x1C]011110011011] 

Incorrect reporting means host cannot tell that smart card functionality is
available.



Summary:
TAR 338891 - Continuous fatal unsolics sent to host when DASH reader is fatal in idle

Description:
See STAR,

This fix also covers TAR 339349 - send config info returns card reader good, when its fatal due to comms error





Summary:
TAR 338891 - Continuous fatal unsolics sent to host when DASH reader is fatal in idle

Description:
See STAR,

This fix also covers TAR 339349 - send config info returns card reader good, when its fatal due to comms error





Summary:
lpszExtra changed for USB PIN

Description:
lpszExtra changed for USB PIN.
Just to give you a heads up it looks like the lpszExtra has changed for XFS 4.4 which will cause problems identifying the variant of the encryptor, this will cause a few problems for mEncryptorResourceID::GetVariant() and detecting if we're on NCR or not.

<P>
	<N>lpCaps->lpszExtra[0]</N>
	<PTR>73895374</PTR>
	<STR>NUMDEVICES=1</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[1]</N>
	<PTR>73895387</PTR>
	<STR>DEVICE1=UID=136,DEVNAME=KEYB-01-USBEPP,DEVVAR=35</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[2]</N>		<-- Now not the first field
	<PTR>73895436</PTR>
	<STR>Vendor=NCR</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[3]</N>
	<PTR>73895447</PTR>
	<STR>Encryptor=EPP-USB</STR>		<-- New type - not sure how you tell the defference between EPP B and E USB
</P>
<P>
	<N>lpCaps->lpszExtra[4]</N>
	<PTR>73895465</PTR>
	<STR>FirmwareVersion=DAPI118</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[5]</N>
	<PTR>73895489</PTR>
	<STR>AUTOBEEP=0</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[6]</N>
	<PTR>73895500</PTR>
	<STR>REMOTE_KEY_SCHEME=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[7]</N>
	<PTR>73895529</PTR>
	<STR>RSA_SIGN_ALGORITHM=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[8]</N>
	<PTR>73895559</PTR>
	<STR>RSA_CRYPT_ALGORITHM=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[9]</N>
	<PTR>73895590</PTR>
	<STR>SIG




Summary:
TAR 347369 - Envelope deposit hangs if tampering occurs as Timeout expires

Description:
As discussed, if an envelope deposit fails due to tampering just before
Timer 4 expires, the deposit will hang with the Beep active until the
terminal is rebooted. 

From the PD trace supplied, it is clear that AA-NDC is notified of the
tampering and verifies that the depository is in a Suspend condition (this
is seen in the OOXFS logs), but the deposit workgroup never appears to
cancel at the customisation layer and therefore the Beep remains active.




Summary:
TAR 356078 -  Language Select from Card State "V" does not use current PLNDX value

Description:
The host sends a modified TK2 data in buffer 'L' of the
   transaction reply message with one of the TK2 data characters set to the
   cardholder's language preference. They then go to a Language Select from
   Card 'V' state to set up the language code and screen group to use for
   screen display and the Language Switch 'S' state for the remainder of the
   transaction.
   
   This functionality has been shown to function with the standard NDC+
   product, with the language offset being updated from the "current" track 2
   buffer each time the Language Select from Card State is run.
   
   AA-NDC appears to update CDI store 2073 "Language Code" only after a card is 
   read in the card read state.  The data does not change after receipt of a
   transaction reply with updated track data has been received and a V-state
   has been run. The updated track data is used in subsequent transaction
   requests though.




Summary:
TAR 355894 - Alarms with status unsolic message always sent as if in Supervisor

Description:
As described in emails below and shown to EP: Issue not seen on standard 302 
or 303 but seen on 302 with TAR fixes 320245 - supported on PKO 

Hi Lukasz, 

I have set up a system with 'alarms with status' and have confirmed what you 
see with your build. I have noted however that both AA-NDC 03.00.02 and
03.00.03 behave correctly. I cannot get the TI to fail unless alarms with
status is present. 

When I boot up the PKO build and enhanced alarms on (in alarm state), it
will automatically go to the 003 screen despite not being in SV mode on the
EOP - to clear this I enter SV via the switch and exit with '9'. This allows 
a download and will GIS. If I go OOS it will not allow me to GIS again until 
I repeat the above process (SV switch 9 exit). 

This is looking like a problem with cumulative TAR fix 320245, but I have a
question: 

Is there any other Customisations in this area that you may have other than
this? 
Particularly in this area: The supervisor byte is controlled by the CDI
store CurrentMode (Store ID 1250) being set to 3 (SUPERVISOR). If the CDI
store is 3 then the byte is one otherwise the byte should be 0. 

I am just about to raise the TAR on this and will get back to you. 

I take it there are no plans to move the application forward in Poland in
the near future? 

Best Regards 

Bryan 

From: Kazior, Zbigniew 
Sent: 18 June 2007 18:18 
To: Auto-EMail, FGSC 
Cc: Cipollone, Stefano 
Subject: PKO: AANDC 3.0.2 & TI Unsolicited Message & Supervisor Mode
Switch status wrongly reported 

Attachments: bledy alarmow.zip 
01 - Employee name: Zbigniew Kazior 
05 - Country: Poland 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: +48 691 480 108 
20 - Customer Name: CITIBANK 
25 - Priority: Priority 3 
30 - Products Affected: All 
35 - Platform OS: XP 
40 - Application: AANDC 3.0.2 / XFS 4.2.1 / EMV 2.0.1 / XP 
45 - Other Software: cumulative ServicePack T320245 
50 - Environment: Live 
55 - Frequency: seldom 
60 - Installed: 218 
65 - Affected: 100% 

Team, 
We have found another issue in AANDC related to TI Unsolicited message &
Supervisor mode switch reporting: 
Extract from documentation: 
If byte 1 = ?1?, TI sensor change, or ?3?, Alarm state change, bytes 2-13
give details of the 
state of the following sensors: 
?0? Supervisor mode inactive 
?1? Supervisor mode active 
Extract from Logs: 
IN service mode: 
[05/21/07 15:18:08] 
[05/21/07 15:18:08] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]B0000] 
[05/21/07 15:18:53] 
[05/21/07 15:18:53] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
{ZK: ATM is Normal but status of byte 2 is reported as SUPERVISOR - 
should has been reported as "0" - Sup Mode Inactive} 

[05/21/07 15:18:55] 
[05/21/07 15:18:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:19:01] 
[05/21/07 15:19:01] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3111001011111] 
[05/21/07 15:19:03] 
[05/21/07 15:19:03] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3101001011111] 
[05/21/07 15:21:54] 
Supervisor mode entry: 
[05/21/07 15:21:54] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21] 
[05/21/07 15:21:55] 
[05/21/07 15:21:55] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R004] 
[05/21/07 15:22:00] 
[05/21/07 15:22:00] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]R009] 
[05/21/07 15:22:15] 
Supervisor mode exit: 
[05/21/07 15:22:15] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] 
[05/21/07 15:22:15] 
[05/21/07 15:22:15] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:16] 
[05/21/07 15:22:16] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:27] 
[05/21/07 15:22:27] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P3100001011111] 
[05/21/07 15:22:48] 
[05/21/07 15:22:48] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[05/21/07 15:22:55] 
[05/21/07 15:22:55] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 



Vanilla AANDC has the same issue: 
I attach logs: 

Issue is not critical but has been officially reported. 

Best Regards 

Zbigniew Kazior 
Senior Consultant 




Summary:
TAR 348240 - No journal unsolic status msg seen with when not present and no EJ

Description:
Previously with NDC+ when a transaction reply including journal information
was sent atms without a journal physically present and with no EJ set would
respond accordingly... 

***** MESSAGE OUT ***** 
4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]003NDC DEMO 
NEXT STATE 
AND PRINT 


************************ 
...... MESSAGE IN ...... 
12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H2[Unicode-x1C]0[Unicode-x1C]06 

within aa-ndc however no unsolic status information is returned. It's
believe that as a result of tar 174968 this functionality was removed.
Should this response be configurable..? 



Summary:
TAR 347746 - ESC PD screen control sequence which functions with NDC+ does not work

Description:
EFUNDS network in US, migrating from NDC+ to AA-NDC have multiple downloads
which use the <ESC>PD'filename'<ESC>\ control sequence to display pictures
full screen. The customer has indicated that they are not willing to
change the control codes used in their downloads. 

This command is a valid "VGM/Translator" command which could be used with
NDC+. The NDC documentation derives from the screen control codes from the
S4i platform services VGA/VGM/Translator, and the NDC+ documentation does
reference these publications. 

This specific command does not function with AA-NDC. 

The issue for this specific control code, has been raised as a TAR, rather
than an RFC, as the AA-NDC General description states under the differences, 
that AA-NDC "Supports all existing NDC+ customisation data".




Summary:
TAR 347736 - AA-NDC - DISP SPPLY option issues Return_Cassette_Status command six times

Description:
Country: Australia 
Customer Name: Cuscal 
Product Types: Cash Handler EP62 
Platform and OS: XP SP2 XFS 4.2.1 
Application: AA-NDC 2.6.6 
Other Software: NDLC RSA Scer 

Customer reported a problem where Dispense commands sent from AA-NDC take a
long time to complete: 
i.e. 
DISP SPPLY - 35 seconds 
DISP CASH - 4 seconds 

Further investigation by FGSC showed that on an EP62 (Hawk Spray Dispenser), 
the above commands took along time to complete. 
In particular the DISP SPPLY command when executed from Supervisor took 30
seconds to complete. 

The DISP_SPPLY function issues a Return_Cassette_Status Command (Command 4)
to the dispenser, and this command is actually sent 6 times (one for each
cassette (i.e. 4 cassettes), and twice for purge bin to check for overfill
and low)). The timings of the command and replies are as follows: 
Command Response Delta 
1) 14:52:14.935 14:52:19.983 5.048 
2) 14:52:20.033 14:52:25.521 5.488 
3) 14:52:25.581 14:52:31.099 5.518 
4) 14:52:31.149 14:52:36.667 5.518 
5) 14:52:36.727 14:52:42.245 5.518 
6) 14:52:42.305 14:52:47.783 5.478 

The fact that this command is being sent 6 times is causing the overall
delay in the response to the execution of the DISP_SPPLY function to be
delayed upto 30 seconds. 

Further investigation showed that previous Tars 242134 and 250863 introduced 
fixes to reduce the amount of times that this command is sent to the
dispenser. 
However it appears that the same change has not been applied to the
DISP_SPPLY function, where it would send the command only twice - once for
the cassettes and the second to query the purge bin. 
This Tar is to implement this change to the DISP_SPPLY function, and also to 
check if the same is occurring for the DISP_CASH function. 



Summary:
no notification where mode switch is normal & native Diagnostis fails to start

Description:
ANDC 3.2 seen on Opteva as has rocker switch Diagnostis is not entered when mode switch is normal - should be an ack/err prompt advising operator.



Summary:
TAR 357450 - AA-NDC - No solicited error message sent when envelope depository fatal

Description:
No solicited error messages are sent to the host when the envelope
depository is fatal: 


The logs show a jam is created (T2 Sensor blocked)on combined P86
Dispenser\Depository - an envelope deposit transaction is requested - the
envelope dispense fails and an unsolicited is sent - the host then sends a
deposit and print. The shutter is not opened and no envelope is deposited
and AA-NDC replies with a Ready 9 only. There is no solicited error messages 
sent for the depository 

Debug: 
customi.. 16:15:58.495 DEPOSIT - ENVELOPE JAM 
<wid>2l15y4626</wid> 

customi.. 16:15:59.086
********************************************************** 
CALLING CLOSE STATE EXIT 
********************************************************** 
<wid>2s1914g220</wid> 

Messages In/Out 
16:15:52 # 75 
[11[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C]BB1D759E[Unicode-x1C]1?[Unicode-x1C];5313585511211006=07101011695434900000?[Unicode-x1C][Unicode-x1C]GA 
[Unicode-x1C]00000000[Unicode-x1C]9?03?49=265;40?7[Unicode-x1C]00006500[Unicode-x1C][Unicode-x1C][Unicode-x1C]20020100000000000000000000[Unicode-x1C]8FA7AB59] 

16:15:52 # 76 [4[Unicode-x1C]000003456[Unicode-x1C]BB1D759E[Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C]00214[Unicode-x1C]?02 

531358 006 $65.00 3L86 
DEPOSITED TO CHEQUE ACCT. 
316657 649 06/08/07 16:16 

PLACE THIS CARD IN ENVELOPE [Unicode-x1C]C26FA353] 

16:15:57 # 77 [12[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C]\1[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]2] 

16:15:57 # 78 [22[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C][Unicode-x1C]9] 

16:15:57 # 79 [4[Unicode-x1C]000123456[Unicode-x1C]BB1D759E[Unicode-x1C]730[Unicode-x1C]00000000[Unicode-x1C]00211055[Unicode-x1C]?02 

531358 006 $65.00 3L86 
DEPOSITED TO CHEQUE ACCT. 
316657 649 06/08/07 16:16 

OPENING BALANCE 99945.23+ 

CASH AMOUNT 65.00+ 
CHEQUE AMOUNT 0.00+ 
AMOUNT DEPOSITED 65.00+ 

CLOSING BALANCE 100010.23+ 

THE CLOSING BALANCE IS SUBJECT TO 
DEPOSIT VERIFICATION. [Unicode-x1C]D82F9BD8] 

16:15:58 # 80 [22[Unicode-x1C]000123456[Unicode-x1C][Unicode-x1C][Unicode-x1C]9] 


Euan P aware and has identified likely reason. 




Summary:
Move MV ADD CASH Menu so that ADD CASH is same on mixed network.

Description:
MV ADD CASH option shows a new menu for setting up casettes on Wincor. Would be better if the normal add cash menu was shown so that replenishment instructions are the same on a mixed network. MV ADD CASH can be moved to configure menu to set up the casettes for the first time - there after normal ADD CASH is all that is required as long as the physical cassettes are configured when they  arrive at the ATM. will require IP updates.



from Email greece PS 20/3/07
4. The Replenishment ADD CASH Menu created some concern with the inclusion of cassette configuration options in there (as I had predicted it would). For the moment I only did some "cosmetic" changes in RESRVD to make the supervisor replenishment functions more streamlined in appearance (as in the attached "resrvd.up2"), but for the next product release take into account the following recommendation: Take completely out of the Replenish ADD CASH Menu functions 1, 4, 6, & 7 and place them in the Configure Menu as a sub-menu that will allow configuration of the cash units. In the Replenish ADD CASH sub-menu renumber the available functions as 0, 5, 8 & 10 so that they match the function numbers that are available outside the sub-menu (except for the '0'). In this way the procedures of adding cash will be much closer to the ones on an NCR ATM. You have to consider that this is of great help to a bank that has NCR and WNI ATMs with our NDC since they want to be talking about same function numbers for same procedures. I hope the argument is understood. [Lawson, Richard]  OK thanks for this -  the reason the add cash menu is like this is that these are the sequential steps you have to take to completely set up the cassettes  - However I take your point and it may be better to move this menu to configure only to be used for the situation where the cassettes need set up.  After the cassettes are set up the normal ADD CASH/STD CASH is sufficient.




Summary:
On MV system where counts are printed dont print cassette mapping  config.

Description:
where cash counts are printed the cassette mapping config is printed. This was removed locally by greece for the millenium project  to match NCR systems. move this functionality to display/print configuration.






Summary:
Load MAC message always fails.

Description:
Seen in United Arab Emirates with ANDC 3.0.3 over Level 4 ATM simulator. message details in logs attached.

As a result of 319506 where the encryptor version is less than 3.02 the KVV evalworker will signal failed.
update to fix for 342300 thet tries get KVV commnd before reverting to registry.

On Wincor, Get KVV returns 4 bytes for any of the key when compared to NCR which returns only 3 bytes of data. Need to update Author work to return 3 bytes of data.



Summary:
Support for 'Normal Printing' Escape Sequence (ESC 7) & ESC 6 inverse

Description:
Require ESC '7' & esc '6' control sequence to be supported.  Found on site at ATH MV POC.




Summary:
Wincor - Application mError after SIU Set_Event

Description:
Bug in ANDC , we try to register for mode switch event where it is not supported - fix in ooxfs.dll
Seen in millenium greece and fixed there. Only occours where no mode switch is present.



Summary:
Cassette INOP status not cleared by InitBNA or before trans causes trans to fail.

Description:
Currently this was reproduced by deleting the *.bin and *.prp files then rebooting ATM. After restart, ANDC apps were started and InitBNA run. Then a transaction was attempted, which failed. Using WOSATool the INOP was still set. This needs further investigation to see if it is a real issue or not. What was noticed is that the INOP status could be cleared by Start/EndExchange if previous cassette structure is passed in to EndExchange rather than NULL. So this issue could have been introduced when we put the EndExchange NULL fix in.



Summary:
MANIP status not cleared by InitBNA

Description:
When cassettes are replaced they report MANIP status until cleared using Start/EndExchange. However, using EndExchange with param NULL which we now do in InitBNA does not clear the MANIP status. There is a reg flag which can be used to SuppressManip status reporting. ANDC3.2 uses this already for GBRU CashOut. Latest CIC will have an issue on ANDC3.1.1 unless this issue is resolved.



Summary:
Add info to release bulletin about MV engagements

Description:
Stefano asked that the following info be added to our 3.x release bulletins:
"AANDC 3.x is available under controlled release for use on other vendors hardware.  Contact the Product Manager to discuss all multi-vendor engagement opportunities."



Summary:
Various pieces of incorrect information in Reference Manual - Cash Accept State

Description:
The following issues have been identified in the information about the Cash Accept State :-

Issue #1

Table Note 33 states - If the maximum number of notes which can be held at the escrow is reached, the Escrow Full Screen table entry will be
displayed, and the Escrow Full Key Mask table entry will be used.

The correct text should read "If the maximum number of notes which can be held at the escrow is reached, the Escrow Full Screen table entry will be
displayed and the option to add more notes is disabled" - (Note, there is no Escrow Full key mask table !!)

Issue #2

Note 34 is referenced from the Device Error Next State, but then refers to timeouts and the Cancel Next State.

Note 34 relates to the Timeout Next State, and "Cancel Next State" should be replaced by "Timeout Next State"

Issue #3

For note 35, the information from "If notes are at the escrow...." onwards is not relevant to note 35 and should be deleted.



Summary:
Load MAC message always fails.

Description:
Seen in United Arab Emirates with ANDC 3.0.3 over Level 4 ATM simulator. message details in logs attached.

As a result of 319506 where the encryptor version is less than 3.02 the KVV evalworker will signal failed.
update to fix for 342300 thet tries get KVV commnd before reverting to registry.



Summary:
TAR 357973 - Fix broken TAR 333655 + journal delta cash counts for Diagnostics operations

Description:
TAR 333655 (AA-NDC cash counts are incorrectly updated after a diagnostic
dispense) was addressed in AANDC 3.1.1 but has been broken in AANDC 3.2.0. 
In addition to TAR 333655, AANDC should also journal Diagnostics dispense
counts as per NDC+. This involves journalling the delta counts if the
dispensed or rejected counts change while in Diagnostics via a Diagnostics
Test Dispense or Diagnostics Test Cash. Unlike NDC+, AANDC cannot
immediately journal the delta in counts (based on XFS standard) but can
journal after exiting Diagnostics and returning to Supervisor - in the case
of a power fail, AANDC can journal the change in Diagnostics counts at Start 
of Day (this is not supported by NDC+). 
Note:  This GR1T/TAR relates to note counts, not coin counts.



Summary:
TAR 357470 Unexpected \ character added when using the Print Graphics control code

Description:
When testing the Print Graphics control code in a transaction reply it was
seen that that an unexpected \ character was being added to the data sent to 
the printer, causing it not to print the graphic as expected. 

ESC G <filename> ESC \ control sequence. 

The Reference Manual currently does not define the specification for the
filename. It does still refer the user to the S4i documentation for the
file format, but not the file name : 

"The format for the Epson graphics file is described in the Programmer?s
Manual for the 40 Column Printer (B006-4612)." 

This is identical to NDC+. 

The S4i publication describes the <filename> as : 

"The format for the filename is \path\name.ext." 

During testing of AA-NDC, 03.01.01, and 03.02.00, and presumably earlier
03.xx versions, a "\" is added to the beginning of the filename data which
is included from the host, which means that if the above description is
followed, then two backslashes are passed to the printer which then does not 
print the file as expected. 

e.g. 

12:04:42 # 33 [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]002NDC DEMO 

NEXT STATE 
AND PRINT 

[Unicode-x1B]G\40COLFIL\9.IMG[Unicode-x1B]\ ] 

customisationlayer 08/08/2007 12:04:42.498
ExecuteAsync(104(WFS_CMD_PTR_RAW_DATA),,605,0)=0 
customisationlayer 08/08/2007 12:04:42.518 
PRINTER DATA 
0000 1b 5b 37 70 1b 5b 33 32 71 1b 5b 37 70 1b 5b 33 .[7p.[32q.[7p.[3 
0010 32 71 4e 44 43 20 44 45 4d 4f 0d 0d 4e 45 58 54 2qNDC DEMO..NEXT 
0020 20 53 54 41 54 45 0d 41 4e 44 20 50 52 49 4e 54 STATE.AND PRINT 
0030 0d 0d 1b 47 5c 5c 34 30 43 4f 4c 46 49 4c 5c 39 ...G\\40COLFIL\9 
0040 2e 49 4d 47 1b 5c 0c 00 .IMG.\.. 


This should either be addressed in the reference manual description, or the
product changed to not add an unexpected \ character. However note that the 
ESC G control code sequence has been supported since NDC+, and NDC+ would
have functioned as per the 40 Col Programmers Manual, therefore a change to
the documentation only, may result in backward compatibility issues with any 
existing host implementations. 




Summary:
TAR 357529:  Receipts not being cut when trans reply includes additional group separators

Description:
Customer has upgraded to AA-NDC 03.02.00 from AA-NDC 03.01.01 and are encountering issues with receipts not being cut.

Specifically, when an additional group separator is used in the transaction reply, then the cut command does not seem to happen.

Their transaction reply examples are as follows :-
 
17:42:28  # 33    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x1D]3HOLA
[Unicode-x0C]]
17:43:13  # 36    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x1D]2HOLA
[Unicode-x0C]]
17:43:46  # 39    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x0C]]
17:44:06  # 42    [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]110[Unicode-x1C][Unicode-x1C]02115100370[Unicode-x0C][Unicode-x0F]AJSU SALDO ES:[Unicode-x0F]DAYOUR BALANCE IS:   
    $894.25[Unicode-x0F]G@[Unicode-x0E]400[Unicode-x1C]0034658288800000224
40123457660
[Unicode-x0C]]

- After receiving #33 Receipt was printed but not cut
- After receiving #36 Receipt was printed but not cut
- After receiving #39 Receipt was printed and cut, with the information from message 33,36 and 39
- After receiving #42 Receipt was printed and cut

The difference being that messages 39 and 42 don't have the additional Group Separators in the print data. 

*********
Consulted with Ranjith and has requested TAR be raised. Logs available if required





Summary:
TAR 357442: AVI"s do not display corectly when called separately in certain states

Description:
AVI files display correctly when screens are called within an idle loop in the Card Read state, however when the same screens are called in other
states the AVI's do not play, only the AVI background is displayed.   States 
tested were the Amount Entry and Transaction Request State.

The same AVI files were tested on a 03.01.01 system in the same manner as above and played correctly in all states.




Summary:
Different FDK layouts/position for Encryption key entry front and rear

Description:
The FDK layout on Wincor is different front and rear. Currently the same reserved screen is used on both interfaces.
Theis RFC requires a different layout for front and rear Encryption key entry Mode 1-3. This may be a dynamic layout
or the introduction of an additional resrvd screen.



Summary:
TAR 356078 -  Language Select from Card State "V" does not use current PLNDX value

Description:
The host sends a modified TK2 data in buffer 'L' of the
   transaction reply message with one of the TK2 data characters set to the
   cardholder's language preference. They then go to a Language Select from
   Card 'V' state to set up the language code and screen group to use for
   screen display and the Language Switch 'S' state for the remainder of the
   transaction.
   
   This functionality has been shown to function with the standard NDC+
   product, with the language offset being updated from the "current" track 2
   buffer each time the Language Select from Card State is run.
   
   AA-NDC appears to update CDI store 2073 "Language Code" only after a card is 
   read in the card read state.  The data does not change after receipt of a
   transaction reply with updated track data has been received and a V-state
   has been run. The updated track data is used in subsequent transaction
   requests though.




Summary:
DisplayManager: Get rid of dependency on IDL file in EXVC and NDCDisplayHook of DM

Description:
EXVC and NDCDisplayHook IDL file dependence is there. both projects should not depend on IDL file. instead it can directly point to DisplayManagerOleserver.exe for getting IIDs and interfaces.	



Summary:
Wincor - TTU FDK keys swapped

Description:
left and right columns are swapped when using the FK keys on WN TTU.  Does not seem to be a platform configuration but may be as we do not have up to date pubs. Also ABCDEF keys reported but not used.
seen in Greece and recreated in Dundee.  ABCDEF was used in Greek IT but not available in pilot.
Greece will update reserved to workaround. may need application level mapping as a permanent solution.
ANDC 3.0.4 MV (but also in 3.2)



Summary:
Wincor - key manager - unable to recover keys after reinstall

Description:
EPP v5 Platform upgraded from 41.20 to 41.40 on 1500xe.  ANDC reinstalled to 3.0.4MV
KVV obtained an shown on access menu as correct however pin block fails with usage.
keymode in registry changed from 3 to 1 no improvement.
Generally keys in the encryptor should be available for use by ANDC after software upgrade.
do not know if issue is with platform as this was also upgraded.
Re-entering keys resolved the situation.



Summary:
TAR 356612:  BNA deposit counts are reported in later transaction if initial deposit fails

Description:
Please refer to Star



Summary:
TAR 356612:  BNA deposit counts are reported in later transaction if initial deposit fails

Description:
Please refer to Star



Summary:
Memory and handlefs leak discovered when performing cash-in transactions.

Description:
During memory leak testing for Cash In transactions, two kind of leaks have been discovered:
	1.75 KB memory leak per Cash In transaction
	1 un-freed Handle per Cash In transaction




Summary:
5.9.16.2.4 test case failure. Wrong supplies reporting.

Description:
Was ok with one cassette.

Then with 2 cassettes: when one of them goes full it is not reported as such in supplies. This is with extended msg reporting on.

Also, seems to report wrong supplies when two threshold events occur in same transaction, ie one goes Full and other goes high - it reports the 1st cassette as OK, and the 2nd one as Full. Low priority due to unlikelihood of 2 threshold events in one transaction. Also, Fitness is reported correctly which is probably more important info for the host.

Fitness is reported as Fatal. If go into and out of Supervisor then it reports correct supplies info.

Low-Medium priority - supplies reporting is temperamental, but fitness seems ok, so perhaps it is enough.




Summary:
Retract count is not updating after Retract operation is performed on GBRU

Description:
GBRU Mode: 3
Issue1: 
1: Retract option is set.
2:When invalid notes are at exit throat and valid notes in escrow and INIT BNA is performed,then notes are taken to CashIn cassettes.        
3: Invalid notes are moved to Retract bin, but retract count is not updated.

Issue can be recreated with the Regression test case No: 1.2.11.2

Issue2:
1: Retract option set.
2: When notes in escrow are refunded and allowed to retract, notes get retracted, but journal log displays "RETRACT COUNTS NOT AVAILABLE".
3: But, individual Retract count is updated, but total retracted count is not updated.

Issue can be recreated with the regression test case No: 1.2.18.2



Summary:
Journalling in closesate(leave notes at escrow) show counts as zero

Description:
Journalling in closesate(leave notes at escrow) show counts as zero



Summary:
Support for 'Normal Printing' Escape Sequence (ESC 7)

Description:
Require ESC '7' control sequence to be stripped from print stream.  Found on site at ATH MV POC.



Summary:
Support for 'Normal Printing' Escape Sequence (ESC 7)

Description:
Require ESC '7' control sequence to be stripped from print stream.  Found on site at ATH MV POC.



Summary:
Timing issue, notes are taken when timeout expires, fitness is fatal, but no message is sent to host

Description:
when notes are held at exit slot while machine is trying to retract the notes and jus take the notes at the end, no message is sent to host! but fitness is fatal..



Summary:
InitBNA Fails because EndExchange Failed with Invalid Data.

Description:
The SP does not like the NoteID counts to be non-zero during an EndExchange. CIC does not need to pass any CashUnit Dictionary into EndExchange because it is not necessary to change any values. So, instead NULL can be passed in which means there are no changes to cash units. Also, suspect this is an SP issue as in the case it fails we are only passing down the same structure they have given us. But the better solution is for us pass in NULL as the only reason we do Start/End Exchange is to clear MANIP states. Issue can be seen after there have been notes retracted, and we attempt InitBNA.



Summary:
CashIn behaviour when No BNA is incorrect.

Description:
Issue has been introduced in CIC 91.01.00.14. When BNA is not attached it reports there is a BNA and does not reject BNA TReply messages from host.



Summary:
TAR 355792: AA-NDC reports successful deposit after CashInEnd reports Hardware error

Description:
As per details in debug logs in STAR, when a XFS hardware error is reported on CashInEnd, this fitness in incorrectly reset to zero and a good response is sent to the Host although no notes have been removed.




Summary:
Customisation Layer crash while encashing notes

Description:
On a BNA2 machine, GBNA.ini file (0 KB) is found under location C:\Program Files\NCR APTRA\Advance NDC\Data.
When doing a deposit transaction, after sending a transaction reply to encash notes, customisation layer escaped with a popup message saying "Input, past end of file".



Summary:
Parts Protection - Test AANDC 3.2 to ensure there is no application impact due to parts protection been introduced into XFS 4.5 

Description:
Parts Protection - Test AANDC 3.2 to ensure there is no application impact due to parts protection been introduced into XFS 4.5 
Test only excercise, another great one line requirement from Product Management.



Summary:
Remove the Application Terminator if key manager fails

Description:
Done for part protection if the keypad need authenticated at start of day and key manager run AANDC will not start and allow you to enter diagnostics to authenticate it.



Summary:
Multiple w3 messages are sent when hardware error condition is created and cleared immediately when testing the TAR 349616.

Description:
Issue is seen in the following scenario:
1: Select Deposit transaction.
2: Insert notes and while the notes are processing, open the lower rack of the GBRU device.
3: Hardware error screen displayed, followed by a w3 message is sent to host with relevant w3 message.
4: Close the rack, before H/W error screen disappears. 
Result: Mulltiple w3 messages are sent to host before close state is executed.

Issue is seen in the following Software Stack: XFS 04.05.00 + AANDC 93.02.00.66 + CIC 91.01.00.14 build.



Summary:
Notes are refunded before close state after time out.

Description:
Test 5.5.8.4.3, When the time out occurs at step 7, Notes are refunded instead of going to close state. Even though BNA fitness store 3219 is set to 4 using the CDI tool there is no effect. The notes are refunded before the close state.



Summary:
Test 5.12.1.2.22.1.4 - w6 message at startup has incorrect info

Description:
In step7, the info reported via the w6 message is not in unison with the expected result. The counts for inactive note types are reported as Spaces instead they should be reported as ~. Also the w3 message in step 9 has incorrect info.

Logs have been attached



Summary:
Customization layer crash and Pop-up screen when testing with Enhanced Confirmation Screen registry setting.

Description:
Issue is found in the following scenario:
1: Set the "EnhancedConfirmatioScreen" registry setting to 1.
2: Delete the "ConfirmationScreenGroupDigit" and "ConfirmationScreenStringforTotal" registry setting values in the following path: HKLM\Software\NCR APTRA\AdvanceNDC\BNA\
3: Select Deposit Transaction.
4: Insert notes and wait for pop-up screen to appear and followed by Customization layer crash.

Software Stack: AANDC 93.02.00.64 + XFS 04.05.00



Summary:
Sysapp returns to Supervisor on the wrong interface

Description:
The root cause is an SP issue that posts an event that should not be sent.

Recreation steps 
1) Enter Supervisor on rear
2) Enter Diagnostics
3) Exit Diagnostics and after 1 second put mode switch back to normal
4) Enter Supervisor again
5) Transfer i/f to front
6) Enter diagnostics
7) Exit diagnostics 

At this point supervisor appears on the rear



Summary:
Need to handle the USER_ERROR events in AANDC code in order to report correct diagnostics info via suspend unsols

Description:
The SPs have been updated to report USER_ERROR on suspend when the registry PostUserErrorOnSuspend is set. 

Currently we don't set this registry so a HARDWARE_ERROR is returned when the shutter is jammed open during the retract (on CDM as well as on GBRU) and on GBRU, we are not getting any event when the shutter is jammed open after taking the notes.

Setting the registry PostUserErrorOnSuspend will result in triggering the USER_ERRORs on suspend. But we don¿t handle user errors in our code. So we won't be sending correct diagnostics info via suspend unsols. 





Summary:
The Notes Remaining Printed Count after Powerfail  is incorrect for Type 2 of CDM 2 when counts are seperated

Description:
The issue is that the Notes Dispensed count is used instead of Notes Purged when calculating the counts (From Srinivas e-mail - 227n8239dc130 in 224n8239dc130 is incorrect)

Tests that show this issue - 5.7.2.5.3.2.91, 5.7.2.5.3.2.92, 5.7.2.5.3.2.93,  5.7.2.5.3.2.94 



Summary:
ECP Option EJMode should be persistent even if there is no download at startup

Description:
As part of GR1T 365585, code has been updated to clear all ECP options including EJMode when there is no download at startup. EJMode can be set in two ways - using ECP and using supervisor option so this should be persistent irrespective of the presence of the download. This needs to be mentioned clearly in the IP's



Summary:
CDM sends sync GetInfo which blocks IDC Async call during fast cash, and card is never returned

Description:
CDM sends sync GetInfo which blocks IDC Async call during fast cash, and card is never returned.  Card reader doesnt go fatal, so application starts looping



Summary:
CashIn should bypass BNA Close State processing when Fitness = -1.

Description:
This is a cleaner solution than currently as it is running some code which is unneccesary in current solution. Also, DevPartner is reporting some issue with ActiveXFS control, which may be memory leaks, so it is better to avoid using the ActiveXFS control on non-BNA transactions is it is not needed.



Summary:
Athena support required for 6625 in the list of supported classes

Description:
Request to support 6625 in the list of supported product classes.



Summary:
Wrong messge is journalled when the option 24 is reset to 0

Description:
If option 24 is set to 2 and canister is removed or inserted, then the store used for journalling is populated with the message (buffer C) sent to the host. 
If option 24 is set to 0 after that, it is journalling the message with buffer C which shouldn't happen. 

When option 24 is set to 0, it only needs to journal coin hopper removed and shouldn't journal any message.




Summary:
Old Style journal information is logged, when SetOp44 is set and Init BNA is run after notes are left at escrow in close state.

Description:
Old Style journal information is still logged, when SETop44 is set  and close state leaves the notes in escrow and INIT_BNA is performed.

Issue is seen on:
Device: BNA2
Software Stack: ANDC 03.01.01 + CIC 91.01.00.12 build.



Summary:
Supplies is not 3 (nearly full) when retract bin is nearly full.

Description:
Supplies is not 3 (nearly full) when retract bin is nearly full. Fitness Is OK, but supplies is not sent properly.



Summary:
w3 message is sent after CashUnit failed XFS Error event is generated, followed by w0 message after close state is executed.

Description:
When CashUnit is failed, a "w3" message is sent with device fitness set to fatal. But, after this a "w0" message is sent again after close state is executed which is an absurd behavior of supporting that the device is in bad state as well as in good state.
Issue is recreated in the following manner:
1: Initiate deposit transaction.
2: Insert some good notes.
3: Press Refund in confirmation screen.
4: When notes are at the transport, hold the shutter without allowing it to open.

Issue is found in the following build:
Device: BNA2
Software Stack: ANDC 93.02.00.61 + XFS 94.05.00.23.



Summary:
Ensure all objects returned from ActiveXFS are useable!

Description:
This check needs to be performed throughout CIC in all projects and wsc files. It applies to ItemNoteTypes, LastCashInStatus. There should be no areas in code that access these properties in an unprotected manner. So they should either be handled with On Error Resume Next or IsGBNAPropertyUsable before being used.



Summary:
TAR 317132:  NO ALARMS/TAMPER INDICATION MONITORING IN DIAGNOSTICS

Description:
Merge change from AANDC 3.2 into 3.0.3 for AIB



Summary:
CPM - MData not correctly reported

Description:
Here is the FS clarification from Gordon:

Hi Craig,

The CPM spec has always defined that 14 zeros should be returned in the Diagnostic Status. When option 83 was added to allow additional CPM information to be reported to the host, it was defined as modifying the Diagnostic Status field to report the actual data. 

Diagnostic Status

When option 83 is `000¿ this field will be all zeros and will be 14 bytes long. When option 83 is `001¿ this field will be variable length and contain the CPM Diagnostic Information

So by default(or when option 83 is `000¿ 14 zeros should be returned, if option 83 is `001¿ then the full mstatus and mdata for the device should be reported.


Regards,

Gordon




Summary:
Promote does not print coupons on Diebold printers

Description:
As part of the coupon printing code AANDC looks at a GRAPHICS key to determine whether to support coupon printing.
On Diebold this key is blank and hence the code decides not to allow printing.  This key should be populated 
Suspect this will be the same on Wincor as well



Summary:
Extended Journalling - Possibility of having a Card Taken Trace when a Successful card Accept has not happened

Description:
Card Taken is traced out on Card Accept errors after a Successful Eject even if a card is not present



Summary:
LastCashInStatus and NoteNumberList objects not checked for useability before using.

Description:
This is in CalculateEscrowedNotes function in Calculate Totals (233b7na1) script host.



Summary:
Remove extra journal mapping entries from registry (from GRIT RFC 349288).

Description:
The following keys should be removed because they are not used:
"T_CODE2"="CASH BIN FULL"
"T_CODE9"="UNABLE TO ENCASH"
"T_CODEA"="UNABLE TO REFUND"
"T_CODEB"="FULL-ENCASHFAIL"
"T_CODEC"="FULL-CASHJAMMED"



Summary:
GBRU Cash Out - GBRU variant should not be reported as 03

Description:
GBRU variant should not be reported as 03 if recycling is not enabled. Currently we report the varaint as 03 if option 78 is set to 1.  This is a change to previously defined NDC message spec.



Summary:
Remove AWG = 4 from BNAEnablescript host CashunitError Event

Description:
Remove AWG = 4 from BNAEnablescript host CashunitError Event since its not a completion event.



Summary:
Include RemoteSupervisor feature in America's AANDC3.0.30

Description:
Remote supervisor feature has to be incorporated into AANDC3.0.30



Summary:
ulminimum for hopper 1 is set to 0 when clear coins is done

Description:
ulminimum value is being set to 0 when clear coins function is done from supervisor.



Summary:
PS: The transaction request message has no field cf (opt 79 = 1)

Description:
PS: The transaction request message has no field cf, whixh includes the last transaction coin counts.



Summary:
PS: When device not present, wrong reject command is sent

Description:
PS: when device is not present, Instead of E02, A02 is returned.




Summary:
PS: Configuration data displays only hopper 1&2 when supervisor is in front

Description:
PS: CONFIGURATION DATA displays the number of coins entered for HOPPER 1 and HOPPER 2. Other Hoppers are not displayed.(When supervisor is in front) 




Summary:
2D barcode Reader - AANDC support of multiple scan mode

Description:
Singapore raised a requirement for the 2D Barcode reader to read more than one barcode at a time; an example being a utility bill with 2 barcodes. One with the account details and the second with the amount due. Currently planned as a SCER, for Singapore only, there is a possibility that the requirement will be seen elsewhere. An RFC has been raised on the platform to incorporate the functionality into XFS 5.0 (next release after XFS 4.5). This RFC is a reminder that AANDC changes may also be required to manage multiple scan mode.



Summary:
Card reader status continually polls 

Description:
XFS IT 28 AANDC IT 63

When jamming a card in the card reader AANDC continually polls the device for is status hanging the SST so nothing works (entering supervisor for example)

Logs attached



Summary:
GRIT 3694668 (PE Key issue) seems to have introduced problems into other areas of PIN verification

Description:
Guys,

I've gone through most of the security regression tests outstanding for this latest build (with the exception of the migration tests I plan to finish by end of today), and pretty much everything is now passing, with the exception of the following 2 tests I re-ran :-

3.4.3.3 - RDESDP2 scenario within the test caused a key load error (debug log) and an L1 (encryptor not initialised) message, but RDESDM2 was fine within the same test

3.4.3.4 - RDESDP3 scenario was same problem as RDESDP2 in previous test, but RDESDM3 was fine within the same test.

Not sure if the PEKey issue (GRIT 369468) has caused some issues, or hasn't resolved all scenarios. If Srinivas doesn't see the issue then it is Athena (UEPP2) specific. Euan mentioned that Srinivas did most of the testing for this fix so he may not have seen the problem.

This needs someone to investigate ASAP if a fix is to make it into the next build. The machine in Bay 5 is setup with everything to recreate the problem quickly.

Regards,
Peter.



Summary:
PS: Supervisor mErrors when an XML tag is present, but contains no text value in Dialup Application Copy On

Description:
Supervisor mErrors when an XML tag is present, but contains no text value in Dialup Application Copy On.

E.G.

<BIN></BIN>

It was never designed to check if the value exists, but it should not mError.  This will not happen if the xml file that is copied on is valid.



Summary:
In EJ options , Pressing 0 is changing mode from Standard to Multiple and Vice Versa.

Description:
In case of EJ BackUp Mode , When user has to change the mode he gets the screen "Press 1 to continue and 0 to Cancel". When user is pressing 0, mode is changing instead of cancelling.



Summary:
Alignment of Hopper4 counts in Display Coins is not exact

Description:
Hopper 4 dispensed, remaining and total coin counts are not aligned correctly (counts displayed are one space ahead) while displaying coin counts.
It displays as shown below:

	            COIN DISPENSER     
        
                             HOPPER 1           HOPPER 2  
         REMAINING      00100                 00100
        +DISPENSED     00000                 00000
        =TOTAL COINS 00100                 00100
       
                              HOPPER 3           HOPPER 4  
         REMAINING      00100                  00100
        +DISPENSED     00000                  00000
        =TOTAL COINS 00100                  00100
        LAST CLEARED  02/07/07   09:13




Summary:
Access violation in GetnoofHopperTypes method

Description:
There is an Access violation in Getnoofhopper types method as the cass info is not checked for null.



Summary:
Extended Journalling :- NOTES PRESENTED has counts as 001,0,0,0....should be 1,0,0,0

Description:
The non zero count should be trimmed



Summary:
Suppress Cash low suppresses messages for cassettes when they are low but not dispensed from

Description:
When all cassettes are low, the unsol counters for each cassette are incremented even when the cassette has not been dispensed from.  This could result in the unsol for the particular cassette not being sent at all.



Summary:
Add Coin/Clear Coin function logs Coin hopper removed on the journal

Description:
When Add Coin function or Clear Coin function is done, Coin hopper removed is being journalled.





Summary:
CLEAR Key Should not be active while PRIVACY password is Enable/Disabling 

Description:
Enhanced EJ-EJ Privacy Supervisor fiunction:
FDK-F key is acting as a ENTER key but clear key of Pin pad is not working as Enter key.
To make consistency between the functionality of  both FDK and Back key(on PIN PAD/TTU) - Put the Activate CLEAR FDK director worker in the same work group where Supervisor Data collector is present. 



Summary:
Statement Printer TAB size wrong.

Description:
The statement printer tabs allign at column 8 instead of 9.

Discovered when sending UTS print data to Receipt printer.



Summary:
cust layer crash when test 5.9.18.3 is run on a GBNA.

Description:
Bug in the following line...No store in dataobjects workgroup
259 NotesEncashed.Data = EscrowedNotesCount.Data



Summary:
Diebold - calibrate command causes hang in platform

Description:
Found in andc 3.2 IT - agilis 3.6.0  workaround applied. try with new platform agilis 3.6.x before submitting to diebold.


AANDC 93.02.00.59 [Diebold] - When Calibrate Cash Unit menu option selected apps stop responding.
When the option Replenish --> (8) AddCash -- > (4)Calibrate Cash Unit

The "please wait"  screen displayed and apps stopped responding 

Logs @ \\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Log  Files\IT9\CalibrateFailed.zip



Summary:
Multiple revisions not reported in Note Definition command satisfactorily.

Description:
Although this was originally by design, it causes the issue that host may not be aware of note types that have been inserted eg.

if the positions of the note revisions are (copied from a gbna.ini):

23,8709,USD20-
23,32767,USD50-
23,32768,USD20-
23,32769,USD100-

Then that is reported as

[22_000__F_NA#01USD20   #02USD50   #04USD100  ].

12_001__w0  !    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ! _00010002000300040_00_00010002000300040

In this case the host is told that one Type 3 note has been inserted, but it is not aware of what this Type 3 note is. It could be either an USD20 or USD50.



Summary:
FDKs F & D actas Enter key 

Description:
After Entering the EJ Options screen,
 On a Rear Interface, FDK F & D act as ENTER key.
 On a Front Interface in same SST, beep is heard for FDK F & D keypress but no action is taken.



Summary:
CDM:-COMCDI Usage - Sometimes CDI stores used through the COMCDI Interface seem to become corrupted resulting in a possible Access Violation

Description:
While doing testing of extended journaling with dialup network , customisationlayer is crashing due to use of COMCDI in CDM module.

The event veiwer error says :

The error is near line number 51 of Script Host Worker ID: 10n8048dc129.
VBScript has given the following error description:
	'Object required: 'comcdi''
The Source of the Exception is
	'Microsoft VBScript runtime error'


event log files attached 




Summary:
EJ Enhancements:- During INIT and RCOPY the list of destination drives does not include fixed drives. We should extend to include fixed drives

Description:
The original design is flawed since USB Hard Drives actually appear in XP as fixed drives and not as Removable Drives. Hence we are restricting the use of USB HD. We should remove the restriction on Fixed Drives



Summary:
CPM - The q1 message is not sent

Description:
Build 62, Test 5.10 and Test 5.24



Summary:
Spray dispenser tests - Partial dispense returns supplies for ALL cassettes

Description:
UPDATED DESC...

Spray dispenser appears to return supplies for all cassettes on a partial dispense. This is incorrect after discussion with Catherine and Stephen - should only be cassettes dispensed from




Summary:
Remote Key Management - Issues with  configuration of Basic or Enhanced Mode

Description:
1) Update FS to say how to configure it on NCR SP
2) Update IPs - inform Ips of the FS update
3) Update NCR_SPs.reg file to default to the Basic Mode - our IPs then should say that this file may be modified to configure Enhanced more at start of day



Summary:
Supervisor simulation is performed on GBRU where it is not suppose to

Description:
GBRUCashOutTesting(Athena+ AANDC 93.02.00.62 + XFS 94.05.00.24): Test 2.9 - in step 16, a clear is performed on GBRU and supervisor entry/exit messages are sent to the host. But In step 17, when GIS message is sent after ECO 78 is set to 1, Supervisor simulation is performed and supervisor entry/exit messages are sent to the host.



Summary:
When sending K Screen Data in download K Screen is not refreshed

Description:
When debugging another issue - It was noted that the K Screen data always seems to be read from resrvd.def. So if you update the K Screen data when sending a download (Sending Screen Data) the data is ignored.



Summary:
Supervisor crashed while setting Max. No. of Backups to 100

Description:
Issue noticed in AANDC 93.03.02.62 XFS 93.04.05.24 when testing 5.5.3B.6.5.4(AUTOMATIC INIT COPY DRIVE)to Partially verify GR1T 365148.
Supervisor crashed when Multiple EJ is selected as backup mode and Max. No. of Backupos set to 100. Eventlog abd debug log are attached for reference.



Summary:
Application waits in Tx request state after dispensing cash if option2A is set to 1

Description:
Issue noticed while testing 5.6.4.2.5.2 with XFS 94.05.00.24 + AANDC 93.02.00.62 
If the option 2A is set to 1 to not retract notes, application waits in Tx request state without completing the transaction.However the reply sent is processed but ready9 is also not sent.
Attached debuglog , messagein and messageout for reference.



Summary:
TAR 354370 - Update of card details with trans reply, that does not update track 3 fails

Description:
Trish Tomkins in Australia has noticed when testing the Customer-Selectable
   PIN State.
   That on sending a transaction reply that updates either track 1 or track 2
   but not track 3 
   The card write state moves to the closed state via No Write Attempted Next
   State. With the card not updated.
   The following message will work on a 02.06.06 system but not a 03.00.04
   system 
   
   4 FS  FS  FS 002 FS  FS 11115012 FS 003DEMO FS K%1B1B1B1B1B1B1B1B? FS
   L;2B2B2B2B2B2B?
   
   The TAR has been raised as P2 due to a roll out to 1700 ATMs starting 9th
   July 2007



Summary:
Solicited Error messages on Spray dispenser contain 2 extra bytes (00) in notes dispensed field

Description:
On spray dispenser, solicited error messages contain 10 bytes for notes dispensed when option 76 set to 0 (instead of 8 bytes) and 16 bytes when option 76 set to 1 (instead of 14 bytes)



Summary:
TAR 354370: Update of card details with trans reply, that does not update track 3 fails

Description:
Trish Tomkins in Australia has noticed when testing the Customer-Selectable
   PIN State.
   That on sending a transaction reply that updates either track 1 or track 2
   but not track 3 
   The card write state moves to the closed state via No Write Attempted Next
   State. With the card not updated.
   The following message will work on a 02.06.06 system but not a 03.00.04
   system 
   
   4 FS  FS  FS 002 FS  FS 11115012 FS 003DEMO FS K%1B1B1B1B1B1B1B1B? FS
   L;2B2B2B2B2B2B?
   
   The TAR has been raised as P2 due to a roll out to 1700 ATMs starting 9th
   July 2007



Summary:
TAR 353097:  Card is not always ejected if OOS received as Card is inserted

Description:
To be included into 03.02.00



Summary:
PS: Dialup - Connection State worker goes offline when disconnect without EOT occurs

Description:
PS: Dialup - Connection State worker goes offline when disconnect without EOT occurs.  This causes the applications wrongly to go offline.



Summary:
Change BNA NDC Comms Connection Resource ID Worker ID from 409b7na1 to 0s377g208

Description:
When configured for Dialup and Pre-Dial, SST does not dial until a message has been sent.
It appears that the NDC Comms Resource ID has been duplicated by the BNA author work.  There can only be one instance of this worker.
BNA NDC Comms Connection Resource ID Worker ID : 409b7na1
Proper NDC Comms Connection Resource ID Worker ID : 0s385g208



Summary:
Normal next state is followed instead of error next state, when the invalid option is set while barcode testing.

Description:
Test no. 6 in In Barcode testing : "Successful Barcode Read- Copy Barcode Data to Barcode Buffer 'e' or Amount Buffer",
 Under the Invalid option (last 4 steps of the test): Expected result is "The application goes to Error next state as buffer option is invalid". But It is found that after reading the barcode, next state is followed and this message is displayed "Please wait while your transcation is processed".

XFS build 20
AANDC build 59




Summary:
Close State Retract Failed then w3 followed by w4 message sent.

Description:
Seen on BNA2. After notes were refunded in close state they were not taken. Retract started and as the notes went towards escrow/bin the entry lid latch was opened, then after a few seconds closed again before receiving completion event. For some reason the completion event took about 3 mins to arrive, and further processing was really slow. But the msgs sent to host were w3 and later followed by w4. It should not send both.



Summary:
If there are no silentdebug logs to copy and you attempt to copy them then you do not get the available drives listed

Description:
according to the ITS (test 5.5.2.2.5) if there are no logs present to copy then you should still get the available drives listed and a message "silentdebug logs not copied" displayed if you select one of the drives but what is actually happening is that it never lists the available drives it reports "no drives suitable for copy"



Summary:
COMCDI Usage - Sometimes CDI stores used through the COMCDI Interface seem to become corrupted resulting in a possible Access Violation

Description:
During a GRIT fix involving the use of a CDI store within a Script Host I noticed corruption of the CDI data occurring. I worked around this by copying the CDI store to a local string store and using the local store in the Script Host. I thought the issue was isolated and just a quirk.
However - subsequently it has been noted that this issue has possibly been seen previously. I did not have logs for the original occurance and when I tried to recreate it by using the CDI store directly again - I was unable to - hence no logs. During my testing the corruption of the CDI store was resulting in an access violation when trying to use the store.



Summary:
MV Diagnostics - Selecting Initialise when overfill condition on Nightsafe causes Supervisor to Hang then Terminate

Description:
Supervisor SELECT menu function 27 - MV DIAGNOSTICS
With nightsafe and MV diagnostics configured and an error on the nightsafe (overfill), selecting the Nightsafe device from the menu displayed for MV DIAGNOSTICS (...without clearing the overfill warning) causes the Initialising.... screen to remain displayed and supervisor application to terminate.  Eventually all apps shut down.

Logs attached.



Summary:
Number of hopper types are not updated when option 79=1 and restarted the apps

Description:
When option 79 is set to 1 and restarted the applications, Number of hopper types are still shown as 4 instead of 8 for 8 hopper coin dispenser. 
Number of hopper types need to be updated at the start of day depending on option 79.



Summary:
Update Author work to add catalogs for Barcode related CDI stores

Description:
Need to change author for updating the CDI store information related to Barcode.

Timer61 will go to CDI - Timers
Create a new catalog (CDI - OptionDigits) and idOption48 will go in to this Catalog along with other options
Create catalog (CDI - Barcode) and place the other 2(idBarcodeBuffer,idBarcodeFormat) CDI stores in this catalog.




Summary:
MV Diagnostics does not report correct status for Envelope Dispenser / Depository

Description:
2. The Envelope Dispenser and Envelope Depository gave an "Initialisation Failure" when they were selected, but only the Envelope Depository gave a FATAL status after the test failed. Why would this happen? (the self test in sysapp gave a failure as well for both devices as there was a problem with the printhead it seems, but only a fault display entry for envelope depository comes up. Envelope depository/dispenser is a combined device). [Lawson, Richard]   the depository & dispenser fitness are obtained from different fields in the envelope SP status. The terminal commands should show the same.
Raise a grit - we should be able to tell if it¿s a combined device and thus set the dispenser to fatal where a combined device is fatal. That¿s if the NCR SP reports a combined device. 





Summary:
Lower case DIGs (e.g. d,e,w) do not print to the journal correctly

Description:
Seen as part of the GRIT 367876 (TI issue) implementation. Lower case characters, in this case DIGs do not print correctly on the journal.  Also applies to CPM (q) for tamper reporting.



Summary:
EJ Options->Max File Size - Allows entry in KB of 7 Digits - 9999999 Maximum - should be 6 digits - IP Update required

Description:
Need to modify Supervisor to allow only 6 digit entry and also update IPs to state that Max size is 999999



 



Summary:
EJ Options->No Of Backups: "INVALID;MAX POSSIBLE BACKUPS=%" error message should not be appplied when reducing

Description:
Same for EJ Options->MaxFileSize - Do not check Availble Disk Space when REDUCING the value for File Size and No of Backups


 



Summary:
Unconsumed signals in Cash and Coin functions

Description:
Unconsumed signals found related to bad case scenarios.



Summary:
The TAR 346525\ GR1T 362140 does not works

Description:
See GR1T 362140 to know details about the expected behaviour
The original patch works fine, but on the pr13 it does not works.
The problem looks like a incompatibility with the fix instroduce to add "promote"

I have seen that on pr13, on 477b7na1 worker (Processing Notes Screen:1), if I restore the start workgroup to the previous one (Place 1), the test works fine




Summary:
At DISP CONFIG screen, need to Press Cancel/Esc twice to return to Select menu, should only need to press Cancel once

Description:
This behaviour is inconsistent with AANDC 3.1.1.
Also, if Cancel is pressed once followed by Enter, then Configure menu is displayed.



Summary:
GBRU reset is performed twice during error recovery

Description:
Soptted this issue during unit testing. GBRU reset is being performed twice during error recovery. As we have two CashHandler Resource ID's present in the Resource Initialiser worker, we need to check for CurrencyDispenser1 before calling the ExecuteBillDispenserImpl method.



Summary:
Wrong Reject code returned for security regression test 3.3.5

Description:
See test results spreadsheet for details; B22 not sent in response to L_A, L_COMMS, L_MAC, L_VV, C17 sent instead



Summary:
TAR 353849 - Counters not incremented when mony retract from escrow, refused notes taken

Description:
See TAR for full scenario. Issue is that the LastCashIn object is set twice, once in RetractFailed function, and once in CalcEscrowNotes function which is called by RetractFailed. On exit from CalcEscrowNotes function the objects within it are deleted. Possible ActiveXFS issue - however we do not need to call CalcEscrowNotes here, so fix will be to remove that call.



Summary:
Track2 data is printed twice on Encash in state 'I'

Description:
There is a problem with journal message printed on successful encash in transaction reply.
Card number is printed twice:
*3251*;612345000000001251=0512101222000000?*w*0, M-00, R-00010002000300040
OPERATION OK
A/C 612345000000001251
ESC:000
VAL:003
EUR200-003,EUR500-000,
100 Euro-000
RET:000*

Track2 data is printed in place of Sol/Unsol flag.



Summary:
BNA status reported as Good when notes are in transport and cash in transaction failed

Description:
GBRUCashOutTesting (AANDC 93.02.00.60 + XFS 94.05.00.22 + Personas): Test 3.2.11- In step 1, cash out transaction failed leaving the notes in transport. GetFitness terminal command reports the cash handler status as Fatal and BNA status as GOOD. In step 3, when cash in transaction is attempted by selecting BNA deposit option, an unsol is sent with status w3 as notes are still in the transport. In step 4, BNA status is reported as GOOD in GetFitness terminal command.



Summary:
ANDC 93.02.00.61 [ CPM ] No message reported when the BIN removed in CPM2 

Description:
Tests 5.34.1 
When the bin is removed , the message is not reported and the "BIN 1 is REMOVED" message  is not printed on the Journal , even though the Enhace option 24 is 002. 
The same is the case with tests 5.34.2 and 5.34.3 " BIN 1 missing " is not printed on the Journal .
In the sysapp device status it showed BIN removed.

BUILD 
AANDC 93.02.00.61 and XFS 94.05.00.23




Summary:
Cash LOW Unsolic is sending more than 9 times when SupressCashLow is set to 10

Description:
test case 5.6.14.2.12:SuppressCashLow Maximum configurable value is 9
Performed on Single Cash handler. SupressCashLOw reg value is set to 10.
I performed 13 times dispensing from 3rd cassette , for every transaction it is sending cash LOW unsolic message to the host.





Summary:
Simulation Only install does not seem to be supported in the _comp.ini but it is selectable as an install option in the Aggregate

Description:
If ANDC does not support the Simulation Only install type then it should not be selectable in the Aggregate. If you choose Simulation Only install then the other components in the aggregate install but no ANDC files are installed.



Summary:
TAR 353700 - Pop-up appears when lower transport removed while encashing

Description:
To recreate the issue, please follow the below steps: 

Insert Card 
Insert 20 notes 
In the confirmation screen select deposit 
Send the transaction reply to encash money 
While moving the money from Escrow to cassettes, remove the lower unit

we need to check the object returned from
ActiveXFS is usable before trying to use it. There are couple of cases where this is not checked in the wsc file




Summary:
**w is written to journal instead of *w for CashIn messages

Description:
this issue is still there in journalling wsc file.



Summary:
FAULT DISPLAY (FD)and DISPLAY SUPPLY (DS) are not showing ERROR condition

Description:
For test case 5.7.2.5.3.2.40,
1.When Second cass is Empty, FD doesn't show the Empty condition and DS shows ALL SUPP GOOD. But when I do TEST CASH after creating an EMPTY conditoinfor Nth cass, the FD shows the  Nht CASSETTE ERROR. But the DS still shows ALL SUPP GOOD.

Debug log files are attached.
Builds: XFS 94.05.00.23 + ANDC 93.02.00.61

2.When the bottom casses in both devices become EMPTY, the FD shows bottom cass LOW for Primary and no report for second cass. After doing TEST CASH, FD shows Nth CASSETTE ERROR for cass which are EMPTY.

 So it is correctly showing LOW status and showing CASSETTE ERROR  after doing TEST CASH for EMPTY condition. 

** But for Reject Bin Removed/Overfill FD displys correctly.

In all cases, DS shows ALL SUPP GOOD.




Summary:
Loading PE Key Failed in Double length Mode - Remote PIN Verification

Description:
Euan agreed about this problem and will update the author work to change the functionality in Remote PIN Verification to use single Length PE key rather than Double Length.  As per the manual, PE Key should be always Single Length.



Summary:
XOR for V Key is Not done while loading V Key in Double length Modes

Description:
while loading the V key From supervisor, XORing the data to the already loaded V Key is missing.  THis implementation could have missed while updating for Mutivendor security



Summary:
Type Library Tidy Up Tasks

Description:

There are still a few important tasks that need to be done to the Type Library:

Set the 'Help Available Flag' on the worker class descriptions - this should then call the WinHelp for the worker (this is the most important task)
Make sure the module ownership is NCR or NDC administrator - there are still module belonging to developers and even <no module>,
Delete empty Modules - still a lot of crud in the system

A component report is attached detailing the offending worker classes.




Summary:
Journal Printer not able to print prn and bitmap images

Description:
Test no: 5.6.1.7.2.1

Journal is printing - 

 \ssds\dll 
Printing Graphics on The Journal
GPIZZA.PRN\
 \ssds\dll



Summary:
Statement MEI not working

Description:
while i was doing tests 5.6.12.3A.6.1(Statement MEI Testing - Chained Transactions),5.6.12.3A.6.2(Statement MEI Testing - Verify Printing Multiple Pages and Print Buffers)and 5.6.12.3A.6.3(Statement MEI Testing - Verify Timer 68), i found that the Statement MEIs are not flashing even though the testing from sysapp worked .i raised the issue to Jan and helped me by setting a value regitry key and the statement printer MEI, but even after that when i started the applications , the statement MEI was not flashing .i reported this to Jan as he was around and he after scrutinizing the ooxfs log told me to raise a grit on it ,i have attached the ooxfs log with this grit .
i have seen the issue in aptra xfs 94.05.00.22 aandc 93.02.00.60 



Summary:
Encryption Key Change Message Decompose Data has been modified by TAR 347177 integration 

Description:
Encryption Key Change Message Decompose Data has been modified by TAR 347177 integration.  Sharing wasnt broken before the change was made.



Summary:
Change default setting for promote coupon format to be RCPT:PFM-LOWRES

Description:
The default AANDC 3.2 registry Setting for Promote_coupon_format should be RCPT:PFM-LOWRES     (40col thermal).

Currently it is HIGHRES which is for the 60mm Thermal.



Summary:
Simulated Supervisor deos not work with GBRU

Description:
UpdateGBRUStatus ndcfuns function still needs to be called in the Simulated Supervisor for GBRU. This was not integrated as it was not thought to be required.



Summary:
Unhandled Exception encounter during state flow when option 80 (extended state numbers) is enabled

Description:
EMV testing 

During EMV testing with option 80 enabled the application core crashed due to an access violation once one of the EMV state returns control back to AANDC. It only happens when this option is enabled. I ensured that each time the option is changed the download is resent.

The logs with the details are attached - statedata.log is the best to see the issue in.



Summary:
NOTES STACKED message is logged twice on EJDATA.txt

Description:
Build : XFS 94.05.00.23 + ANDC 93.02.00.61
Test : 5.6.18.4.12

When i send the FAST5 reply, the NOTES STACKED message is logged twice on EJDATA.txt.
please find attachements.



Summary:
Command rejected message is not reported to host

Description:
Build : XFS 94.05.00.22 + ANDC 93.02.00.60
Test  : 5.7.2.5.2.3.24

A02( Command reject reason ) is not reported to host when i wants to dispense from Type 2, 3, 4 cassettes which are not present.
Please find the attachements.



Summary:
Total notes it can dispense per transaction is not present in the Hardware configuration information

Description:
Build : XFS 94.05.00.22 + ANDC 93.02.00.60
Test : 5.7.2.5.2.1.33

when I send Hardware configuration information command, it is giving 'E01', total notes it can dispense per transaction is not there.



Summary:
When Timer 95 is set to 255, no effect on the time with in which the statement is captured.

Description:
For test case 5.6.12.3A.4.13, when timer 95 is set to 255, the time with in which the stmt is captured should be more than that of when the timer 95 is set to 000.
But even though it is set to 255, no increase in time.

Builds: XFS 94.05.00.22 + ANDC 93.02.00.60



Summary:
TI for Cash Dispenser, Coin Dispenser & GBRU Cash-Out using Option 24

Description:
support for tamper indication in RS232 coin dispenser need to added. It depends on option 24 which can take values 0 , 1 or 2.



Summary:
At Start of Day SOD, statement that is present at the throat is not captured.

Description:
For test case 5.6.12.3A.4.15, at Start of Day SOD, statement that is present at the throat is not captured.
This is the case when the applications are restarted. But when the machine is rebooted, the statement is retracted.
Builds: XFS 94.05.00.22 + ANDC 93.02.00.60



Summary:
Invalid Supplies/Fitness status is reported for the empty cassette

Description:
GBRUCashOutTesting(Athena h/w+ AANDC 93.00.02.60 + XFS 94.05.00.21): test 2.11.3-  In step 4, transaction is attempted from an empty cassette and a solicited error message is returned which shows cassette supplies as 2 and fitness as 0. Get Fitness and Get Supplies terminal command shows the same status fitness 0- good state and supplies status 2-low but ideally it should report supplies as 3-empty and fitness as 4 - fatal.



Summary:
when reducing no. of backups prompt screen showing "Invalid: Max Possible Value = -1"

Description:
Step 6 and 7 when redusing the max no. of backups from 30 to 15 - prompt appears correctly warning some files may be deleted but pressing 1 results in message  "Invalid: Max Possible Value = -1" but registry is updated for 15 correctly.

Test Case- 5.10.16.3
Version- AANDC Build 60 and XFS Build 22



Summary:
Issue with deleting NULL pointers seen during code inspection

Description:
Issue spotted by one of Zubairs developers where an invalid (NULL) pointer is deleted
....................................
This is not causing the problem we are investigating¿.but for the dispenser could you change:-

	WFSFreeResult(pWFSResult1);
	WFSFreeResult(pWFSResult2);

To check i.e. if (pWFSResult1) WFSFreeResult(pWFSResult1);



Summary:
New Stores for Cash Counts have been added to the CDI Note Counters catalog in Supervisor but not to CustLayer or AppCore

Description:
This catalog needs imported into the other author projects



Summary:
ConfigureNoteType command can be used only in Accept State '>'

Description:
I has been decided that ConfigureNoteType command should be used only in CashAccept State. Additionally command usage should be optimized to avoid calling it in CashAccept state when it is not needed (the same parameters in state extention 3).



Summary:
Reject Bin overfill status is not shown on fault display

Description:
GBRUCashOutTesting(Athena h/w + AANDC 93.02.00.58 & XFS 94.05.00.20): Test 2.4.19 - in step 4, fault display doesn't shows reject bin overfill status instead it shows INTERLOCK OPEN but according to test spec when retarct bin is full, reject bin full status must be shown on fault display.




Summary:
For test 5.6.20.1.6.2 (device configured),  a blank statement came first and it is retracted.Then a statement with test print is presented.

Description:
In step 12, when INIT STMT is done a blank statement came first and retracted. Then again a statement with test print is presenetd and PRINTER INITIALISED message is displayed.

To create the scenario,
1.remove the statement paper
2.enter supervisor
3.INIT STMT
4.Insert statement paper.
5.do INIT STMT



Summary:
Character Mapping In Statement Forms Printing loses font size

Description:
Assumption that character mapping is required for all printers has resulted in the font identiofiers being filtered out so that condensed, double size and 12CPI characters are no longer printed.

The correct characters are selected in PersonaS.

Need to maintain the character size during mapping...



Summary:
Event being written to XP Application Log every time the SST goes in service when Open Printer is configured

Description:
On an SST with an Open Statement Printer installed there is an event being written to the XP Application Log every time the SST goes in service. The event is:-

Specified form does not contain a field which has valid ACCESS for the command GetForm_()->NameA()[dYNAMICfORM1]



Summary:
Comms LED not flashing while testing "preprint header is printed on the top of every new receipt".

Description:
While performing the test "R00 Receipt header- Downloadable Bit Image in Receipt header", comms LED should flash as per the test specs. But it was not flashing.
Test no. 5.6.1.5.1.3
AANDC Build 59
XFS build 20



Summary:
Reject bin full information is not reported to host

Description:
Build: XFS 94.05.00.22 + ANDC 93.02.00.60
Tests: 5.7.2.5.2.3.32,5.7.2.5.2.2.30, 5.7.2.5.3.1.57
 
When the reject bin is full, the supplies information in unsol is shown as 1 instead of 4.



Summary:
For test 5.6.4.2.8.4(Power Failure during Present and just after Shutter opens),the transaction request showed last transaction dispensed counts as 4

Description:
In step 20, the last transaction dispensed counts are 4 instead of 0 as per test spec.



Summary:
CashInEnd Failed with Unsol w0 msg seen 

Description:
Run the test case 5.2.9 of TAR 329349 tests.




Summary:
For the test 5.6.4.2.4.14(Suspend to Supervisor Mode (Shutter Jammed Before Present),fatal unsol is not sent to host

Description:
In step 9, eventhough the dispenser is fatal, no unsol is sent and not printed in journal



Summary:
For the test 5.5.3B.6.5.2.1.1( SCHEDULED INIT PATTERN), supervisor crashed when FDKs are pressed

Description:
the event log is attached.



Summary:
 For test 5.6.16.2.1.3.3,(test case 3), DISP SPPLY  didn't show cassette missing information.

Description:
In the tset case step 12, the DISP SPPLY didn't show the message
CDM 01
TOP CASSETTE REMOVED



Summary:
For test 5.6.16.2.1.3.2,(test case 2), DISP SPPLY shows a different message

Description:
For test 5.6.16.2.1.3.2,(test case 2),in step 12 shows the following message.
C1 TYPE1 CASH EMPTY/MISSING.
The message specified in test spec is CDM 01
TOP CASSETTE EMPTY



Summary:
PS: When host reply with invalid next state and state number is alphabetic, the debug log will not log information 

Description:
i.e.  host reply with state ¿HHH¿ which is not define

 Expect result : STATEDATA debug window should log . +++ Invalid Next State [HHH] - Default Close State

             Actual result : No information logged

             The problem was not found when test with numeric state, i.e. ¿777¿



Summary:
PS: Not supporting loading state number with small letter

Description:
1.       There¿re the problem when loading state no. with small latter (logs are include in test case 3.12).

 

i.e.    

 

State ¿99a¿ was load to execute after card read state

[19:22:42  # 201   [3___12_000A01099a01100200200200199a_99aE014026026005093255255000]

                

            When doing transaction, It¿s showing invalid next state for ¿99A¿

[000] [A] Card Read

Screen Number           [010]

Good Read Next State    [99a]

Error Misread Screen No [011]

Read Condition 1        [002]

Read Condition 2        [002]

Read Condition 3        [002]

Card Return Flag        [001]

No FIT Match Next State [99a]

+++ Invalid Next State [99A] - Default Close State

 

            The problem was not found when loading with capital latter ¿99A¿

19:29:15  # 233    [3___12_000A01099a01100200200200199a_99AE014026026005093255255000

[000] [A] Card Read

Screen Number           [010]

Good Read Next State    [99a]

Error Misread Screen No [011]

Read Condition 1        [002]

Read Condition 2        [002]

Read Condition 3        [002]

Card Return Flag        [001]

No FIT Match Next State [99a]

  

[99A] [E] 4 FDK Selection

Screen #                [014]

Timeout Next State #    [026]

Cancel Next State #     [026]

FDK A (or I) Next State [005]

FDK B (or H) Next State [093]

FDK C (or G) Next State [255]

FDK D (or F) Next State [255]

Buffer Location         [000]



Summary:
Extended Journalling - Use of CDI Store in Script Host causes Exception

Description:
Modify to copy store



Summary:
Reject counts printed to journal are incorrect in Power fail during present but before shutter opens scenario

Description:
GBRU CashOut(Athena h/w+ AANDC 93.02.00.58 + XFS 94.05.00.20): Test 2.8.3 - Cash counts printed to journal on power up are incorrect. Notes stacked before power fail are neither shown in dispensed counts nor in remaining counts. Ideally it should be shown in remaining counts (notes in cassette + notes rejected).

Note: The correct counts are shown in DISP CASH supervisor option



Summary:
Notes are retracted when message mode option 2 = 1(Do Not retract & Do not Sound Beeper on Present

Description:
GBRUCashOut (Athena h/w + AANDC 93.02.00.59 + XFS 94.05.00.20): Test 2.4.6 - step 4, in close state notes are moved to the retract bin but notes has to be left at throat when notes are not taken by the cardholder and message mode option 2 is set to 1.



Summary:
Call to RestoreVDMTIData() will not be called when leaving diagnostics when the mode switch is in the NORMAL position

Description:
Call to RestoreVDMTIData() will not be called when leaving diagnostics when the mode switch is in the NORMAL position.

A new workgroup and the Assigner worker should be shared to ensure the function get called when leaving diagnostics when the mode switch is in the normal position.



Summary:
When holding onto the notes and attempting to clear the Suspend condition by sending GIS, the SST correctly sets the device fatal however an unsolicited message is sent to the host at this time ¿ this unsolicited should NOT be sent

Description:
Test case number 5.7b.2.5.3.2.79 Suspend to Fatal:
while performing this test 
Hold the notes to create suspend condition then send GIS
host recieves ready 9 message along with unsol message(i.e., 12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]E004000000030201[Unicode-x1C]40000000[Unicode-x1C]00[Unicode-x1C]11000211).
This should not be the case.




Summary:
When attempting to create a suspend condition by holding onto the notes during retract, no unsolicited message is being sent to the host, however the SST does actually go to Suspend mode

Description:
This issue careted when i was testing Suspend to Fatal for Extended Cassette types with dual dispenser.
Configured 1, 5,6 and 7 cassette types in both dispensers. 
Suspend Unsolis not send to host when user holds the notes at notes presenter. However SST going to Suspend state but no error report to the host.



Summary:
PRNT SCRW VERS prints version for MCRW firmware as well as SCRW firmware

Description:
RFC was raised for the Platform to report SCRW firmware information.  This was implemented in XFS 4.5.  It also reports all Card Reader firmware, not just SCRW.  ANDC should only report SCRW firmware or NOT INSTALLED.



Summary:
Investigate & resolve memory leak issues (handles and private bytes)

Description:
Memory leak has been seen in AC, CL and Sup apps during volume testing on SST and volume testing using test automation.  See Ranjith for more details.



Summary:
Fault Headers do not display correctly on dual dispenser

Description:
The CASH HANDLER header appears for both dispensers (no CDM 01 or 02 )

Suspect this has been introduced during 366987 fix



Summary:
Forgot to remove debug workers from Simulated Supervisor update during integration of G364102

Description:
Remove debug as it fills the debug log window



Summary:
CPM: Specific command reject message C11 sent, but not journalled

Description:
During the "CPM Specific command reject message C11" test the correct message is sent, but not journalled

AANDC 59
XFS 20
Test number: 5.18



Summary:
EJ Privacy SetPassword is enabling all FDKs even though no Alpha letters mapped

Description:
EJ Privacy Setpassword option is enabling all FDKs though FDKs are not mapped to any Alpha numaric keys.It should activate only FDK F for clear and FDK D for ENTER.



Summary:
Cash Out - No need to hard code the severity to fatal if cash out error recovery is disabled

Description:
In statcust.cpp, the severity has been hard coded to 4 in case of shutter jam scenario because the error event triggered in this case will have the dwAction field set to 1 which results in a reset to be performed at the end of the session. As Singapore PS have disabled the cash out reset, This code needs to be removed as it results in a wrong dispenser status to be reported.



Summary:
For function validation test for EJ, the prompt displays ENABLE MULTIPLE DESTINATION instead of DESTINATIONS

Description:
XFS 94.05.00.20 + ANDC 93.02.00.59

For test 5.5.3B.6.4.1(function validation), prompt shows ENABLE MULTIPLE DESTINATION instead of DESTINATIONS in step 2 as per test spec and expected result shows MULTIPLE DESTINATION DISABLED instead of DESTINATONS.




Summary:
IP spelling

Description:
APTRA Advance NDC Supervisor's Guide, Section 4.30
"Advance NDC caluclates teh maximum file size as follows:"




Summary:
ADD CASH command fails with error Device not ready but sysapp shows device OK

Description:
GBRU Cash out testing(XFS 94.05.00.21): Applications started and entered in to supervisor. Clear cash is selected to clear the cash counts (don't remember the result of this). Add cash function is selected to add counts to each cassette type. screen shows "Start Exchange failed and Press ENTER to continue". Entered in to diagnostics and checked the status list. No error status is shown for GBRU. run self test and it is passed. exit from diagnostics ADD CASH is attempted and still shows the same screen "Start Exchange Failed etc etc...". checked the cash handler fitness in the terminal command response message(1fsfsfs73) and it shown as 0(good state). exit from supervisor but GBRU is not exercised(it didn't make any sound). checked the cash handler status with wosa tool and it shows DEVICE_ONLINE. Test cash is selected from supervisor but was not successful. sent the reset command from wosa tool then device exercised and later when ADD CASH is attempted it was successful.

Note: we(Richard and I) have tried different ways to clear GBRU error and all were failed. May be I missed out some points above so better check the logs to get the clear picture of the problem.




Summary:
Send the XFS reset through the application to reset device automatically

Description:
3.0.4MV implementation for ATH columbia POC

Send the XFS reset through the application to reset device automatically.




Summary:
ActiveXFS 2.8.1 bug fix for Configured property requires a change in CIC.

Description:
The property for CashInNoteTypes Configured had a bug in ActiveXFS where it would return 1 instead of VARIANT_TRUE (-1). In CIC we check for 1, so now they have fixed their issue it will break our code. We need to change our check for Configured to True rather than 1. Need to search all projects and wsc files for where we use Configured property.



Summary:
terminal command get h/w config does not return product class for P71

Description:
Support for P71



Summary:
24 lines are not printed on a single receipt

Description:
Build: XFS 94.05.00.20 + ANDC 93.02.00.59
Tests: 5.6.1.5.1.2 and 5.6.1.5.2.2 

In Chained Transactions, when i send the DSP_24 message it is giving one extra blank receipt and it is not printing 24 lines in a single receipt.
Please find the attachements for the debug logs.




Summary:
TAR 352651:  Cassette types not present, are reported with fatal fitness after a test cash

Description:
When there are currency cassette types not present in the currency
   dispenser, the solicited response to a Send Configuration Information
   terminal command incorrectly reports these types as fatal, after a test cash 
   has been performed.
   
   Reporting "missing" cassette types as fatal results in host monitoring
   issues, and potentially unnecessary service calls.
   
   This issue was recreated in the lab as follows :
   XFS 04.02.01
   Updated CDM SP 03.06.01 (recommended hotfix)
   AA-NDC 03.01.01
   
   On a four high dispenser a type 3 and a type 4 cassette were fitted in the
   top two pick positions.   The lower two pick positions were left empty.
   
   From start up, before a test cash the result was as follows :
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000000000000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   All cassette types are reported with "good" fitness
   
   After performing the test cash 
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000004400000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   The two missing cassette types are now reported as being fatal.
   
   Debuglog details and XFStrace from testing have been forwarded to Ranjith
   Suresh.
   
   TAR raised at priority 2 due to customer timescales, original deployment was 
   planned for end of May, but has slipped to first week in June.




Summary:
TAR 352651:  Cassette types not present, are reported with fatal fitness after a test cash

Description:
When there are currency cassette types not present in the currency
   dispenser, the solicited response to a Send Configuration Information
   terminal command incorrectly reports these types as fatal, after a test cash 
   has been performed.
   
   Reporting "missing" cassette types as fatal results in host monitoring
   issues, and potentially unnecessary service calls.
   
   This issue was recreated in the lab as follows :
   XFS 04.02.01
   Updated CDM SP 03.06.01 (recommended hotfix)
   AA-NDC 03.01.01
   
   On a four high dispenser a type 3 and a type 4 cassette were fitted in the
   top two pick positions.   The lower two pick positions were left empty.
   
   From start up, before a test cash the result was as follows :
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000000000000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   All cassette types are reported with "good" fitness
   
   After performing the test cash 
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10000[Unicode-x1C]0000000000000004400000[Unicode-x1C]1C7F000301020703000000070000010102021
   07F7F00[Unicode-x1C]00011111000000000110000[Unicode-x1C]011101011100]
   The two missing cassette types are now reported as being fatal.
   
   Debuglog details and XFStrace from testing have been forwarded to Ranjith
   Suresh.
   
   TAR raised at priority 2 due to customer timescales, original deployment was 
   planned for end of May, but has slipped to first week in June.




Summary:
The journal is continously printing TRANSACTION END

Description:
XFS 94.05.00.20 + ANDC 93.02.00.59

I have noticed two scenarios in which journal is printing TRANSACTION END continously. The printing will be stopped only if the application is restarted. One scenario i observed during power fail test case. After the power fail, rebooted the system and started application. I sent the transaction request and didn't sent the reply.Card is ejected after time out and TRANSACTION END started printing in journal. Second case: I made the dispenser in fatal state. Then rebooted,application started. When I tried to send GIS, again it started printing TRANSACTION END.

logs are attached



Summary:
Spurious characters printed on journal at power up

Description:
Raising this GR1T to track an issue seen on the Athena SST in bay 5.
At power up, some garbage data was printed on the journal.  

Initially I thought it was to do with comms being started/not started but this was not the case.  It also seemed to coincide with the receipt issued not being retracted (ie assumed capture bin full...it seemed to be).  When this was cleared, the data stopped being printed at power up.  

Tried to recreate it with making the receipt retract not work any more (ie max no. of retracts) but could not recreate this issue.

Logs are attached.  Search for the date/time stamp 01/06/2007 20:39:30.603 in the OOXFS log and the data sent can be seen.



Summary:
SilentDebug needs to be wrapped in Unhandled Exception Handler code, similar to aandcia

Description:
SilentDebug can still present application popups to the user.  It needs to be wrapped in unhandled exception handler code, so that these exceptions are caught, and the application popup does not occur.



Summary:
Enhanced EJ Phase II - Changing mode from Multiple to Standard should warn user of possible file deletion and be prompted to select Proceed or Cancel

Description:
This GR1T is calling out one of the issues raised and discussed under 'GR1T 365148 - Defects and Usibility Issues in Supervisor Function' for tracking purposes.
The extract from GR1T 365148 detailing the issue and subsequent follow up is #4 detailed below.

4.	EJ BACKUP MODE (1 from CONFIGURE EJ menu) ¿ when in Standard mode, selecting 1 to change mode to multiple results in screen prompt SOME BACKUPS MAY BE DELETED PRESS 1 to CONTINUE etc.  This should only be displayed when changing from multiple to standard mode- WHEN CHANGED TO MULTIPLE STANDARD SHOULD WARN. 
Ramesh update:-        CR TO COME BACK
Catherine response:- Only seeing the warning when changing from Standard to Multiple.  Discussed this with Zubair and we agreed the warning and deletion of the files should be done for both scenarios ie Standard to Multiple and Multiple to Standard.
Ramesh response:-    OK-I will make changes.




Summary:
Provide a reg file to configure Open Document Printer support on Personas

Description:
Provide a reg file to configure Open Document Printer support on Personas



Summary:
CPM: B20 reject due to no endorse data is sent only when the cheque is sent to a bin

Description:
EMV testing 
A B20 reject should be sent when there is no data associated with the endorse printer flag of b.  However AANDC only sends this reject if the destination for the document within the device is one of the bins.
 No reject is sent if the printer flag has no data and the document is to be returned to the cardholder. 



Summary:
CPM - ADI Supplies incorrectly overwrite the CEN-XFS derived supplies

Description:
Build 59, Test 5.22 - but general issue for CPM




Summary:
Notes are encashed but note count is not updating after INIT BNA (observed in BNA)

Description:
1) Insert notes
2) press deposit at confirmation screen and do not send any reply.
3) Close state option set to leave the notes at escrow.
4) Perform INIT BNA ( notes are encashed ) but note count not updated.




Summary:
An attempt to dispense from an empty cassette is sending mStatus 3 even though the cassette is out of notes (mstatus should be 4)

Description:
An attempt to dispense from an empty cassette is sending mStatus 3 even though the cassette is out of notes (mstatus should be 4).
This was observed on an Athena dual dispenser configuration.



Summary:
DevPartner Memory Allocation Conflict

Description:
DevPartner Memory Allocation Conflicts found during testing.



Summary:
Supervisor: Password is displayed in Debugout "AutoEJ" window

Description:
Password is displayed in "AutoEJ" debuglog window when following activities done.
1) Setting EJ Password, 
2)Disabling EJ Privacy,
3)Direct EJ backup (if privacy enabled).



Summary:
Customisation Layer crashed after logging the NOTES STACKED message on the EJDATA.txt

Description:
Build: XFS 94.05.00.20 + ANDC 93.02.00.59

for test 5.6.18.4.29 in step3, Customisation Layer crashed after logging the NOTES STACKED message on the EJDATA.txt



Summary:
CPM - When ejected by host and not taken, the q1/7 message is not sent

Description:
Build 59 - test 5.28
Following the rework for build 59 of these cancel/timeout messages, this scenario got missed. Need to store a status bucket in this case to generate this unsol.
Also test with a bin being high - when this virtual message is present, the real-device once perhaps should be suppressed - particularly the q0 ones.





Summary:
CPM - Extended Counters message not implemented for the CPM device

Description:
Build 59, test 5.26
Check of the code revealed that this is not implemented yet. (Command 1<fs><fs><fs>42)



Summary:
Coin TI reports 01 when coin dispenser is not present

Description:
The Coin TI is returning 01 when Coin Dispenser device is not present.

Coin TI should return 00 when Coin Dispenser is not present and 01 when Coin Dispenser is present.



Summary:
INSUFFICIENT HARD DISK SPACE is shown when the the max size of EJ is set 

Description:
XFS 94.05.00.20 + ANDC 93.02.00.59

TEST:6.7

The available space in the c drive was 28055273.5KB. Max back up set to 500. The calculated size  for EJ is 55665.2KB. When the calculated size or less than that is enterd, prompt showed INSUFFICIENT HARD DISK SPACE.




Summary:
CPM - When the drivers Path value is set to Advance NDC\Data, image lift fails and close state functions incorrectly 

Description:
Build 59 - the driver does not work with path Advance NDC\Data, but
this exposed a bug in Advance NDC where when the image lift fails, the device error flow continues. CPM stays DEVONLINE, MEDIAPRESENT, but close state does not capture the cheque. The internal flag ChequeInDevice is incorrectly set.
This is a good test for image lift failures though.



Summary:
For test 6.9.2(Enabling and disabling Privacy),supervisor is crashing

Description:
XFS 94.05.00.20 + ANDC 93.02.00.59

When a 20 characters password is confirmed, the supervisor is crashing.



Summary:
GBRU Cash Out - Remove DisableCashInReset registry key as CIC will handle switching Cash-In error recovery on/off

Description:
The DisableCashInReset reg key can now be removed because Resource Initialiser is not to be used for Cash-In error recovery.  The CIC will handle switching Cash-In error recovery on/off.  



Summary:
In the Card less transaction, CARD TAKEN is printed on journal

Description:
In the test Journal tracing set to 3 and journal mode is Journal Paper ,Cardless transaction( 5.6.18.4.28 ), CARD TAKEN is printed on journal after TRANSACTION START message. But it is a card less transaction.



Summary:
On journal the Unsol TI messages are not printing properly 

Description:
When i did the tests Unsolicited sensor reporting with Buffer C Set to 002 TEST1(5.7.2.5.3.1.38),Unsolicited sensor reporting with Buffer C Set to 002 TEST2(5.7.2.5.3.1.39) the unsol printed on journal is not correct. when i removed the top cassette in the unsol it is showing as bottom cassette is removed.The same case with the other cassettes.
please see the attachements for details.



Summary:
Test Cash should be used to clear GBRU when error was CashOut related (it should not clear CashIn error)

Description:
______________________________________________ 
From: 	Mellor, Craig  
Sent:	31 May 2007 14:47
To:	Gavarasana, Hima
Cc:	Duncan, Philip; Spafford, Michael
Subject:	RE: Cash In Error Recovery

We think it's best to remove DisableCashInReset registry key.  Mike says we'll not need this key now that Resource Initialiser is not to be used for Cash-In error recovery.  The CIC will handle switching Cash-In error recovery on/off.  Please raise a GR1T against yourself and go ahead and remove the registry key.  Try to keep the code changes as simple as possible (e.g. always have DisableCashInReset value set to 1 in ActiveScriptHost).

Note that you'll also need to update the FS, and we'll have to remove info from the IP.

Apparently there is another requirement we need to support related to updating Test Cash to avoid it recovering a Cash-In error.  This was provided to Singapore.  We need to raise an RFC against 3.2 to address this.  I will remind Som about this, but perhaps you could start working on this?

_____________________________________________ 
From: 	Gavarasana, Hima  
Sent:	31 May 2007 12:13
To:	Mellor, Craig
Cc:	Duncan, Philip; Spafford, Michael
Subject:	Cash In Error Recovery

Hi Craig,

I think I should remove the code which handles the cash in error recovery when the DisableCashInReset is set to 0, as the cash in error recovery is not going to be implemented for 3.2? Or at least the DisableCashInReset registry should be set to 1 by default?

Bindu



Summary:
Thermal Graphics Printing on a receipt failed on an Athena ATM.

Description:
In a transaction which involves graphics printed on a receipt, the receipt was printed with some garbage characters.

Build: AANDC 58
Test no. 5.6.1.7.1.1
ATM model: Athena




Summary:
Application "Hang" during Supervisor Auto Exit - Gets stuck on Supervisor Exit

Description:
When running Diagnostic tests, an application "hang" was experienced when exiting from Supervisor.  I believe this is caused by the Task Active flag being set when Supervisor Exits, and stuck as it waits for a caller.

Auto exit was configured, but i didnt realise, so i was also pressing 9 <enter>, although, from speaking to Euan, this should be handled.

This is only recreatable on the Test rig at the min, but i am trying to recreate on an SST.

I did not manage to capture logs, as DebugLog crashed, but will recreate and capture logs.

Recreation:

1) Enter Supervisor
2) Configure for Auto Exit
3) Exit Supervisor by flicking mode switch
4) Enter Supervisor again
5) Press 9 <enter> and flick mode switch
6) Application gets "Stuck" - still responsive, but cant move forward.

Software Stack:
XFS 94.05.00.20
ANDC 93.02.00.59
Promote SST RTL 93.00.00.59



Summary:
 FDK F is acting as ENTER key in configure EJ menu

Description:
XFS 94.05.00.20 + ANDC 93.02.00.59


For tests 5.5.3B.6.1, 5.5.3B.6.2, 5.5.3B.6.3,5.5.3B.6.5, 5.5.3B.6.5.2, 5.5.3B.6.5.2.1.1, 5.5.3B.6.9.1 FDK F is acting like ENTER key in CONFIGURE EJ Menu. FDK F is acting as ENTER in AUTO EJ INIT OPTIONS Menu also.

Also in test 6.9.2 (Enabling and Disabling privacy),in step 3(checking alphanumeric values and FDKs) eventhough FDK A,B,C, G,H,K does not print a character, these make a beep sound. Also the FDKs D,F act as ENTER key.








Summary:
Setting up the Timer 69 makes no difference in the time taken by a transaction.

Description:
In a transaction involving receipt, setting up the Timer 69 makes no difference. 2 transactions in which one was performed normally while another was performed after setting the Timer 69, took equal amount of time.
Other info:
AANDC Build: 58
ATM Model: Athena
Test no. 5.6.1.10.1 =>Receipt MEI Testing ¿ Verify Timer 69



Summary:
CIC needs a Supervisor Start of Day director.

Description:
Currently there is only one assigner worker which CIC uses for its Start of Day processing in Supervisor application. If ever new SoD functionality is needed, then it will not be possible to import it as there is no director to import it into. So, there should be a CIC SoD director added to CIC. Also, added to 3.2 project in correct place.



Summary:
Key manager fails to recognise the DAPI7 version

Description:
 Due to a recent code change, key manager fails detect whether DAPI7 is installed or not. 



Summary:
No Goodbye Flowpoint is displayed when running Promote 3.x Campaigns

Description:
When running Promote SST RTL 3.x with 3.x campaigns, no Goodbye flowpoint is seen.  All other flowpoints are displayed.

Euan has also verified that this is a problem.

Software Stack:
XFS 94.05.00.20
ANDC 93.02.00.59
PROMOTE SST RTL 93.00.00.59

Promote Campaigns : <\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Documents\ITS & Test Log\ANDC Promote Testing>

Testcase: 5.6.11.3.3.3.3



Summary:
Configure registry to reset the SST for a CDM SP INTERNAL_ERROR

Description:
Please be aware of this CDM SP registry key and we recommend that you set this key on your ATM's otherwise the application may have unpredicted behaviour on receiving an Internal error from the Service providers.
By using the mechanism below SST will reset on an internal error from the CDM SP and make the ATM more available and also make diagnosing the root cause easier so that the event logs will not not be overwritten.
This is also in line with how AANDC and Platform always operated.

Reset an SST on an INTERNAL_ERROR
----------------------------------------------
If an INTERNAL_ERROR occurs, each instance of a service provider can be configured to reset the SST. 
To configure each instance of a service provider, add the following registry entry (where <Name> is the instance name of the service provider to be configured, as listed in Service Provider Names):
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\XFS CDM SERVICE PROVIDER\XFS-Framework\Interoperability]
RunInternalErrorExecutable = DWord:1 ; 
Where N is 0 or 1:
A value of 1 enables the service provider to reset an SST.
A value of 0 (the default) disables the reset option.

In case of a configuration using a Dual Dispenser then also:
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\XFS CDM2 SERVICE PROVIDER\XFS-Framework\Interoperability]

Service Provider Names
----------------------------
This table lists the NCR Service Providers and the individual Service Provider Names they support.
 
NCR Service Provider		Service Provider Instance Names	   
XFS CDM Service Provider		CDM, CDM2	 




Summary:
CPM - Cheque accept state retries also decremented when internal timeout occurs

Description:
Build 59 - though not defined in FS, the retries should not be counted in the internal timeout case - the retries are deemed to be used for real entries of the cheque, especially to verify the codeline. Now if there are e.g. 3 retries configured, then after 3 internal timeouts where the customer confirm Yes - More Time, any cheque is accepted. This internal timeout is a new feature of the new implementation.




Summary:
CPM SP - Suspend timeout registry value not configured (for NCR HW), and C:\CPM file location on driver level

Description:
1) Advance NDC should configure the suspend timer to 120s like for the other devices, this enables the host to exit the suspend mode after 120s by sending a GIS/OOS.
Missing registry value in NCR_SPs.reg
2) Also the SP is configured to put the image file to C:\CPM - this would not be good for severity - on SP level we use the Advance NDC\Data directory, but the SP probably copies the file - so need to try out if possible to move it on the driver level as well.



Summary:
CPM - no error message is sent when there is a cheque already in the device

Description:
Build 59 - test 5.39 - the flow is fine, just the status message is missing. Problem is in the worker that does not send a command to the device in this case.
seen this issue with test 5.12 as well



Summary:
CPM - missing q1/q7 Cancel/Timeout message when there is also a hardware error

Description:
Build 59, Test 5.24 - the q1/q7 is not sent (this is due to a fix that went into build 59 to eliminate duplicate messages :-( ...



Summary:
CPM - Start of Day and device fatal, the terminal command still reports device is good

Description:
Build 59, Test 5.30.1
Fault display correctly shows the error. For some reason the terminal command reports incorrect status.
Similarly Test 5.30.3
No message is sent and the severity is reported as good - when I opened the front transport (after ther head)



Summary:
CPM - when cheque jammed inside (no access), incorrect device status returned

Description:
Build 59, Test 5.23 -returns a q5C, should have been q6C
also the test says unsolicited, but should have said solicited message



Summary:
PS: When pressed Enter at "Enter Coin Hopper" prompt displays "Invalid Value" instead of "Not Enough Digits" in STD Coins

Description:
This issue is seen while testing by PS.
At "Enter Coin Hopper" prompt, without entering any digits and if Enter key is pressed, then it is displaying "Invalid value" rather than displaying "Not Enough Digits".




Summary:
Instead of renaming EJDATA.LOG,it is copied as EJRCPY in test 5.5.3B.5.4

Description:
tested with XFS 94.05.00.20 + ANDC 93.02.00.59

For the test 5.5.3B.5.4 (INIT EJ and RCOPY Regression), in step number 2, instead of renaming EJDATA.LOG to EJRCPY.LOG , an actual copy is created EJRCPY.LOG





Summary:
CPM - when cheque not taken after eject timeout, flow continues wrongly

Description:
Build 59, Test 5.13 - signals are wrongly tied up in the flow - so the cheque is not captured if not taken (incorrect orientation flow), but wrongly flows the device error path. The two signals just need to be swapped and re-tested.



Summary:
CPM - after hardware timer expires, the Cheque Acceptor worker re-enables the cheque entry

Description:
To be compatible with previous implementation, the worker should signal Timeout rather than re-enabling the device.
Build 59, Test 5.15, also test update needed to clarify that hardware timer on CPM 2,3,4 is 5 minutes, on CPM1 one minute.



Summary:
UnSolicited status is not reporting when Reject Bin is removed  &pefromed DISPALL4.

Description:
Test case no:5.7.2.5.3.1.51:Remove Reject Bin from CDM1,Make sure type 2,4 cassettes Low in CDM2.
for 52:Remove Reject Bin from CDM2,Make sure type 2,4 cassettes Low in CDM1.
When DISPALL4 performed suppose to report Unsolicited status report.But not reporting.





Summary:
DISP CONFIG - Coin hopper screen has extra line between hoppers 1/2 and 3/4

Description:
Extra line inserted when displayed via the DISP CONFIG menu - this is ok when printed. Seen in build 59 but think this will also be in previous builds.

This is because coin screens I44 and I66 are too long - they are 34 characters long (32 is the maximum)



Summary:
CPM  - The CHEQUE registry value missing in the receipt printer section of the printer registy configuration files

Description:
Build 59



Summary:
Diebold - STD CASH does not add counts.

Description:
Counts look to be cleared added then cleared again on Diebold - result is counts clear at end of STD CASH
recreated in Dundee & Hyderabad. ADD CASH ok.
ANDC 3.2 Build 59.



Summary:
CPM Light disabled too late

Description:
Test 5.1 and the following
The MEI for the cpm is blinking when properly configured, but stops blinking too late.



Summary:
Resrvd.def Screen i37 not showing reject threshold

Description:
reject threshold area blank - not even zero shown.
have not investigated much but authored work & reg key look present.
i37 is used only on mv installs



Summary:
DISP SPPLY,FAULT DISPLAY not displaying the same results

Description:
Test no:5.7.2.5.3.1.27: DISP SPPLY,FAULT DISPLAY are suppose to display same results but DISP SPPLY reporting "All supplies good" and  FAULT DISPLAY reporting actual faults like cassete missing,empty,low.



Summary:
The Amount entry screen is taking characters one by one

Description:
For test case 5.5.4.1.4.1, The Amount entry screen is taking characters one by one. For More information refer GR1T no 346097

Builds : XFS 94.05.00.20 + ANDC 93.02.00.58



Summary:
On journal it is printing wrong information about NOTES PRESENTED

Description:
In the test "Double Note detail printed to Journal.Journal Level 2(5.6.18.4.32)" i send the reply to dispense 10 notes from TYPE1,TYPE2,TYPE3,TYPE4 cassettes.At that moment it is printing NOTES PRESENTED 10, 10, 10, 10. After that I send a reply to dispense 10 notes from TYPE1 and TYPE3 cassettes,it is dispensing 10 notes from TYPE1 and 10 notes from TYPE3,but on journal it is printing NOTES PRESENTED 10, 10, 10, 10 instead of NOTES PRESENTED 10, 0, 10 , 0.
Build: XFS 94.05.00.20 + ANDC 93.02.00.59



Summary:
Back up is not taken when SCHEDULED INIT PATTERN is set to 3 (monthly basis)

Description:
For test case 5.5.3B.8.2,If I set the date as 30th May, then monthly scheduled init is not working. It is working fine for Daily and weekly scheduled init.

Builds used: XFS 94.05.00.20 + ANDC 93.02.00.59 



Summary:
NOTES PRESENTED from the extended cassettes is not pirnted on Journal.

Description:
for the following test cases, Journal tracing set to 2 and journal mode is Journal Paper(5.6.18.4.33.1), Journal tracing set to 3 and journal mode is Journal Paper(5.6.18.4.33.2), Journal tracing set to 2 and > 4 cassette type configured(5.6.18.4.33.3), Journal tracing set to 3 and > 4 cassette type configured(5.6.18.4.33.4), it is printing NOTES PRESENTED from TYPE1,TYPE2,TYPE3,TYPE4 cassettes.
It is not printing information about NOTES PRESENTED from TYPE5,TYPE6,TYPE7 cassettes.

Build: XFS 94.05.00.20 + ANDC 93.02.00.59



Summary:
Not allowing multiple destinations if EJMode is standard

Description:
Supervisor application is not allowing to configure multiple destinations if EJ Mode is STANDARD. Configuration of Multiple destinations  should allow to enable/disable regardless of EJMode



Summary:
On Suspend clear Fault Display shows "Inter Lock open"

Description:
GBRU Cash out(AANDC 93.00.58 & XFS 94.05.00.20) - test 2.4.16: In step 1, cash handler suspend is cleared and application returned to idle loop as soon as GIS command is sent during suspend mode. fault display showed "Inter lock open" where it was not opened actually. when a dispense transaction is initiated notes are dispensed and transaction was successful but fault display continued to display "Inter lock open".

Note: exit and entry in to the sysapp has cleared this error from fault display




Summary:
TAR 352172 - Note definitions are lost if the terminal is not in a good state at start up

Description:
Full Description: 
If the BNA module is not in a good state at the start of day, AA-NDC (Cashin 
component) cannot retrieve the note definitions for use in future
transactions. When the BNA fitness reverts to good at a later stage no
effort is made to check the note definitions 

The effect of this is that the BNA is in a usable state and will accepte
notes as far as the module is concerned, but none of the notes are
recognised by AA-NDC.
 




Summary:
When DISP CASH is entered cash counts of CDM2 is not displaying .

Description:
Test case no 5.7.2.5.3.1.2, asked to enter DISP CASH in supervisor then suppose to display Cash counts of CDM1 and CDM2,but displaying only CDM1 not CDM2.



Summary:
Incorrect KVV values generated on key entry

Description:
Incorrect KVV values generated on key entry for tests 5.6.7.2.2, 5.6.7.2.3, 5.6.7.2.4 - not according to what is in the test spec



Summary:
cancel key takes a long time when cancelling a night safe deposit

Description:
when cancelling a night safe deposit, it takes a long time to go back to the transaction request screen again. This is because it is connected to the Night Safe Closer, which waits a fixed timeout for the basic night safe variant. Need to validate if this is correct behaviour (wait for door close on enhanced, or wait 10 seconds for basic), if don't make bag drop does it matter whether door is closed or not? Also after cancel, goes back to transaction request screen (I think this is because a message hasn't been sent up to the host) and only by sending a next state & print is the transaction cancelled - I don't think this is correct behaviour - behaviour needs validated. Need to check other parts of flow, and what should be connected up to Night Safe Closer - suggest whole flow is reviewed again as part of the update.




Summary:
comment in Night Safe test spec needs resolved

Description:
comment in Night Safe test spec (test 5), a reject response given rather than a solicited, I suspect this is because you can't get the night safe FATAL, only not present, which gives an E02. Needs confirmed this is the case to resolve the test spec comment and night safe behaviour.



Summary:
 reject code for night safe not present is specific command reject response always

Description:
when night safe not present, response to host from a transaction reply is always E02, even though specific command reject not configured; looking at transaction flow, it looks like the E02 is hard coded;

Re-run test 5.10.10.1 to verify fix;



Summary:
Night safe bag drop timeout default is infinite, not 30 seconds - don't think this is correct behaviour

Description:
default timeout for bag drop is infinite not 30 seconds (as defined in test spec) - need to determine if this is correct behaviour against NDC+ - ITS is incorrect in any case
 
test 5.10.10.8, ANDC 3.2 Build 58, XFS 4.5 Build 20 + SIU SP update





Summary:
Night safe solicited message sent after 1 no bag drop, not 10 no bag drops

Description:
ANDC 3.2 Build 58, XFS 4.5 Build 20 + SIU SP update, test 5.10.10.7 - suspect logic in status handling code doesn't keep a count of the number of no bag drops and always send the solicited message when it should wait and only send it after 10 no drops

also test 5.10.10.9, 5.10.10.10 need re-run



Summary:
Night safe does not go FATAL - test deficient or inaccurate

Description:
Test 5.10.10.5 - NSD is only warning at this stage in the test spec, not FATAL - not sure how to make the NSD fatal - the sequence of events leading up to this test don't make it FATAL; not sure if the test spec is deficient (in how to make the night safe FATAL), or inaccurate (it will never go FATAL).




Summary:
The solicited message obtained is different from that specified in test spec.

Description:
For the test 5.7.2.5.3.2.120,the solicited message obtained is 22 000  8 E200000000000000 00000440 10 1000110  .

For the test 5.7.2.5.3.2.121 (Cassette Suspend Severity ¿ Value set to 3),the solicited message obtained is 22 000  8 E200000000000000 00000430 10 11000310.

For the test 5.7.2.5.3.2.122(Cassette Suspend Severity - Value set to Invalid value),the solicited message obtained is  22 000  8 E200000000000000 04000040 10 1100011.



Summary:
AANDC 93.02.00.59 [Diebold] - When Calibrate Cash Unit menu option selected apps stop responding.

Description:
When the option Replenish --> (8) AddCash -- > (4)Calibrate Cash Unit

The "please wait"  screen displayed and apps stopped responding 

Logs @ \\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Log  Files\IT9\CalibrateFailed.zip



Summary:
Enhanced EJ - Choice 1 in SELECT DRIVE screen When no A: Drive Configured & Multiple Destinations Enabled shows Empty Brackets only 

Description:
Multiple Destinations is used in the supv INIT EJ, RCOPY and Direct EJ Backup functions.  This functionality appears to assume that a drive A:\ is always present.  When it is not, the first choice on the SELECT DRIVE screen is 
1 ()
The first position on this screen should be populated with the next available drive letter.



Summary:
Reciept is delivered in test 5.3.2.115 and 5.3.1.89

Description:
For the test 5.3.2.115 (Fast Cash ¿ Cash Presenter Tampered With During Initial Present)Reciept is delivered after giving 'no' to ' do you want another transaction screen'. According to test case no reciept is delivered.




Summary:
The MPEG files are not played  and  'Loaded' is not appeared on the screen

Description:
For the test case 5.5.4.1.1.11, before to start AANDC applications ensure that LoadDAT.exe and two MPEG files are copied to the preferred locations,.

when Applications are started, in idle loop the MPEG files should be played and LOADED should be displayed at left top corner.

For more information refer to GR1T 322591\

Builds: XFS 94.05.00.20 + ANDC 93.02.00.58



Summary:
AANDC 93.02.00.58 [DIEBOLD] : MV Diagnostics menu shows the Journal status as good instead of Fatal when there is no Journal Printer but EJ Enabled

Description:
On the Diebold opteva machine there is no Journal printer,so I have enabled the EJ.

But the MV Diagnostics menu shows the Journal status as good instead of Fatal.
3.PAPER JOURNAL PTR            GOOD.

and self tests passes and ack/error prompt  is 'A06'   'PRINTER INITIALISED' is displayed. 

And in the EJDATA.log the 
"TEST PRINT !"%$@#0123456789:;<=>?@ABCDEFGHIJKLMNOPQ
RSTUVWXYZ[\]^abcdefghijklmnopqrstuvwxyz " is logged.

Logs @ <<\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Log  Files\IT8\Journal.zip>>



Summary:
The unsol printed in journal is missing supply information about cassette 7

Description:
For test 5.3.2.80 ( reject bin full),the unsol printed in journal is missing information about cassette 7.In R field it is printed 1100011.




Summary:
message printed in journal is different from solicited message

Description:
For test 5.3.2.73 (shutter jam on CDM1),the solicited message got in message out is 22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000000000[Unicode-x1C]30000000[Unicode-x1C]14063C02[Unicode-x1C]11000111
The message printed on journal is *1234*2*E*2200000000151005,m-14,R-11000111



Summary:
Supervisor Crash in Diagnostics in AANDC 3.02 build 59

Description:
Supervisor.exe crashed at worker id 0n7251dc129, when a cassette from cash handler is removed in Daignostics.




Summary:
Receipts not ejecting in the close state

Description:
Sneezy - Bay 42
IT Build 59 - Shake out testing

When perfroming shake out testing transaction replies which print to the receipt printer are not being ejected in the close state. This only effect prints that have not trailing form feeds on the receipt. If the Receipt has a form feed then the receipt eject with no problems.




Summary:
The BNA goes fatal if rejected notes removed at some phase of attempt to retract 

Description:
The BNA goes fatal if notes removed at some phase of attempt to retract - Invalid notes rejected on exit slot and left there. Option 45 enables retract. If notes are removed from the slot when retract is starting (just before the transport moves to pull them in) or notes are held up to the point that retract attempt is stopped, the BNA reports failure and goes fatal.



Summary:
Hang occured during Transaction running Promote Attached Coupon campaign

Description:
When running Card Before Cash transactions with Promote Attached Coupon campaigns I experienced a hang during testcase 5.7.3.3.2.1 (CBCASH) while sending TX Rply CBCASHC.  The SST Dispensed the notes, and sent the R9, but didnt print media.  I tried sending other messages such as Next state and print etc, but these were rejected, so it appeared at least some part of the application was still responding.  After a reboot, the first media that was ejected (which is supposed to be blank) had the previous TX Reply print data.

The following message was sent to create the hang:

4 FS  FS  FS 040 FS 01010000 FS 1111A044 FS 002RECEIPT DATA FF 

Testcase: 5.7.3.3.2.1 (CBCASH)

Installed Software:

XFS 94.05.00.20
ANDC 93.02.00.58
PROMOTE SST RTL 93.00.00.59





Summary:
When Promote Standalone campaign is loaded, Receipt Data is printed on the same receipt as Coupon

Description:
When running Promote Standalone Coupon campaign, when a Transaction Reply with Receipt Data is sent, the receipt data is not printed on a seperate Coupon.

The following message first demonstrated this problem:

4[Unicode-x1C][Unicode-x1C][Unicode-x1C]040[Unicode-x1C]01010000[Unicode-x1C]1111F044[Unicode-x1C]002RECEIPT DATA

TestCase: 5.7.3.3.1.4 (CBDP)

Installed Software: 

XFS 94.05.00.20
ANDC 93.02.00.58
PROMOTE: 93.00.00.58


TestCase: 5.7.3.3.1.4 (CBDP)



Summary:
Build 59 - The userfuns.scr file contains a typo preventing ApplicationCore to start

Description:
On the last line of the file.



Summary:
Advance NDC MV Diagnostics - card capture count not increasing

Description:
in the test no 5.9.3A.4.5   Card reader (MCRW) self test ,in step no 4.5.13 it is written to 
Exit MV diagnostics and return once more the Replenish menu ¿ select option 6 to 
View the card capture count
and the expected result is Card Capture count is 1, but the card capture count is not increasing .




Summary:
Partial Dispense variable is not reset 

Description:
Wrt Coin Development, The partial dispense variable is not reset.



Summary:
Universal Statement Printing and APTRA Security compliance

Description:
At runtime the Statement Printer forms-based code creates the directory C:\xfs\data\optr\forms.  This directory is used to create dynamic forms for Statement printing.

We have realised APTRA Security will not let AANDC create this path or files in this path.  There will only be Read access privileges.

This GR1T is to change the path to be under c:\program files\NCR APTRA.




Summary:
UniversalPrinters.reg enables printing barcode on journal - could cause problems with the EJ

Description:
Our journal printer mapping is shared between EJ and journal printer.
Tthe universal printers raw data mapping introduces binary data in the print stream 'bvar' - conversion.
This is not desired behaviour for EJ - the EJ should be a text file with no binary data. So perhaps we should not support printing of barcode on the universal printer. Similarly for graphics, bitmaps.



Summary:
SilentDebug "Option 7 Copy Logs" attempts to copy the logs to floppy drive even if there is not enough room on the floppy 

Description:
Test 5.5.2.2.5 in Test Log (test 1.14 in spec) - SilentDebug will attempt to copy the logs to a floppy even when there is not enough room on the floppy. After speaking with Andrew it seems like windows records 2 different file sizes, the actual file size & the file size on disk, which are different sizes. I think this may have something to do with the Sector size on the hard drive which may be a different Sector size than whats on a floppy disk or USB stick.



Summary:
Statement is printing maximum of 14 lines only in one statement.

Description:
Statement is printing maximum of 14 line only in one statement,and prinitng another 14 lines on next statement and continue depending on the transaction reply 20,33,93.



Summary:
Fault display has different headers for the same device.

Description:
On Fault display, the following was noticed.

Cash Handler Fatal
	<fault>
Cash Handler

Similarly it seems that CPM has a wrong heading.
	<fault>

I understand that it has been designed this way, however TARs have been raised on this before, which requested that all device faults were under 1 header.



Summary:
When Entering keys, it is possible to enter other characters at the confirmation promt other than Enter or Cancel

Description:
When in the Enter Keys Menu (25) in the Access Menu (6), It is possible to enter other characters and them be displayed at the top left of the supervisor screen. 



Summary:
Cash Out - Hang due to incorrect response (7 digit severity status) for GetFitness Terminal Command

Description:
Input from Singapore PS:
We're encountering a machine HANG when ATM sends an unknown supplies status message to host. 

In the host system, they see a msg coming from us and it is captured in their system as UNKNOWN TERMINAL STATE J. we sent this msg

"[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0B0C0D0E1000217G0H0L0O0Q0w0]" in response to their "[1[Unicode-x1C][Unicode-x1C][Unicode-x1C]73]"and they are unable to recover at this point.

I've searched the aandc reference manual and got this for our solicited supplies transaction reply msg 
 << OLE Object: Picture (Metafile) >> 
Why are we sending E1000217 which is 7 digits when the reference manual shows only 5 bytes? 

To simulate, 

1. Attempt dispense transaction ($200) 
2. when notes are seen moving out towards the presenter, lift up the top lid of transport. Do not push it back down. 
3. Cash dispenser goes fatal. (debug log "OCBCcus.. 16:45:18.921 Present Fail or Retract (if enabled)" ) 
4. Simulated supervisor is unable to clear the device 
5. Attempt deposit transaction 
6. Hardware error with BNA fatal is sent to host. 




Summary:
AANDC 93.02.00.58-- Wrong message displayed during EJ test

Description:
While doing the EJ tests  5.4.1.4.2.4.2	Dual Mode Configured and 5.4.1.4.2.4.1 EJ Only Configured

The "COPY TO FLEX FAILED "  is Displayed for step 13 and Step 14 instead of "No DISK IN DRIVE " and NO SPACE FOR FILE respectively




Summary:
MV Diagnostics configured - option 91 does not restart the machine

Description:
in the test no 5.9.3A.4.3 	MV Diagnostics configured ¿ Single Menu
in the step no 4.3.15 it writes
Enter 27 to show MV Diagnostics menu Enter 91 and proceed to close ATM
and then the expected result is that ATM reboots.
but what i found is that the ATM is shutting down and is not restarting .
Tested on Athena.




Summary:
Athena - CDM Authentication

Description:
where CDM requires authentication.
Device 	= CASH-01-UsbDispenser
Service 	= CASH_HANDLER
Tcode 	=115
Mstatus 	=42
Slen 	= 5
Mlen 	= 2
RClen 	= 0

 ANDC  - build 58 XFS build 20 and the dispenser is fatal for some reason..

On the first dispense of the day - no status message is seen - R9 issued but no money
On the second I get 15:05:32  # 211    [22_000__8_E400000000_40000_10_11000]

Fault display reports unknown error - sysapp says CE required.





Summary:
AANDC 93.02.00.58 - In MV Diagnostics on Wincor machine , failed to clear the fitness of CashHandler

Description:
TEST 5.9.3B.4.4 CASH HANDLER 1 SELF TEST

After the step 4.4.6 (i.e is after Replacing the Reject Bin back ), The "TEST FAILED" screen,
instead of clearing the fitness of the cashHandler.
I had to do Test Cash test to clear the fitness (4 Replenish -->8 Add Cash --> 5 TestCash ).

Logs @ \\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Log  Files\IT8\ MV_CASH.zip





Summary:
Open Printer alias not being setup by universalprinter.reg

Description:
The alias for the Open Printer needs to be manually set to be OpenDocumentPrinter1



Summary:
C:\xfs\data\optr\forms directory not being created during install

Description:
ANDC tries to dynamically create a form for the Open Printer but this fails because the directory is not present



Summary:
DisplayManager:Touch not working with only DM is installed and "DMNoTopMost=1"

Description:
Touch areas are not getting enabled when "DMNOTopMost=1". Need to call CDUUpdateKeyboard method  which is in ndccust.h file. this method should be called in DLLMain in NDCDisplayhook.cpp



Summary:
InitBNA should not clear GBRU when error was CashOut related.

Description:
If it is CashOut related then InitBNA should not clear it because this could move the notes to the wrong destination. Instead a screen should be shown to let operator know it was a "Cash Out" error and that Test Cash should be run to clear the condition. This scenario should only arise when CICO is being used on a GBRU, and the auto self clear failed at the end of the transaction. Similar updates need to be made to the CashOut functions (Test Cash & Std Cash) to prevent them from clearing a CashIn Error.



Summary:
TAR 306067 - Print format is not PPD default when no data follows Printer Flag 4

Description:
   The default PPD print is not printed on the envelope, instead the data
   observed by the customer to be printed on the envelope was as follows:-
   
   0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 
   
   During testing in the lab here in Dundee by FGSC, it appeared that the four
   digit value would increment with the transaction number, for example 0017
   repeated 10 times on one transaction, then 0018 repeated 10 times on the
   envelope on the next.
   
   This was obtained when a Function Identifier of 1 or 7 is selected (for
   Deposit and print), with Printer Flag set at 4 in the transaction reply
   command. 
   
   If Printer Flag of 3 or 5 is defined, the default print is printed on the
   envelope.
   
   Awaiting customer verification that this is the transaction reply used, but
   can recreate in the lab here in Dundee.




Summary:
DisplayManager: When Only DM is installed "DMNoTopMost = 0 " should be set in registry

Description:
If Only DM is installed on a system user can not user DMNotTopMost=1. this feature is for during the testing only.  For run time user has to set  "DMNoTopMost=0", this information needs to be updated in FS



Summary:
Barcode printing on Receipt and Journal is failing (for K screens) on Athena ATM.

Description:
Barcode printing on Receipt and Journal is failing (for K screens) on an Athena ATM. The values for HRI, width and height does not change the behaviour of printing.



Summary:
Receipt is printed with one line less than expected to print.

Description:
Test case nos 5.6.1.5.4B,5B:Receipt is expectd to print with 24 lines but printing only 23 lines, expected to print 49 lines but printing 48 lines.




Summary:
Direct EJ Backup should give EJ intermediate backup files to destination

Description:
Direct EJ Backup should copy EJ related intermedaite files also. These files are useful if powerfail happened during AUTO INIT.



Summary:
TAR RFC 330882 - Test envelope deposits are not recorded on journal or EJ

Description:
Issue raised on AA-NDC 02.06.xx but applies to all MV implementations. 

Similar in nature to TAR RFC 317132 NO ALARMS/TAMPER INDICATION MONITORING
IN DIAGNOSTICS. i.e. service provider sessions are closed when entering VDA
mode. 

Similar issue occurs when going into Supervisor diagnostics and performing
test envelope deposits. The customer requires traceability of test deposits
logged on the paper or electronic journal. 

Below is the customer issue: 

Either there should be a trace on the JP when a test deposit made or the
counter should not get incremented when a test deposit is made. Without one
of these there will be customer complaints of counter mismatch. These things 
are very common query from Banks audit team and hence we are answerable to
any mismatch in the counter. 

During the cash loading or any FLM visit by CIT or service call by CE if any 
one these guys performs a test deposit the counter gets incremented without
leaving any trace of such activity. (He may remove these dummy envelopes as
well because they are dummy transactions). Next day when custodian comes and 
takes print counter and he finds there is a difference in counter v/s
physical. To sort this out there is no trace message on the JP/EJ what and
where went wrong. 

Net to net any counter increment there should be a trace on the JP/EJ so
that it can be accounted correctly.



Summary:
TAR 332741 - Require the beeping for upon cheque insertion to be disabled earlier

Description:
Customer wants to raise an RFC in order to prevent excessive beeping when
inserting a cheque at the CPM. 
FGSC have reviewed the issue and believe that there appears to be no bug,
but that there do appear to be opportunities to enhance when the beeping is
stopped, therefore believe it is a valid RFC from Mira.

See more detail in STAR.



Summary:
TAR 347289 - CPM no longer accepting cheques with no MICR after final retry

Description:
A customer observed a change in functionality in the way that AA-NDC was
working in the respect that the CPM should accept a cheque with no MCIR.
Previously if no MCIR was available AA-NDC would accept the cheque on the
last retry available. This is the detailed functionality as defined in the
reference manual. 
It appears TAR 322744 disabled this ability.




Summary:
TAR 341901 - AA-NDC : Unsolic low status message not sent when cassette goes physically low

Description:
S/W configuration : AA-NDC 03.00.04, APTRA XFS 04.02.01 

Problem Description : The unsolicited low status message is not being sent
when the currency cassette goes physically low. 

If the registry is configured for all cassette types with
"LowBillsThreshold"==dword:00000000 the unsolicited cassette low status
message should be sent when the cassette is physically low (i.e. low status
is detected by magnet). This was fixed previously in TAR 322813. 

For this to work the CDM SP relies on the ulMinimum value being set to 0.
The problem is that after performing certain Supervisor Replenishment cash
functions the ulMinimum value is being set to 50. If ulMinimum is set to 50
then the unsolicited low status message is sent on the logical counts (i.e.
when the threshold goes below 50) and not when the cassette is physically
low. 

Further investigation has shown the problem is caused specifically by option 
5 - CLEAR CASH and option 12 - STANDARD CASH functions in the Replenish
Menu. 

These cash functions should not change the ulMinimum value so that if the
registry has been configured with LowBillsThreshold set to 0 then the
ulMinimum value remains at 0 and therefore the unsolicited low status
message is sent when the cassette is physically low. 



Summary:
TAR 339830 -  Terminal hangs if OOS then GIS sent while Card reader in suspend state - Test Only

Description:
If the card reader is in a suspend state with the shutter jammed open and an 
Out of Service command is sent followed by a go In Service (such as may
occur at predefined intervals for Key exchange), the termial will go into a
permanent hang state so that any subsequent command may be acknowledged but
is not acted upon. 

This was reported on XFS 04.02.01, it has been confirmed to exist on XFS
04.01.01 and XFS 04.04.00. Debug and ulistening logs show that AA-NDC hangs
without ever attempting to move forward in its processing. 

The only commands issued to the MCRW are "disable" and "accept" when the "Go 
In Service" is received. the MCRW status is not queried when the
configuration command returns the Fitness to the Host, but this is reset
from "3" to "0" after an OOS command is received despite the fact that no
command was issued to the MCRW. 

This issue is preventing a delivery to HSBC this week as they will not
accept the delivery while this exposure is still present



Summary:
TAR 339439 - send config info returns card reader good, when its fatal due to comms error

Description:
If there is a DASH card reader error due to the comms failing (M-Status 95), 
when the host sends a Send Configuration, the response from AA-NDC is that
the card reader is in a good condition. 

Sequence of events to recreate as follows: 

Enter supervisor 
Disconnect RS232 Comms cable to cause the comms error. 
Go back to normal mode 

Send a Go In Service. 

AA_NDC will send an unsolic stating that the DASH reader is FATAL. 

Host sends a Send Configuration Information. 

The response indicates that the card reader is in a good condition, when it
shoudl report FATAL. 

Logs provided originally on 29/11/06. Then again on 30/11/06




Summary:
Garbage characters printed on the Receipt, instead of Bitmap

Description:
When attempted to print a bitmap image on the receipt, garbage characters are printed. And a typical sound comes out from the speaker which is same as when a USB device is plugged in and plugged out.



Summary:
NDC Supervisor Window Display Array Out of Bounds

Description:

There is a potential problem with the Supervisor Window display on systems with a display greater than 32 characters wide (Wincor and Diebold).

in the mNDCSupervisorWindow::SetText method in ssds\interdomain\components\sscorewcl\sources\cpp\msupvwin.cpp there is not check to see if the GetPosY and GetPosX calls return a coordinate in the range of the cursor control positions.  Also, the array needs to be extended to accommodate the 64x32 Diebold display update.



Summary:
Development PC & Simulation Only install types should be the same as Dev & Sim install regarding Tools installation

Description:
During a Development Only install I noticed the Tools are not installed (DebugLog & NDCHost)



Summary:
On journal it is Printing wrong count  for TYPE2 of CDM2 and the Last  status is not '0' in the 'r' field  of Transaction request

Description:
Build: XFS 94.05.00.13 + ANDC 93.02.00.57

In step6,On journal it is printing wrong count for TYPE2 of CDM2 in the test cases Power Failure during present and just after shutter opens (5.7.2.5.3.2.93)and Power Failure after present (5.7.2.5.3.2.94).

in step13,the Last  status is not '0' in the 'r' field  of Transaction request in the test cases Power Failure during present and just after shutter opens ( 5.7.2.5.3.2.93 & 5.7.2.5.2.2.39 )and Power Failure after present ( 5.7.2.5.3.2.94 & 5.7.2.5.2.2.39 ).

In test 5.7.2.5.3.2.93,Once for CDM2 the dispensed count was added to rejected count, then total became (32771) greater than the counts which i added (32767) at the beginning.                    




Summary:
When the reject bin is full, the supplies information in unsol is shown as 1 instead of 4.

Description:
For the test 5.3.2.65(reject bin full), even though the reject bin is full in unsol the status of reject bin is shown as good.



Summary:
AANDC 93.02.00.58 : Notes presented information is not logged to the Journal for the function id 2(Dispense + Print)

Description:
ExtendedJournalling - test 4.2&4.3(XFS 94.05.00.13) : When journal trace level is set to 2 or 3 and transaction function id is 2 (disp + print), notes presented information is not logged to the journal.

Note: When trace level is 2 and function id is 2, Card Taken information is also not logged to the journal but this issue has been seen only once




Summary:
Debugger Runtime Error When Initialising Encryptor (TwoPartySignatureFound needs to be initialised before first use)

Description:
The VS 2005 debug system flags a runtime error when running the Application Core.  The report indicates that the 'TwoPartySignatureFound' variable is being used without being initialised.  The code confirms that this is the case - TwoPartySignatureFound needs to be initialised before first use.

ApplicationCore -> Enckeys.cpp

EppErrCode mNDC_ExportEncryptorData::DoRSADataExport()
{
	//Setup the Key Data appropriately
	DEBUGINFO("mNDC_ExportEncryptorData::DoRSADataExport");
	ResultCapabilitiesWorker->PutString(None);

	EppErrCode epp_error = EPP_OK;
	bool TwoPartySignatureFound;   <-------- Not initialised.
	.
	.



Summary:
TAR 348240 - No journal unsolic status msg seen with when not present and no EJ

Description:
Previously with NDC+ when a transaction reply including journal information
was sent atms without a journal physically present and with no EJ set would
respond accordingly... 

***** MESSAGE OUT ***** 
4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]003NDC DEMO 
NEXT STATE 
AND PRINT 


************************ 
...... MESSAGE IN ...... 
12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H2[Unicode-x1C]0[Unicode-x1C]06 

within aa-ndc however no unsolic status information is returned. It's
believe that as a result of tar 174968 this functionality was removed.
Should this response be configurable..? 



Summary:
TAR 328922:  EMV Exits - AA-NDC:Supervisor PRNT SCRW VERS shows NOT INSTALLED

Description:
EMV CAM Exits 02.00.01 
AA-NDC 03.01.00/03.00.02 

MCRW with Smart card present on ATM. 
Enter Supervisor and select: 

MISC FUNCS (90) 

both options performed. Option 0 to print CMPNT versions, gives correct ICC 
and CAM versions. Option 1 to print the SCRW firmware version prints 'NOT
INSTALLED'. 

Diagnostics tests verified that SCIF could be initialised and Identified
successfully. 

Customer reported issue on iMCRW, re-created in Dundee on SDC MCRW

************************************************************

One TAR (or RFC) for the Platform team to report the firmware version
through XFS (if possible). 

One TAR (should be really a P4) into AANDC to modify the string being
displayed from "NOT INSTALLED" into "NOT AVAILABLE". 
In any case prior creating such TAR I would wait to understand what is the
position from the XFS team. 
If they can provide the firmware info, then AANDC will probably have to be
modified consequently. 

*************************************************************

RFC on platform is 330204 which is being investigated. This TAR RFC
transferred back to AANDC group.



Summary:
AANDC 93.02.00.58 : Coupon Printing Tests - Applications stop responding after receipt is printed

Description:
MVMediaControlTests - 10. Coupon printing tests (XFS 94.05.00.13): The applications stop responding after receipt is printed with transaction reply data and the printed receipt is not ejected there after. The same behaviour is seen with standalone and Attached campaigns with all the reply messages except the case where print data in the reply message is blank. 




Summary:
TAR RFC 228167: Named Store has been used in the author and code and the CDI store for this has not been implemented - Russia

Description:
Dear Som,

 

Unfortunately, applying of your workaround causes "access violation" exception then calling DateString->PutString or DateString->GetString.

 

The code of c-exit was:

 

#include <mcore.h>
...

 mPersistString* DateString = new mPersistString(); 
 DateString->set_StoreName(mString("CashClrDate");
mString mval = DateString->GetString();  // <-- Exception here
...

 





Summary:
TAR 326692 - Message not being proceed while in Settlement mode

Description:
Maybank experienced the following issue: 

Using their customised AA-NDC 03.00.00 application with SNA 3624: 

Enter settlement 
select settlement function 
transaction request sent to host. 
transaction reply is recieved (this is seen in the COMMS debug stream) 
however the reply is never processed. 



Customer implemented the following: 

As per Dundee's advise i.e. a) to add the timer worker - set it to 40
seconds and b) add service pack 1(some GRIT changes included in that release 
that affect the settlement implementation for handling transaction replies), 
we had implemented the changes in Maybank P74 - AANDC 3.00.00. We tested
this new changes and it is working fine as per the requirement. We are
still testing and Maybank agreed to start their SIT tomorrow. 


Therefore this TAR has been raised to add the timer worker to the settlement 
message handler.




Summary:
TAR 305988 - AA-NDC 02.06.03 - Very slow reponse from ATM to host messages

Description:
   AA-NDC 02.06.xx
   
   Phillipines & Malaysia both reported an issue with SNA3624 comms where the
   second transaction (chained transaction) was timing out. The transaction
   reply was being received by the ATM, but was not being processed for 2
   minutes. TCP/IP was not affected.
   
   The solution is to modify the timer (worker ID 0n815dc5) from 120 seconds to 
   10 seconds.
   
   This has been verified by the customer and this TAR is to track this change
   into a future release of AA-NDC. This TAR is raised as priority 4 since the
   customer already has a fix (they made the authoring change themselves) so no 
   patch required, just needs to be fixed in next available release of AA-NDC.
   
   Ranjith is aware of the issue and the solution.
   



Summary:
TAR 339677 - Suspend persists after reset if notes are held at the presenter.

Description:
 if a Suspend condition is created by holding notes at the
Presenter so that they cannot be retracted and the terminal is then reset,
AA-NDC will report that the Dispenser is in Suspend state after a reset.
From this time, a Get Fitness will report Suspend, but a Go In Service will
allow dispenses however as soon as the dispense completes, the terminal will 
go into Suspend state until another Go In Service command is received



Summary:
Diebold - build 58 - Receipt Control worker Hangs in close state

Description:
dont take receipt - close state hangs.

1. WFS_CMD_PTR_RETRACT_MEDIA is an unsupported command use WFS_CMD_PTR_CONTROL_MEDIA
2. Handle unsupported commands by signaling complete

 



Summary:
AANDC 93.02.00.58 - Blank receipt is presented when INIT RCPT is selected immediately after replenishing the paper 

Description:
A blank receipt is presented during INIT RCPT and then a receipt with test data is presented if INIT RCPT is performed immediately after replenishing the paper. A reset is performed before the print & eject is done during INIT RCPT which is causing a blank receipt to be delivered in this scenario. Steps to create this issue:
-> Remove receipt paper
-> Perform Init Rcpt, it fails
-> Reload the paper and select Init RCPT




Summary:
TIR 351121 - Card left in DASH card reader has incorrect processing and wrong screens displ

Description:
When a card is left in a DASH reader during a transaction. Incorrect
   processing is carrried out.
   
   The issue centres around Timer 72 (remove card timer for DASH cards)
   expiring. 
   After it expires the a solicited status message (suspend/tampering) is sent
   to 
   the host which sends another Transaction Reply which is rejected.
   
   The application goes to the Close State and various inappropriate screens
   are 
   displayed.




Summary:
TAR 347177 - AA-NDC key change message

Description:
The AA-NDC manual chapter 10 - Encryption Key change <fs> directly after
field g states it is optional. Infact it is not optional as with the <fs> is 
place for messages as below the messages are not accepted. 

With the <fs> removed AA-NDC functions correctly. 

Example messages 

3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4F[Unicode-x1C] 
3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4G[Unicode-x1C] 
3[Unicode-x1C][Unicode-x1C][Unicode-x1C]4K[Unicode-x1C] 

NDC+ plus allows you to send the messages with the <fs> in place. 

The TAR has been raised for AA-NDC to mimic NDC+ as customer doesn't believe 
they should have to change their host functionality because AA-NDC should
work as per NDC+ functionality.




Summary:
Receipt MEI does not flashes when a receipt is printed and the ATM is out of service.

Description:
While printing a receipt with Control codes on it, the reciept MEI does not flashes.
Note:1. While doing this test, the ATM was out of service.
2. This problem persists in other Code page/Character set receipt printing tests as well (only when the ATM is out of service).
3. The MEI for reciepts works fine for receipts printed when the ATM is in service.



Summary:
TAR 344857 - AA-NDC: Wrong screen displayed when Transaction reply rejected in Close State

Description:
The customer is performing a normal transaction. 

Due to a Host issue, a Transaction Reply is not being sent at the correct
time, so the transaction times out and the Close state is entered. At this
point the delayed Transaction Reply is sent and is correctly rejected.
However at this point the screen the Close state should display is replaced
by screen 000. 

Additional Debug was added to the close state to display the current screen
number and verified that after the transaction reply was received, the
screen number was set to zero. Note that there was no screen number in the
reply as it was a set next state and print. 

It has been verified that the CDI used to hold the current screen number is
the same as the one set from the transaction reply, and this is always set,
prior to the message being checked to see if it is to be rejected or not.
Therefore, if the transaction reply is processed in the window between the
close state setting the screen number and it being displayed it will be
overwritten by the number from the TR, or zeroed if there is none in the
message.




Summary:
TAR 346639 - Local PIN verification with PEKEY fails in 3.x in double length key mode

Description:
Local PIN verification using the PEKEY, does not function in AA-NDC 03.xx,
when using double length key mode with XOR. 

A FIT which specifies the PEKEY is loaded, and on completion of PIN entry,
the PIN entry state B, exits out the Cancel Next State, when it was expected 
to prompt for an incorrect PIN. 
The same sequence works when using Single Length encryption key mode. 

The publication description is not explicit, as to mixing key lengths,
however the customer (US PS) has reported, and it has been confirmed in lab
testing by FGSC, that this functionality does work with AA-NDC 02.06.xx
when using double length key mode with XOR. 

US PS expectation is that a fix will be made available for this for
multivendor solution. 

Appropriate debuglog, ulistening traces, and xfstraces are available from
FGSC if required. 


To recreate the issue use the following FIT table in conjunction with a
stateflow which uses the PIN Entry state. 

30[Unicode-x1C]0[Unicode-x1C]0[Unicode-x1C]15[Unicode-x1C]0000002552552552552550010000060040150000161432552550010350691031370
01035069000000000000000000000000000000000000[Unicode-x1C]00100025525525525525500100000600
00000000000002552550000000000000000000000000000000000000000000000000000000000
00 

Ensure that a Master key is loaded 
Enter any card and any PIN 
In single length key mode the PIN entry state should remain current and the
screen prompt for key re-entry due to an incorrect PIN should be displayed. 
In double length mode, the PIN entry state will exit out the cancel next
state. 

The application sends the PIN SP a WFS_CMD_PIN_IMPORT_KEY command, which is
responded to by a WFS_ERR_PIN_USEVIOLATION error. This error appears to be 
due to the PIN SP not supporting the mix of encryption key lengths. 



Summary:
TAR 346201 - AA-NDC : unexpected unsolicited message during PIN entry in customer txn

Description:
Problem desription : unexpected unsolicited status message during PIN entry
in customer transaction 

To recreate problem: 
1. Send GIS 
2. open mcrw shutter and jam open - unsolic suspend M-07 sent to host 
3. send GIS - Ready9 and unsolic sent 
4. send GET CONFIG - terminal state message has card reader suspend fitness 
5. send OOS - Ready9 sent 
6. release mcrw shutter 
7. send GIS - Ready9 sent and ATM goes in service 
8. enter PIN - UNSOLICITED CARD READER SUSPEND MESSAGE SENT 

This causes confusion at the host as the suspend condition no longer exists
and the unsolicited status message (suspend) appears during a cardholder
transaction. 

Note : Without the changes for the TAR fix, there is an unsolicited card
reader suspend message sent before the Ready9 at step 5 but the application
hangs at step 7. 



Summary:
TAR 344143 - Unsol RS232 Comms Disconnect (MStatus 95) not sent when comms lost during a tx

Description:
When RS232 Comms is lost to the Dash card reader during a transaction an
MStatus 95 is generated by the platform but no unsolicted message is sent to 
the host via AA-NDC with the details. 

Insert Card - Card latched 
Reqst Cash - enter $20 (dont press enter on epp) 
Remove RS232 Comms to Dash reader 
press enter on epp 
MStatus 95 generated by platform 
complete transaction 
Card entry screen loops on timer - no Mstatus 95 sent 

Logs have been generated etc and Euan is involved in determining a
solution. 




Summary:
EJ Agent crashes if EJAgent is called during EJUpload is in progress

Description:
EJ Agent (Init.exe) is crashing if EJUpload is in progress. this means supervisor may crash if scheduled init or cutover calls INIT EJ while EJUpload is in progress.



Summary:
CashIn import does not properly work on 3.2 projects due to worker id changes.

Description:
Richard was running Std Cash function when he got an mError in a script host related to BNA. This highlighted an issue that this script host had not been replaced by the fixed one from the CIC. The reason seems to be that the higher level worker ID has been changed so the import does not update it.



Summary:
TAR 340924 - Track 2 IMCRW with Smart card is reported as non smart in get config

Description:
Customer running AA_NDC 03.00.03 with XFS 04.02.01 ha reported tha the
variant version returned in response to the get configuration command for an 
NCR ATM with an Track 2 IMCRW with smart card reader is "03". This should
be 08. 

FGSC have recreated in the lab, using the appropriate card reader
(445-0664128) and have seen the same result using AA-NDC 03.00.04. 

14:34:39 # 1 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]7] 
14:34:39 # 2 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10001[Unicode-x1C]0000000400000000000000[Unicode-x1C]167F000301000583000000070000010102001
07F7F01[Unicode-x1C]00041011000000010110011[Unicode-x1C]011110011011] 


14:34:41 # 3 [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]76] 
14:34:42 # 4 
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]10001[Unicode-x1C]00000004000000000000000000000000000000[Unicode-x1C]167F00030100058300000
007000001010200107F7F0100000000010000000000000000000000[Unicode-x1C]000410110000000101100
11000[Unicode-x1C]011110011011] 

Incorrect reporting means host cannot tell that smart card functionality is
available.



Summary:
PS: Dialup - SST does not predial when configured to.

Description:
When configured for Dialup and Pre-Dial, SST does not dial until a message has been sent.



Summary:
TAR 338891 - Continuous fatal unsolics sent to host when DASH reader is fatal in idle

Description:
See STAR,

This fix also covers TAR 339349 - send config info returns card reader good, when its fatal due to comms error





Summary:
TAR 347478 - ISO3 Pinblock contains incorrect PAD characters

Description:
Customer implementing ISO Format 3 PIN block has reported that the PIN block 
is incorrectly formed. The PAD characters used in the PIN block should be
random in the range 10 -15 (A-F) as described in the reference manual. 
Testing with both AA-NDC 02.06.06 and 03.00.04 has shown that the PIN block
pad characters are random, but are not restricted to the 10 -15 range. 
Testing with NDC+ did show the correct format of PIN block. 




Summary:
TAR 338981:  Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
Please refer to STAR



Summary:
Build 58 - The Clear Key is not clearing the entered input

Description:
When you press the clear key in Amount Entry/PIN Entry states, nothing is cleared. I expected to get the Rubout behaviour at least, but nothing :-(
Seen both on Geodude and Athena hw.
Perhaps even in the previous builds.




Summary:
TAR 347369 - Envelope deposit hangs if tampering occurs as Timeout expires

Description:
As discussed, if an envelope deposit fails due to tampering just before
Timer 4 expires, the deposit will hang with the Beep active until the
terminal is rebooted. 

From the PD trace supplied, it is clear that AA-NDC is notified of the
tampering and verifies that the depository is in a Suspend condition (this
is seen in the OOXFS logs), but the deposit workgroup never appears to
cancel at the customisation layer and therefore the Beep remains active.




Summary:
TAR 344039 - Cassette Total worker returns BillsRemaining value of zero in AA-NDC 03.01.01

Description:
Customer is using AA-NDC 03.01.01, XFS 04.02.01. 
   
   They have created their own authored application and this application uses
   the Cassette Total worker to return the BillsRemaining totals.  
   
   The problem is that since migrating to AA-NDC 03.01.01, it always reports
   the BillsRemaining total as zero.  In AA-NDC Supervisor, the counts show the 
   correct values as expected.
   
   The other totals from the Cassette Total worker, the BillsToCardHolder,
   BillsToPurgeBin etc. are correct as per Supervisor.  
   
   It is only the BillsRemaining which seems to be no longer working since
   migration to AA-NDC 03.01.01 (previously worked ok in AA-NDC 03.00.03).



Summary:
Application hang after the envelope depositor accepts an envelope - statement issue

Description:
Envelope Dispenser MEI Tests
for the test 5.6.2.3.7 , Envelope Dispense successful using a State Type function on the athena machine ,

the transaction is getting to a standstill after the envelope depositor accepts the envelope .the debug log has the entry "printing¿¿."¿.need to kill the applications to start another transaction.



Summary:
TAR 338743 - Wrong information being printed on PPD envelope when no receipt is requested

Description:
If the Customer requests a receipt, all is well and the rcpt info is
printed 
on rcpt and PPD info on the Envelope. If the Customer does not want a 
receipt, the rcpt info is printed on the envelope (up until the max no of 
characters for envelope). 




Summary:
TAR 343612 - AA-NDC: Entering Dialup Diagnostics incorrectly causes 'R38' Msg

Description:
With Message Mode set to '10000000000', when I enter Dialup Diagnostics from 
the Dialup Config menu, the ATM is generating an 'R38' message. This can be
seen in the MESSAGEOUT log, and is also logged to the journal. When dialup
communications is used, the message is not actually sent in most cases,
because entering dialup diagnostics causes any pending messages to be
dropped. 

However, as a test, I entered Dialup Diagnostics while using TCP/IP comms,
and the 'R38' message was actually sent to host. 

'R38' is not a valid message, and should not be generated when entering
dialup diagnostics. 

Zip file of logs have been provided to Engineering. 

Require fix for AA-NDC 03.00.01 with Americas Patches. 
Also Engineering to investigate if fix required for latest release AA-NDC.



Summary:
TAR 340145 - Bottom cassette removal/insertion messages not reported consistently

Description:
AA-NDC seems to be missing events in relation to removing and inserting
cassettes. Specifically, when the bottom cassette is physically removed and 
inserted. 




Summary:
TAR 337986 - Reserved screens for audio incorrect in resrvd.def

Description:
the default resrvd.def file contains 11 reserved screens X0000 through X0009 
and X0012 for playing of audio messages. 
'X0000' '[Unicode-x1B]P00;1[Unicode-x1B]\' 
'X0001' '[Unicode-x1B]P01;1[Unicode-x1B]\' 
'X0002' '[Unicode-x1B]P02;1[Unicode-x1B]\' 
'X0003' '[Unicode-x1B]P03;1[Unicode-x1B]\' 
'X0004' '[Unicode-x1B]P04;1[Unicode-x1B]\' 
'X0005' '[Unicode-x1B]P05;1[Unicode-x1B]\' 
'X0006' '[Unicode-x1B]P06;1[Unicode-x1B]\' 
'X0007' '[Unicode-x1B]P07;1[Unicode-x1B]\' 
'X0008' '[Unicode-x1B]P08;1[Unicode-x1B]\' 
'X0009' '[Unicode-x1B]P09;1[Unicode-x1B]\' 
'X0012' '[Unicode-x1B]P12;1[Unicode-x1B]\' 

These are ALL incorrect, although the first 10 will work with a valid audio
file, but more by chance than design! 
The control sequence for voice is defined as <esc>P0xx;1<esc>\ or
<esc>P0xxx;1<esc>\, where xx or xxx is the message number. 
None of the reserved screens conform to this syntax and the first 10 only
work because the first digit of the message number happens to be 0. Screen
X0012 does not work. 
In addition, screen X0005 will not work because no associated message file,
daudio05.wav is provided by default. 



Summary:
TAR 347746 - ESC PD screen control sequence which functions with NDC+ does not work

Description:
EFUNDS network in US, migrating from NDC+ to AA-NDC have multiple downloads
which use the <ESC>PD'filename'<ESC>\ control sequence to display pictures
full screen. The customer has indicated that they are not willing to
change the control codes used in their downloads. 

This command is a valid "VGM/Translator" command which could be used with
NDC+. The NDC documentation derives from the screen control codes from the
S4i platform services VGA/VGM/Translator, and the NDC+ documentation does
reference these publications. 

This specific command does not function with AA-NDC. 

The issue for this specific control code, has been raised as a TAR, rather
than an RFC, as the AA-NDC General description states under the differences, 
that AA-NDC "Supports all existing NDC+ customisation data".




Summary:
Preprint- 49 lines: Receipt In a fast cash transaction, it prints 49 lines in 2 receipts instead of 1.

Description:
Preprint- 49 lines: Receipt In a fast cash transaction, it prints 49 lines in 2 receipts instead of 1.
Messages mode used is 10000002. CBCASH as transaction reply from Reps_1.  (Download is Appc+LD)



Summary:
Preprint- Receipt with both R00 and R01: In a fast cash transaction,it prints 24 lines in 2 receipts instead of 1.

Description:
In a fast cash transaction,a 24 lines Receipt with both R00 and R01 is printed in 2 reciepts instead of 1.
Messages sent is: PREPRN09 from UNVPRNT and CBCASH as transaction reply from Reps_1.  (Download is Appc+LD)



Summary:
Cash handler MEI flashes after the cash is taken and the shutter is closed.

Description:
In a fast cash transaction, the MEI starts flashing few seconds after the cash is presented. If the cash is taken as soon as it is presented, the shutter closes and the MEI starts flashing afterwards.



Summary:
PS: Suppress Cash Low : Cash Low message suppression is happening before the limit set by the user

Description:
PS: Suppress Cash Low : When the SuppressCashLow registry setting is set to 9, Cash Low message suppression occurs after 5 messages have been sent.



Summary:
Author Director Pictures size has become corrupted

Description:
The picture size of some Directors and Selector pictures has become corrupted so that the picture cannot be displayed.  In some cases the size of the picture keeps scrolling until the maximum viewport has been reached.

The pictures can be changed to make smaller so they can be edited and resized back to a more appropriate size.

This may also may be a problem in earlier releases.

The list of gubbed workers is attached.



Summary:
Supervisor build 58 -  Cancel at Display Config Screen goes to Select Menu Not Configure Menu

Description:
Where a function is cancelled control should return to the host menu - for display configuration this is the configuration menu. However control is returned to the top level select menu.



Summary:
DISP SUPPLY in Replenish menu didn't show cassette missing informationin in test5.3.2.81

Description:
In test 5.3.2.81, type 1 cassette is left out as per test case. The removed condition is reported in EOP fault display. but it doesn't show in DISP SPPLY function.



Summary:
State table is incorrectly found to be invalid when option 80 is set.

Description:
EMV testing 

The default close state is taken when processing a valid EMV state table with AANDC option 80 set.

The standard EMV state flow works correctly when option 80 is set to 0.  When this option is set to 1 however AANDC claims one of the EMV state entries within this download is invalid  despite it being correctly within the STCONT file limits. The EMV download was re-sent after the option 80 was set.

Attached are the logs showing this happening. The first transaction is with option 80 set to 0 and the second is once option 80 is set to 1 and the same download has ben sent to the terminal. The second transaction shows the default close state being entered.




Summary:
Cutover Not Working During transaction

Description:
Cutover is NOT calling automatic INIT during transaction mode. Even the current log size reaches to 90% of configured EJ file size.




Summary:
Remote Supervisor IT build 57 - F12 Key actions Supervisor Exit

Description:
When Supervisor has been entered through mode switch - user can use F12 key to exit - this is incorrect 



Summary:
Fix for GBRU limit of 9999 notes (G359166) missing from Supervisor project

Description:
integration of 7 cass support has caused this to be removed - needs re-integrated	



Summary:
After sending a TREP with empty print buffers, a status message is printed on the Journal saying there was some error while printing on Journal.

Description:
In a Card before cash transaction,when a Transaction Reply is sent with Empty Print Flags, a status msg is printed on the Journal saying there was an error while printing on Journal.



Summary:
NDCHost removes control characters from the end of messages in PASCOM message files.

Description:
The NDCHost tool is removing 'whitespace' from the end of a message - which is resulting in control characters going missing from the end of a message.

The code that reads in the message lines shouldn't remove whitespace as the size of the message has been specified in the file.



Summary:
INIT-receipt in Supervisor giving receipt with missing data

Description:
when enter INIT-receipt in supervisor ,expected to get receipt with data but some data is missing.



Summary:
Option 76 is incorrectly retained over a powerfail which looses rest of download.

Description:
EMV testing 

When option 76 is set to 1 and the machine is power cycled so that the download is lost - the option digit value is retained.

I suspect that the other new options also behave in this way e.g Coin dispenser option 79.

The attached log show this happening - From msgs.txt

Previous to this log 
Option 76 was set to 1.
A download was sent without Configuration Id.
A GIS was sent and the machine reset.

In the log:
Wed May 09 13:06:56 - shows the following start-up with no download "B000"
Wed May 09 13:09:09 - shows 7 note type message being rejected for wrong reason - "too many notes" 
Wed May 09 13:10:07 - shows option 76 being set back to 0.
Wed May 09 13:10:25 - shows 7 note type message being rejected for correct reason - "too many types present"

The value being reported to EMV Exits at "Wed May 09 13:09:09" via the "GetIntVal(idOption76)" is non-zero.



Summary:
MV Diagnostics for CPM

Description:
new grit for CPM only as is not in main body of MV Diags work delivered in build 58

This requirement is being used to track the Diagnostics menu requirement.  The menu will show a list of available devices and their fitness.  The operator can then force a reset and perform a self-test for any device on the list.



Summary:
PS: SilentDebug does not write data to event log

Description:
SilentDebug is not writing Events to the Event log at points where it should.		



Summary:
PS: SilentDebug : Troubleshooting menu problems

Description:
In Troubleshooting menu in Supervisor, when copying logs off machine, in drive list menu, a cancel press returns to the Configure menu instead of the Troubleshooting menu.

When deleting logs - LOGS NOT DELETED is not cleared from screen before displaying new Delete Logs prompt



Summary:
PS: SilentDebug appends to log file when month changes rather than overwrite it.

Description:
PS: When SilentDebug is configured to Log By Day, and a log file is created for a day, when the file is used in the next month, it will append data to it rather than overwrite it completely



Summary:
PRINT CONFIG  prints everything except  Standard Note Counts

Description:
PRINT CONFIG prints every thing that is displayed in DISP CONGIF except the Standard Note Counts.
It also prints the Coin hopper information.

BUILDS: XFS 94.05.00.13 and ANDC 93.02.00.57




Summary:
Cash added in STD CASH are not logged on journal but updated in Supervisor

Description:
Before doing STD CASH we set 32767 for all cassettes in SET CASH.
After STD CASH, the journal shows like the following:

C1 CASH ADDED
TYPE 1=     0  TYPE2=     0
TYPE 3=     0  TYPE4=     0
TYPE 5=     0  TYPE6=     0
TYPE 7=     0  TYPE8=     0

C2 CASH ADDED
TYPE 1=     0  TYPE2=     0
TYPE 3=     0  TYPE4=     0
TYPE 5=     0  TYPE6=     0
TYPE 7=     0  TYPE8=     0

which is supposed to be printed 32767 for all cassettes of CDM1 & CDM2.

But the cassettes are shown updated in Supervisor(DISP CASH).




Summary:
The letter "A" is missing from the P74 screen "START EXCHANGE FAILED " display

Description:
The Letter A is missing from the screen display  
The Screen shows  " START EXCHANGE F ILED " instead of  "START EXCHANGE FAILED

The Fix was provided for the same issue ..see GR1T 351367  for further Info 



Summary:
TAR 306431: Release bulletin keyboard config gives wron location for Bape.cnf & eop.cnf

Description:
Release bulletin gives the following information for keyboard
configuration: 
STEPS TO CONFIGURE NCR PLATFORM KEYBOARD COMPONENT FOR ADVANCE NDC 3.00 





1) On the development PC, import the full platform using the Aggregate
Builder Tool (File->Import->browse down to the "Software" directory of the
platform directory tree). 

2) In the Aggregate Builder tool, open the APTRA Self Service Support
component, Contents, Keyboard and select the current revision, for example
03.00.01. In the configuration window at the bottom, it will show the
Default(NCR) profile. 

3) Select the Default(NCR) profile with right mouse and perform Duplicate 

4) Rename the newly created profile, for example to AdvanceNDC. 

5) Right click the new profile and select open, click Change -> Keyboard.
Now find the backspace key and change it to Delete virtual key (= Clear),
continue Next to do it for the Rear panel as well. Close the windows, save
the profile update and exit Aggregate Builder. 

6) Find the actual bape.cnf and eop.cnf files (in C:\Program Files\NCR
APTRA\Keyboards) that were created as a result of the previous steps and
perform the following updates using notepad. 

a) in bape.cnf 

- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e" 

- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 

b) in eop.cnf 

- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e". 

- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 



7) For verification, open Aggregate Builder and view at least one profile
of the AdvanceNDC Keyboard component profile: There should be no Backspace
virtual keys defined, but Delete virtual keys instead; 



8) Using the Aggregate Builder, export the whole platform, so export the
"Aptra XFS" component (select the version under it to be able to do it). 



See the Advance NDC, Developer?s Guide for more details. 


_________________________________________ 

The bape.cnf and eop.cnf files created will not be in C:\Program Files\NCR
APTRA\Keyboards as stated, they will be in the appropriate component
directory in the archive.



Summary:
TAR 330207: TAR 306431 not carried forward into AA-NDC 03.01.00 release bulletin

Description:
TAR 306431 was raised to correct an error in the location of bape.cnf &
eop.cnf files 

This was resolved in the AA-NDC 03.00.01 release bulletin: 
4.1.2 TAR 306431 Location of bape.cnf and eop.cnf configuration files 

This is clarification of the information contained in section 4.7.1 step 6)
of the Advance NDC 03.00.00 Release Bulletin. 

6) Find the actual bape.cnf and eop.cnf files (in the keyboard SP
component 
directory in the archive) that were created as a result of the previous
steps and perform the 
following updates using notepad. 
a) in bape.cnf 
- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e" 
- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 
b) in eop.cnf 
- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e". 
- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 


but no change has been made in the AA-NDC 03.01.00 release bulletin which
still carries the original text from the 03.00.00 bulletin: 

6) Find the actual bape.cnf and eop.cnf files (in C:\Program Files\NCR
APTRA\Keyboards) that were created as a result of the previous steps and
perform the following updates using notepad. 
a) in bape.cnf 
- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e" 
- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 
b) in eop.cnf 
- replace all Backspace virtual keys "80010008" with Delete virtual keys
"8001002e". 
- replace all " ,0 " with " ,1 " to set the Updated field from 0 to 1 on
all profiles 




Summary:
TAR 349342: Docs need updated to reflect limitation in device status information available

Description:
The APTRA Advance NDC Multi-Vendor Support Reference Manual states that the
device status information will be provided in the same manor and level of
details as per previous single vendor versions of AA-NDC and NDC+. 
Since this data is not available from APTRA XFS and will most likely not be
added the documentation should be updated to reflect the fact that only
device status information that is the result of a non-zero m-status will be
reported. The exact wording of this is obviously at the discretion of the
AA-NDC Engineering team such that they can consider the possible
implications of this information being made public in a multi-vendor space. 




Summary:
TAR 349579: AA-NDC: Ref.Man. Multi Language screens definitions require update

Description:
Background information: 

AA-NDC changed the method of defining multi-language screens in release
02.06.00, however TAR 290452 was raised to fix: 
- resrvd.def file 
- AA-NDC Reference Manual 

The resrvd.def file was fixed but the update to the manual was not
implemented. 

More recently TAR 339201 was raised on the reference manual to update the
correct definition for multilanguage screens. This change has been made and 
will be implemented in release of documents for AA-NDC 03.02.00. 

Further changes are required to the documentation to clarify this whole area 
as since the original change was implemented in 2.6.0 the document has never 
really been updated sufficiently to cover all areas where language screens
are mentioned. 

Here is an example provided by customer (reference to table 3-11 CRT Control 
Character Functions): 
------------------ 
SO 0E hex 

Inserts the screen called by the next 3, 5 or 6 characters. Screens can be
?nested? to 5 levels using SO. 

Note: Screen numbers in the nested screen call are not adjusted for the
language group. A language independent screen number can be specified
either as 3 decimal digits (123), as 4 decimal digits in double quotes
(?1234?), or as 4 decimal digits prefixed by 'u' (u1234). The screen number 
can also be defined as a 4 digit number in group 'l' (l1234) which will give 
a screen in the current language group. 

If a language has been selected and the group size is 1000 or greater, then
a nested screen specified as a 3 digit decimal number will be adjusted for
language. If the language adjusted screen has not been loaded, then the
unadjusted screen will be used instead. This enables logos and pictures to
be defined just once in the base language. 

----------------------- 
The first two sentences in the note are accurate anymore after the Language
Banks and 4-digit screen number functionality was added in the 2.06 release. 


The second paragraph cites two instances where offsetting for the language
base is explicitly stated to occur, both when the group size is >= 1000:
firstly when the supplied screen number is the standard 3-digit format, and
secondly when the l0123 format is used to supply the screen number. 

A 3-digit screen number is now language independent only if the group size
is less than 1000. Since a 3-digit screen number will be adjusted for
language when the group size is 1000, it is then language dependent. 

The first sentence in the note may only be true when the group size is <
1000 (or when <so> is used in C00). 

This lets the host have some control of whether an adjustment is to be made
when Language Banks are used: Supply a 3-digit screen number or a 4-digit
screen number in the l-group like l0123 when an adjustment is to be made, or 
supply a 4-digit screen number enclosed in double quotes or in the u-group - 
"4321" or u4321 when no adjustment is to be done. 

The document also does not provide enough detail to inform the customer how
to download a suitable C00 - if they have already downloaded a non-default
C00 screen when their previous download was not multilanguage. 


------------------------ 
Engineering have investigated this issue and are aware that the publication
requires to be updated: 
Statement from Engineering: 

We never apply language offsets to shift out screens. 

Specifying a SO in the C00 screen is working as expected - the customer
should not specify a C00 screen if they want language offsets to apply to
their timeout screens. 

If the language offsets are correct for >999 screens and C00 is not
specified all should work? 
------------------------- 
Engineering should be able to provide assistance in updating / re-writing
the relevant sections in the document.



Summary:
TAR 347872: Reference manual description for ESC PE display control sequence improvement

Description:
The description in the AA-NDC Reference manual, for the display control code 
"Display Image Files Control" is not clear. 

The control code is <ESC> 'P' 'E' parameter <ESC> '\' where parameter is
described as "The filename of the image file to be displayed". 

There is no reference to the fact that the filename can also include a
pathname. The functionality appears to be that if there is only a
filename, then the file is searched for in the C:\SSDS\DLL folder, however
if a full filename is provided including the path details, then the file
will be looked for and loaded fom the relevant path location.




Summary:
TAR 347293: AA-NDC Docs state exception state to be taken when accepting non-MICR cheques

Description:
In chapter 2 (state tables) in the section ?w ? Cheque accept state?, note 4 
states the following: - 

?An incorrectly orientated cheque will be returned to the cardholder if
there are retries left, and the screen defined by the Incorrect Orientation
Screen entry will be displayed. If there are no retries left, the cheque
will be accepted and the Exception Next State Exit will be taken to allow
Central to determine the acceptability of the cheque.? 

The exception next state has never been used for this (it appears) and thus
rather than changing the product and potentially breaking various
deployments. It would be better to change the documentation to match the
functionality.




Summary:
Wincor - need ability to trigger mode switch from operator panel key press

Description:
enable operator keypress during fault display to act as mode switch - this will emulate the wincor application for ATMS without a physical mode switch.  Authoring change not to be implemented in AANDC 3.2, only enabling of the keypress.



Summary:
Wincor -supervisor on front - clear key causes backspace.

Description:
clear key needs to clear full input. wincor SP quirk reports clear and backspace supported by same key. backspace is action on keypress. AANDC needs to detect and only enable clear.



Summary:
TAR 347144:  Reference Manual should indicate that Timer 4 must allow enable to complete

Description:
Timer 4 is defined as:- 

Cheque/envelope insertion time-out 

There is a limitation that if Timer expires before the anable processing for 
the device has completed, the event is not seen and a hang occurs. This was
found when a value of 8 was used for this worker. 

The documentation should reflect that this timer must be set to a value
large enough to allow the depository to be enabled before it expires.




Summary:
When option 79 is 0 the terminal is incorrectly accepting and dispensing from coin hoppers 5 to 7.

Description:
EMV testing 

When option 79 is set to 0 if the first 4 coin hopper type counts are zero then the message is accepted and any coins requested in hoppers 5 through to 7 will be dispensed.  With option 79 set to 0 a message with 7 hoppers should be rejected.



Summary:
Fault Display shows COIN HOPPER 1 OUT instead of LOW even though it is having suitable coins.

Description:
If the Supply status of the Hoppers becomes LOW with coin dispense transaction, an unsol will be sent like:(here 2 coins are dispensed from Hopper1 there by Supply Status becomes LOW) 
12 000  Y002000000 04000 00 2000.The Fitness of Hopper1 is 4 instead of 2.
And the DISP SUPPLY shows:(for 4-hoppers) 
COIN HOPPER 1 OUT
COIN HOPPER 2 OUT
COIN HOPPER 3 OUT
for 8-hoppers:
COIN HOPPER 1 OUT
COIN HOPPER 2 OUT
COIN HOPPER 3 OUT
COIN HOPPER 4 OUT
COIN HOPPER 5 OUT
COIN HOPPER 6 OUT
COIN HOPPER 7 OUT

And the CHECK COIN function shows:(both for 4 & 8 hoppers)
COIN HOPPER 1 REMOVED
COIN HOPPER 2 REMOVED
COIN HOPPER 3 REMOVED
COIN HOPPER 4 REMOVED

Even though after replinishing the hoppers with suitable coins the DISP SUPPLY and CHECK COIN shows the same as above.



Summary:
Dialup - Dialup problem switching into supervisor and back quickly remains OOS

Description:
When configured for Dialup, switching into supervisor and back quickly results in the machine dialing up to send the P21, and the line dropping. The SST does not subsequently dialup to send the R09 or P20.



Summary:
universal printing on receipt and journal in andc in andc 03.02.00 - vertical tab & char sets issues

Description:
in test cases 6.1.1. to 6.1.15 the printer output is not in unison with the test specs.
in 6.1.1 and 6.1.2 the reciept is not ejected . in 6.1.3  the left and right margin is not distinct .in 6.1.4 (4 verical tab)message is supposed to create 4 vertical lines but its creating around 40 to 50 vertical lines. and in the rest of the tests the proper character set is not getting activated .
the test specs needs to have steps to the modification of the map file and maybe the expected results are too generic .for all the tests the expected result is the same (mei will flash and receipt will be printed and ejected)maybe a little details about the kind of output on the printout can help the tester .



Summary:
values of new options and timers are not traced at start of day

Description:
Stephen P. noticed that none of the new option digits, e.g 79, are traced to the Debuglog window on power-up. See extract below.

Extract of debug log 

applica.. 12:34:04.375 TIMERS

00 - Card holder keyboard response time = 10
01 - Card holder time out response = 10
02 - Close state/Eject Failure CRT Scr. Disp Timout Interval = 3
03 - Communication Message Timeout Interval = 255
04 - Envelope / document insertion response time = 24
05 - Cash Retract Timeout = 5
06 - Communications Off-line Timeoue = 10
07 - Present Timeout = 5
08 - Night Safe Deposit Timeout = 24
09 - Card holder Timeout interval before card capture attempt = 5
10 - Diebold = 0
82 - Camera Delay Period = 1
83 - DCS File Deletion Period = 0
86 - Rear settlement Timeout = 144
87 - DPM Document Capture Screen Timer = 24
88-90 Reserved
91 - InService Supervisor Screen Display Time = 0
92 - SOH Screen Display Time = 4
93 - Manually selected SOH Screen Display Time = 5
94 - Document / Envelope Eject Time-out = 24
95 - Time taken by card holder to retract statement = 24
96 - Transaction Reply Next State Timer = 24
97 - Door Access Feature Timer = 8
98 - Reserved Timer
99 - Reserved Timer
  
<wid>2n3610dc126</wid>

applica.. 12:34:04.453 
77 - Cash Acceptance Timer (BNA) = 24
78 - Cash Rejection Timer (BNA) = 24

OPTION DIGITS 

00 - Camera control = 1
01 - Ready / Supply/ Amount buffer
02 - Auto Voice = 1
03 - Date Format for Supervisor/Journal Messages = 2
04 - Roll Width = 40
05 - Left Print Column = 1
06 - Reserved
07 - Track 1 Format = 1
08 - Reserved
09 - Diebold Status = N/A
10 - TI Control = N/A
11 - Extended Status Control = 0
12 - Specific Command Reject = 1
13 - Card Reader Error Threshold = 10
14 - Track Write Error Threshold = N/A
15 - Transaction Status Information = 1
16 - Hardcopy Backup Hours = 0
17 - Hardcopy Backup Records = 0
18-20 Reserved
21 - Ignore Optical MM Sensor = 0
22 - Hardcopy Backup Log Tamper Reporting = N/A
23 - Envelope Dispenser Messages Sent = 0
24 - Enhan. TI/Sensor Unsol Msg Sent = 0
25 - Media Entry Ind. Flash Rate = 16
26 - Touch Screen Reporting = 0
27 - Remote Relay Active = 0
28 - TPA Host informed of SM installation  = N/A
30 - PAN included in data sent to the DCS = 0
31 - Audio echo of keyboard = N/A
32 - DAS Error Reporting = N/A
33 - Simulates Entry/Exit to Supervisor mode = N/A
  
<wid>4s644g211</wid>

applica.. 12:34:04.468 
----------------------------------
  MULTI VENDOR SYSTEM

...

Stephen Peat
NCR Financial Solutions Group
Discovery Centre, 3 Fulton Road
Dundee, DD2 4SW, Scotland
Tel: +44 (0)1382 591275
Fax: +44 (0)1382 591290




Summary:
Advance NDC component should specify its dependencies in its _comp.ini file

Description:
see summary



Summary:
When Window name is changed using Save As, DebugLog does not cascade the change to the autosave file name.

Description:
When configured to autosave, and the Window name is changed using SaveAs, debuglog does not cascade that change to the autosave functionality.



Summary:
Illegally formatted coin transaction reply is accepted.

Description:
EMV testing (found by Stephen Peat).

The below message would be rejected with an "A04" by NDC+  however on ANDC build 57 this  is accepted by AANDC. In this message a field separator immediately follows the coin field's group separator. 

4<fs><fs><fs>470<fs>01010101<gs><fs>0000A049<fs>002CASH WITHDRAWAL





Summary:
CDM SP Timeout needs updated to 900 secs - maybe other SPs too

Description:
Reminder to do this now that CDM included in XFS can be brought out of suspend using Reset command

Also at same time add (commented out) entries to help in the configuring of 7 cass types



Summary:
When SST enters Suspend due to CDM tampering, sending OOS or GIS does not attempt to clear the device

Description:
When GIS or OOS or the Supervisor mode switch set to Supervisor while the SST is in suspend, then the device (in this case the CDM) should be reset (or at least attempted to be reset) before In/Out of service or supervisor is entered





Summary:
5.7.4.3.9 Test 3.9 Dev PC Install (Mouse Pointer Hiding) - ShowMousePointer reg key is 0 (default) after installation.  Should be 1

Description:
During a DEV & SIM install, ANDC tools are installed by default.  This should be the trigger for updating the ShowMousePointer reg key from 0 to 1.  This does not happen.



Summary:
Resrvd.def screens m31 and m32 not consistent with other alphanumeric screens

Description:
Screens m31 and 32 look different to other alphanumeric screens - for consistency and more professional look, these screens should be modified to have same look as other alphanumeric screens. Have shown issue to Zubair.



Summary:
Enhanced EJ Phase 2 - Defects and Usability Issues in Supervisor Functions

Description:
A number of issues and inconsistencies were seen while testing the Enhanced EJ Phase 2 functionality in ANDC 3.02.

See attached file.



Summary:
AANDC 93.02.00.57 - GBRU SP Reg value RejectOnCashInStart missing in the NCR_SPs.reg file

Description:
The GBRU SP registry value RejectOnCashInstart was introduced after the CashInCashOut code integration was done. So it is missing in the NCR_SPs.reg file.



Summary:
EOP shows UNKNOWN ERROR instead of FATAL for Cash Dispenser(5.7.2.5.3.1.55)

Description:
Observation:
While testing Suspend to fatal for Cash dispenser it is observed that Host is reported about the fatal condition but EOP shows as UNKNOWN ERROR instead of FATAL. 



Summary:
Diebold - Test cash units cause incorrect counts

Description:
test cash will clear purge bin/reject bin  count - On Opteva this clears the reject count for all cassettes affecting counters. 
Looks to be Sp issue but may need workaround as original grit introduced for NDC+ emulation.



Summary:
Statement printer cuts the paper on black mark irrespective of the Registry key "Black Mark Enabled".

Description:
Statement printer cuts the paper on black mark irrespective of  the data of registry value:  "HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\PRINTING\Statement\Black Mark Enabled". This happens even when the key is deleted.




Summary:
PS: Masking for Inclusion of field 'e' in transaction request is not as per the FS

Description:
Found issue with insufficient mask for  inclusion barcode field `e¿ to Transaction Request. Mask currently used is `8¿(bit4), but according to FS this mask should be `16¿(bit5)
Need fix FS or code.
6	3	Send Optional Data
Range 000-015	This entry is as for entry 3 but the data fields are as follows:
bit 1 = `User Data Fields¿
bit 2 = field id `b¿ (Notes on escrow counts)
bit 3 = field id `c¿ (Level 3 note counts).
bit 4 = field id `d¿ (Level 2 note counts)
bit 5 = field id `e¿ (Barcode data)
bit 6 = Reserved
bit 7 = Reserved
bit 8 = Reserved 





Summary:
PS: Barcode data restricted to 512 bytes but it should be 3000 bytes max for 2D barcodes

Description:
Barcode data restricted to 512 bytes inside the code.  GRIT is to update this to 3000 bytes



Summary:
WFSCleanUp issues with EMV Exits

Description:
EMV testing (found by Stephen Peat).

When journal printer is not configured and a separate process uses the PrintToJournal() API, Advance NDC calls WFSCleanUp(), which then bars the process from using CEN-XFS.
This issue should also be found with 3.1.1 where a change was introduced to remove the GetVDM() call from the first GetMVDevive call - in this case the GetJournalPrinter() call.
The best solution is probably to remove WFSCleanUp() from mMVDevice and move it to the mOOXFS termination code. This will cover some MV issues with WFSCleanUp found on Wincor as well.




Summary:
Transaction Request - extension state parameters not correctly populated

Description:
EMV testing (found by Stephen Peat), but this would be a general ANDC Issue. The issue is with build 57 - but the issue was not in build 56.

During the Transaction request state the extension state id's would not appear to be populated with the correct values from thedownload. The primary state table entries are correct.
The below call returns a value of 0 but it has been downloaded as 001.
Logs attached.

    /* Now get the extension state entry */
    camEntry = (unsigned char)GetIntVal (IdPrimExStateData6);

This worked OK with the previous build 56.




Summary:
Print Counters -- Receipt Printing Issue USING FORMS

Description:
When a PrintCounters option was selected from the Supervisor Replenish menu, the data printed on the receipt is not aligned properly. 
Please see the attachment.



Summary:
EJRCPY.TMP and EJRCPY.DAT files are NOT deleted during Auto INIT-success, called by either of Agent, Cutover or Scheduled INIT

Description:
When Auto Init system triggers the following sequense of operations performed 
1)rename EJRCPY.LOG->EJRCPY.TMP 
2)rename EJDATA.LOG->EJRCPY.LOG 
3)copy EJRCPY.LOG->EJRCPY.DAT (if compression is enabled else ignore this step)
4)rename EJRCPY.LOG->EJXXXXXX.NNN) 

That means EJRCPY.TMP and EJRCPY.DAT will be created for every INIT. They wont be deleted. To keep this temporary backups are because of reverting from 
   EJRCPY.DAT->EJRCPY.LOG
  EJRCPY.LOG->EJDATA.LOG
 EJRCPY.TMP->EJRCPY.LOG




Summary:
Diebold - Reset does not clear CDM

Description:
Opteva requires output position to be defined - returning INVALIDCASHUNIT error
MV Diagnostics unit test



Summary:
Unsol messag with w0 message seen at SOD

Description:
Unsolicited message seen at the start of the day before powerup message. This unsol conatins incorrect note denominations info also.




Summary:
Unsol message with w3 is seen in SOD

Description:
Unsolicited message is seen in Start of the day when device is faulty. The Unsol should be sent after power up message.




Summary:
Usability issue for invalid key input while enable/disabling/configure the features Compression,EJ file Size and Disable host control EJ mode.

Description:
While enabling Compression, it prompts a p34 screen(PRESS 1 TO ENABLE/0 TO DISABLE-) . if user enters invalid input (eg. 2) then it will go to previous menu. The same thing is happening with DSBL HOST CONTROL EJ MODE feature and EJ max file size features.
The usability in enable/ disable these faetures should be same as Multiple Destinations.



Summary:
Incorrect Acknowledgement Display of DSBL host control of EJ mode feature

Description:
though the DSBL HOST CONTROL EJ MODE is disabled , it displays ENABLED.
 



Summary:
Prompt screen display issue while enable/disabling Scheduled INIT

Description:
While enabling a Scheduled Init feature through Supervisor function the cursor position is lying on prompt screen hence entered key input display is overlapping the prompt screen.  



Summary:
AANDC 93.02.00.57 - Alpha Numeric State Numbers - junk characters are logged in the STATEDATA window

Description:
In step 11 of test 3.4, the message "+++ Invalid Next State [<junk characters>] - Default Close State" is logged in state data log with some junk characters in it. 




Summary:
AANDC 93.02.00.57 - Test 5.6.4.3.2.12 : BNA initialized but the device status reported as Fatal

Description:
GBRU Cash out testing :
Scenario 1 : In step 4, BNA Initialized successfully but In step 6, GetFitness command reports the BNA device status as 4(Fatal)



Summary:
AANDC 93.02.00.57 - Test 5.6.4.3.2.6 : Reset Required flag not set to 1

Description:
GBRU Cash out testing : In step 2, Transaction status is reported as E4 and Reset Required flag was not set to 1



Summary:
AANDC 93.02.00.57 - Test  5.6.4.3.1.22 : Clear cash clears the counts when device is fatal

Description:
GBRU Cash out testing: In step 6, When GBRU lower transport is racked out and clear cash function is selected, cash counts are cleared and displayed as all 0's. According to the test case, cash counts shouldn't be cleared and ¿Cash Units Error¿ message should be displayed



Summary:
AANDC 93.02.00.57 - Test 5.6.4.3.1.19 - incorrect mstatus is reported

Description:
GBRU Testing : In step 5,6 and 7 according to the test case it should be reported as 44,45 and 46 respectively but it reported as 02 in all the three steps. In step 8, mstatus should be reported as 03 but it is reported as 01.



Summary:
AANDC 93.02.00.57 -  GBRU variant reported as 03 when invalid value is set for ECO 78

Description:
GBRU cash out - test case 3.1.17 :In step 4, GBRU H/W configuration is returned as 03 but according to the test case it should be 01.



Summary:
AANDC 93.02.00.57 - Stack Failed but Transaction successful message sent to the host

Description:
GBRU Cash out testing - test 3.3.3(tests on normal dispenser) :In step 16 of test 2.9, Supervisor entry and exist messages sent to the host but no clear is performed on the cash handler.OOS message was not sent in step 15 even though,the application entered in to OOS mode after sending supervisor entry/exit messages. 
A dispense transaction is initiated after sending GIS message. Stack failed as notes are in transport as a result of step 13. Card was ejected and ready 9 message is sent to the host at the end of the transaction.No message with dispenser error status is sent to the host




Summary:
Displaymanager: Add BeforeNavigate2 Event to Displaymanager to suport webexit

Description:
Displaymanager: Add BeforeNavigate2 Event to Displaymanager to suport webexit. This is a requirement for WebExit. Webexit should be able to receive BeforeNavigate Event



Summary:
w1 sent instead of w4 when notes left at throat

Description:
Issue is in T.O. Cancel Device (623b7na1, 624b7na1) script host, which appears after the time to take notes has expired. This script host seems to be legacy code which is no longer needed. Only setting the NotesAtThroat flag should be retained. The UpdateBNAFitness call is already made elsewhere. And the store which is checked in the If statement is not needed because when the timer times out, then that is it - w4 should be reported - it does not matter if notes are taken after that. So, the If statement to avoid sending w4 should not be there at all.



Summary:
IP's will require updates after Silent Debug Utility FS is updated

Description:
The FS for the Silent Debug Utility requires updates to clarify what needs to be run to enable Silent Debug remotely which means the IP's will need to be changed to reflect this.



Summary:
Remote Silent Debug - "Current Status" command line would be helpful. All command line options should Return 0 if executed successfully

Description:
When controlling Silent Debug remotely it would be helpful if there was a command line option for returning the current status, this would allow a remote user to check the state of Silent Debug before carrying out any further actions.
All command line options for Silent Debug should Return 0 if the command run successfully, CA Software Delivery treats any non-zero Return code as a failure so even though the package has been successfully delivered and run the package appears in the list as failed because it does not get a return code. 



Summary:
Starting Silent Debug crashes the SST - Debug directory not created during ANDC install

Description:
The Debug directory under C:\Program Files\NCR APTRA\ Advance NDC\ is not created during ANDC installation which causes the SST to reboot when Silent Debug is started.



Summary:
Add a hook point for Cash-in Auto Error Recovery

Description:
CIC will probably not have implemented support for BNA auto error recovery within the AANDC 3.2 timeframe.  To avoid changing core AANDC after 3.2 is released to support BNA auto error recovery, it's been agreed to add a hook point in the Customisation Layer (e.g. a Director with a Passthru).  The CIC will later replace the Passthru in the Director with the actual functionality to perform the auto error recovery.



Summary:
Debug logging for Athena print data doesn't handle unsigned data

Description:
The debug log data for print data on Athena needs to take into account that data can now be above the 7F range.  The conversion of values above this range cause the print data to display incorrectly with 'ffffff' prepended to value:

0200 41 4c 20 20 20 20 20 20 20 20 20 ffffff9c 20 39 2e 30 AL         . 9.0

Should be:

0200 41 4C 20 20 20 20 20 20 20 20 20 9C 20 39 2E 30 AL         . 9.0




Summary:
Init Resources - GBRU Counts should be printed if Suspend detected and Assigners need AsynchEvaluate parameter set to True

Description:
Spotted while looking at the printing issues in this area (G363896).

The GBRU counts are not printed if the Resource Initialiser exits with the Suspend signal - this should still be performed as it will not have been the GBRU that created the Suspend signal.

Additionally the Assigners that call GetCashUnitInfo() should have their AsynchEvaluate parameters set to True as this is a synchronous XFS call



Summary:
Printing Character Map for Greek Characters Gamma and Delta wrong

Description:
The characters printed for the Gamma and Delta characters are wrong - they need to be mapped to different characters.
Gamma looks like an upside down 'L' and is mapped to a graphic character instead.

Delta is mapped to the 'Fr' character.

Scan attached to demonstrate



Summary:
POPUP screen is displayed when Cash Unit is full in close state.

Description:
Popup screen is displyed when cash unit is full and Vault the notes at close sate.

Problem is:
   In Script host 851b7na1(851b7na1) the Store name BNASyllyStatus is used instead of BNASupplies



Summary:
Configure EJ Supervisor Function Displays '%' 

Description:
The Configure EJ Mode Supervisor function displays screen m24 - but does not make use of the reserved screen retriever to populate the '%' in the screen definition.

Worker 144n6892dc129 makes up the screen.  Fix is to either remove the '%' from the screen definition (not recommended as it means that the values is not related to the screen), or add the current mode store (110n6892dc129) to the reserved screen worker (146n6892dc129).


     CONFIGURE EJ MODE                  
                                        
 0 STANDARD EJ                          
 1 MULTIPLE EJ                          
                                        
                                        
   CURRENT = %   MULTIPLE               
                                        
                                        
     SELECT FUNCTION-                   



Summary:
Advance NDC checks a dial up flag every 2 seconds even when not configured for dial up

Description:
Zubair agrees this is an implementation fault.
I am raising it as I fear it could be adding to our performance issues. When a transaction takes 30 seconds - this code will have run 30 times, which could create a small delay.
It is very easy to fix - Appliation Core, director 30n4912dc128. The 2 second loop should be only entered when we are configured for dialup.
When a debug ssdsNDCDATA.DLL is used and the CDILOG debug log window is open, the following trace can be seen
Get Integer Data for        idCurrStateType ID [1005], Value [65]
Get Integer Data for   idDialUpDisconnectReceived ID [1337], Value [0]
Get Integer Data for        idCurrStateType ID [1005], Value [65]
Get Integer Data for   idDialUpDisconnectReceived ID [1337], Value [0]
...



Summary:
Coin Dispense update required to correctly support Inhibit Note Retract (Option Digit 2a)

Description:
In AANDC coins are dispensed when the notes have been taken, but in NDC+ coins are dispensed once the notes are presented.

Note:  Also need to test scenario where notes are not taken with option digit 2a set.



Summary:
Extended Journaling customization 

Description:
In test no 5.6.18.4.3 (Journal tracing set to 2 and journal mode is Journal Paper) test no 5.6.18.4.4 (Journal tracing set to 3 and journal mode is Journal Paper) test no 5.6.18.4.7 (Journal tracing set to 2 and journal mode is Journal & EJ) and test no 5.6.18.4.8 (Journal tracing set to 3 and journal mode is Journal & EJ) journal printer output is not in unison with test results disp910  messages ---"CARD TAKEN" string is not showing in the Journal Printer.

In test no 5.6.18.4.11(Journal tracing set to 2 and journal mode is EJ, but with no journal printer) EJ  output is not in unison with test results disp910  ,messages ---"CARD TAKEN" string is not showing in the EJ and in test no 5.6.18.4.12(Journal tracing set to 3 and journal mode is EJ, but with no journal printer) EJ  output is not in unison with test results disp910  and CBCASH messages ---"CARD TAKEN" string is not showing in the EJ.

in test no 5.6.18.4.15 ,5.6.18.4.18,5.6.18.4.21,5.6.18.4.25,5.6.18.4.26, and in 5.6.18.4.30 EJ  output is not in unison with test results and CBCASH messages ---"CARD TAKEN " string is not showing in the EJ. (these tests have the same problem , so i didnt raise separate grits for them ) in test no 5.6.18.4.30 ,  in the disp910 there is a ordering problem of the string." notes taken is coming after what has been written in the test specs . in test no 5.6.18.4.27 once the applications is going to suspend its not coming into service after GIS.



Summary:
Promote 3.X Coupon Printing Using Forms

Description:
in test no 5.7.3.2.1.4  (for standalone campaigns) it is reported that  If TREP is a CBDP (Function ID `F¿) transaction , there will be 3 pieces of paper , but its only showing 2.

similarly, in test no. 5.7.3.2.2.4 (for attached campaigns) it is reported that  If TREP is a CBDP (Function ID `F¿) transaction , there will be 2 pieces of paper , but its only showing 3.



Summary:
Cassette/reject bin removal causing "COIN HOPPER " to be reported to logs and host.(test no:5.7.2.5.3.1.36,37,38,39)

Description:
Observation: When cassettes/reject bin  are removed while performing sensor reporting tests,additional logging is reported to host and journal prints ,for ex: "COIN HOPPER 3 removed".
See attached for details.



Summary:
TAR 345587:  Clear BNA CNTRS does not clear the counts on the journal

Description:
CIC 9 Qatar build. 

Issue reported by PS : 
CLR BNA is showing 15 notes in transport. But I couldn?t find any notes in
transport and is incorrect. 

It's not only the notes in transport but the other counts as well. 
Was also recreated by FGSC on CIC 9 Qatar build. It seems to be triggered by 
4-59. The EOP shows the counts as 0 but the EJ is showing the values. This
is a summary of the customer logs.
....

This TAR has been explained by Engineering as : 

This is not an issue. It is supposed to output a security trace before
clearing the counts, so the counts showing in EJ are the counts just before
it is cleared. The counts shown on screen are the cleared counts. It's
always been this way and is the same for the other devices too. 

This is not detailed in the AA-NDC Supervisor manual, for any of the clear
count functions. 

Also, for CLR BNA, some explanation of the fields is required, for example
: 

The "Notes In Transport" count is actually name given for Notes In Reject
Bin ie. notes which were double-picked or misidentified on 2nd pass of BV. 

The Rejected is to report the number of bad notes rejected at the point the
customer inserts them (ie 1st pass of BV). 

These points are very misleading and not intuitive.





Summary:
TAR 345633:  Cahs Accept State download not correctly applied by AA-NDC when no currencies

Description:
AA_NDC doesn't correctly implement Cash Accept state download when all
denominations are switched off in extension state 3. 


Logs have been provided to Ranjith and Mike S for them to review. 

All subsequent state changes seem to function correctly. 

Something very strange happened. The first time I set the extension state
values to 000 for denoms 1-12 the notes were accepted. Then after changing
some values I could see that notes were rejected. When I then moved back to
all 0 characters the notes were rejected. You can see the flow through the
logs based on my download. There is an initial problem but after that all
seems ok. I noticed that AA-NDC sent up 4 status messages when I saw the
issue but on all subsequent deposits I only saw 2 messages. There are
differences in the debug log. The transaction that rejected the notes
calculates notes to be rejected during the deposit. The earlier deposit
where notes were accepted doesn't. Strange considering identical download
was sent in both cases?? 

I can see a difference in how the transactions are processed even though the 
download is the same. 

Please see 11:40:15,511 for the transaction when the notes were accepted. 

Please see 11:49:45,381 for the transaction when notes were correctly
rejected. For some reason the download doesn't seem to be processed
correctly by the APP in the first instance. From that point on it works as
expected in that any notes not switched on are rejected. I can't work out
why 1st time it should fail to work but all subsequent it works, maybe you
can see something obvious?

TAR to be redirected to the documentation. 

if the 3rd extension state for Cash Accept State is set to all zeros the
application ignores it and leaves the previous state download in place. 

nnnZ000000000000000000000000000 is invalid 

The documentation must be updated to reflect what isn't support for this
state.




Summary:
TAR 344049:  No Help available on CurrencyDispenser attribute on the Cassette total wrkr

Description:
The Cassette Total worker in AA-NDC 03.01.01 does not provide any help on
the recently added attribute CurrencyDispenser. 
Beleive there are 3 options for this attribute, Combined, Primary and
Secondary. The help requires to be updated to ensure the attribute and it's 
properties are described. 

May need to be addressed by the Info. Products team as well as under AA-NDC




Summary:
TAR 338898:  AA-NDC reference manual needs clarification for BNA supplies field in SM

Description:
device status message info in chapter 10 needs to be updated to state that
the supplies data is actually variable and not 1 character in length. When
enhanced message option 45 is on the field contains 4 characters per
cassette not 1



Summary:
TAR 325060:  IP update required to reflect change to default setting for ReconnectOnClose

Description:
TAR 293743 implemented a change to the default setting for the CCM TCPIP
configuration parameter ReconnectOnClose, setting the default value used by
AA-NDC to 1. 

The Supervisor manual has not been updated to reflect this change to the
default value, either in 02.06, or 03.xx. Thje release bulletin makes no
reference to this either. The Supervisor publication should be updated to
reflect the current default value of 1 for this parameter.




Summary:
TAR 341568:  Description of CPM configuration response is unclear

Description:
The description of the CPM configuration is unclear in the Reference Manual. 
Looking at the Reference Manual, the implication is that the values returned 
would be:- 
"00xy" where x could take a value between 2 and 7 (on the assumption that a
CPM will always have at least 1 pocket to accept cheques) and y will be
either "0" to "9" or "A" to "F". 

In fact, the value of y is generated by adding 0x30 to the integer value for 
the configuration. This means "0" to "9" are as expected but the character
representations for 10 to 15 are : ; < = > ? 

This is unintelligible but it has always been the case for CPM and BNA
although for MCRW, the more normal representation of "A" to "F" is used. 

The TAR is raised on the documentation to reflect how the product works
although it may be that the products should change to be consistent with
other devices and with common usage, hence Product Management copied. 

It should be noted that that the values > 7 for the last digit have probably 
never been seen previously as CPM4 is not widely used and therefore the
change to the representation would appear to be more logical.




Summary:
Masking characters should not be printed after 22 characters of Track2 data is printed

Description:
If there are additional masking characters ('0' or 'X') in reserved screen t15, i.e. more than 22 characters in the Track2 data, then these additional masking characters are ignored.



Summary:
FILL ENV application exception

Description:
just after the envelope is dispensed during FILL ENV supervisor.exe crashes with access violation

The description for Event ID ( 0 ) in Source ( Advance NDC ) cannot be found. The local computer may not have the necessary registry information or message DLL files to display messages from a remote computer. You may be able to use the /AUXSOURCE= flag to retrieve this description; see Help and Support for details. The following information is part of the event: 
Advance NDC raised an unhandled exception.
Message: Win32 Exception in C:\ssds\apps\supervisor.exe
Exception code   : 0xC0000005
Exception Address: 0x00382B13
Reason:  0



Summary:
Startapps.vbs - Does not successfully run for other vendors SPs

Description:
For other vendors SPs, executable contained in spstartcommand is not successfully executed from the script
This is probably because :-
WSHShell.RegRead ("HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\spstartcommand") should be
oShell.RegRead ("HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\spstartcommand")
and 
WshShell.Run wosacmnd , 2, true should be
oShell.Run wosacmnd , 2, true






Summary:
Update simulated supervisor functionality to support separate interlock switches on Dual Dispense configuration

Description:
On all ux and athena products the safe interlock has been moved off the door and is now on the module retractions.  Each dispenser has a separate module retraction, which means there will be 2 interlock switches in a Dual Dispense configuration.



Summary:
Build 93.02.00.57 - Promote MV coupon files still not included in the installer - also include update form defn from Promote group

Description:
SIE path is: CustomisationLaeyr.pj -> ReceiptPrint.pj -> Sources\Receipt\Forms
                           Sources\Receipt\Media

Update installer to pick these dirs up and deliver to one location (for universal printers). No need to copy it for the PersonaS receipt printer.
  \XFS\Data\urptr/Forms
  \XFS\Data\urptr/Media



Summary:
Coin counts not journalled correctly for powerfail scenarios

Description:
Input from Devi's coin dispenser testing:
Yesterday, Pradeep took the machine for some time for his own work. Afterwards, we started  "Power Filures" tests as these will take more time. And we got some issues like, after restarting the machine, nothing was printed on the journal about the coins. It printed the Note counts correctly but left the Coin counts empty (no zeros at least)
It prints like:

Notes Dispensed
Type1 = 00001  Type2 = 00001
Type3 = 00001  Type4 = 00001
Notes Remaining
Type1 = 00001  Type2 = 00001
Type3 = 00001  Type4 = 00001

Coins Dispensed
Hopper1 =           Hopper2 = 
Hopper3 =           Hopper4 = 
Hopper5 =           Hopper6 = 
Hopper7 =           Hopper8 = 

Notes Remaining
Hopper1 =           Hopper2 = 
Hopper3 =           Hopper4 = 
Hopper5 =           Hopper6 = 
Hopper7 =           Hopper8 = 

We got all zeros for 4-hoppers with IT10. So, we were doing the same tests repeatedly and found the same every time. Now we are doing Device Connectivity with IT13. I will update the test log this evening.

Input from Pradeep:
I have checked the author work (application core) for power fail issue. Previous project contains Read Coin counts director which was missing in the latest project after Dual Dispense integration is done.
Without reading the counts, we are attempting to journal the counts so it prints null.




Summary:
5.2.1.4- when we select TEST CASH ,EOP displaying not expected "MODULE-1".

Description:
While executing the test case 5.2.1.4 asked to select TEST CASH in supervisor, EOP displaying the expected results and message 
"MODULE-1" which is not expected.



Summary:
Screen Display not proper on Wincor Machine.

Description:
 When Clear Cash option is selected , the screen display is not proper.

Replenish-->8 ADD CASH-->2 CLEAR CASH

The screen display is as below :

00000                         TYPE     000000YPE   000
+REJECTED                 00000            00000
=REMAINING               00000            00000
+DISPENSED                00000            00000
=TOTAL                        00000            00000

	         TYPE     000000YPE   000
CASSETTE   	          00000            00000
+REJECTED            00000            00000
=REMAINING          00000            00000
+DISPENSED           17:58            04/23/2007
=TOTAL                      %	            %
LAST CLEARED           %	            %






Summary:
" 5.2.1.16-when we removed 4th cassette, expected unsol  TI message  not sent to host and journal"

Description:
During the execution of 5.2.1.16 when 4th cassette is removed, expected to get Unsolicited TI message to Host and print on Journal,
but it is not sending to host and not printing on Journal.



Summary:
Hardware configuration data for Thermal Statement printer is 1, should be 9

Description:
Statement Printer test 3.1.1 failed.
Discussed with StephenG.



Summary:
DISP SPPLY and FAULT DISPLAY do not show the status correctly TEST NO:5.7.2.5.3.1.27

Description:
Observation:

In 5.7.5.3.1.27 for Empty 2nd cassette in CDM1 and low bottom cassette in CDM2 following is observed for DISP SPPLY and FAULT DISPLAY

DISP SPPLY: Doesnot show status of cassettes at all.
Similar behaviour is observed for the next steps in the same test.
FAULT DISPLAY: Reports status of both cassettes as "LOW" when 2nd cassette in CDM1 is empty.
Similar behaviour is observed for the next steps in the same test where bottom cassettes are emptied.
 
Also for the next steps in the same test

- Overfilled Bin in CDM1 not observed.
- Interlock open not reported.



Summary:
AANDC 93.02.00.57 - Counts printed to journal are not correct and in improper format

Description:
GBRU Cash out testing: GBRU rest operation is performed when the device is not in good state and the cash counts printed to the journal before and after the reset. The counts printed to the journal are not correct ('%' is printed in place of counts) and the print format is also not proper. The correct counts with proper format are printed when tried with supervisor function PRNTCNTRS.

Note: This issue was not seen on the previous AANDC build 56.




Summary:
Currencies are ordered in the journal for CIC following a textual order and not a numerical one.

Description:
In other areas of the CIC when the currencies are ordered to be shown on the screen (confirmation screen, supervisor options 58/59) they are ordered in a numerical way, but for journaling (i.e. after encash) a textual order it's used. That is the current order printed is: 
EUR 10
EUR 100
EUR 20
EUR 200
EUR 50
USD 1
USD 10
USD 5
It should be printed this other way:
EUR 10
EUR 20
EUR 50
EUR 100
EUR 200
USD 1
USD 5
USD 10

When implementing this issue the possibility of integrating all ways of ordering the denominations and preparing them both for printing and screen showing into a single code. 
 
This issue has been highlighted by UAE PS (Abbas Jafri).



Summary:
w6 msg can be sent when attempting a transaction

Description:
This can occur when previously a w6 was sent and then a transaction is attempted and the device is still in a fatal state. The issue seems to be that the ErrorCode has not been reset to a valid value for the msg sent from CashAccept state (looks like it should be in worker 558b7na1).



Summary:
StdAddCash function only initialised 4 cassette types and does not clear the Notes Dispensed counters - Integration Issue

Description:
The coded StdAddCash deals with 7 cassette types ok but only initialises the 1st 4 types. Also the dispensed counters are not reset to 0 as part of the Std Cash - this should be added to the authored part



Summary:
Update RESRVD.4012 file for 7 cassette types

Description:
Screen I03 needs updated.



Summary:
Supplies issues - cassette status reported incorrectly and should only be reported when there is an attempt to dispense

Description:
See UT log for all scenarios with supplies issues.  This is a latent problem in the product but is amplified with Dual Dispense support.  Agreed at UTC milestone review to raise a GR1T to try to emulate NDC+ behaviour.



Summary:
Intial OOS screen coming into focus instead of DM html page display

Description:
Intial OOS screen coming into focus instead of DM html page display



Summary:
InitBNA option45 check for retract is incorrect

Description:
In Retract Or Vault script host (281b8na1). It checks option45 is set to specific values eg, 4, 5, 6, 7 instead of looking at the bit. So setting option 45 to 15 means it thinks retract is turned off, when it is on.



Summary:
Supervisor function DISP SUPPLY (Replenish Menu) does not report Card Capture Bin being nearly full

Description:
Supervisor function DISP SUPPLY (Replenish Menu) does not report Card Capture Bin being nearly full, however the fault display shows:
CARD READER
 CAPT BIN FULL SOON



Summary:
Mousehook   is not working with Promote

Description:
Mouse hook for  touch screen on displaymanger is not working with Promote



Summary:
Journal  ¿HOST TIMED OUT¿ when host times out and transaction is cancelled

Description:
Original

 

13 Bills inserted, request sent to host, Host timed out, T-CODE 1 printed on the journal, where it is not true.

Required a new T-CODE ¿W¿ or any describing ¿HOST TIMED OUT¿ and based on the 

¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW.

 

Corrected

 

13 Bills inserted, request sent to host, Host timed out, nothing printed on the journal, Bills returned.

 

Required a new T-CODE ¿W¿ or any describing ¿HOST TIMED OUT¿ and based on the 

¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW.

If

T-CODE ¿W¿ executed as `HOST TIMED OUT¿

                  ¿VAULTED¿

 

T-CODE ¿Y¿ Print ¿FORCE VAULTED SUSPECTED TXN¿ 

Or

       Leave in the ESCOWE

Print ¿BILL/S IN THE ESCROW ATM OOS¿

Else

RETURN the bills as normal, if not taken retract them. In this case will have the full status.

13 Bills inserted, on confirmation Screen did not responded, timed out, Bills returned, no status printed on the journal  
*************************************
Some additional info to consider while doing this RFC

T-CODE ¿X¿ description ¿ADD MORE SELECTED¿ 
T-CODE ¿Z¿ description ¿NO RESPONESE FROM USER¿ based on the ¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW. 
T-CODE ¿Y¿ description ¿FORCE VAULTED SUSPECTED TXN¿ 
T-CODE ¿O¿ description ¿BILL/S IN THE ESCROW ATM OOS¿ a separate status. 
T-CODE ¿W¿ description ¿HOST TIMED OUT¿ ¿ based on the ¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW




Summary:
Journal distinctly a customer timeout or a customer cancel whenever a w1 message is sent.

Description:
Original 

RFC

Correction 

[Prints ¿T-CODE 1¿ ] TXN CXD BY USER where user never responded and money returned (when USER IS NOT THERE TO RESPONSE bills should not be returned and as they are recognized Bills we should Vault them] with T-CODE ¿Z¿ and T-CODE ¿Y¿.

Required T-CODE ¿Z¿ or any available to print description ¿NO RESPONESE FROM USER¿ and based on the ¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW.

If

T-CODE ¿Z¿ executed as `NO RESPONSE FORM USER¿

                  ¿VAULTED¿

 

T-CODE ¿Y¿ Print ¿FORCE VAULTED SUSPECTED TXN¿ 

Or

       Leave in the ESCOWE

T-CODE ¿O¿ Print ¿BILL/S IN THE ESCROW ATM OOS¿

Else

RETURN the bills as normal, if not taken retract them. In this case will have the full status.
13 Bills inserted, on confirmation Screen did not responded, timed out, Bills returned, no status printed on the journal  
*************************************
Some additional info to consider while doing this RFC

T-CODE ¿X¿ description ¿ADD MORE SELECTED¿ 
T-CODE ¿Z¿ description ¿NO RESPONESE FROM USER¿ based on the ¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW. 
T-CODE ¿Y¿ description ¿FORCE VAULTED SUSPECTED TXN¿ 
T-CODE ¿O¿ description ¿BILL/S IN THE ESCROW ATM OOS¿ a separate status. 
T-CODE ¿W¿ description ¿HOST TIMED OUT¿ ¿ based on the ¿Download Close State¿ take the action ¿RETURN¿ the bills, VAULT or leave them in the ESCROW



Summary:
53 Clr BNA function journaling does not always include retract counts.

Description:
When the Replenish Menu function Clr BNA (53) is run it should first journal all current existing counts, then go and clear them and display the cleared counts on screen. The issue is that if this is done immediately after entering Supervisor then the Retracted count is 0, even if there have been retracts before entering supervisor.



Summary:
if DM is displaying BANNER ,NDCDisplayhook should always return true.

Description:
if DM is displaying BANNER ,NDCDisplayhook should always return true.



Summary:
Difference in K screen functionality between NDC+ and AANDC

Description:
The NDC+ FS states that screens K04, K05 and K06  ensure that downloaded changes to the prnter settings do not impact any external applications that may wish to use these devices, these K screens, are sent to the printers on exit from NDC+ ie immediately prior to executing external applications such as diagnostics.

K Screens K04, K05 and K06 are not implmented in AADNC (probably because K Screens K01, K02 and K03 are prepended to every print data - depending on which device. The information about K04, K05 and K06 will need to be removed from the referance manual.

Addtionally:

The K Screen K14 which was used by NDC+ to print graphics to the statement printer no longer is used and any referance to it will need to be revomed from the referance manual. Graphics printing on the statement printer is now handled via form based printing.



Summary:
EJ Phase 2 where the CD can be used for secondary backup for auto init it is not acceptable to eject after every write operation

Description:
For EJ Phase 1 (what is in 3.1.1) this would be an RFC but for EJ Phase 2 where the CD can be used for secondary backup for auto init it is not acceptable to eject after every write operation - so it would be a bug fix.
change would be 
WriteEjtoCD method on Com Control and internally should have an additional parameter specifying whether eject should happen or not 
In the case of Multiple Destination whether eject should happen or not should be based on a registry entry - there is small IP impact here. I don't think we should provide a supervisor function for this. It is useful only for people who are customizing. The default behaviour should be to eject after write.
In the case of Secondary Backup for Auto INIT it should NEVER Eject after write.
I will also need to update the sharepoint with a new CDWrite component to fix this and this will help Zibi because he can pick that up for 3.1.1.




Summary:
HardCopy backup not getting created in Dual Mode

Description:
In the Test Case 7: DUAL Mode ¿ JP Connected ¿ Enconfig Parameters 16 & 17= 000

Test objective is as below :
When Dual mode (JRNL = Dual) is set and journal is connected , check if EJ Logs and HardCopy backup are created after sending enhanced configuration parameters 16 and 17 with non-zero values.

But no Hardcopy backup files (HBData files) created , in both the cases 
1. Test Case 7: DUAL Mode ¿ JP Connected ¿ Enconfig Parameters 16 & 17= 000 and
2. Test Case 8: DUAL Mode ¿ JP Connected ¿ Enconfig Parameters 16 & 17 =255



Summary:
test spec incorrect - when in suspend mode, reject C01 only given when come out of suspend mode

Description:
 test number - 5.5.6.1.38



Summary:
Desktop is displayed/visible for a brief period when entering sysapp

Description:
when entering diagnostics, the desktop is visible for a brief period before the sysapp main menu is displayed. You can see the desktop icons etc. etc. which probably shouldn't happen. The sysapp window should probably be displayed on top of the ANDC supervisor window rather than the ANDC window disappearing before the sysapp window is displayed. Check what other applications do and what the correct behaviour should be.



Summary:
Test 5.5.3.1.3 : test description incomplete in ITS. (Test partially failed due to one of the deliverables not in the build - tracked under a separate GR1T)

Description:
Part 1 - Passed
Part 2 - Validate checksum utility not yet delivered into the build so could not test it
Part 3 - Test description is more of a test objective in terms of its style and lack of detail. discussed the testing required with zubair rather than reading the FS. Zubair recommended going through a selection of the EJ regrression tests which is what I did. I went through the following regression tests : Section 1, 4, 5.1, 5.3. 5.5, 6.1, 7.1, 7.3, 7.5, 7.7 (agreed this with Zubair that a subset of EJ regression tests is sufficient to validate the Enhanced EJ Phase II regression testing - to ensure there is not impact on existing EJ functionality. All of these tests passed. The test documentation needs to be updated to reflect the specific regression testing that needs to be performed rather than in the style of a test objective. Raised 1 GRIT but there are 2 issues - incomplete documentation and software missing from build. Root cause analysis could be difficult if it is left as 1 defect.



Summary:
PS testing - Silent Debug max size incorrect as well as wrapping around behaving incorrectly

Description:
The ini file max size is 100M, but should be 10M as in the FS
It wrapped round too early (did not reach 100M)
It did not wrap round from the beginning; Counter update not done
Two <END> markers are in the file

For more info contact Jan/Andrew



Summary:
TAR 348071 - CIC10 hangs if rejected notes are taken when a timeout retract is issued but the notes are removed as it beings to retract. 

Description:
Insert card 
Select BNA transaction 
Insert X valid notes 
Remove rejected notes (if any) 
Verify notes counts are correct on Confirmation screen. 
Press Add More on the confirmation screen 
Insert Y invalid notes 
Do not take the rejected notes. Wait for timeout. 
Do not select any option on timeout screen. 
Remove the notes when the device attempts to retract it. 

customi.. 12:30:48.467 *w*0, M-00, R-0 OPERATION OK A/C 149500501675 
ESCROW COUNTS:016 SAR 50 X 004, SAR 100 X 004, SAR 200 X 004, SAR 500 X 
004 VAULTED COUNTS:000 RETURNED COUNTS:029 
customi.. 12:31:29.733 Cancel operation before retract 
customi.. 12:31:29.733 Deactivating - T.O. Cancel Device - 1A344TP2 
customi.. 12:31:29.733 Retracting Notes <wid>737b7na1</wid> 
customi.. 12:31:29.749 In Retract 
customi.. 12:31:29.936 ConfiguredDenomCount : 8 
customi.. 12:31:29.936 AcceptedBankNotes : 4 
customi.. 12:31:29.936 Escrowed Notes 3 4 
customi.. 12:31:29.936 Escrow Counts [Type : 4][ Note Count : 4] 
customi.. 12:31:29.936 Escrowed Notes 4 4 
customi.. 12:31:29.936 Escrow Counts [Type : 5][ Note Count : 4] 
customi.. 12:31:29.936 Escrowed Notes 6 4 
customi.. 12:31:29.936 Escrow Counts [Type : 7][ Note Count : 4] 
customi.. 12:31:29.936 Escrowed Notes 7 4 
customi.. 12:31:29.936 Escrow Counts [Type : 8][ Note Count : 4] 
customi.. 12:31:29.936 Extended Data : ,0;16 
customi.. 12:31:29.952 EscrowCount.Data : 16 
customi.. 12:31:29.952 EscrowedNotesString : $$
$$~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
customi.. 12:31:30.061 Previous Retract count : 40 
customi.. 12:31:30.061 In Retract... 
customi.. 12:31:30.061 ConfiguredDenomCount : 8 
customi.. 12:31:30.264 Lastcashinstatdict.count is 4 
customi.. 12:31:30.264 Values : 4 4 
customi.. 12:31:30.264 Escrowed Count : 4 4 
customi.. 12:31:30.264 Values : 5 4 
customi.. 12:31:30.264 Escrowed Count : 5 8 
customi.. 12:31:30.264 Values : 7 4 
customi.. 12:31:30.264 Escrowed Count : 7 12 
customi.. 12:31:30.264 Values : 8 4 
customi.. 12:31:30.264 Escrowed Count : 8 16 
customi.. 12:31:30.264 Escrowed count at last : 16 
customi.. 12:31:30.264 Retract Enable 
customi.. 12:31:30.264 Escrow counts string null... 
customi.. 12:31:30.264 CanRetract = True, Calling Retract 
customi.. 12:31:36.811 Event Received 'BNA Enable Script Host'/208b7na1 -
GBNA_Taken() 
customi.. 12:31:36.811 Refunded.Data=0, CashinOK=1, CashinFailed=0,
Report200Notes.Data=0, TempEscrowCount.Data=16 
customi.. 12:31:36.811 Turn BNA MEI/BEEP Off <wid>716b7na1</wid> 
customi.. 12:31:36.811 Stop FDK Keys Caller <wid>313b7na1</wid> 
customi.. 12:31:36.811 Taken Caller has signalled <wid>299b7na1</wid> 
customi.. 12:31:36.811 in stop fdks mei and beep off director pass thru
signalled <wid>289b7na1</wid> 
customi.. 12:31:36.811 BNA Rejected Notes have been Taken - Enable continues 
automatically. <wid>304b7na1</wid> 
customi.. 12:34:36.530 'BNA Enable Script Host'/208b7na1 - deactivate():No
handling 




Summary:
AANDC 93.02.00.56 - Cassettes supply status sent to the host is different from the supply status printed to the Journal

Description:
When notes are retracted, an unsolicited status message is sent to the host and printed to the journal and Cassettes supply status will be reported  as part of the unsol. All the cassettes supply status is included in the retract message sent to the host but the message printed to the journal includes only the accessed cassettes supply status and the remaining cassette status is reported as 0 (no new state).




Summary:
 "COMMUNICATIONS DOWN" is observed instead of  "COMMUNICATIONS CLOSED"

Description:
For 5.5.8.1 at step 28 and 5.5.8.5 step 5 observed "COMMUNICATIONS DOWN" instead of  "COMMUNICATIONS CLOSED".

When NDC host is not started and application is started "COMMUNICATIONS DOWN" is displayed in faults menu instead of  "COMMUNICATIONS CLOSED".



Summary:
OleServer closing when application is in EMV applicaton confirmation screen with time out mulitple times

Description:
When application is in EMV application confirmation screen with Frames based DM3. Display Manager is not responding after 4 th time TIMEOUT-YES is selected.



Summary:
93.02.00.56 -Journal printer margin settings are not properly set.

Description:
5.5.8.7 GR1T 352808 (TAR 318174) 
Testno: 7,step:9

while testing TRACE ON ,line spacing is observed between the lines printed on the journal.Indention is observed for few lines.

ex:

 RECV:1\\\2

SEND:22\000\\9

RECV:3\\\1A\\0000201002030020600109002
10

   SEND:22\000\\9
RECV:3\\\12\000A0100010110070060030010
04

   SEND:22\000\\9

is observed instead of 
RECV:1\\\2
SEND:22\000\\9
RECV:3\\\1A\\000020100203002060010900210
SEND:22\000\\9
RECV:3\\\12\000A010001011007006003001004
SEND:22\000\\9







Summary:
Memory Overwrite When accessing VerifyCassetteType from Supervisor

Description:
There is a buffer overrun condition when the currency ids are initialised in the VerifyCassType function.  The mString 'Export' method appends a NULL character to the exported string and only 3 characters are allocated.



Summary:
ANDC 93.02.00.56-Supervisor Mode/Advanced TCP\IP Configuration Menu options- LEN SIZE,LEN ADJUST,LEN OFFSET,RCV TIMEOUT are accepting values above the valid range.

Description:
5.10.12.1 TCP/IP regression testing- Testno:7,9,10,11.

These values are dependent on MSG FORMAT which can have only 2 values 0 or 3.
If MSG FORMAT is 0 then these values donot take any other value than 0.
The following was observed with MSG FORMAT value 3.

LEN SIZE:According to APTRA documentation,it should accept values 0,1,2,3,4.
But it is accepting values upto 999999999.
Specifically observed that when length size is 2,couldnot change it to 1 and reports an INVALID VALUE
LEN ADJUST:According to APTRA documentation,if LEN FORMAT=2 then LEN ADJUST is 0-99999999
If LEN FORMAT is 0 or 1 then LEN ADJUST is 0 to 9999.

Irrespective of this dependency,it accepts values upto 999999999.

LEN OFFSET:dependancy is same as LEN ADJUST.same is observed as LEN ADJUST.
RCV TIMEOUT:Valid range 0-30000.This is also accepting values upto 999999999.



Summary:
SilentDebug takes too long to return control when installing / uninstalling when AANDC is running

Description:
When AANDC is running, and SilentDebug is installed / uninstalled, it takes too long to return control to the command window.



Summary:
Advance NDC Installer incorrectly installs the NCRSILENTDEBUG service

Description:
Build 93.02.00.56
A small problem in the installer created issues seen by Jiri in integration test where the command line tests of NCRSILENTDEBUG did not produce expected results.

Andrew carried out investigation and spotted that this inconsistency:
Service Name : 	SILENTDEBUG
Service Display Name  : 	NCRSILENTDEBUG

These texts should be the same - both NCRSILENTDEBUG.
Mike confirmed the issue is valid.



Summary:
BNA tamper indicators implementation for cash-in component excluding diagnostics.

Description:
BNA tamper indicators implementation for cash-in component excluding diagnostics. 
 - Journal cassette insertion / removal through garage door open event.
 - Report to switch through Enhanced Cash Deposit msg specs (buffer C implementation). 



Summary:
Support TI for GBNA/GBRU except durign diagnostics. 

Description:
This is to extend GRIT 326798 to journal messages being sent to the host on cassette statuses specially covering the cases - Cassette In and Out to make sure that we are journalling TI events for cassette removal and insertions.



Summary:
Advance NDC prints a Promote coupon using forms where raw data printing should have been used

Description:
Build 56 - problem in one of the flow points, not in other flow points

Info from the Promote Group - see attachment (e-mail)




Summary:
Advance NDC prints a Promote coupon with a wrong resolution parameter causing an error

Description:
Build 56

Info from the Promote Group - see attachment
Already briefly investigated and problem is in code (bitwise or used where bitwise and should have been), see attachment




Summary:
Support Agilis for IX 3.1 platform (CEN3)

Description:
Diebold Agilis 3.1 for IX hardware now available. Support for this platfom will allow the latest ANDC to run on older Diebold terminals.
The successful implementation of this RFC will retire ANDC 3.0 IT12 (CEN2) dev path.



Summary:
ANDC 93.02.00.56 - Supervisor application escaped when tried to configure GBXX

Description:
when GBRU is fatal(device status shows hardware error) and GBXX config- option 39 is selected in configuration menu, supervisor application escaped. In eventvwr it shows unhandled exception in Supervisor.exe.



Summary:
Status Handler Migration issues

Description:
Status Handler migration has some problems -
1) Night safe has an access violation - 
2) Cash handler has an access violation 
Still need to check for other devices 



Summary:
TAR 347840 - mError when retract issued on initBNA in supervisor for CIC10

Description:
Engineering have looked at this issue and believe there is a porblem with
the code. This will be resolved under this TAR. 


mError 
Object ID: 61992384 

Process ID: 3644 

Thread ID: 3648 

Process Filename: C:\ssds\apps\supervisor.exe 

SupplyPoint Owner: NCRScotland.SSDS 

SupplyPoint Source:mError 

Description: <SCFILE>
f:\auto93010014\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>
<SCLINE> 1381 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 2 Domain: 114
Error Number: 2 Worker Id: Description: VBScript has reported an error in a
script passed to it. 

The error is near line number 197 of Script Host Worker ID: 283b8na1. 

VBScript has given the following error description: 

'Wrong number of arguments or invalid property assignment:
'GetNextActiveDenomCount'' 

The Source of the Exception is 

'Microsoft VBScript runtime error' 

Script is: 

'ProcID**activate**END 

Dim EscrowedNotes 

Dim CurDenom 

Dim Values(50) 

Dim CashUnitErrorFlag 

Dim sCurrID 

ReDim sCurrID(0) 

Dim objWSC 

Const CIM_POSITION_DEFAULT = 0 

Const CIM_TO_RETRACT = 0 

</FREE> 




Summary:
TAR 319689 - BNA counts not updated when customer holds rejected notes at exit

Description:
Problem whereby notes in the escrow are not counted when checking on the BNA 
counters within the supervisor on aa-ndc. Only the rejected note count is
updated when checking the suppervisor after a bna hardware error [rejected
notes held in output slot]. 




Summary:
RFC 342816 - Physical cassette low on fault disply - rework the TAR fix again

Description:
These is the collated information for this problem

1) SG pointed out that our ooxfs.log is getting filled with this data every 4 seconds, see attachment SG_comment. This also suggest a possible improvement. But all this can be forgotten as the original problem in the SP is now fixed!

2) Information from Sandy that the new SP in XFS 4.5 does not have the deficiency any more if properly configured (see attachment) and our workaround can be exterminated.




Summary:
Suspend message is not sent to the host or logged in the journal

Description:
While creating the suspend condition in GBRU,no message is sent to the host nor logged in the journal printer.

While performing the testcase number 2.4.15 - Suspend ¿ ANDC 5 Minute Timeout (Notes Held at Exit),in the third step a suspend message(12 000  E0010200000 30000 13534361A1 12220)should be reported to the host and logged in the journal.But while doing testing,the message is not getting logged.




Summary:
AANDC 93.02.00.56 - Data given in the TR Reply is not printed to the receipt/journal even though the correct printer flag is specified

Description:
Spotted this issue while running Extended journaling tests. Receipt and Journal are in working condition, but the data in the TR Reply is not printed to them. 



Summary:
ANDC 93.02.00.56 Extended Journaling functionality - Card Taken/Cash Presented information logged twice to the Journal

Description:
Test 4.3 -  When Journal tracing mode is set to 2 or 3 and transaction type is FAST5,CBCASH and CBDP, Card Taken information is logged twice to the journal. The result was same with all journal configurations. e.g.for CBCASH when tracing is set to 3, the following was printed on journal
       *TRANSACTION START
 11.25.59 CARD TAKEN
 11.26.06 NOTES PRESENTED 1,1,00
 11.26.06 NOTES PRESENTED 1,1,00
NDC DEMO
EJECT DISPENSE
AND PRINT
 11.26.14 CARD TAKEN
 11.26.20 TRANSACTION END

It also noticed in CBCASH transaction, the CASH PRESENTED information is logged twice. Check the above example 

Note: When Journal is configured only for EJ, CASH PRESENTED information is logged only once



Summary:
Wincor - Application mError where CDM Fatal during clear cash

Description:
removed mError & update logic to only clear application counts where SP clear counts is success



Summary:
Message Reflection tests are incomplete (test descriptions) with missing test files

Description:
Test 5.6.8.1 : AddFS.DLL& NDCDemo files missing - noone can tell me where they are - files in exits.zip are for regression test only
Test 5.6.8.2 : Regression testing : VISA2 comms configured - need to be specific how to configure dialup, alos not clear how this text relates to the rest of the test as it is indented; Also not specific enough the outcome of the dialup testing - the specific message content that should be be seen - these tests should be able to be run by someone who is not a developer



Summary:
i27 screen not defined in resrvd.def and  p34 prompt screen should have 32 characters

Description:
i27 screen not defined in resrvd.def and  p34 prompt screen should have 32 characters



Summary:
UnInstaller is not removing EJOptions key from  registry (HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC)

Description:
UnInstaller of AANDC3.2 is not removing EJOptions Key from registry from "HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC"  location.
EJOptions  registry keys information has to be added to AdvanceNDC.reg file with all default values.



Summary:
AANDC 93.02.00.56 Extended Journaling - CARD TAKEN message is printed when using a DASH card reader

Description:
Test 5.6.18.4.24 failed and the reason is that CARD TAKEN message is printed when using DASH card reader. eg: CARD TAKEN is printed in step 5 once after PIN ENTERED message and also before TRANSACTION END message. The CARD TAKEN message is printed twice during FAST 5, CBCASH and CBDP transactions. It is printed once in close state in case of a DISP910 transaction.



Summary:
AANDC 93.02.00.56 Extended Journaling - TRANSACTION END message is not printed when card read fails

Description:
There is a scenario which is not covered in the Extended Journaling tests. If card read fails, the card is ejected immediately and it prints the "TRANSACTION START" and "CARD TAKEN" messages. It does not print the "TRANSACTION END" message. This is because we print the TRANSACTION END message in close state and in the above case, control does not go to close state. 

This has been spotted during integration testing - when a track 2 card reader is used and the download says to read from all tracks.



Summary:
Reset is calling two times with INIT_BNA

Description:
Two BNA Resets happening for INIT_BNA (option 54 of Replenish menu).
The reason for this is Reset is called even for Status = 0 in Availability Changed event. 




Summary:
SoD GetSupplies does not report cassette info even with extended msg reporting on.

Description:
Cassette information is missing for the terminal command 1fsfsfs72 (GET_SUPPLIIES).

Applica.. 13:33:54.921 Message Handler 1 - new message received: [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]73]  
<wid>0n87dc7</wid>

Applica.. 13:33:54.921 Processing Message - Terminal Command  
<wid>13l194y12</wid>

Applica.. 13:33:54.921 Validating message...  
<wid>19l194y12</wid>

Applica.. 13:33:54.937 Deformatting message...  
<wid>3l195y12</wid>

Applica.. 13:33:54.937 Fitness Data Request received  
<wid>45l195y12</wid>

Applica.. 13:33:55.031 [Message Handler Control] - Add Terminal Data Signal  
<wid>4l290b7</wid>

Applica.. 13:33:55.062 Message Handler - Terminal State response sent: [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]E00000[Unicode-x1D]G0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]w000100020[Unicode-x1D]V0]  
<wid>24l195y12</wid>

Applica.. 13:33:55.125 Message Handler - awaiting incoming message...  
<wid>8l194y12</wid>

Applica.. 13:34:00.500 [Message Handler Control OOS Started]  
<wid>10l312b7</wid>

Applica.. 13:34:00.515 Message Handler 1 - new message received: [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]72]  
<wid>0n87dc7</wid>

Applica.. 13:34:00.515 Processing Message - Terminal Command  
<wid>13l194y12</wid>

Applica.. 13:34:00.531 Validating message...  
<wid>19l194y12</wid>

Applica.. 13:34:00.531 Deformatting message...  
<wid>3l195y12</wid>

Applica.. 13:34:00.531 Supplies Data Request received  
<wid>44l195y12</wid>

Applica.. 13:34:00.546 [Message Handler Control] - Add Terminal Data Signal  
<wid>4l290b7</wid>

Applica.. 13:34:00.578 Message Handler - Terminal State response sent: [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]IAD1[Unicode-x1D]E11000[Unicode-x1D]G2111[Unicode-x1D]V11111[Unicode-x1D]w0]  
<wid>24l195y12</wid>



Summary:
AANDC 93.02.00.56 - Extended Journaling tests (5.6.18) failed

Description:
Extended Journaling tests (5.6.18 GR1T 356008 - To include Zubair's Extended Journaling customization to the core product) failed. No difference is seen in journaling when different journal trace levels are set.




Summary:
DebugLog will not start when the SilentDebug NT Service has been started, but tracing is off

Description:
By Design, SilentDebug and DebugLog can not run at the same time.  When SilentDebug NT service is started, DebugLog is locked out.  However, DebugLog should only be locked out when Tracing has been enabled.  A new error message should also be added, so that the user knows that DebugLog is running, if tracing is attempted to start when DebugLog is running.



Summary:
Definition of Coin Types in AdvanceNDC.reg does not match the COIN SP defaults of the coin cash units

Description:
The AdvanceNDC.reg uses GBP where as the COIN SP uses USD as the currency. Also the actual values do not match. The easiest fix is to match the SP and also the ANDC FS.




Summary:
The EnhancedEJ (InitEJ) project is linking ssdsNDCFUNS.lib, which is risky to do so

Description:
I already discussed this issue with Zubair and he is willing to tidy this up.

Points
1) The InitEJ project is linking ssdsNDCFUNS.lib. However, this lib deliberately resides in a temporary directory so that nobody links to it ( ..\..\..\NDCCore\Binaries\Xfs\Release\Obj).

2) When the ssdsNDCFUNS.dll is updated, which is an often case, every developer would have to rebuild InitEJ.dll. It is unlikely that developers will remember that. ssdsNDCFUNS.dll is supposed to have exported functions for the author flows, which are dynamically loaded via userfuns.scr. When a new function is added, at the moment, only the userfuns.scr and the flows have to be updated. Adding a dependency on InitEJ.dll would create problems in labs etc - it is true though that product / service pack builds would handle this dependency without a problem.

The best solution seems to use dynamic invocation of the required function in ssdsNDCFUNS (using GetProcAddress).



Summary:
Wincor build 56 - application exception

Description:
testing journal paper status for mv diagnostics.
persitant store merror when paper out --  eventlog & debug log attached.



Summary:
Add reg settings to CIC reg file to prevent clearing at SoD by driver/SP.

Description:
The application needs to be in control of where the notes are moved and so the GBxx driver and CIM SP should have the auto clear turned off using the appropriate reg settings.



Summary:
347497:  Tir - request for TAR 336099 & 325511 on AANDC Americas sandbox

Description:
347497:  Tir - request for TAR 336099 & 325511 on AANDC Americas sandbox



Summary:
TAR 346525 - Handling of cancelled deposit disables FDKs for next deposit

Description:
CIC 9 Qatar Build 

PS reported that a transaction was performed, a deposit made but the
cardholder could not confirm the deposit because the FDKs are disabled and
the notes were eventaully vaulted. After analysis of GBNA DP traces, it
could be seen that prior to this there was a cancelled cashin. This
particular scenario resulted in the command being cancelled at the same time 
as the customer tried to enter the notes - the notes were immediately
returned to the cardholder (because the cashin was cancelling). The DP/SP
may not fire Itemsinserted in this case as the notes had not been completely 
drawn into the device, but were returned back. This generated refused events 
and taken events. 

CIC Engineering have stated that : 
"our application is written in such a way that it relies on the Inserted
event to update screens, disable FDKs, etc" 

GBRU Engineering have stated that : 

"During development the XFS team told Fujitsu to NOT fire Items Inserted
until the shutter was closed and the items had been drawn completely into
the pre-acceptor. The main reason for this is to avoid
Inserted-taken-inserted-taken for fumbling. Fujitsu did as instructed. 

There are 3 outcomes to cancelling CashIn: 

1) Cancel request works with no notes inserted. In this case, the
CancelAsyncRequest will complete with success followed by the CashIn method
completing with Cancelled. Only then should the application issue Rollback
or CashInEnd to end the transaction. 

2) Cancel request works BUT notes were inserted at the point of
cancellation. In this case, the CancelAsyncRequest will complete with
success but the CashIn method will continue. CancelAsyncRequest completing
with success means the cancel was successfully attempted, it does not
necessarily mean that note insertion was avoided. For this scenario, the
device will refuse the inserted items at the pre-acceptor (an Input refuse
event will be posted) and the notes will be presented for removal. CashIn
will complete with Cancelled and only once an ItemsTaken event is posted
should the application move on. 

3) The Cancel request is attempted but CashIn continues and processes the
notes for bill validation as normal. In this case, the CancelAsyncRequest
will complete with success but despite this the CashIn method will continue
as normal. This should result in CashIn completing with success and a note
list being reported. If items were refused as part of bill validation then
as above, the application should wait on the taken event before allowing
CashInEnd or RollBack. 

Your issue is scenario 2 where you are not handling getting items refused
without firstly receiving an Items Inserted. The reason you get no inserted
event is because the items were not inserted fully as per the opening
paragraph above and are immediately refused at the entry slot. This is
perfectly valid as far as XFS events are concerned and other applications
deal with this. We are refusing the items because of the cancellation
request and we do not allow them to enter. 

We can discuss this further but we will strongly resist asking Fujitsu to
change this device behaviour because it will introduce problems whittled out 
during development. You must change NDC to cope with this scenario as other
applications do. Items Inserted is a service event and does not need to be
necessarily posted in conjunction with Items Refused which is an execute
event." 

It was agreed that the application would need to support all these scenarios



Summary:
Advance NDC installer should handle issues with an incompatible pmdata file

Description:
It has been spotted by Ramesh in Hyderbad that between builds 93.02.00.53 and 93.02.00.56 the pmdata file is not compatible and has to be manually deleted. The current uninstaller does not remove the file. If the pmdata file is not deleted, the applications from build 93.02.00.56 fail to start with this mError

Object ID: 6860832
Process ID: 3548
Thread ID: 3748
Process Filename: C:\NTGlobal\AANDCAPPS\ApplicationCore.exe
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> .\MAPSRTCore\Sources\cpp\PERSIST.CPP </SCFILE>      <SCLINE> 1127 </SCLINE>     <FUNCTION> class mPersistString </FUNCTION>     <FREE> Level: 2       Domain: 0       Error Number: 2354    Worker Id:     Description: Authoring Error - an attempt was made to access Persistent store s002


Solution as discussed with Mike:

1) Add an initial pmdata file into the SIE archieve (ideally a zero length file). Needs to be tested - and a working initial pmdata file needs to be created. We do not want to have to create a new initial pmdata file for each build or release.
2) Add it to the installer. This would automatically mean the uninstaller removes the pmdata file. 

The impact is that when a build is uninstalled and a new one is installed, the pmdata data elements are lost. But this is a lot better than risking incompatibility issues and it is even less impact on PS Developers who do not move between builds as often as we do.





Summary:
Envelope Dispenser MEI light flash rate has been hardcoded to a fixed value WFS_SIU_MEDIUM_FLASH

Description:
The media flash rate can be accessed using a Resource class, but not from ooxfs due to currenct component dependencies. With the new automated build process cyclic dependencies between DLLs are not possible. Other MEI have their flash rate configurable.

More detail here:
Following on from my last email, if the builder can't accommodate a LIB not changing, and therefore doesn't try to rebuild it as part of the automated build (causing the cyclic dependency), then I think option 1 might be the best option in the short term, and option 2 in the long term (after 3.2). This will obviously mean duplicate code in the system, but it is perhaps the best short term measure. Just my humble opinion¿...

Let me know what you think and if you have any other options I haven't thought of.
____________________________________________ 
From: 	Turner, Peter  
Sent:	27 March 2007 12:03
To:	Vesely, Jan
Cc:	Mellor, Craig
Subject:	RE: Envelope Dispenser MEI change : final code review & merge into main development path

Hi Jan,

There are perhaps 4/5 options :-

1. Implement the Resource ID functionality in a different way for Envelope Dispenser (i.e. don't use the Resource class that causes the dependency)

2. Introduce a new component to avoid the cyclic dependency. Perhaps this could be done while looking at the product as a whole as it would be silly to have a component just for this. I think there might be other things which could be re-architected in a better way to avoid similar problems in other areas in the future. I remember drawing a dependency diagram of NDCCore along with other parts of the system, and it wasn't pretty! We have re-partitioned the author projects (or we will when that functionality goes in after 3.2 sometime), the next step is perhaps the C++ code. A continuation of the re-engineering activity perhaps.

3. Have a fixed flash rate as you say

4. Build twice (which is what I did), but not good for automated build. If the interface of one of the components doesn't change that much the LIB doesn't need to be rebuilt all the time etc. Not sure if this is possible to do in the builder we have?

5. See what others think e.g. StephenG

This is all I can think of at the moment, they are literally off the top of my head. It is not something we need to fix immediately, but I guess we need to fix it during IT sometime. I think a variable flash rate is something that customers will want, so I don't think we have a choice, unless we can persuade Product Management. We could put the product out with a fixed flash rate and wait for an RFC/TAR but I don't think this is the best approach.

What do you think of my suggestions, and do you have any others? I guess the approach we take in the short term may not be the best approach, as a result of timescales and a need to focus on more important things.

Regards,
Peter.

_____________________________________________ 
From: 	Vesely, Jan  
Sent:	27 March 2007 10:06
To:	Turner, Peter
Cc:	Mellor, Craig
Subject:	RE: Envelope Dispenser MEI change : final code review & merge into main development path

Hi Peter & Craig

The code is in build 56, but the issue was that I had to hardcode the MEI flash rate to the standard flash rate due to the build cyclic dependency issue. Craig - how are we going to handle this?

a) try to fix it in a different manner - i.e. raise a GRIT
b) update FS to say that the envelope dispenser MEI light flash rate is fixed.

Thanks
Jan




Summary:
EOP failed to display"Barcode reader fatal unknown error"

Description:
During executing the Barcode Reader test case-5.6.5.1.2. when we disconnect barcode reader device connector from USB port,EOP should display "Barcode reader fatal unknown error" but it is not displaying,But it is displaying in fault display in supervisor.And expectd to send unsolicited message "12fs000fsfsf1fs4fs2" to host,but we r getting "12fs000fsfsf0fs1fs4" first and "12fs000fsfsf1fs4fs3" second.



Summary:
Build 93.02.00.56 - Coupon Printing CEN-XFS forms not delivered (for Promote)

Description:
1) update SIE archive with these CEN-XFS forms & media definitions

SIE path is now: CustomisationLaeyr.pj -> ReceiptPrint.pj -> Sources\Receipt\Forms
				             Sources\Receipt\Media

This part of the GRIT is now done.

2) update installer to pick these dirs up and deliver to one location (for universal printers). No need to copy it for the PersonaS receipt printer.

\XFS\Data\urptr/Forms
\XFS\Data\urptr/Media

But no rush Mike - we will only need it for the next build 57.



Summary:
Change NCRSilentDebug version information

Description:
NCRSILENTDEBUG currently prints version information as   NCRSILENTDEBUG v2.0

This should be changed to NCR SILENT DEBUG v01.00.00 as it is now a supported product.




Summary:
Move the location of SilentDebug.ini from Debug folder to Config folder

Description:
The Config folder is a better location for this configuration file.

1) Code changes - the service and supervisor app
2) Installer update




Summary:
Move the location of PersonasCharSets.txt and UniversalCharSets.txt from Data folder to Config folder

Description:
The Config folder is a better location for these new mapping files.

1) Update FS (possibly UTS)
2) Update code (path hardcoded there)
3) Update installer




Summary:
Receipt not Ejected when print data holds only barcode/Graphcis/BitImage control codes 

Description:
when print buffer includes barcode/graphics/bitimage control code without any printable data e.g. "ABC", receipt is printed but not ejected even in the close state



Summary:
DenominationNames reg key wrong in RegSettings_CIC.reg.

Description:
It is listed as [HKEY_LOCAL_MACHINE\SOFTWARE\NCR\LOCAL CONFIGURATION\CashInJPTR\DenominationNames], it should be [HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\BNA\CashInJPTR\DenominationNames].




Summary:
Ref Man: Security information for Secure Key Entry functionality needs to be checked

Description:
Chap 4: Re-engineering changes requested by SME have raised queries in light of earlier GR1T. The modified text needs to be checked and updated if necessary as per the attached email thread.



Summary:
Application Crashed when print data includes only Set Left Margin control code

Description:
Customisation application is crashed after sending the transaction reply with print buffer which includes only Escape sequence for Set Left Margin control code. 



Summary:
TAR 347857 - Sometimes 94 reported for the total count instead of 0.

Description:
The total counts for notes are initialised to 94. This can cause issue if they are not updated during transaction.



Summary:
Unsol sent twice when invalid notes taken immediately

Description:
Scenario:
Insert valid and invalid notes together 
Immediately remove the invalid notes when they are returned back. 

The above scenario doesn't happen everytime(but intermittently), looks like a timing issue. 
Issue may be related to setting of AvoidReportingCounts IntegerStore.

This is in extension to TAR 345292



Summary:
Update startapps.vbs to call ulwait without specifying path

Description:
Requirement to work with XFS 4.5.  Ulwait location is now on the path.  This is a change for XFS 4.5 and later.
Also need to update IPs.

Support has been added to XFS 94.05.00.06. Related GRIT is 319479



Summary:
Build 55 - When a new Tester is created in the Supervisor project, the Async Evaluate attribute is set to TRUE.

Description:
It should be set to FALSE.
Need to investigate when this change was introduced.
It is a type library problem. Customisation Layer and Application Core projects are fine.
This can have cause serious problems if not fixed properly.



Summary:
The supervisor application crash with the new NCRaGBRUConfig.dll that has the GR1T 342420 

Description:
If we use the <NoteIDS><NoteID></NoteID></NoteIDS> structure the GBxx Configuration Utility returns XML ERROR but the ConfigPrep class crash



Summary:
Advance NDC sometimes does not reboot when an unhandled exception is raised.

Description:
It seems that sometimes the exception is not passed out of the process to the exception handler. It has been confirmed that this is not a problem of UEH component itself, but it is an issue on the application side, where the exception is caught internally by Advance NDC - in MV Application Framework, mMVEXE - WinMain, but that is it. The process simply terminates and nothing is logged in the Event Log, no reboot is triggered.
In the past we used MVReboot.exe, but this was removed during compiler migration due to some necessary exception handling changes. Also MVReboot.exe was known not to be a reliable means of reboot.
The idea is to introduce the functionality of MVReboot.exe back into the product in a better way, which will include event log information and a guaranteed reboot.



Summary:
Build 55 - Missing reserved screens for the Extended Journalling

Description:
The screens are in the six digit revision number 1.107.1.2.1.4. 
While integrating into revision 1.107.1.9, I think we have missed the screens t22,t24,t26,t27,t28,t29,t30.
Regards,
Sambit



Summary:
Barcode Reader Implmentation - Migration Issues

Description:
1)  Resrvd.def  - Missed an existing line while migration (found by Sambit)
2)  Cdudata.cpp - Missed to add a line of code to call the nested extension states function while migration
3)  BarcodeForm - This form should be copied to the C:\xfs\Data\bptr\forms location at installation time
4)  FS Update related to STCONT file supporting Nested Extension states
5)  1 Memory leak issue - Found in Memory leak report and discussed with Jan and decided not a problem but found the reason now.




Summary:
Turn NativeMStatus reg key on by default.

Description:
Native MStatus reporting should be turned on by default, so add the registry key to CIC reg file and update RB with the reg key info and the fact it is turned on by default.



Summary:
Memory Leak Issues identified by DevPartner in MVPRINTERS.DLL

Description:
Memory Leak Issues identified by DevPartner in MVPRINTERS.DLL



Summary:
3.1.1 Registry Keys need added to 3.2

Description:
The 3.1.1 registry keys were added directly to the installer and so have not been merged into 3.2 - the missing keys are

[HKEY_LOCAL_MACHINE \SOFTWARE\NCR\Advance NDC\VPIComms]
"ClearCommsBuffer"=dword:00000000

TAR 330022
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\Extensions\Cardless Transaction]
"SkipFitSearch"=dword:00000000

TAR 3300653
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\CASHHANDLER] 
"Cassette1"=dword:00000000 
"Cassette2"=dword:00000000 
"Cassette3"=dword:00000000 
"Cassette4"=dword:00000000
(Note for 3.2 this shoule be extended with...)
"Cassette5"=dword:00000000 
"Cassette6"=dword:00000000 
"Cassette7"=dword:00000000
"RejectBin"=dword:00000000



Summary:
Supervisor Trace On/Trace Off Functions do not provide tracing information in the NDC+ style when Virtual Controllers are used

Description:
When virtual controllers are not used, the tracing we have done for ANDC 3.02  is correct. However, when they are present, the following new messages should be added: VCSND, VCREC. Then also the trace points for the SEND and RECV messages need to be modified. Unfortuanately we overlooked the definition in NDC+ FS, section 8.5 - which is not 100%, so here is the essential clarification from Stephen Peat.

1) Outgoing message (not reflected)
   
     SEND traced before the first virtual controller of the outgoing virtual controller chain is invoked.
     VCSND traced after the processing in the outgoing virtual controller chain is complete and the message is to be sent to the host.

2) Outgoing message that is reflected back

     SEND traced before the first virtual controller of the outgoing virtual controller chain is invoked.
     REVC traced after the processing in the virtual controller chain is complete and the message is reflected back to ANDC.

3) Incoming message (not reflected)

    VCREC traced before the first virtual controller of the incoming virtual controller chain is invoked.
    RECV  traced after the VC chain processing is complete before ANDC starts processing the message.

4) Incoming reflected back to host

    VCREC traced before the first virtual controller of the incoming virtual controller chain is invoked.
     VCSND traced after the processing in the incoming virtual controller chain is complete and the message is to be sent to the host.

5) Outgoing message suppressed by the virtual controllers chain

     SEND traced before the first virtual controller of the outgoing virtual controller chain is invoked.

6) Incoming message suppressed by the virtual controllers chain

    VCREC traced before the first virtual controller of the incoming virtual controller chain is invoked.

Note: DebugLog MESSAGEIN and MESSAGEOUT should stay as they are - they are capturing the message between the SST and the Host.




Summary:
Advance NDC should deliver debugout.h and debugout.lib

Description:
DebugLog is now supported. This includes examples of its usage. C-exit example includes debugout.h and links to debugout.lib

Tasks
1) Update installer to deliver these files
2) Update andc.cmd DEVDELIVER function to deliver these files
3) Update the debugout.h so that it is nice to look at - possibly remove WriteEvent() and  NiceControls() declarations
4) The example needs to have additional #define DBON 
     <<\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Documents\Final\Silent Debug & Debuglog\DebugLog - FS 445-0669288H6.doc>>
     Update draft pubs (Lindsay).



Summary:
Migrate the Exit Samples (C-Exit examples) to the new compiler & provide guidelines related to new compiler for customers

Description:
We need to migrate the Exit Samples (C-Exit examples) mentioned in the White Paper for C-Exits (the white paper is installed as part of AANDC documentation).  The examples are installed into ntglobal\final\support\user, with subdirectories for each of the examples.  Jan mentioned there are some examples which are ADI, and so there's no point migrating these.  The examples we will migrate are still CEN2.  As another exercise, we could assess/estimate the effort to update to the examples to CEN3 - but the likelihood is that we'll not update these to CEN3 at this time.

I suggest you start by listing all the examples and identify which examples you think we should/should not migrate, along with the reason.  When we agree the list to migrate then you can go ahead and migrate these to new compiler.




Summary:
TIR 346190 -  RAZCC7499 SA - AA-NDC|SW|APPDEV|T307780| - Why does AA-NDC 3 still show dev d

Description:
Request to have tar 307780 on AANDC 3.1.1



Summary:
Merge issue - missing GBRU Cash-Out related functions from Userfuns.scr

Description:
The app will fall-over when you run the assigners/testers that use these functions ¿ this will probably be seen when running StdAddCash.



Summary:
ANDC 93.02.00.55 - Athena - On USBEPP2 only Key Mode 4 is allowed and keys cannot be successfully loaded

Description:
Seen only on the Athena B-Model with the USBEPP2.

When the apps are run up, only Key Mode 4  - Double-Length Key Entry with XOR Restricted is allowed. Attempting to switch to another mode fails and it's not possible to successfully enter keys in mode 4 anyway. Logs for application start up are attached.



Summary:
Test RS232 barcode reader with AANDC 3.2

Description:
Test RS232 barcode reader with AANDC 3.2



Summary:
TAR 342955 - Disconnect Command should be discarded and not processed

Description:
Current Full Description:
   Employee Name: Bill May
   Country: USA
   Organisation: PS
   Contact Number: 937 
   45 4044
   Customer Name: NCR
   Priority: 3
   Work Order Number: (937) 445-4027
   Products Affected: Easypoint Dialup
   Platform OS: XP
   Application: AANDC 3.00.11
   Environment: Development
   Frequency: Frequent
   Installed: 1
   Affected: 1
   
   We have had several occurrences where during exit supervisor the ATM sends
   the 
   R09 message, then host sends the Disconnect 'F' command, then the ATM sends the P20 message, then host sends another command, such as Go Out-of-Service, then the ATM sends a CP Ready 9, which is the response for the Disconnect command, even though the Disconnect command should have been discarded and not processed. This has only occurred a few times. Most of the time it works OK. There appears to be a timing situation that is occurring every once in a while where the disconnect is still being processed when it should not be. So, it looks like we may not have resolved this issue entirely with the fixes provided late last year. You can see this in the attached serial port trace file. Look near the end of the trace at 3:12:35.
   
I have re-created the issue. Attached are the logs. I had trouble with the Serial Port utility, so I do not have that log, but instead I have included the host log file.
   
I reset the host EOT delay to not delay, but set up a 3 second delay for the host ACK. In this condition, I went into supervisor and quickly selected  function 5, cancel, function 6, cancel, function 5, cancel, function 6, cancel to queue up several messages to be sent in a row. The ATM dialed, sent the P21,  got a Disc 'F' command, sent the R05, got another Disc 'F' cmd, and continued with the rest of the queued up messages. Then the ATM started sending CP RDY 9 messages, one for each Disc 'F' command received. In the PD Trace, the P21 that starts this sequence is at record # 8813 1/24/07 6:50:38pm.
   
So, it appears that if there is a short delay in host sending the ACK to a message, the previously-received Disc 'F' command is being processed. This 
   should not be happening. Any time the ATM has another message to send when it receives the Disc 'F' command, the Disconnect should be discarded.
   
   Of the three dialup issues reported, this one would be considered the most  serious one, and I am thinking at this time that we will need at least this
   one resolved before we can release our 3.00.11 software release.
   
   Additional info - I tried both a 2 second ACK delay and a 1 second ACK  delay, and neither of those delays had the problem. I also tried a 5 second ACK
   delay and it did have the problem. So it looks like a 3 second ACK delay is the magic number?




Summary:
"object required" message box is displayed when there is problem with retract operation

Description:
During application testing I faced with ¿object required¿ message box when there is problem with retract. 
After some investigation I found that XFSErrorEvent is received in ¿Close Refund¿ script (814b7na1) where EvalMData is called but requested variables are missing in Data Objects group.
Jacek



Summary:
 Named Store has been used in the author and code and the CDI store for this has not been implemented - Russia

Description:
Dear Som,

 

Unfortunately, applying of your workaround causes "access violation" exception then calling DateString->PutString or DateString->GetString.

 

The code of c-exit was:

 

#include <mcore.h>
...

 mPersistString* DateString = new mPersistString(); 
 DateString->set_StoreName(mString("CashClrDate");
mString mval = DateString->GetString();  // <-- Exception here
...

 





Summary:
ANDC 93.02.00.55 - Entries in Configuration Data screen (I06) are aligned incorrectly

Description:
The Configuration Data screen (I06) is laid out as shown in the attached ConfigData.txt file (attached).

JRNL and JRNL LVL level are out of alignment and leaves the display looking unprofessional.




Summary:
ANDC 93.02.00.55 - Athena SST - Universal Receipt and Journal Printers not printing

Description:
Seen on Athena B-Model in Lab 1.

Applied UniversalPrinters.reg. Ran up apps but no printing is done to receipt or journal. When checking the configuration in Supervisor, JRNL = NONE. Running self-tests in sysapp prints data to both receipt and journal.

Logs attached for Apps start up.



Summary:
Build 93.02.00.55 - Worker factory reports success when it fails to build

Description:
Worker factory fails on Customisation Layer (this is an issue of its own raised separately), but the final message box says success.



Summary:
Build 93.02.00.55 - Worker factory fails to build

Description:
On Dev PC installation, Customisation Layer, worker factory fails. Here is an extract from the log that is shown.
...
Note: including file: C:\NTGlobal\\TEMP\11.mts
C:\NTGlobal\\TEMP\11.mts(2) : error C2039: 'set_mAction' : is not a member of 'mReceiptControl'
        C:\NTGlobal\\TEST\INCLUDE\ReceiptPrint.h(164) : see declaration of 'mReceiptControl'
...
It seems that the header file defines the method as set_Action. So there is an inconsistency between the author definition and the header file definition.

Unfortunately, there is another issue that the message box at the end says worker factory succeeded. A separate GRIT will be raised for this.



Summary:
TAR 345590 - Supplies and Fitness wrong for Reject bins because ulMaximum=0

Description:
CIC 9 Qatar. 

There is no provision for configuring the reject/retract cassettes ulmaximum 
and is set to 0 by default. 

This causes issues with regard to overall device supplies status and Fitness 
because it will report HIGH when only 1 note is rejected or retracted. 

The code for this is provided by the advanced deposit and payment group, and 
a change will be required there, but this is seen as a TAR on the AA-NDC
release as it is causing a problem in the way that the application does not
provide for this in it's configuration. 

[Shiva Marasa] This is a new requirement. Configure GBXX component don't
support configuration of retract/reject bins. 

This is a high priority issue for PS as it is causing major problems for
them. 
Due to this ATM will never go to Service mode and customer is placing calls
with NCR. This is happening everyday after a replenish cycle and NCR
helpdesk will start receiving calls.



Summary:
Promote/Relate Flow-Points in AANDC Cash-In Component.

Description:
Three candidates from our point of view (all of them can be around 10 seconds average):
¿	Waiting for customer to insert cash 
¿	During CashIn as BNA validates the bunch of notes (the more notes the more time)
¿	During Encash




Summary:
Journal formatting improvement for deposit confirmation

Description:
Implement an easy to understand, comprehensible format for deposit confirmation journaling. Including total per denomination and per currency. 
If the number of denominations doesn't fit in the screen include only a summary per currency. 

************************************************************
Som
Just adding one of the formats proposed by Abbas (implemented in Qatar)

The main functionality of this enhance code is to maintain totaling on the Journal as follows which is essential for Audit and Reconciliation. 

 

AED     10 X 1 =      10

AED     20 X 1 =      20

AED     50 X 1 =      50

AED   100 X 1 =    100

AED   500 X 1 =    500

AED 1000 X 1 =  1000

            TOTAL = 1,680

Please see attachment for a specifc case of customer requirement in this area.

Remember to order the denominations grouped by currency (alphabetical order) and then per value (numberical order, i.e. 10, 20, 100 and not 10, 100, 20).



Summary:
Promote - update CL to move ServiceSelected sync point for Coupon beside Card Inserted flow point sync

Description:
This is needed else campaign with a coupon at Card Inserted flow point will not be targeted at a specific customer (campaign with screens is OK).
See Euan Pattullo for implementation details.



Summary:
ANDC 03.02.00 - Debug Log uses the 'Clear All' option for two different functional outcomes

Description:
The Debug Log tool uses the 'Clear All' option for two different functions.

1) In the 'Edit' menu, selecting 'Clear All' clears the content of every debug window.
2) Right-clicking a particular debug window and selecting 'Clear All' clears only the contents of that window.

This needs to be changed so that each of the options better describe the resulting outcome



Summary:
ANDC 93.02.00.55 - Fault Display error at SOD when comms are not yet configured

Description:
When the SST starts up and comms have not been configured Fault Display is not presented correctly. 'E1802' is displayed on the top line followed by the list of faults present on the SST. Then for a very brief moment 'NUMBER OF FAULTS = X' is displayed (where X is one more than the number of displayed faults in the previous screen) before returning to the E1802 screen. I believe that Fault Display is trying to display a comms error. 
Checked resrvd.def (attached). E1801 is COMMUNICATIONS CLOSED, E1803 is COMMUNICATIONS DOWN. E1802 does not feature.

Note: The FS for the updates for RFC 318174 state that following screens should display the text in brackets:
E1905 (COMMUNICATIONS CLOSED), E1906 (COMMUNICATIONS FATAL), E1907 (COMMUNICATIONS DOWN) 



Summary:
Updates for GBRU Error Recovery (G356009) have introduced a cyclic dependency into the build process

Description:
BASICATMWCL, CashhandlerWC.cpp. The call to RetrieveScreen to obtain the screen to journal the error trace for GBRU Reset has introduced a cyclic dependency into the build as this depends on ndccust.lib which is above it in the build dependency order. 

This dependency needs removed.



Summary:
while still in diagnostics at the instant of flicking the mode switch to Normal and selecting EXIT from diagnostics at the same time,doesn't send R09 solicited message to HOST and print the same to journal.

Description:
As part of general ANDC application test(5.4.1.2.1) of ShakeOut test the following Issue was found:
In step 39, when asked to Flick the mode switch to Normal and at the same time, EXIT from diagnostics -> the expected result of R09 message was not sent to host and print the same to journal. 



Summary:
ANDC 93.02.00.54 - "SST OUT OF SUSPEND MODE" is printed to the journal along with transaction reply data.

Description:
Seen while testing GR1T 352808 (TAR 318174) - Request to add additional trace details to the journal to assist WCS.

While executing the test step 14 and 31 of test case 5.5.8.7 (TRACE ON and TRACE OFF functionality), after sending the transaction reply message "NXT_PRNT" from NDCHost, transaction reply data is printed to the journal along with "SST OUT OF SUSPEND MODE".

NOTE:
Same message "SST OUT OF SUSPEND MODE" is also observed while testing the test step 10 of testcase 5.5.8.6 and test step 22 of test case 5.5.8.9.

I have attached the debug log.



Summary:
ANDC 93.02.00.54 - Communications closed, Communications down and Communications fatal are not displayed on fault display.

Description:
ANDC 93.02.00.54 - Communications closed, Communications down and Communications fatal are not displayed on fault display.
Seen while testing GR1T 352808 (TAR 318174) - Request to add additional trace details to the journal to assist WCS.

Observations:
As per the Test Step 5 of Test case 5.5.8.1, If NDCHOST is closed when SST is "IN SERVICE", message "COMMUNICATIONS DOWN' should displayed in the EOP. This message is not displayed.

As per Test step 23 - start the application after editing the registry string value of "VPICommsServiceProgID"  from NCRaVPITCPIP.TCPIPCommsService to any other, "COMMUNICATIONS FATAL" should display in the fault display. This message is not displayed.

As per test step 28 - start the applications without NDCHost after changing the mode switch to supervisor, "COMMUNICATIONS CLOSED" should displayed in the fault display. This is not displayed.

NOTE: Same "COMMUNICATIONS CLOSED,COMMUNICATIONS DOWN AND COMMUNICATIONS FATAL" are not  observed while executing the other test cases (5.5.8.3,5.5.8.4,5.5.8.5,5.5.8.6,5.5.8.7,5.5.8.8,5.5.8.9 ).



Summary:
TAR 344768 - CIC8: LUNO is not populated in the solic/unsolic BNA Device Status Messages

Description:
Issue is that the LUNO is not being populated in the solic/unsolic BNA
Device Status messages, even though LUNO has been set. If however, they set 
a value in the MAC Number, then the LUNO will appear in the message (only if 
the MAC Number is set). Therefore, looks to be a potential issue with the
LUNO in the solic/unsolic messages. 

In the following example, the LUNO was set to 100, but the LUNO is clearly
not present in 'w0' BNA device status message :- 

11:39:15 # 108 [12[Unicode-x1C][Unicode-x1C][Unicode-x1C]w0~~~~~~~~~~~~~~~~~~~~~ ! 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~ !
[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]0] 

However, in the following example, the LUNO was set to 100 and the MAC
NUMBER was set to '000002' and this time the LUNO is present in the message
:- 
14:50:50 # 128 [12[Unicode-x1C]100000002[Unicode-x1C][Unicode-x1C]w0~~~~~~~~~~~~~~~~~~~~~ ! 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~ !
[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]0] 

Issue appears to be differing instances of the LUNO string store: 
wid: 392b7na1 - correct 
wid: 390p241d12 - incorrect? 




Summary:
TAR 344849 - AANDC repots inconsistent information when notes are rejected in chained txn

Description:
If a chained deposit is performed, the count of notes is inconsistent if the 
insertions are a mixture of rejected and good deposits. 

Test scenario to recreate (a single note was used in each deposit):- 

Enter bad note twice 
Enter good note 
Enter bad note 

This means that, for the overall transaction, 3 notes were rejected and 1
accepted. This is what the LastCashInStatus property of ActiveXFS reports. 

AA-NDC journal reports the following:- 

1. Rejected = 1, Escrow = 0 
2. Rejected = 2, Escrow = 0 
3. Rejected = 0, Escrow = 1 
4. Rejected = 1, Escrow = 0 

There is no difficulty in arguing that the count could be either: 
1. The total of counts for the transaction (as per ActiveXFS) 
2. The counts for each specific deposit, i.e. 1 rejected or 1 Escrowed for
each test. 

There is no way to justify the data reported currently.



Summary:
Merge issue related to RFC 318174 / GR1T 352808 - Request to add additional trace details to the journal to assist WCS

Description:
Merge issue related to RFC 318174 / GR1T 352808 - Request to add additional trace details to the journal to assist WCS.
It seems that some of the files are not integrated to the 3.2 dev main path related to GR1T 352808 (change package 352808:2). 
The files missing are as follows:

Vpicomms.cpp
DeviceStatus.cpp
Vpicommssimp.h
Vpicomms.h
DeviceStatus.h

Another issue is, FaultDis.DSP files were updated rather than FaultDis.vcproj.




Summary:
TAR 336609 - Request for retract counts to be included after retract operation

Description:
AANDC does not print retract counters per retract operations. This information is needed because without this it is unknown who is owner of retracted money.



Summary:
Cash Out - Do not reject notes after failed dispense if the notes belong to cash in

Description:
When cash in leaves some notes in escrow, the subsequent dispense command fails. We need to check the TT flag before rejecting the notes after the failed dispense.



Summary:
ANDC 93.02.00.54 - Blank receipt delivered after receipt with R00/R01 and print data 

Description:
Seen while testing '5.10.5.2.5 - GR1T 338174 (TAR 323533) Print field with just Cut in causes simulated receipt preprint error' as regression. In both Step 7 and Step 9 of test case 2, after the receipt with R00/R01 and reply data is printed, a blank receipt is delivered. Blank receipts should not be delivered. The purpose of this test was to ensure that this did not happen. Tested with XFS 94.05.00.04.

For test case, see 5.6.1-Universal Printing.doc in SIE in:
	f:/NCR/FSD/SelfService/Advance/project.pj, 
	SSDS/InterDomain/Components/NDCCore/MVDocumentation.pj,
	Documents/IntegrationTest/project.pj

The GR1T mentioned above was passed in ANDC 03.01.01.



Summary:
TAR 344444 - GBxx Dynamic note sorting does not restore cassette counts

Description:
AANDC 3.1.1 CIC 8 GBNA. 

It was found during log analysis of customer tests that when overspill was engaged, it would not restore the cassette counts from the backup. This
resulted in the counts being cleared following overspill (Dynamic Note Sorting). 



Summary:
TAR 345292 - No information reported when a cashIn with category 1 notes success

Description:
Scenario:
- Starts a cashIn operation
- Insert some "legal" notes and one or more papers (no notes)
- The papers will be rejected and presented to the customer
- No event is sent until the papers are taken



Summary:
Wincor - allow ANDC to act upon card skim plZextra detail.

Description:
We will likely need to support it in proprietary way for Wincor .... Another Grit.

______________________________________________ 
From: 	Forsyth, Gordon  
Sent:	lunedì 26 febbraio 2007 9.24
To:	Chisholm, Gordon
Cc:	Cipollone, Stefano; Lawson, Richard
Subject:	RE: Skim detection

In the next version of the XFS standard, there is a new status value for the fwDevice field called WFS_IDC_DEVFRAUDATTMPT. This is how we would report the card skimming case in3.10 of XFS. If something was needed before then, lpszExtra would be the best place to add it.

Gordon

_____________________________________________
From: Chisholm, Gordon 
Sent: 26 February 2007 08:04
To: Forsyth, Gordon
Cc: Cipollone, Stefano; Lawson, Richard
Subject: RE: Skim detection

I agree it's a good idea.

Gordon, is there anything coming along in the CEN standard for card skimming detection?

Thanks,
Gordon

_____________________________________________ 
From: 	Cipollone, Stefano  
Sent:	24 February 2007 12:27
To:	Chisholm, Gordon; Lawson, Richard
Subject:	RE: Skim detection

Thanks, but in the case we should/can report it (as Wincor does) would it be possible to do it without using any proprietary field (like lpzExtra)?

Richard,
I forgot that we need to add also this on the to do list for Barclays 2 PoC.

_____________________________________________ 
From: 	Chisholm, Gordon  
Sent:	martedì 6 febbraio 2007 15.24
To:	Lawson, Richard
Cc:	Cipollone, Stefano
Subject:	RE: Skim detection

We currently don't report anything from the IDC SP that ties in with IFD or card skimming detection.

Regards,
Gordon

_____________________________________________ 
From: 	Lawson, Richard  
Sent:	02 February 2007 17:06
To:	Chisholm, Gordon
Cc:	Cipollone, Stefano
Subject:	Skim detection


Hi Gordon,

At recent POC the customer mentioned Wincor has a way of detecting card skimming and
can notify the application. Looks like this is done through lpzExtra on IDC XFS interface.
The Card reader needs to have some hardware fitted as well.

Does NCR platform have anything similar maybe ties in with Intelligent Fraud Detection system.

Thanks
Richard.



Richard Lawson
CoE, APTRA Advance NDC
NCR Financial Solution Division
+: NCR FSG, Discovery Centre, Dundee, Scotland DD2 4SW
(Office: +44(0) 1382 592591 2Fax: +44(0) 1382 591290
:Email: Richard.Lawson@Scotland.NCR.com




Summary:
Wrong status reported because CDI string for status not updated.

Description:
This issue is due to the change from using the BNAFitness integer CDI store (3219) to report Fitness, to using the BNAFitnessData string CDI store (4052). In all cases that BNAFitness is set it should be using UpdateBNAFitness function now, NOT setting the cdi directly - this change must be made systemwide in all places outstanding in CustomisationLayer and Supervisor apps.



Summary:
ANDC 93.02.00.54 - EJ Checksum Utility's shortcut is incorrectly included in Start->All Programs on the SST

Description:
The EJ checksum utility is included in Start->All Programs->NCR APTRA->Advance NDC->Tools on the SST.

FS states that the checksum utility is only installed on the Dev PC. Attempting to run the shortcut leads to the following pop-up error box: 'Component 'comdlg.ocx' or one of its dependencies not correctly registered: a file is missing or invalid.'



Summary:
TAR RFC 343419 - Add journaling in close state to record notes in escrow if no TXN reply rcvd.

Description:
Customer requests journaling of escrowed notes that are returned to the
cardholder. In one specific case the transaction request was sent to the
host with details of the escrowed notes, but no reponse was received from
the host, so the transaction timesout and the notes are refunded in the
close state. Nothing is journalled for this. 

Below is the explanation given by engineering about the reason why: 

It seems this is close state functionality. Journalling is done when a
message is reported to the host. 

If BNA close state functionality succeeds in doing what it was meant to do
(eg refund notes), then there is no message sent to host, therefore no
journalling. 

Only, if an error occurred during close state then a message would be sent,
and journalling would be output. Or if close state was set to Vault notes,
then it would be journalled, but successfully returning notes does not get
journalled. 

I think it was like this to begin with because these are unsolicited
messages, and the host does not need to be made aware of successful close
state operations, because it can assume they are successful unless told
otherwise. 

However, from reading the journal it is not very clear and also the host may 
be unable to communicate at this time (hence getting to close state with
notes in escrow in the first place) so I think it would be a good idea to
introduce journalling here, and possibly try to send an unsol message too.
So, I think this should be a TAR RFC.




Summary:
Double w0 unsolicited messages when notes are inserted and withdrawn immediately

Description:
Two unsolicited messages are sent at the same instance when the notes are inserted and withdrawn immediatley



Summary:
Sometime Init BNA does not report failure/successful in case of HW error

Description:
Reason for not showing any screen is
whenever cashinendfails(when lastcashintransaction status is active) during INIT BNA, 
statecomplete exit pass thru path is activated inside the encash script host which doesn't show any screen to the user. 
So we shud be performing a RESET by activating the proper work group



Summary:
Hang with envelope deposit

Description:
3.2 build IT1 VC8.  found during resource init unit test rerun envelope deposit with NULL print.
hang in mvndcprinting/Converter.cpp 1.21.1.2 line 752 - cant get out of while loop as data length is zero.
Issue was that width of zero (0) was not handled.



Summary:
Debug Tracing is truncated to 1024 characters within AANDC

Description:
Debugging Trace information, which is written to the debugging pipes is truncated to 1024 characters within AANDC.  The issue can be recreated by sending a message over 1024 characters in length and comparing the output from DebugLog/SilentDebug.



Summary:
ANDC 93.02.00.54 - OOXFSDebugLevel value is placed in the wrong registry location

Description:
ANDC 93.02.00.54 - OOXFSDebugLevel value is placed in the wrong registry location.
The 'OOXFSDebugLevel=3' value should be placed in: 'HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\' at install time.

Instead it is being placed in 'HKEY_LOCAL_MACHINE\SOFTWARE\NCR\'

ANDC.reg needs to be updated.



Summary:
Wincor - need ability to trigger mode switch from cabinet door

Description:
Wincor application triggers from cabinet door and so customers will expect the same procedure with ANDC on WNI HW



Summary:
Wincor - Application mError where shutter open during test cash

Description:
Application cannot clear reject counts and mErrors due to shutter being open.
 remove mError & update logic to shutter test to try close even if open fails...
Also need to reject where notes on transport before can perform test cash units or reset.



Summary:
Silent Debug cannot be started/stopped when running with APTRA Security

Description:
Silent Debug cannot be started/stopped when running with APTRA Security.

The problem is that Silent Debug runs as an NT Service.  In a secure environment we can't start/stop Silent Debug via our Supervisor application.  This is because the Supervisor app runs in the User account in SSTAuto1 and doesn't have privileges to start/stop services via the Service Control Manager (SCM).



Summary:
CPM forms and media always copied to default location.

Description:
CPM forms and media always copied to default location. Installer should read reg setting used by SP to determine the folder, but currently it doesn't work. Also, this would only work when SP is installed (Runtime only probably). It would not work with XFS Simulator as it defines the path inside an mdb database file. Also CPM Media is not used by NCR CPM SP so there is no specified folder for that, so that is ok to be this default.



Summary:
BUILD function on andc batch file fails on some machines.

Description:
Building sandbox fails on numerous PCs due to "files being used by another process" issues. Works fine on Jan's PC and laptop. During building the sandbox different projects can fail with similar errors, and they can then be built in vs2005, and then running the BUILD function again, without any actual changes. Example error log files attached.



Summary:
IsCutoverEnabled() function should returning TRUE whne EJ mode is standard

Description:
IsCutoverEnabled() function should returning TRUE whne EJ mode is standard.
Is CutoverEnabled function checks only cutver registry value but not EJ mode. If the EJ mode is not enabled then INIT will be failed but the EJ LOW unsolic is suprreseed which is incorrect in behaviour.



Summary:
Removal / Insertion of GBNA Cassettes should be logged on to the journal. 

Description:
During normal operation and in supervisor (excluding System Application) each time the CIC detects a cassette insertion / removal should log in the journal this fact. 
No need to send any host message.



Summary:
Cash Out - "Invalid Value" message is not displayed on EOP when more than 9999 notes are entered in Add Cash

Description:
Cash Out - "Invalid Value" message is not displayed on EOP when more than 9999 notes are entered in Add Cash
NCR GBRU firmware has a limit of 9999 for the cassette count. As a result, Add Cash function allows up to 9999 for the cassette count.



Summary:
TAR 343122 - Customer C-Exits no longer working with AANDCIA.exe

Description:
TAR 343122 - Customer C-Exits no longer working with AANDCIA.exe.
Customer C-Exits no longer working with AA-NDC 03.01.01. However, the same
C-Exits were working with AA-NDC 03.01.00. 

Symptom is that WFSStartup is failing with -1 (already started) 

<OOXFS> applicationcore 30/01/2007 07:47:02.843 - WFSStartUp() =
0</OOXFS> 
<OOXFS> applicationcore 30/01/2007 07:47:03.296 - WFSCleanUp()=0</OOXFS> 
<OOXFS> applicationcore 30/01/2007 07:47:03.343 - WFSStartUp() = 0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:47:07.296 - WFSStartUp() = 0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:47:07.781 - WFSCleanUp()=0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:30.640 - WFSStartUp() = 0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:30.937 - WFSCleanUp()=0</OOXFS> 
<OOXFS> supervisor 30/01/2007 07:47:31.234 - WFSStartUp() = 0</OOXFS> 
<OOXFS> customisationlayer 30/01/2007 07:48:00.765 - WFSStartUp() =
0</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:48:07.359 - WFSStartUp() = -1</OOXFS> 
<OOXFS> aandcia 30/01/2007 07:48:08.125 - WFSCleanUp()=0</OOXFS>



Summary:
TAR 343545 - Dynamic Note Sorting. As a result of the overspill functionality being initiated, a flag is set to signal that the cassettes should be reconfigured.  This flag is not being cleared resulting in multiple reconfigurations.

Description:
The TAR description, provided below, covers a number of issues:
1) ulMax being set to 200.  This issue is being dealt with under TAR 343624.
2) The overspill functionality being executed after every transaction.
3) Counters being cleared by the overspill functionality.  

This GR1T specifically deals with item 2).

NDC 3.1.1 CIC 8 
BNA Note Counts incorrect/mismatch. Same as previous set of logs - same scenario, CI1 OK-HIGH (ulmax=200) this engages overspill function, after
this Calling Start/End Exchange to clear the counts in every transaction. So counts are wrong if app uses SP values for the counts, because they are
always being zero'd. 

So, CI1 goes "high" at 31/01/2007 13:34:59.937 
usNumber fwType fwItemType cUnitID cCurrencyID ulValue ulCashInCount ulCount ulMaximum usStatus 
1 	4 	1          RJ1                           0                110            110            0            HIGH 
2 	4 	1          RT2                          0                   0                0              0            EMPTY 
3 	2 	1          CI1                           0                 214            214         200           HIGH 
4                   2                   4           CI2                          0                  219           219         200           HIGH 

After this, following every cashinend there is a start/end exchange clearing all counts. 

usNumber fwType fwItemType cUnitID cCurrencyID ulValue ulCashInCount ulCount ulMaximum usStatus 
1 	4             1              RJ1                              0                0                 0              0              OK 
2 	4             1              RT2                             0                0                 0               0             OK 
3 	2             1              CI1                              0                0                0             5000          OK 
4 	2             4              CI2                              0                0                0             5000          OK 

debug.log (84429):customi.. 13:35:09.359 Calling Start Exchange to clearthe counts 
debug.log (85459):customi.. 13:38:12.937 Calling Start Exchange to clearthe counts 
debug.log (86045):customi.. 13:39:12.984 Calling Start Exchange to clearthe counts 
debug.log (87220):customi.. 13:41:53.312 Calling Start Exchange to clearthe counts 
debug.log (87787):customi.. 13:43:02.109 Calling Start Exchange to clearthe counts 
debug.log (88758):customi.. 13:45:31.937 Calling Start Exchange to clearthe counts 
debug.log (89346):customi.. 13:46:23.609 Calling Start Exchange to clearthe counts 
debug.log (90249):customi.. 13:48:29.421 Calling Start Exchange to clearthe counts 
debug.log (91511):customi.. 13:51:26.250 Calling Start Exchange to clearthe counts 
debug.log (92483):customi.. 13:53:15.562 Calling Start Exchange to clearthe counts 
debug.log (101345):customi.. 14:28:28.671 Calling Start Exchange to clearthe counts 
debug.log (102481):customi.. 14:31:22.906 Calling Start Exchange to clearthe counts 
debug.log (103649):customi.. 14:33:36.890 Calling Start Exchange to clearthe counts 

Customer has disabled the Dynamic note sorting feature for now in order that the journalled counts = physical counts.



Summary:
TAR 344140 - Application startup popup if no cassettes present 

Description:
An ATM Starts with cassettes removed Popup error message Box pointing to the `CashinCommonImplementation.wsc¿ file with the message ¿[ln, col] get_ItemNoteTypes¿ 



Summary:
TAR 344039 - Cassette Total worker returns BillsRemaining value of zero in AA-NDC 03.01.01

Description:
Customer is using AA-NDC 03.01.01, XFS 04.02.01. 
   
   They have created their own authored application and this application uses
   the Cassette Total worker to return the BillsRemaining totals.  
   
   The problem is that since migrating to AA-NDC 03.01.01, it always reports
   the BillsRemaining total as zero.  In AA-NDC Supervisor, the counts show the 
   correct values as expected.
   
   The other totals from the Cassette Total worker, the BillsToCardHolder,
   BillsToPurgeBin etc. are correct as per Supervisor.  
   
   It is only the BillsRemaining which seems to be no longer working since
   migration to AA-NDC 03.01.01 (previously worked ok in AA-NDC 03.00.03).



Summary:
Wincor -CDM cannot get out of suspend while money at slot

Description:
retract cannot clear where shutter closed and money still at slot CDM reports USER_ERROR until money is removed. need to send reset as well as retract maybe. To move status to jammed or clear note.



Summary:
Wincor - Env deposit handling

Description:
1. Env deposit when env not taken function is cancelled.  
On NCR function retracts then begins env accept operation. WNI Sp reports jammed. Tried to retract and SP fell over. WN app does not offer env disp state.
used reset to clear presented envelope. Change to way we detect if envelope is present in env depo WC.SSDSEnvDispenserDepTI.dll

2. Env Dispenser cannot get out of suspend when shutter jammed closed. Retract is invalid command (no env preset in transport)
used reset to clear envelope




Summary:
Wincor - need ability to trigger mode switch from cabinet door

Description:
Wincor application triggers from cabinet door and so customers will expect the same procedure with ANDC on WNI HW



Summary:
Wincor - card returned where present failed

Description:
FAST CASH NCR no card return with shutter held. Issue as card is returned but customer session still open , customer has card back and may leave.



Summary:
Wincor - Application mError where shutter open during test cash

Description:
Application cannot clear reject counts and mErrors due to shutter being open.
 remove mError & update logic to shutter test to try close even if open fails...
Also need to reject where notes on transport before can perform test cash units or reset.



Summary:
Wincor - no dispenser clear from Supervisor -> Normal

Description:
some concearn by ps  as they belive the wincor application can do this.
CDM SP will not move if no bills with ANDC.



Summary:
Wincor -supervisor on front - clear key is backspace action not clear.

Description:
clear key needs to clear full imput. may be configuration



Summary:
Wincor - Touch Screen transaction No Beeps when touching touch areas

Description:
beep volume very low.. no HW/bios solution
need to use XFS beeps where possible.

Also card holder beep to take cash & cards etc.  same mechnaism used and is very low on wincor 2050xe



Summary:
Wincor - Forms Based Printing - initial issues

Description:
1.need graphics & logo support 
2.dble size font position and size incorrect
3. MEI flash during close state where no receipt delivered. print init?
4. issue with handling of " character in greek fonts - comes out as another character based on ascii 22h



Summary:
Wincor - Application mError after SIU Set_Event

Description:
Bug in ANDC , we try to register for mode switch event where it is not supported - fix in ooxfs.dll



Summary:
Documentation of Release Bulletin for IT9 build is confusing.

Description:
All the issues found exist in installation instructions section.They are as follows:
1: In the Devlopment Environment section, the last point of the section, says that applications are ready to be used in Run-time environment.
This is giving a meaning of that, the installation so far done can be executed on an SST.

2: In the Runtime Environment section, the immediate first paragraph says that "After this copy the updated files to the relevant folders on the target system, this will allow the applications to be run in a simulated environment:" which is giving a different meaning that, the runtime installation should be carried out on an simulated environment. 




Summary:
TAR 343624 - MaxCashinItems being set to 200, should be 5000

Description:
NDC 3.1.1 CIC 8 GBNA 

ulMaximum is set by the default AdvanceNDC reg file
"MaxCashinItems"=dword:00001388 (5000). 

PS are seeing with this version of CIC that the setting of MaxCashinItems
becomes 200 . 

They see this by :- 
Clear BNA counts 4-53. 
Removing cassettes, removing notes, re-inserting cassettes and then INIT BNA 
4-54. 
The Debug logs show that the code picks up Zero somehow and defaults to
200. 

11:01:08.359 Exchange started 
supervi.. 11:01:08.359 Currency ID after regread : 
supervi.. 11:01:08.359 Currency ID after error on regread : EUR 
supervi.. 11:01:08.375 Max Cashin Items : 
supervi.. 11:01:08.375 Max Cashin Items set to -> 0 
supervi.. 11:01:08.390 Max Cashin Items set to -> 0 
supervi.. 11:01:08.390 Max Cashin Items set to -> 200 
supervi.. 11:01:08.390 Max Cashin Items set to -> 200 
supervi.. 11:01:19.531 EndExchange OK 

This results in the CI cassettes being set to UlMaximum 200. 

Of course this will result in early Overspill on a near empty cassette.
Obviously not what we want. 

A Previous TAR (338913) authoring includes this section: 

MaxcashinItems = WSHShell.RegRead("HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance
NDC\MaxCashinItems") 

objWSC.Debug (" Max Cashin Items : " & MaxcashinItems) 
If err.Number <> 0 Then 
MaxcashinItems = 200 
End If 

This would appear to explain where the 200 setting comes from. 
Can the code be reviewed to find out: 

1. Why 200 would be used at all ? 

2. What error would result in this path being taken ?



Summary:
DisplayManager:- INSTALLER - Doesn't seem to be running makesafe although I am not sure about this

Description:
Jim, We need to verify whether makesafe is run during install or not.





Summary:
TAR 343544 : No unsolicited event sent for vaulted notes

Description:
Unsolicited Message after every encash operation is not consistent. some times a unsol message is sent though there is no casssette configuration change. 

This is in extension to GRIT 353514.



Summary:
TAR 343529: Journaling for > 90 notes wrong

Description:
When notes are encashed during trn reply encash or close state vault, Device status message doesn't contain proper counts. 

Even during journalling, Greater than 90 notes are reported under ESCROW Count and all notes less than 90 are reported under Vault header in journal. This is in extension to GR1T raised and fixed in PR9 of cashin component. GR1T number is 355229



Summary:
TAR 340144 - AANDC - Disconnect Command overwriting OOS Command & TAR 338096 - AA-NDC : Dialup Problem with Disconnect 'F' Command Handling

Description:
With the ATM set up to allow 'Message After CP', and with cash low, I ran a
dispense transaction with the host simulator set up to send a go out of
service command after the CP RDY B transaction completion message. See
4:43:16 in the serial port logs for the start of the transaction. The cash
low was sent after the go oos command, then a disconnect command was sent to 
the ATM, then the CP RDY 9 was sent. The ATM never processed the go oos
command, and the ATM remained in-service. 

My suspicion is that the go oos command and the disconnect command are
queued up, since they are received while the transaction is still in
progress, and the disconnect command is overwriting the go oos command,
since the ATM only queues up the latest command, deleting any previous
command queued up. If this is what is happening, it should not be happening. 
The disconnect command is not a 'normal' NDC command, and should not
overwrite a previously queued up 'normal' NDC command. 

Please have a look at this and let me know what you think. My guess is that
this has been an issue all along, but it just has never been discovered
until now. 

Thanks and Regards, 
Bill 


TAR Raised after request by Engineering
 
Tar Notes: 
Fix Sent to customer : 
Hi Bill, 

I have updated ApplicationCore6:- 

Details: 

Tester 19l252y6 "Idle/Waiting/supend or Config ID Request?" 

Expression Attribute: (A$="IDLE") OR (A$="WAITING") OR (B$="3") OR (A$ =
"SUSPEND") 

Changed to: 

(A$="IDLE") OR (A$="WAITING") OR (B$="3") OR (A$ = "SUSPEND") OR (B$="F") OR 
(B$="G") 

Please verify fix and let me know if you are happy with the change. 

Regards, 

Zubair 
 




Summary:
TAR 338838 - AANDC should not end Transaction Bracket while send is pending

Description:
Americas APTRA Advance NDC: 03.00.10
AA-NDC: 03.00.01 with special US Patches (including TAR 333461) APTRA XFS: 04.02.00 VISA 2 COMMS: 01.00.02 (also used 91.00.01.09 and 91.00.03.07a)
Promote: 02.06.00

SSS NDC+ Host Simulator was also used to observe the following behaviour.

Problem Description:
3:20:14) Ran another transaction, and delayed taking the cash. The ATM re-dialed (3:20:49), connect, ENQ but no message from the ATM. I then took the cash and the cash low status was sent (3:21:09). Host then sent the Disconnect command and the ATM sent EOT at the same time host sent the Disconnect command, then the line disconnected. The ACK and CP Ready 9 was not sent in response to the Disconnect command. I waited more than 2 minutes, and the ATM did not re-dial. This is probably because the ATM initiated the disconnect with the EOT.

The following behaviour has also been agreed that this TAR should resolve:
Set host to delay sending EOT by 15 seconds
a) (3:31:45) Ran a dispense transaction and took the cash as soon as it was presented. When transaction was completed, the ATM sent EOT (3:32:19) and the line disconnected. The cash low status was not sent to host.

DebugLogs and PD Trace have been provided to Engineering.




Summary:
Support for USB EPP Phase 1  - device variant

Description:
Meeting arranged due to issues recently raised with FGSC regarding not being able to enter keys when using the PIN SP from XFS 4.4.

Confirmation received that lpzextra field structure has changed due to the introduction of support for the USB EPP Phase 1.  GordonF confirmed this is a free format field and applications should not assume data will be available in the same format.   AANDC currently assumes the first field would be used for the vendor name and this is not the case in the latest PIN SP.    This has been identified as what is causing the initial problem reported by the US.

In addition to this there is also a new device variant that has been created for the USB EPP Phase 1 and likely to be a new variant for the USB EPP Phase 2 which has application impact.

Euan has identified updates for both the lpzextra field change and the new device variant for USB EPP Phase 1.  After the meeting we agreed with FSGC to provide an update to the US to allow them to continue their testing based on AANDC 3.0.   FGSC are also continuing to investigate other issues that US PS raised with this SP.

Separate to this¿

There was a generic requirement for application to run on Universal without change i.e. provide emulation for devices converted from SDC to USB.   Whilst the device variant is not a major change it still requires an application update which means this requirement is not being met.   Ewan McGuire is currently working on education/training material for PS to understand the application impact of moving to Universal (USB devices).    Ewan will work the XFS team to identify any other devices that may have new device variant names.




Summary:
Support for USB EPP Phase 2  - device variant

Description:
Support for USB EPP Phase 2  - device variant
Meeting arranged due to issues recently raised with FGSC regarding not being able to enter keys when using the PIN SP from XFS 4.4.

Confirmation received that lpzextra field structure has changed due to the introduction of support for the USB EPP Phase 1.  GordonF confirmed this is a free format field and applications should not assume data will be available in the same format.   AANDC currently assumes the first field would be used for the vendor name and this is not the case in the latest PIN SP.    This has been identified as what is causing the initial problem reported by the US.

In addition to this there is also a new device variant that has been created for the USB EPP Phase 1 and likely to be a new variant for the USB EPP Phase 2 which has application impact.

Euan has identified updates for both the lpzextra field change and the new device variant for USB EPP Phase 1.  After the meeting we agreed with FSGC to provide an update to the US to allow them to continue their testing based on AANDC 3.0.   FGSC are also continuing to investigate other issues that US PS raised with this SP.

Separate to this¿

There was a generic requirement for application to run on Universal without change i.e. provide emulation for devices converted from SDC to USB.   Whilst the device variant is not a major change it still requires an application update which means this requirement is not being met.   Ewan McGuire is currently working on education/training material for PS to understand the application impact of moving to Universal (USB devices).    Ewan will work the XFS team to identify any other devices that may have new device variant names.




Summary:
Testing with new Solidcore control and compliance agent

Description:
Changes since release 1.0 of Solidcore - A packaging exercise to certify with server-side software.
Target ATC for Solidcore Control & Compilance is end Feb.  Propose we regression test in AANDC IT post Solidcore ATC (i.e. from start Mar).



Summary:
Athena Product Classes

Description:
Athena Product Classes
Target schedule.
Project Athena  - April 07
Project Unicorn - Sep 07

Athena Product Summary .

Product Codename VW3 
Product Class 6634
Description: Multi-Function TTW Walk-Up ATM
Replacing 5886 / 5887 
Target ATC - April 2007

Product Codename DU3 
Product class 6634
Description Multi-Function TTW Drive-Up ATM 
Replacing 5588 & 5886 DU 
Target ATC July 2007

Product Codename VX4 
Product Class 6632
Description : Multi-Function In lobby ATM 
Replacing 5875 & 6676 
Target ATC April 2007

Product Codename DU4 
Product Class 6638
Description - Multi-Function Freestanding Drive-Up ATM 
Replacing 5890 
Target ATC July 2007


Universal Governance

I maintain a Universal HW / SW Matrix & will continue to review this, with each of the product managers, in the context of our Product roadmaps.

Two new device requirements have been placed on the device teams in recent weeks.
 Interior Coin Module - driven by need to limit product footprint.
 Stretch receipt printer - driven by need to replace the combined statement passbook module - Canadian Market
  Effectively is wider receipt to meet RBC & CIBC printing reqms 

Universal Dispenser.
 A+ Model Testing is now due to start 6th March 06
 This is a very significant milestone in terms of the U-Dispenser. 
 The current UTC 31/07/06 is also under review - expectation is that it will move out. 

Universal EPP - Phase II
 The device implementation has high probability of application impact.
 Due mainly between conflict of meeting visa compliance & existing customer procedures for key loading.
 There is also a change in key mgmt in the device. 
 C Harrow has agreed to document the changes & potential impact for customers
 Once complete I will share the document with you.   

Universal EPP Phase 1 & Universal Misc I/f will be deployed on HT3 & BASS in advance of Athena products.

Sally is outlooking APTRA XFS 04.05.00 as the platform release to sync with Athena.




Summary:
Include changes required for remote supervisor into the base product - Enable use of PS customization

Description:
Include changes required for remote supervisor into the base product - Enable use of PS customization



Summary:
Set reg setting to allow application control over resets

Description:
The application should have control over resetting the device rather than the driver so it has more control over where the notes go, and can keep track of note counts. This is for Auto Error Recovery.



Summary:
Cash Out - If the exit sensor is blocked during the execution of TEST_CASH_UNITS command, the subsequent Test Cash function fails immediately

Description:
If the exit sensor is blocked during the execution of TEST_CASH_UNITS command, the subsequent Test Cash function fails immediately without attempting to clear the device. The reason is that we check the transport status before performing the test cash function. If the status is INOP we quit from test cash and display dispenser fault message. This condition need to be updated to differentiate between an interlock open condition and fatal condition during test cash.



Summary:
TAR 334816 - Cofigurable option to suppress cash-low msgs in dialup environment

Description:
1. Overview 

During a cash withdrawal transaction, when cash runs 'low' for a given
canister type, the AANDC application will generate, and send, an unsolicited 
'cash low' status message to the host. These 'cash low' status messages will 
continue to be sent to host for every subsequent cash withdrawal transaction 
that uses the 'low' canister type, until the canister type runs 'out' of
cash or is replenished. 

When the ATM is configured to use either TCP/IP communications, or one of
the Leased Line communications protocols (3270 Bisync or SNA), the repeated
sending of the 'cash low' unsolicited status message does not normally cause 
any significant impact on the network or the ATM transaction. However, when
the ATM is configured to use Dialup communications, the sending of the
unsolicited 'cash low' status message generally requires an additional
dial-out in order to send the message to host. This results in additional
costs to the network and reduces the cost advantage of using Dialup
communications. 

To resolve this issue, a configurable option will be developed for AANDC to
configure the number of consecutive 'cash low' unsolicited status messages
that will be sent to host for each canister type before these status
messages will no longer be sent to host. This option was originally
developed for OS/2 US NDC+ Dialup, but has not yet been implemented for
AANDC Dialup. 

This new 'Suppress Cash Low Status' option will default to never suppress
the 'cash low' unsolicited status messages, but can be configured to
suppress the 'cash low' status messages after sending between 1 through 9
consecutive 'cash low' status messages to the host. 


2. Configuration 

When this option was developed for OS/2 US NDC+ Dialup, option digit 28 of
the NDCOPT options file was used to configure this option. AANDC does not
support the NDCOPT options file, so this option will be configurable in one
of two ways for AANDC, either through the Dialup configuration supervisor
menus, or through the 'Copy On' of the Application Dialup Parameters XML
configuration file. 


2.1. Supervisor Menu 'Suppress Cash Low Status' Configuration 

A new Dialup configuration supervisor menu selection will be added to the
Application Parameters sub-menu for configuring the 'Suppress Cash Low
Status' option. This will be function '10 SUPP CASH LOW' in the Application
Parameters sub-menu. 

Valid values for this option are 0 through 9, where: 

0 Do not suppress 'cash low' status messages (default) 
1 - 9 Suppress 'cash low' status messages after this number of consecutive
'cash low' status messages are sent 


2.2. XML file 'Suppress Cash Low Status' Configuration 

The DialUpApplicationSettings.xml file can also be used to configure this
option. The following entry can be added to the xml file for this option: 

<SuppressCashLow>0</SuppressCashLow> 

Valid values for this entry are '0' through '9'. 

If this entry is included in the xml file when it is 'Copied On' to the ATM, 
the value defined for this option will be used. If the xml file does not
include this entry, or the value for this entry is invalid, the default
value of '0' will be used for this option. 

When the DialUpApplicationSettings.xml file is 'Copied Off' of the ATM, this 
entry will be included in the xml file that is copied off. 

2.3. Registry Setting 

When this option is configured through either of the above methods, the
setting will be stored in the following registry key: 

HKLM\SOFTWARE\NCR\Advance NDC\VPIComms\Dialup\ 
S



Summary:
lpszExtra changed for USB PIN

Description:
lpszExtra changed for USB PIN.
Just to give you a heads up it looks like the lpszExtra has changed for XFS 4.4 which will cause problems identifying the variant of the encryptor, this will cause a few problems for mEncryptorResourceID::GetVariant() and detecting if we're on NCR or not.

<P>
	<N>lpCaps->lpszExtra[0]</N>
	<PTR>73895374</PTR>
	<STR>NUMDEVICES=1</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[1]</N>
	<PTR>73895387</PTR>
	<STR>DEVICE1=UID=136,DEVNAME=KEYB-01-USBEPP,DEVVAR=35</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[2]</N>		<-- Now not the first field
	<PTR>73895436</PTR>
	<STR>Vendor=NCR</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[3]</N>
	<PTR>73895447</PTR>
	<STR>Encryptor=EPP-USB</STR>		<-- New type - not sure how you tell the defference between EPP B and E USB
</P>
<P>
	<N>lpCaps->lpszExtra[4]</N>
	<PTR>73895465</PTR>
	<STR>FirmwareVersion=DAPI118</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[5]</N>
	<PTR>73895489</PTR>
	<STR>AUTOBEEP=0</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[6]</N>
	<PTR>73895500</PTR>
	<STR>REMOTE_KEY_SCHEME=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[7]</N>
	<PTR>73895529</PTR>
	<STR>RSA_SIGN_ALGORITHM=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[8]</N>
	<PTR>73895559</PTR>
	<STR>RSA_CRYPT_ALGORITHM=0x00000001</STR>
</P>
<P>
	<N>lpCaps->lpszExtra[9]</N>
	<PTR>73895590</PTR>
	<STR>SIG




Summary:
Forms Based Printing for Recipt Printing (Millenium Bank)

Description:

Require an early release of the form based printing for a POC with Greece.



Summary:
TAR 342604 - Last configured denomination not printed on journal

Description:
When BNA device status is printed last denomination is missing form print-outs. Problem applies to RFC349288.
(TAR 342604)



Summary:
Cash Out - the supplies status of a LOW cassette is reported as GOOD

Description:
On a GBRU, the supplies status of a LOW cassette is reported as GOOD. The reason is that the SP returns the usStatus of a LOW cassette as OK if the ulMaximum value of that cassette is set to 0.



Summary:
RejectBin Count CDI Stores 3701 wrong when multiple note definitions.

Description:
The function (GetCashUnitDenomCounts) for calculating cassette counts which is used to allow the Reject Bin cdi stores to be populated, calculates the counts wrongly when the counts involve multiple note definitions per denomination. This is same as GRIT 353560, but for Reject counts.



Summary:
TAR 346742 - DEVBUSY mapped to Fatal in BNA Status mapping function

Description:
MapDeviceStatus in CashInCommonImplementation.wsc maps a status of DEVBUSY to FATAL. Also it should contain a default value in the mapping function.



Summary:
"Using NDC Exits" must have a minimum update for CEN-XFS

Description:
As there isn't time to update the manual completely for 3.02, an explanation needs to be added to the preface giving all the details of what still applies in the manual and what is irrelevant, as superseded by info in the Developer's Guide. Peter Turner has provided handwritten notes on what is relevant and what is not in the attached PDF.



Summary:
ANDC 93.02.00.52 - Issues introduced by updates

Description:
ANDC 93.02.00.52 is built on ANDC 03.00.01. This GR1T details issues found in 93.02.00.52 that are not seen in 03.00.01.

1. No 'Nearly Full' or 'Full' unsols for the EJ
Physical journal disabled. I began by placing an EJ log at almost 90% capacity in the Data folder and began running transactions that sent info to the journal. At the 90% full threshold, an unsol should have been sent to the host - it wasn't. I continued running transactions until the EJ log was full at which point a full unsol should have been sent - it wasn't. Logs attached. Note: I asked Prashanthi and Chandra to re-run this on a system with the same platform I'm using and ANDC 03.00.01 (so the only difference should be the additions made in 93.02.00.51 and 93.02.00.52). They confirmed that the unsols were sent on their system.

2. No Unsol message for Card Reader Suspend
I began to enter a card into the card reader and held it at the mouth until the reader stopped cycling and a suspend condition occurred. At this point, a suspend unsol should have been sent to the host - it wasn't. Logs attached. Note: Prashanthi and Chandra also re-ran this on the system specified in 1. above and they confirmed that the unsol was sent.

3. Nondescript unsol message for Receipt Printer
At the end of some transactions, '12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]G0[Unicode-x1C]' message is sent to the host. This information is not useful to the host as it merely states that the print was successful. The text '*4106*1*G*0,M-00,R-2111' is printed on the journal paper and shows that the receipt printer is low - which it is.



Summary:
VbScript displays message box on cancel entering notes

Description:
VBScript runtime ocurres ( "[1201,5] Object required: 'BNAFitness'") when entering notes is cancelled. Message box is displayed and application is blocked untill OK is pressed.



Summary:
TAR 338981:  Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
Please refer to STAR



Summary:
TAR 338981:  Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
Please refer to STAR



Summary:
TAR 341367: GBNA Went Fatal with no physical Jam

Description:
USB Comms errors can occur within the GBNA. Most of these comms errors can  be recovered by the driver reloading - in this scenario the device will report MStatus 1 with a severity of 1. An issue has been reported where the Application is making the GBNA Fatal because it received a cashin failed event with reason 101(which is a hardware error). 
   
The NDC host system will receive a unsolic message marking the GBNA Fatal and will put the ATM out of service. Even if the application resets the
Fitness to good in the close state (as per TAR 312296) the NDC host system will not neccesarily put the ATM back in service.
   
This TAR is to correct the application behaviour to NOT make the fitness
 fatal for a severity 1 error (Device is not Fatal and operational) and use
 the severity data from the device 




Summary:
TAR 340317 - BNA device status appearing twice on journal using CIC pre-release 8

Description:
Journal entry showing BNA device
reported twice and as 'S/' instead of a 'w' 

More Details in attachment



Summary:
TAR 340317 - BNA device status appearing twice on journal using CIC pre-release 8

Description:
Journal entry showing BNA device
reported twice and as 'S/' instead of a 'w' 

More Details in attachment



Summary:
Changing conditional operator from "ternary"(?:) to "If else"

Description:
Changing conditional operator from "ternary"(?:) to "If else"



Summary:
CPM Hardware configuration uses ACSII rather than HEX

Description:
Field `q¿ CPM Hardware Configuration ¿ the Configuration Data is Length Var (4) Data is an ASCII representation of a hexadecimal number. There does not appear to be a reason for this as all the other devices return a HEX value.

From looking at the NDC Message Interface Specification (445-0705907 C) The manual clearly states that the value returned should be an ASCII representation of a hexadecimal number but the example provided uses a HEX value. From Speaking to Gordon Forsyth he would expect a HEX value to be returned. 

This is being raised as an RFC as this would impact customers who currently use CPM hardare  and it appears this functionality has always been implemented this way.

Note: The example provided in the referance manual is incorrect. It should be 63. TAR 341568 has beed raised to make the referance manual more clear



Summary:
Aplication goes to SUSUPEND when BNAFintess is tet to 3 by EvalMdata function 

Description:
As SUSPEND mode is not supported by AANDC for BNA device BNA Fitness should not be set to 3 any time	



Summary:
TAR 341567 - Description of Timer 6 for Dial-up is incorrect

Description:
The description of Timer 6 for Dial-up is incorrect. As confirmed with
Zubair, this is not used in Dial-up processing and therefore the reference
manual should be updated to reflect this.



Summary:
Security concerns around debug log - AANDC should not publish the information to the log

Description:
The requirement was accepted to update AANDC to not trace Transaction Request sensitive data (e.g. Track2, PIN Block, CPM Codeline).  We agreed not to do any checks/updates for other sensitive data which may be logged at other transaction times.



Summary:
Support Promote 3.0 coupon printing using forms

Description:
Accepted for scoping in AANDC 3.2



Summary:
No Alarms/Tamper Indication Monitoring in Diagnostics - Dispenser TI reporting

Description:
This RFC is specifically related to the dispenser TI work done by Lakshmi for India PS.



Summary:
TAR 332839 - 94 is treated as counter undefined/unknown

Description:
Escrowed, Returned and vaulted count of 94 is treated as "undefined".
This is not true for GBxx as it can accept upto 200 notes. 94 notes is a
valid and possible count. Should not be treated as "undefined".

Related Code

Worker: Create Totals (32b7na1)

004   If VaultedInt.Data = 94 Then
005     VaultedStr.Data = "U"
006   Else
007     VaultedStr.Data = cStr(VaultedInt.Data)
008   End If

011   If ReturnedInt.Data = 94 Then
012     ReturnedStr.Data = "U"
013   Else
014     ReturnedStr.Data = cstr(ReturnedInt.Data)
015   End If

017   If EscrowInt.Data = 94 Then
018     EscrowStr.Data = "U"
019   Else
020     EscrowStr.Data = cstr(EscrowInt.Data)
021   End If




Summary:
ANDC 3.1.1 COE - MV EPP issues ANDC 3.0.2

Description:
Port SG update to 3.1.1 for Mexico & UK




1. Need to be able to offer mode 1-4 and allow the EPP to decide legality of operation.
may conflict with AANDC security requirements. Not sure if AANDC can really detect a VISA PED EPP through XFS.
2.  where mode 3 XOR outwith the encryptor to support wincor.




Summary:
ANDC 3.1.1 - MV  Printing issues ANDC 3.0.2 - for Opteva

Description:
Added for novabank as greece have opteva customers lined up after the novabank project.

1. Use XFS media control to present the receipt instead of FF as no ESC codes available on opteva.

Now for Mexico and barclays




Summary:
TAR 339830 -  Terminal hangs if OOS then GIS sent while Card reader in suspend state

Description:
If the card reader is in a suspend state with the shutter jammed open and an 
Out of Service command is sent followed by a go In Service (such as may
occur at predefined intervals for Key exchange), the termial will go into a
permanent hang state so that any subsequent command may be acknowledged but
is not acted upon. 

This was reported on XFS 04.02.01, it has been confirmed to exist on XFS
04.01.01 and XFS 04.04.00. Debug and ulistening logs show that AA-NDC hangs
without ever attempting to move forward in its processing. 

The only commands issued to the MCRW are "disable" and "accept" when the "Go 
In Service" is received. the MCRW status is not queried when the
configuration command returns the Fitness to the Host, but this is reset
from "3" to "0" after an OOS command is received despite the fact that no
command was issued to the MCRW. 

This issue is preventing a delivery to HSBC this week as they will not
accept the delivery while this exposure is still present



Summary:
TAR 339107 - AA-NDC: After an M-Status 11 from MCRW, application enters loop

Description:
See Star



Summary:
Extend the range of reserved screens

Description:
We are running out of reserved screens we use for our supervisor menus and functions. For example the Ixx screens are used up. The suggestion is to extend ranges of all screen identifier to this format:
           Gxxxx: group (1 character) + number (4 characters)
 We already have such screen groups. The suggesting is to do it for all groups.
For backwards compatibility any screen identifier Gxx is equal to G00xx. Thus expressing a screen in the current format is compatible with the extended suggested format.
Current code harcodes some screen groups to associate with a 4 digit screen number and and some to with a 2digit number. This would unify this all.



Summary:
Debug info need to be added when cutover is called

Description:
Debug log info has to be added in "AutoEJ" window when cutover feature is called



Summary:
t48 and t54 screens mis placed

Description:
t48(DAY OF THE MONTH CHANGED TO %) and t54(DAY OF THE WEEK CHANGED TO %) are misplaced, need to update in supervisor_EJ.mpj



Summary:
Cash In - Timer implementation for Supervisor functions to wait until the GBRU is back online after housekeeping

Description:
For the timer implementation, there is no way to understand if the GBRU is performing housekeeping or it is racked out. So, the status of the device should be cheked before sending any configure command and if it is offline wait for few secs and issue get status command for every 2 secs to check if the status has changed to ONLINE. If it is still OFFLINE after 15 secs, appropriate error msg is displayed. 




Summary:
TAR 338981:  Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
Please refer to STAR



Summary:
TAR 338981:  Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
Please refer to STAR



Summary:
EJ In progress CDI store reset if INIT cancelled in MultipleDestination of supervisor INIT

Description:
If EJ INIT is cancelled in Supervisor Multiple destination feature,it should reset EJInProgress CDI variable.



Summary:
Supervisor INIT-DiskFull

Description:
Supervisor INIT disk full checking should consider 3*EJDATA.LOG size



Summary:
Diskspace checking should consider actual file size instead of configured file size

Description:
While INIT EJ backup it should consider actual EJDATA.log file size but it is considering configured file size



Summary:
Compression is not reverted if INIT EJ is cancelled

Description:
If INIT EJ is cancelled  in MultipleDestination. compression files have to be reverted in author implementation



Summary:
NONE option in secondary drive list

Description:
Once secondary backup is configured. there is no option in supervisor to remove same option



Summary:
Supervisor Crash if CDWrite.dll is not registered

Description:
If CDWrite.dll is not registered,superviser application is crashing when accessing CDwriter functionality in EJ INIT



Summary:
Wrong information being printed on PPD envelope when no receipt is requested

Description:
If the Customer requests a receipt, all is well and the rcpt info is
printed 
on rcpt and PPD info on the Envelope. If the Customer does not want a 
receipt, the rcpt info is printed on the envelope (up until the max no of 
characters for envelope). 




Summary:
Wrong information being printed on PPD envelope when no receipt is requested

Description:
If the Customer requests a receipt, all is well and the rcpt info is
printed 
on rcpt and PPD info on the Envelope. If the Customer does not want a 
receipt, the rcpt info is printed on the envelope (up until the max no of 
characters for envelope). 




Summary:
Cash Out - Cash Out not reportng Fatal afer Cash-In Suspend

Description:
Cash handler fitness is reported as 0 after a cash in suspend



Summary:
Application Error Recovery - AANDC base application changes required in close state

Description:
Application Error Recovery - AANDC base application changes required in close state



Summary:
To include Extended Journaling customization to the core product

Description:
To include Extended Journaling customization to the core product



Summary:
Perform a Replace on all shared debug workers in the author projects

Description:
AANDC31 21.179 - Perform a Replace on all shared debug workers in the author projects



Summary:
Include a reference in the Supervisor Guide to the GBxx configuration whitepaper. Improve the GBxx configuration whitepaper to include some of the comments and questions already addressed by engineering team for SEA

Description:
TAR 328781 - AANDC Supervisor Guide does not fully detail GBRU/GBNA Cassette Config



Summary:
Location of BNA security trace message in publications is not as expected

Description:
TAR 332469 - Location of BNA security trace message in publications is not as expected



Summary:
15" Display with Remote Diags - Test Only

Description:
15" Display with Remote Diags - Test Only



Summary:
Support the printing of graphics in the .bmp monochrome format on the Universal printer

Description:
Support the printing of graphics in the .bmp monochrome format on the Universal printer



Summary:
Universal Journal - Resolution enhanced 150 -> 200 DPI (At least IP impact)

Description:
Universal Journal - Resolution enhanced 150 -> 200 DPI (At least IP impact)



Summary:
Provide configurable mask format for journalling the card number

Description:
Provide configurable mask format for journalling the card number



Summary:
New flow points for Promote - Good bye (AANDC Close State)

Description:
New flow points for Promote - Good bye (AANDC Close State)



Summary:
12.1 " FDKs

Description:
12.1 " FDKs



Summary:
15" Touchscreen

Description:
15" Touchscreen



Summary:
Support Universal FOP Front Operator Panel - Test Only

Description:
AANDC31 11.234 - Support Universal FOP Front Operator Panel - Test Only



Summary:
Support Universal 15" FDK - Test Only

Description:
AANDC31 11.228 - Support Universal 15" FDK - Test Only



Summary:
Support Universal Misc I/f & Audio "Keyboard Echo" functionality - Test Only

Description:
AANDC31 11.214 - Support Universal Misc I/f & Audio "Keyboard Echo" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Night Safe" functionality - Test Only

Description:
AANDC31 11.059 - Support Universal Misc I/f & Audio "Night Safe" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Alarms Status" functionality - Test Only

Description:
AANDC31 11.058 - Support Universal Misc I/f & Audio "Alarms Status" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "FDKs" functionality - Test Only

Description:
AANDC31 11.057 - Support Universal Misc I/f & Audio "FDKs" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Fascia and Advert Light" functionality - Test Only

Description:
AANDC31 11.055 - Support Universal Misc I/f & Audio "Fascia and Advert Light" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Auto Supervisor" functionality - Test Only

Description:
AANDC31 11.054 - Support Universal Misc I/f & Audio "Auto Supervisor" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Audio" functionality - Test Only

Description:
AANDC31 11.053 - Support Universal Misc I/f & Audio "Audio" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Remote Status" functionality - Test Only

Description:
AANDC31 11.052 - Support Universal Misc I/f & Audio "Remote Status" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Power Control" functionality - Test Only

Description:
AANDC31 11.051 - Support Universal Misc I/f & Audio "Power Control" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "Display Status" functionality - Test Only

Description:
AANDC31 11.050 - Support Universal Misc I/f & Audio "Display Status" functionality - Test Only



Summary:
Support Universal Misc I/f & Audio "MEEIs" functionality

Description:
AANDC31 11.049 - Support Universal Misc I/f & Audio "MEEIs" functionality - (Originally thought to be Test Only)
Required a code update to support the new MEI for Envelope Dispense on Athena.



Summary:
Support Universal 12.1" Touchscreen.

Description:
AANDC31 11.047 - Support Universal 12.1" Touchscreen.



Summary:
RFC to update documentation to reflect AANDC functionality - Central to Terminal Messages

Description:
TAR 332920 - RFC to update documentation to reflect AANDC functionality - Central to Terminal Messages



Summary:
AA-NDC documentation doesn"t contain enough detail how to use fonts

Description:
AANDC31 21.086 - TAR 320550 - AA-NDC documentation doesn"t contain enough detail how to use fonts



Summary:
Provide guidelines defining scope and methods for customizing AANDC.

Description:
AANDC31 11.095 - Provide guidelines defining scope and methods for customizing AANDC.



Summary:
Universal EPP - Support of DAPI 1 & DAPI 7 - ( DAPI 7 ensures compliance with Secure Key Entry)

Description:
Universal EPP - Support of DAPI 1 & DAPI 7 - ( DAPI 7 ensures compliance with Secure Key Entry)



Summary:
Support Universal USB EPP in emulation mode (no new functionality).

Description:
AANDC31 11.028 - Support Universal USB EPP in emulation mode (no new functionality).



Summary:
Support CPM Cheque Image Print (Including rear image)

Description:
AANDC31 21.083 - TAR 255036 - AA-NDC Does not Print CPM image on Receipt



Summary:
RFC to document the GBXX setting for limiting the number of notes in escrow

Description:
TAR 331655 - RFC to document the GBXX setting for limiting the number of notes in escrow



Summary:
Certify AANDC 3.2 with BNA2

Description:
Certify AANDC 3.2 with BNA2



Summary:
Support Universal USB IMCRW Smart Card Performance Enhancement, specifically in Card Entry to Enter PIN area.

Description:
AANDC31 11.154 - Support Universal USB IMCRW Smart Card Performance Enhancement, specifically in Card Entry to Enter PIN area.



Summary:
Support Universal USB Smart/DIP in emulation mode (no new functionality).

Description:
AANDC31 11.040 - Support Universal USB Smart/DIP in emulation mode (no new functionality).



Summary:
Support Universal USB IMCRW in emulation (spoof) mode (no new functionality).

Description:
AANDC31 11.034 - Support Universal USB IMCRW in emulation (spoof) mode (no new functionality).



Summary:
The AANDC release supporting Athena should be synchronized with the Athena release

Description:
AANDC31 4.002 - The AANDC release supporting Athena should be synchronized with the Athena release



Summary:
For requirements where new functionality has a host impact, consideration must be given to determine if it is possible to provide the functionality, or a subset, without host impact, and if so, to then create additional requirements that can be imple

Description:
AANDC31 8.004 - For requirements where new functionality has a host impact, consideration must be given to determine if it is possible to provide the functionality, or a subset, without host impact, and if so, to then create additional requirements that can be implemented without host impact, i.e with "no host change".



Summary:
Implement Supervisor functions to switch Silent Debug on/off so support turning debug off in a live environment

Description:
Implement Supervisor functions to switch Silent Debug on/off so support turning debug off in a live environment



Summary:
Machine number is not reflecting in EJ backup file name

Description:
If machine number is configured,  EJ backup file should have machine number in its file name . But EJ backup file still coming without machine number



Summary:
Password lenght should be 4 characters

Description:
Privacy password in EJ configuration should accept minimum and maximum 4 characters. but it is accepting 2 charactors .



Summary:
First letter in password disappearing in Privacy

Description:
First letter in password disapperaing in EJ configuration privacy feture when using Front interface.



Summary:
Inconsistency in the outcome of a synchronous XFS information command when the managed device is in an error condition.

Description:
Since the XFS Standard does not define precisely what should be returned by synchronous information commands when the managed device is inoperative, it has been 
observed that the behaviour varies between XFS Service Providers.

Depending on the specific error condition and the synchronous command being invoked, the following ActiveXFS level outcomes have been observed in VBScript:
1) A Null is returned
2) A Nothing is returned
3) A COM exception is generated

Since Active XFS does not attempt to make any interpretation of the values returned by an XFS Service Provider, this variability in behaviour has to be managed
at the application level.

In order to resolve this issue, a mechanism needs to be introduced in order to handle this variability.



Summary:
Support Open Statement Printer (F596 80 Column LQ Printer with Graphics - NT)

Description:
Refer to scoping of the Forms-based Printing for the Open Statement Printer (Athena) at:
<\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Developer\OpenStatementPrinter\Scoping of FormsPrinting in ANDC.doc>



Summary:
Retract receipt where HW is capable.

Description:
Retract receipt where HW is capable.
Media Control Worker to support cut, eject, flush, retract

Retract at the points:
 - Start of Day
 - Supv - INIT RCPT
 - Close State - to use Timer for MEIs on receipt

If bin full, probably need to leave receipt and continue printing.
Report MStatus to identify bin full.  Could also raise an RFC on Gordon to report bin status to host, which is a host change.



Summary:
Wincor - 40x12 display needs handled better.

Description:
1. HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\NoTTUOperatorResolution is applied to front. 
2. 40x12 resrved.def not kept up to date. may need to  have second resrved that handles updates only.




Summary:
Support Alpha-Numeric data in state table state number parameters

Description:
Requirement to support more than the current '999' downloaded states.  Customers are already reaching this upper limit so expansion is required.

Note that StephenG has implemented a Special release which specifies a state number in Hex which allows 'FFF' (4095) states to be referenced in the download state table.  This requirement is to support Alpha-Numeric.



Summary:
CCM VISA2 needs to be changed to allow line drop when EOT expected to be OK

Description:
CCM VISA2 Dialup solution requires change to allow line drop when EOT
required to be ok and not loop through error recovery. 

We have confirmed with Gameelah that this should be an RFC on the product. 

Customer email: 

NETS uses TNS for their dialup communications access service, and they have
the MessageOnCP option enabled. When the ATM sends the CP message to host,
receives the ACK from host, and is waiting for either another message from
host or an EOT, if host does not have another message to send, host sends
the EOT to TNS, but TNS simply drops the line without passing the EOT on to
the ATM. This causes the ATM to go into error recovery mode, as it treats
this as an abnormal disconnect. 

After the error recovery timer expires, the ATM then dials out and sends the 
I'm Alive message, which the host responds to but the same situation occurs
at the end of the message sequence. This puts the ATM into a loop
continually going through error recovery. 

NETS has tested this same scenario on their OS/2 US NDC+ Dialup ATM, and has 
found that when the disconnect occurs, OS/2 does not go into error
recovery. 

If my memory serves me correctly, I remember that when we developed OS/2 US
NDC+ Dialup, we treated a drop of the line by host when the ATM was waiting
for an EOT as a 'normal' disconnect, and did not treat this as error
recovery. Of course, if the host drops the line at a point where the ATM is
not waiting for an EOT, then it would be an abnormal disconnect and would be 
an error recovery situation even for OS/2. 

They are requesting that we change AANDC Dialup to behave the same way that
OS/2 US NDC+ Dialup behaves in this situation. 




Summary:
Old style journalling and application reboot when extended message is set.

Description:
The issues related to this GR1T are as follows:
1) Old style journalling when extended message is set and supervisor exit is performed.
2) Application reboot when any one of the cassettes replenishment status is CIM_CASSETTE_REPLENISH_NO_VALUE and extended message is enabled.
3) Point 2 also applies to application SOD.





Summary:
When more than 90 notes are in escrow on power-up message box is displayed

Description:
Application displays message box with following information:
"[271,9] Object required: 'Report200Notes'"
It happens when application has been restarted with > 90 notes in escrow.



Summary:
Bit 1 of Option 45 is not ignored when BIT 3 is set.

Description:
Current implementation does not ignore BIT 1 when BIT3 is set.
It is against Option 45 description:
"If the Bit is set then BNA Emulation is disabled (and Bit 1 is ignored)".
It is possible to configure requested configuration by setting both bits.





Summary:
Cash Out - Incorrect Dispenser variant (03) when reporting as CDM

Description:
The GetHw terminal command always returns the dispenser variant as 03. The variant should be 01 when reporting as CDM.



Summary:
Extra debug statements need to be removed from CashInSupCounters.wsc.

Description:
There are some for loops which slow down performance when debugging on as there are many unnecessary statements being output. Task is to tidy up debug statements in this wsc file.



Summary:
If Option 45 set to 15, Last transaction status does not contain BNA transaction counters

Description:
If Extended Message Format is set in option 45, in Transaction Request data, field 'r' is not returning the data for Total Number of Notes.




Summary:
Application does not print correct counters when notes are encashed.

Description:
It has been observed that application does not print on journal counters or print invalid counters on successful encash.




Summary:
TAR 338913 - INIT BNA fails for individual cassette configurations

Description:
If the GBNA is configured for individual notes configuration (not ALL IN)
the INIT BNA function completes successfully but wipes the note list for
each cassette. 

This results in the device no longer able to accept notes. 

The xml file below loads successfully through the supervisor function and
note sorting is carried out without issue. The cassette configuration was
verified with Wosatool as correct. Following the INIT BNA, cassettes end up
as NOVAL and INOP status. 

Logs and recreation details already provided to engineering. 


<Cassette> 
<CassetteID>CI1</CassetteID> 
<CurrencyType>EUR</CurrencyType> 
<CurrencyValue>5</CurrencyValue> 
<NoteCount>0</NoteCount> 
<NoteIDS> 
<NoteID>259</NoteID> 
<NoteID>260</NoteID> 
</NoteIDS> 
</Cassette> 
<Cassette> 
<CassetteID>CI2</CassetteID> 
<CurrencyType>EUR</CurrencyType> 
<CurrencyValue>5</CurrencyValue> 
<NoteCount>0</NoteCount> 
<NoteIDS> 
<NoteID>261</NoteID> 
<NoteID>262</NoteID> 
</NoteIDS> 
</Cassette> 
<Cassette> 
<CassetteID>CI3</CassetteID> 
<CurrencyType>EUR</CurrencyType> 
<CurrencyValue>5</CurrencyValue> 
<NoteCount>0</NoteCount> 
<NoteIDS> 
<NoteID>259</NoteID> 
</NoteIDS> 
</Cassette> 
<Cassette> 
<CassetteID>CI4</CassetteID> 
<CurrencyType>EUR</CurrencyType> 
<CurrencyValue>20</CurrencyValue> 
<NoteCount>0</NoteCount> 
<NoteIDS> 
<NoteID>260</NoteID> 
<NoteID>261</NoteID> 
<NoteID>262</NoteID> 
<NoteID>263</NoteID> 
</NoteIDS> 
</Cassette>
assette>




Summary:
If Option 45 set to 15, note counts send to Switch for less than 100 notes is in 2 digit format 

Description:
With Option 45 - Extended Message Format 15, note counts send to Switch for less than 100 notes is in 2 digit format and due to this Switch gets confused and transactions are failing. But sending note counts in 3 digits for 100 notes onward. This is not happening while using a value of 007 for Option 45. But the drawback of using this value is, AANDC not returning the cassette status. Only one byte data will be send in Transaction Request. 



Summary:
Application of TAR 338745 causes first MPEG in idle not to be displayed

Description:
When TAR fix supplied for TAR 338745, updated ssdsndccust.dll, is applied to 
a 02.06.06 system running on PELE 2 hardware, with graphics driver 3196 (the 
driver shipped with XFS) the first MPEG in a two mpeg idle sequence is not
displayed correctly. The initial frame is displayed and then the screen
changes to a blue screen for the duration of the MPEG file. The MPEG file
does play as the audio can be heard, and moving another non full screen
window over the in-focus applicationcore window does display a portion of
the MPEG as the smaller window is moved. 

This issue only occurred when the updated SSDSNDCCUST.DLL file was
installed. Replacing with the previous file, the issue does not occur. 

If the display hardware acceleration is reduced then the first mpeg does
display correctly, but there are then unacceptable screen flashes when
changing between the two idle screens. 

These issues are similar to previous issues seen when using AA-NDC in
conjunction with APTRA Promote, and which are still outstanding under TAR
294761. Note these issues have been recreated on systems without Promote. 

Details have been passed on to development (RS and SG) of the relevant
screen definitions and customer graphic files.




Summary:
Overspill does not reconfigure next cassette for all note types

Description:
AA-NDC Dynamic Note Sorting. 
Following TAR 338746 we have confirmed that NDC does reconfigure the
cassettes in the close state, but it is not doing this correctly as just
after this the app has decided the BNA is Fatal (fitness 4). 
The lower level device logs also show that that the overspill cassette has
only been reconfigured for one of the note ID's of the FULL cassette. 

Before reconfiguration: 
CI1 HIGH configured as IDR, 50000, noteID's 2575 and 10767. 
CI2 EMPTY configured as IDR, 20000, noteID's 2574 and 10766. 

After reconfiguraton: 
CI1 FULL configured as IDR, 50000, noteID's 2575 and 10767. 
CI2 EMPTY configured with no CurrencyID or Value and noteID's 2574 and 10766 
and 10767, but NOT 2575. 
This TAR is to ensure that all note types associated with the FULL cassette
are applied to the next cassette in the sequence



Summary:
ECB6 - Signatures not logged when Cat3 RollBack set to 0

Description:
¿	When Cat3Rollback is set to 0 (to capture the Cat3 notes during cash-in) the signatures are not logged to the ECB EJ. This is probably an issue with the Service Provider.



Summary:
Cash Out -  "Interlock Open" not self clearing from fault display on EOP (TAR 336099)

Description:
Recreation steps -

When ATM in idle state, Open GBRU interlock, Open reject bin, replace reject bin, Close interlock - "Interlock Open" message still shown on EOP



Summary:
Two unsolicited messages with device status w3 are sent when the device is made physically fatal.

Description:
Two unsolicited messages are seen each time,when a device failure condition has arised.One message, is giving the information that the device is fatal and another message, is giving the information that the device is in good condition.

This can be observed when simulating a hardware failure condition physically,by running any of the subtests of the GR1T: 329349 



Summary:
TAR 355116 - Persistent Notes counts are not cleared by the INIT_BNA Supervisor Task.

Description:
BNA2 Test sequence:
1) Start the application
2) Accept notes onto the escrow
3) Terminate the application with notes on the escrow using Task Manager.
4) Restart the application with the notes on the escrow.
5) Execute the SUPERVISOR INIT_BNA task
6) Switch back to consumer mode
7) Terminate the application using Task Manager.
8) Restart the application with no notes on the escrow.

Problem : a 'w6' message is generated.

Solution : The persistent counts should have been reset by the Supervisor application.



Summary:
TAR 338838 - AANDC should not end Transaction Bracket while send is pending

Description:
Americas APTRA Advance NDC: 03.00.10
AA-NDC: 03.00.01 with special US Patches (including TAR 333461) APTRA XFS: 04.02.00 VISA 2 COMMS: 01.00.02 (also used 91.00.01.09 and 91.00.03.07a)
Promote: 02.06.00

SSS NDC+ Host Simulator was also used to observe the following behaviour.

Problem Description:
3:20:14) Ran another transaction, and delayed taking the cash. The ATM re-dialed (3:20:49), connect, ENQ but no message from the ATM. I then took the cash and the cash low status was sent (3:21:09). Host then sent the Disconnect command and the ATM sent EOT at the same time host sent the Disconnect command, then the line disconnected. The ACK and CP Ready 9 was not sent in response to the Disconnect command. I waited more than 2 minutes, and the ATM did not re-dial. This is probably because the ATM initiated the disconnect with the EOT.

The following behaviour has also been agreed that this TAR should resolve:
Set host to delay sending EOT by 15 seconds
a) (3:31:45) Ran a dispense transaction and took the cash as soon as it was presented. When transaction was completed, the ATM sent EOT (3:32:19) and the line disconnected. The cash low status was not sent to host.

DebugLogs and PD Trace have been provided to Engineering.




Summary:
Cash Out - Add cash or STD cash needs to be performed to clear cassette manipulation error

Description:
Whenever the cassettes are  manipulated, it shows the manipulation error in sysapp and it can only be cleared via start and end exchange which is done using Add Cash or Std Cash.  

To clear this error, select Add cash and cancel it when it prompts to enter cassette details or when it prompts to replenish the cassettes.




Summary:
Error screen popping up while executing the scenario 5.5.2.5.2.5

Description:
TRQ message is sent and BNA_DEP is replied back.Meanwhile, if we make the device fatal, by opening the interlock then an error screen is popping up.Debug logs attached. 



Summary:
TAR 338096 -  AA-NDC : Dialup Problem with Disconnect "F" Command Handling

Description:
ustomer Name: Innovus/Columbus Data (USA).

Priority : Submitted as a priority 3, but issue is holding up certification by the network, and therefore holding up installation of live ATMs by the customer, Innovus. Therefore, it needs investigating and resolved quickly.
Following is an excerpt from an E-mail sent by Columbus Data indicating the urgency in getting this issue resolved:
"as you may know, our mutual customer Innovus is urgently reliant on us to complete certification on NCR dialup, and the delays that we have encountered in delivery and certification have created an account-threatening situation for them."

Platform OS: XP SP2, XFS 04.02.00

Application: Americas AANDC 3.00.10 (based on 3.00.01 with special patches) Promote 02.06.00

Problem description :
The problem is related to the Disconnect 'F' command not being discarded when it should be discarded.

The ATM is configured with 'ENQ after ACK' and 'Message on CP' both enabled. 
Upon exit supervisor, the ATM dials and sends R09, then host sends a Disconnect 'F' command, then the ATM sends P20, then host sends a go out of service '2' command. At this point, the ATM sends a CP Ready 9 message (response to the Disconnect 'F' command), but should send a CC Ready 9 (response to the go out of service '2' command). The 'F' command should have been discarded, but it was not. From here on, host then sends a command '7', ATM sends the CC Ready 9 (response to OOS cmd '2'), and at this point the Columbus Data host disconnects because the messages are out of sequence. 

This problem occurs only if the SSS Host Simulator is set to delay sending the response messages. With no delay, the problem does not occur, but with a
1 second delay, the problem occurs. It appears that the disconnect message is not discarded immediately when the ATM has another message to send (the P20 in this case), but instead continues to process the Disconnect.
Depending on how fast the next message coming in from host occurs, the disconnect CP Ready9 response is either discarded or sent.

As soon as it is known that the ATM has another message to send after the Disconnect command is received, the Disconnect command should be discarded and not processed at all.

The problem has been re-created in the lab by Bill May (US PS) and debug logs and a PD trace made available to Zubair Yakub (Engineering). The debug logs and PD trace indicate the issue is in AA-NDC.

The issue can be recreated remotely using NetMeeting or VNC if required for investigation/testing purposes.



Summary:
Cash Out - Ready9 sent in response to Dispense reply when shutter open and SP in suspend

Description:
If a cash out transaction is initiated when the GBRU is in suspend state (with shutter open), the shutter gets closed and a Ready 9 is sent (The dispense command fails with response SHUTTEROPEN).




Summary:
Display the denominations or currencies (if too much denoms) instead of note types on the confirmation screen.

Description:
Display the denominations or currencies (if too much denoms) instead of note types on the confirmation screen.




Summary:
TAR338232:  AA-NDC: Access violation from CustLayer during a Cash & Receipt print txn

Description:
Customer : Bank is Mauritius Post and Cooperative Bank Ltd - Republic of Mauritius.
Distributor is Blanche Birger (Mauritius).
S/W configuration : AA-NDC 02.06.06, APTRA XFS 04.01.01

Problem : Access Violation from CustomisationLayer during a Cash dispense and Receipt print transaction.

The problem reported was similar to TAR 317661 and the distributor installed the "fix with debug" for TAR 317661 on a production ATM. However the ATM rebooted after a few days and analysis of the UEH.log and application debug logs showed the problem was not fixed and this is effectively a new issue in the same area of code and therefore a new TAR (see email trail below).

Therefore to progress the issue we need to supply an updated "fix with debug" to cover the suspected area of code, for the distributor to install on a production ATM, and then capture the new issue before finally supplying a fix.





Summary:
TAR338232:  AA-NDC: Access violation from CustLayer during a Cash & Receipt print txn

Description:
Customer : Bank is Mauritius Post and Cooperative Bank Ltd - Republic of Mauritius.
Distributor is Blanche Birger (Mauritius).
S/W configuration : AA-NDC 02.06.06, APTRA XFS 04.01.01

Problem : Access Violation from CustomisationLayer during a Cash dispense and Receipt print transaction.

The problem reported was similar to TAR 317661 and the distributor installed the "fix with debug" for TAR 317661 on a production ATM. However the ATM rebooted after a few days and analysis of the UEH.log and application debug logs showed the problem was not fixed and this is effectively a new issue in the same area of code and therefore a new TAR (see email trail below).

Therefore to progress the issue we need to supply an updated "fix with debug" to cover the suspected area of code, for the distributor to install on a production ATM, and then capture the new issue before finally supplying a fix.





Summary:
Clarify in ANDC publications when download data are saved into custom.dat

Description:
In the Peer Review of the CustDat utility it came out that our IPs do not document clearly when download is saved into the custom.dat file to make the download persistent.

Rebekah has searched current IPs and it appears that this information is not provided.

The following condition need to be met
1) Host sends a configuration ID message as the last download message (download always runs in the Out of service mode)
2) Host sends a Go In Service (GIS) command




Summary:
TAR 335305 needs updated for CIC

Description:
This TAR fix involved a change to the BNA return note functionality in the Close State. The updated fix is to show the C02 screen instead of the state table 6 screen when going through the default close state...

Author Instuctions are available from Euan Pattullo (or the 03.01.01 SP folder, if I'm on holiday)

The CIC group need to update this to save complications when importing the CIC into 03.01.01 and above.



Summary:
TAR 343592 - When attempting to run the INIT_BNA function on a BNA2 device with the interlock open, the supervisor application crashes due to the fact that GBNA.ItemNoteTypes return 'Nothing'.

Description:
With the interlock open, the GBNA.ItemNoteTypes property return a value of 'Nothing' to the VBScript.  This property is unusable and is not currently being handled by the code.





Summary:
ANDC 93.02.00.51 - Sending downloads can cause application to terminate.

Description:
Sending downloads can cause application to terminate - Seen while testing 93.02.00.51.
Issue 1: Application Core terminates during NWCUSTOM download.
Issue 2: APPC/LD download (LD5085NT) has already been sent and SST is in service. Attempt to resend LD5085NT and the Application Core terminates.
Logs attached.



Summary:
When notes encashed old style journal information is logged only or with new style

Description:
After each encash call old style journal information is logged. I.e.
*198*11/09/2006*15:34*
     *VAULTED NOTES COUNT*
    
*3012*;4342042614750017=08062212437807500000?*
     *2 0 1 0 0 0 U U U U U U U U U U U
U U U U U U U U U U U U U U U U U U U U
U U U U U U U U U U U U U *
Also it is possible that both styles of messages will be printed when exception occures like supply > 1.

Current code which generates old style of journal message is not compatible with > 90 notes.

Only the new style information should be logged to the journal.





Summary:
System Escape when device not available during cashin SOD 

Description:
When device is not available during application startup there is a system escape resulting from ActiveXFS ItemNoteTypes property. This issue was not in earlier versions but introduced with the fix for >90 notes reporting.

Please check attachment for more details.



Summary:
When executing Test 5.2.0, from the TAR 329349 Test Specification on a BNA2 device, with the shutter held closed the error handling and subsequent screen display is incorrect.

Description:
Instead of opening the enclosure door, the shutter was held closed while selecting the ADD MORE option.  In this case, the shutter issue should have been detected and handled correctly.  What happened was that the application attempted to carry out the normal processing.  See the screen flow below.
018,019,020
     |
    015
     |
    100
     |
    105
     |
    102 (ADD MORE selected)
     |
    100 'PLEASE ENTER NOTES' screen displayed, shutter jammed so notes cannot be entered.
     |                                         this screen should not be displayed but for
     |                                         the purposes of testing its ok.     
     |
    103
     |
    109
     |
Back to beginning

See attached logs.



Summary:
TAR 329349, 5.11 Startup after restart with notes in escrow  BNA, Issue : Application crashes on startup

Description:
When running this test on the BNA2, the application does not start up.  A ' w3 ' error message is reported and the application dies.  The Windows Application Event Log contains the entry :

Object ID: 44028208
Process ID: 2880
Thread ID: 720
Process Filename: C:\TAR_329349_Testing\AANDC_Build2\25\CL_CIC025.exe
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> f:\auto93010014\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>      <SCLINE> 1381 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 114       Error Number: 2    Worker Id:     Description: VBScript has reported an error in a script passed to it.
The error is near line number 21 of Script Host Worker ID: 19b7na1.
VBScript has given the following error description:
	'Object required: 'GBNA.ItemNoteTypes''
The Source of the Exception is
	'Microsoft VBScript runtime error'
Script is:
'ProcID**activate**END
Dim objWSC
Sub activate()
  Set objWSC = CreateObject("CashinCommonImplementation.WSC")  
  objWSC.Debug "Activate CheckForNotesInEscrow Activescript Host 

It would appear this is caused by a different in the behaviour of the BNA and GBRU XFS Service Providers.



Summary:
CIC: GBRU Transactions - Need a flag so that OOXFS code can handle/avoid handling Cash In events

Description:
This is tied to GRIT 353077, to track progress from CashIn perspective. For CashIn the registry flag TransactionType must be set to 1, before any CashIn functions. So it seems like it will need to go into start of Cash Accept state, all 3 CashIn TR functions and just before BNA Close State if close state activity is needed.



Summary:
GBRU Transactions - Need a flag so that OOXFS code can handle/avoid handling Cash In events

Description:
OOXFS code will pick up events from the GBRU even during a Cash In tx using the ActiveXFS interface. The OOXFS code needs to know when a CI tx is active so it can handle events or ignore events as required. Additionally it needs to know when it is issuing a Reset command whether it can check the last present status or not to decide which bin to send notes to

New flag (Reg key) called TransactionType to be introduced and will be set to 1 for a CI tx and 0 for CO - default is 0. The ResetRequired flag will be extended to support the value 2 which will indicate a Reset from the CI tx. For the 1st iteration this will actually cause the application to not issue a reset if this value is set to 2



Summary:
Include Diebold vendor data to AANDC status messages (similar to 315593)

Description:
[16:28:01] Event WFS_SYSE_HARDWARE_ERROR (2) arrived
	RequestID: 0
	hService: 11
	tsTimestamp: WED 01.06.2005 15:28:01,870
	szLogicalName: PRJ30
	szPhysicalName: PRJ30
	szWorkstationName: 204MASTER_2
	szAppID: PTR300
	dwAction: WFS_ERR_ACT_NOACTION (0x0000)
	dwSize: 13
	bDescription
		StClass: 0x00000033
		StCode: 0x2800810D
		StWarn: 0x00000000
		sDescription: EMPTY
	szDescription HEX: 33 00 00 00 0D 81 00 28 00 00 00 00 00

extra info to be added to Mdata in status message:
000000332800810D00000000




Summary:
MV EPP secure key entry updates

Description:
MV EPP secure key entry updates
1. Wincor Key must be loaded in exacly 2 parts. Need to be able to abort key entry at part2 and reload part one again.
2. Wincor/Diebold Need to be able to reset encryptor i.e move to the same mode.
3. Need to be able to offer mode 1-4 and allow the EPP to decide legality of operation.
may conflict with AANDC security requirements. Not sure if AANDC can really detect a VISA PED EPP through XFS.
4.  where mode 3 XOR outwith the encryptor to support wincor.




Summary:
MV Printing - Control media using CEN-XFS commands, eg Cut, Form Feed

Description:
1. Use XFS media control to present the receipt instead of FF as no ESC codes available on opteva.



Summary:
Integrate the latest Cash-In Component with 3.02.00

Description:
Integrate the latest Cash-In Component with 3.02.00. Version integrated is CIC 91.01.00.15.
Integrate the latest Cash-In Component with 3.02.00. Version integrated is CIC 91.01.00.16 for ANDC IT build 69.



Summary:
Integrate 3.02.00 current work on top of AANDC 3.1.1

Description:
Integrate 3.02.00 current work on top of AANDC 3.1.1



Summary:
Support Dual Dispense for more denominations (host impact), up to 7 NDC Cassette Types

Description:
Support Dual Dispense for more denominations (host impact), up to 7 NDC Cassette Types



Summary:
Support Cash In/Cash Out on GBRU (ATM with GBRU, no dispenser, no recycling)

Description:
Support Cash In/Cash Out on GBRU (ATM with GBRU, no dispenser, no recycling)



Summary:
Support 7 physical Cassette ID's

Description:
Support 7 physical Cassette ID's



Summary:
CCM VISA2 causes system reset after exit from Supervisor

Description:
The issue is that CCM VISA2 91.00.03.07 when selecting the new feature "data logging" from dialup diagnostices, is that on exit supv a system reset occurs (with standard SP IDC & pre-release).

Disabling data logging cures the the escape. 

From the app event log: 
Atm re-boot at 24/10/06  12:20.03 
In supv (prior to exiting) last ok app event at 12:25.21 
Exit supv and examine app event errors. 





Summary:
Documentation needs updated to detail USR modem configuration

Description:
Documentation needs updated to say:
The USR modem should not have the S13 register set to reset the modem when it detects the DTR is dropped or the NO CARRIER signal is not detected.
The modem should also be configured to use error correction oir garbage data is seen when the line is dropped.



Summary:
TAR  336842:  System escape on retracting notes after timeout

Description:
 When retract is active, a system escape occurs if a note is returned and
   taken at the end of the timeout period as the retract is attempted. This is
   because there is an invalid call in the script which causes the following
   error to be reported:-
   
   Event Type:	Error
   Event Source:	APTRA Problem Determination
   Event Category:	None
   Event ID:	20
   Date:		10/27/2006
   Time:		11:22:29 AM
   User:		N/A
   Computer:	OCBC-UX2
   Description:
   The description for Event ID ( 20 ) in Source ( APTRA Problem Determination
   ) cannot be found. The local computer may not have the necessary registry
   information or message DLL files to display messages from a remote computer. 
   You may be able to use the /AUXSOURCE= flag to retrieve this description;
   see Help and Support for details. The following information is part of the
   event: 159813512, 2948, 2952, C:\ssds\apps\OCBCcustomisationlayer.exe,
   NCRScotland.SSDS, mError, <SCFILE>
   f:\auto93010014\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>  
       <SCLINE> 1381 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2  
        Domain: 114       Error Number: 2    Worker Id:     Description:
   VBScript has reported an error in a script passed to it.
   The error is near line number 386 of Script Host Worker ID: 24s74ea1.
   VBScript has given the following error description:
   	'Wrong number of arguments or invalid property assignment:
   'GetNextActiveDenomCount''
   The Source of the Exception is
   	'Microsoft VBScript runtime error'
   
   The line of code referenced is:
   
   386                   ComCdi.ComInteger( 3292 + iRetCount ) =
   GetNextActiveDenomCount() + ComCdi.ComInteger( 3292 + iRetCount )    
   (Note lastCashinStatDict is not passed as a parameter in the function call)
   where the function GetNextActiveDenomCount is defined as:
   
   519   Function GetNextActiveDenomCount(lastCashinStatDict)
   
   If the retract is succcessful, the following call is used successfully:
   
   308               ComCdi.ComInteger( 3292 + iRetCount ) =
   GetNextActiveDenomCount(lastCashinStatDict) + ComCdi.ComInteger( 3292 +
   iRetCount )    




Summary:
Request to add additional trace details to the journal to assist WCS

Description:
TAR RFC 318174 - Request to add additional trace details to the journal to assist WCS.
Request from United Arab Emirates to add additional trace details to the
journal to assist WCS and customers more easily resolve issues reported with 
communications, i.e. to identify the correct status on the spot without
playing with the cables and PD information, with a simple question over
telephone ?what is printed on the Journal? and act upon it. 

Require more message to be printed on the journal with time stamps : 

Communication Up [Network is connected] 
Link Down/SST Offline [Port/Socket] 
Link Up/SST Online [Port/Socket] 
Download Initiated 
Received ?In-Service? [1<fs><fs><fs>1] 
ATM Suspended [Unknown] 
Received ?Out-of-Service? [1<fs><fs><fs>2] 

If the above messages are printed on the ATM Journal our R&D work will be
reduced by good numbers. 


FGSC NOTE : Previously in an NDC/NDC+ environment, WCS and customers were
able to resolve most communication issues by using a combination of the NDC
Journal Trace functionality, and the communication diagnostics. 

In an APTRA environment, there are no communication diagnostics provided for 
TCP/IP, this functionality has been left to the application developers to
incorporate into the application. The Journal Trace functionality which
was previously present in NDC/NDC+ would resolve approximately 50% of the
above RFC requirement.




Summary:
Cash Out - When interlock switch is closed, all commands fail with device not ready

Description:
Below is the specific scenario where all commands will fail with response DEVNOTREADY after the interlock switch is closed.
1. Open interlock switch
2. Perform a Reset - It fails with response HWERROR because the interlock is open
3. Perform a TestCash - This also fails with response HWERROR
4. Close the interlock switch
5. All commands except the Reset will fail with response DEVNOTREADY
6. Do a Reset - it succeeds
7. All other commands should work now"




Summary:
TAR 330855 - Misrecognition Journaling Appears in the Wrong Workgroup

Description:
1) Misrecognition error calls workgroup 3, but Journal Misrecognition Error
(0p337c1) appears in workgroup 4. 
2) Workgroup 4 is not being called at all from within the script.




Summary:
TAR 330854 - Should not set BNA Supplies Status to Good when CashInFailed triggers

Description:
When CashInFailed is triggered Supply Status is set 1(Good)



Summary:
mError thrown by AA-NDC when AXFS returns null parameter for ItemNoteTypes

Description:
TAR 328585 - mError thrown by AA-NDC when AXFS returns null parameter for ItemNoteTypes. 



Summary:
Init BNA Successful but Counters not cleared

Description:
Init BNA executes Encash or Retract only if last transaction status = cash-in-active. 
Counters is reset in Encash or Retract.
But if Encash or Retract is not performed due to last transaction status not equal to cash-in-active, counters are not reset, and carried forward to the next transaction (if it is not a cash-in transaction). 
Application assumes there are notes in escrow and attempt to vault/refund the notes during close state.
Please find below the sequence with the related log. Also attached is the full debug log.
1) First transaction, 1 note accepted (Type 6). Press cancel on confirmation screen.
SEACust.. 17:16:48.265 Cancel Pressed - Notes in Escrow = 1  
<wid>300b7na1</wid>
SEACust.. 17:16:48.265 setting refund flag to 1  
<wid>277b7na1</wid>
SEACust.. 17:16:48.265 Current Fitness of BNA = 0  
<wid>278b7na1</wid>
SEACust.. 17:16:48.687 Refund
SEACust.. 17:16:48.906 ConfiguredDenomCount : 6
SEACust.. 17:16:48.906 AcceptedBankNotes   : 1
SEACust.. 17:16:48.906  Escrowed Notes 5 1
SEACust.. 17:16:48.906  Escrow Counts [Type : 6][ Note Count : 1]
2) RollbackFailed
SEACust.. 17:16:56.875 GBNA_RollbackFailed
SEACust.. 17:16:56.906 start_updatebnafitness
SEACust.. 17:16:56.921  No Extended message
SEACust.. 17:16:57.125 End_updatebnafitness = 4
SEACust.. 17:16:57.171 NOTES REFUND FAILED
SEACust.. 17:16:57.171 WORKGROUP SET FITNESS
FITNESS = 4 
3) In Close State, AANDC attempt to vault the notes
SEACust.. 17:17:13.484 BNA Close State Entered
Refund/Vault/Leave Flag = 0  
<wid>818b7na1</wid>
SEACust.. 17:17:13.484 Attempting to Vault the notes  
<wid>822b7na1</wid>
SEACust.. 17:17:13.718 ConfiguredDenomCount : 6
SEACust.. 17:17:13.718 AcceptedBankNotes   : 1
SEACust.. 17:17:13.718  Escrowed Notes 5 1
SEACust.. 17:17:13.718  Escrow Counts [Type : 6][ Note Count : 1]
4) CashInEnd fails because CashIn Not active (as Rollback above has ended the CashIn)
EACust.. 17:17:15.546 Calling GBNA.CashInEnd
SEACust.. 17:17:16.109 @@[XFSErrorEvent Information Start]@@
SEACust.. 17:17:16.109 Error.Time : 10/11/2006 5:17:16 PM
SEACust.. 17:17:16.109 Error.ApplicationName : 
SEACust.. 17:17:16.109 Error.XFSError : -188
SEACust.. 17:17:16.125 Error.Description : Device: BillAcceptor1,Description: CashInEnd; Cash In has not active
5) Go into Supervisor. 
Replenish 54 does not perform either Encash or Retract because Last Transaction status is NOT equal to 2 (Cash In Active)
SEASupe.. 17:21:38.921  Activate - LastCashInStatus 
SEASupe.. 17:21:38.921 VariantFlag1
SEASupe.. 17:21:38.937 Index2
SEASupe.. 17:21:39.328 in Last cashin status script GBNA Availability : 0,GBNA Status : 0
SEASupe.. 17:21:39.531 INIT BNA : - LastCashin.Transaction Status :- 4
6) Reset successful, notes cleared.
SEASupe.. 17:21:40.328 Calling GBNA.Reset
SEASupe.. 17:23:03.656 MediaDetected. movedSuccessfully = -1
SEASupe.. 17:23:10.546  GBNA Reset OK
SEASupe.. 17:23:10.562  XFS_AVAILABLE 
7) First transaction after exit from Supervisor. Press cancel BEFORE entering Cash Accept State.
SEACust.. 17:23:47.171 NON CARD TRX
SEACust.. 17:23:50.781 
*****
CALLING CLOSE STATE EXIT
*****
<wid>2s1914g220</wid>
8) AANDC attempt to do Vault during close state (while there is no notes in escrow). Previous count visible.
SEACust.. 17:23:51.015 GBNA.DeviceStatus in CheckFatal ActiveScriptHost0
SEACust.. 17:23:51.015 BNAFitness.Data in CheckFatal ActiveScriptHost0
SEACust.. 17:23:51.015 NotesAtThroatFlag.Data0
SEACust.. 17:23:51.015 Deactivate in CheckFatal ActiveScriptHost
SEACust.. 17:23:51.031 Taking Copy of BNA Fitness before entering Close State = 0  
<wid>821b7na1</wid>
SEACust.. 17:23:51.031 Set BNA Fitness to GOOD for Close State Processing  
<wid>823b7na1</wid>
SEACust.. 17:23:51.031 BNA Close State Entered
Refund/Vault/Leave Flag = 0  
<wid>818b7na1</wid>
SEACust.. 17:23:51.046 Attempting to Vault the notes  
<wid>822b7na1</wid>
SEACust.. 17:23



Summary:
Double w1 msg sent when No pressed on Timeout screen from confirm scrn.

Description:
When the confirmation screen times out and more time is asked for then when pressing No there are 2 w1 msgs sent to host.  The first one contains counts of bills returned and the other has empty counts. Pressing the Cancel key on timeout screen only sends one w1 msg, the correct one, with returned counts.



Summary:
TAR 329116 - Request for AANDC Replenish Option 9 & 41 to also clear fatal device faults

Description:
TAR 329116 - Request for AANDC Replenish Option 9 & 41 to also clear fatal device faults
Customer has requested that behaviour previously observed with NDC+, be
implemented in AANDC Multi vendor. 

With Replenish Options 9 INIT RECEIPT and 41 FILL ENV, the device fitness
would be cleared first. 

Here is a part of NDC+ supervisor manual for 9 INIT RECEIPT: 

'This option performs a form feed and cut operation to position the paper
correctly, and clear the following: 

Device fitness 
Paper out and low flags 
Black mark count. 
This option clears SOH levels 2 and 3 that are not tally-based. For details
of clearing tally-based SOH conditions, see Chapter 2, ?Introduction To The 
Supervisor Menus? sections ?20 CLEAR SOH LEVEL 2? and ?21 CLEAR SOH LEVEL
3?.' 

Select this option to initialise and clear the fitness of the receipt
printer. You should perform this function whenever a new roll of paper has
been fitted, in order to position it for the first transaction. You should
also perform this function after a receipt printer malfunction in order to
return the device to service.' 

This differs from waht is documented for this option in the AANDC 2.6.X and
3.X.X Supervisors Guide. It does not detail clearing SOH and in fact
suggests that the device status list should be interogated before carrying
out this option. 

When this option is selected with AANDC (2.6.X and 3.x.x), if the device is
already in a fatal condition then INITIALISATION FAILURE error is returned.
This is the same behaviour with the Envelope Dispenser and replenish option
41 FILL ENV, though the aandc Supervisor Guide for both 2.6.x and 3.x.x
details that the device fitness would be cleared. I expect that this is
purely an oversight in the documnent and like with the Receipt printer, the
documented behaviour was never the intended implementation. 

However, customer has requested that the behaviour be the same as with NDC+, 
since with AANDC 03.01.X being based on CEN3 it could send a Reset commands.




Summary:
TAR 336376 - Reject bin returning not configured

Description:
AA-NDC 03.01.00 
XFS 04.02.01 

When you send a supplies status command from the host it always returns the
reject bin as not configured. Straight after a reboot and after
transactions have been performed. 

This was tested on 2.6.6 which behaved normally returning the reject bin in
a "good state" and was also tested on 3.0.3 which was the same. 

This is what we saw during out tests under 03.01.00 

Rcvd: 09:33:13.77 Src MAC: 0200C860F035 Dest MAC: 422466664224 Length:
053 
Hex :
2C000101001403B000F2F21CF0F0F0F0F0F3F3F0F61C1CC61CC9C1C4F11DC5F0F2F2F0 
Text: 2 2 0 0 0 0 0 3 3 0 6 F I A D 1 E 0 2 2 0 

F01DC6F11DC7F1F1F1F11DC8F1F1F11DE0F1 
0 F 1 G 1 1 1 1 H 1 1 1 \ 1 



Summary:
TAR 336376 - Reject bin returning not configured

Description:
AA-NDC 03.01.00 
XFS 04.02.01 

When you send a supplies status command from the host it always returns the
reject bin as not configured. Straight after a reboot and after
transactions have been performed. 

This was tested on 2.6.6 which behaved normally returning the reject bin in
a "good state" and was also tested on 3.0.3 which was the same. 

This is what we saw during out tests under 03.01.00 

Rcvd: 09:33:13.77 Src MAC: 0200C860F035 Dest MAC: 422466664224 Length:
053 
Hex :
2C000101001403B000F2F21CF0F0F0F0F0F3F3F0F61C1CC61CC9C1C4F11DC5F0F2F2F0 
Text: 2 2 0 0 0 0 0 3 3 0 6 F I A D 1 E 0 2 2 0 

F01DC6F11DC7F1F1F1F11DC8F1F1F11DE0F1 
0 F 1 G 1 1 1 1 H 1 1 1 \ 1 



Summary:
TAR 336540 - AA NDC - DASH module set fatal - no SNMP and fatal condition cannot be cleared

Description:
This TAR is raised as a result of an issue that has been reported in from
the UK PS team. They have various deliveries ot fulfill with A&L when they
found that if they leave a card in the DASH card reader then AA NDC sends a
message to the host indicating that the DASH is fatal (this happens after
timer72 times out registering the DASH in suspend mode and then after the
suspend timeout expires the DASH is registered as Fatal). 

The application sets this status (with the appropriate registry settings
set) as opposed to th eDASH module to try and mimic the functions of NDC+.
Unfortunately, because the application actions this the fatal status does
not appear in the device status list and no SNMP traps are sent (if
configured). Further more, if the card is left in the DASH when the "device" 
is registered as fatal and then the card is removed when in diagnostics then 
the module stays registered as fatal. This fatal condition will not be reset 
aftert reseting the ATM or sending the ATM in to service. The only way to
reset the DASH reported severity is to edit the registry entry "severity =
0". 

This whole area needs to be addressed and resolved to behave correctly. This 
issue has been discussed witb Euan Patullo. 

I have discussed further with the module group as better solution would
probably be to have the DASH issue the fatal status. This can be done by
emulating a customer tamper type scenario as implemented by the motorised
card reader. After 3 Mstatus 13 (cust tamp's) the device goes fatal
returning mstat 16. The system is setup to react to a device going fatal so
the SNMP trap will be sent and the fatal device will appear in the device
status list. This will bring the expected functionality back in line with
all other modules - aka the device dictates the severity not the
application. 

The UK PS team have deadkines to meet in December in order to be well
positioned to rebid for the A&L tender. This issue needs to be addressed
with the appropriate priority. 




Summary:
TAR 336438 - Pop up and incorrect counts after retract of notes that will be above capacity of bin.

Description:
The problem description is as follows.
1)	This issue occurs when the number of notes on the retract will exceed the bins maximum capacity. 
2)	The issue is a pop up saying that ¿object not found for BNASupplies¿ in cashincommonscript.




Summary:
IT-Settlement Transaction Screens are not properly displayed.

Description:
GR1T 349559 (TAR 327757) - AA-NDC: FAILn not displayed if match on Settlement Next State Action table
Problem:After Pressing '0' at the Func Prompt it is directly getting to Buffer B 

 Test on SST without EOP
Problem:After Pressing '0' at the Func Prompt it is directly getting to Buffer B and at last giving FAIL 0 on the Front before Func Prompt after Please wait¿screen

 Test on SST with EOP
Problem:After Pressing '0' at the Func Prompt it is directly getting to Buffer B 





Summary:
TAR 335999:  the NDC variable idNotesDispType1 (etc) to 0 is not changing its value

Description:
Short Description(s):
  1) the NDC variable idNotesDispType1 (etc) to 0 is not changing its value

Current Full Description:
   ______________________________________________ 
   From: 	Tywoniak, Jiri  
   Sent:	19 October 2006 09:12
   To:	Auto-EMail, FGSC
   Cc:	Tywoniak Jiri NCR
   Subject:	CSB: 
   Importance:	High
   
   Dear Hotline,
   
   CSB has reported problem regarding not clearing the dispense counters.
   
   It looks as setting the NDC variable idNotesDispType1 (etc) to 0 is not
   changing its value, on contrary it keeps its original value.
   I guessed that it can have something common with moving to 2 dispensor
   support in AA-NDC.
   
   To speed up the resolution of the problem, because it is really very urgent
   now, I have contacted engineering with this my suspect and Jan Vesely thinks 
   that the problem is already fixed in cashhandlerwc.cpp, revision
   1.65.7.8.4.10.
   
   I need the fix ASAP, because the number of ATMs affected is growing every
   day because the rollout is in progress.
   
   Just adding that though I have identified the problem in my c-exit, the same 
   c-exit code has been already deployed more that 3 years ago and running in
   all versions of aa-ndc 2.4 and up to 2.6.x on 2.2.2 and 4.2.1?
   
   best regards
   jiri




Summary:
TAR 335999:  the NDC variable idNotesDispType1 (etc) to 0 is not changing its value

Description:
Short Description(s):
  1) the NDC variable idNotesDispType1 (etc) to 0 is not changing its value

Current Full Description:
   ______________________________________________ 
   From: 	Tywoniak, Jiri  
   Sent:	19 October 2006 09:12
   To:	Auto-EMail, FGSC
   Cc:	Tywoniak Jiri NCR
   Subject:	CSB: 
   Importance:	High
   
   Dear Hotline,
   
   CSB has reported problem regarding not clearing the dispense counters.
   
   It looks as setting the NDC variable idNotesDispType1 (etc) to 0 is not
   changing its value, on contrary it keeps its original value.
   I guessed that it can have something common with moving to 2 dispensor
   support in AA-NDC.
   
   To speed up the resolution of the problem, because it is really very urgent
   now, I have contacted engineering with this my suspect and Jan Vesely thinks 
   that the problem is already fixed in cashhandlerwc.cpp, revision
   1.65.7.8.4.10.
   
   I need the fix ASAP, because the number of ATMs affected is growing every
   day because the rollout is in progress.
   
   Just adding that though I have identified the problem in my c-exit, the same 
   c-exit code has been already deployed more that 3 years ago and running in
   all versions of aa-ndc 2.4 and up to 2.6.x on 2.2.2 and 4.2.1?
   
   best regards
   jiri




Summary:
When restarting the application following execution of Test 5.6.0 from the TAR 329349 Test Specification on a BNA2 device failed, the application did not restart properly.

Description:
See attached logs.



Summary:
Executing Test 5.3.0 from the TAR 329349 Test Specification on a BNA2 device failed.  Both the screens displayed and the messages generated were wrong.

Description:
See the attached logs and in particular 'Test_5_3_0_Result.doc'.



Summary:
When executing the SUPERVISOR INIT_BNA operation on a BNA2/GBRU, it has been observed that a first execution can fail and after some seconds a second execution can succeed.

Description:
Following the execution of Test 5.2.1 (Error during accepting notes with not empty escrow) from the TAR 329349 (No counts being sent in Solicited Device Error for > 90 notes of single type.) Test Specification, I attempted to perform Procedure 5 in order to clear the device of the notes on the escrow resulting from the test.

I went to Supervisor and executed INIT_BNA which resulted in an INITIALISATION FAILURE error.
After 30 seconds I re-executed INIT_BNA and this time it exercised the hardware and returning the inserted notes in two bunches.
Once the bunches were returned the REPLENISH screen displayed the message "BUNCH NOTE ACCEPTOR INITILISED"

The issue is that the INIT_BNA failed the first time and succeeded the second time.
It appears that the first INIT_BNA execution is clearing some internal state which is allowing it to run the second time.



Summary:
When executing Test 5.1 from the TAR 329349 Test Specification on a BNA2 device, the 'PLEASE ENTER NOTES' screen is displayed.'

Description:
During execution of Test 5.1 (Error during accepting notes with empty escrow) from the TAR 329349 (No counts being sent in Solicited Device Error for > 90 notes of single type.) Test Specification , it was found that the 'PLEASE ENTER NOTES-100' screen was displayed.

Since the power is cut to the device before the deposit operation is initiated the 'PLEASE ENTER NOTES' screen should not be displayed.  I expect the application should wait until the device has been successfully enabled for deposit before displaying this message.

This issue was identified while testing with a BNA2 device.



Summary:
Wincor - cant move from restricted mode back to modes 1,2,3 - checksum failed.

Description:
usage error in modes 1,2,3 after restricted mode used. fresh start recovers situation.
dwuse = 0x2a6  with part 1 only, temp key, not allowed.
Only applies where G331034 applied



Summary:
TAR 335982 - Notes with NoteIDs > 32767 being rejected

Description:
NoteID property being used instead of NoteIDFullRange so notes with NoteIDs are being converted to negative numbers and then not enabled during ConfigureNoteTypes function.



Summary:
Cash Out - Dispenser severity is reported as 4 when a dispense fails as a result of cash in state being active

Description:
Currently,the dispenser severity is reported as 4 if the cash in is active. Cash in team has a fix for this now and the cash in state will be exited in close state so the subsequent dispenser commands will not fail now. 



Summary:
Executing Test 5.7.0 from the TAR 329349 Test Specification,  causes the application to stop while displaying the 'Transaction in Progress' screen.

Description:
During execution of Test 5.7.0 (Error during encash notes in Close state) from the TAR 329349 (No counts being sent in Solicited Device Error for > 90 notes of single type.) Test Specification , it was found that the test stopped while displaying the 'Transaction in Progress - 040' screen.  The test had to be abandoned by terminating the application. 

This issue was identified while testing with a GBRU device.



Summary:
Application fails to restart after having been terminated following a successful cash deposit operation.  That is, with notes present in the devices' escrow.

Description:
During execution of Test 5.7.0 (Error during encash notes in Close state) from the TAR 329349 (No counts being sent in Solicited Device Error for > 90 notes of single type.) Test Specification , it was found that when the application was terminated and restarted with notes in the escrow, the application did not restart successfully and there was no possibility to enter SUPERVISOR mode.

This issue was identified while testing with a GBRU device.



Summary:
TAR 335305 -In the default close state, screen 002 is displayed, NDC+ displays screen C02

Description:
Please see STAR



Summary:
TAR 335305 -In the default close state, screen 002 is displayed, NDC+ displays screen C02

Description:
Please see STAR



Summary:
When a w3 message is generated, both the old and the new style journal information is logged.  Only the new style information should be logged.

Description:
During execution of Test 5.2.0 (Error during accepting notes with not empty escrow) from the TAR 329349 (No counts being sent in Solicited Device Error for > 90 notes of single type.) Test Specification , it was found that both the old and new style journal information was logged.  I.e.

   ESCROW COUNTS: 90 - 2 90 0 0 0 0 0 U U U
   U U U U U U U U U U U U U U U U U U U U
   U U U U U U U U U U U U U U U U U U U U 
   VAULTED COUNTS: 0 - U U U U U U U U U U
   U U U U U U U U U U U U U U U U U U U U
   U U U U U U U U U U U U U U U U U U U U 
   RETURNED COUNTS: 0 - U U U U U U U U U U
   U U U U U U U U U U U U U U U U U U U U
   U U U U U U U U U U U U U U U U U U U U 

   _[020t*498*10/16/2006*13:28*
        *    *1*w*3, M-00, R-1
   CASHUNIT FAILED
   ESC:093
   EUR5-002,EUR10-091,
   EUR20-000,EUR50-000,
   EUR100-000,EUR200-000,

Only the new style information should be logged to the journal.

This issue was identified while testing with a GBRU device.



Summary:
TAR 335310 -Option 34 (MCN Range) option always resets the MCN

Description:
Please refer to STAR



Summary:
Cash Out - Need to perform a Reset at SOD instead of SP doing it on Start Up

Description:
If a power fail occurs after the notes are presented, the auto reset after machine reboot sends the notes to the reject bin (should be the retract bin).




Summary:
Timeout implementation in CashIn has to be simplified

Description:
There are 3 paths in CashIn Timeout implementation:
1. No More Time ("No" FDKey Pressed Triggered)
2. No More Time ("Cancel" Key Pressed Triggered)
3. No More Time (Timeout Triggered)
Points 1 and 2 have to use the same code.





Summary:
Reimplement GRIT 350361 on top of TAR 335104

Description:
GRIT 350361 needs to be reimplemented after 335104 TAR fix. After this TAR fix the way timeout exit is handled is changed. there is no retract/encash after timeout. G350361 has to be reimplemented in a way such that if there are no notes in the escrow only then issue a Rollback command to end the Cash-In State and if there are some notes in the escrow the host should take care of handling the notes.



Summary:
MV : In Diebold Opteva machine the Note Counts are not proper

Description:
When a Test Cash was done on a Diebold Opteva machine the counts displayed where not proper.

The counts were set as 100 in each Cassette and when test cash was done and DISP Cash selected the counts showed was as below 
Cassette              00099                            Cassette              00099 
+ Reject              00000                            + Reject              00000
= Remaining        00099                            = Remaining        00099
+dispensed          00000                          +dispensed          00000                           
= Total                 00099                           = Total                 00099




Summary:
MV : The letter "A" is missing from the P74 screen "START EXCHANGE FAILED " display

Description:
The Letter A is missing from the screen display 

The Screen shows as " START EXCHANGE F ILED " instead of  "START EXCHANGE FAILED "



Summary:
NOVABANK - MV  Printing issues ANDC 3.0.2 - for Opteva

Description:
Added for novabank as greece have opteva customers lined up after the novabank project.

1. Use XFS media control to present the receipt instead of FF as no ESC codes available on opteva.




Summary:
NOVABANK 304 - MV EPP issues ANDC 3.0.2

Description:

1. Need to be able to offer mode 1-4 and allow the EPP to decide legality of operation.
may conflict with AANDC security requirements. Not sure if AANDC can really detect a VISA PED EPP through XFS.
2.  where mode 3 XOR outwith the encryptor to support wincor.




Summary:
NOVABANK 304 -Wincor - Configure cash units does not handle 2x high dispencer

Description:
NOVABANK port
Application exception - required update to script in 37n6101dc129 to exit where invalid cassette data received. Easy change



Summary:
NOVABANK 3.0.4 OOXFS VDM init causes failure in Wincor.

Description:
Failure of VDM to start causes ANDC to close session with XFS manager and it is not re-opened before attepting to start the next device.  This causes issues at XFS platform level on ProDevice. 



Summary:
Supervisor application crashes for Init BNA when device is offline

Description:
Recreation steps :

Rack out the cassettes after inserting the notes. The device will go offline.
Do Init BNA - supervisor application crashes.



Summary:
Mdata field not sent as fixed 2 digit hex character

Description:
Mdata supposed to be in the format of fixed 2 hex characters eg. xx, xxyy, xxyyzzaa.
ie, character 1 need to be sent as 01.

Please refer to the following log:
SEACust.. 16:18:58.218 XFSErrorResult = 01160 XFSWarningResult = 00
SEACust.. 16:18:58.218 ErrorResultSrvcAddr 16 Class 3 TCode 0 TLen 20 3 0 25 0 103 0 0 0 163 0 0 0 0 0 0 0 22 0 0 0 SLen 1 4 MCode 2 MStatus 1 MLen 2 22 0 RSLen 0 RCLen 0

In the above example:
MStatus 1 ==> Mstatus = 01
MLen 2 22 0 ==> Mlen = 2, Mdata = 22 0 (decimal) equivalent to 16 00 (hex).

Expect XFSErrorResult (Mstatus + Mdata) to be: 011600 (01 16 00)

However, XFSErrorResult is sent as 01160 (01 16 0) as highlighted in red above.

Message sent to host:
16:21:28  # 36    [22_000__8_w3  ~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   _4_01160_0]

The Mdata need to be pre-fixed with 0 if necessary to make it in fixed 2 hex characters format.




Summary:
TAR 335104 - Escrow counts are not reported if the confirmation screen times out

Description:
Issue is that customer went to TReq state after timeout exit on Cash Accept state and expected the ca2, ca3 fields to be filled out with counts of notes which had been in the escrow. It was like this in 2.6.x but that was due to a bug.  It has been decided to change the current implementation (not as an RFC as its not documented) to no longer vault or retract the notes after customer timeout in confirmation screen. Any notes left in escrow will be cleared either by host in TReq state or in Close State. This is more in keeping with NDC philosophy of giving the host control.



Summary:
Journal PTR paper out condition reported as successful print & 0 Mstatus 

Description:
Related to TAR 332931. 

After paper out condition, back up journalling started. On paper
replenishement, journal reprint started and status message sent indicating
this. 
However if replenished with too little paper for replenishment to be
successful, reprint halted status msg sent though supplies status was
incorrece (paper ok). 

This was followed by another unsolic detailing successfull print, 0 Mstatus, 
and paper status ok - though this is also incorrect as MStatus reported by
Journal Printer is 5, with a fatal severity as paper is out. 

Extract of logs below - 

11:53:05 # 48 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H8[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]1111] - reprint started 

11:53:21 # 49 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H;[Unicode-x1C]2[Unicode-x1C]05[Unicode-x1C]3111] - reprint halted with correct paper 
supplies status - fixed by TAR 323931 

11:53:42 # 50 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P20] 

11:54:47 # 52 [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 

11:54:49 # 53 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H0[Unicode-x1C]4[Unicode-x1C]00[Unicode-x1C]3111] - unsolic incorrectly indicating
successful print and wrong M_Status, though severity and supplies status
correct. Print should not indicate successful and MStatus should reflect
that reported by Journal Ptr i.e. 5. 

Fix required to be applied to HSBC AANDC 02.06.06 build. 




Summary:
TAR 331643 - AA-NDC:Auto voice audio with audio disabled causes problem with AVI display

Description:
Please refer to STAR	



Summary:
Cash Out - Init BNA still required even if Cash out has performed a Reset to clear the cash in error

Description:
Need to set the BNAFitness store to 0 (good) if the reset performed by cash out clears the cash in error successfully



Summary:
MV EPP issue in AANDC COE 93.01.00.01 Build

Description:
Wincor Key must be loaded in exacly 2 parts. Need to be able to abort key entry at part2 and reload part one again, but unable to do so.
I was able to recreate the issue in " 2 (Single Length XOR) ,3(Double Length XOR ),and 4(Double length Restricted)  modes "
Steps done :
1. Entered Part 1 of A Key
2. While Entering the part2 of A key abort keyentry 
3. Was able to enter the 2 part of A key again
4. Entered Part 1 of component 3 and aborted mid way and tried 
     entering the keys again .It showed " Part 1 Already set "




Summary:
Cash Out - Display Cash function shows incorrect total count when a cassette runs out of notes during dispense

Description:
when the cassette runs out of notes during a dispense, the notes picked during the dispense will not be sent to the reject bin. They will stay in the escrow. As a result, the ulCount of the Cassette will be decremented by the no. of notes picked and the Reject count will not be updated because the notes were not sent to the reject bin. So the Total Count will be less than the installed count.



Summary:
IT-no Diagnostics Menu displaying in Supervisor 

Description:
There is no Diagnostics Menu displaying in Supervisor when we press 7 it is showing 
NO Diagnostics Application
    Press Enter to Shutdown ATM 
    Press Cancel to return to Select Menu.




Summary:
Cash-In State remains active when cancel pressed without inserting any notes

Description:
If there are no notes inserted and cancel pressed or a timeout occurs on the please insert notes screen, the application does not call RollBack to end the cash-in. This results in Cash-In state to remain active. This is affecting cash-out as any command send to the device after this will fail as Cash-In is still active. 



Summary:
TAR 334378: User prompted for more time while GBNA counting

Description:
The GBNA is set to accept upto 90 notes (option 45=5) 

90 notes are then entered and the confirmation screen is presented, the user 
then selects to add more notes and does so, since the predefined limit has
been passed the GBNA begins to stack the notes for refund back to the user. 
However the GBNA takes so long to do it that there is a timeout event and
the user is prompted for more time. 

(In this case with the GBNA refunding around 90 - 100 notes the timeout
event happens just before the notes are presented to the user) 

The customer has stated also that the FDK keys were inactive when presented
with the "do you want more time" screen and they were unable to select more
time. This has not been tested fully as the re-creation was done with a
touchscreen and it was working. 

Finally after the user removes the notes they are then prompted to enter
more notes straight away.




Summary:
Supervisor Replenish functions 58/59 now need to include both CashIn and CashOut counts.

Description:
For the new CashIn-CashOut development on GBRU where the Reject bins are shared, the counts must be shown by combining the Reject count of CashOut with the Reject count of CashIn, to show the physical contents of the bin. Only done for Reject bin. Retract not included because CashOut does not track this and because the device cannot guarantee reporting of notes in retract bin, and neither can the app.



Summary:
ANDC 93.01.01.02 - Wincor - Supervisor option 26 Fault Display does not show cassette low condition.

Description:
Wincor SST.

If we run cash transactions until the cassette crosses the low threshold, the unsolic message for the low condition is sent to the host.
However, when we enter Supervisor and option 26 FAULT DISPLAY, the low condition for the cassette is not displayed.



Summary:
TAR 277220  Request change to the way printing from Supervisor works

Description:
TAR 277220  Request change to the way printing from Supervisor works.
Reason for this request is that the Customer has EJ enabled and is unable to get a Hard Copy Print of the Config menu or the Access menu when using the rear (EOP) of the ATM - When printing the access or the config menu the Set Print setting is ignored. 

Currently when printing the Config or Access menus from the rear (EOP) the print is on the EJ (If enabled) and when working on the Cardholder keyboard the Reciept Printer is used. 

Customer would like the Set Print setting to change the printer location for all Supervisor Printing.




Summary:
Cash Out - Dispenser suspend unsol during a Cash In transaction

Description:
A shutter jam during a cash in transaction results in a suspend unsol to be sent for dispenser



Summary:
Cash Out - STD CASH function results in notes in Cassette, Remaining and Total being displayed as blank via the DISP CASH function

Description:
When STD Cash is performed after some notes are dispensed, it does not clear the dispense counts. If a Clearr Cash is performed before STD Cash, the counts are displayed properly



Summary:
If >90 notes are entered and close state option is set to leave the notes at escrow, unsolicited message contains incorrect data.

Description:
Message is as follows.
Customi.. 11:50:58.141 Set BNA Fitness to GOOD for Close State Processing  
<wid>823b7na1</wid>

Customi.. 11:50:58.156 BNA Close State Entered
Refund/Vault/Leave Flag = 2  
<wid>818b7na1</wid>

Customi.. 11:50:58.156 Just giong to leave them  
<wid>824b7na1</wid>

Customi.. 11:50:58.203 WORKGROUP SET FITNESS
FITNESS = 4  
<wid>41b7na1</wid>

Customi.. 11:50:58.235 notescount.Data= 194, Report200Notes.Data = 1
Customi.. 11:50:58.250 notesstringgr8than90.Data = 0100702007[Unicode-x1D][Unicode-x1D], notescountgrthan90.Data = [Unicode-x1D]000000
Customi.. 11:50:58.250 create device status message:
zz    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
90
0
0
0100702007[Unicode-x1D][Unicode-x1D]
[Unicode-x1D]000000
194
1
DEVICE STATUS: w3zz    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ z 0100702007[Unicode-x1D][Unicode-x1D][Unicode-x1D]000000[Unicode-x1C]0[Unicode-x1C]00[Unicode-x1C]1  
<wid>280b7na1</wid>

More details in the attachment.



Summary:
System Reboot when threshold event occurs during trn reply encash.

Description:
When Cassettes are nearly full a threshold event is received saying tht one of the cassettes is nearly full, now at this point there was a system reboot. plz check the logs for more details.  



Summary:
Take Notes screen takes a few secs to display after notes Refunded

Description:
another screen sync issue.



Summary:
SSDSNCRIMPL.dll causes a problem in Wincor

Description:
SSDSNCRIMPL.dll causes a problem in Wincor System .

Applications Doesn't startup



Summary:
Cash Out - Reset issue as a result of Cash Out error always moves notes to Reject Bin

Description:
A reset after a Cash Out error should check the present status and send the notes to Reject or Retarct area depending on the present status



Summary:
TAR 324081 - Unsolic EPS2 messages not reporting bottom cassette removal/insertion

Description:
AA-NDC 02.06.06 with TAR 381622 applied 
XFS 04.02.01 and latest CDM SP 93.02.06.60 
EPS2 enabled 

Issue 
Customer initially reported that when blocking exit sensor T5 on dispensor
and thus triggering the EPS2 unsolic messages, that the messages only
reported the removal/insertion of the purge bin (both on journal and
messageout). 
However, after applying TAR 381622, testing showed that when blocking exit
sensor T5 on dispensor and thus triggering the EPS2 unsolic messages, that
now the purge bin/top cassette/2nd cassette/3rd cassette removal/insertion
were all reported on both on journal and messageout. 
However, the bottom cassette removal/insertion was not reported on the
journal and on the message-out the bottom cassette was always reported as in 
(no removal status change). 

Then after EPS2 unsolic messages sent, when physically removing/re-inserting 
the bottom cassette, this was no longer being recorded on the journal and
required a reset in order for the physical status of the bottom cassette to
be reported on the journal again. 

Logs available. 




Summary:
TAR 323428 - In Service message handler stops picking up new messages received

Description:
Customer has had a long running issue with suspected communication issues.
The host status indicates the ATM is offline, but the ATM is in-service and permitting transactions, although all transactions time out. The ATM does not respond to any host terminal commands. The host system uses the common method of sending a Send Configuration terminal command to check the status of the ATM "communications".

This issue has been captured in debuglog, and the root cause is a Send Configuration terminal command being received during a transaction and set as pending, and then a further send configuration terminal command being received as the pending command is being processed.

On the customers systems this has been seen to occur when a transaction is
not completed by the cardholder and a state times out.   No transaction
request has been generated yet.  Timer 01 is set to 60 seconds, and the Send Configuration terminal commands are being sent at 60 second intervals.

When this specific condition occurs, CCM TCPIP processes the incoming message and raises the Message received event to indicate a message is available, but the application does not pick up the message, effectively blocking messages in to the application.
This issue persists until the application changes modes, i.e. to Supervisor, or Out-Of Service and back to In-service, at which point the relevant message handler code picks up all the queued messages in order and processes them all.

FIGS can easily recreate this issue on a simulated platform as follows :
 - Start a transaction sequence
 - At any point prior to sending a transaction request send a "Send configuration terminal command (1<FS><FS><FS>7)
 - either complete the transaction, or let it time out.
 - As the transaction completes, and just prior to the idle state being started, i.e. when the pending command is being processed, send a further Send Configuration terminal command.
 - there will be one response to the two commands
 - from this point, no further messages sent to the application will be seen in either messagein or debug.  Send several messages and observe no application activity
 - switch to Supervisor mode (or kill host sim and then restart it again once the app has gone out of service). Observe the previous messages now being processed in sequence.

Full debuglog showing the activity at the time the issue occurs are
available from FGSC.   The relevant section from the debug.log file is
included below, note the lack of the debug statement :




Summary:
TAR 330985-BNA to add an extra check of counts before reporting

Description:
BNA to add an extra check of counts before reporting.      
As discussed with Mike Spafford, this is to document the issue where the BNA 
processing recognises that notes have been accepted and rejected, but still
reports that no notes have been entered into the device. In AA-NDC 03.xx.xx, 
it should be possible to use the CashInStatus command to check the counts
that were reported by the completion event for the CashIn so that the
inconsistency is eliminated as the BNA SP will have updated the counts prior 
to reporting the updated values in the CashIn Status




Summary:
TAR 331117 - No diagnostics data on journal for deposit errors 

Description:
Please refer to STAR



Summary:
TAR 327552 - AA-NDC 2.6.x and 3.x: Entering 32nd character in the ITR clears buffer

Description:
   Original Question from PS:
    
   We are having a problem with Data Entry for AANDC 3.02. 
   In ou last version AANDC 2.3, There is a screen displayed by Host asking the 
   customer to enter which account number in the list to select 1, 2,
   3?Customer to enter 1, 2 or 3?.if the Pinpad is pressed several time until
   32 characters the entry field will clear and re-enter again from 1st
   character.
   For the new AANDC 3.02 it will keep on accepting up to 32 characters then it 
   will clear at the 32 chars(data entry is blank) then all keys does not
   respond. It will only accept first character again until Clear key is
   pressed.
   
   Can we have the same behavior as in last version 2.3 of clearing the
   characters in 32chars and starting over again? We need this feature. You
   should be able to simulate it there right away.
   
   Also, is there a way to control the number of characters entered for this?
   Limit it to 2 characters or 10? 
   
   FGSC Investigation:
    
   I managed to simulate the issue described, on both AA-NDC 3.0.1 and also
   tested live on 2.6.6. Both versions accept 31 characters in the ITR and
   clear the buffer and lock the keypad on the 32nd - I think this is what
   needs fixed
    
   It appears to be very similar to TAR 266768 which I have attached. However,
   this TAR addresses state 'H', but this issue relates to the Interactive
   Transaction Response (ITR). I believe the TAR was introduced in 2.6.x and
   fixes the state 'H' issue.
    
   This can be easily demonstrated in 5 minutes downstairs if you  need to see
   it.




Summary:
TAR 326507 - AA-NDC - Unable to enter Port Numbers of less than 256 via Supervisor

Description:
AA-NDC 03.00.03

When configuring the Local & Remote Port Numbers via Supervisor Configure
Menu Option 37 the minimum value allowed to be entered is 256. 


The UK PS have a customer who require to configure port numbers of less than
256 i.e. > 0. The Local & Remote Port Number validation when entered via
Supervisor is required to be changed to allow this. 



Summary:
TAR 326419 - AA-NDC: image path name displayed with image.

Description:
Issue reported by US PS on AA-NDC 03.00.00. 
FGSC have recreated the issue on AA-NDC 03.00.00. & 03.00.03. 

Download is set to display cheque image on accemptance. This is done via the 
reserved C07 screen definition 
33<FS><FS><FS>11<FS>C07<ESC>PS(20,20)c:\CPM/FRONTIMG.BMP<ESC>\ 
The CPM is set to dump the cheque image in the c:\CPM directory. 

The cheque image is shoen corrrectly - however the path name
'C:\CPM\FRONTIMG.BMP' is displayed below it. 
This is not expected behaviour. 

This issue is similar/ the same as TAR 163217. 




Summary:
TAR 324550 - Acocunt details are printed twice on journal for Message mode option 5b

Description:
The account details as detailed for message mode option 5b are incorrectly printed on the journal. The details are printed twice i the digit is selected, and once if the option is not selected.



Summary:
TAR 323660- Ready B sent when Envelope Depository is in Suspend

Description:
Customer has reported an issue whereby they are depositing an envelope and
they generate an envelope jam by holding on to envelope - env not deposited. 

Device fault is reported (Suspend) and the host responds with a transaction
reply of Set Next State and Print. 
Customer selects to carry out another deposit transaction (removes jammed
envelope above). 
Host responds with transaction reply print immediate. 
Ready B sent - host respongs with a transaction reply deposit and print. 

This time, instead of asking for the envelope to be deposited, the shutter
does not open and the customer is prompted for another transaction. 
Yet a Ready B is sent in response to the Deposit and Print and no device
fault is reported. 




Summary:
Denomination type in device status reported as decimal value

Description:
Denomination type in device status has to reported as HEX value.



Summary:
Implement GetNextActiveDenomCount and Debug in Retract Script (as per RFC 342508) also in supervisor.

Description:
The RFC 342508 - "GetNextActiveDenomCount and Debug in Retract Script"  was included only in CustomisationLayer but not in Supervisor. Implement the same also in supervisor (performance improvement). 



Summary:
Record the Start and End Date for each EJ file

Description:
AANDC should record the start and end date of EJ within the EJ file - TAR 333866



Summary:
EJ Utility & API to verify checksum

Description:
AANDC Should have a Utility and API for EJ Checksum to be Verified by third parties - TAR 333865



Summary:
AANDC should support Compression of the EJ File and Privacy of the Compressed file through Password protection

Description:
AANDC should support Compression of the EJ File and Provacy of the Compressed file through Password protection - TAR 333863



Summary:
AANDC Should allow EJ Max Size to be other than 1.44 MB

Description:
AANDC Should allow EJ Max Size to be other than 1.44 MB - TAR 333862



Summary:
AANDC should support INIT of EJ by Third Party Agents - TAR 333861

Description:
AANDC should support INIT of EJ by Third Party Agents - TAR 333861



Summary:
Customer request for EJ file to have a checksum as per NDC+

Description:
AANDC should support Checksum for EJ as per NDC+ - TAR 333858



Summary:
Provide automated Backup of EJ data so manual backup is not needed.  [Cutover and Recurring address this.]

Description:
AANDC should support Automated EJ Backup - Cutover and Recurrence - TAR333852



Summary:
Unify all BNA Send sol-unsol workers in a single one and move formatting capability for journal printing to .wsc file.

Description:
An agreement has been reached and the CIC will contain: 
· Single worker for Send BNA Sol-Unsol
· A function point for journal formatting in .wsc receiving the entire CDI store as parameter and returning the laid-out text for printing.
· As much as possible code provided by BeeLian already live over 3.0 will be used.
· Any deviation from this will be communicated to BeeLian asking for agreement. 

Further details can be found "\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC BNA Component\Documents\RFC Functional Specs\GR1T RFC 349288 - BNA send Sol Unsol\"



Summary:
Cash Out - extra suspend unsols 

Description:
When shutter is held during retract, GBRU goes to suspend state and 2 or 3 suspend unsols are sent to the host depending on how the suspend condition is created.



Summary:
Cash Out - Incorrect transaction status is reported when shutter is held during retract

Description:
When shutter is held during retract, an incorrect transaction status is reported in the suspend unsol. 



Summary:
CustLayer crash when retracted note reports skewed after BNA Refund.

Description:
Scenario is insert 1xEUR10, chose Deposit on Confirmation screen, send back BNA_Ref from NDCHost to refund the money, and leave the money, and wait for it to be retracted.  Crash occurs when it is retracted. Bug is due to trying to use NoteErrorString object in script when this object is not shared in the script hosts Data Objects workgroup. So NoteErrorString (427b7na1) should be shared in script host (771b7na1) Data Objects workgroup.




Summary:
Replenish Function 58 and 59 Do not Handle Note Revisions

Description:
These functions do not take care of note revisions (different Note ID with same face value).
This creates an issue in which the same notes being counted multiple time under TOTAL AMOUNTS PER DENOM. Please see the example below:

For Malaysia Ringgit, we have 2 types of MYR50, 3 types of MYR10 and 3 types of MYR5. Please find below our GBNA.ini:

23,1793,MYR1#
23,1795,MYR5-
23,1796,MYR10-
23,1798,MYR50-
23,9985,MYR1#
23,1794,MYR2-
23,9987,MYR5-
23,9988,MYR10-
23,9990,MYR50-
23,9991,MYR100-
23,18180,MYR10-
23,18179,MYR5-

Let says we encashed 3 pieces of MYR10 (Note ID 18180). 
2 pcs gone into Cassette 1, 1 pc in reject bin.
As such, physical cash is MYR30 (MYR10 x 3).

However, Replenish 59 shows:

  BNA CASSETTE COUNTERS 

DENOM          CASS1     CASS2
MYR10              2         0

DENOM         REJECT   RETRACT
MYR10              1         0

  BNA AMOUNTS PER CASSETTE 

DENOM          CASS1     CASS2
MYR10             20         0

  BNA AMOUNTS PER CASSETTE 

DENOM         REJECT   RETRACT
MYR10             10         0

  TOTAL AMOUNTS PER DENOM 

DENOM               TOTAL 
MYR10                  30	-> Note ID 1796: Counter should be 0
MYR10                  30	-> Note ID 9988: Counter should be 0
MYR10                  30   	-> Note ID 18180: Counter correct.


  TOTAL AMOUNTS PER CURRENCY

CURRENCY            TOTAL 
MYR                    90	-> Should be 30.

Note: 
Only 1 type of MYR10 in the bin. But all the note types with the face value are being incremented with the same amount.
TOTAL AMOUNT PER CURRENCY also being updated wrongly.

Should only displays 1 MYR10 as only 1 type of MYR10 in bin instead of 3 types. 
Or a better approach probably is to combine the note counts for multiple revisions and display only once?



Summary:
CashUnit Error and CashUnit Threshold events not handled properly in Retract scripts

Description:
in all the retract scripts CashUnit Threshold event handles only nearly full status but does not handle Full status. the handling of CashUnit error is totaly wrong



Summary:
Cash Out - Supervisor Simulation not done when interlock is open and reporting as GBRU

Description:
When reporting as GBRU, Supervisor simulation is not done at the end of the session when interlock is opened during the transaction



Summary:
Grit RFC to track Performance Issue TAR RFC 311025.

Description:
This is the screen sync issue where the Please Enter Notes screen is shown 2 secs before shutter opens.



Summary:
Grit to track Performance Issue TAR 332544 on ANDC3.0.x.

Description:
Delays in BNA cash acceptance and note refunds in aandc on BNA1/BNA2.



Summary:
TAR XXXXX - EJ loop for DBS

Description:
TAR still to get raised on 2.6



Summary:
TAR XXXXX - EJ loop for DBS

Description:
TAR still to get raised on 2.6



Summary:
Create a release bulletin using the official template.

Description:
Create a release bulletin for the cash-in component including at least:
- Installation instructions (registry settings, importing author projects, updating dlls)
- External dependencies list (TARs and GR1Ts on main product that are required for the proper function of the CIC).
- List of fixes.
- Known issues.



Summary:
TAR 331469 - AA-NDC: Received message sometimes lost when checking if ej upload required 

Description:
Please see STAR



Summary:
TAR 326503 - AA-NDC doesn't display take card and take cash screens when jitter is switched

Description:
When jitter is switched on it is possible for the take card and take cash
screens to not be displayed. This is recreatable 100% of time on AA-NDC but
is not recreatable on NDC+. It appears to be timing related. The issue has
been discussed with Euan Pattullo who agreed if the issue was not
recreatable on NDC+ that a TAR should be raised against AA-NDC to rewosve
the issue.




Summary:
Grit to track Performance Issue TAR 332544.

Description:
Delays in BNA cash acceptance and note refunds in aandc on BNA1/BNA2.



Summary:
TAR 331676 -AA-NDC fails to recognise intial keys loaded through RKM after a reboot

Description:
See STAR



Summary:
DISPLAYMANAGER - Banner to Full Screen Flicker

Description:
When moving from banner to Full screen a flicker is seen due to the Banner not being hidden before the full screen is displayed



Summary:
XFSError Event occurs in Set Currency Count of CashInCommonImplement Script

Description:
Whenever a GBNA_XFSErrorevent event occurs, in the Active Script Host (in
this case, Set Currency Count) the CashInCommonImplementation.wsc for
EvalMData method is called. This fails when accessing the
XFSErrorResult.data with "Object Required: XFSErrorResult". 

Six parameters are passed to the EvalMData method. One of these parameters
is XFSErrorResult STRING STORE. 
The customer could print these parameter values out via debug procedure,
with the last to be printed out as the XFSErrorresult string store, though
this will not print as it already failed with a window popup message saying
microsoft vbscript runtime error - Object Required for XFSErrorResult. 
This happened to the customer during BNA Start of Day calling the Set
Currency Count active script host. 

This error does not result in a system reboot/escape. Customer was able to
continue with transactions after this and has not had problem since the
configuration of note types has already been successful. 

Error has been identified as the following - 
In Set Currency Count (108b7na1), the string store XFSErrorResult (142b7na1) 
is declared (under Variable Name) as XFSError. But in the script, it is
being called as XFSErrorResult. 
The variable is declared as XFSError but used as XFSErrorResult in the
XFSErrorEvent of set currency count scripthost (108b7na1). 

The code change would be 

Previous: 
objWSC.EvalMData
Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSErrorResult,V
ariantFlag 

Modified: 
objWSC.EvalMData
Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSError,Variant
Flag 


The customer has suggested the followin also - 
Hi Javier/Praveen, 

The following line is called from within ALL the GBNA's script: 

Sub GBNA_XFSErrorEvent(Error,timeStamp) 
objWSC.EvalMData
Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSErrorResult,V
ariantFlag 

End Sub 

I believe it will be better to fix the variable name rather than the script, 
ie. give a standard name to XFSErrorResult . 
Proposed changes 

1) Maintain EvalMData call in Set Currency Count script: 

objWSC.EvalMData
Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSErrorResult,V
ariantFlag 

2) Change the variable name for XFSErrorResult (142b7na1) from XFSError to
XFSErrorResult (this is in line with other scripts as far as I can see). 

Appreciate your consideration. 

Regards, 

Bee Lian 




Summary:
TAR 318360 - Position settings in Front Echo worker do not appear to work correctly

Description:
When using APTRA Author when using the Front Echo worker with an NDC Data
Collector, if the screen position settings are modified the changes are not
picked up when running the application. 

Customer has been given work around.



Summary:
TAR 323533 - AA-NDC: Print field with just Cut in causes simulated receipt preprint error

Description:
AA-NDC 02.06.06 
XFS 04.02.00 

Problem originally reported as receipt MEI going on in close state, but no
receipt issued. 
Further investigation shows problem associated with single character print
field, containing cut. 

problem occurs under following conditions: 

Transaction reply print field for receipt contains one character, - Cut
(0cH) 
Tests have been done with this as second printfield in reply, but customer
reports condition with single field. Function command not relevant. Test
done using Set next state and print 

R00 and R01 screens must be present on ATM. 

When transaction reply actioned, any valid receipt data is printed, and
merged with R00/R01 data. Receipt is cut and presented. When Close state
entered, remainder of R01 data printed. 

Two conditions seen in Close state. If R01 just contains newline characters, 
receipt not cut and issues. If R01 lines have printable characters, Receipt
is then cut and delivered. 

Receipt MEI shown to be set on in close state, even in first case. 

If the print field contains another character before the cut, eg '1,0CH',
then single receipt is printed in transaction reply, containing all merged
R00/R01 line. No activity in close state. 

If R00/R01 not present, then single character field is OK 




Summary:
TAR 324366 & 324194 & 323119

Description:
Please look at tar descriptions for detailed info.
All relate to hangs when promote installed.




Summary:
TAR 331469 - AA-NDC: Received message sometimes lost when checking if ej upload required 

Description:
Please see STAR



Summary:
TAR 331469 - AA-NDC: Received message sometimes lost when checking if ej upload required 

Description:
Please see STAR



Summary:
Application Core crashes when the Cash Handler is not present

Description:
When starting the final applications, if the Cash Handler is not present, Application Core crashes, due to attempting to use the device.



Summary:
EOP Configuration & AA-NDC 03.XX.XX

Description:
Most probably a documentation udpate required but needs to be invesigated.

FDK's on an EOP in AA-NDC 03.00.03 - in that if I entered an encryption key with an 'F' - the key entry failed also that when I entered a 'D' - this actually input an F?  

Subsequently, you brought my attention to the AA-NDC 02.06.00 and AA-NDC 02.06.06 release bulletins.  I made the changes to the eop.cnf as per the AA-NDC 02.06.00 release bulletin (for FDK's) and this resolved the problems - in that the entry of the values on the EOP matched what was passed and that also a key with 'F' was also accepted this time.

Therefore, I need to clarify the requirements of the eop.cnf in AA-NDC 03.XX.XX and XFS 04.XX.XX.

Does the eop.cnf still need to be changed for the FDK's when using AA-NDC 03.XX.XX with XFS 04.XX.XX?
(As, the AA-NDC 03.XX.XX release bulletins only seem to detail the requirement to change the eop.cnf for the backspace changes).  

Tracy Smith in FGSC has more info if required.



Summary:
TAR 331676 -AA-NDC fails to recognise intial keys loaded through RKM after a reboot

Description:
See STAR



Summary:
Cash-Out - If we have a billdispenser should always use a RESET (not Retract) to clear the issue

Description:
Need to make sure the Clear uses a Reset command as this can now bring the SP out of suspend before the SPs own timer expires	



Summary:
TAR 331643 - AA-NDC:Auto voice audio with audio disabled causes problem with AVI display

Description:
Please refer to STAR	



Summary:
TAR 331643 - AA-NDC:Auto voice audio with audio disabled causes problem with AVI display

Description:
Please refer to STAR	



Summary:
 Cash-Out - Set ResetRequired registry key to 0 if Reset is performed in ClearSuspend

Description:
This is missing and can result in a double clear being performed when a suspend condition is cleared



Summary:
Cash-Out - Add Registry Settings from Simulated Supervisor (RESET) development

Description:
Add ResetRequired, SuspendTimeout and new GBRU SP reg key to allow Reset to be sent during suspend



Summary:
Cash-Out - Add Registry Settings from Cash-Out document to Reg Files

Description:
Add Bindu's reg settings to AdvanceNDC.reg and NCR_SPs.reg



Summary:
Cash Out - Merge Cash-In component updates into Cash-Out Dev Path

Description:
Activity required to merge CAsh-In component code into Cash-Out devpath so that customer (OCBC) has entire development



Summary:
terminal command get h/w config does not return product class for P71

Description:
Support for P71



Summary:
Cash Out - Remove code which hardcodes the GBRU severity as 3

Description:
In some of the error scenarii, the severity has been hardcoded to emulate the CDM. This code has to be removed as we have decided to report the severity as fatal and do a reset at the end of session.



Summary:
Cash Out - Implement GBRU Reset during Simulated Supervisor

Description:
Decision made to perform the GBRU Reset in a similar manner to Simulated Supervisor so the host knows that the cash handler (in this case GBRU) may be back in a good state

As part of this fix, the issue of aut return to previous mode (which doesn't work from simulated supervisor only) will be looked at



Summary:
CCM VISA requires supervisor form modifications

Description:
When requesting that the CCM VISA copies a comms.err ( or backup files) to the A: drive the user should be presented with a new form while the copy process is being actioned and also allows them to cancel the copy process.



Summary:
CCM Visa2 continously attempts to send a message when received EOT instead of ACK from host

Description:
CCM Visa2 continously attempts to send a message when received EOT instead of ACK from host



Summary:
IT-Disp Supply in Replenish Menu of Supervisor mode is not showing the supply status of the cassette removed.

Description:
Remove one of the cassette and try to dispense from the removed cassette.A solic message with cassette status is shown on the host.
Then go to supervisor mode and replenish menu press 0 to go to disp spply.The supply status for the removed cassette is not shown.
Check for the details in Attachments.



Summary:
Incorrect behaviour for CCM VISA2 when attempting send straight after session end

Description:
When ending a session and then immediately sending a message CCM VISA2 fails to send the message.
The send is received while a disconnection is in progress and the message connection attempts are executed before the disconnection finishes.



Summary:
MV GR1T - Terminal commands report cassette suppled as not configured

Description:
mCurrencyDispenserMapping::MapReplenishInfo asumes NCR cash info structure - WIN retract bin not concidered.
change mCurrentRep[i] = mrep[i];  to..mCurrentRep[map] = mrep[map];



Summary:
MV GR1T - Wincor - Configure cash units does not handle 2x high dispencer

Description:
Application exception - required update to script in 37n6101dc129 to exit where invalid cassette data received. Easy change



Summary:
MV GR1T - Re-implement GRIT 317641 in AANDC 3.01

Description:
GRIT fix introduced TI issues - needs to be reimplemented.



Summary:
Update ANDC to Remove Workaround included previously for GR1T 318182 raised on CCM VISA 2 Component 

Description:
RFC raised to ensure the workaround put in by Zubair for GR1T 318182 (CCM VISA2 should not fail send on an incoming EOT until it has attempted to send and failed) is removed when the updated VISA2 component (1.00.02) is picked up by ANDC.  This is planned for IT6 (end of week beginning 1st May 2006)



Summary:
TAR 330981: BNA counts buffer not sent in Transaction Request.

Description:
If any of the NDC extension buffers "A" to "L" are selected in the transaction request extension state, then the BNA counts buffer ("w") will not be sent. 



Summary:
TAR 326278 - Enhanced Configuration Parameters Load option 46 incorrect registry update

Description:
The Enhanced Configuration Parameters Load for ECD (jitter) configuration
option number 46 updates the SdcMCRW registry setting but not the RS232IMCRW
registry 
setting, it does update ECD on both types of card readers. This means that 
after a reset the IMCRW will revert to whatever the registry setting was
before 
the Enhanced Configuration Parameters Load.
This has been seen in AANDC 2.06.02/3/4/5/6 

The customer is using the workaround of sending the same ECD (jitter)
setting as is pre set in the registry at all times.



Summary:
TAR 325224:  AA NDC - a print to EJ shows printer fatal whereas GetConfig shows it as OK

Description:
AA NDC 03.00.02
   XFS 04.02.01
   
   When the EJ is nearly full and the message to be printed to the journal is
   larger than the available space, then a SOLIC message is received by the
   host indicating that the journal is fatal. However when the terminal command 
   to "send the terminal configuration" is sent, it incorrectly reports back
   that the journal has "No Error".
   
   The following logs show this:-
   
   [05/11/06 13:51:06]   
   [05/11/06 13:51:06] [12_397__H1_4_5_3111] 
   [05/11/06 13:51:07]   
   [05/11/06 13:51:07]
   [22_397__F_10005_0000000000000000000000_1A7F000901000780000000C70000010102001
   07F7F00_00011013000000012120000_000000011111] 
   [05/11/06 13:51:09]   
   :
   :
   :
   [05/11/06 13:51:48] [12_397__H1_4_5_3111] 
   [05/11/06 13:51:49]   
   [05/11/06 13:51:49] [22_397__B] 
   [05/11/06 13:51:52]   
   [05/11/06 13:51:52] [22_397__9] 
   [05/11/06 14:01:12]   
   [05/11/06 14:01:12]
   [22_397__F_10005_0000000000000000000000_1A7F000901000780000000C70000010102001
   07F7F00_00011013000000012120000_000000011111]
   
   Euan Pattulo and Ranjith Suresh are already aware of this issue. Further
   detail, if required, can be obtained from Duncan Harvey ext 2508.




Summary:
TAR 319810: Clear key unable to signal key pressed when shared in a NDC Data Collector

Description:
When using an XFS Front key worker in the NDC Data Collector workgroup "Data", if the key is shared to a concurrent work group such that workgroup can respond to the key press it has been found that though this works for numeric keys, this does not work for the clear key.





Summary:
Cash Out - Transaction status is incorrectly reported as 4 in some of the unsols

Description:
Code Update should be done to remove what is believed to be an invalid fix for TAR 255025



Summary:
GBRU Cash Out: Change AANDC code for Standard Cash to workaround GBRU performance issues

Description:
Change code to reduce the number of SET_CASHUNITINFO commands, to configure all cassettes with one command instead of one command per cassette.



Summary:
Cash Out - Reset command sends the notes left in the transport to capture bin

Description:
A Reset command is used on a GBRU to clear the device on supervisor exit, at the end of the session and after suspend timeout. During this reset, any notes found in the transport are being sent to capture bin. Instead, they should be sent to Reject bin



Summary:
CCM VISA2 test code update

Description:
Test code update required for CCM VISA2.
Supervisor test SD3 attempts to create a link with an invalid xml config file. There is no attempt to catch the exception raised and therefore the rest of test code is not executed and the test fails.



Summary:
No longer include Author projects for earlier SP releases in AANDC 3.1.1 SP release

Description:
This is to partly address TAR 323120 where the requirement was to reduce the size of the runtime installer.  The intention at this time is to reduce the installer size by only shipping the latest Author projects (i.e. no longer shipping Author projects for earlier SP releases in the installer).



Summary:
TAR 329222 - AA-NDC does not return BNA/GBNA denominations in a send config command (P3 TAR ) CASH IN TAR

Description:
Please refer to STAR



Summary:
TAR 329222 - AA-NDC does not return BNA/GBNA denominations in a send config command (P3 TAR ) CASH IN TAR

Description:
Please refer to STAR



Summary:
Cash Out - Incorrect transaction status reported when capture bin full

Description:
When the retract fails due to capture bin full, a transaction status 4 is reported in the unsol. Instead a tr status 5 should be reported.



Summary:
TAR 330635 - Errors that are suppressed by XFS are displayed by AA-NDC

Description:
See STAR



Summary:
Cash Out - TI unsols are not sent when cassettes inserted/ removed

Description:
No tamper indication unsols are sent when cassettes are removed or inserted



Summary:
Cash Out - Incorrect mstatus being reported when dispensing more notes than a cassette has

Description:
When the no. of notes to be dispensed is more than the ulcount of the cassette, cassette not installed mstatus is being reported. Instead a pick failure mstatus should be reported



Summary:
Cash Out - suspend unsol not sent if shutter jammed after taking the notes out

Description:
There is no unsol being sent when the shutter is jammed after the notes are taken out. But the GBRU goes to suspend state and an ATM suspended screen is shown at the end of the session.



Summary:
TAR 330022 -Cardless transaction does FIT Search on Dummy Track 2 data

Description:
Please refer to STAR.



Summary:
TAR 330022 -Cardless transaction does FIT Search on Dummy Track 2 data

Description:
Please refer to STAR.



Summary:
Installation failure.

Description:
While installuing Aptra Advance NDC 03.00.00 on a pivat core, the process got hung while installing the component CLM.



Summary:
Application core crash due to failure in opening the coms.

Description:
IT3 build failed to open the application successfully and resulted in application core crash when trying to check the availability of coms.



Summary:
No Message sent when notes are left at throat during trn reply refund

Description:
Unsolicited message not sent when notes are not taken after trn reply refund.



Summary:
Aptra Promote failed to overwrite the enhanced graphic and animated screens and instead showinig a blank screen.

Description:
By installing aptra promote, it is not updating the existing screens with graphic screens or animated screens, instead blank screen is shown.

Reference: GR1T 338752



Summary:
Application Core crash.

Description:
Found application core crash at start of day.See attachments.



Summary:
TAR 328914 - Escrow counts are not printed on the journal in AA-NDC 03.01 

Description:
The counts of notes which are stored in the Escrow during a deposit
transaction are not printed on the journal. This means that there is no
traceability when a customer claims to have deposited notes which were not
refunded or encashed. 

There are two slightly different scenarios for this:- 

1. If the deposit includes notes that are rejected as invalid, the count of
returned notes is printed, but the count of notes in the Escrow is set to
"U" for unknown. 

2. If the deposit has no rejected notes, nothing is printed on the journal. 

At the platform level, the driver returns the note counts both when an event 
is fired to indicate that note have been rejected and when the rejected noes 
have been taken and the BankNoteProcessingComplete event is sent to indicate 
that the deposit has completed and the notes are ready to be processed.
These values should be available using CashInStatus even if the XFS event
does not include the values.




Summary:
Diagnostics menu hanging when Envelope Dispenser is fatal

Description:
When Envelope Dispenser is getting fatal the Diagnostics menu is hanging  when entered  to clear fata



Summary:
Supervisor Menu is neither shown on Front nor on Rear.

Description:
When trying to TransferI/F in Diagnostics menu.The Supervisor menu is neither shown on Front Panel nor on Rear.



Summary:
Reset Fails with reason cashinactive when INIT BNA is performed after a jam in a transaction with the Retract option set and notes not cleared from transport before running InitBNA.

Description:
steps to recreate
1 Insert some notes and simulate a cashinfail condtion.
2 hardware errror screen is displayed.
3 go to supervisor and perform INIT BNA. Reset fails with reason 3 which states tht cashin is still active.



Summary:
totalnotesretracted counts are duplicated on a gbna after availability changed event

Description:
some times availability changed evnt in getretract/encashed scripthost in supervisor is duplicating counts i.e adding the counts twice. plz check the logs for more details.



Summary:
Total Notes Retracted is 0 on a bna2 machine.

Description:
TotalnotesRetracted is always 0 on a bna2 machine. 



Summary:
Product classes for P79 and P87 missing from Reference Manual (6180)

Description:
Chap 9, Table 9-14, Hardware Configuration Data Response is missing 2 Product Class Identifiers (field g3).
5879 = 26
5887 = 27





Summary:
Cash Out - Supplies status for Reject bin is reported as 2 when low

Description:
when we are emulating the GBRU as a CDM, we should report the supplies status of the reject bin to be the same as that reported by a CDM (which means we shouldn't report low).



Summary:
Total Retracted counts not updated after Retract on BNA2.

Description:
Inserted one note, let it timeout with Retract option on, it was retracted.  Looked in SUpervisor at counts.  The Retract was updated for the individual denom, but the total retracted count on last counts page was still 0. Calculation related to Fixed Bin appears to be wrong for this setup. Logs included.



Summary:
Cash Out - Supplies status for the cassette which is not configured is reported as 1

Description:
The GetSupplies command shows the supplies status of a cassette which is not configured as 1 (Good)



Summary:
Cash Out - GBRU is not cleared after suspend timeout

Description:
GBRU comes online after suspend timeout because of which a clear is not done even if the notes are at throat and shutter is open.



Summary:
Cash Out - Tamper indicators are not enabled for GBRU when cassettes pulled out

Description:
On a normal dispenser whenever the cassettes are pulled out, an unsol for the same will be sent. This does not happen on a GBRU.



Summary:
Cash Out - STD CASH on GBRU takes more than 5 mins

Description:
Exchange, configuration of cassettes and reset on GBRU takes a lot of time.



Summary:
Cash Out - ADD CASH on GBRU keeps on looping whenever exchange fails

Description:
Supervisor ADD CASH on GBRU goes into an infinite loop when the exchange fails. This is because, there is no flow implemented to go back to Replenish menu when the exchange fails.



Summary:
Cash Out - STD CASH on GBRU does not increment the reject counts

Description:
When a STD CASH is done on a normal dispenser, the reject counts of all the cassettes will be incremented by 1. This does not happen on a GBRU because by default the WFS_CMD_CDM_TEST_CASH_UNITS command sends the notes to Capture bin on a GBRU.



Summary:
Bad Script in CashInEndFailed which causes exception.

Description:
Line 342 of TR Encash script host (788b7na1).  There is a space between the object and the full stop for the property which should be accessed.  Reproduce by inserting notes then removing and replacing reject bin. Then send BNA_DEP from host.  It crashes when the CashInEndFailed arrives.



Summary:
TAR 328921 - Two solicited events sent when Host refunds and cash is not taken

Description:

----------------------------------------------
Sequence Number 1 of 2, 19-jul-2006 13:51:04
----------------------------------------------

If notes are deposited into the BNA/GBNA/GBRU and the customer requests a
deposit, the Host may send back a Transaction reply indicating that the
deposit cannot be acceepted and that the notes should be refunded. When the
notes refunded, a "Ready 9/B" is sent.

In this situation, if the notes are not taken (for example, the customer
assumed the deposit would work without waiting for confirmation), the BNA
will send a second solicited response to indicate that the notes were not
taken. This will not be handled correctly because the Host will not have any 
response outstanding.

There are two options to handle this:-

1. The second message could be unsolicited
2. The "Ready 9/B" could be delayed until after the timeout period so that
it is not sent when a timeout error is reported.

----------------------------------------------
Sequence Number 2 of 2, 19-jul-2006 13:56:59
----------------------------------------------

NB As with TAR 328914, this is required for customer commitment on July 25th




Summary:
TAR 329349 - No counts being sent in Solicited Device Error for >90 notes of single type

Description:
The cash in component is not returning the additional counters that are
required when there are more than 90 notes of a single type in the solicited
device error message to the host. This may be true back to version AANDC
3.0.0.



Summary:
Fix the Component IDs in the BNA Component catalogs.

Description:
Ensure BNA Component catalog includes all BNA workers and that it only contains workers which are actually used in project.  Also, identify any BNA workers which are not currently in the BNA module and add them without changing that worker's component ID.



Summary:
INIT BNA Failure when there is a cashunit error

Description:
INIT BNA fails whenever there is a cashuniterror.



Summary:
Notetypes which are de-activated by host are activated after performing INIT BNA

Description:
Steps to recreate.
1) start all the apps.
2) deactivate some notes thru download and perform the transaction. inactive notes are not accepted.
3) now perform INIT BNA and do an other transaction, the inactive types are accepted.



Summary:
MV- TEST CASH may not cause reject count to rise.

Description:
Due to move to ulReject count TAR . WFS_CMD_CDM_TEST_CASH_UNITS by default on GBRU (and maybe some MV) puts notes to retract area.
WFS_CMD_CDM_TEST_CASH_UNITS use in ANDC needs to specify reject area and not be left to vendors default.



Summary:
TAR 328922:  EMV Exits - AA-NDC:Supervisor PRNT SCRW VERS shows NOT INSTALLED

Description:
Please refer to STAR



Summary:
Project Merge Fails to update worker attribute

Description:
During a project merge an attribute of a worker is not updated to the correct value.  All timestamps indicate that this worker has changed, but when the merge is performed the Author does not detect a change in the attribute.



Summary:
Product defect in updating the cash counts in the supervisor.

Description:
When Test Cash is selected in the supervisor menu,it is picking each note from each cassette but the rejected count is not updated accordingly in the DSP CASH option of Replenish Menu.
4 notes were seen in the purge bin, but the DSP CASH is showing that only type 1, type2 and type3 cassettes has put notes in the purge bin but not type 3.

Also, the dispense transaction failed to dispense notes from the type 3 cassette.



Summary:
TAR 328281- APTRA Author terminates unexpectedly when two instances open 

Description:
Refer to STAR



Summary:
TAR 323067 - Escape on entry to Supervisor when mode switch flicked prior to txn end

Description:
escape from applicationcore see attached



Summary:
InitBNA causes crash with Fixed Reject bin, after GRIT 343620 integrated.

Description:
GRIT 343620 fix requires RejectBinTotal worker shared into 254b8na1 script host.



Summary:
Total Retract count is wrong on GBNA machine with fixed Reject Bin.

Description:
Code assumes RT1 exists but when it is fixed bin then only RJ1 is reported.



Summary:
Reject count not updated if Notes misrecognised on 2nd pass.

Description:
This occurs in State Encash worker (after timeout when notes in escrow) and Vault Notes worker in Close State.



Summary:
TAR 318930 - Statement is cut after 24 lines print even when no form feed included in data.

Description:
Please look at TAR



Summary:
TAR 318930 - Statement is cut after 24 lines print even when no form feed included in data.

Description:
Please look at STAR



Summary:
Supervisor escape when some notes are in escrow and INIT BNA is performed.

Description:
Supervisor crash at 2 places.
1) call to getcassettecounts procedure is used in the Vault scripthost but its not defined elsewhere in the script.
2) VariantFlag integer store is not declared in objects workgroup but used inside the script.



Summary:
INIT BNA fails if done after GBXX Configuration

Description:
after the configuration is the the Config utility closses the session with the device. Since in the Config utility the 
objects created are process based this affects all the other BNA supervisor function. 



Summary:
Programmed Currency Count should not count inactive notes in gbna.ini.

Description:
In code it is using all denoms reported by XFS SP, but with gbna.ini file it should not count denoms which are set to inactive in this file.  This caused issues in Saudi app - highlighted as Issues 2 and 3 in doc Taher sent on the 12/7/06.



Summary:
TAR 325325 - AA NDC - PrintToJournal in C-Exit causes application hang

Description:
See TAR



Summary:
TAR 325325 - AA NDC - PrintToJournal in C-Exit causes application hang

Description:
See TAR



Summary:
reworking of Service Pack TARs for next major point release

Description:
Two Service Pack TARs have been implemented in way where there is no interface change to OOXFS. This is because any change to the interface to OOXFS will require a rebuild of every dll in AANDC. 

For the next major point release these TARs should be not implemented/removed and correctly reworked by making the correct interface change to OOXFS.

The TAR listed below has been addressed in 93.02.00.56:
TAR 325511 - AA NDC: SOH status not updated after empty condition




Summary:
If there is communication error for journal, mstatus will be correctly reported as '8' but mdata is not always be returned.	 

Description:
If there is communication error for journal, only mstatus will be available as 8 but no mdata.  XFS platform is returning mdata properly for this scenario.  For this scenario, two commands are sent to the device and the first command returns both mstatus and mData but the second (latest) command return only mstatus and no mdata.  This is different from all other scenarios where all those will return mstatus and mdata on second command itself.
Problem can recreated as follows:
1)Open SDC cable
2)Reset the SST
3)Attempt Print operation-
4)start apps and perform one transaction-It fails and reports mstatus as 8 and no mdata with that.



Summary:
When the hardcopy backup log (HBDATA.log) is full, the Supplies information in the Supervisor "DISP SPPLY" replenishment function is incorrect as it does not show "JOURNAL PAPER EXHAUSTED".

Description:
probelm can be recreated  by running  the following steps 
1)Create hard copy backup by sending Enhance config options 16&17 as001 
2)Open the printer and do one tansaction
3)Make sure H6 message is reported
6)close printer and do one transaction-   make sure H8and H 7messages are reported.
7)Close applications and  test the 5.16test case that attached here.




Summary:
When the hardcopy backup times-out or exceeds the record limit, multiple H1(Print failed) messages are seen after getting H9(Hard copy backup halted) message

Description:
There is  multiple H1 messages seen after H9.
Problem can be recreated by running test5.14(step5) ,5.15(step5) and  5.16(step 5).

we can found problem at step 5 by running these tests from the attached test case document



Summary:
When hardcopy backup is stopped on sending Enhanced Config message with Options 16 and 17 set to 000, no H9(Journal backup halted) message is reported.  Furthermore, no H1(Print failed) message is reported and  HBDATA.log is not dumped

Description:
When hardcopy backup is stopped on sending Enhanced Config message with Options 16 and 17 set to 000, no H9(Journal backup halted) message is reported.  Furthermore, no H1(Print failed) message is reported on a Journal print attempt even though journal is now fatal.  The HBDATA.log is not reprinted after the journal returns to a good state

Problem can be created as given below.
1)Create hard copy backup by sending Enhance config options 16&17 as001 
2)Open the printer and do one transaction
3)Make sure H6 message is reported
4)Put the terminal out of service and send Enhance config 16&17 as 000-No H9 is generated
5)Perform one transaction-No H1 message
6)close printer and perform transaction-HBDATA.log is is not dumped

Three problems.




Summary:
GetNextActiveDeomCount and Debug in Retract Script

Description:
When Retract completes (RetrackOK event), AANDC loops 50 times (fixed) and invokes GetNextActiveDenomCount function.

Each function call to GetNextActiveDenomCount queries GBNA for LastCashInStatus and loops internally to compare the note ID of each retracted notes with defined denoms, to populate the CDI stores.

This process is repeated 50 times, which mean it queries GBNA 50 times for LastCashInStatus in order to populate all the 50 CDI stores of retract count (CDI Store 3292).




Summary:
TAR RFC 327741 - RFC for AA-NDC to be able to process 50 note dispense as per AA-NDC 02.xx

Description:
Customer is requesting that the functionality available in AA-NDC 02.xx.xx
(GR1T 235858) to dispense 50 notes be carried forward to AA-NDC 03.xx.xx. 

BANCO DE ORO, has recently ordered approximately 120-150 P77's, one of the
requirements was to be able to dispense 50 notes when required. As this was 
implemented in AA-NDC 02.xx.xx Sales/PS agreed this requirement could be
met. 

As the change made to AA-NDC 02.xx.xx was not implemented in AA-NDC
03.xx.xx, the customer is requesting that change be implemented. 

Additional business justification to follow.




Summary:
TAR RFC 327741 - RFC for AA-NDC to be able to process 50 note dispense as per AA-NDC 02.xx

Description:
Customer is requesting that the functionality available in AA-NDC 02.xx.xx
(GR1T 235858) to dispense 50 notes be carried forward to AA-NDC 03.xx.xx. 

BANCO DE ORO, has recently ordered approximately 120-150 P77's, one of the
requirements was to be able to dispense 50 notes when required. As this was 
implemented in AA-NDC 02.xx.xx Sales/PS agreed this requirement could be
met. 

As the change made to AA-NDC 02.xx.xx was not implemented in AA-NDC
03.xx.xx, the customer is requesting that change be implemented. 

Additional business justification to follow.




Summary:
TAR 327757 - AA-NDC: FAILn not displayed if match on Settlement Next State Action table

Description:
   Issue with Settlement transaction.
   
   Screen C09 contains a list of ten Next State Numbers, and an action for each 
   if present in the Settlement Transaction Transaction Reply.
   
   Actions are:
   
   0 - Transaction Success, Prompt for next Transaction
   
   1 - Transaction Fail, Prompt for next Transaction
   
   2 - Transaction Success, Exit to Normal In Service
   
   3 - Transaction Fail, Exit to Normal In Service
   
   If Next State Number match with actions 1 or 3, a 'FAILn' should be
   displayed, where n is the index of the next state in the table.
   
   This is not being shown. It is specified in the Reference manual, and is
   shown by NDC+.
   
   Examination of Author code shows that there is nothing in place to perform
   the display. (code checked back to release 02.05.00).




Summary:
TAR 327757 - AA-NDC: FAILn not displayed if match on Settlement Next State Action table

Description:
   Issue with Settlement transaction.
   
   Screen C09 contains a list of ten Next State Numbers, and an action for each 
   if present in the Settlement Transaction Transaction Reply.
   
   Actions are:
   
   0 - Transaction Success, Prompt for next Transaction
   
   1 - Transaction Fail, Prompt for next Transaction
   
   2 - Transaction Success, Exit to Normal In Service
   
   3 - Transaction Fail, Exit to Normal In Service
   
   If Next State Number match with actions 1 or 3, a 'FAILn' should be
   displayed, where n is the index of the next state in the table.
   
   This is not being shown. It is specified in the Reference manual, and is
   shown by NDC+.
   
   Examination of Author code shows that there is nothing in place to perform
   the display. (code checked back to release 02.05.00).




Summary:
TAR 345591 - Configuring one of the cassettes as ALL IN puts all the other cassettes to INOPERATIVE STATE

Description:
if we configure one of the cassettes as ALL IN and all the other three cassettes as INDIVIDUAL all the individual cassettes are put in INOPERATIVE STATE. This happens when we use GBXX Configuration option 39 in supervisor to enable note sorting. For More details please find the logs attached. one can check that after using the xml file in the folder Number Three cashunitinfo is changed and all the individual cassettes are put in inoperative state.



Summary:
Provide updates to SilentDebug - See Detailed Description

Description:
SilentDebug and DebugLog should not be able to execute concurrently, as they both use named pipes to receive tracing from ANDC	
SilentDebug Service should be set as "Automatic" at startup in NT Services, but not started.
Add Daily Files configuration option, in order to allow not creating a new log file per day.
Event Logging improvements are needed, for example, log when configuration INI is not in the correct directory.	



Summary:
Opteva  - KKV not reported on some versions of opteva PIN SP

Description:
Opteva 1.34 reports PIN SP at 3.0.3 but does not give Kvv's - ANDC will not default back to stored Kvv in this situation.
Fix found and applied at RedBanc Chile.enckeys.cpp 1.40 line 2518



Summary:
Opteva -  MCRW MEI does not come on for first activation on fresh start

Description:
ANDC 3.1 IT14 COE - MCRW MEI will only start attract sequence after first transaction.  seen in redbanc on opteva with 256mb & win XP.



Summary:
TAR 327574 - AA-NDC: SM Prim cmd does not work due to app not freeing resource

Description:
   DBS Bank, Singapore.
   AA-NDC 02.06.02 (heavily customised)
   APTRA XFS 04.01.00
   APTRA SM Primitives 02.00.01
   
   On trying to put the application out of service using SM Primitives, the
   result is that the ATM application flip-flops rapidly between in-service and 
   out-of-service until the timeout period (set in the SM Primitives command)
   has passed.
   
   Stephen Glencross has investigated and made code changes to address this
   issue in AA-NDC. These changes are to be piloted on asoem live DBS ATMs.




Summary:
TAR 327574 - AA-NDC: SM Prim cmd does not work due to app not freeing resource

Description:
   DBS Bank, Singapore.
   AA-NDC 02.06.02 (heavily customised)
   APTRA XFS 04.01.00
   APTRA SM Primitives 02.00.01
   
   On trying to put the application out of service using SM Primitives, the
   result is that the ATM application flip-flops rapidly between in-service and 
   out-of-service until the timeout period (set in the SM Primitives command)
   has passed.
   
   Stephen Glencross has investigated and made code changes to address this
   issue in AA-NDC. These changes are to be piloted on asoem live DBS ATMs.




Summary:
Erroneous text in Reference Manual (6180 H)

Description:
Table 10-25 in text and in list of tables: title says Suspense instead of Dispense. (This has been fixed for 3.01. The error occurs only in rev. H for ANDC 3.00)



Summary:
TAR 327552 - AA-NDC 2.6.x and 3.x: Entering 32nd character in the ITR clears buffer

Description:
   Original Question from PS:
    
   We are having a problem with Data Entry for AANDC 3.02. 
   In ou last version AANDC 2.3, There is a screen displayed by Host asking the 
   customer to enter which account number in the list to select 1, 2,
   3?Customer to enter 1, 2 or 3?.if the Pinpad is pressed several time until
   32 characters the entry field will clear and re-enter again from 1st
   character.
   For the new AANDC 3.02 it will keep on accepting up to 32 characters then it 
   will clear at the 32 chars(data entry is blank) then all keys does not
   respond. It will only accept first character again until Clear key is
   pressed.
   
   Can we have the same behavior as in last version 2.3 of clearing the
   characters in 32chars and starting over again? We need this feature. You
   should be able to simulate it there right away.
   
   Also, is there a way to control the number of characters entered for this?
   Limit it to 2 characters or 10? 
   
   FGSC Investigation:
    
   I managed to simulate the issue described, on both AA-NDC 3.0.1 and also
   tested live on 2.6.6. Both versions accept 31 characters in the ITR and
   clear the buffer and lock the keypad on the 32nd - I think this is what
   needs fixed
    
   It appears to be very similar to TAR 266768 which I have attached. However,
   this TAR addresses state 'H', but this issue relates to the Interactive
   Transaction Response (ITR). I believe the TAR was introduced in 2.6.x and
   fixes the state 'H' issue.
    
   This can be easily demonstrated in 5 minutes downstairs if you  need to see
   it.




Summary:
TAR 327552 - AA-NDC 2.6.x and 3.x: Entering 32nd character in the ITR clears buffer

Description:
   Original Question from PS:
    
   We are having a problem with Data Entry for AANDC 3.02. 
   In ou last version AANDC 2.3, There is a screen displayed by Host asking the 
   customer to enter which account number in the list to select 1, 2,
   3?Customer to enter 1, 2 or 3?.if the Pinpad is pressed several time until
   32 characters the entry field will clear and re-enter again from 1st
   character.
   For the new AANDC 3.02 it will keep on accepting up to 32 characters then it 
   will clear at the 32 chars(data entry is blank) then all keys does not
   respond. It will only accept first character again until Clear key is
   pressed.
   
   Can we have the same behavior as in last version 2.3 of clearing the
   characters in 32chars and starting over again? We need this feature. You
   should be able to simulate it there right away.
   
   Also, is there a way to control the number of characters entered for this?
   Limit it to 2 characters or 10? 
   
   FGSC Investigation:
    
   I managed to simulate the issue described, on both AA-NDC 3.0.1 and also
   tested live on 2.6.6. Both versions accept 31 characters in the ITR and
   clear the buffer and lock the keypad on the 32nd - I think this is what
   needs fixed
    
   It appears to be very similar to TAR 266768 which I have attached. However,
   this TAR addresses state 'H', but this issue relates to the Interactive
   Transaction Response (ITR). I believe the TAR was introduced in 2.6.x and
   fixes the state 'H' issue.
    
   This can be easily demonstrated in 5 minutes downstairs if you  need to see
   it.




Summary:
TAR 327541 - ActiveX Script - Attempt to access out of range array index

Description:
  1) ActiveX Script - Attempt to access out of range array index

Current Full Description:
   Issue Description
   
   Worker: Retract Success 
   Component ID: 515b7na1
   
   The array size declared for EscrowedNotes is too small, causes subscript out 
   of range error. 
   
   Related Code
   
   In CalculateEscrowedNotes procedure:
   
   161       ReDim EscrowedNotes( ConfiguredDenomCount - 1 )    'number of
   configured denoms for NOW
   162                       
   163       'Initialize the EscrowedNotes array..refer Aptra Documentation
   164       For iCount = 0 To (ConfiguredDenomCount - 1)
   165           EscrowedNotes(iCount) = 0
   166       Next
   
   Explanation
   
   Array size declared as ConfiguredDenomCount - 1
   161       ReDim EscrowedNotes( ConfiguredDenomCount - 1 )    'number of
   configured denoms for NOW
   
   But attempt to access array index from 0 to (ConfiguredDenomCount -1).
   164       For iCount = 0 To (ConfiguredDenomCount - 1)
   
   Example
   
   Let's say ConfiguredDenomCount = 10.
   
   Code: Redim EscrowedNotes (10 - 1)  
   Result: Define EscrowedNotes to be array size 9.
   
   Code: For i Count = 0 to (10 - 1)
   Result: Loop from 0 to 9 (array size 10) => out of array index range. 
   System will escape when process iCount = 9 (array item Number 10). 
   
   Recommended Fix
   
   EscrowedNotes should be re-sized to ConfiguredDenomCount instead of
   ConfiguredDenomCount-1, as per below:
   
   161       ReDim EscrowedNotes( ConfiguredDenomCount) 
   
   Note
   
   The CalculateEscrowedNotes procedure defined in BNA Enable Script Host
   (208b7na1) and Encash Call (788b7na1) have the correct definition as per
   below:
   
   126       ReDim EscrowedNotes( ConfiguredDenomCount  )    'number of
   configured denoms for NOW
   127                       
   128       'Initialize the EscrowedNotes array..refer Aptra Documentation
   129       For iCount = 0 To (ConfiguredDenomCount  - 1)
   130           EscrowedNotes(iCount) = 0
   131       Next




Summary:
TAR 327541 - ActiveX Script - Attempt to access out of range array index

Description:
  1) ActiveX Script - Attempt to access out of range array index

Current Full Description:
   Issue Description
   
   Worker: Retract Success 
   Component ID: 515b7na1
   
   The array size declared for EscrowedNotes is too small, causes subscript out 
   of range error. 
   
   Related Code
   
   In CalculateEscrowedNotes procedure:
   
   161       ReDim EscrowedNotes( ConfiguredDenomCount - 1 )    'number of
   configured denoms for NOW
   162                       
   163       'Initialize the EscrowedNotes array..refer Aptra Documentation
   164       For iCount = 0 To (ConfiguredDenomCount - 1)
   165           EscrowedNotes(iCount) = 0
   166       Next
   
   Explanation
   
   Array size declared as ConfiguredDenomCount - 1
   161       ReDim EscrowedNotes( ConfiguredDenomCount - 1 )    'number of
   configured denoms for NOW
   
   But attempt to access array index from 0 to (ConfiguredDenomCount -1).
   164       For iCount = 0 To (ConfiguredDenomCount - 1)
   
   Example
   
   Let's say ConfiguredDenomCount = 10.
   
   Code: Redim EscrowedNotes (10 - 1)  
   Result: Define EscrowedNotes to be array size 9.
   
   Code: For i Count = 0 to (10 - 1)
   Result: Loop from 0 to 9 (array size 10) => out of array index range. 
   System will escape when process iCount = 9 (array item Number 10). 
   
   Recommended Fix
   
   EscrowedNotes should be re-sized to ConfiguredDenomCount instead of
   ConfiguredDenomCount-1, as per below:
   
   161       ReDim EscrowedNotes( ConfiguredDenomCount) 
   
   Note
   
   The CalculateEscrowedNotes procedure defined in BNA Enable Script Host
   (208b7na1) and Encash Call (788b7na1) have the correct definition as per
   below:
   
   126       ReDim EscrowedNotes( ConfiguredDenomCount  )    'number of
   configured denoms for NOW
   127                       
   128       'Initialize the EscrowedNotes array..refer Aptra Documentation
   129       For iCount = 0 To (ConfiguredDenomCount  - 1)
   130           EscrowedNotes(iCount) = 0
   131       Next




Summary:
TAR 327540 - ActiveX script: BNAFitness is used without pre-defined data object

Description:
   Issue Description
   
   Worker: Cancel Device 
   Component ID: 240b7na1
   
   BNAFitness used at line 032 but the related object BNA Fitness Status (Store 
   ID 3219) is not included in Data Object workgroup. 
   
   Impact
   
   Will cause system escape when this line is executed.
   
   Related code
   030   Sub GBNA_XFSErrorEvent(Error,timeStamp)
   031   
   032           objWSC.EvalMData
   Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSErrorResult,V
   ariantFlag
   033   End Sub
   
   Remark
   No logs provided as the issue was seen from code.




Summary:
TAR 327540 - ActiveX script: BNAFitness is used without pre-defined data object

Description:
   Issue Description
   
   Worker: Cancel Device 
   Component ID: 240b7na1
   
   BNAFitness used at line 032 but the related object BNA Fitness Status (Store 
   ID 3219) is not included in Data Object workgroup. 
   
   Impact
   
   Will cause system escape when this line is executed.
   
   Related code
   030   Sub GBNA_XFSErrorEvent(Error,timeStamp)
   031   
   032           objWSC.EvalMData
   Error,BNAFitness,WarningFlag,XFSWarningResult,SeverityResult,XFSErrorResult,V
   ariantFlag
   033   End Sub
   
   Remark
   No logs provided as the issue was seen from code.




Summary:
TAR 327539 - Variable name used within script is different from variable name defined

Description:
   Issue Description
   
   Worker: Refund 
   Component ID: 766b7na1
   
   In this active script host, BNA Supplies Data (Store ID: 2151) is defined as 
   BNASuppliesStatus,
   but the script is calling a different name (BnaSupplyStatus.data) at line
   249 (under CashUnitError event) as below:
   
   236   Sub GBNA_CashUnitError(requestID,cashUnit,Reason,timeStamp)
   .
   .
   .
   249           BnaSupplyStatus.Data =
   objWSC.UpdateBNASupplies(cashUnit.UnitID,BNASuppliesDict,ExMsgFlag,4,BNASuppl
   yStatus)
   
   Impact
   
   This will cause a system escape with reason "object required" when the above 
   line is executed.




Summary:
TAR 327539 - Variable name used within script is different from variable name defined

Description:
   Issue Description
   
   Worker: Refund 
   Component ID: 766b7na1
   
   In this active script host, BNA Supplies Data (Store ID: 2151) is defined as 
   BNASuppliesStatus,
   but the script is calling a different name (BnaSupplyStatus.data) at line
   249 (under CashUnitError event) as below:
   
   236   Sub GBNA_CashUnitError(requestID,cashUnit,Reason,timeStamp)
   .
   .
   .
   249           BnaSupplyStatus.Data =
   objWSC.UpdateBNASupplies(cashUnit.UnitID,BNASuppliesDict,ExMsgFlag,4,BNASuppl
   yStatus)
   
   Impact
   
   This will cause a system escape with reason "object required" when the above 
   line is executed.




Summary:
TAR 327311 - AA NDC: screen delay due to CDM SP passing back realtime data

Description:
This problem has resulted after adding TAR fix 324927 for the CDM SP to an
AA NDC 03.00.02 XFS 04.02.01 system. TAR 324927 is required to resolve a SOH 
reporting issue where cached data (currency cassette status) was passed back 
to AA NDC rather than real time data ...as a result, empty cassettes would
be reported as "low". 

The problem that TAR 324927 introduced is that the displaying of the "Take
Cash" screen (on a card before cash transaction) is delayed a few seconds
after the cash has already been removed. 

This problem has been recreated and demo'ed to Euan P. Logs (XFStrace and
full debug including OOXFS) have been passed to Euan P.




Summary:
Provide support for DebugLog utility

Description:
Provide support for DebugLog utility.

DebugLog is an unsupported tool in AANDC 3.01 and earlier releases.  When customers experience problems, we can then to provide DebugLog logs.  It doesn't make sense that the utility is unsupported.

Furthermore, in the 3.02 project we are developing a Silent Debug utility.  When we describe this in the InfoProds, it makes sense to also refer to DebugLog - but we can't if it's unsupported!!!

This RFC is to test and fix problems with the current DebugLog utility (not to add new requirements) and to document the current functionality in the InfoProds.



Summary:
TAR 327170 - NDC attempts Encash/Refund after BNa has reported Fatal error

Description:
   If notes are found in the Escrow during the Close state processing, AA-NDC
   will issue an Encash or Refund. This will fail because the commands are not
   permitted when the device is in a Fatal state. The logic should be to test
   for Suspend or Fatal rather than just for Suspend as currently. See details
   as provided in an email by Malaysia. 
   
   If the device is Fatal, a Force Encash or Force Refund could be attempted.
   
   During close state, AANDC attempts to encash/refund the notes in escrow when 
   BNA Fitness = 4 (fatal).
   
   Note:
   If BNA has been marked fatal (BNA Fitness = 4), no further attempt should be 
   made to encash or refund notes.
   
   For the current AANDC, during Close State, no further processing will be
   made if BNA fitness = 3 (suspend), however, if BNA Fitness = 4 (fatal), it
   attempts to encash or refund the notes.
   
   Cause:
   Worker: Recoverable Error Condition? 
   Component ID: (835b7na1)
   
   This tester worker is having the following expression:
   
   (Fitness% > -1) AND (Fitness% <> 3) AND (BillsInEscrow% > 0) 
   
   This expression causes BNA Fitness 4 to be categorised as "Recoverable Error 
   Codition".
   As fitness 4 is greater than -1, AND Not Equal to 3.
   
   Proposed code change:
   
   Change Fitness not equal to 3 (<>3) to less than 3 (<3) ie.
   
   Change the expression to:
   (Fitness% > -1) AND (Fitness% < 3) AND (BillsInEscrow% > 0)
   
   Remark:
   No logs can be provided as the issue was seen from the CustomisationLayer
   source project.




Summary:
TAR 327170 - NDC attempts Encash/Refund after BNa has reported Fatal error

Description:
   If notes are found in the Escrow during the Close state processing, AA-NDC
   will issue an Encash or Refund. This will fail because the commands are not
   permitted when the device is in a Fatal state. The logic should be to test
   for Suspend or Fatal rather than just for Suspend as currently. See details
   as provided in an email by Malaysia. 
   
   If the device is Fatal, a Force Encash or Force Refund could be attempted.
   
   During close state, AANDC attempts to encash/refund the notes in escrow when 
   BNA Fitness = 4 (fatal).
   
   Note:
   If BNA has been marked fatal (BNA Fitness = 4), no further attempt should be 
   made to encash or refund notes.
   
   For the current AANDC, during Close State, no further processing will be
   made if BNA fitness = 3 (suspend), however, if BNA Fitness = 4 (fatal), it
   attempts to encash or refund the notes.
   
   Cause:
   Worker: Recoverable Error Condition? 
   Component ID: (835b7na1)
   
   This tester worker is having the following expression:
   
   (Fitness% > -1) AND (Fitness% <> 3) AND (BillsInEscrow% > 0) 
   
   This expression causes BNA Fitness 4 to be categorised as "Recoverable Error 
   Codition".
   As fitness 4 is greater than -1, AND Not Equal to 3.
   
   Proposed code change:
   
   Change Fitness not equal to 3 (<>3) to less than 3 (<3) ie.
   
   Change the expression to:
   (Fitness% > -1) AND (Fitness% < 3) AND (BillsInEscrow% > 0)
   
   Remark:
   No logs can be provided as the issue was seen from the CustomisationLayer
   source project.




Summary:
TAR 326503 - AA-NDC doesn't display take card and take cash screens when jitter is switched

Description:
When jitter is switched on it is possible for the take card and take cash
screens to not be displayed. This is recreatable 100% of time on AA-NDC but
is not recreatable on NDC+. It appears to be timing related. The issue has
been discussed with Euan Pattullo who agreed if the issue was not
recreatable on NDC+ that a TAR should be raised against AA-NDC to rewosve
the issue.




Summary:
TAR 326503 - AA-NDC doesn't display take card and take cash screens when jitter is switched

Description:
When jitter is switched on it is possible for the take card and take cash
screens to not be displayed. This is recreatable 100% of time on AA-NDC but
is not recreatable on NDC+. It appears to be timing related. The issue has
been discussed with Euan Pattullo who agreed if the issue was not
recreatable on NDC+ that a TAR should be raised against AA-NDC to rewosve
the issue.




Summary:
TAR 326818 - EJ upload resending last block after a good ack+stop

Description:
Customer is performing EJ Upload with AA-NDC 02.06.06. after good
acknowledge and Stop, the customer will later send an acknowledge and stop
with 000000 as the data for the Last Character Received. When the customer
starts ej upload again at a later time, the last block of data which was
successfully acknowledged is re-sent. 

Scenario: 

Host - 16:24:15 # 4 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]36000161010[Unicode-x1C]60000] - EJ Options and
Timers(Start EJ) 
Terminal - 16:24:16 # 5 [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C] 
060617162416000060000070010 [Unicode-x1B][020t*00] - EJ data 

Host - 16:24:28 # 6 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000070] - acknowledge and stop EJ (this is a
good acknowledge). 

At this point the cusotmer will send configuration data and then: 

Host - 16:24:47 # 7 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000000] - acknowledge and stop EJ (the last
character received = 000000 stop EJ - sometimes the host does not send the
000000) 

Host - 16:24:54 # 8 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]36000161010[Unicode-x1C]60000] - EJ Options and
Timers(Start EJ again) 

Terminal - 16:24:54 # 9 [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C] 
060617162416000060000070010 [Unicode-x1B][020t*00] - This data is the same as the
previous block which was successfull acknowledged by the host on the ack +
stop 

Host - 16:25:09 # 10 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000070] - ack + stop (good) 


The cusotmer believes that if there is a good ack + stop then if the host
sends another ack + stop with 000000 that when they restart the ej upload
the last block should not be sent again, due to its previous
acknowledgement. The customer has stated that the last block is not resent
in the same scenario as above on a NDC+ system. 




Summary:
TAR 326818 - EJ upload resending last block after a good ack+stop

Description:
Customer is performing EJ Upload with AA-NDC 02.06.06. after good
acknowledge and Stop, the customer will later send an acknowledge and stop
with 000000 as the data for the Last Character Received. When the customer
starts ej upload again at a later time, the last block of data which was
successfully acknowledged is re-sent. 

Scenario: 

Host - 16:24:15 # 4 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]36000161010[Unicode-x1C]60000] - EJ Options and
Timers(Start EJ) 
Terminal - 16:24:16 # 5 [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C] 
060617162416000060000070010 [Unicode-x1B][020t*00] - EJ data 

Host - 16:24:28 # 6 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000070] - acknowledge and stop EJ (this is a
good acknowledge). 

At this point the cusotmer will send configuration data and then: 

Host - 16:24:47 # 7 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000000] - acknowledge and stop EJ (the last
character received = 000000 stop EJ - sometimes the host does not send the
000000) 

Host - 16:24:54 # 8 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]36000161010[Unicode-x1C]60000] - EJ Options and
Timers(Start EJ again) 

Terminal - 16:24:54 # 9 [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C] 
060617162416000060000070010 [Unicode-x1B][020t*00] - This data is the same as the
previous block which was successfull acknowledged by the host on the ack +
stop 

Host - 16:25:09 # 10 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]2000070] - ack + stop (good) 


The cusotmer believes that if there is a good ack + stop then if the host
sends another ack + stop with 000000 that when they restart the ej upload
the last block should not be sent again, due to its previous
acknowledgement. The customer has stated that the last block is not resent
in the same scenario as above on a NDC+ system. 




Summary:
TAR RFC 321382 - Provide a way to disable dispenser Clear at the end of suspend

Description:
REF: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at the end of 
suspend? 
FGSC determined there does not appear to be anyway in order to disable the
Clear command after the Suspend in AANDC. RFC therefore raised. 

Regarding the possible solutions detailed, not performing the Clear command
could have further implications. For the second, there is a similar command
to the Clear, which could result in the transport etc being cleared, though
this would return if notes had been seen going in to the purge bin, which
AANDC could then record on the journal. 

RFC: 

01 - Employee name: Ricardo Oberpaur 
05 - Country: Chile 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: 56 2 687 1222 
20 - Customer Name: Redbanc 
25 - Priority: Priority 3 
30 - Products Affected: 58xx with Presenter Dispenser 
35 - Platform OS: XFS 2.2, 4.0 
40 - Application: AANDC 2.5, 3.0 
45 - Other Software: - 
50 - Environment: Development 
60 - Installed: 4000 
65 - Affected: 3900 
Hi, 

This is not a problem, but I would like your thoughts and recommendations: 

A customer has been using NDC+ and AANDC for about 25 years. The use ?Cash
Retract Disabled? since then, because they assumed (and we didn?t do
anything to correct them) that after notes have been presented, they stayed
there forever. BUT, after the P77 was released, we faced the now famous M-19 
issue (?exit sensor blocked?) because the ATM user did not see the notes and 
therefore asked for a secnd dispense which generates the M-19 status. After
detecting an M-19 on the dispenser, the ATM goes into suspend mode (notes
potentially STILL present). 

Now the problem arises: At the end of the Suspend Timer, the Dispenser is
cleared. Potentially, if the notes are still present, they are retracted.
And nothing is written to the Journal (?something has been retracted?,
?dispenser was clear?) or sent to the host. So, there is a ?grey area? whre
there is no way to demonstrate that the notes were taken, or captured and
?stolen?. This is having legal consecuences because of certain laws that
exist down here. 

Easy solution (I hope): Is there a way to disable the Dispenser Clear at the 
end of Suspend? If not, what do I need to do to raise a SCER or RFC to
disable this? (I know there is an uptime impact because of potential of
unnecessary dowtinme because no clear -potentially successful- was
attempted to clear the dispenser) 

Not so easy solution: What do I need to do to raise a SCER or RFC to ask for 
e 
 
Tar Notes: 
From: Robertson, Laura 
Sent: Tuesday, March 21, 2006 9:36 AM 
To: Oberpaur, Ricardo 
Cc: Clark, Mike 
Subject: RE: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at 
the end of suspend? 

Hi Ricardo, 

Sorry for delay. I have taken a look through all the detail you have 
provided and agree that there is no easy solution for this. There does not 
appear to be anyway in order to disable the Clear command after the Suspend 
in AANDC that I can see. 

This would therefore need to be a SCER or an RFC. Regarding the solutions 
you have detailed, as you say not performing the Clear command could have 
further implications. For the second, there is a similar command to the 
Clear, which could result in the transport etc being cleared, though this 
would return if notes had been seen going in to the purge bin, which AANDC 
could then record on the journal. 

As to which one could be implemented, I could not say, or whether this
would 
need to be a SCER or an RFC. Please can you contact and provide details to 
Mike Clark, Product Manager for AANDC (I have copied him on this email). 

In the meantime please let me know if you require further assistance. 

Thanks and regards 
Laura 

-----------------------------------------------------------------------------

--- 
From: Auto-EMail, FGSC 
Sent: Thursday, March 16, 2006 9:57 AM 
To: Oberpaur, Ricardo 
Cc: Robertson, Laura 
Subject: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at the 
end of susp



Summary:
TAR RFC 321382 - Provide a way to disable dispenser Clear at the end of suspend

Description:
REF: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at the end of 
suspend? 
FGSC determined there does not appear to be anyway in order to disable the
Clear command after the Suspend in AANDC. RFC therefore raised. 

Regarding the possible solutions detailed, not performing the Clear command
could have further implications. For the second, there is a similar command
to the Clear, which could result in the transport etc being cleared, though
this would return if notes had been seen going in to the purge bin, which
AANDC could then record on the journal. 

RFC: 

01 - Employee name: Ricardo Oberpaur 
05 - Country: Chile 
10 - Organisation: Professional Services (PS) 
15 - Contact Phone No: 56 2 687 1222 
20 - Customer Name: Redbanc 
25 - Priority: Priority 3 
30 - Products Affected: 58xx with Presenter Dispenser 
35 - Platform OS: XFS 2.2, 4.0 
40 - Application: AANDC 2.5, 3.0 
45 - Other Software: - 
50 - Environment: Development 
60 - Installed: 4000 
65 - Affected: 3900 
Hi, 

This is not a problem, but I would like your thoughts and recommendations: 

A customer has been using NDC+ and AANDC for about 25 years. The use ?Cash
Retract Disabled? since then, because they assumed (and we didn?t do
anything to correct them) that after notes have been presented, they stayed
there forever. BUT, after the P77 was released, we faced the now famous M-19 
issue (?exit sensor blocked?) because the ATM user did not see the notes and 
therefore asked for a secnd dispense which generates the M-19 status. After
detecting an M-19 on the dispenser, the ATM goes into suspend mode (notes
potentially STILL present). 

Now the problem arises: At the end of the Suspend Timer, the Dispenser is
cleared. Potentially, if the notes are still present, they are retracted.
And nothing is written to the Journal (?something has been retracted?,
?dispenser was clear?) or sent to the host. So, there is a ?grey area? whre
there is no way to demonstrate that the notes were taken, or captured and
?stolen?. This is having legal consecuences because of certain laws that
exist down here. 

Easy solution (I hope): Is there a way to disable the Dispenser Clear at the 
end of Suspend? If not, what do I need to do to raise a SCER or RFC to
disable this? (I know there is an uptime impact because of potential of
unnecessary dowtinme because no clear -potentially successful- was
attempted to clear the dispenser) 

Not so easy solution: What do I need to do to raise a SCER or RFC to ask for 
e 
 
Tar Notes: 
From: Robertson, Laura 
Sent: Tuesday, March 21, 2006 9:36 AM 
To: Oberpaur, Ricardo 
Cc: Clark, Mike 
Subject: RE: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at 
the end of suspend? 

Hi Ricardo, 

Sorry for delay. I have taken a look through all the detail you have 
provided and agree that there is no easy solution for this. There does not 
appear to be anyway in order to disable the Clear command after the Suspend 
in AANDC that I can see. 

This would therefore need to be a SCER or an RFC. Regarding the solutions 
you have detailed, as you say not performing the Clear command could have 
further implications. For the second, there is a similar command to the 
Clear, which could result in the transport etc being cleared, though this 
would return if notes had been seen going in to the purge bin, which AANDC 
could then record on the journal. 

As to which one could be implemented, I could not say, or whether this
would 
need to be a SCER or an RFC. Please can you contact and provide details to 
Mike Clark, Product Manager for AANDC (I have copied him on this email). 

In the meantime please let me know if you require further assistance. 

Thanks and regards 
Laura 

-----------------------------------------------------------------------------

--- 
From: Auto-EMail, FGSC 
Sent: Thursday, March 16, 2006 9:57 AM 
To: Oberpaur, Ricardo 
Cc: Robertson, Laura 
Subject: RAZBYSQU4 - CL: Is there a way to disable dispenser Clear at the 
end of susp



Summary:
Wincor - offset to start of receipt print required for Black mark operation.

Description:
Where black mark enabled Wincor TP07 receipt does not move paper past pre-print header as NCR does. This means host print is not aligned with
pre-print on receipt.  RFC to add a configuration to add <LF>'s to trancation prints to align host test with pre-print.



Summary:
TAR 324081 - Unsolic EPS2 messages not reporting bottom cassette removal/insertion

Description:
AA-NDC 02.06.06 with TAR 381622 applied 
XFS 04.02.01 and latest CDM SP 93.02.06.60 
EPS2 enabled 

Issue 
Customer initially reported that when blocking exit sensor T5 on dispensor
and thus triggering the EPS2 unsolic messages, that the messages only
reported the removal/insertion of the purge bin (both on journal and
messageout). 
However, after applying TAR 381622, testing showed that when blocking exit
sensor T5 on dispensor and thus triggering the EPS2 unsolic messages, that
now the purge bin/top cassette/2nd cassette/3rd cassette removal/insertion
were all reported on both on journal and messageout. 
However, the bottom cassette removal/insertion was not reported on the
journal and on the message-out the bottom cassette was always reported as in 
(no removal status change). 

Then after EPS2 unsolic messages sent, when physically removing/re-inserting 
the bottom cassette, this was no longer being recorded on the journal and
required a reset in order for the physical status of the bottom cassette to
be reported on the journal again. 

Logs available. 




Summary:
TAR 324081 - Unsolic EPS2 messages not reporting bottom cassette removal/insertion

Description:
AA-NDC 02.06.06 with TAR 381622 applied 
XFS 04.02.01 and latest CDM SP 93.02.06.60 
EPS2 enabled 

Issue 
Customer initially reported that when blocking exit sensor T5 on dispensor
and thus triggering the EPS2 unsolic messages, that the messages only
reported the removal/insertion of the purge bin (both on journal and
messageout). 
However, after applying TAR 381622, testing showed that when blocking exit
sensor T5 on dispensor and thus triggering the EPS2 unsolic messages, that
now the purge bin/top cassette/2nd cassette/3rd cassette removal/insertion
were all reported on both on journal and messageout. 
However, the bottom cassette removal/insertion was not reported on the
journal and on the message-out the bottom cassette was always reported as in 
(no removal status change). 

Then after EPS2 unsolic messages sent, when physically removing/re-inserting 
the bottom cassette, this was no longer being recorded on the journal and
required a reset in order for the physical status of the bottom cassette to
be reported on the journal again. 

Logs available. 




Summary:
TAR 326419 - AA-NDC: image path name displayed with image.

Description:
Issue reported by US PS on AA-NDC 03.00.00. 
FGSC have recreated the issue on AA-NDC 03.00.00. & 03.00.03. 

Download is set to display cheque image on accemptance. This is done via the 
reserved C07 screen definition 
33<FS><FS><FS>11<FS>C07<ESC>PS(20,20)c:\CPM/FRONTIMG.BMP<ESC>\ 
The CPM is set to dump the cheque image in the c:\CPM directory. 

The cheque image is shoen corrrectly - however the path name
'C:\CPM\FRONTIMG.BMP' is displayed below it. 
This is not expected behaviour. 

This issue is similar/ the same as TAR 163217. 




Summary:
TAR 326419 - AA-NDC: image path name displayed with image.

Description:
Issue reported by US PS on AA-NDC 03.00.00. 
FGSC have recreated the issue on AA-NDC 03.00.00. & 03.00.03. 

Download is set to display cheque image on accemptance. This is done via the 
reserved C07 screen definition 
33<FS><FS><FS>11<FS>C07<ESC>PS(20,20)c:\CPM/FRONTIMG.BMP<ESC>\ 
The CPM is set to dump the cheque image in the c:\CPM directory. 

The cheque image is shoen corrrectly - however the path name
'C:\CPM\FRONTIMG.BMP' is displayed below it. 
This is not expected behaviour. 

This issue is similar/ the same as TAR 163217. 




Summary:
TAR 327131 - During cash deposit transaction, BNA MEI does not blink

Description:
   During cash deposit transaction, BNA MEI does not blink when BNA is ready to 
   accept notes. Ie. in cash accept state, when it displays "Insert Notes
   Screen".
   This has been traced to ADI commands being issued in AANDC 3.0.0 multi
   vendor enviroment which is not supported. Example code below
   
   extern "C"
   IMP_OR_EXP void SetBNAMediaEntryIndicator(int BNAMode )
   {
   #ifndef MULTI_VENDOR
    //PP 26/04/01
    //TAR 169670 ADI_SEND_AND_RECEIVE now used to ensure that all memory has
   been 
   tidied up.
    // System monitor structures
    //Altho we are not really interested in the response from this call
    TransactionData     transactionData;
    SeverityData        severityData;
    ReplenishmentStatus replenishmentStatus;
    ReplenishmentCount  replenishmentCount;
    MaintenanceData     maintenanceData;;
   
    WORD SysAddress = NULL;
    ADI_LOOKUP_NAME((unsigned char *)"MEDIA_ENTRY_INDICATORS",&SysAddress);
   
    if (SysAddress != 0)
    {
       CommandData commandData;
     commandData.length = 1;
     commandData.data[0] = 'D';
   
     BYTE CommandCode;
       if (BNAMode != 0)        // check attribute value;
      CommandCode = 1;  // On
       else
      CommandCode = 2;  // Off
   
       ADI_SEND_AND_RECEIVE(  SysAddress,
            CommandCode,
            (unsigned char*) &commandData,
            (unsigned char*) &transactionData,
            (unsigned char*) &severityData,
            (unsigned char*) &replenishmentStatus,
            (unsigned char*) &replenishmentCount,
            (unsigned char*) &maintenanceData);
   
    }
   #endif




Summary:
TAR 327131 - During cash deposit transaction, BNA MEI does not blink

Description:
   During cash deposit transaction, BNA MEI does not blink when BNA is ready to 
   accept notes. Ie. in cash accept state, when it displays "Insert Notes
   Screen".
   This has been traced to ADI commands being issued in AANDC 3.0.0 multi
   vendor enviroment which is not supported. Example code below
   
   extern "C"
   IMP_OR_EXP void SetBNAMediaEntryIndicator(int BNAMode )
   {
   #ifndef MULTI_VENDOR
    //PP 26/04/01
    //TAR 169670 ADI_SEND_AND_RECEIVE now used to ensure that all memory has
   been 
   tidied up.
    // System monitor structures
    //Altho we are not really interested in the response from this call
    TransactionData     transactionData;
    SeverityData        severityData;
    ReplenishmentStatus replenishmentStatus;
    ReplenishmentCount  replenishmentCount;
    MaintenanceData     maintenanceData;;
   
    WORD SysAddress = NULL;
    ADI_LOOKUP_NAME((unsigned char *)"MEDIA_ENTRY_INDICATORS",&SysAddress);
   
    if (SysAddress != 0)
    {
       CommandData commandData;
     commandData.length = 1;
     commandData.data[0] = 'D';
   
     BYTE CommandCode;
       if (BNAMode != 0)        // check attribute value;
      CommandCode = 1;  // On
       else
      CommandCode = 2;  // Off
   
       ADI_SEND_AND_RECEIVE(  SysAddress,
            CommandCode,
            (unsigned char*) &commandData,
            (unsigned char*) &transactionData,
            (unsigned char*) &severityData,
            (unsigned char*) &replenishmentStatus,
            (unsigned char*) &replenishmentCount,
            (unsigned char*) &maintenanceData);
   
    }
   #endif




Summary:
Tech Pubs need more detail on extended status reporting for BNA msgs.

Description:
The detail in tech pubs says the extended status reporting can be turned on but does not demonstrate the format of the extended message. Updates needed for page 9-89.  See attached email for details to put in tech pub.



Summary:
TAR 326278 - Enhanced Configuration Parameters Load option 46 incorrect registry update

Description:
The Enhanced Configuration Parameters Load for ECD (jitter) configuration
option number 46 updates the SdcMCRW registry setting but not the RS232IMCRW
registry 
setting, it does update ECD on both types of card readers. This means that 
after a reset the IMCRW will revert to whatever the registry setting was
before 
the Enhanced Configuration Parameters Load.
This has been seen in AANDC 2.06.02/3/4/5/6 

The customer is using the workaround of sending the same ECD (jitter)
setting as is pre set in the registry at all times.



Summary:
TAR 326507 - AA-NDC - Unable to enter Port Numbers of less than 256 via Supervisor

Description:
AA-NDC 03.00.03

When configuring the Local & Remote Port Numbers via Supervisor Configure
Menu Option 37 the minimum value allowed to be entered is 256. 


The UK PS have a customer who require to configure port numbers of less than
256 i.e. > 0. The Local & Remote Port Number validation when entered via
Supervisor is required to be changed to allow this. 



Summary:
When configuring notes at SoD fails Denoms not reported as before.

Description:
Related to GRIT 341370.  The Report Note Defn cmd should be returned the list of notes which are configured on the ATM.  When the SoD command to ConfigureNoteTypes fails the response to this term command is [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]NA#01        ].  Before this ini file change was introduced it would report the notes defined, so it should continue to do that now when the ini file is not used.



Summary:
GBNA.ini issue where notes not configured if Cass were not in good state at SoD.

Description:
At SoD the GBNA.ini file is read with the active note types, and an attempt is made to call ConfigureNoteTypes on the SP.  This will fail if there are no cassettes in a fit state.  Therefore, some notes may be active or inactive when they shouldn't be.  The device will be in a fatal state at this point as there are no fit cassettes so the error will need to be cleared via InitBNA function.  There is another attempt to call ConfigureNoteTypes here but the cassettes are still fatal as it is before the Start/End Exchange.  It must be moved to after the Start/End Exchange.



Summary:
Terminal commands report cassette suppled as not configured.

Description:
mCurrencyDispenserMapping::MapReplenishInfo asumes NCR cash info structure - WIN retract bin not concidered.
change mCurrentRep[i] = mrep[i];  to..mCurrentRep[map] = mrep[map];



Summary:
Alias name hardcoded to NCR for identification of CDM1 & 2

Description:
Need to use the name in registry so cashhandler device number is correctly identifed on other vendors. OOXFS.cpp 



Summary:
Wincor 2100XE When you send a download the receipt MEI goes on and does not go off until the first receipt is printed.

Description:
Kscreen load causes MEI to go on?



Summary:
return real data for INFO commands while GBXX is in suspend.

Description:
Currently returns cached data. Seen with ANDC 3.1 where shutter held during dispence through CDM interface - notes are purged but this is not reflected in note counts till suspend timeout & clear
Will require publication update also.



Summary:
TIR request to have TAR 315400 on AANDC 2.6.6

Description:
TIR request to have TAR 315400 on AANDC 2.6.6



Summary:
TAR 328194 - In Supervisor the BNA Counts are not all printed via the PRNT CNTRS function

Description:
If you have more than 4 denominations configured for deposit, then only the first page, and hence first 4 denominations, will be printed via the PRNT CNTRS function.



Summary:
Simulated Supervisor does not return to In-Service mode if automatic return to previous mode from Supply mode is configured

Description:
SST does not return to in-service mode. Additionally an OOS has to be sent before a subsequent GIS is acted upon



Summary:
DBS issue of Card Reader and EJ loop investigation

Description:
Full details willl be provided when TAR is raised.




Summary:
Customisable Settlement Screens - Need IP info on how/where to update the position where the input data is echoed to the screen

Description:
Settlement screens and their prompts are customiasable and as such could be placed anywhere on the screen. Customers should be informed on how to also move the location of the input data to suit their customised screen.

This will be documented in the release bulletin for 3.01 but should be added for the next release



Summary:
IT12 - 5.5.7 Regression - Settlement Transaction.  ENTER BUFFER C- Prompt not Cleared before PLEASE WAIT... Screen is Displayed

Description:
When carrying out a settlement transaction on the front, when data and <ENTER> are selected at the ENTER BUFFER C-, prompt, the next settlement screen displayed (PLEASE WAIT...) is show with the dash (-) from the previous screen still displayed ie PLEASE WAIT...-.  This indicates that the previous ENTER BUFFER C- screen in not cleared before displaying the PLEASE WAIT...  These screens are now customisable and if text shorter than PLEASE WAIT... is entered, more characters from the previous screen would be appended.



Summary:
When a cassette runs empty but there is another of the same logical type that is good, the empty condition is not reported immediately on SOH

Description:
Added for completeness so that this can be documented in the release bulletin for 3.01. Chances are this will come in as a TAR shortly

Scenario is to have 2 cassettes of same logical type. Dispense from the cassette type until one physical cassettt runs out of cash (the SP will automatically complete the dispense by picking from the other cassette of the same type)  - the empty will not be reported immediately as no Threshhold event is returned from the SP for this as it can dispense from the other cassette of the same logical type		



Summary:
TAR 306067 - Print format is not PPD default when no data follows Printer Flag 4

Description:
   The default PPD print is not printed on the envelope, instead the data
   observed by the customer to be printed on the envelope was as follows:-
   
   0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 
   
   During testing in the lab here in Dundee by FGSC, it appeared that the four
   digit value would increment with the transaction number, for example 0017
   repeated 10 times on one transaction, then 0018 repeated 10 times on the
   envelope on the next.
   
   This was obtained when a Function Identifier of 1 or 7 is selected (for
   Deposit and print), with Printer Flag set at 4 in the transaction reply
   command. 
   
   If Printer Flag of 3 or 5 is defined, the default print is printed on the
   envelope.
   
   Awaiting customer verification that this is the transaction reply used, but
   can recreate in the lab here in Dundee.




Summary:
IT_INI FILE Display Issue

Description:
When all the notes are activated in the INI file go to superviser and select GBNA.INI update function. Deactivate first 2 denoms, '#' is displayed next to the denoms. press next go to the second screen and press previous. The first 2 denoms which were displayed as deactivated previously are displayed as activated again. but the INI file is updated correctly.




Summary:
Author Project Tidy Up for 3.01

Description:
Author Project Tidy up for release



Summary:
IT10 Dual Dispenser Testing - On exit from suspend seem to get into infinite loop trying TestCAsh

Description:
Created Suspend condition as per 5.3.3.9 od DD UTS and sent OOS before timer expired - Seemed to get into an infinite loop performing test cash function

This area was touched recently by ulRejectCounter updates - suspect it is related to this as this worked fine when previously tested



Summary:
TIR 325938 - Promote Hot fix for TARS 324366, 324194, 323119

Description:
Customers Require the following TARs as a Promote Hot fix for 324366, 324194, 323119



Summary:
IT12 - Statement Length setting via Configure Menu.  Entered value is not re-displayed on DISP CONFIG or when CONFIGURATION DATA shown for other function update

Description:
At start of day the statement lenght is not populated with the default value.  Subsequent update is shown via the CONFIGURATION DATA being automatically displayed but re-selecting DISP CONFIG does not show this value.  The registry file is updated OK.



Summary:
Test 5.7.3.1.1.3.13 Message Mode Option 4 = 7 ¿ Invalid Setting (Delayed Status Reporting.  No Beep on Card Eject  Send Additional Note Count Set) Failed

Description:
A a Solicited status 22fs000fsfs8fsE500000000fs00000fs?????fs01100 is sent instead of a Unsolicited status 12fs000fsfsE500000000fs00000fs?????fs01100 as specified in the ITS




Summary:
When settlement PIN entered it overwrites the prompt on the EOP

Description:
On front everything is ok but on EOP the PIN asterisks overwrite the Enter PIN prompt



Summary:
Test 5.7.3.1.1.9.1/2 Printing for Cash Handler Tampering prints C1 at start on Single Dispenser SSTs

Description:
C1 should not be printed on single dispenser SSTs



Summary:
IT11 - Dual Dispenser - Suspend condition not created when shutter jamme closed during dispense

Description:
Issue seen with any test that jams the shutter closed - a suspend should be returned but a routine error only is returned	



Summary:
TAR 325224:  AA NDC - a print to EJ shows printer fatal whereas GetConfig shows it as OK

Description:
AA NDC 03.00.02
   XFS 04.02.01
   
   When the EJ is nearly full and the message to be printed to the journal is
   larger than the available space, then a SOLIC message is received by the
   host indicating that the journal is fatal. However when the terminal command 
   to "send the terminal configuration" is sent, it incorrectly reports back
   that the journal has "No Error".
   
   The following logs show this:-
   
   [05/11/06 13:51:06]   
   [05/11/06 13:51:06] [12_397__H1_4_5_3111] 
   [05/11/06 13:51:07]   
   [05/11/06 13:51:07]
   [22_397__F_10005_0000000000000000000000_1A7F000901000780000000C70000010102001
   07F7F00_00011013000000012120000_000000011111] 
   [05/11/06 13:51:09]   
   :
   :
   :
   [05/11/06 13:51:48] [12_397__H1_4_5_3111] 
   [05/11/06 13:51:49]   
   [05/11/06 13:51:49] [22_397__B] 
   [05/11/06 13:51:52]   
   [05/11/06 13:51:52] [22_397__9] 
   [05/11/06 14:01:12]   
   [05/11/06 14:01:12]
   [22_397__F_10005_0000000000000000000000_1A7F000901000780000000C70000010102001
   07F7F00_00011013000000012120000_000000011111]
   
   Euan Pattulo and Ranjith Suresh are already aware of this issue. Further
   detail, if required, can be obtained from Duncan Harvey ext 2508.




Summary:
Settlement PIN with DAPI1 - pinblock is failing

Description:
PINblock creation is failing because the PIN store was not getting shared correctly.



Summary:
2nd Disp Config menu causes a hang

Description:
Going to Disp Config automatically from another menu updating configuration causes the application to hang



Summary:
Worker class Setter name was changed incorrectly

Description:
Setter worker class name was changed by mistake, fixed for IT12



Summary:
TAR 324651 & 347027 - BNA reset not issued when exiting supervisor

Description:
The customer has reported that a BNA init is not automatically performed
when exiting supervisor on AA-NDC 03.00.03.  They state that this
functionality was present in 02.06.xx.

Steps to recreate as follows:

Run finalapps
Put the ATM into supervisor
Enter Diagnostics (Sys App)
Performed an Accept on the BNA, through device diagnostics
Insert 5 notes.
no further commands issued in sys app.
Exited Sys App
Exited Supervisor (no BNA reset sent.)

Send Go In Service
Selected deposit
Entered 5 notes

Total displayed as 10 notes for deposit
Deposited cash.

This has the implication that the customer will be credited more money than
deposited due to the notes not being cleared from the escrow.

Debug logs etc can be provided.




Summary:
IT11 Dual Dispenser - If cassette racked out on CDM 1 and supplies msg sent then missing is reported even if CDM2 cassette of same type is present

Description:
Small issue - 1fsfsfs72 should return the better of the cassette types from the dispensers e.g. if CDM1 C1 is Low and CDM C2 is empty, Low would be reported - slight bug in Jaceks logic in that he doesn't take missing into consideration - if cassette is missing, the supplies status of the cassette type in the other CDM should be used



Summary:
When the ini file is not installed correctly, no event logging is done

Description:
If the SilentDebug.ini file is not installed correctly, it is not reporting any event into the event log.



Summary:
No warning to operator if Clear Cash fails

Description:
If the XFS command to clear SP counts fails from supervisor the operator will have no knowlage of this because the ANDC counts will be cleared and the
screen following clear counts will show all counts of zero.  If the operator is to then view the counts through DISP CASH - ANDC will have resynced 
with the SP counts and resolved to put the remainder of the SP count in the rejected counts.

The solution is to provide an error message to the operator to warn that the clear counts operation failed.  The interface is not present but can easily be added to the function in NDCFUNS that actually clears the counts. Then the result of the XFS operation can be used to show the error message. The operator will then be obliged to verify the cash handler fitness before resuming replenishement operation.

The same situation will affect STD CASH.

This is a MV issue as the Wincor CDM will not clear cash where the CDM is fatal. NCR Ulysses CDM will allow the counts to be updated. NCR Universal GBRU, Diebold etc. has not been tested.




Summary:
Need to document max statement length default will be 20

Description:
IPs say max statement length default will be 12 but it's going to be 20.



Summary:
No Warning to operator if clear cash fails.

Description:
If the XFS command to clear SP counts fails from supervisor the operator will have no knowlage of this because the ANDC counts will be cleared and the
screen following clear counts will show all counts of zero.  If the operator is to then view the counts through DISP CASH - ANDC will have resynced 
with the SP counts and resolved to put the remainder of the SP count in the rejected counts.

The solution is to provide an error message to the operator to warn that the clear counts operation failed.  The interface is not present but can easily be added to the function in NDCFUNS that actually clears the counts. Then the result of the XFS operation can be used to show the error message. The operator will then be obliged to verify the cash handler fitness before resuming replenishement operation.

The same situation will affect STD CASH.

This is a MV issue as the Wincor CDM will not clear cash where the CDM is fatal. NCR Ulysses CDM will allow the counts to be updated. NCR Universal GBRU, Diebold etc. has not been tested.




Summary:
IT - 5.11.28.  Solicited not journalled when 00 notes in dispense transaction reply

Description:
When the 'notes to dispense' fields in a dispense transaction reply contain 00, the solicited is correctly reported to the host and error message NO BILLS TO STACK is printed to the journal but the solicited is not journalled.




Summary:
When Extended message option is set and Cassette is Inserted during supervisor mode , no message is sent to host

Description:
When extended message is set and a cashincassette is inserted during supervisor mode, no message is sent to the host with the extended supplies and fitness. This message is sent only when the overall device fitness is Fatal.



Summary:
Wincor - Merror in ndcfuns where cashhandler fitness is not good.

Description:
OOXFSinitilise will merror if responce to set_cash_unit_info is not good. WNI unit can respond with HW error to this command
will cause persistent restart as cant get to supervisor to fix CDM status.   
To recreate Jam shutter open and reboot ATM then start ANDC.
CDM XFS Reset or Test Cash will fix this issue.



Summary:
IT10 Dual Dispenser testing - if both dispensers fatal after suspend created no fatal sent to host

Description:
Scenario is to run test 5.3.3.12 to set one dispenser into suspend then fatal by not clearing jam
Repeat for second dispenser - once CDM SP has attempted to clear jam send GIS

No fatal sent to host



Summary:
IT10 DUal Dispenser Testing - after performing a dispense note counts become invalid

Description:
Note counts now fin in Supervisor but after a dispense a get counters 1fsfsfs4 returns invalid note counts.

Also appear as invalid if checked in Supervisor while using combined counters



Summary:
IT10 Dual Dispenser Testing - pull out both purge bins and attempt to dispense returns R9

Description:
Tests 5.3.3.7 & 5.3.3.8 remove 1 purge bin in eash test - I removed both before attempting to dispense

Got a R9 back !



Summary:
IT10 Dual Dispenser - Seperated counters entry line displaying % still

Description:
Minor Supervisor update required - made to Supervisor 059



Summary:
Wincor -default MV secure layout should be like WNI

Description:
MV secure key layout does not represet any vendor.. change to WNI layout




Summary:
Wincor - 40x12 display needs handled better.

Description:
1. HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\NoTTUOperatorResolution is applied to front. 
2. 40x12 resrved.def not kept up to date. may need to  have second resrved that handles updates only.
3. some issues with input not being cleared form previous screen.




Summary:
Reconfiguration of cashunits not done in close state.

Description:
dynamic notesorting is not performed in close state though we get a threshold event during transaction reply encash. this is because threshold flag is not shared in close state.



Summary:
status message not sent with full severity info from supervisor exit when extendend message is set.

Description:
Status message not sent with full severity info from supervisor exit when extended message is set and fitnes is fatal.



Summary:
5.7.5.5.3 w6 message not sent with proper fitness

Description:
[12[Unicode-x1C][Unicode-x1C][Unicode-x1C]w6~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   [Unicode-x1C]0[Unicode-x1C][Unicode-x1C]0]



Summary:
5.4.16 - 82 config menu is not showing the last denomination type on screen when pressed.

Description:
82 config menu is not showing the last denomination type on screen when pressed.



Summary:
TAR 324981 -AA NDC - Alarms are reported incorrectly in the unsolic message

Description:
AA NDC 03.00.02
   APTRA XFS 04.02.01
   
   The signals associated with the sensors to indicate an alarm with the
   enclosure and silent signals are reversed when compared to NDC+. To explain
   further, when the enclosure is tampered (eg the enclosure over the floppy
   drive) a "silent alarm" UNSOLIC message is reported by AA NDC. Similarily,
   if the "silent alarm" is activated an UNSOLIC is sent from AA NDC indicating 
   an "enclosure alarm".
   
   The driver and SIU SP are providing the correct signals. AA NDC is
   mis-interpretting these signals. This has been verified in the code by Jan
   Vesely and Ranjith Suresh. 
   
   i.e. WFS_SIU_TAMPER should reflect "enclosure"
   and WFS_SIU_INTTAMPER should reflect "silent signal"




Summary:
TAR 324981 -AA NDC - Alarms are reported incorrectly in the unsolic message

Description:
AA NDC 03.00.02
   APTRA XFS 04.02.01
   
   The signals associated with the sensors to indicate an alarm with the
   enclosure and silent signals are reversed when compared to NDC+. To explain
   further, when the enclosure is tampered (eg the enclosure over the floppy
   drive) a "silent alarm" UNSOLIC message is reported by AA NDC. Similarily,
   if the "silent alarm" is activated an UNSOLIC is sent from AA NDC indicating 
   an "enclosure alarm".
   
   The driver and SIU SP are providing the correct signals. AA NDC is
   mis-interpretting these signals. This has been verified in the code by Jan
   Vesely and Ranjith Suresh. 
   
   i.e. WFS_SIU_TAMPER should reflect "enclosure"
   and WFS_SIU_INTTAMPER should reflect "silent signal"




Summary:
TAR 317982 - Notes are being left in Escrow after a deposit transaction is cancelled

Description:
As discussed, Qatar are facing a problem where notes are entered as the customer decides to cancel the transaction. We have checked the debug logs from the customer and can see that the Enable reports that no notes were entered because the customer cancelled his transaction, but also we can see from the subsequent transaction thta only 1 note was entered but the transaction reported 10 notes in the Escrow.

We need two actions:-

1. AA-NDC should include additional defensive code to ensure that notes are removed from the Escrow even if no notes are reported. This would generally fail as there were no notes present, however it would ensure that the notes were not left for a subsequent customer if notes were undetcted at the time of the transaction being cancelled.

2. We need some additional debug to try to capture the cause of this issue.

This was raised originally on AA-NDC 02.06.03, but the code is th same in the later service Packs as well as in AA-NDC 03.00.02 and therefore this should be considered for both releases.




Summary:
Max Statement Length - screen p33 missing from Resrvd.def

Description:
Screen p33 specified in author flow is missing from the resrv.def file



Summary:
ANDC configuration component required

Description:
ANDC now has many registry settings. A defult configuration is allways installed that works with NCR 56XX.  Need a way to install ANDC and automatically detect what configuration needs to be applied.  Now (10/5/10) includes ALL ATM's, the 56xx config is to be removed from the ANDC installer under 466696 .  

Suggested approach.

1. Detect & Start the XFS Platform	
2. Identifying XFS services on the ATM	
3. Apply the settings & configuration for ANDC to run.
4. Reboot and start ANDC.




Summary:
Release bulletin - say that max statement length default will be 20

Description:
Code sets max statement length default to 20, this is the value that should be used when the registry key is out of range or empty. Need to update release bulletin with this information.



Summary:
TAR 323067 -Supervisor Present worker causes system escape due to timing of mode switching

Description:
escape from applicationcore see attached



Summary:
ANDC 93.01.00.09 - Error Severity in bag deposit falure solic msg disagrees with severity in subsequent GETCONF message

Description:
When a night safe bag drop fails because an overfill condion exists '22<fs>000<fs><fs>8<fs>K1<fs>2<fs>01<fs>4' is sent to the host (error severity '2' - warning).
However, when a GETCONF is sent, the following information is returned for the night safe:
Hardware Fitness : '4' - Fatal

See attached logs. 



Summary:
ANDC 93.01.00.09 - When Option Digit 3 is set to 7 and overfill is created, after a failed deposit, the overfill cannot be cleared

Description:
When an overfill is created on the Night Safe device when Option Digit 3 is set to 7 the next attempt to make a deposit fails (as it should).
However, any subsequent attempt to make a deposit fails also - even if the bag drop switch is set back to it's non-overfill position before the attempt is made. The overfill cannot be cleared by going into Diagnostic and attempting to clear the device. The only way to clear the condition is to restart the apps.

This problem does not occur when Option Digit 3 is not set. See attached logs.



Summary:
ANDC 93.01.00.09 - When Night Safe has an overfill condition the deposit bag screen should not be shown when Option Digit 3 is set

Description:
When option digit 3 is set to 7 the action is to 'Check for overfill before night safe deposit has begun'.

On the first transaction after an overfill condition has occurred, the deposit bag screen is displayed for approximately 3 seconds. The display then reverts to the transaction processing screen and the 22<fs>000<fs><fs>8<fs>K1<fs>2<fs>01<fs>4 status message is sent to the host. The bag drop screen is not displayed for subsequent Night Safe Deposit attempts while the overfill remains.

Logs attached. 



Summary:
TAR 297082 - Change to support display of number in a 0,000,000.00 format on amount entry

Description:
Currently in the amount entry state on the amount entry screen if you wish to enter a number such as 1000000 in the following format "1,000,000.00"
then you need to include the characters , and . in the mask which means these characters will always be displayed.
What is requested is a way to hide a character until it is required. Using the example above, that would make it possible to show "1,000" instead of ",1,000" etc.





Summary:
TAR 323428 - In Service message handler stops picking up new messages received

Description:
Customer has had a long running issue with suspected communication issues.
The host status indicates the ATM is offline, but the ATM is in-service and permitting transactions, although all transactions time out. The ATM does not respond to any host terminal commands. The host system uses the common method of sending a Send Configuration terminal command to check the status of the ATM "communications".

This issue has been captured in debuglog, and the root cause is a Send Configuration terminal command being received during a transaction and set as pending, and then a further send configuration terminal command being received as the pending command is being processed.

On the customers systems this has been seen to occur when a transaction is
not completed by the cardholder and a state times out.   No transaction
request has been generated yet.  Timer 01 is set to 60 seconds, and the Send Configuration terminal commands are being sent at 60 second intervals.

When this specific condition occurs, CCM TCPIP processes the incoming message and raises the Message received event to indicate a message is available, but the application does not pick up the message, effectively blocking messages in to the application.
This issue persists until the application changes modes, i.e. to Supervisor, or Out-Of Service and back to In-service, at which point the relevant message handler code picks up all the queued messages in order and processes them all.

FIGS can easily recreate this issue on a simulated platform as follows :
 - Start a transaction sequence
 - At any point prior to sending a transaction request send a "Send configuration terminal command (1<FS><FS><FS>7)
 - either complete the transaction, or let it time out.
 - As the transaction completes, and just prior to the idle state being started, i.e. when the pending command is being processed, send a further Send Configuration terminal command.
 - there will be one response to the two commands
 - from this point, no further messages sent to the application will be seen in either messagein or debug.  Send several messages and observe no application activity
 - switch to Supervisor mode (or kill host sim and then restart it again once the app has gone out of service). Observe the previous messages now being processed in sequence.




Summary:
IT_Few of the notes are not active , but the GBNA.INI file shows all notes Active

Description:
Using wosatool few of the notes were made deactive and the applications were run , but the GBNA.ini file created showed all notes as active.



Summary:
TAR 317299:  AA NDC - App. hang, toggling mode switch has no effect no messages sent

Description:
Full Description: 
Platform ->  XFS 04.02.01
Application -> AA NDC 02.06.06

The problem reported in is that during WestPac testing several hangs were observed. This TAR details the first hang where, after following a predefined test sequence, the system would hang. The application would respond by issuing a mode change leaving supervisor (i.e. P20 sent) when the mode switch was toggled, but no further messages could be sent/ received. 

The sequence that the Customer followed to recreate this issue is as
follows:- 

"... repeated the following steps:
	1  ATM Open
	2  Insert card, cancel on PIN entry
	3  Insert and hold card to cause jam - ATM suspends
	4  Toggle to supv while holding card - IMCRW goes fatal
	5  On select Menu, choose diags
	6  Display DSL (device status list) - verify IMCRW Fatal
	7  Exit DSL, Diags, Supv
	8  Toggle to normal - ATM+host executes supv exit seq, ATM reports fatal on 

 	   open and is closed by host
	9  Toggle to supv
	10 On select Menu, choose diags
	11 Display DSL, remove card, clear fault entering & removing card as prmpted
	12 Exit DSL, Diags, Supv
	13 Toggle to normal - ATM+host executes supv exit seq

	In this instance, on the 8th cycle at step 8, supv exit sequence did not 
	complete.  R09 and P20 sent, host close received & Ready 9'd, no further 
	messages logged

	Subsequent toggle to supv had no effect
	Subsequent toggle to normal had no effect  ..."


For further details of this issue contact Ranjith Suresh or Duncan Harvey





Summary:
TAR RFC  324723 The NDC Data Collector does not support the "00" and "000" XFS key codes

Description:
"The NDC Data Collector does not support the "00" and "000" XFS key codes
   and ignores the keypress for these key codes. It should be modified to
   support these keycodes" 
    




Summary:
TAR RFC  324723 The NDC Data Collector does not support the "00" and "000" XFS key codes

Description:
"The NDC Data Collector does not support the "00" and "000" XFS key codes
   and ignores the keypress for these key codes. It should be modified to
   support these keycodes" 
    




Summary:
Customisation Layer crash (Test Case No: 5.6.13.3)

Description:
Customisation Layer crashed when notes confirmation screen has timed out and then opted for "No" in timed out screen.



Summary:
TAR 321626 -  EJ upload continutally resending the same EJ block even when EJ Ack sent

Description:
Customer reporting an issue with their EJ Upload. 
What seems to be happening is that when the ATM comes into service, the host 
sends the EJ Options & Timers, which appears to initiate the EJ Upload
process. The EJ Upload messages are as follows : 

19:34:14 # 241 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]36035061000[Unicode-x1C]60255] 
19:34:15 # 242 
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]776201060210092733733036733134098[Unicode-x1B][020t*321*10/02/2006*09:27* 
[Unicode-x1B][05pTOP CASSETTE REMOVED[Unicode-x1B][00p 
*1750*1*P*5000001000010000000,M- 
] 
19:34:15 # 243 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]1733134] 
19:37:16 # 244 [10[Unicode-x1C]008[Unicode-x1C]000[Unicode-x1C]1] 
19:37:16 # 245 [22[Unicode-x1C]008[Unicode-x1C][Unicode-x1C]9] 
19:38:30 # 246 
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]776201060210092733733036733134098[Unicode-x1B][020t*321*10/02/2006*09:27* 
[Unicode-x1B][05pTOP CASSETTE REMOVED[Unicode-x1B][00p 
*1750*1*P*5000001000010000000,M- 
] 
19:38:31 # 247 [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]1733134] 

Therefore, even though the last char this block is 733134 and the EJ Ack is
also for 733134, it looks as though the EJ Ack is not being processed and
the timer 60 (255) is coming into play. The debug log shows the following
after the EJ Options and Timers message is sent :- 

applica.. 19:34:15.090 EJ Upload is now Active! 
applica.. 19:34:15.110 Options and timer Received 
applica.. 19:34:15.140 Enabling EJ Upload - Do we have a match? 
applica.. 19:34:15.170 Last Char This Block = 733336 
applica.. 19:34:15.190 Last Char Received = 733134 
applica.. 19:34:15.220 Message Handler - Message
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]776201060210092733733036733134098[Unicode-x1B][020t*321*10/02/2006*09:27* 
[Unicode-x1B][05pTOP CASSETTE REMOVED[Unicode-x1B][00p 
*1750*1*P*5000001000010000000,M- 
] sent to Host 
<wid>7a41s1</wid> 

applica.. 19:34:15.270 Start Host Timeout 
timeout period = 255 
<wid>4p641a23</wid> 

Do not know where the Last Char This Block 733336 is obtaining this value
from? It looks as though the EJ Ack is not being processed as the blocks do 
not match - even though according to the message out and message in the
blocks match. 
Another issue is that the actual data being sent in the EJ Upload is dated
10/02/2006 but the EJ file they have starts 21/03/2006 - so it would appear
that the information being sent in the EJ Upload is being stored/cached
somewhere. 

Logs available if required. Euan Patullo/Ranjith Suresh aware of issue and
actively investigating




Summary:
TAR 324366 & 324194 & 323119

Description:
Please look at tar descriptions for detailed info.
All relate to hangs when promote installed.




Summary:
Simulated Supervisor does not put SST OOS until after completion of dispenser clear

Description:
Noticed during test 5.5 of dual dispenser testing but probably applies to single dispenser SSTs also

The SST does not goes OOS until after completion of the Clearing of the device. This allows the opportunity for a card to be entered and if a subsequent dispense is attempted during the transaction a R9 is returned but no dispense is attempted



Summary:
BNA - On exit from Supervisor fitness not set to zero when device is good

Description:
Cleared BNA error in Diagnostics - no notes in device. Clear passed. Exited Supervisor without doing INIT BNA as exiting Supv should set fitness to 0 if device is ok. availability = 0 and device ok but fitness was not set to zero.

See end of attached debuglog for issue.



Summary:
Update NCR_SPs.reg file to contain ReturnCachedStatus key to work with the new CDM_SP that delays status

Description:
GENERAL_CONFIGS	ReturnCachedStatus	If a WFS_INF_CDM_STATUS request is received while another request or command is in progress, this value determines whether the service provider returns immediately with the last known status, or delays the request until the current request or command is complete. If many WFS_INF_CDM_STATUS requests are sent during a transaction, overall transaction times may increase if non-cached status is requested	0 ¿ Do not return cached status
1 ¿ Return cached status
Default is 1




Summary:
TAR 324550 - Acocunt details are printed twice on journal for Message mode option 5b

Description:
The account details as detailed for message mode option 5b are incorrectly printed on the journal. The details are printed twice i the digit is selected, and once if the option is not selected.



Summary:
IT8 - Mstatus info missing on GBRU when fatal condition created during encash

Description:
While testing on the GBRU with IT8, I was making it go fatal while trying to encash with the lid on top lifted up.  I didn't get any mstatus data filled out.

See attachment



Summary:
IT_The Customisationlayer crash  when the GBNA DeviceAvailability is XFS_NOT_Available

Description:
The Customisationlayer crash  when the GBNA DeviceAvailability is XFS_NOT_Available

Debug Logs attached.



Summary:
Handle Leak While Executing Web State Exit

Description:
A handle leak occurs when executing the Web State Exit.  The number of handles depends on the number of objects on the web page.

Issue is to do with the internal mDLLInterface worker being created and destroyed for each invocation.  A performance update for 3.2 was added to cache the state type pointers.  A side effect of this is that the handle leak disappears.

Need to take the revisions involved in the State Type Split development to fix this.




Summary:
CustLayer falls over when shutter held open during Enable

Description:
Held shutter and held note. Note was pushed back and Remove Notes screen shown.  After a while it tried to close shutter.  I held it open.  Debug log showed suspend condition had been reported.  And it had tried to re-activate enable script then exception occurred shown in event log - Object required: LastCashStatus.



Summary:
Debug output for Current Encashed Counts is misleading

Description:
Hi Alison,

Some more changes to be applied for the same issue. 
Note: Without these latest changes, the Encashed counts were already correct. However, the "Current Encashed Counts" printed on Debug Log are misleading, as it might show negative figures.

This is due to application is counting the existing cassette count before calling CashInEnd (variable name: Values). 
The same modified logic need to be applied to Values in order to obtain accurate "Current Encashed Counts".

Pls find attached the documentation.

Note: One more suggestion, should we synchronise the array index printing on Debug Log? The current application sometimes prints the index as it is, sometimes prints index+1.
Example 1:

 Debug ( " The count before encash is " & (j + 1) & " " & CashiNoteType.Count)
 Values(j) = CashiNoteType.Count    
 Debug (" Values [ " & (j + 1) & " ] = " & Values(j))  

Example 2:

If (found = True)  Then
            EscrowedNotes(jCount) = AcceptedNoteTypeCount.Count
            Debug (" Escrowed Notes " & jCount & " " & EscrowedNotes(jCount))
            Debug (" Escrow Counts [Type : " & (jCount + 1) & "]" & "[ Note Count : " &   EscrowedNotes(jCount) & "]")
Else
            EscrowedNotes(jCount) = 0
End If

By synchronising the index printing, it will ease the trouble-shooting process when go through the debug log, without having to always refer to the source code. The same thing apply to Escrow Count printing, refund count printing, etc.

Regards,
Bee Lian




Summary:
AANDC: The supplies status of a Cash in cassette is reported as a dot in all the retract unsols on a GBRU

Description:
On a GBRU, for all the retract unsols, the supplies status of the cash in cassette is reported as a dot in the unsol.




Summary:
IT-When good notes are entered the Please Enter Screen is displayed  

Description:
The reason being when the Device Availability is XFS_NOT_AVAILABLE
(The device is not available for use), the dictionary is not getting populated so there no notes to be validated.



Summary:
CashinStart Fails when CLR BNA is performed and Note Sorting is enabled.

Description:
Initially thought this to be an issue with SP, but later after having a discussion with rohit and further investigation, it looks like in CLR BNA ulvalues are set to 0 for each individual cassette which is the cause of the issue. This problem occurs only when note sorting is applied using GBXX Configuration option 39.



Summary:
BNA Fitness integer store is not populated when extended message is set

Description:
From the logs below u can check that overall fitness is 4 in the WSC Component, but in the last line device fitness is 0.
This is because bnafitness.data is not populated in WSC Component when extended message flag is set. I think even bnafitness integer store needs to be set along with the bnafitnessdata string store in the WSC Component when extended message flag is set

customi.. 00:47:28.843 UBound(BNAFitnessDict.Data.Keys())2
customi.. 00:47:28.968 Activating - Enable Device - 0A249TP2
customi.. 00:47:29.203 Calling CashInStart...
customi.. 00:47:29.203 Initialising ReturnedNotesCount to 0
customi.. 00:47:30.125 @@[XFSErrorEvent Information Start]@@
customi.. 00:47:30.140 Error.Time : 17/05/2006 00:47:30
customi.. 00:47:30.140 Error.ApplicationName : 
customi.. 00:47:30.156 Error.XFSError : -385
customi.. 00:47:30.171 Error.Description : Device: BillAcceptor1,Description: CashInStart; The data passed as input contains invalid data
customi.. 00:47:30.171 Error.Category : 6
customi.. 00:47:30.187 Error.result (Vendor Specific, May be NULL) : 
customi.. 00:47:30.203 Error.WorkStationName : 
customi.. 00:47:30.203 Error.WOSACommand (The Wosa command that caused this error) : 1301
customi.. 00:47:30.218 Error.WOSAError (CEN XFS) : -52
customi.. 00:47:30.234 <<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>
customi.. 00:47:30.250 Device.Data1
customi.. 00:47:30.265 Mdata
customi.. 00:47:30.281 XFSErrorResult =  XFSWarningResult = 
customi.. 00:47:30.296   CashInstartFailed- 110
customi.. 00:47:30.312 start_updatebnafitness
customi.. 00:47:30.312  Ubound of vFitnessCassetteID : 2
customi.. 00:47:30.562  Overall fitness = 4
customi.. 00:47:30.562  Pad len : 3
customi.. 00:47:30.578  len(PAD) = 1
customi.. 00:47:30.593  PAD = 01
customi.. 00:47:30.593  len(PAD) = 2
customi.. 00:47:30.609  PAD = 001
customi.. 00:47:30.625  Pad len : 3
customi.. 00:47:30.640  len(PAD) = 1
customi.. 00:47:30.640  PAD = 02
customi.. 00:47:30.656  len(PAD) = 2
customi.. 00:47:30.671  PAD = 002
customi.. 00:47:30.671 End_updatebnafitness = 400100020
customi.. 00:47:30.812  Ubound of vCassetteID : 2
customi.. 00:47:30.828  OUTPUT SUPPLIES STATUS FOR EACH CASSETTE
customi.. 00:47:30.828 CASSETTE ID : CI2 SUPPLIES : 1
customi.. 00:47:30.843 CASSETTE ID : CI10 SUPPLIES : 1
customi.. 00:47:30.859  sBNASupplies AFter exit function - 0
customi.. 00:47:30.859  Pad len : 3
customi.. 00:47:30.875  len(PAD) = 1
customi.. 00:47:30.890  PAD = 01
customi.. 00:47:30.906  len(PAD) = 2
customi.. 00:47:30.906  PAD = 001
customi.. 00:47:30.921  Pad len : 3
customi.. 00:47:30.937  len(PAD) = 1
customi.. 00:47:30.937  PAD = 02
customi.. 00:47:30.953  len(PAD) = 2
customi.. 00:47:30.968  PAD = 002
customi.. 00:47:30.984  sBNASupplies Before main return - 000100020
customi.. 00:47:46.015 WORKGROUP SET FITNESS
FITNESS = 0  
<wid>41b7na1</wid>




Summary:
Test 5.7.5.7 When Close State option is to leave notes, fitness = 0

Description:
When notes were left in the Close state using SetClos2 in BNATEST, the fitness was set to 4 as the device had to be cleared before it could be used. Now the fitness = 0 which is incorrect.



Summary:
BNA2 - when option 45 set to 007, custlayer escapes when retract call is sent

Description:
Run test 5.11.3.1.2 on BNA2 but don't jam the shutter. The customisationlayer escapes. Event log PS escape and debuglog attached.



Summary:
BNA - after test 5.7.5.5.2 the BNA fitness is -1 not present

Description:
Ran test 5.7.5.5.2 where notes in BNA at power up. Test passed with BNA at fatal but BNA fitness went to -1 after attempting to clear. BNA test passes in diagnostics. Debug log attached.



Summary:
If Tran Reply sent while SST is in idle it is not rejected - it is actioned on a subsequent Tran Request

Description:
If a transaction reply (or several transaction replies) are sent while the SST is idling they are not rejected - they are actually actioned as soon as a transaction request is sent to the host 



Summary:
93.01.00.06 - Entering a valid value after an invalid value following the 'return to standard ej mode warning message' results in INVALID VALUE remaining on the display.

Description:
Upon return to standard EJ mode from multiple mode the 'SOME BACKUPS MAY BE DELETED PRESS 1 TO CONTINUE,0 TO CANCEL' message is displayed. Entering an invalid value here will cause INVALID VALUE to be displayed above the warning message. Subsequently entering the valid value '0' will return to the EJ BACKUP MODE screen but the INVALID VALUE message remains on the display. NOTE: Even though there are only two valid 1 digit selections that can be made at the warning prompt ('1' or '0') it is still possible to enter two digits of text at the prompt (i.e. '22'). This contradicts behaviour for such situations already present in the product.



Summary:
93.01.00.06 - Spacing of text on Enhanced EJ Options line in DISP CONFIG does not allow longest possible string to be displayed.

Description:
Both Enhanced EJ options variables are now displayed on the same line in DISP CONFIG - 'EJ BKUP= %         NO. BKUPS=%'. The longest possible string - 'EJ BKUP= MULTIPLE  NO. BKUPS=1000' - is too long to be displayed on one line and the last 0 from 1000 is missing completely on a front access SST and is pushed onto the next line on an SST with an EOP. Would suggest rmoving the space immediately after 'EJ BKUP='.



Summary:
IT6 - MaxBillsThreshold reg key not read correctly from registry

Description:
Not being seen to be set - probably because reg entry is a dword and code is reading it as a string



Summary:
IT6 - Add Cash in Seperated Counters does not display CDM x in front of string

Description:
Minor issue caused by sharing a higher level director



Summary:
TAR 323742 - Stack Failed in debug log but no Solic sent to host, only Ready9

Description:
Cust using XFS 4.2.1 and NDC 03.00.03. 

Initially problem was thought to be caused by Relate and customisations
(exits) for this. Relate and Promote were removed from the aggregate so that 
only vanilla NDC 03.00.03 was installed with no customisations or exits.
Problem still exists as below: 

Out of 150 ATM, 135 are on XFS 4.2.1 and NDC 03.00.02. 
The other 15 were upgraded to 03.00.03. 
Within a day or two some (4) of these ATMs began to "reverse" transactions. 
What in fact was happening was that cash withdrawal was selected,
transaction reply received to dispense notes. The debug log would log stack
failed but ready 9 would be sent up to the host so the customer was
debited. 

Debug logs, device logs and XFS CDM SP trace files were provided. FGSC
analysis of these files below: 

The logs from Dubai are showing that NDC does and can send E2 solics up
sometimes. 

The logs are showing, when NDC is behaving normally, the error messages are
being sent up for dispenser failures: 

MessageOut.log (322):[05/06/06 15:33:59]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]11310] 
MessageOut.log (1152):[05/07/06 08:09:46]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]10300] 
MessageOut.log (1410):[05/07/06 11:07:28]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00040[Unicode-x1C]0401920000030000200020[Unicode-x1C]12030] 
MessageOut.log (1518):[05/07/06 12:21:41]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]04000[Unicode-x1C]0401920300000000200020[Unicode-x1C]13000] 
MessageOut.log (2726):[05/08/06 08:26:59]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]10300] 

These are a result of trying to pick from missing cassettes (NOT
DISPENSABLE) or a h/w error (pick fails). 

So, this all looks fine and normal, and what we expect to see. 

What normally happens for real dispenser problems is: 
1. Txn reply with notes to dispense 
2. NDC sends Cash unit info to SP 
3. NDC sends Dispense command 
4. If this fails (Hresult<>0) then "stack Failed" is logged and unsolic E2
sent up. 
5. host responds with another txn reply (next state, FID 5) 
6. txn continues. 

However, when NDC starts to fail, there are stack failures logged in debug
log, and ready 9's sent to the host. (20.13.58.574 on 7/5/06) 
1. Txn reply with notes to dispense 
2. NDC sends Cash unit info to SP - SP returns Hresult 0, and pointer to
cash unit info. All this looks OK and same as last good transaction 3
minutes before. 
3. NO DISPENSE COMMAND IS SENT TO THE SP. NO EVENTS SENT FROM DISPENSER SP. 
4. Stack failed logged in debug log, Ready 9 sent to the host 
5. NDC proceed to closed state as no further txn reply sent to ATM. 

There are no h/w errors logged in the device log at this time. 

We need some additional debug in the ssdscashhandler.dll to deermine the
code flow leading to the stack failure and why ready 9 is being sent up. 




Summary:
BNA - Error.WosaDescription property returning NULL value in the supervisor (Under set currency activescripthost of CLEAR BNA Director during a supervisor exit.)

Description:
Due to this supervisor escapes throwing an merror with "type mismatch " as the reason.



Summary:
BNA - extended message reporting. Spelling mistake with the object name in bnaupdateactivestatus activescripthost

Description:
ExMessageFlag.Data is spelt incorrectly - means extended cassette status tests won't run



Summary:
Failure in reporting the retract counts to supervisor.

Description:
When the retract flag is set through Enhanced configuration parameter load, and perform a retract operation, the retract operation is performed successfully, but the count is not reported to Supervisor, Disp CNTRS



Summary:
Blank Screen will be shown when option 82 is selected in Supervisor Configure menu if INI file is blank

Description:
Suppose the GBNA.INI file is blank and the user tries to configure it, a blank screen will be shown if 82 option is pressed in Configure menu.




Summary:
TAR 323738

Description:
If the cardholder pressed Cancel on the pinpad at the same time as inserted a large (approx 30) bunch of notes into the BNA - some of which are good notes & some of which are bad, then the result is that the good notes are sent to escrow (correct) and the bad notes are rejected (correct). The cardholder then did not take the rejected notes until about the time when the card is then ejected back. He then takes the rejected notes and card. The close state was defined to refund notes, but the result was that the escrowed notes remained in the escrow and his account was not credited with the amount. When the next cardholder started his transaction, his notes were added to the escrow and the escrow content then encashed successfully so that this second cardholder was credited with the amount from the previous transaction as well as his own deposit.



Summary:
TAR 323533 - AA-NDC: Print field with just Cut in causes simulated receipt preprint error

Description:
AA-NDC 02.06.06 
XFS 04.02.00 

Problem originally reported as receipt MEI going on in close state, but no
receipt issued. 
Further investigation shows problem associated with single character print
field, containing cut. 

problem occurs under following conditions: 

Transaction reply print field for receipt contains one character, - Cut
(0cH) 
Tests have been done with this as second printfield in reply, but customer
reports condition with single field. Function command not relevant. Test
done using Set next state and print 

R00 and R01 screens must be present on ATM. 

When transaction reply actioned, any valid receipt data is printed, and
merged with R00/R01 data. Receipt is cut and presented. When Close state
entered, remainder of R01 data printed. 

Two conditions seen in Close state. If R01 just contains newline characters, 
receipt not cut and issues. If R01 lines have printable characters, Receipt
is then cut and delivered. 

Receipt MEI shown to be set on in close state, even in first case. 

If the print field contains another character before the cut, eg '1,0CH',
then single receipt is printed in transaction reply, containing all merged
R00/R01 line. No activity in close state. 

If R00/R01 not present, then single character field is OK 




Summary:
TAR 323533 - AA-NDC: Print field with just Cut in causes simulated receipt preprint error

Description:
AA-NDC 02.06.06 
XFS 04.02.00 

Problem originally reported as receipt MEI going on in close state, but no
receipt issued. 
Further investigation shows problem associated with single character print
field, containing cut. 

problem occurs under following conditions: 

Transaction reply print field for receipt contains one character, - Cut
(0cH) 
Tests have been done with this as second printfield in reply, but customer
reports condition with single field. Function command not relevant. Test
done using Set next state and print 

R00 and R01 screens must be present on ATM. 

When transaction reply actioned, any valid receipt data is printed, and
merged with R00/R01 data. Receipt is cut and presented. When Close state
entered, remainder of R01 data printed. 

Two conditions seen in Close state. If R01 just contains newline characters, 
receipt not cut and issues. If R01 lines have printable characters, Receipt
is then cut and delivered. 

Receipt MEI shown to be set on in close state, even in first case. 

If the print field contains another character before the cut, eg '1,0CH',
then single receipt is printed in transaction reply, containing all merged
R00/R01 line. No activity in close state. 

If R00/R01 not present, then single character field is OK 




Summary:
Populate INI file - when option 82 is pressed in configure menu, denoms are not seen

Description:
Varun saw a issue with Poupulate INI , he is not able to see the denoms when option 82 is pressed in configure menu. I had tested and sent the fix in Supervisor 40.mpj which is working fine , so have to check in the latest Supervisor project and check out wht the issue is  ? May be a integration issue 



Summary:
BNA2 - Transaction Reply BNA_DEP sent with no response

Description:
 I wasn't sure if I had properly clicked on the button to send BNA_DEP in NDCHost as nothing happened immediately, so I clicked it again and got a Reject msg which is good.  And then the deposit occurred but at this point there was no Ready9 or any other status msg sent to host.



Summary:
No Severity Info in status message when extended message is turned off

Description:
I'm using it6 build, testing on bna2.  I wanted to get a baseline of results before testing my changes.  I have tried two scenarios (one was the w5 msg scenario which gives w3, and the other was cassettes full) and on both cases I got a status msgs which did not contain severity info.  I'm thinking this might have something to do with the extended status info changes.

This is the cassette full one (I chose Deposit trans - the BNA2 started clearing itself before enabling - after about 10 mins(!!) of this it gave up and this msg was sent and I finally got my card back):

10:47:56  # 56    [12[Unicode-x1C][Unicode-x1C][Unicode-x1C]w3  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   [Unicode-x1C][Unicode-x1C]25[Unicode-x1C]1



Summary:
Installer needs to pick up additional WebState files for 3.01

Description:
ssdsWebExit.frf and .str need to be picked up for 03.01.00 installation



Summary:
TAR 323660- Ready B sent when Envelope Depository is in Suspend

Description:
Customer has reported an issue whereby they are depositing an envelope and
they generate an envelope jam by holding on to envelope - env not deposited. 

Device fault is reported (Suspend) and the host responds with a transaction
reply of Set Next State and Print. 
Customer selects to carry out another deposit transaction (removes jammed
envelope above). 
Host responds with transaction reply print immediate. 
Ready B sent - host respongs with a transaction reply deposit and print. 

This time, instead of asking for the envelope to be deposited, the shutter
does not open and the customer is prompted for another transaction. 
Yet a Ready B is sent in response to the Deposit and Print and no device
fault is reported. 




Summary:
TAR 323660- Ready B sent when Envelope Depository is in Suspend

Description:
Customer has reported an issue whereby they are depositing an envelope and
they generate an envelope jam by holding on to envelope - env not deposited. 

Device fault is reported (Suspend) and the host responds with a transaction
reply of Set Next State and Print. 
Customer selects to carry out another deposit transaction (removes jammed
envelope above). 
Host responds with transaction reply print immediate. 
Ready B sent - host respongs with a transaction reply deposit and print. 

This time, instead of asking for the envelope to be deposited, the shutter
does not open and the customer is prompted for another transaction. 
Yet a Ready B is sent in response to the Deposit and Print and no device
fault is reported. 




Summary:
Popup displayed at start of day due to CashInCommonImplementation.wsc

Description:
When I run the apps on a BNA2 machiine I get a popup at start of day with title Microsoft VBScript runtime error - file://C:\ssds\Dll\CashInCommonImplementation.wsc

And msg: [820,5] Object required: 'XFSErrorResult'



Summary:
Exception in AppCore on single dispenser ATMs during startup.

Description:
in IT6 build of 3.1.



Summary:
EJ IT6 -When CDRW fails to copy to CD because file already present just give error message - copy failed - Screen e13 should not be displayed

Description:
EJ IT6 -When CDRW fails to copy to CD because file already present just give error message - copy failed - Screen e13 should not be displayed



Summary:
TAR 323428 - In Service message handler stops picking up new messages received

Description:
Customer has had a long running issue with suspected communication issues.
The host status indicates the ATM is offline, but the ATM is in-service and permitting transactions, although all transactions time out. The ATM does not respond to any host terminal commands. The host system uses the common method of sending a Send Configuration terminal command to check the status of the ATM "communications".

This issue has been captured in debuglog, and the root cause is a Send Configuration terminal command being received during a transaction and set as pending, and then a further send configuration terminal command being received as the pending command is being processed.

On the customers systems this has been seen to occur when a transaction is
not completed by the cardholder and a state times out.   No transaction
request has been generated yet.  Timer 01 is set to 60 seconds, and the Send Configuration terminal commands are being sent at 60 second intervals.

When this specific condition occurs, CCM TCPIP processes the incoming message and raises the Message received event to indicate a message is available, but the application does not pick up the message, effectively blocking messages in to the application.
This issue persists until the application changes modes, i.e. to Supervisor, or Out-Of Service and back to In-service, at which point the relevant message handler code picks up all the queued messages in order and processes them all.

FIGS can easily recreate this issue on a simulated platform as follows :
 - Start a transaction sequence
 - At any point prior to sending a transaction request send a "Send configuration terminal command (1<FS><FS><FS>7)
 - either complete the transaction, or let it time out.
 - As the transaction completes, and just prior to the idle state being started, i.e. when the pending command is being processed, send a further Send Configuration terminal command.
 - there will be one response to the two commands
 - from this point, no further messages sent to the application will be seen in either messagein or debug.  Send several messages and observe no application activity
 - switch to Supervisor mode (or kill host sim and then restart it again once the app has gone out of service). Observe the previous messages now being processed in sequence.

Full debuglog showing the activity at the time the issue occurs are
available from FGSC.   The relevant section from the debug.log file is
included below, note the lack of the debug statement :
"Message Handler - awaiting incoming message...  <wid>8l194y12</wid>" 



customi.. 20:58:22.856 Exit from Close State Next State Number: [0] <wid>1l1257y27</wid>

customi.. 20:58:22.856 Are we EJing?  
<wid>5d379ma18</wid>

customi.. 20:58:22.866 Customisation Layer - EJ Status Processing Started [20:58:22] <wid>0d357ma18</wid>

applica.. 20:58:22.866 Checking For EJ Status Messages <wid>7d312ma18</wid>

applica.. 20:58:22.866 EJ Status Complete!  
<wid>0d362ma18</wid>

customi.. 20:58:22.876 Customisation Layer - EJ Status Processing Complete - AC Signalled [20:58:22] <wid>1n1055dc5</wid>

applica.. 20:58:23.147 Processing pending Terminal Command <wid>6l194y12</wid>

applica.. 20:58:23.147 Validating message...  
<wid>19l194y12</wid>

applica.. 20:58:23.167 Deformatting message...  
<wid>3l195y12</wid>

applica.. 20:58:23.187 Check for Pending EJ Messages Pending EJ Flag = 0 <wid>0p686a23</wid>

applica.. 20:58:23.207 Activating Pending Supervisor Messages Entry Message = 
Exit Message =   
<wid>4n625dc4</wid>

applica.. 20:58:23.247 Supervisor Pending Messages Complete On Exit Supervisor Entry Msg = 
On Exit Supervisor Exit Msg =   
<wid>3n625dc4</wid>

applica.. 20:58:23.257 Checking Customisation Layer Status [WAITING] <wid>3n4843dc128</wid>

applica.. 20:58:23.317 Processing Message - Terminal Command <wid>13l194y12</wid>

applica.. 20:58:23.317 Validating message...  
<wid>19l194y12</wid>

applica.. 20:58:23.317 Deformatting message...  
<wid>3l195y12</wid>




Summary:
TAR 323428 - In Service message handler stops picking up new messages received

Description:
Customer has had a long running issue with suspected communication issues.
The host status indicates the ATM is offline, but the ATM is in-service and permitting transactions, although all transactions time out. The ATM does not respond to any host terminal commands. The host system uses the common method of sending a Send Configuration terminal command to check the status of the ATM "communications".

This issue has been captured in debuglog, and the root cause is a Send Configuration terminal command being received during a transaction and set as pending, and then a further send configuration terminal command being received as the pending command is being processed.

On the customers systems this has been seen to occur when a transaction is
not completed by the cardholder and a state times out.   No transaction
request has been generated yet.  Timer 01 is set to 60 seconds, and the Send Configuration terminal commands are being sent at 60 second intervals.

When this specific condition occurs, CCM TCPIP processes the incoming message and raises the Message received event to indicate a message is available, but the application does not pick up the message, effectively blocking messages in to the application.
This issue persists until the application changes modes, i.e. to Supervisor, or Out-Of Service and back to In-service, at which point the relevant message handler code picks up all the queued messages in order and processes them all.

FIGS can easily recreate this issue on a simulated platform as follows :
 - Start a transaction sequence
 - At any point prior to sending a transaction request send a "Send configuration terminal command (1<FS><FS><FS>7)
 - either complete the transaction, or let it time out.
 - As the transaction completes, and just prior to the idle state being started, i.e. when the pending command is being processed, send a further Send Configuration terminal command.
 - there will be one response to the two commands
 - from this point, no further messages sent to the application will be seen in either messagein or debug.  Send several messages and observe no application activity
 - switch to Supervisor mode (or kill host sim and then restart it again once the app has gone out of service). Observe the previous messages now being processed in sequence.

Full debuglog showing the activity at the time the issue occurs are
available from FGSC.   The relevant section from the debug.log file is
included below, note the lack of the debug statement :
"Message Handler - awaiting incoming message...  <wid>8l194y12</wid>" 



customi.. 20:58:22.856 Exit from Close State Next State Number: [0] <wid>1l1257y27</wid>

customi.. 20:58:22.856 Are we EJing?  
<wid>5d379ma18</wid>

customi.. 20:58:22.866 Customisation Layer - EJ Status Processing Started [20:58:22] <wid>0d357ma18</wid>

applica.. 20:58:22.866 Checking For EJ Status Messages <wid>7d312ma18</wid>

applica.. 20:58:22.866 EJ Status Complete!  
<wid>0d362ma18</wid>

customi.. 20:58:22.876 Customisation Layer - EJ Status Processing Complete - AC Signalled [20:58:22] <wid>1n1055dc5</wid>

applica.. 20:58:23.147 Processing pending Terminal Command <wid>6l194y12</wid>

applica.. 20:58:23.147 Validating message...  
<wid>19l194y12</wid>

applica.. 20:58:23.167 Deformatting message...  
<wid>3l195y12</wid>

applica.. 20:58:23.187 Check for Pending EJ Messages Pending EJ Flag = 0 <wid>0p686a23</wid>

applica.. 20:58:23.207 Activating Pending Supervisor Messages Entry Message = 
Exit Message =   
<wid>4n625dc4</wid>

applica.. 20:58:23.247 Supervisor Pending Messages Complete On Exit Supervisor Entry Msg = 
On Exit Supervisor Exit Msg =   
<wid>3n625dc4</wid>

applica.. 20:58:23.257 Checking Customisation Layer Status [WAITING] <wid>3n4843dc128</wid>

applica.. 20:58:23.317 Processing Message - Terminal Command <wid>13l194y12</wid>

applica.. 20:58:23.317 Validating message...  
<wid>19l194y12</wid>

applica.. 20:58:23.317 Deformatting message...  
<wid>3l195y12</wid>




Summary:
Dual Dispenser - As a result of the integration of TAR 323048 no longer the C1/C2 prefix in front of cassette types in SOH display

Description:
Remove the C1 or C2 prefix on dual dispenser SOH display



Summary:
TAR 323742 - Stack Failed in debug log but no Solic sent to host, only Ready9

Description:
Cust using XFS 4.2.1 and NDC 03.00.03. 

Initially problem was thought to be caused by Relate and customisations
(exits) for this. Relate and Promote were removed from the aggregate so that 
only vanilla NDC 03.00.03 was installed with no customisations or exits.
Problem still exists as below: 

Out of 150 ATM, 135 are on XFS 4.2.1 and NDC 03.00.02. 
The other 15 were upgraded to 03.00.03. 
Within a day or two some (4) of these ATMs began to "reverse" transactions. 
What in fact was happening was that cash withdrawal was selected,
transaction reply received to dispense notes. The debug log would log stack
failed but ready 9 would be sent up to the host so the customer was
debited. 

Debug logs, device logs and XFS CDM SP trace files were provided. FGSC
analysis of these files below: 

The logs from Dubai are showing that NDC does and can send E2 solics up
sometimes. 

The logs are showing, when NDC is behaving normally, the error messages are
being sent up for dispenser failures: 

MessageOut.log (322):[05/06/06 15:33:59]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]11310] 
MessageOut.log (1152):[05/07/06 08:09:46]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]10300] 
MessageOut.log (1410):[05/07/06 11:07:28]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00040[Unicode-x1C]0401920000030000200020[Unicode-x1C]12030] 
MessageOut.log (1518):[05/07/06 12:21:41]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]04000[Unicode-x1C]0401920300000000200020[Unicode-x1C]13000] 
MessageOut.log (2726):[05/08/06 08:26:59]
[22[Unicode-x1C]050[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]00400[Unicode-x1C]10[Unicode-x1C]10300] 

These are a result of trying to pick from missing cassettes (NOT
DISPENSABLE) or a h/w error (pick fails). 

So, this all looks fine and normal, and what we expect to see. 

What normally happens for real dispenser problems is: 
1. Txn reply with notes to dispense 
2. NDC sends Cash unit info to SP 
3. NDC sends Dispense command 
4. If this fails (Hresult<>0) then "stack Failed" is logged and unsolic E2
sent up. 
5. host responds with another txn reply (next state, FID 5) 
6. txn continues. 

However, when NDC starts to fail, there are stack failures logged in debug
log, and ready 9's sent to the host. (20.13.58.574 on 7/5/06) 
1. Txn reply with notes to dispense 
2. NDC sends Cash unit info to SP - SP returns Hresult 0, and pointer to
cash unit info. All this looks OK and same as last good transaction 3
minutes before. 
3. NO DISPENSE COMMAND IS SENT TO THE SP. NO EVENTS SENT FROM DISPENSER SP. 
4. Stack failed logged in debug log, Ready 9 sent to the host 
5. NDC proceed to closed state as no further txn reply sent to ATM. 

There are no h/w errors logged in the device log at this time. 

We need some additional debug in the ssdscashhandler.dll to deermine the
code flow leading to the stack failure and why ready 9 is being sent up. 




Summary:
CPM H/W Config Not Converted to ASCII HEX correctly

Description:
When AANDC converts the CPM H/W configuration to ASCII it does not convert nibble values greater than 0x9 correctly. Hex digits 0xa to 0xf should be converted to 'A' to 'F', however they are converted to ASCII chars starting at ':' 



Summary:
Update dial up config data via supervisor when config file is read only causes unhandled exception

Description:
When attempting to change the dial config data(message retires) via supervisor when the xml file is set to read only the ATM restarts due to an unhandled exception being raised.  The windows error event log showed the following details  

Object ID: 60324192 
Process ID: 3872 
Thread ID: 3876 
Process Filename: C:\ssds\apps\supervisor.exe SupplyPoint Owner: NCRScotland.SSDS SupplyPoint Source:mError Description: <SCFILE> R:\Ssds\InterDomain\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>      <SCLINE> 1381 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 114       Error Number: 2    Worker Id:     Description: VBScript has reported an error in a script passed to it. The error is near line number 132 of Script Host Worker ID: 163n5456dc129. 

VBScript has given the following error description:         'Access is denied. ' 
The Source of the Exception is         'msxml3.dll' Script is: 'ProcID**activate**END Const DIALUPURL = "C:\Program Files\NCR APTRA\BIN\config\Visa2CommunicationsServiceConfig.xml" Sub activate()    Dim ComConfigNode, Visa2ComLink, SerialLink, ModemLinkData,             



Summary:
Opteva - After diagnostics & self test of card reader Card read State loops.

Description:
IDC SP cannot be opened -15, internal error status is -22 invalid handle to service.



Summary:
IT - Dual Dispenser - CassSuspendedValue has incorrect default behaviour

Description:
Defaullt should be 4, however Jacek only handles setting to 4 if value is 0 or 4



Summary:
ANDC 3.00.04 Service Pack Installation failed

Description:
Installed ANDC 3.00.00 and then installed 3.00.04.But the installation failed showing the error in aggregates.The error logs are attached.



Summary:
CPM H/W Config Not Converted to ASCII HEX correctly

Description:
When AANDC convert sthe CPM H/W configuration to ASCII it does not convert nibble values greater than 0x9 correctly. Hex digits 0xa to 0xf should be converted to 'A' to 'F', however they are converted to ASCII chars starting at ':' 



Summary:
IT - Dual Dispenser - Cash Handler Priority registry key set to incorrect default value

Description:
Mistake by me when adding the entries to AdvanceNDC.reg

Will also take the opportunity to correct Jaceks default handling of this which would default to cash handler 2 if a value of anything other than 0 is set



Summary:
Escape on entry to Supervisor when mode switch flicked prior to txn end

Description:
escape from applicationcore see attached



Summary:
Test 5.7.5.7.2 BNA2 does not refund notes in Close state

Description:
See attachment for debuglog. Note was not returned when SETCLOSE0 used to set Close state flag to return note. No h/w error or unsol and the note remained in escrow to be credited to next customer.



Summary:
ANDC 93.01.00.05 - Entering invalid data at prompt for returning to Standard EJ Backup mode is not rejected with a suitable message

Description:
When returning from multiple to standard EJ backup mode, the user is presented with the warning message 'SOME OLD BACKUPS MAY BE DELETED' on one line and 'PRESS 1 TO CONTINUE,0 TO CANCEL' on the following line. It is, however, possible to enter up to 2 digits. Entering 1 or 01 results in a CONTINUE. Entering 0 or 00 results in a CANCEL. Any other invalid one digit or two digit entries results in the above warning being re-displayed but no indication that the user has made an invalid selection.



Summary:
ANDC 93.01.00.05 - Warning message for change from multiple to standard EJ backups is partially overwritten by text entry area

Description:
When changing from multiple to standard EJ backup mode the warning 'SOME OLD BACKUPS MAY BE DELETED' is displayed. The 'ED' from 'DELETED' is positioned in the area where data entered by the user will be displayed. On a front display SST the 'ED' flashes up momentarily and is then blanked out. On an SST with an operator panel, the 'ED' remains until data is entered by the user when it is then overwritten.



Summary:
Installer to Include wsc file in the aggregate

Description:
The .wcs has been added under the NDCCore.pj in a new NDCCore\ScriptComponents  sub-dir. WSC file includes various BNA methods to reduce amount of customisation required.



Summary:
confirmation screen information for BNA needs to be added to IP

Description:
In Reference Manual
Chapter 2-78 page 142 of the referrence manual the additional information be used for more information.

"The default screens used above are held in the resrvd.def file,
and contain displays of the deposited note denominations. These
default screens can be replaced by downloaded user screens by
modifying the relevant worker within Advance ADE to reference a
user screen number. However, user screens cannot display the
deposited note denominations information.
Alternatively, you can update reservd.def to reference the screen by
using the SO command (for example C02).
"


The displaying of the Confirmation (Escrow Full) screen is performed in following way:
- the M10 (M11) reserved screen is retrieved,
- this text is then processed in following way:
- first 50 % placeholders are replaced sequentially (for 1 to 50) by the respective counters of the notes recognized as Category 4,
- the 51st % placeholder is replaced by total number of notes recognized,
- all the counters are formatted as either character 0 or 1 to 3 decimal digits in decimal with suppressed zero, 
- with the exception of replacing the % characters (as defined above) the string defined by reserved screen M10/M11 is not changed, i.e. all the other characters remain as in original,
      - then the user screen defined as table entry 4 is displayed (with proper language offset),
      - then on top of it, the replaced string is displayed using DisplayString call-out.
Thus the displayed Confirmation (Escrow Full) screen is a combination of user screen and a M10/M11 reserved screen populated by values of note counters.


Further Customisation for aa-ndc 2.6.x and up
For the customisation of resulting Confirmation (Escrow Full) screens, use C-Exit customization: the NDCStringDisplayHook can be used (this way also the multiple language display can be achieved, if it is not enough to do it on user screen level).
The hook shall test, if the screenData passed as argument contains some identification of the replaced Confirmation (Escrow Full) screenData; if screenData does not contain it, it shall return 1. Then the hook shall parse the screenData and create its own newScreenData not containing the mentioned identifier. Then newScreenData shall be displayed using DisplayString followed by return 0.
For aa-ndc 2.6.x and 3.x up to and including 3.1  See "APTRA Advance NDC. Display and Keyboard Hooks" in addition to C-Exit documentation.





Summary:
Support certificate method of RKM for Diebold

Description:
Signiture method supported already.



Summary:
93.01.00.05 - Attempting to set Max No of Backups with an invalid value results in incorrect error message being displayed

Description:
Attempting to set Max No of Backups with an invalid value results in "INVALID FUNCTION" being displayed. "INVALID VALUE" should be displayed.



Summary:
Supervisor IP - Contains incorrect error message details for trying to set Max No Backups when EJ is standard.

Description:
Supervisors Guide - Page 4-18 (Page 98)
Reads: If the EJ backup mode is currently set to 0 standard EJ backup, the INVALID SELECTION, EJ MODE IS STANDARD error message is displayed.
Should read: If the EJ backup mode is currently set to 0 standard EJ backup, the INVALID, EJ MODE IS STANDARD error message is displayed.



Summary:
IT - Dual Dispenser - if CDM1 OR CDM2 fatal, terminal commands return status of 'other' CDM even if it is fatal

Description:
Terminal commands logic such that it CDM1 is fatal it will use CDM2 but does not check to see if it is fatal 2

if both fatal then should combine severity data as if both were good. 



Summary:
TAR 322809 - AA NDC - Pressing CLR in Supervisor transaction not functioning correctly

Description:
See TAR



Summary:
TAR 318360 - Position settings in Front Echo worker do not appear to work correctly

Description:
When using APTRA Author when using the Front Echo worker with an NDC Data
Collector, if the screen position settings are modified the changes are not
picked up when running the application. 

Customer has been given work around.



Summary:
TAR 318360 - Position settings in Front Echo worker do not appear to work correctly

Description:
When using APTRA Author when using the Front Echo worker with an NDC Data
Collector, if the screen position settings are modified the changes are not
picked up when running the application. 

Customer has been given work around.



Summary:
TAR 323048 - Layout of cassette status on SOH should be indented

Description:
See TAR



Summary:
CIM: ANDC app failed to receive events because the connection point between the COM wrapper and service control was disconnected when the app called Unadvise on the wrapper.

Description:
AXFSC issue that will not be included with AXFSC 2.6. So we need to document what users can do to avoid this issue.



Summary:
ClearPurgeBinCounts (GRIT 319279) missing from latest 3.01 testcash.cpp

Description:
Integration problem when Jaceks code merged - this function is now missing. Minor update only



Summary:
3.1 merge with COE work

Description:
EPP grit -- 331034 
GBRU ---    323080
XFS reset --- 342551
Printer media -- 331033



Summary:
Update author to create new BNA user id and put all directors to be imported under that user id 

Description:
Update author to create new BNA user id and put all directors to be imported under that user id for compenentising BNA



Summary:
Incorrect behaviour when updating dial up config via supervisor when XML config file has read only attribute

Description:
The XML config file for CCM VISA 2 is set to read only.
Access the com port config option through supervisor menu.
A message is displayed stating the currently configured modem.
When the list of available modems is displayed select another modem than currently configured option.
The message 'Could not update XML file' is correctly displayed.
Cancel back to the com port config option and then select the option to change the com port.
A message is displayed stating that the currently configured modem is now the other option selected.
The XML file has not changed and when switching back to normal mode from supervisor a transaction can be carried out successfully.





Summary:
System Escape when accessing GBNA's LastCashInStatus Property

Description:
A UEH occurs caused by the customisation layer when attempting to access the GBNA LastCashin status property.

This can occur in a number of ways.
1. the cardholder is teasing the GBNA pre-acceptor inserting/removing/inserting the notes until they cause a jam where the notes are jammed by the shutter and are on top of the rollers.
2. When notes are retracted and the shutter is held open - jamming the shutter open.

After discussions with AXFS engineering, AXFS cannot create the lastcashin object due to the state of the device (hardware error) and hence it is not possible to read the property of lastcashin status. The command fails and results in the Merror below.
The application VBscript workers should deal with the Hresult of the command completion to determine that something has went wrong with the device.




Summary:
Update ANDC to Remove Workaround included previously for GR1T 318182 raised on CCM VISA 2 Component 

Description:
RFC raised to ensure the workaround put in by Zubair for GR1T 318182 (CCM VISA2 should not fail send on an incoming EOT until it has attempted to send and failed) is removed when the updated VISA2 component (1.00.02) is picked up by ANDC.  This is planned for IT6 (end of week beginning 1st May 2006)



Summary:
Alternative Greek Font taking priority over standard Greek Font.

Description:
Installer puts the alternative Greek font on the system for customers to use if they wish.  It puts it in the Fonts/Greek folder.  However, installer is assuming this should be registered in that location, rather than just copied there.  Need to change installer to not do auto register in that location.



Summary:
TAR 323048 - Layout of cassette status on SOH should be indented

Description:
See TAR



Summary:
Exception during startup in AppCore when GBRUMode set to 2.

Description:
The event log says error is in mCurrencyDispenserMapping constructor.  Similar issue was seen on IT3 build but had been fixed in IT4.  This is IT4 with latest GBRU-GBNA SP ie. 91.00.04.11.



Summary:
IT - If a Blank GBNA.ini file is created at start of day. AANDC does not try to recreate it again

Description:
Due to some problems in the template it is possible that AANDC creates a blank GBNA.INI file.when the applications restart AANDC finds a GBNA.ini file and tries to read it. but since it is blank AANDC does not have any note details. when any note is inserted AANDC thinks there is no note inserted and prompts for reinsertion.

In this case if AANDC reads a blank file it should query the note template again and recreate the file. also there should be some way to tell the user that there is a problem with templates (Journal it).



Summary:
IT - Dual Dispenser - Using Seperated counters, display counts displays Cassette 2 counts for Cassette 4 for CDM 1

Description:
Spotted in author work whilst fixing other issues - worker id 149n6938dc129 needs updated



Summary:
IT - Dual Dispenser - If value > seperated counters mode in registry, defaults to seperated rather than combined counters

Description:
Spotted in the code - if a value > 1 is set in the CountersEntryMode reg key then sets up for Seperated Counters - this is incorrect and invalid values should be set to take Combined counters option



Summary:
AANDC - Already used Dispenser unsol event is not being deleted

Description:
Dispenser unsol event is not being deleted after use which is affecting the subsequent unsols. Sometimes the unsol during the current transaction is having the mstatus, mdata... info of the previous transaction.



Summary:
AANDC - Reading the NDCType->MediaType key from registry fails on a GBRU when the GBRUMode is 0

Description:
When the GBRUMode is 0 (Recycling), the MediaType of a cash in cash out cassette will be 12. Reading this value from the registry always fails. Whenever this value is accessed, there will be an entry logged into event vwr saying "Error accessing the Reg Value Key".



Summary:
AANDC- When Night safe is full, It is returning Solicited message only once after a succesfull deposit(  option 3 is set).

Description:
After a succesfull deposit,assume there is a nightsafe full,then it is returning solicited message only once 

Procedure to create problem:
(using simulator)

1)Set option 3(10007)
2)Perform one succesfull transaction
3)keep switch 2 close(overfull)
4)Try to do one more transaction by sending Nightsafe reply
 Solicited message received with nightsafe full as given below.
22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]K1[Unicode-x1C]2[Unicode-x1C]01[Unicode-x1C]4
5)Send reply once more.

At 5th step-:It will return Ready9 and  comes to idle,where it suppose to return solicited with overfull.





Summary:
IT-Path of GBNA.INI file needs to be changed

Description:
The default path of the GBNA.INI file should be 
C:\Program Files\NCR APTRA\Advance NDC\data instead of C:\ssds\dll.



Summary:
EJ IT5 - Change "EJ UPLOAD IS IN PROGRESS" to "EJ UPLOAD MAY BE IN PROGRESS" in Resrvd.def

Description:
EJ IT5 - Change "EJ UPLOAD IS IN PROGRESS" to "EJ UPLOAD MAY BE IN PROGRESS" in Resrvd.def



Summary:
GBNA - note sorting Encashed Counts Do Not Match Physical Cash in Cassettes

Description:
When same note type goes into different LOGICAL cassettes (eg. under spillover case), Encashed Counts (CDI Store 3164) of one cassette being overwritten by encashed count of the same note type of another cassette.

Note: This issue only happens when note sorting feature configured with overflow cassette, under the following scenario:
Same note type is found in multiple LOGICAL cassettes.

Pls find attached the detailed description of the issue. Fix came from BeeLian



Summary:
TAR 320735 - System Escape when assesing GBNA's LastCashInStatus Property

Description:
A UEH occurs caused by the customisation layer when attempting to access the GBNA LastCashin status property.

This can occur in a number of ways.
1. the cardholder is teasing the GBNA pre-acceptor inserting/removing/inserting the notes until they cause a jam where the notes are jammed by the shutter and are on top of the rollers.
2. When notes are retracted and the shutter is held open - jamming the shutter open.

After discussions with AXFS engineering, AXFS cannot create the lastcashin object due to the state of the device (hardware error) and hence it is not possible to read the property of lastcashin status. The command fails and results in the Merror below.
The application VBscript workers should deal with the Hresult of the command completion to determine that something has went wrong with the device.





Summary:
TAR RFC 319165 - Improve GBNA skewed notes rejected screens and state flows

Description:
AA-NDC screens can be inappropriate and out of sequence when skewed notes are immediatley rejected:

1. Screen displays ?Please Insert Cash?

2. Insert skewed notes  (e.g T shape, one vertical and one horizontal) -> notes being pushed out but screen displays ?Processing Notes, please wait??

3. Do not remove the notes. 

4. After a while, screen changes to Please Insert cash again 

3. Then screen change to hardware error screen (with notes still at throat)

4. If notes removed while hardware error screen, shutter closed -> display Insert Cash again -> shutter open.

5. If notes not removed, application proceed to close state. Send W4 with severity 0 (with notes still at throat).

This TAR is requesting two changes:
 
1. Display "Please remove notes" for the whole time until notes are removed, following the skewed notes being returned (ie step 3)

2. If notes are not removed to retract them if retract option is on.

This issue can be difficult to recreate exactly as described as the sequence and timings of screens are not always the same, FGSC have logs for the followig behaviour:

1. Display Please Enter Notes
2. Insert Skewed notes (T Shape, one horizontal, one vertical).
3. Display Processing Notes
4. Device returns notes, shutter is open.
5. Display Please Enter notes (the notes are still not taken and are at the exit slot) 6. Device pushes notes out a little further, shutter is open.
7. This is where the screens can be different -
7.1 Please Enter notes or,
7.2 Hardware malfunction.
8. Take Notes
9. Display Please Take Notes
 
in one case, at this point the shutter closed after taking the notes and then displayed Please Enter notes for about 5 seconds then switched to Please take notes.




Summary:
Remove need for manual edit of registry to map XFS errors to Mstatus GBNA/BNA

Description:
PS have raised a concern over the NDC mapping of XFS errors 
E.g the logs below: 

SEACust.. 19:03:57.328 Error.Description : Device:
BillAcceptor1,Description: CashInEnd; Cash In has not active 
SEACust.. 19:03:57.390 Error.Category : 4 
SEACust.. 19:03:57.453 Error.result (Vendor Specific, May be NULL) : 
SEACust.. 19:03:57.515 Error.WorkStationName : 
SEACust.. 19:03:57.562 Error.WOSACommand (The Wosa command that caused this
error) : 1303 
SEACust.. 19:03:57.656 Error.WOSAError (CEN XFS) : -1326 
SEACust.. 19:03:57.703 <<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>> 
SEACust.. 19:03:57.765 MStatus : 26 

-1326 is WFS_ERR_CIM_NOCASHINACTIVE (-(CIM_SERVICE_OFFSET + 26)) 

This is mapped to Mstatus 26 is 'Shutter module error' with Severity 4. 

It looks like PS are be using the default BNA mapping (detailed below) and
have not edited the registry as detailed in the defaul reg file supplied
with NDC. 

It is not clear where this requirement to edit the registry is documented
and why it cannot be configurable. Engineering have suggested the following
as a way to avoid this manual change: 

"Since there was no way we could identify whether a device is a gbna or a
bna earlier I think default bna mapping was put in the registry. 
I think we should make use of 3.0.1 fix which identifies the correct variant 
on the machine to use the correct registry setting for NDC Mstatus
Mapping." 



[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\XFSMstatus] 
;This Mapping is for BNA Device. If GBNA Device is used, GBNA XFSMStatus
Mapping needs to be uncommented and BNA XFSMStatus Mapping needs to be
commented. 
"-54"="2,4" 
"-14"="1,4" 
"-15"="1,4" 
"-52"="7,0" 
"-53"="2,4" 
"-1300"="6,4" 
"-1302"="25,4" 
"-1307"="15,2" 
"-1308"="29,4" 
"-1310"="1,4" 
"-1312"="29,4" 
"-1313"="29,4" 
"-1314"="29,4" 
"-1315"="25,4" 
"-1316"="25,2" 
"-1317"="1,4" 
"-1318"="1,4" 
"-1319"="29,4" 
"-1325"="24,4" 
"-1326"="26,4" 
"-1328"="29,4" 
"-1334"="25,4" 
"-1335"="25,4" 

;The Following XFSStatus Mapping is used for GBNA. If a GBNA Device is used
the following mapping should be uncommented and the BNAXFSStatusMapping need 
to be commented. 
;[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\XFSMstatus] 
;"-1300"="19,2" 
;"-1307"="17,1" 
;"-1312"="26,4" 
;"-1313"="22,4" 
;"-1314"="23,4" 
;"-1319"="26,4" 
;"-1316"="5,2" 
;"-53"="50,4" 




Summary:
IT - Dual Disepnser - With C1/C2 header fixes SOH display still incorrect at Start of Day

Description:
This is because the SOH display is updated for CDM1 before it knows if there is a CDM2 - need to restructure so
1) pointer for CDM1 and CDM2 obtained
2) SetNextCDMPointer called
3) Initialise on each CDM called



Summary:
IT - Dual Dispenser- Seperated counters allows > 65534 notes to be entered into each cassette type 

Description:
Should allow a max of 65534 notes in TOTAL across the 2 CDMs

This is because of the restriction in what can be displayed and calculations done up to 65535



Summary:
TAR 319600 - Predial is not performed if no magnetic read condition is satisfied

Description:
 As discussed, there is not pre-dial function performed in AA-NDC 03.00.02 if 
   the magnetic Read does not find a FIT match. 
   
   This means that a Smart card may fail because the dial up has not been
   performed unless there is both a valid read and a valid FIT for the Track 2
   data, even though this is not going to be used in the transaction.




Summary:
IT4 - Add Cash crashed with unconsumed signal

Description:
Problem with TAR fix integration for TAR 318931



Summary:
Provide a component overview CHM for Advance NDC

Description:
Provide a package overview CHM (APTRAca10.chm) for Advance NDC in the APTRA on-line documentation, similar to the APTRA Edge overview, to replace the Advance NDC Package document provided on CD-ROM.



Summary:
Update and incorporate the white papers into publications

Description:
Update and incorporate the white papers into publications



Summary:
Fill IP gaps identified from the Technical Audit (2004) and Global Learning needs task analysis (2005/06)

Description:
Fill gaps identified from the Technical Audit (2004) and Global Learning needs task analysis (2005/06).  For details, see Appendix B, ¿Audience/Task Analysis¿ in the IP Plan (Ref 24).



Summary:
Removal of redundant NDC material, particularly from the Reference Manual and minor restructuring where possible

Description:
Removal of redundant NDC material, particularly from the Reference Manual and minor restructuring where possible.



Summary:
EJ - IP UPDATE - Search By Date - Clarify that this option only displays 10 files per given date

Description:
So if more than 10 files exist for a single day/date then search by extension needs to be used



Summary:
EJ IT3 - RCOPY - After RCOPY complete with Multi Backup should return to RCOPY menu not Replenish Menu

Description:
EJ IT3 - RCOPY - After RCOPY complete with Multi Backup should return to RCOPY menu not Replenish Menu



Summary:
EJ - IP UPDATE -Add to IPs that if Machine Number changed, EJ Backups with old Machine numbers will no longer be available

Description:
Should state that old backups should be deleted by toggling Multiple Backups off and then on again before changing the Machine number



Summary:
EJ IT3 - RCOPY - MULTI DEST - Search - If machine number changed should not allow search of files from previous number

Description:
EJ IT3 - RCOPY - MULTI DEST - Search - If machine number changed should not allow search of files from previous number



Summary:
GBxx Config Utility shows wrong Successful screen.

Description:
It tries to show P85 when it should show P92.



Summary:
EJ IT3 - DISP CONFIG - Move EJ Multiple Backup etc. to 2nd Screen

Description:
Overwritten when one of the DISP CONFIG options taken. Need to change this but requires the Statement Length configuration to be completed first.



Summary:
EJ IT3 - RCOPY - MULTI DEST - Search by Extension Number - Cancel returns to configure menu - should return to EJ Options Menu

Description:
EJ IT3 - RCOPY - MULTI DEST - Search by Extension Number - Cancel returns to configure menu - should return to EJ Options Menu



Summary:
EJ IT3 - RCOPY - MULTI DEST - Select number not listed - Says INVALID and then returns to PREVIOUS MENU - Should Remain on same menu

Description:
EJ IT3 - RCOPY - MULTI DEST - Select number not listed - Says INVALID and then returns to PREVIOUS MENU - Should Remain on same menu



Summary:
EJ IT3 - RCOPY - MULTI DEST - Select number not listed - Says INVALID FUNCTION - Should be INVALID VALUE

Description:
EJ IT3 -  RCOPY - MULTI DEST - Select number not listed - Says INVALID FUNCTION - Should be INVALID VALUE



Summary:
EJ IT3 - When EJ Disabled (Journal Only) - Multiple Backups should also be disabled

Description:
EJ IT3 - When EJ Disabled (Journal Only) - Multiple Backups should also be disabled



Summary:
EJ - IP UPDATE -When Error Message "INSUFFICIENT HARD DISK" is seen (e12) on an INIT need to inform user what to do next

Description:
When Error Message "INSUFFICIENT HARD DISK" is seen (e12) on an INIT need to inform user what to do next



Summary:
EJ - IP UPDATE - No of Backups value maintained over toggles of Multiple Backup

Description:
1.	No. Of Backups correctly changes from eg 1000 to NA in Configuration Data displayed when changing from multiple to standard.  A subsequent change back to multiple when No. of Backups is not entered (ie user wishing default of 10) results in last configured No. of Backups set.  In this example No. of Backups = 1000. This behaviour is correct but needs an update to the FS and the IPs



Summary:
TAR 319144:  "receipt not configured message" sent after each cpm transaction

Description:
See TAR



Summary:
IT - Enhanced EJ. Attempting to write to the CD drive when it is empty results in COPY TO FLEX FAILED being displayed

Description:
Attempting to INIT EJRNL or RCOPY to the CD writer when there is no disk in it results in COPY TO FLEX FAILED error message being displayed. Do not think this is appropriately descriptive.

Related to GR1T 335209 - IT - Enhanced EJ.  All errors displayed for issues copying to flex disk are the same



Summary:
IT - Enhanced EJ. Attempting to write to Network Drive after removing network cable results in COPY TO FLEX FAILED displayed.

Description:
Selecting Network drive as the target destination for INIT EJRNL & RCOPY when the network cable has been removed leads to a COPY TO FLEX FAILED error message being displayed. Do not think this is an appropriately descriptive message.

Similar to GR1T 335209 - IT - Enhanced EJ.  All errors displayed for issues copying to flex disk are the same.



Summary:
IT-Supervisor crash when trying to Disp Config from Set Max Statement Length option of Configure Menu

Description:
When trying to press Disp Config option from Set Max Statement Length
the supervisor app crashed.
Please check for the event log in attachments.



Summary:
TAR 321214:  statement printer document always captured in close state

Description:
  Issue described below on NDC 03.00.02. FGSC also recreated on 03.00.02 and
   03.00.00. Customer is sure this is not on 2.6.xx
   
   Statement printing via function ID Q, the statement is printed but is
   immediately retracted in the close state when the card is removed.
   Timer 95 does not start.
   It seems to be because TOP flag is set.
   
   When I tested, I recreated with the customer message and NDCmess message
   (Func ID Q).
   However, you need a FF at the end of the message for this to happen but it
   should not cause a problem because:
   
   "FF - Causes a feed to black mark, cut and deliver to customer."
   
   I attach my logs and the customers debug log.
   I also have a good PD trace from the customer if that's more useful:
   
   CustomL.. 09:30:57.092
   **********************************************************
   CALLING CLOSE STATE EXIT
   **********************************************************  
   <wid>2s1914g220</wid>
   
   CustomL.. 09:30:57.923 GBNA.DeviceStatus in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.933 BNAFitness.Data in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.943 NotesAtThroatFlag.Data0
   CustomL.. 09:30:57.953 Deactivate in CheckFatal ActiveScriptHost
   CustomL.. 09:30:57.994 Statement Close State TOP [1]
                         Printed [1] 
                         Pages [1]
                         Lines [0]  
   <wid>38n5927dc129</wid>
   
   CustomL.. 09:30:58.014 Card taken  
   <wid>4l1235y27</wid>
   
   CustomL.. 09:30:58.024 Card Ejected Flag - 0  
   <wid>1s1356g219</wid>
   
   CustomL.. 09:30:58.034 No Card Eject Detected  
   <wid>0s1356g219</wid>
   
   CustomL.. 09:30:58.184 Starting Timer 2 [09:30:58]  
   <wid>10l1233y27</wid>
   
   CustomL.. 09:30:58.204 Attempting Statement Capture...  
   <wid>25n5927dc129</wid>
   
   CustomL.. 09:31:01.969 Statement captured in Close State  
   <wid>27n5927dc129</wid>
   
   CustomL.. 09:31:02.200 Timer 2 expired [09:31:02]  
   <wid>5l1233y27</wid>
   
   CustomL.. 09:31:02.210 Waiting for statement tidy-up to complete...




Summary:
TAR 319600 - Predial is not performed if no magnetic read condition is satisfied

Description:
 As discussed, there is not pre-dial function performed in AA-NDC 03.00.02 if 
   the magnetic Read does not find a FIT match. 
   
   This means that a Smart card may fail because the dial up has not been
   performed unless there is both a valid read and a valid FIT for the Track 2
   data, even though this is not going to be used in the transaction.




Summary:
TAR 318298:  Second nested screen not shown in card before cash transaction with no card in

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a dip reader or motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.


TAR 000000318298 HISTORY SEQ: 2  Transaction date: 02/17/2006 10:03:44------------ TAR Transaction Entered by: Bell, Colin
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Additional information from customer.

Fix is required for both multi vendor and single vendor, however the single vendor issue would seem to be more important at this time.

If fix is an authoring one, authoring instructions are the prefered fix rather than files.




Summary:
IT_The Counts were not proper when the notes were Retracted.

Description:
During retract success operation the counts where not proper.



Summary:
IT_GBNA.INI file implementation needs to be updated in Print Counters asswell

Description:
The GRIT 326796 Include customisation for note denomination sorting in Host message in 3.01 change need to be implemented in the Print Counters Area aswell



Summary:
IT - Dual Dispenser code inspection - Fault display headers specify CDM 01 on single dispenser

Description:
Spotted in coded inspection as part of GRIT fixing exercise - this needs updated so that the CDM number is not specified for a single dispenser



Summary:
TAR RFC 315152 - Can we develop a txn reply func id to parallel encash print and next state

Description:
To be considered initially to be developed as a customization PS can use.  Review planned in April. Parallel printing a more realistic option than parallel next state. Mike to find out if Chong will accept a new function id.




Summary:
TAR RFC 315152 - Can we develop a txn reply func id to parallel encash print and next state

Description:
To be considered initially to be developed as a customization PS can use.  Review planned in April. Parallel printing a more realistic option than parallel next state.



Summary:
IT - Dual Dispenser test 4.2.2.9 - PRINT SUPPLY Displays C% in header - Retest on Single Dispenser

Description:
Update to code to only run throught CDM1 implementation on single dispenser

This should have no visible effect but needs to be retested to ensure that the correct supplies are printed on single dispensers - GRIT 335636 will cover this for dual dispensers



Summary:
TAR RFC 313868 Request for BNA counters in replenishment to display only active currencies

Description:
Request is that the BNA Counters (Option 3 in the Supervisor Replenish Menu) should only list details of the active currencies rather than the current 13 screens (50 currencies), as the Print counters option works



Summary:
TAR 323730 - Provide capability to display and print separate notes counts and totals per cassette per machine

Description:
SEA have done a customisation to display and print counts by cassette and by denom within that cassette. This is a requirement from several BNA users.




Summary:
TAR 321559 - Provide means to ensure that BNA Encash Counter is equal to Host Counter

Description:
RFC to be scoped for GBNA component



Summary:
IT - Wrong code for INIT BNA in supervisor

Description:
The init bna code in supervisor is wrong. it is the same as in customisation layer. this needs to be changed. there are places where the application is sending cancel message to the host from supervisor. also there is a Time out exit state code. this is not correct in supervisor and must be removed



Summary:
TAR 319533 - AA-NDC: Unsol Dispenser status messages cause extra dial up

Description:
AA-NDC 03.00.02 with dial up comms
   
   When a transaction reply function to dispense cash causes an unsolicited
   dispenser status message to be sent, for example reporting cash low, this is 
   then sent on every following dispense transaction until cash out or
   replenishment action takes place.
   
   The message is sent following the RDY9/B to the transaction reply
   
   When dial up comms is in use, the RDY9/B acts as a final message and the
   connection is disconnected. The unsolicited status message then causes a new 
   connection to be made to send the message.
   
   Many customers pay for the telephone connection on a per call basis, and
   this increases their telephone costs.
   
   In NDC+, the message is sent prior to the RDY9/B, so there is no extra call
   made.




Summary:
TAR 321521: NDCCardHolderDataCollector unable to display screen numbers greater than 255

Description:
We have a problem with NDCCardHolderDataCollector.
It has problem displaying screen number > 255.
When it calls screen number > 255, it did not display the correct screen number.
Eg. when we call screen 946, it displays screen 178. 
We believe the problem was caused by the  conversion of integer to unsigned char. 
Note: For the above example, (unsigned char)946 = 178.
We believe that this problem exists even in the older version of NDCCardHolderDataCollector. Just co-incidentally all these while our screen number < 255.





Summary:
TAR 320974:  Maximium of 64 touchscreen workers supported in Virtual Keyboard workgroup

Description:
  A problem has been found with AANDC 3.0 in that in NDC Data Collector, the
   Data Keys workgroup no longer allows Touch Keys to be placed inside. 
   
   Customer needs to place the complete Alphabet set as Touch Keys in this
   workgroup so that the input can be picked up and shown in the Front Echo
   Store. 
   This was previously supported in AANDC 2.3. 
   
   Cusotmer had tried a waorkaround of placing each individual Touch Key in a
   workgroup and used an Assigner to manually assign each Alphabet when a Touch 
   Key is pressed and loop back. 
   However an error is returned in that too many Touch Keys are being
   activated. This was found by engineering to be due to the fact that there is 
   a limit on the number of touchscreen workers supported in the Virtual
   Keyboard workgroup. This is currently limited to 64.
   
   Engineering/ COE have resolved this direct with customer. TAR has been
   raised to provide correct route og engineering fix to customer.




Summary:
TAR 319597 - AA-NDC: Card bin threshold is not displayed in Device Error list.

Description:
Card reader bin thresholds are not reported in the Device Error list.
The IDC SP will fire a RetainBinThreshold Event for when the card bin is
aproaching nearly full and also full.
However, this status is not reflected in the Device Error List in AA-NDC
(can be accessed from the Select Menu in superviaor - menu option 26).

Customer requires this status to be shown so that the normal replenishment
process can take place.

Issue is escalated as for acceptance of the application at PKO BP all issues 
must be resolved. 
Request for ETA for fix to be supplied to the customer as soon as possible.




Summary:
TAR 319552 - Terminal command get h/w config does not return class for 5887 and 5362

Description:
   When sending a get config message to the ATM (1???71) the ATM sends a 00
   in the field denoting the hardware model for a P87 and an EP62. 
   (Just the same as TAR 309997)



Summary:
TAR 319533 - AA-NDC: Unsol Dispenser status messages cause extra dial up

Description:
AA-NDC 03.00.02 with dial up comms
   
   When a transaction reply function to dispense cash causes an unsolicited
   dispenser status message to be sent, for example reporting cash low, this is 
   then sent on every following dispense transaction until cash out or
   replenishment action takes place.
   
   The message is sent following the RDY9/B to the transaction reply
   
   When dial up comms is in use, the RDY9/B acts as a final message and the
   connection is disconnected. The unsolicited status message then causes a new 
   connection to be made to send the message.
   
   Many customers pay for the telephone connection on a per call basis, and
   this increases their telephone costs.
   
   In NDC+, the message is sent prior to the RDY9/B, so there is no extra call
   made.




Summary:
TAR 316161 - Shift out character at the end of a screen data causes app core to crash

Description:
Screen data defined as follows

121<si>ABBLAHBLAH<so>

i.e. a shift out at the end of screen data (known to be incorrect usage of the <so> character) will cause the application core to crash with the error "Abnormal Program Termination"
Although the data was clearly incorrect, the application should handle this more gracefully, e.g. reject screen data download message or alter screen data removing the shift out character.




Summary:
TAR 318838:  AA-NDC rejects messages from dial up if the headers are defined and not blank

Description:
The validation of headers in AA-NDC dial-up processing is unclear. The documentation defines that if a header is defined, it should be "Y" or " "
followed by spaces.

The processing in the UK and US have followed different paths. US have taken the fact that a header is defined as indication that it will be present on all messages and therefore they always remove the 8 bytes after checking the first byte. This means that the remaining seven bytes can hold any data that a customer may wish to use, as was anticipated in the header description ("reserved for future use"), but it ignores the defintion that the last seven bytes should all be set to " ". 

The UK processing has assumed that the header is optional and it validates that the header is in precisely the format defined and any other value is treated as data for the application, which will then reject the message.
This ignores the fact that setting the header option is defined as requiring the header to be present.

As a compromise, it has been suggested that the first byte should be checked for "Y" or " ", which are only valid for headers. If this is found, the 8 bytes are removed. If not, then the data is forwarded to the application.

This is raised as an RFC, but depending on the outcome of discussions with the customer in the US who discovered this, a resolution is likely to be required as we have changed the processing from the earlier US NDC+ processing which the US has been using for some considerable time.




Summary:
Depository Bin Removed/Inserted unsols sent to host but not printed to Journal

Description:
Removing/inserting the depository bin leads to this sensors unsol being sent to the host:

12<fs>000<fs><fs>P101111x011111 (x = 0,1 depending on removal or insertion)

This message is NOT printed to the journal. Only the time stamp and DEPOSIT BIN REMOVED/DEPOSIT BIN INSERTED are printed to the journal. Debug Logs attached.



Summary:
Depository Bin Removed/Inserted unsols sent to host but not printed to Journal

Description:
Removing/inserting the depository bin leads to this sensors unsol being sent to the host:

12<fs>000<fs><fs>P101111x011111 (x = 0,1 depending on removal or insertion)

This message is NOT printed to the journal. Only the time stamp and DEPOSIT BIN REMOVED/DEPOSIT BIN INSERTED are printed to the journal. Debug Logs attached.



Summary:
TAR 318931 - AANDC 03.00.02 - Exchange screen for NCR hardware should not be displayed  

Description:
As agreed in a meeting with the AA-NDC team the Exchange screen is not
expected on NCR hardware and should be removed. 

Agreed actions were as follows:- 

Change P73 screen to please wait 
take out need to press enter 

The preferred form of the fix for this issue is authoring instructions.




Summary:
IT - Dual Dispenser test 4.6.4.2 - Note counts intermittently invalid when opening safe door during dispense

Description:
Whilst performing this test it was noticed that after running the tests on both CDMs that the note counts had become invalid - it could possibly have been this test in combination with 4.6.4.1 however.

This was noticed intermittently during the transaction tests (note counts becoming invalid) but I believe this test is the main one in which it is possible to get this issue to arise



Summary:
TAR 318926 - AA-NDC 03.00.02: Cash counters not decrmented correctly

Description:
Poland have reported an issue with cash counters as described below that is
preventing them from delivering application to customer. They must deliver
software to their customer by 6th March. This issue has been recreated by
FGSC. 

Software used by customer when issue seen: 
AANDC 3.0.2 (but observed also in 3.0.0) 
XFS 4.2.1 (but observed also in XFS 4.2.0) 
EMV 2.0.1 

------- 
Recreation Procedure (as documented by Poland): 

1. Do STD_CASH to set cassettes counters. 
2. Do Card Before Cash transaction. OPEN THE SAFE (interlock switch
disconnect 
currency dispenser power) when cash is stacked and cardholder card is
presented 
to cardholder. DO not take card - just open safe. Then take card.
Transaction is 
cancelled due to hardware issue. 

3. We have tested with 1 note dispensing both from cassette type 1 and 2. 
4. Enter supervisor and prints counters. What happened: 
- there were added 2 notes to type 1 and 4 notes to type 2 to
postion 
REJECTED 

5. In AANDC 3.0.2 additionally counters IN CASSETTE, SUMMARY are blanked. 

We see in AANDC 3.0.0 that counter SUMMARY are increased!!! by values that
were 
requested to dispense multiple by 2. 
------- 

------- 
FGSC testing with vanilla software and NDCmess message file: 

I have tested with AA-NDC 03.00.02 & XFS 04.02.00 (no EMV software installed 
since that should not impact the results) on a p75 with 4G dispenser (fitted 

with firmware PROMs 009-0017200 & 009-0014058). 

I did further testing today and I can confirm that I definitely see the
issue. I ran 4 tests where I tried to dispense one Type 1 and one Type 3
note. After each 
test, I checked the actual number of notes purged (2) and when I selected
Print Counters it reported that a total of 6 notes had been rejected (3 x
type 1 and 3 
x Type 3). I have also captured driver and service provider logs for my
recreation to determine where the problem lies. On analysing these logs,
there was no evidence of a problem at a driver or sp level, so the issue
seems to be within AA-NDC. 

Testing by using Std Cash or Add Cash still results in the issue being
seen. 
-------- 


Logs from Poland and FGSC problem recreation supplied to Ranjith Suresh &
Euan Pattullo. Sample printout of counters showing problem also provided to
engineering 

Stefano Cipollone is also aware of the issue.




Summary:
IT - Dual Dispenser test 4.5 - Simulate Supervisor Entry/Exit not working

Description:
With option 33 set to it's default (to simulate entry and exit to supervisor), when the transaction completes no messages should be sent to the host until the safe door closes.

However the P21, R09 and P20 messages are sent at the end of the transaction regardless - this is incorrect



Summary:
IT - Dual Dispenser test 4.3.4 - Incorrect cassette status entries displayed on EOP

Description:
Didn't run test exactly as stated -
The test states to remove Cass 1 from CDM 2 and set Cass 1 on CDM 1 to low - this works ok and low condition fro Cass 1 on CDM 1 reported correctly on SOH
However if CDM 2 Cass1 is re-inserted and CDM 1 Cass 1 is run empty, the empty condition is not reported and the SOH continues to indicate a low condition on CDM 1 Cass1

Additionally, if dispensing from e.g. CDM 2 Cass 4 with CDM 1 Cass 4 removed then SOH reported a Cassette Error on CDM 1 Cass 4 rather than Cassette Removed



Summary:
IT - Dual Dispenser test 4.3.3.5, 4.3.3.12 and 4.6.2.1 - Blocking shutter opening results in successful present 

Description:
If the shutter is blocked from opening and the notes cannot be presented, MEI still flashes and Take Cash screen displayed even though it is not accessible

I would suspect this is an SP or driver issue but GRITed here until more info is obtained and feedback from relevant people

Strange effect seen with test 4.6.2.1 where above senario experienced but additionally POSSIBLE TAMPERING displayed and SST went into suspend due to this after the NEXT transaction....



Summary:
IT - Dual Dispenser test 4.3.3.3 - Delay with MEIs starting and stopping

Description:
There seems to be a noticible (enough) delay after notes have been presented and the MEI to start flashing to raise this issue. 

Also if a retract occurs the MEI continues to flash after the shutter door is closed and until the notes have reached the purge bin 



Summary:
IT - Dual Dispenser test 4.2.2.11 and 4.6.5 - STD CASH using combined counts results in blanks being displayed

Description:
Running this test resulted in blanks for Cassette, Remaining and Total indicatinginvalid values with the counts. I think this is different to GRIT 335628 



Summary:
IT - Dual Dispenser test 4.2.2.9 - PRINT SUPPLY Displays C% in header

Description:
This is in addition to GRIT 335633 when printing the supplies the title is displayed with C%



Summary:
Problem with the CountLines method

Description:
Receipt gets cut too early. One of the reasons the countlines does not work is when multiple print data of length equal to the line width. There can be other scenarios and need to investigate further



Summary:
IT - Dual Dispenser test 4.2.2.8 and 4.2.2.9 - DISP SPPLY / PRINT SUPPLY displays screen no.s rather than the screens themselves 

Description:
If DISP SPPLY or PRINT SUPPLY selected it displays/prints screen no.s only e.g S57



Summary:
IT - Dual Dispenser test 4.2.1.3 and 4.2.14 Display/Print blanks

Description:
When performing a DISP CASH (or PRINT CASH) after an ADD CASH and Seperated counters are specified, Cassette, Remaing and Total values are displayed as blanks indicatin invalid amounts

I believe this one is probably an integration issue due to a TAR fix that checks for invalid values - this TAR fix will work ok when counters are Combined but not Seperated



Summary:
IT - Dual Dispenser test 4.2.1.2 printing incorrect headers

Description:
When adding cash, the journal trace should appear as C1 CASH ADDED or C2 CASH ADDED - it actually appears as T80CASH ADDED or T81CASH ADDED



Summary:
BNA/GBNA - Provide more detailed mstatus and mdata information for BNA and GBNA

Description:
BeeLian has highlighted that she needs to update the EvalMData method with every release of AANDC. This is to add more mstatus and mdata info for the GBNA based on the error.result info. Need to see if we can add code to do this for both BNA and GBNA, and use the registry settings for non-NCR SSTs only.



Summary:
IT-set cash makes supervisor crash.

Description:
When seeting the cash with Set cash function in Configure menu.The Supervisor got crash when cancel is pressed.




Summary:
IT-Supervisor crashing after entering config menu \disp config when length key is removed the supervisor is crashing. 

Description:
When removed the length key from the Statement Printer registry.There is a  supervisor Crash observed when goign into Disp config menu of Configure Menu.
Please check with the attached Log file.



Summary:
IT-Length Value is not set to default when length is to set to 00  in Statement printer.

Description:
When the Registry key value is set to 00.And initiated a statement transaction. the length is not set to default value(12).



Summary:
IT - Enhanced EJ - Incorrect resrvd.def file included in IT3

Description:
In the configure menu, the '34 EJ OPTIONS' entry is no longer present. It was there in IT2.



Summary:
Customisation Layer crash

Description:
Customisation Layer crashed and genereated  an error in VB script runtime when sending the message SETCLOS1.



Summary:
Journal printer in relation with BNA1

Description:
The data ("The Last Deposit Direction is set to 1 ¿ vaulted.")to be processed and printed on the journal when a transaction reply message is sent from host to terminal during a deposit cash transaction is not printed.



Summary:
Supervisor crash when accessing WOSA Description property of XFSErrorEvent

Description:
the error is at the following line in setcurrency activescript host in supervisor Project.
Debug ( " WOSA Description " & Error.WOSADescription)

Description
Returns the CEN XFS vendor-specific description of the error in the CEN XFS command (if any) or the contents of the CEN XFS event notification. The default is an empty Byte[]if not used.
Initial Value: Vendor-dependent.
This mError can be stopped using on Error Go to or by commenting the line above.
Note: The same change needs to be applied in the following Activescripthost too 
         Set Denom Config Types(11n6951dc129)




Summary:
IT - VPIComms.cpp access violation 

Description:
Seen on Fingerbob while performing EJ testing. Scenario - journal fatal and EJ set to disk, Start apps in Supervisor mode and EJ logs already present (attached). No UEH produced

Issue seen when first H1 message send in that Supevisor crashes. Issue is something to do with comms failing (need Catherine to clarify what has changed with comms on here return) but also vpicomms.cpp needs to check for null pointers at end of the SendVPIMessageToHost function which is the reason for the access violation



Summary:
TAR 315854 - GetCount terminal command causes system escape on SST with no dispenser

Description:
I have a couple of questions on this.
Why does this mError function generate an error when all the parameters passed to it are correct (all are #defines and correct according to all the 3 declarations of mError Function)
I¿d assume this has been left in from the 1st releases of ANDC where the SST had to have a Currency Dispenser or we¿d deliberately reboot ¿ this is now no longer the case
What does the mABORT_APP parameter of the mError function do? Does it terminates further processing of the function or terminates the application?
It terminates the application
Does the mError function helps us in exiting the function? i.e. will the GetInteger function exit from this point or will it process all the other line ahead?
As above ¿ the application will terminate at the mError line
If the remaining part of function is processed then there will be another system escape in the following line
hr = cashHandler->GetInfo(WFS_INF_CDM_CASH_UNIT_INFO, NULL, &pWFSResult);
 as the cashHandler pointer is Null.

We tried to comment out the line mError ( REV_INFO, mABORT_APP, mBASIC_ATM_ERRORS, CASH_HANDLER_INTERNAL_ERROR );
And changed the if condition below
Previous code

if (0 > mCassetteTypeMapper::GetXFSCassetteTypeNum (0)) // means it is not initialised

Modified Code
if ((0 > mCassetteTypeMapper::GetXFSCassetteTypeNum (0)) && (cashHandler != NULL)) // means it is not initialised
Couple of things here
Check for NULL best to be first
You¿ll have to think about what we return in this scenario as the function returns a long

Everything works fine with this change but we are not sure what is happening with the mError function.




Summary:
IT-Supervisor escapes while  INIT BNA option is selected in BNA2.

Description:
IT-Supervisor escapes while performing INIT BNA in BNA2.The event viewer shows the following error.
The error is near line number 3 of Script Host Worker ID: 192n5304dc128.
VBScript has given the following error description:
	'CanRetract Property'
The Source of the Exception is
	'ActiveXFS.CashIn.1'
Script is:
'ProcID**activate**END
Sub activate()

    If GBNA.CanRetract = True And RetractFlag.Data = 1 Then 
    
            Debug( "CanRetract = True,Do retract" )
            ActiveWorkGroup.Index = 1            </FREE>



Summary:
IT - Enhanced EJ.  All errors displayed for issues copying to flex disk are the same

Description:
IT3 build.  When no disk present, disk is read only, disk is full, etc, the error displayed is the same (Copy to Flex Failed).  No information about what the problem is is given eg Disk is write protected, disk is full, no disk present.



Summary:
IT - Enhanced EJ.  Selecting invalid value for destination when multiple enabled results in Invalid Value flashed quickly

Description:
IT3 build.  As per summary.  Invalid value can be seen flashing up but quickly disappears.



Summary:
IT - Enhanced EJ.  Option 34 Configure EJ no longer appears on the Configure Menu

Description:
IT3 build of ANDC 3.01 - Function 34 for Enhanced EJ configuration is not visible when the Configure Menu is displayed.  The function is active and selectable. 



Summary:
Printing Reciepts while application is in remotession and settlement

Description:
Application is prining Reciepts if settlemet transaction is done from remote session.It should print on Journal only.



Summary:
F8 Key press in Diagnosys application causing appliation goiing to normal mode

Description:
If F8 key is pressed in diagnostic application while supervisor application is in Remote session. Application is going out from supervisor mode	



Summary:
TAR 321521: NDCCardHolderDataCollector unable to display screen numbers greater than 255

Description:
We have a problem with NDCCardHolderDataCollector.
It has problem displaying screen number > 255.
When it calls screen number > 255, it did not display the correct screen number.
Eg. when we call screen 946, it displays screen 178. 
We believe the problem was caused by the  conversion of integer to unsigned char. 
Note: For the above example, (unsigned char)946 = 178.
We believe that this problem exists even in the older version of NDCCardHolderDataCollector. Just co-incidentally all these while our screen number < 255.





Summary:
TAR 321521: NDCCardHolderDataCollector unable to display screen numbers greater than 255

Description:
We have a problem with NDCCardHolderDataCollector.
It has problem displaying screen number > 255.
When it calls screen number > 255, it did not display the correct screen number.
Eg. when we call screen 946, it displays screen 178. 
We believe the problem was caused by the  conversion of integer to unsigned char. 
Note: For the above example, (unsigned char)946 = 178.
We believe that this problem exists even in the older version of NDCCardHolderDataCollector. Just co-incidentally all these while our screen number < 255.





Summary:
IT-Customisation Layer Crashing when during Encash

Description:
The Customisation Layer is Crashing during Encash 

Eventvwr logs the following Error :
 The error is near line number 722 of Script Host Worker ID: 227n5304dc128.
VBScript has given the following error description:
 Object required: 'CassConfSeq.Data''



Summary:
Sending CBCASH message from NDCHOST is not giving the error severity correctly.

Description:
 Sending CBCASH from host should report first time error severity as ROUTINE,then warning and finally fatal.But currently it is sending always error severity as fatal.



Summary:
IT - Comma text and box for primary and secondary number entry should be right aligned

Description:
The comma text and box on the primary and secondary number screen should be right aligned to the edge of the screen.  It is currently a few columns away from the edge of the screen..




Summary:
IT - Entering primary and secondary numbers should not need an Enter after each number

Description:
Each key supports only one character therefore unlike the other menus, the enter to accept is not required




Summary:
IT - Enhanced EJ.  No way of user knowing whether multiple destination is enabled or not

Description:
Apart from interrogating the registry key, there is no way for user to know whether multiple destinations is enabled.

The screen displayed whe Multiple Destinations option is selected does not give details of the current mode. 



Summary:
IT - Some Issues for GR1T 327242 - Enable alphanumeric character entry for some Dialup fields

Description:
Attached file details some issues found during the testing of GR1T 327242



Summary:
IT-System Escapes when CLR BNA (53) option in Replenish Menu is selected.

Description:
The supervisor crashes when CLR BNA (53) option is selected from the Replenish Menu

Event Log shows the following description :

The error is near line number 33 of Script Host Worker ID: 139n5281dc128.
VBScript has given the following error description:
	'Type mismatch'
The Source of the Exception is
	'Microsoft VBScript runtime error'




Summary:
TAR 319810: Clear key unable to signal key pressed when shared in a NDC Data Collector

Description:
When using an XFS Front key worker in the NDC Data Collector workgroup "Data", if the key is shared to a concurrent work group such that workgroup can respond to the key press it has been found that though this works for numeric keys, this does not work for the clear key.





Summary:
TAR 319810: Clear key unable to signal key pressed when shared in a NDC Data Collector

Description:
When using an XFS Front key worker in the NDC Data Collector workgroup "Data", if the key is shared to a concurrent work group such that workgroup can respond to the key press it has been found that though this works for numeric keys, this does not work for the clear key.





Summary:
IT-System Escape  DISP CNTRS option is selected in Replenish Menu 

Description:
When the DISP CNTRS is selected from Replenish Menu in Supervisor Mode the Supervisor is Crashing 

Eventvwr logged the following Error: 

The error is near line number 25 of Script Host Worker ID: 38n5281dc128.
VBScript has given the following error description:
	'Object required: 'TotalNotesRejected''

Solution : 
It's a Integration Issue , we should have removed the line where TotalNotesRejected is  initialised to 0 since it's not used.



Summary:
IT - Enhanced EJ.  Sceeen STANDARD MODE ALREADY ACTIVE and MULTIPLE MODE ALREADY ACTIVE are never displayed

Description:
STANDARD MODE ALREADY ACTIVE and MULTIPLE MODE ALREADY ACTIVE screens are not displayed as expected (and as per documented in FS and IP).  When these modes are re-selected and the selected mode is already active, FUNCTION DONE is displayed. 



Summary:
IT - Enhanced EJ.  Selecting Cancel at "BACKUP FILES WILL BE DELETED" prompt returns user to CONFIGURE MENU

Description:
When changing mode from multiple to standard selecting cancel at the "files will be deleted" prompt returned me to the CONFIGURE MENU.  Would expect pressing cancel at this point would return to EJ BACKUP MODE menu or CONFIGURE EJ menu at least.



Summary:
New EJ String Stores missing from Variable Operator Text worker

Description:
The 'Config Data' Variable Operator Text worker 28l796y15 does not have the new EJ string stores EJBackupModeString and EJNoofBackupsConfiguresString resulting in a % neing displayed on completion of a Set Print, Set Cash or Set machine No.



Summary:
IT - Enhanced EJ.  Some updates required to supervisor screens

Description:
1.  SELECT FUNCTION is displayed for supervisor screens.  IP states SELECT OPTION should be displayed.  SELECT OPTION seems more correct in these instances
2.  When mode changed from multiple to standard, the screen warning that additional backup files will be deleted needs to be updated.  Use text detailed in the IP.
3.  When changing max number of backups to a lower value, the screen prompted should indicate the "OLDEST X BACKUP FILES WILL BE DELETED"  The screen actually displayed is the same as that displayed for changing modes and the X is not displayed indicating the number of files to be deleted.
4.  ENTER MAX EJ BACKUPS is detailed in the IP where MAX NO OF BACKUPS is displayed
5.  INVALID SELECTION, EJ MODE IS STANDARD detailed in the IP is displayed as EJ MODE IS STANDARD.  The displaying of the additional INVALID SELECTION is more correct as the user has selected an option which is not valid in this mode.
6. Screen m24 "SET EJ BACKUP MODE" should be "EJ BACKUP MODE"



Summary:
Too much debug logging delaying CustomisationLayer from starting

Description:
If the Debug window of DebugLog is open when starting the apps then there is an added huge delay due to extra debug logging such as

setcurrencyId(35) 515 
setcurrencyId(36) 516 etc etc

This needs to be removed - Note I created this on a DEV_PC using the simulator, note sure if this environment has been created on an SST



Summary:
IT - Enhanced EJ.  No Of Backups Registry not updated when mode changed from Multiple to Standard

Description:
Changing the mode from multiple to standard results in the information displayed/printed for DISP CONF and PRNT CONF being updated to NA for No Of Backups however the registry entry for this remains unchanged.  (Have still to test how this woks when journalling.)



Summary:
IT - Configuration Data Display/Print.  Second screen not available via display function but printed during print function

Description:
When DISP CONFIG is selected, the one screen configuration data is displayed with the SELECT FUNCTION prompt at the bottom.  PRNT CONFIG prints the same screen but also appends what used to be the second displayed screen with the coin hopper information.
IP details that both screens are always displayed and printed and that the PRESS ENTER FOR MORE prompt is displayed rather than SELECT FUNCTION.
Print configuration function and IP update required.



Summary:
Clear  BNA active scripts are escaping with a type mismatch

Description:
The Name variable now takes a string rather than an array. The line Name = GetDeviceNames needs to be removed as this allocates an array to Name after it has been allocated a string.



Summary:
TAR 321210:  Cash dispensed counter exceeding 5 digits will increase solic response length

Description:
Issue is as follows: -

- modified the CDI store for type 1 dispensed count to 99999.

- sent 1<fs><fs><fs>4 and received a message with the relevant counter showing 99999

- Modified the CDI store for type 1 dispensed to 100001, which has the same effect as actually dispensing 2 notes

- sent 1<fs><fs><fs>4 again, received a message with the relevant counter showing 100001 and an increase in message length of 1 character.

If at this point I looked in the supervisor app and displayed the counts the dispensed count was shown about 34465, however the main issue is the fact that the message has increased in length.





Summary:
TAR 321210:  Cash dispensed counter exceeding 5 digits will increase solic response length

Description:
Issue is as follows: -

- modified the CDI store for type 1 dispensed count to 99999.

- sent 1<fs><fs><fs>4 and received a message with the relevant counter showing 99999

- Modified the CDI store for type 1 dispensed to 100001, which has the same effect as actually dispensing 2 notes

- sent 1<fs><fs><fs>4 again, received a message with the relevant counter showing 100001 and an increase in message length of 1 character.

If at this point I looked in the supervisor app and displayed the counts the dispensed count was shown about 34465, however the main issue is the fact that the message has increased in length.





Summary:
TAR 321214:  statement printer document always captured in close state

Description:
  Issue described below on NDC 03.00.02. FGSC also recreated on 03.00.02 and
   03.00.00. Customer is sure this is not on 2.6.xx
   
   Statement printing via function ID Q, the statement is printed but is
   immediately retracted in the close state when the card is removed.
   Timer 95 does not start.
   It seems to be because TOP flag is set.
   
   When I tested, I recreated with the customer message and NDCmess message
   (Func ID Q).
   However, you need a FF at the end of the message for this to happen but it
   should not cause a problem because:
   
   "FF - Causes a feed to black mark, cut and deliver to customer."
   
   I attach my logs and the customers debug log.
   I also have a good PD trace from the customer if that's more useful:
   
   CustomL.. 09:30:57.092
   **********************************************************
   CALLING CLOSE STATE EXIT
   **********************************************************  
   <wid>2s1914g220</wid>
   
   CustomL.. 09:30:57.923 GBNA.DeviceStatus in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.933 BNAFitness.Data in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.943 NotesAtThroatFlag.Data0
   CustomL.. 09:30:57.953 Deactivate in CheckFatal ActiveScriptHost
   CustomL.. 09:30:57.994 Statement Close State TOP [1]
                         Printed [1] 
                         Pages [1]
                         Lines [0]  
   <wid>38n5927dc129</wid>
   
   CustomL.. 09:30:58.014 Card taken  
   <wid>4l1235y27</wid>
   
   CustomL.. 09:30:58.024 Card Ejected Flag - 0  
   <wid>1s1356g219</wid>
   
   CustomL.. 09:30:58.034 No Card Eject Detected  
   <wid>0s1356g219</wid>
   
   CustomL.. 09:30:58.184 Starting Timer 2 [09:30:58]  
   <wid>10l1233y27</wid>
   
   CustomL.. 09:30:58.204 Attempting Statement Capture...  
   <wid>25n5927dc129</wid>
   
   CustomL.. 09:31:01.969 Statement captured in Close State  
   <wid>27n5927dc129</wid>
   
   CustomL.. 09:31:02.200 Timer 2 expired [09:31:02]  
   <wid>5l1233y27</wid>
   
   CustomL.. 09:31:02.210 Waiting for statement tidy-up to complete...




Summary:
TAR 321214:  statement printer document always captured in close state

Description:
  Issue described below on NDC 03.00.02. FGSC also recreated on 03.00.02 and
   03.00.00. Customer is sure this is not on 2.6.xx
   
   Statement printing via function ID Q, the statement is printed but is
   immediately retracted in the close state when the card is removed.
   Timer 95 does not start.
   It seems to be because TOP flag is set.
   
   When I tested, I recreated with the customer message and NDCmess message
   (Func ID Q).
   However, you need a FF at the end of the message for this to happen but it
   should not cause a problem because:
   
   "FF - Causes a feed to black mark, cut and deliver to customer."
   
   I attach my logs and the customers debug log.
   I also have a good PD trace from the customer if that's more useful:
   
   CustomL.. 09:30:57.092
   **********************************************************
   CALLING CLOSE STATE EXIT
   **********************************************************  
   <wid>2s1914g220</wid>
   
   CustomL.. 09:30:57.923 GBNA.DeviceStatus in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.933 BNAFitness.Data in CheckFatal ActiveScriptHost0
   CustomL.. 09:30:57.943 NotesAtThroatFlag.Data0
   CustomL.. 09:30:57.953 Deactivate in CheckFatal ActiveScriptHost
   CustomL.. 09:30:57.994 Statement Close State TOP [1]
                         Printed [1] 
                         Pages [1]
                         Lines [0]  
   <wid>38n5927dc129</wid>
   
   CustomL.. 09:30:58.014 Card taken  
   <wid>4l1235y27</wid>
   
   CustomL.. 09:30:58.024 Card Ejected Flag - 0  
   <wid>1s1356g219</wid>
   
   CustomL.. 09:30:58.034 No Card Eject Detected  
   <wid>0s1356g219</wid>
   
   CustomL.. 09:30:58.184 Starting Timer 2 [09:30:58]  
   <wid>10l1233y27</wid>
   
   CustomL.. 09:30:58.204 Attempting Statement Capture...  
   <wid>25n5927dc129</wid>
   
   CustomL.. 09:31:01.969 Statement captured in Close State  
   <wid>27n5927dc129</wid>
   
   CustomL.. 09:31:02.200 Timer 2 expired [09:31:02]  
   <wid>5l1233y27</wid>
   
   CustomL.. 09:31:02.210 Waiting for statement tidy-up to complete...




Summary:
ANDC 93.01.00.02 - 'EJ Upload in Progress' screen shown when INIT EJRNL is selected although EJ Upload is not configured.

Description:
'EJ Upload in Progress' screen shown when INIT EJRNL is selected even though EJ Upload is not configured. 



Summary:
ANDC 93.01.00.02 - Screen display not refreshed properly during Settlement transaction

Description:
After entering the 'Buffer C' data during settlement, the TREQ should be sent to the host and the 'PLEASE WAIT...' screen should be displayed. What is happening is that any data from the 'Buffer C' entry screen that that is outwith the text area taken up by the 'PLEASE WAIT...' screen is still shown on the display.



Summary:
ANDC 93.01.00.02 - Attempting to update Machine Number results in Supervisor crash

Description:
Attempting to update the Machine Number in the Configure Menu results in a supervisor crash after the digits are entered and ENTER is pressed. After restarting the apps and checking DISP CONFIG in the Configure menu, the updated machine number is present.



Summary:
IT- Cash Dispenser Transactions Showing worng Present Error

Description:
When trying to jam the shutter to not to close after dispensing cash or retract the cash into the purgebin.In both cases
Presentor Error message is shown with E4 and sometimes with E5.

Thanks and Regards,
Prashanthi.



Summary:
Tamper Indicators.

Description:
Tamper Indicators of cassettes are not properly reporting to host and the Journal printer, when the cassettes are removed in certain combinations.Even the messaging of TI is not as expected and not reporting to host during Power-up.



Summary:
IT-5.6.12.3 Message Mismatch

Description:
When doing a dispense cash transaction with cassete low.
It is showing the messages on Host and Journal differently
for example:[12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]E500000000[Unicode-x1C]00000[Unicode-x1C]00[Unicode-x1C]13211]host
 [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]E500000000[Unicode-x1C]00000[Unicode-x1C]00[Unicode-x1C]10211]journal
Please check with the attached debuglogfiles.
Thanks and Regards,
Prashanthi.

 



Summary:
Release Bulletin.html file is not copied after Development PC installation is completed.

Description:
The Aptra Advance NDC Release Bulletin file which can be found at Start\Program Files\NCR Aptra, is not copied to C:\program files\NCR\Aptra Documentation files after Development PC installation is carried out.



Summary:
IT-5.6.8.1 Set Cash in Configure Menu makes Supervisor Crash.

Description:
After entering the casseste types and No.of notes for 4 cassettes.IF we press cancel to go into the configure menu.The system hangs and The Supervisor Crashes.
Event Type:	Error
Event Source:	APTRA Problem Determination
Event Category:	None
Event ID:	20
Date:		30/03/2006
Time:		00:38:10
User:		N/A
Computer:	PRASHANTHI
Description:
Object ID: 60278992
Process ID: 472
Thread ID: 3148
Process Filename: C:\ssds\apps\supervisor.exe
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> F:\auto_93010002\Components\MAPSGUI\Sources\cpp\MWINDATA.CPP </SCFILE>      <SCLINE> 418 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 1       Domain: 0       Error Number: 8    Worker Id:     Description: Authoring Warning, Top Worker - A Signal Id 1
has been returned from the Top Worker which has
not been consumed. It originated from Worker 13l473y13.            </FREE>
Please check the attachments for debuglog and event log files.

Thanks and Regards,
Prashanthi.




Summary:
System Escape when accessing GBNA's LastCashInStatus Property

Description:
 UEH occurs caused by the customisation layer when attempting to access the 
GBNA LastCashin status property. 

This can occur in a number of ways. 
1. the cardholder is teasing the GBNA pre-acceptor
inserting/removing/inserting the notes until they cause a jam where the
notes are jammed by the shutter and are on top of the rollers. 
2. When notes are retracted and the shutter is held open - jamming the
shutter open. 

After discussions with AXFS engineering, AXFS cannot create the lastcashin
object due to the state of the device (hardware error) and hence it is not
possible to read the property of lastcashin status. The command fails and
results in the Merror below. 
The application VBscript workers should deal with the Hresult of the command 
completion to determine that something has went wrong with the device. 

Event Type: Error 
Event Source: APTRA Problem Determination 
Event Category: None 
Event ID: 20 
Date: 22/Mar/2006 
Time: 11:03:24 
User: N/A 
Computer: FGSC-GBRU 
Description: 
Object ID: 42821832 
Process ID: 3088 
Thread ID: 2792 
Process Filename: C:\ssds\apps\customisationlayer.exe 
SupplyPoint Owner: NCRScotland.SSDS 
SupplyPoint Source:mError 
Description: <SCFILE>
R:\Ssds\InterDomain\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp
</SCFILE> <SCLINE> 1381 </SCLINE> <FUNCTION> </FUNCTION> 
<FREE> Level: 2 Domain: 114 Error Number: 2 Worker Id: 
Description: VBScript has reported an error in a script passed to it.
The error is near line number 422 of Script Host Worker ID: 60n5304dc128.
VBScript has given the following error description:
'Object required: 'LastCashin''
The Source of the Exception is
'Microsoft VBScript runtime error'
Script is:
'ProcID**activate**END 
Dim EscrowedNotes 
Dim CurDenom 
Dim Values(50) 
Dim CashUnitErrorFlag 

Const CIM_POSITION_DEFAULT = 0 
Const CIM_TO_RETRACT = 0 

Sub activate() 

Debug( "In Retract" </FREE> 


FGSC have recreated the retract scenario and provided Event logs, debug logs 
and a PD trace (AXFS)



Summary:
IT:5.4.1.6. Wrong message printed on Journal in Cash Dispenser Test-i.e., Presentor error with E0

Description:
When trying to stop retracting of cash by the Cash Dispenser.
It is showing Presentor Error with E0.
It is mentioned to Show with E5 in Test case 5.4.1.6.1 Cash Dispenser Test.
Check for the logfiles in \\sgbdun100\orgshare\public\prashanthi\prashanthilogfiles.
Thanks and Regards,
Prashanthi.



Summary:
IT - 5.5.18 Set Prnt causes System Hang and Supervisor layer crash.

Description:
Worker ID:13l473y13.  Supervisor layer is getting crashed.Here i am attaching the log message.
\\sgbdun100\orgshare\public\prashanthi\prashantilogfiles
Event Type:	Error
Event Source:	APTRA Problem Determination

Please check out with attachments.Which has both eventlogs and debug logfiles.
Thanks and Regards,
Prashanthi.
Event Category:	None
Event ID:	20
Date:		29/03/2006
Time:		01:07:03
User:		N/A
Computer:	PRASHANTHI
Description:
Object ID: 59577224
Process ID: 2288
Thread ID: 1064
Process Filename: C:\ssds\apps\supervisor.exe
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> F:\auto_93010002\Components\MAPSGUI\Sources\cpp\MWINDATA.CPP </SCFILE>      <SCLINE> 418 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 1       Domain: 0       Error Number: 8    Worker Id:     Description: Authoring Warning, Top Worker - A Signal Id 1
has been returned from the Top Worker which has
not been consumed. It originated from Worker 13l473y13.            </FREE>




Summary:
TAR RFC 321092:  NDC Data Collector should process XFS keycode for DECPOINT as a valid char

Description:
WFS_PIN_FK_DECPOINT is currently treated by NDC DataCollector as an
   unsupported character code. When customers enable decimal point XFS keycode
   through BAPE.cnf NDC Data Collector does not recognise it and hence although 
   the keypress occurs correctly, the keycode is not translated to '.', or
   added to input buffer for echo and data.  For more info speak to Zubair or
   Stevie G




Summary:
TAR RFC 321092:  NDC Data Collector should process XFS keycode for DECPOINT as a valid char

Description:
WFS_PIN_FK_DECPOINT is currently treated by NDC DataCollector as an
   unsupported character code. When customers enable decimal point XFS keycode
   through BAPE.cnf NDC Data Collector does not recognise it and hence although 
   the keypress occurs correctly, the keycode is not translated to '.', or
   added to input buffer for echo and data.  For more info speak to Zubair or
   Stevie G




Summary:
Installer - add a deinstall script to deinstall when new installer is used

Description:
deliver deinstall script with 3.01



Summary:
IT - test 5.3.1.1.2 tools not installed by default

Description:
Tools are not installed by default but test assumes that they are. ITS needs updated




Summary:
45th option in the configure menu of Supervisor is missing.

Description:
The 45th option of the configure menu of Supervisor mode, which is used to change the max number of lines of the statement paper, is missing.



Summary:
IT - Dual Dispenser Test 4.3.2 - Interlock open reported twice and not removed

Description:
When performing this test the Interlock Open was displayed for both CDM 01 and CDM 02 - this should have only have been displayed once and should not be related to a CDM.

Also when the door was shut (close interlock) the fault display entry was not removed



Summary:
IT - Dual Dispenser - registry keys not included in build

Description:
Nothing delivered for AdvanceNDC.reg - Jacek to provide all setting required and whether they are for both single AND dual dispensers



Summary:
IT - Dual Dispenser - Application Core Access violation on startup

Description:
ANDC 93.01.00.02 installed on a clean system on dual dispenser - AC crashes with access violation on startup



Summary:
TAR 320974:  Maximium of 64 touchscreen workers supported in Virtual Keyboard workgroup

Description:
  A problem has been found with AANDC 3.0 in that in NDC Data Collector, the
   Data Keys workgroup no longer allows Touch Keys to be placed inside. 
   
   Customer needs to place the complete Alphabet set as Touch Keys in this
   workgroup so that the input can be picked up and shown in the Front Echo
   Store. 
   This was previously supported in AANDC 2.3. 
   
   Cusotmer had tried a waorkaround of placing each individual Touch Key in a
   workgroup and used an Assigner to manually assign each Alphabet when a Touch 
   Key is pressed and loop back. 
   However an error is returned in that too many Touch Keys are being
   activated. This was found by engineering to be due to the fact that there is 
   a limit on the number of touchscreen workers supported in the Virtual
   Keyboard workgroup. This is currently limited to 64.
   
   Engineering/ COE have resolved this direct with customer. TAR has been
   raised to provide correct route og engineering fix to customer.




Summary:
IT - Journalled workflow not tied to worker signal in a few TR functions

Description:
Raised by Mike. Issue in 3.01 that could cause hangs in the dispense functions.



Summary:
IT-CustomisationLayer Crashes when Encash is done 

Description:
IT -CustomisationLayer Crashes when notes are Encashed
It is a Integration Issue..

Eventviewer shows the following error :
The error is near line number 295 of Script Host Worker ID: 227n5304dc128.
VBScript has given the following error description: ''Syntax error'





Summary:
IT - Dispenser Cassette issues reported on EOP fault display show C1 prefix for dual dispenser when only single dispenser configured

Description:
When ANDC 3.01 IT2 buld was run up with a cassette low on the dispenser, the EOP fault display showed C1 TOP     CASS LOW.
The dual dispenser C! prefix was present and the formatting of the screen was different.  Further testing showed that for cassette removed
CI TOP          CASSETTE REMOVED
CI BOTTOM  CASSETTE REMOVED
was displayed (ie CASSETTE seems to be starting in the same column for all)



Summary:
IT -Customisation layer Crashes when Deposit Key is pressed.

Description:
IT-Customisation layer Crashes when Deposit Key is pressed in GBNA Transaction.

Event viewer shows :
 The error is near line number 222 of Script Host Worker ID: 218n5304dc128.
VBScript has given the following error description:
	'Syntax error'




Summary:
ANDC 93.01.00.02 - Supervisor Application Terminates at SOD

Description:
When apps are started the Supervisor application terminates. The following is sent to the event log (also attached):

SupplyPoint Source:mError
Description: <SCFILE> F:\auto_93010002\Components\MAPSRTCore\Sources\cpp\mbparse.cpp </SCFILE>      <SCLINE> 507 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 1       Domain: 0       Error Number: 153    Worker Id:     Description: Authoring Error, Class Evaluator -
'InitCountersEntryMode' is not recognised as a variable or function name.

'InitCountersEntryMode' is mentioned in the authoring instructions for GR1T 323089 - Implement Dual Dispenser for AANDC 3.01.



Summary:
Help not enabled for NDC DATA Collector

Description:
In the Author, selecting the help button in Worker Settings for the NDC Data Collector returns a "No help available for this component", but the worker class help exists and is available from the Help menu. For CSH to work, needs to be enabled by developer.



Summary:
CCM VISA II Code tidy up

Description:
The CCM VISA II module has had several attempts to resolve issue of how to handle incoming EOT while a send is being processed. There are several flags used to track the handling of this scenario (sendWhiledisconnecting and sendPending).
The code requires a general tidy up so that redundant code relating to this issue is removed.



Summary:
Add skeleton of GBRU cash out functionality for 3.01

Description:
GBRU cash out will not be in 3.01 but we to add the interface code and a skeleton of the code, so we can deploy it on top of 3.01 without having to reinstall the whole of AANDC



Summary:
Test GRIT

Description:
For training purpose



Summary:
TAR 315852 - No counts reported to Host after GBNA hardware problem resolved

Description:
Transaction Request sent to the Host after a cash deposit does not include the note counts if an error has occurred with the GBNA, as per attached message (note only BNA indicator, no counts:

22:45:42  # 81    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1<[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000420245
7[Unicode-x1C]w]

After restarting AA-NDC, the correct format was sent:

22:51:39  # 145    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1=[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000430246
1[Unicode-x1C]w02001030010400105001]




Summary:
TAR 315852 - No counts reported to Host after GBNA hardware problem resolved

Description:
Transaction Request sent to the Host after a cash deposit does not include the note counts if an error has occurred with the GBNA, as per attached message (note only BNA indicator, no counts:

22:45:42  # 81    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1<[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000420245
7[Unicode-x1C]w]

After restarting AA-NDC, the correct format was sent:

22:51:39  # 145    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1=[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000430246
1[Unicode-x1C]w02001030010400105001]




Summary:
When 2 cassettes of same type installed, removing 2 only sends 1 message

Description:
A TI sensor message should be sent on removal and insertion of each physical cassette, but when 2 cassettes of the same type are in the dispenser, only one message is sent when both are removed. Wosatool shows that the SP returns 2 events in this case.



Summary:
When 2 cassettes of same type installed, removing 2 only sends 1 message

Description:
A TI sensor message should be sent on removal and insertion of each physical cassette, but when 2 cassettes of the same type are in the dispenser, only one message is sent when both are removed. Wosatool shows that the SP returns 2 events in this case.



Summary:
TAR 315265: Hang occurs if Notes are withdrawn after the Notes Processing screen displays

Description:
NCR Malaysia/Maybank performed the following test in the course of UAT: 

1. Insert notes 
2. Allow screen to move to Processing Notes 
3. Remove Notes. 

The correct events were received by the BNA Enable script and were all
visible in the debug logs however control never transferred to the Calculate 
totals workgroup. 

Looking at the debug logs from Malaysia (who had added some additional debug 
messages into their flow, the followinf sequence was seen: 

NotesInserted - notes entered - move to Processing notes 
InputRefuse - expected because the notes were held so they did not pass the
sensors 

Notes Presented - notes seen at the input slot again 
Notes Taken - as expected 

Error event for the Input Refuse 

then the following sequence: 

SEACust.. 11:22:57.250 acceptance complete 
<wid>102n5304dc128</wid> 

SEACust.. 11:22:57.265 acceptance complete 
<wid>102n5304dc128</wid> 
(apparently one each for Taken and Error event?) 
SEACust.. 11:22:57.265 BNA Rejected Notes have been Taken - Enable continues 
automatically. 
<wid>41m2s1</wid> 

SEACust.. 11:22:57.265 Taken Caller has signalled 
<wid>40m2s1</wid> 

SEACust.. 11:22:57.281 in stop fdks mei and beep off director pass thru
signalled 
<wid>127n5304dc128</wid> 

??




Summary:
TAR 315265: Hang occurs if Notes are withdrawn after the Notes Processing screen displays

Description:
NCR Malaysia/Maybank performed the following test in the course of UAT: 

1. Insert notes 
2. Allow screen to move to Processing Notes 
3. Remove Notes. 

The correct events were received by the BNA Enable script and were all
visible in the debug logs however control never transferred to the Calculate 
totals workgroup. 

Looking at the debug logs from Malaysia (who had added some additional debug 
messages into their flow, the followinf sequence was seen: 

NotesInserted - notes entered - move to Processing notes 
InputRefuse - expected because the notes were held so they did not pass the
sensors 

Notes Presented - notes seen at the input slot again 
Notes Taken - as expected 

Error event for the Input Refuse 

then the following sequence: 

SEACust.. 11:22:57.250 acceptance complete 
<wid>102n5304dc128</wid> 

SEACust.. 11:22:57.265 acceptance complete 
<wid>102n5304dc128</wid> 
(apparently one each for Taken and Error event?) 
SEACust.. 11:22:57.265 BNA Rejected Notes have been Taken - Enable continues 
automatically. 
<wid>41m2s1</wid> 

SEACust.. 11:22:57.265 Taken Caller has signalled 
<wid>40m2s1</wid> 

SEACust.. 11:22:57.281 in stop fdks mei and beep off director pass thru
signalled 
<wid>127n5304dc128</wid> 

??




Summary:
TAR 315232: Confirmation screen displayed after notes retracted

Description:
Application should not proceed to the Confirmation screen when the notes are no longer in escrow. 

This has been tested with the following procedure: 

(enable retract option 45 007) 

1 Start a transaction 
2 Select BNA transaction 
3 Insert 20 valid notes 
4 Remove rejected notes (if any) 
5 Verify notes counts are correct on Confirmation screen. 
6 Press Add More on the confirmation screen 
7 Insert 20 invalid notes 
8 Do not take the rejected notes. Wait for timeout. 
9 Do not select any option on timeout screen. 
10 Remove the notes when the device attempts to retract it. 

After notes removed, Confirmation screen displayed with the same notes count 
as per step 5 above. 

The application should not display this screen following a retract operation 
- the cardholder is no longer there (it is assumed). 

If the confirmation screen is there, we can select deposit or cancel, add
more. None of these options are valid because the transaction has ended,
eg. 

Press cancel on confirmation screen -> hardware error screen shown. 

The Debug log shows RollbackFailed with the following XFSErrorEvent: 
SEACust.. 17:24:05.781 Error.Description : Device:
BillAcceptor1,Description: Rollback; Cash In has not active 

The retract operation has ended the transaction so rollback is not
possible. 

The main issue is that the confirmation screen should not be displayed
following a retract, thus avoiding the subsequent errors.





Summary:
TAR 315232: Confirmation screen displayed after notes retracted

Description:
Application should not proceed to the Confirmation screen when the notes are no longer in escrow. 

This has been tested with the following procedure: 

(enable retract option 45 007) 

1 Start a transaction 
2 Select BNA transaction 
3 Insert 20 valid notes 
4 Remove rejected notes (if any) 
5 Verify notes counts are correct on Confirmation screen. 
6 Press Add More on the confirmation screen 
7 Insert 20 invalid notes 
8 Do not take the rejected notes. Wait for timeout. 
9 Do not select any option on timeout screen. 
10 Remove the notes when the device attempts to retract it. 

After notes removed, Confirmation screen displayed with the same notes count 
as per step 5 above. 

The application should not display this screen following a retract operation 
- the cardholder is no longer there (it is assumed). 

If the confirmation screen is there, we can select deposit or cancel, add
more. None of these options are valid because the transaction has ended,
eg. 

Press cancel on confirmation screen -> hardware error screen shown. 

The Debug log shows RollbackFailed with the following XFSErrorEvent: 
SEACust.. 17:24:05.781 Error.Description : Device:
BillAcceptor1,Description: Rollback; Cash In has not active 

The retract operation has ended the transaction so rollback is not
possible. 

The main issue is that the confirmation screen should not be displayed
following a retract, thus avoiding the subsequent errors.





Summary:
TAR 315311: AA-NDC 03.00.02 reports incorrect values for notes entered in cash deposit

Description:
If notes of varying denominations are entered into the BNA in AA-NDC
03.00.02, the transaction request message sent to the Host sends data that
indicates the total number of notes entered as a single type rather than
breaking down the entry into the note types as specified by the AA-NDC
Reference Manual definition for the Transacation Request. 

Debug logs have been supplied demonstrating the problem with the vanilla
AA-NDC 03.00.02 and also, as discussed with Praveen, there are debug logs
available to demonstrate that the message sent for problem is not seen in
AA-NDC 03.00.01. 

This is an urgent issue because the product cannot be deployed with this
error - in the test results supplied, the transaction details were: 

Notes actually entered: 

5 Type 1 (AED10) 
1 Type 2 (AED100) 
2 Type 3 (AED500) 
Giving a deposit total of 1250 

Transaction Request details were: 

8 Type 1 (AED10) 
Giving a total of 80. 

This means that the customer is potentially credited 1170 less than he
entered. 





Summary:
TAR 315054: AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
TAR 315054: AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
TAR 315268 - AA-NDC: STD CASH Supervisor function does not work (GRIT 326963) - Test 5.5.6 - MV STD CASH Regression on NCR H/W

Description:
Setting up the note counts via Configure menu SET CASH function and Replenish menu STD CASH functions results in notes in Cassette, Remaining and Total being displayed as blank via the DISP CASH function.  A subsequent Send Supply Counters TC results in 65535 displayed for each cassette (ie not configured).
Re-entering supervisor and attempting an ADD CASH returns INVALID VALUE when a valid value is entered for cassette type.  Performing a CLR CASH at this point then allows the ADD CASH function to be carried out.  
I will follow this up with FGSC to determine what the correct procedures are for SET CASH, STD CASH, ADD CASH as the end user would use it however, NDC+ performs OK for the same test.



Summary:
TAR 315268 - AA-NDC: STD CASH Supervisor function does not work (GRIT 326963) - Test 5.5.6 - MV STD CASH Regression on NCR H/W

Description:
Setting up the note counts via Configure menu SET CASH function and Replenish menu STD CASH functions results in notes in Cassette, Remaining and Total being displayed as blank via the DISP CASH function.  A subsequent Send Supply Counters TC results in 65535 displayed for each cassette (ie not configured).
Re-entering supervisor and attempting an ADD CASH returns INVALID VALUE when a valid value is entered for cassette type.  Performing a CLR CASH at this point then allows the ADD CASH function to be carried out.  
I will follow this up with FGSC to determine what the correct procedures are for SET CASH, STD CASH, ADD CASH as the end user would use it however, NDC+ performs OK for the same test.



Summary:
TAR 312832 - AA-NDC: Unsolicited Message generated when Night Deposit Transaction Cancelled

Description:
Using AANDC 3.00.01, during testing of the Night Safe Deposit transaction,
if Cancel is pressed when the ATM is waiting for the bag to be dropped, the
ATM sends an unsolicited 12_000__K0_0_00_1 status message, followed by the
transaction completion Ready 9 message.



When Cancel is pressed, the ATM should be sending a solicited status
message, not unsolicited. The ATM should then wait for another transaction
reply from host. The status message should also have a transaction status of
1, not 0. The status message should be 22_000__K1_0_00_1.



Summary:
IT - Pre-IT Shake Out Tests.  ADD CASH screen does not display the Last Cleared Date

Description:
When count is entered for any cassette, the confirmation screen displayed should also include the Last Cleared date as per the Supervisors Reference Manual and NDC+.  This is not visible.



Summary:
Enhanced EJ UT - if drivepicker is not registered system escape occurs

Description:
Enhanced EJ UT - if drivepicker is not registered system escape occurs



Summary:
Enhanced EJ UT - if CDWRITE is not registered system escape occurs

Description:
Enhanced EJ UT - if CDWRITE is not registered system escape occurs



Summary:
Enhanced EJ UT - Change no of backups manually in registry--try having no of backups to be more than 1000 then it should take value of 10

Description:
Enhanced EJ UT - Value is not 10



Summary:
Enhanced EJ UT - 5.2.4.2 - Having problem with multiple destination option being CDRW and search options and few file mapping problems

Description:
Enhanced EJ UT - 5.2.4.2 -  Having problem with multiple destination option being CDRW and search options and few file mapping problems



Summary:
Enhanced EJ UT - 5.2.4.1 - Having problem with multiple destination option being CDRW

Description:
Enhanced EJ UT - 5.2.4.1 -  Having problem with multiple destination option being CDRW



Summary:
Enhanced EJ UT - 5.1.2 - The current EJBackup Mode Prompt is malfunctioning ,not showing the right value and display of display config data

Description:
Enhanced EJ UT - 5.1.2 - The current EJBackup Mode Prompt is malfunctioning ,not showing the right value and display of display config data



Summary:
IT - Enhanced EJ - Configuration Data information displayed needs to be updated

Description:
The Enhanced EJ specific information displayed in the Configuration Data displayed when DISP CONFIG is selected in CONFIGURE menu needs to be tidied up.  
EJBACKUPMODE = STANDARD
NOOFBACKUPS = N-A
is displayed as default.  No spaces appear between the words and N-A should be changed to a blank if not applicable (or NA only if something is required).  Displaying blank when no information is available to display would be consistent with other entries displayed on the screen when no informaiton is available to display.



Summary:
IT - Dual Dispense has introduced a (Cyclic) Dependency of statcust.dll on ooxfs.dll

Description:
Dependency introduced by Dual Dispense implementation such that statcust now depends on ooxfs - this means neither statcust or ooxfs can be built cleanly. 

2 possible solutions identified - either 1) use the TAR 305884 fix that stores the last transaction status and update it to store for each dispenser or 2) store the whole status of the device at the statcust level so the call to GetCurrentSeverity() and GetCurrentReplenish() added during Dual Dispense implementation are no longer required

It should also be noted that GetCurrentSeverity() and GetCurrentReplenish()  use synchronous GetInfo calls which should not be used



Summary:
CDM : Cassette changes status from 'EMPTY' to 'LOW' during Start/End Exchange process

Description:
2. Cassette 'EMPTY' back to 'LOW
 
The important info is at the end of the file. The trace file shows several dispenses until the cassette is EMPTY.
We then go through a Start / End Exchange process followed by a CashUnitInfo command. We do not replenish
or change any cassettes. We note that the CashUnitInfo command returns a Cassette Status of  
'WFS_CDM_STATCULOW' (3), whereas the previous EndExhange command reported 'WFS_CDM_STATCUEMPTY' (4).
We would expect the status to remain as WFS_CDM_STATCUEMPTY
 
03/21/2006 08:47:46.923 3084:3100 CashDispenser: ENDEXCHANGE REQUEST.
03/21/2006 08:47:46.923 3084:3100 CashDispenser: Inp Data: .0.5.
03/21/2006 08:47:46.923 3084:3100 CashDispenser:   >.1.2.CASR.---.0.0.17.0.50.0.0.0.BIN0.0.
03/21/2006 08:47:46.923 3084:3100 CashDispenser:   >.2.3.CASA.USD.1.0.0.8.1000.0.0.5.BINX.0.
03/21/2006 08:47:46.923 3084:3100 CashDispenser:   >.3.3.CASB.USD.5.0.0.10.1000.0.0.5.BINX.0.
03/21/2006 08:47:46.923 3084:3100 CashDispenser:   >.4.3.CASC.USD.10.0.0.10.1000.0.0.4.BIN1.0.
03/21/2006 08:47:46.923 3084:3100 CashDispenser:   >.5.3.CASD.USD.20.100.83.10.1000.0.0.0.BIN2.0.
03/21/2006 08:47:46.963 3084:3100 CashDispenser: Event WFS_USRE_CDM_CASHUNITTHRESHOLD
03/21/2006 08:47:46.963 3084:3100 CashDispenser: SPIDevice::SendEvent - class: 2, id: 303, hService: 1, hWnd:30210
03/21/2006 08:47:46.963 3084:3100 CDM: AllocateEvent for CDM device
03/21/2006 08:47:46.963 3084:3100 CashDispenser: SPIDevice::SendEvent - hWnd: 0x30210, msg: 1046, RequestID: 0, hService: 1, hResult: 0, dwEventID: 303, lpBuffer:0x17BD8A94
03/21/2006 08:47:47.273 3084:3100 CashDispenser: ENDEXCHANGE EXIT.
03/21/2006 08:47:54.744 3280:3292 CDM: AllocateInfoData for CDM device
03/21/2006 08:47:54.794 3084:3108 CashDispenser: Processing immediate info. hService: 1, RequestID: 16, dwCategory: 303
03/21/2006 08:47:54.794 3084:3108 CashDispenser: CASHUNITINFO REQUEST
03/21/2006 08:47:54.794 3084:3108 CDM: AllocateInfoResponse for CDM device
03/21/2006 08:47:54.794 3084:3108 CDM: AllocateInfoResponse for CDM device
03/21/2006 08:47:54.964 3084:3108 CashDispenser: Resp Data: .0.5.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:   >.1.2.CASR.---.0.0.17.0.50.0.0.0.BIN0.0.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BIN0.CASR.17.0.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BINX.CASR.0.5.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:   >.2.3.CASA.USD.1.0.0.8.1000.0.0.5.BINX.0.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BINX.CASA.0.5.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:   >.3.3.CASB.USD.5.0.0.10.1000.0.0.5.BINX.0.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BINX.CASB.0.5.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:   >.4.3.CASC.USD.10.0.0.10.1000.0.0.3.BIN1.0.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BIN1.CASC.0.3.
03/21/2006 08:47:54.964 3084:3108 CashDispenser:       >.BINX.CASC.0.5.
03/21/2006 08:47:54.994 3084:3108 CashDispenser:   >.5.3.CASD.USD.20.100.83.10.1000.0.0.0.BIN2.0.
03/21/2006 08:47:54.994 3084:3108 CashDispenser:       >.BIN2.CASD.0.0.
03/21/2006 08:47:54.994 3084:3108 CashDispenser:       >.BINX.CASD.0.5.
03/21/2006 08:47:54.994 3084:3108 CashDispenser: CASHUNITINFO EXIT





Summary:
CDM : Cassette Reported as 'OK' when in fact it is not present

Description:

1.CashUnitInfo Cassettes OK Issue
 
 
The trace starts with a CashUnitInfo command indicating the current state of the dispenser and cassettes.
There are 2 cassettes - one in BIN1 the other in BIN2
 
03/21/2006 09:38:48.605 4036:4060 CashDispenser: CASHUNITINFO REQUEST
03/21/2006 09:38:48.605 4036:4060 CDM: AllocateInfoResponse for CDM device
03/21/2006 09:38:48.615 4036:4060 CDM: AllocateInfoResponse for CDM device
03/21/2006 09:38:48.745 4036:4060 CashDispenser: Resp Data: .0.5.
03/21/2006 09:38:48.745 4036:4060 CashDispenser:   >.1.2.CASR.---.0.0.17.0.50.0.0.0.BIN0.0.
03/21/2006 09:38:48.745 4036:4060 CashDispenser:       >.BIN0.CASR.17.0.
03/21/2006 09:38:48.745 4036:4060 CashDispenser:       >.BINX.CASR.0.5.
03/21/2006 09:38:48.745 4036:4060 CashDispenser:   >.2.3.CASA.USD.1.0.0.8.1000.0.0.5.BINX.0.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:       >.BINX.CASA.0.5.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:   >.3.3.CASB.USD.5.0.0.10.1000.0.0.5.BINX.0.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:       >.BINX.CASB.0.5.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:   >.4.3.CASC.USD.10.0.0.10.1000.0.0.3.BIN1.0.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:       >.BIN1.CASC.0.3.
03/21/2006 09:38:48.805 4036:4060 CashDispenser:       >.BINX.CASC.0.5.
03/21/2006 09:38:48.866 4036:4060 CashDispenser:   >.5.3.CASD.USD.20.100.83.10.1000.0.0.0.BIN2.0.
03/21/2006 09:38:48.926 4036:4060 CashDispenser:       >.BIN2.CASD.0.0.
03/21/2006 09:38:48.926 4036:4060 CashDispenser:       >.BINX.CASD.0.5.
03/21/2006 09:38:48.926 4036:4060 CashDispenser: CASHUNITINFO EXIT
 
 
At this point the folllowing sequence of actions and commands occur :
 
- StartExchange
- Cassette in BIN2 moved to BIN3
- CashUnitInfo
- EndExchange 
- CashUnitInfo
 
The last CashUnitInfo command (below) shows that BIN2 and BIN3 have cassettes installed and are reporting OK 
whereas, in fact, there is no cassette in BIN2
 
03/21/2006 09:40:27.457 4036:4060 CashDispenser: CASHUNITINFO REQUEST
03/21/2006 09:40:27.457 4036:4060 CDM: AllocateInfoResponse for CDM device
03/21/2006 09:40:27.497 4036:4060 CDM: AllocateInfoResponse for CDM device
03/21/2006 09:40:27.648 4036:4060 CashDispenser: Resp Data: .0.5.
03/21/2006 09:40:27.648 4036:4060 CashDispenser:   >.1.2.CASR.---.0.0.17.0.50.0.0.0.BIN0.0.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:       >.BIN0.CASR.17.0.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:       >.BINX.CASR.0.5.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:   >.2.3.CASA.USD.1.0.0.8.1000.0.0.5.BINX.0.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:       >.BINX.CASA.0.5.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:   >.3.3.CASB.USD.5.0.0.10.1000.0.0.5.BINX.0.
03/21/2006 09:40:27.658 4036:4060 CashDispenser:       >.BINX.CASB.0.5.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:   >.4.3.CASC.USD.10.100.100.10.1000.0.0.3.BIN1.0.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:       >.BIN1.CASC.100.3.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:       >.BINX.CASC.0.5.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:   >.5.3.CASD.USD.20.100.83.10.1000.0.0.0.BINX.2.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:       >.BIN2.CASD.83.0.
03/21/2006 09:40:27.718 4036:4060 CashDispenser:       >.BIN3.CASD.94.0.
03/21/2006 09:40:27.778 4036:4060 CashDispenser:       >.BINX.CASD.0.5.
03/21/2006 09:40:27.778 4036:4060 CashDispenser: CASHUNITINFO EXIT
 




Summary:
EJ No of backups greater than 1000 not processed correctly

Description:
Script code using wrong variable names for checking no of backups configured.



Summary:
Test 5.3.1.6 - Installation Tests.  Power Up Message printed contains wrong ANDC version

Description:
Advance NDC 03.00.00 was printed to the journal with the power up message.  This should be updated to print 03.01.00. (Reported by Varun)



Summary:
TatraBanka 302 - NCR - extra prurge required to avoid notes in transport

Description:
where dispenser self test performed in sysapp - a failure to pick will resulting notes left on the transport.
this may cause discrepancies in replenishment.



Summary:
Aggregate release bulletin should be named release.htm & agg/comp bulletins need to be created

Description:
File Name
-----------
Aggregate release bulletin should be named "release.htm", or in this case "release.mht".  This naming convention is defined in the "SCM Procedures for APTRA Components and Aggregates", 445-9001053.
Note 1: This change will also require a change to the link in the Package IP.

Aggregate & Component bulletins
----------------------------------------
The contents of the Aggregate release bulletin is currently the same as the Component release bulletin.  This Component release bulletin should contain requirements & problem info related to the ANDC component - this will contain most of the contents of the current bulletin.  The Aggregate release bulletin is likely to be smaller, primarily listing the components included in the aggregate and referring to the component bulletins for more info.  See the release bulletin templates in "SCM Procedures for APTRA Components and Aggregates", 445-9001053.



Summary:
TAR 318712: Card before cash screen display issue on motorised readers if already ejected

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.





Summary:
TAR 318712: Card before cash screen display issue on motorised readers if already ejected

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.





Summary:
TAR 319520 :  EJ upload is looping due to incorrect Last Char block

Description:
Customer reported that EJ upload is constantly looping with AANDC 03.00.02

They had a call open for this last year (RAZBRPYBM August '05) with the issue reported with AANDC 02.06.02 and TIR 307673 was raised. Isue had already been resolved with AANDC 02.06.03 ssdcNDCDATA.dll. 

The following EJ upload message is being sent 

[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]123456060214100607175528175628100 U U U U U U U U  U RETURNED COUNTS: 0 - U U U U U U U U U U U U U U U U U U U U U U U U U U U U U U]

The messgae format is ok, with the Last Char Previous block value of 175528 and Last Char This Block value of 175628.
This however does not match the values detailed in the proceesing of the message in the debug logs.

	14:32:14.924 Entering Message Processor. Command Code = [1]
	0   applica.. 14:32:14.940 EJ Currently Enabled? - 1
	-   applica.. 14:32:14.940  Acknowledge received 
	?   applica.. 14:32:14.940 Enabling EJ Upload - Do we have a match?
	4   applica.. 14:32:14.940 Last Char This Block = 175728
	2   applica.. 14:32:14.940 Last Char Received = 175628
	U   applica.. 14:32:14.940 Message Handler - processing complete    

This is repeated in the debug.log.





Summary:
TAR 319520 :  EJ upload is looping due to incorrect Last Char block

Description:
Customer reported that EJ upload is constantly looping with AANDC 03.00.02

They had a call open for this last year (RAZBRPYBM August '05) with the issue reported with AANDC 02.06.02 and TIR 307673 was raised. Isue had already been resolved with AANDC 02.06.03 ssdcNDCDATA.dll. 

The following EJ upload message is being sent 

[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]123456060214100607175528175628100 U U U U U U U U  U RETURNED COUNTS: 0 - U U U U U U U U U U U U U U U U U U U U U U U U U U U U U U]

The messgae format is ok, with the Last Char Previous block value of 175528 and Last Char This Block value of 175628.
This however does not match the values detailed in the proceesing of the message in the debug logs.

	14:32:14.924 Entering Message Processor. Command Code = [1]
	0   applica.. 14:32:14.940 EJ Currently Enabled? - 1
	-   applica.. 14:32:14.940  Acknowledge received 
	?   applica.. 14:32:14.940 Enabling EJ Upload - Do we have a match?
	4   applica.. 14:32:14.940 Last Char This Block = 175728
	2   applica.. 14:32:14.940 Last Char Received = 175628
	U   applica.. 14:32:14.940 Message Handler - processing complete    

This is repeated in the debug.log.





Summary:
TAR 319533 - AA-NDC: Unsol Dispenser status messages cause extra dial up

Description:
AA-NDC 03.00.02 with dial up comms
   
   When a transaction reply function to dispense cash causes an unsolicited
   dispenser status message to be sent, for example reporting cash low, this is 
   then sent on every following dispense transaction until cash out or
   replenishment action takes place.
   
   The message is sent following the RDY9/B to the transaction reply
   
   When dial up comms is in use, the RDY9/B acts as a final message and the
   connection is disconnected. The unsolicited status message then causes a new 
   connection to be made to send the message.
   
   Many customers pay for the telephone connection on a per call basis, and
   this increases their telephone costs.
   
   In NDC+, the message is sent prior to the RDY9/B, so there is no extra call
   made.




Summary:
TAR 319552 - Terminal command get h/w config does not return class for 5887 and 5362

Description:
   When sending a get config message to the ATM (1???71) the ATM sends a 00
   in the field denoting the hardware model for a P87 and an EP62. 
   (Just the same as TAR 309997)



Summary:
TAR 319552 - Terminal command get h/w config does not return class for 5887 and 5362

Description:
   When sending a get config message to the ATM (1???71) the ATM sends a 00
   in the field denoting the hardware model for a P87 and an EP62. 
   (Just the same as TAR 309997)



Summary:
TAR 319600 - Predial is not performed if no magnetic read condition is satisfied

Description:
 As discussed, there is not pre-dial function performed in AA-NDC 03.00.02 if 
   the magnetic Read does not find a FIT match. 
   
   This means that a Smart card may fail because the dial up has not been
   performed unless there is both a valid read and a valid FIT for the Track 2
   data, even though this is not going to be used in the transaction.




Summary:
TAR 319614 - Card bin "nearly full" status not reported in Supplies status

Description:
Issue on AA-NDC 03.02.
   
   In Replenish Menu - Supplies Status - Card Capture Bin Overfull status is
   reported.
   However, Card Capture Bin Nearly Full is not reported.
   This receives an event also - so should be able to be displayed as well.
   
   Issue reported from Poland PS for PKO BP.




Summary:
TAR 319614 - Card bin "nearly full" status not reported in Supplies status

Description:
Issue on AA-NDC 03.02.
   
   In Replenish Menu - Supplies Status - Card Capture Bin Overfull status is
   reported.
   However, Card Capture Bin Nearly Full is not reported.
   This receives an event also - so should be able to be displayed as well.
   
   Issue reported from Poland PS for PKO BP.




Summary:
TAR 315306: AA-NDC : SOH display option reporting incorrect information

Description:
Customer : NCR Poland
Problem : The SOH menu in application Supervisor is reporting incorrect
information. There are various reported issues and the whole area of option
26. FAULT DISPLAY in application Supervisor needs carefully reviewed and all
of the reported issues, and any others found, sorted out.

Effectively if the platform diagnostics is reporting a SOH issue then the
application Supervisor should also be reporting it.

===================================================================
NCR Poland reported the following various issues with AA-NDC 03.00.02 :-
Customer claims issue about AANDC 3.02 and SOH display and general
readability of SOH display: 

1. INTERLOCK OPEN when Safe door is closed. 
You can easily simulate it by removing cash reject bin, 

2. CASSETTE REMOVED - not reported on SOH in AANDC 03.00.02 but was reported
on AANDC 03.00.00 

3. Not detected real status of INTERLOCK, 

4. Wrong number of errors displayed on top of SOH 
with RECEIPT PRINTER FATAL condition (print head open) 
e.g.: 
NR OF ERRORS: 3 
CASH HANDLER - FATAL 
CASH UNITS - FATAL 
TRANSPORT - FATAL 
RECEIPT - FATAL 
PAPER LOW 
- after closing printhead we have : 
NR OF ERRORS: 3 
CASH HANDLER - FATAL 
CASH UNITS - FATAL 
TRANSPORT - FATAL 
RECEIPT PRINTER 
PAPER LOW 
-so that fact that receipt is FATAL is not treated as error. 

5. Inadequate info about displayed errors and real dispenser status: 
- e.g. - in example above the real situation is: 
PURGE BIN - REMOVED 
TOP CASETTE REMOVED 

- we observed also 
- reports only three cassettes conditions - not reporting
fourth cassette status 

6. When e.g. you go to INS with open safe - there is no info about INTERLOCK

- status is updated when you e.g. change status of one cassette 

Environment: 
AANDC 03.00.01 and AANDC 03.00.02 
XFS 04.02.00 
Windows XP NCR OEM 

Issue was reported by our customer and recreated in our lab. Tested on P75
Rear Access and 5674 FrontAccess. 
==========================================================================

FGSC tests on a Front Access P75 with AA-NDC 03.00.02 confirmed at least
some of these errors or found a different issue.

1) INTERLOCK OPEN reported when cash reject bin removed as above.
2) Nothing reported but Device Status List reports Receipt Printer - Printer

Open when the receipt printer head is open.
3) Nothing reported but Device Status List reports Cassette Removed when a
cassette is removed.





Summary:
Support US Robotics PCI Modem USR5610B

Description:
Support US Robotics PCI Modem USR5610B



Summary:
ERSTE: EJ upload via Network. ANDC 302 impl

Description:
EJ finalisation & upload via network combined with STD CASH replenishment



Summary:
TAR 315849:  Character immediately following left margin control code is omitted

Description:
When using a left margin control code in an AA-NDC screen definition the character immediately following left margin control code is omitted.

E.g. the following screen definition 

30<fs><fs><fs>11<fs>010<ff><si>BAPOSITION AT BA & SET LM=2<esc>[002pDATA FOLLOWING LM=2<cr>CHARACTERS AFTER CR<cr>MORE TEXT AFTER 2ND CR

Has the resulting effect of the letter D being omitted.

Note: - this was initially though to be an issue with shifting out to a different screen. The customer initially thought that AA-NDC was having some form of display issue displaying a nested screen. As it turns out, the reason for the issue was that the shift out character was omitted and thus just displaying the screen number as screen data.




Summary:
GRIT to track removal of problematic GRIT 317641 from 3.01 

Description:
No new GRIT was raised to ensure this was removed (before being reworked) for TAR 315306 - this is so that it can be tracked into the code only



Summary:
CCMVisa2 does not handle unexpected ENQ's

Description:
When CCM Visa2 reveices an ENQ out of place it is not handled appropriatley and causes communication with the host to go "out of synch" 

E.g. <ACK><ENQ><STX>Message<ETX><LRC>



Summary:
TAR 318838:  AA-NDC rejects messages from dial up if the headers are defined and not blank

Description:
The validation of headers in AA-NDC dial-up processing is unclear. The documentation defines that if a header is defined, it should be "Y" or " "
followed by spaces.

The processing in the UK and US have followed different paths. US have taken the fact that a header is defined as indication that it will be present on all messages and therefore they always remove the 8 bytes after checking the first byte. This means that the remaining seven bytes can hold any data that a customer may wish to use, as was anticipated in the header description ("reserved for future use"), but it ignores the defintion that the last seven bytes should all be set to " ". 

The UK processing has assumed that the header is optional and it validates that the header is in precisely the format defined and any other value is treated as data for the application, which will then reject the message.
This ignores the fact that setting the header option is defined as requiring the header to be present.

As a compromise, it has been suggested that the first byte should be checked for "Y" or " ", which are only valid for headers. If this is found, the 8 bytes are removed. If not, then the data is forwarded to the application.

This is raised as an RFC, but depending on the outcome of discussions with the customer in the US who discovered this, a resolution is likely to be required as we have changed the processing from the earlier US NDC+ processing which the US has been using for some considerable time.




Summary:
TAR 318838:  AA-NDC rejects messages from dial up if the headers are defined and not blank

Description:
The validation of headers in AA-NDC dial-up processing is unclear. The documentation defines that if a header is defined, it should be "Y" or " "
followed by spaces.

The processing in the UK and US have followed different paths. US have taken the fact that a header is defined as indication that it will be present on all messages and therefore they always remove the 8 bytes after checking the first byte. This means that the remaining seven bytes can hold any data that a customer may wish to use, as was anticipated in the header description ("reserved for future use"), but it ignores the defintion that the last seven bytes should all be set to " ". 

The UK processing has assumed that the header is optional and it validates that the header is in precisely the format defined and any other value is treated as data for the application, which will then reject the message.
This ignores the fact that setting the header option is defined as requiring the header to be present.

As a compromise, it has been suggested that the first byte should be checked for "Y" or " ", which are only valid for headers. If this is found, the 8 bytes are removed. If not, then the data is forwarded to the application.

This is raised as an RFC, but depending on the outcome of discussions with the customer in the US who discovered this, a resolution is likely to be required as we have changed the processing from the earlier US NDC+ processing which the US has been using for some considerable time.




Summary:
TAR RFC 318085 - Request to add Suspend Mode to the list of operating modes reported

Description:
Update for all Suspend conditions in both NCR and Gasper mode



Summary:
Migrate Automated build / Installer changes into 3.0.x SP devpath.

Description:
Include automated builds for building an SP release and create the SP msi Installer automatically for ANDC3.0.x.



Summary:
ANDC 03.00.03 - Advance NDC Package.htm page shows incorrect version number

Description:
The ANDC 03.00.03 Advance NDC Package.htm page header still shows 'APTRA Advance NDC 03.00.02'

Statement at the bottom of the page still shows '© 2005 NCR Corporation. All rights reserved.'



Summary:
IP issue ANDC REF MAN issue 2 - page 11-30

Description:
the statement 
"Using a locally entered Communications key as the curren tMAC key"
should read
"Using a Communications key as the current MAC key"



Summary:
TAR 318298:  Second nested screen not shown in card before cash transaction with no card in

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a dip reader or motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.


TAR 000000318298 HISTORY SEQ: 2  Transaction date: 02/17/2006 10:03:44------------ TAR Transaction Entered by: Bell, Colin
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Additional information from customer.

Fix is required for both multi vendor and single vendor, however the single vendor issue would seem to be more important at this time.

If fix is an authoring one, authoring instructions are the prefered fix rather than files.




Summary:
TAR 318298:  Second nested screen not shown in card before cash transaction with no card in

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a dip reader or motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.


TAR 000000318298 HISTORY SEQ: 2  Transaction date: 02/17/2006 10:03:44------------ TAR Transaction Entered by: Bell, Colin
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Additional information from customer.

Fix is required for both multi vendor and single vendor, however the single vendor issue would seem to be more important at this time.

If fix is an authoring one, authoring instructions are the prefered fix rather than files.




Summary:
Example Change Package for CheckIn/CheckOut Guide

Description:
Used for writing guidelines to help developers when checking files out and back in to SIE.



Summary:
TAR 318298:  Second nested screen not shown in card before cash transaction with no card in

Description:
When using well formed screen definitions (i.e. as per manual) with a "cash before card" transaction. If the card reader is a dip reader or motorised reader set to eject the card after reading in the card read state, there are screen display issues.

What should be seen is that of the two nested screens, only the second nested screen (normally a please take your cash) screen should be shown. 
Instead neither of the nested screens are shown and essentially to the user only the screen shown during the transaction request state and the close state are shown.


TAR 000000318298 HISTORY SEQ: 2  Transaction date: 02/17/2006 10:03:44------------ TAR Transaction Entered by: Bell, Colin
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Additional information from customer.

Fix is required for both multi vendor and single vendor, however the single vendor issue would seem to be more important at this time.

If fix is an authoring one, authoring instructions are the prefered fix rather than files.




Summary:
 AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
 AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
Memory leaks in CassetteTotal Worker and ClearCashCounts

Description:
Memory leaks have been observed on each transaction and Clear Cash supervisor function.



Summary:
Edit using the Author seems to crash with the new XP Author

Description:
Found during testing of Rogue Migration changes

When I selected the option to Edit a screen element using the author, it crashed. The font editor and color editor worked Ok.

\\sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.02\Developer\RogueWaveMigration





Summary:
CCM VISA 2 Component 91.00.01 

Description:
Certify the above component with AANDC 03.00.03



Summary:
Counters are invalid after power fail on dual dispenser.

Description:
If power fail occured when cash stacked on secondary cash handler counters after restart have invalid values. Last dispensed notes goes to reject and to dispensed as well.



Summary:
Supply and severity wrongly reported on dual dispenser when problem with reject bin

Description:
When reject bin removed from CDM1 and CDM1 selected to dispensing terminal reports severity FATAL (40000). It is not correct becouse CDM2 is OK and still can dispense
Solicited Status
	Device status    : E200000000	(Cash Handler)
		T CODE   : No notes dispensed
		Notes T1 : 00
		Notes T2 : 00
		Notes T3 : 00
		Notes T4 : 00
	Error Severity   : 40000 should not send 4 because CDM2 is OK
	Diagnostic Status: 07010A0200000000000000
	Supply Status    : 12111 
On Get Fitness command reports OK.




Summary:
Ready B/9 message sent when no dispense.

Description:
When recject BIN is removed from secondary cash handler and application tryes to use this devce Ready B/9 message sent when no dispense. Only secondary cash handler is affected.



Summary:
MV EPP issues ANDC 3.0.2

Description:
1. Wincor Key must be loaded in exacly 2 parts. Need to be able to abort key entry at part2 and reload part one again.
2. Wincor/Diebold Need to be able to reset encryptor i.e move to the same mode.
3. Need to be able to offer mode 1-4 and allow the EPP to decide legality of operation.
may conflict with AANDC security requirements. Not sure if AANDC can really detect a VISA PED EPP through XFS.
4.  where mode 3 XOR outwith the encryptor to support wincor.




Summary:
MV  Printing issues ANDC 3.0.2 - for Opteva

Description:
1. Use XFS media control to present the receipt instead of FF as no ESC codes available on opteva.




Summary:
 AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
 AANDC 03..00.01 reports cassette fitness fatal when missing

Description:
Not present, missing cassettes are reported in the send configuration
command response as having a fatal fitness. 
In NDC+ and AANDC 02.06.05, these missing cassettes do not have a fatal
fitness (4), it should be 0. 

This is the scenario: 
1.- ATM is configured with cassette types 1,2 and 3. 
2.- Then, SW is installed from scratch. XP, XFS 4.2, AANDC 3.0.1 
3.- ATM finally boots, AANDC is loaded, download is sent, and a Get Config
command is issued by the host. The trace shows the answers received by the
host. Notice that the trace for NDC+ 7.1 is different from AANDC 3.0.1. If a 
cassette is not present, it?s fitness is 0. In AANDC 3.0.1, if not present,
the fitness is reported as 4. 

NDC+ 
22~001005675~~F~10001~0000000000000000000000~107F000101020201000000C800000101
0100107F7F00~00011111000000010110000~000000011110~070001~G530-0205 

AA-NDC 03.00.01 
22~001005875~~F~10001~0000000000000000004000~167F000301020401000000C700000101
020010017F00~00011111000000011100000~000001011111~030001~G531-0283 

This is causing issues in Gasper where the "Fatal" condition of the missing
type is confusing customer Helpdesks.  




Summary:
TAR 316842 - AA-NDC - Solicited Message received on 10th Consecutive Night Safe No Drop

Description:
Solicited Message (22 <fs> 000 <fs> 8 <fs> K1 <fs> 2 <fs> 02 <fs>)1)  sent on 10th consecutive Night Safe Deposit "no drop" instead of unsolicited.

Perform Night Safe Transaction - allow transaction to timeout where no bag is dropped - press Cancel.  Unsolicited Statsus Message should be sent on 10th consecutive no drop. Testing performed as per NDC+ Test Spec.




Summary:
Supply reported wrongly on retract message (dual dispenser)

Description:
In retract unsolicited response terminal reports primary cash handler supply instead combined on dual dispenser machine.



Summary:
Terminal does not go to suspend mode if other cash handler is FATAL

Description:
If the 2nd cash handler in a Dual Dispenser is fatal due to a retract bin being removed, or the shutter being open and notes in transport, and if 1st cash handler goes to suspend application does not change mode to SUSPEND.



Summary:
Remove the release bulletin from the component MSI - only include it on the install disk

Description:
Release bulletin keeps changing up to the last minute (e.g. to detail latest known problems), and because the bulletin is included in the MSI, this means re-building the MSI.

Discuss with RichardL if there's a good reason for installing the bulletin to maps_global.



Summary:
Enhance EJ UT - If Invalid Backup Mode values sent in option digit 36 system defaults to STANDARD

Description:
Enhance EJ UT - If Invalid Backup Mode values sent in option digit 36 system defaults to STANDARD



Summary:
Enhance EJ UT - If Invalid Backup Mode values sent in option digit 36 system defaults to STANDARD - Incorrect

Description:
Enhance EJ UT - If Invalid Backup Mode values sent in option digit 36 system defaults to STANDARD - Incorrect



Summary:
Change AANDC to a Single EXE to remove sychronisation issues between multiple applications

Description:
Change AANDC to a Single EXE to remove sychronisation issues between multiple applications




Summary:
Support for the Telequip Coin Dispenser (as NDC+ equivalent functionality - 4 hopper)

Description:
Requirement ID AANDC31 11.116.
Support for the Telequip Coin Dispenser (as NDC+ equivalent functionality included in AANDC base product).




Summary:
Support the P86 and P76M Coin Dispenser (8 hopper)

Description:
Requirement ID AANDC31 11.115.
Support the P86 and P76M Coin Dispenser.

Latest Coin Dispenser in P86 and 6676 is 8-hopper Telequip unit.  Universal will have either 8-hopper Telequip unit (with USB) or an option for 1 or 2 3-hopper units (3 to 6-hoppers total).  EE and MEA are using the 8-hopper Telequip unit now, with local customizations, and their AANDC requirement is: Support Coin Dispense as in NDC+, but for up to 8 denominations of coins instead of 4.



Summary:
Support Universal 2D Bar Code Reader "Read Barcode" functionality

Description:
Requirement ID AANDC31 11.043.
Support Universal 2D Bar Code Reader "Read Barcode" functionality.

Provide capability to read barcodes, e.g. as part of a bill payment transaction, via Universal Barcode Reader.
Note:  Implementation needs to take into consideration migration of existing PS customisations (e.g. retain host compatibility with Russian PS customisation).



Summary:
Support New Universal Dispenser "Bunch 50 instead of 40" functionality

Description:
Requirement ID AANDC31 11.006.
Support New Universal Dispenser "Bunch 50 instead of 40" functionality.

Support an increase in the bunch size to 50 notes from the current 40 notes on the new Universal Dispenser.



Summary:
AANDC must not use the ADI2 proprietary interface

Description:
Requirements ID AANDC31 8.002.
AANDC must not use the ADI2 proprietary interface.




Summary:
TAR 317080 - Refunded notes removed too quickly, GBNA made fatal by NDC

Description:
Scenario is that if notes are deposited, the confirmation screen is displayed and then the transaction cancelled (Refund notes) - if these notes are taken immediately, ie as soon as they are visible/accesible then the applicaiton makes the GBNA fatal and not available for further transactions. 
Easily recreated.

Full description from PS below:

Refunded notes removed too quickly, application assume notes still at escrow while close state

Test scenario:
Start a transaction
Select BNA transaction
Insert a bunch of valid notes
Remove rejected notes (if any)
While on Confirmation screen, press cancel.
When notes refunded, remove it immediately (before Please Take Notes screen is displayed) Transaction end.

Subsequent transaction:
Start another BNA transaction.
Hardware error screen is displayed. Shutter did not open to accept cash.

Debug log Analysis

A) Normal Case: RollbackOK triggered before Taken event

Sequence of event:
1) Application issues Rollback
2) RollbackOK - escrow counts are reset to 0 in this event.
3) When notes removed, Taken event triggered.

SEACust.. 19:00:52.093 Calling RollBack....
SEACust.. 19:01:06.031  GBNA_RollbackOK SEACust.. 19:01:06.078 Activating - CalculateEscrowedNotes .
.
SEACust.. 19:01:12.171 GBNA_Taken
SEACust.. 19:01:12.218 Deactivating - Refund


B) Exceptional Case: Taken event triggered first

1) Application issues Rollback

2) Debug log does not shows RollbackOK triggered while in Refund script.
Escrow Count NOT being reset to 0. 
   Taken event triggered and Refund script deactivated.

SEACust.. 19:03:38.406 Calling RollBack....
SEACust.. 19:03:51.921 GBNA_Taken
SEACust.. 19:03:51.984 Deactivating - Refund
.

3) While in close state, Escrow Count > 0, application assume notes still in 
escrow, and attempt to vault the notes:
 
SEACust.. 19:03:52.078 In BNA Close State, BNA Fitness = [0],
TempEscrowCount = [3]  
SEACust.. 19:03:52.125 Activating Close State Vault

SEACust.. 19:03:55.843 Calling GBNA.CashInEnd

4) However, CashInEnd failed as notes already refunded earlier:

SEACust.. 19:03:57.328 Error.Description : Device:
BillAcceptor1,Description: CashInEnd; Cash In has not active

5) BNA Fitness being set to fatal. No subsequent BNA transaction possible.

SEACust.. 19:03:58.140  GBNA_CashInEndFailed 3
SEACust.. 19:03:58.515 WORKGROUP SET FITNESS
FITNESS = 4




Summary:
Change all beginthread() calls to beginthreadex() calls

Description:
Change all beginthread() calls to beginthreadex() calls
Raised as a result of discussion of 6/2/2006. Minutes attached.
This change is believed to have solved a TAR problem.

Microsoft recommended us to use the beginthreadex() call. It makes sense to follow this recommedation through.
Our code uses both calls - it is not risky to make this change as we have good experience with both calls - we know where they differ.



Summary:
Test with SolidCore for APTRA

Description:
Security team will be releasing a new product: SolidCore for APTRA. This needs to be integration tested with ANDC to ensure compatibility with each new version of ANDC. Can tests be added to the ANDC ITS.



Summary:
Minor memory leak (32K bytes) reported by BoundsChecker.

Description:

Boundschecker reports a leak of 32K bytes for an allocation of memory when exiting the program. temp pointer is never deleted on exit - making the array of data static will overcome and remove the issue.

Type	Quantity	Total (bytes)	Allocation Location	Sequence

Leak exiting program	1	32,767	WriteNVRAMFile - [mpersistentmemorypc.cpp, line 674 (SSDSmPersistentMemory.dll)]	54
Memory Leak Exiting Program: Address 0x01C70048 (32767) allocated by global_operator_new.

Allocation Call Stack - Thread 0 [0x09E0]
WriteNVRAMFile	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorypc.cpp	674
Put	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorypc.cpp	197
Put	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorycommon.cpp	511
PutInteger	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\mapsrtcore\sources\cpp\persist.cpp	820
DoIt	c:\ntglobal\memtest\memtest.cpp	24






Summary:
Minor memory leak (20 bytes) reported by BoundsChecker.

Description:

Boundschecker reports a leak of 20 bytes for an allocation of a security descriptor when exiting the program.  LocalFree needs to be called after security descriptor is finished with.

commonutilities\sources\cpp\mpersistentmemorycommon.cpp

void mPersistentMemory::CreateIndexSem()
{
    // initialise security descriptor
    PSECURITY_DESCRIPTOR pSecDescriptor = (PSECURITY_DESCRIPTOR) LocalAlloc(LPTR, SECURITY_DESCRIPTOR_MIN_LENGTH); 

Local Alloc never freed.


Type	Quantity	Total (bytes)	Allocation Location	Sequence

Leak exiting program	1	20	CreateIndexSem - [mpersistentmemorycommon.cpp, line 190 (SSDSmPersistentMemory.dll)]	53
Memory Leak Exiting Program: Address 0x0024FF98 (20) allocated by LocalAlloc.

Allocation Call Stack - Thread 0 [0x0250]
CreateIndexSem	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorycommon.cpp	190
mPersistentMemory	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorycommon.cpp	134
DllMain	c:\development\sandboxes\extended\03tars\ssds\interdomain\components\commonutilities\sources\cpp\mpersistentmemorycommon.cpp	75
_DllMainCRTStartup	C:\NTGLOBAL\Final\XFS\Debug\SSDSmPersistentMemory.dll!0x0000004b	
	C:\WINDOWS\system32\ntdll.dll!0x000011a4	



Summary:
GBXX config utility - XML file to be in AANDC path for APTRA Security

Description:
XML file is currently in  which is not a directory available to AANDC when APTRA Security is installed. Instead the XML file should be moved to the data directory under the Program Files\NCR APTRA\Advance NDC directory, in line with the other data files



Summary:
TAR 317303- AA NDC - ATM remains on OOS screen after toggling to supervisor

Description:
Platform -> XFS 04.02.01
Application -> AA NDC 02.06.06
iMCRW

This hang was seen during WestPac Certification testing. The following test sequence should be followed repeatedly to recreate the hang.

"...  Repeated the following steps:
	1  ATM Open
	2  Insert card, cancel on PIN entry
	3  Insert and hold card to cause jam - ATM suspends
	4  Toggle to supv while holding card - IMCRW goes fatal
	5  On select Menu, choose diags
	6  Display DSL - verify IMCRW Fatal
	7  Exit DSL, Diags, Supv
	8  Toggle to normal - ATM+host executes supv exit seq, ATM reports fatal on
	   open and is closed by host
	9  Toggle to supv
	10 On select Menu, choose diags
	11 Display DSL, remove card, clear fault entering & removing card as prmpted
	12 Exit DSL, Diags, Supv
	13  Toggle to normal - ATM+host executes supv exit seq ..."

This hang is seen when the system is toggled from supervisor to normal where the supervisor exit is successful. The host sends a an open command (GIS message), the ATM sends a Ready 9 however the ATM remains in the OOS state.
Switching to supervisor makes no difference - the ATM stays in the OOS state ....toggling to the supervisor windo shows a blank screen.

Ranjith has been involved in this investigation  - if more details are required contact Ranjith Suresh or Duncan Harvey.






Summary:
TAR 317303- AA NDC - ATM remains on OOS screen after toggling to supervisor

Description:
Platform -> XFS 04.02.01
Application -> AA NDC 02.06.06
iMCRW

This hang was seen during WestPac Certification testing. The following test sequence should be followed repeatedly to recreate the hang.

"...  Repeated the following steps:
	1  ATM Open
	2  Insert card, cancel on PIN entry
	3  Insert and hold card to cause jam - ATM suspends
	4  Toggle to supv while holding card - IMCRW goes fatal
	5  On select Menu, choose diags
	6  Display DSL - verify IMCRW Fatal
	7  Exit DSL, Diags, Supv
	8  Toggle to normal - ATM+host executes supv exit seq, ATM reports fatal on
	   open and is closed by host
	9  Toggle to supv
	10 On select Menu, choose diags
	11 Display DSL, remove card, clear fault entering & removing card as prmpted
	12 Exit DSL, Diags, Supv
	13  Toggle to normal - ATM+host executes supv exit seq ..."

This hang is seen when the system is toggled from supervisor to normal where the supervisor exit is successful. The host sends a an open command (GIS message), the ATM sends a Ready 9 however the ATM remains in the OOS state.
Switching to supervisor makes no difference - the ATM stays in the OOS state ....toggling to the supervisor windo shows a blank screen.

Ranjith has been involved in this investigation  - if more details are required contact Ranjith Suresh or Duncan Harvey.






Summary:
TAR 317299:  AA NDC - App. hang, toggling mode switch has no effect no messages sent

Description:
Full Description: 
Platform ->  XFS 04.02.01
Application -> AA NDC 02.06.06

The problem reported in is that during WestPac testing several hangs were observed. This TAR details the first hang where, after following a predefined test sequence, the system would hang. The application would respond by issuing a mode change leaving supervisor (i.e. P20 sent) when the mode switch was toggled, but no further messages could be sent/ received. 

The sequence that the Customer followed to recreate this issue is as
follows:- 

"... repeated the following steps:
	1  ATM Open
	2  Insert card, cancel on PIN entry
	3  Insert and hold card to cause jam - ATM suspends
	4  Toggle to supv while holding card - IMCRW goes fatal
	5  On select Menu, choose diags
	6  Display DSL (device status list) - verify IMCRW Fatal
	7  Exit DSL, Diags, Supv
	8  Toggle to normal - ATM+host executes supv exit seq, ATM reports fatal on 

 	   open and is closed by host
	9  Toggle to supv
	10 On select Menu, choose diags
	11 Display DSL, remove card, clear fault entering & removing card as prmpted
	12 Exit DSL, Diags, Supv
	13 Toggle to normal - ATM+host executes supv exit seq

	In this instance, on the 8th cycle at step 8, supv exit sequence did not 
	complete.  R09 and P20 sent, host close received & Ready 9'd, no further 
	messages logged

	Subsequent toggle to supv had no effect
	Subsequent toggle to normal had no effect  ..."


For further details of this issue contact Ranjith Suresh or Duncan Harvey





Summary:
TAR 317299:  AA NDC - App. hang, toggling mode switch has no effect no messages sent

Description:
Full Description: 
Platform ->  XFS 04.02.01
Application -> AA NDC 02.06.06

The problem reported in is that during WestPac testing several hangs were observed. This TAR details the first hang where, after following a predefined test sequence, the system would hang. The application would respond by issuing a mode change leaving supervisor (i.e. P20 sent) when the mode switch was toggled, but no further messages could be sent/ received. 

The sequence that the Customer followed to recreate this issue is as
follows:- 

"... repeated the following steps:
	1  ATM Open
	2  Insert card, cancel on PIN entry
	3  Insert and hold card to cause jam - ATM suspends
	4  Toggle to supv while holding card - IMCRW goes fatal
	5  On select Menu, choose diags
	6  Display DSL (device status list) - verify IMCRW Fatal
	7  Exit DSL, Diags, Supv
	8  Toggle to normal - ATM+host executes supv exit seq, ATM reports fatal on 

 	   open and is closed by host
	9  Toggle to supv
	10 On select Menu, choose diags
	11 Display DSL, remove card, clear fault entering & removing card as prmpted
	12 Exit DSL, Diags, Supv
	13 Toggle to normal - ATM+host executes supv exit seq

	In this instance, on the 8th cycle at step 8, supv exit sequence did not 
	complete.  R09 and P20 sent, host close received & Ready 9'd, no further 
	messages logged

	Subsequent toggle to supv had no effect
	Subsequent toggle to normal had no effect  ..."


For further details of this issue contact Ranjith Suresh or Duncan Harvey





Summary:
Use the new automated Service Pack builder and installer creation in 3.1.1 SP release

Description:
Contact MikeS and JimD for more info.



Summary:
TAR 314698 - Request for Gasper SNMP traps to be the default in AA-NDC App Management

Description:
Set default from 1 to 0 in AdvanceNDC.reg file and update IPS



Summary:
Populate INI file for GBNA from Supervisor

Description:
To allow activation/de-activation and ordering of note reporting for the GBXX driver, an INI file will be created by the application. RFC is to discuss populating this file from a Supervisor menu to ensure the data is in the correct format



Summary:
Re-engineering - Improve effectiveness of code reviews

Description:
QA 4 - Improve effectiveness of code reviews



Summary:
Re-engineering - Establish quality targets at module level (& expand unit testing)

Description:
QA 3 (& TS 3) - Establish quality targets at module level (& expand unit testing)



Summary:
Re-engineering - Refactor Status Handler code to improve maintainability

Description:
Refactor Status Handler code to improve maintainability.  A unit test environment should also be created for maintainability.




Summary:
When cheque is captured, local endorse is required

Description:
Requirement ID AANDC31 11.226.
When cheque is captured, local endorse is required.

When a cheque is captured due to a hardware problem or a problem with the document, INBURSA would like the application to endorse the cheque with the card number, date, time, and ATM ID.



Summary:
TAR 310490	- Please change the way AANDC and CPM interact to be same as the BNA device

Description:
Requirement ID AANDC31 21.058.
TAR 310490	Please change the way AANDC and CPM interact to be same as the BNA device

Requirement modified as follows:
Add TSN and masked Track2 data to CPM screens U0058 and U0059



Summary:
TAR 292173	- Change requested to regit.vbs to prevent AANDC Controls being deregistered

Description:
Requirement ID AANDC31 21.045.
TAR 292173	Change requested to regit.vbs to prevent AANDC Controls being deregistered




Summary:
TAR 277074	- AA-NDC - Change Timers to Synchronisers to reduce time of CPM transaction

Description:
Requirement ID AANDC31 21.031.
TAR 277074	AA-NDC - Change Timers to Synchronisers to reduce time of CPM transaction

RFC: Change CPM related timers to Sychronisers to improve CPM performance.  

An investigation took place at UK PS and they found that by changing the detailed timers you can reduce the time of the CPM transaction.   Engineering investigated this and found that better than reducing the timers you should change them to Synchronisers - this was tested and was also found to reduce the time of the CPM transaction by up to 2 seconds.  This RFC is to make this engineering recommendation part of the released product.

(ref implementation details in TAR RFC)

HSBC have reported that they have seen a hang in this area since they have implemented this change but have not been able to recreate with good debug - it is thought that the timers which we have replavced with Synchronisers were introduced by Ranjith for a problem which he resolved onsite at Barclays - It would be an idea to investigate with Ranjith berfore imeplemnting this change in base product.



Summary:
TAR 270388 - AA-NDC: Request change to handling of bad CPM transactions

Description:
Requirement ID AANDC31 21.025.
TAR 270388	AA-NDC: Request change to handling of bad CPM transactions

RFC: Print a receipt for the customer, as proof that the ATM still has their cheque, when a CPM cheque deposit transaction does not succeed, but the cheque is not returned to the customer.

Currently if a cheque is unable to be placed in a CPM pocket (because it is blocked as part of their system testing), there is a correct device status message sent to the host and an adequate message displayed to the customer on the screen, but nothing is printed to the receipt or journal (as with other transactions that do not succeed).  
This means that customers are left with no proof that they have made a cheque deposit.

UK PS have agreed to make the necessary customisations to the HSBC application since an RFC would not meet their timescales, but UK PS have agreed to supply details of their customisation when completed in case this RFC is accepted.



Summary:
TAR 255036 - Support CPM Cheque Image Print

Description:
Requirement ID AANDC31 11.190.
TAR 255036 - Support CPM Cheque Image Print

RFC: Support printing of a CPM image, lifted from a cheque, on the receipt. 

AA-NDC does not support printing of CPM image lifted from cheque on the receipt. Previous knowledge indicated it had been supported from AA-NDC 2.02, but review of archives shows this was only released as a UK special.

Customer has been given a workaround for demonstration purposes, but to provided tis feature which NCR has been marketing as a competitive advantage, proper support is needed.

This feature is not supported by ANDC product.  For ANDC 2.02, a special was created for UK customer.  With agreement of FGSC, status of TAR is changed to RFC for consideration at CCB.



Summary:
TAR 248118	- Requirement for a "CPM Printhead Fitness" worker in AA-NDC

Description:
Requirement ID AANDC31 21.015.
TAR 248118	Requirement for a "CPM Printhead Fitness" worker in AA-NDC.

RFC: Provide an indication when the CPM printhead has gone FATAL so that the cheque deposit transaction can be taken out of service (as some customers require mandatory cheque endorsement). 

The AA-NDC CPM Fitness worker only reports the fitness of the CPM device.  When the printhead goes FATAL, this is only a WARNING, so the device fitness is still HEALTHY. The application needs to know when the CPM printhead has gone FATAL so that it can take the cheque deposit transaction out of service as some customers require mandatory cheque endorsement. 

A "CPM Printhead Fitness" worker is therefore required.

The reason this RFC was raised is that the overall fitness of the CPM does not go fatal when the print head goes fatal, and there is no way of identifying the print head fitness separately from the overall device fitness in AA-NDC. The CPM device is behaving correctly as designed. The reason that the overall device does not go fatal is that the CPM is still able to accept checks, it just can't endorse them. Not all applications require check endorsing, so it would be wrong to take the device off-line.  However, if the endorsing is mandatory (i.e.. Nationwide) the application needs to know when to disable the CPM transaction.




Summary:
TAR 177235 - Incorrectly inserted cheques are accepted

Description:
Requirement ID AANDC31 21.007.
TAR 177235	Incorrectly inserted cheques are accepted.

RFC: Modify the MICR Code line data validation done by NDC to include checking if the data returned has mis-read characters, and if so, to use this to workout if the cheque is the correct orientation.

Currently (reported on AANDC 2.02) some cheques, when inserted with the MICR on the left rather than the right, are still reported by the CPM service with a code line.  APTRA Advance NDC just checks the length and if greater than 3 accepts the code line data as valid even if mis-read characters (!) are present in the code line data.  
(This means cheques must be re-processed manually at some point afterwards?)

Reasons to Change: 
- (shouldn't the CPM driver ensure cheques are inserted correctly?)




Summary:
Capture the cheque if it fails to be returned to the cardholder, and print a receipt for the cardholder

Description:
Requirement ID AANDC31 11.212.
Capture the cheque if it fails to be returned to the cardholder, and print a receipt for the cardholder




Summary:
Support for CPM device through CEN-XFS 3

Description:
Requirement ID AANDC31 11.085.
Support for CPM device through CEN-XFS 3




Summary:
Support CPM2 Stacking Bin

Description:
Requirement ID AANDC31 11.084.
Support CPM2 Stacking Bin.




Summary:
Support CPM4 Stacking Bins

Description:
Requirement ID AANDC31 11.079.
Support CPM4 Stacking Bins.




Summary:
Support Basic and Enhanced Remote Key Management on EPP (NCR Signature based)

Description:
Update AANDC to support 'Enhanced' Remote Key Management



Summary:
Support for Left & Right Margin in a Printer Independent manner

Description:
Support for Left & Right Margin in a Printer Independent manner



Summary:
Support Universal Printer Character Sets (Code Pages)

Description:
Requirement ID AANDC31 21.066.
Support Universal Printer Character Sets (Code Pages)
Support legacy International & Arabic Character Sets as well as Universal Code Pages



Summary:
Re-implement the usage of Rogue Wave library by using Microsoft's STL

Description:
Re-implement the usage of Rogue Wave library by using Microsoft's STL.
Change Advance NDC code so that it does not make use of Rogue Wave Library.
The Microsoft STL should be used instead.
This is to overcome problems with migration to new Studion 2005 and dependency on third party (expensive licence).



Summary:
Support Universal Thermal Printer resolution up to 203dpi.

Description:
Requirement ID AANDC31 11.025.
Support Universal Thermal Printer resolution up to 203dpi (was 150dpi).




Summary:
Support Universal Thermal Receipt & Journal Printers "User-defined Character sets" functionality

Description:
Requirement ID AANDC31 11.021.
Support Universal Thermal Receipt & Journal Printers "User-defined Character sets" functionality.

AANDC countries known to use downloadable character sets: 
 - Czech
 - Greece 
 - UK (single characters downloaded)




Summary:
Support Universal Thermal Receipt & Journal Printers "Barcode Print (1D)" functionality

Description:
Requirement ID AANDC31 11.017.
Support Universal Thermal Receipt & Journal Printers "Barcode Print (1D)" functionality.




Summary:
Ensure the product is backwards compatible

Description:
Requiremnent ID AANDC31 8.001.
Ensure the product is backwards compatible, so that the functionality of the previous release of the product will continue to work in exactly the same way in the new release of the product, unless the customer takes a prescribed action to start utilizing any new or changed functionality that is in the new release of the product.




Summary:
TAR 316842 - AA-NDC - Solicited Message received on 10th Consecutive Night Safe No Drop

Description:
Solicited Message (22 <fs> 000 <fs> 8 <fs> K1 <fs> 2 <fs> 02 <fs>)1)  sent on 10th consecutive Night Safe Deposit "no drop" instead of unsolicited.

Perform Night Safe Transaction - allow transaction to timeout where no bag is dropped - press Cancel.  Unsolicited Statsus Message should be sent on 10th consecutive no drop. Testing performed as per NDC+ Test Spec.




Summary:
TAR 316161 - Shift out character at the end of a screen data causes app core to crash

Description:
Screen data defined as follows

121<si>ABBLAHBLAH<so>

i.e. a shift out at the end of screen data (known to be incorrect usage of the <so> character) will cause the application core to crash with the error "Abnormal Program Termination"
Although the data was clearly incorrect, the application should handle this more gracefully, e.g. reject screen data download message or alter screen data removing the shift out character.




Summary:
When calling SetDevice for GBxx use ActiveXFS aliases directly.

Description:
We have ActiveXFS aliases set up for use in ANDC.  CashInModule2 is used to map to BillAcceptor1.  We should use SetDevice(CashInModule2) to connect to GBxx, rather than getting list of device names from GetDaviceNames call, as this list can vary depending on other aliases which may be set up.



Summary:
Add tests to XFSTester class for forms (update to ooxfs unit test)

Description:
Adding new tests for printing with forms



Summary:
Reference Manual - Error in info in Table 10-31 for BNA Encash, Print and Set Next State 

Description:
In Table 10-31 on page 10-77 of the Reference Manual (Terminal Functions for Transaction Completion).  The last entry in the Operation column for BNA Encash, Print and Set Next State details 'If notes are successfully refunded and taken.....'.  This should read 'If notes are successfully encashed...'.



Summary:
TAR 315852 - No counts reported to Host after GBNA hardware problem resolved

Description:
Transaction Request sent to the Host after a cash deposit does not include the note counts if an error has occurred with the GBNA, as per attached message (note only BNA indicator, no counts:

22:45:42  # 81    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1<[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000420245
7[Unicode-x1C]w]

After restarting AA-NDC, the correct format was sent:

22:51:39  # 145    [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1=[Unicode-x1C];9012345678924611357924680?[Unicode-x1C][Unicode-x1C]C      
[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]21234100000000000000000000000000000000000000000000000230300058000430246
1[Unicode-x1C]w02001030010400105001]




Summary:
Migrate Automated build / Installer changes into 3.1.

Description:
Include automated builds for building the full sandbox and create the msi Installer automatically for ANDC3.1.



Summary:
TAR 315849:  Character immediately following left margin control code is omitted

Description:
When using a left margin control code in an AA-NDC screen definition the character immediately following left margin control code is omitted.

E.g. the following screen definition 

30<fs><fs><fs>11<fs>010<ff><si>BAPOSITION AT BA & SET LM=2<esc>[002pDATA FOLLOWING LM=2<cr>CHARACTERS AFTER CR<cr>MORE TEXT AFTER 2ND CR

Has the resulting effect of the letter D being omitted.

Note: - this was initially though to be an issue with shifting out to a different screen. The customer initially thought that AA-NDC was having some form of display issue displaying a nested screen. As it turns out, the reason for the issue was that the shift out character was omitted and thus just displaying the screen number as screen data.




Summary:
TAR 315849:  Character immediately following left margin control code is omitted

Description:
When using a left margin control code in an AA-NDC screen definition the character immediately following left margin control code is omitted.

E.g. the following screen definition 

30<fs><fs><fs>11<fs>010<ff><si>BAPOSITION AT BA & SET LM=2<esc>[002pDATA FOLLOWING LM=2<cr>CHARACTERS AFTER CR<cr>MORE TEXT AFTER 2ND CR

Has the resulting effect of the letter D being omitted.

Note: - this was initially though to be an issue with shifting out to a different screen. The customer initially thought that AA-NDC was having some form of display issue displaying a nested screen. As it turns out, the reason for the issue was that the shift out character was omitted and thus just displaying the screen number as screen data.




Summary:
If Promote and AANDC included in the same aggregate. AANDC apps dont start up

Description:
When Promote and AANDC is included in the same aggregate and installed using an IUI the AANDC apps dont start up. this is because Promote is not installed properly.



Summary:
When 2 cassettes of same type installed, removing 2 only sends 1 message

Description:
A TI sensor message should be sent on removal and insertion of each physical cassette, but when 2 cassettes of the same type are in the dispenser, only one message is sent when both are removed. Wosatool shows that the SP returns 2 events in this case.



Summary:
TAR 315400 -  M-status for EJ is a single character, should be 2 characters

Description:
Customer DBS, Singapore has reported that the m-status values returned from the Electronic Journal (EJ) are only a single digit, they should be 2
digits.   The single digit returned causes issues with Gasper.

Recreated by FGSC in the lab with 02.06.05, by enabling EJ only, and then filling the EJ using print immediate commands.

The unsolicited status messages generated for low and full conditions are :

16:11:57  # 1851    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H0[Unicode-x1C]2[Unicode-x1C]0[Unicode-x1C]2111]

16:14:44  # 2128    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H1[Unicode-x1C]4[Unicode-x1C]5[Unicode-x1C]3111]

The m-status values reported are "0" and "5", they should be "00" and "05" 
as per the message definition for field g4 :

"There are certain rules which are followed by all devices:
Characters 1 and 2 contain a main error status value (M-Status) in the range 0-99, transmitted as two characters which give the decimal representation of the M-Status value."





Summary:
Update to security information for Secure Key Entry functionality

Description:
Secure Key Entry should be documented as being used for standards compliance rather than for additional security - see info from Charlie Harrow below

Hi Stephen,

Interesting question. The decision about what is and what is not secure rests with the institution that takes the risk. Secure key entry is the method that has been advocated in security standards for years, it's nothing new. Banks have previously taken the view that the convienience of using the Op panel on TTW machines, or the improved usability of using the FDKs on FA machines, has outweighed the security risks of key components being compromised. What's different now is that the card associations are mandating that banks start to follow best security practices, and that's the role of resticted mode. I would advise promoting secure key as offering standards compliance rather than additional security. 

Best regards,
Charlie




Summary:
TAR 315952 - Supplies status wrong in get config response for empty cassettes

Description:
Supplies status wrong in get config response for empty cassettes




Summary:
Re-implement GRIT 317641 in AANDC 3.01

Description:
GRIT fix introduced TI issues - needs to be reimplemented.



Summary:
Implement fix for Access Violation on deposit with Promote into 3.01

Description:
Implement TAR 315140 into AANDC 3.01 to resolve any potential memory issues in 3.01.



Summary:
IP information to include recommendations on GBXX configuration from Craig Nicol 

Description:
We are providing a configuration utility for GBXX. This should be accompanied by documentation in an existing IP or through a white paper, to give guidelines on configuring the GBXX using the information from the driver team. See attachment for details.



Summary:
documentation was installed on the SST.

Description:
A very minor issue we saw during the most recent installation testing was that some CCM VISA 2 documentation was installed on the SST.
For this ANDC service pack this will just be an outstanding issue, but it looks like CCM VISA2 may have a different delivery option for documentation than AANDC, 
we only ever install documentation on the PC.



Summary:
Tech pubs require to be updated

Description:
Tech pubs require to be updated to include details regarding the changes to the initialization string for the PCI modem and the new configuration task added to diagnostics. RFC 322870



Summary:
CCMVisa2 docs need updated

Description:
UTS, ITS, DS, FS ...etc. need to be updated to account for changes made for diagnostics, Aptra Security and modem certification.



Summary:
Diagnostic task: Fails to display correct message when the xml file is read only.

Description:
Whenever the user attempts to update the com port in the xml file, and the xml file is read only, the user should be prompted with a screen informing them that the xml file is read only and the update has been unsuccessful. This is not currently the case.



Summary:
Un-install: files remain on pc after the un-install

Description:
the bin directory and all CCMVisa2 files remain on the pc even after CCMVisa2 has been un-installed.



Summary:
UT: Diagnostic tests required to be updated.

Description:
The diagnostic tests need to be updated.
These tests make certain assumptions that do not hold true for every situation.




Summary:
Access violation on deposit transaction with RFC 300868

Description:
The following problem exists on 3.0.2 also.

Products Affected: 6676 
Platform OS: XFS 4.1.0 
Application: AA-NDC 2.06.05 with RFC 300868 
Other Software: Promote 2.05.01 
Environment: Live & Development 
Frequency: about 1 in 3 deposits on live system 

During controlled deployment of Americas AANDC 2.07.10 (based on Dundee
AANDC 2.06.5) it was found that the ATM will intermittently reboot during a
deposit transaction. The reboot happens just after the tran reply is
received and timer 4 is started. The live ATMs had been experiencing the
problem about 3 times per day. 

Both the Lab ATM and the live ATM are running a Promote campaign with a
Please wait graphic screen. The reboot occurs when this screen is displayed. 

For Full Description of this TAR see the attachment to this GR1T.





Summary:
TAR 315265: Hang occurs if Notes are withdrawn after the Notes Processing screen displays

Description:
NCR Malaysia/Maybank performed the following test in the course of UAT: 

1. Insert notes 
2. Allow screen to move to Processing Notes 
3. Remove Notes. 

The correct events were received by the BNA Enable script and were all
visible in the debug logs however control never transferred to the Calculate 
totals workgroup. 

Looking at the debug logs from Malaysia (who had added some additional debug 
messages into their flow, the followinf sequence was seen: 

NotesInserted - notes entered - move to Processing notes 
InputRefuse - expected because the notes were held so they did not pass the
sensors 

Notes Presented - notes seen at the input slot again 
Notes Taken - as expected 

Error event for the Input Refuse 

then the following sequence: 

SEACust.. 11:22:57.250 acceptance complete 
<wid>102n5304dc128</wid> 

SEACust.. 11:22:57.265 acceptance complete 
<wid>102n5304dc128</wid> 
(apparently one each for Taken and Error event?) 
SEACust.. 11:22:57.265 BNA Rejected Notes have been Taken - Enable continues 
automatically. 
<wid>41m2s1</wid> 

SEACust.. 11:22:57.265 Taken Caller has signalled 
<wid>40m2s1</wid> 

SEACust.. 11:22:57.281 in stop fdks mei and beep off director pass thru
signalled 
<wid>127n5304dc128</wid> 

??




Summary:
TAR 315232: Confirmation screen displayed after notes retracted

Description:
Application should not proceed to the Confirmation screen when the notes are no longer in escrow. 

This has been tested with the following procedure: 

(enable retract option 45 007) 

1 Start a transaction 
2 Select BNA transaction 
3 Insert 20 valid notes 
4 Remove rejected notes (if any) 
5 Verify notes counts are correct on Confirmation screen. 
6 Press Add More on the confirmation screen 
7 Insert 20 invalid notes 
8 Do not take the rejected notes. Wait for timeout. 
9 Do not select any option on timeout screen. 
10 Remove the notes when the device attempts to retract it. 

After notes removed, Confirmation screen displayed with the same notes count 
as per step 5 above. 

The application should not display this screen following a retract operation 
- the cardholder is no longer there (it is assumed). 

If the confirmation screen is there, we can select deposit or cancel, add
more. None of these options are valid because the transaction has ended,
eg. 

Press cancel on confirmation screen -> hardware error screen shown. 

The Debug log shows RollbackFailed with the following XFSErrorEvent: 
SEACust.. 17:24:05.781 Error.Description : Device:
BillAcceptor1,Description: Rollback; Cash In has not active 

The retract operation has ended the transaction so rollback is not
possible. 

The main issue is that the confirmation screen should not be displayed
following a retract, thus avoiding the subsequent errors.





Summary:
TAR 315311: AA-NDC 03.00.02 reports incorrect values for notes entered in cash deposit

Description:
If notes of varying denominations are entered into the BNA in AA-NDC
03.00.02, the transaction request message sent to the Host sends data that
indicates the total number of notes entered as a single type rather than
breaking down the entry into the note types as specified by the AA-NDC
Reference Manual definition for the Transacation Request. 

Debug logs have been supplied demonstrating the problem with the vanilla
AA-NDC 03.00.02 and also, as discussed with Praveen, there are debug logs
available to demonstrate that the message sent for problem is not seen in
AA-NDC 03.00.01. 

This is an urgent issue because the product cannot be deployed with this
error - in the test results supplied, the transaction details were: 

Notes actually entered: 

5 Type 1 (AED10) 
1 Type 2 (AED100) 
2 Type 3 (AED500) 
Giving a deposit total of 1250 

Transaction Request details were: 

8 Type 1 (AED10) 
Giving a total of 80. 

This means that the customer is potentially credited 1170 less than he
entered. 





Summary:
Supervisor Data collector - not all TTU keys active.

Description:
the Supervisor Data collector uses the contents of the Data keys WG to activate keys. Correct functionality is to activate all numeric keys.  change made a compass OPKBD.cpp 1.38



Summary:
OOXFS VDM init causes failure in Wincor.

Description:
Failure of VDM to start causes ANDC to close session with XFS manager and it is not re-opened before attepting to start the next device.  This causes issues at XFS platform level on ProDevice. 



Summary:
ANDC 03.00.02 - When R00/R01 screens are downloaded, if a FF occurs in a print buffer, subsequent data in that buffer is discarded

Description:
If R00/R01 screens downloaded and a printer buffer has the following form <TEXTA><FF><TEXTB> then the header is printed, <TEXTB> is printed and the footer is printed but <TEXTB> is discarded. No further receipt is printed (unless there are subsequent print buffers). With the same data, NDC+ would print a second receipt with a header, <TEXTB> and a footer and would do the same for subsequent FFs in that buffer.



Summary:
Test 5.4.6.11 - Unsol for card reader fatal not sent when mains power lost, SST goes in service then entry to supervisor causes a hang

Description:
This test was designed to ensure the card reader fatal unsol was sent to the host when going in service and the mains power to the SST was lost (inplugged).  The results were not as expected in that the unsols were not sent at in service, the SST did not go into dummy OOS but stayed in service.  Attempting to enter supervisor to clear the card reader fatal then resulted in a hang.

Logs can be found at \sgbdun100\orgshare\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 3.0 Service Packs\APTRA Advance NDC 3.00.02\Integration Debug Log



Summary:
Test 5.4.6.8 - ANDC Suspend timeout is truncated when mains power lost and re-established during suspend

Description:
When mains power is lost during a suspend, re-establishing mains power before the suspend is complete results suspend mode exit as soon as the power is re-established (ie ANDC suspend timeout is truncated).  The device suspend timeout completes successfully and the device self-clears OK.  It makes no difference if the SST is plugged in again before the device self-clear or after the self-clear - the results are the same.



Summary:
Test 5.4.6.7 - Power Lost while in diagnostics results in transactions being allowed on return to in service with the mains still unplugged

Description:
5.4.6.7 - Expected results in step 6 (SST momentarily goes back in service then goes out of service) was not seen instead on exit from diagnostics&supervisor with the mains unplugged during diagnostics, the SST went back in service and allowed transactions to be carried.  Investigation required.



Summary:
Enable alphanumeric character entry for some Dialup fields

Description:
Alphanumeric entry for some Dialup fields is a general product requirement.
I was thinking that the Alphanumeric Entry development by Australia could be utilised for Dialup. Recently Chris Dunn from UK PS has complained about not being able to do Alphanumeric entry for dialup config¿.even though he implicitly agreed one year ago when I sent the design document.

Test Impact is not that significant (No UT or UTS, TLFS update only, Supervisor Manual only, Minor testing at Integration in Supervisor only)





Summary:
ANDC 93.00.02.05: Long Pause when exiting Diagnostic back to Supervisor Select Screen

Description:
Configuration: Sneezy + XFS 4.2.0 + ANDC 3.0.1 + ANDC 93.0.2.5 - When exiting Diagnostic to Supervisor SELECT screen noticed a 28 sec (approx) pause before the SELECT screen was displayed.

Re-tried with the following configurations (no delay seen):
FTD + XFS 4.2.0 + ANDC 3.0.1 + ANDC 3.0.2 - Pause of up to 5 secs (normal)
FTD + XFS 4.2.0 + ANDC 3.0.2 - Pause of up to 5 secs (normal)

May be hardware issue. 



Summary:
TAR 310440:  Settlement txn request from Supervisor boot, contains incorrect PIN block

Description:
Customer DBS, has reported an issue with the initial settlement transactions on the ATM.  The host rejects the settlement transaction request due to a PIN block error.

This issue can easily be recreated as follows.   The system will require a
download with a suitable C09 screen defined for supervisor transactions, which does not require a PIN, and a transaction request state which indicates a PIN block should be sent :

 - Start up in Supervisor mode
 - Ensure the relevant encryption keys are loaded
 - Enter the replenishment menu and select a Supervisor Transaction (option
15)
 - Exit Supervisor
 - Send a Go In Service terminal command
 - A prompt "FUNC" will be displayed for the supervisor transaction
 - press 1 to start a supervisor transaction.

The transaction request message will contain a PIN block comprised of zeros
:

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]680E714D[Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C]00000000000000000000000000000000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R.
 J. Nicoll?[Unicode-x1C][Unicode-x1C]

If no PIN has been entered, the PIN block should not be transmitted, regardless of the Transaction Request State settings.

Continue the test as follows :
 - Let the settlement transaction timeout
 - Cancel out of settlement, the unit will go in service
 - Enter Supervisor mode
 - Replenishment/Supervisor transaction
 - Exit Supervisor and Go In Service again
 - generate a settlement transaction again

This time, no PIN block, which is what is expected.

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]720E924D[Unicode-x1C]1<[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R. J. Nicoll?[Unicode-x1C][Unicode-x1C]


Customer requires an urgent fix to meet timescales for pilot.





Summary:
TAR 315268 - AA-NDC: STD CASH Supervisor function does not work (GRIT 326963) - Test 5.5.6 - MV STD CASH Regression on NCR H/W

Description:
Setting up the note counts via Configure menu SET CASH function and Replenish menu STD CASH functions results in notes in Cassette, Remaining and Total being displayed as blank via the DISP CASH function.  A subsequent Send Supply Counters TC results in 65535 displayed for each cassette (ie not configured).
Re-entering supervisor and attempting an ADD CASH returns INVALID VALUE when a valid value is entered for cassette type.  Performing a CLR CASH at this point then allows the ADD CASH function to be carried out.  
I will follow this up with FGSC to determine what the correct procedures are for SET CASH, STD CASH, ADD CASH as the end user would use it however, NDC+ performs OK for the same test.



Summary:
Test 5.4.15 - Slight flicker seen between MPG 1&2 Display during this test

Description:
The fix for the original TAR (310489 - Video files do not play in first loop after screen download or ATM power up) is OK however a slight flicker is seen between MPG 1&2 display on the test.  Testing was carried out on a UX SST (Alacazam).



Summary:
Change Author to allow Worker Factory build to be automated.

Description:
Change Author to allow Worker Factory build to be automated.
Worker Factory builds cannot be performed without running Author and then choosing the menu option. This has to be changed to allow it to be automated.



Summary:
Test 5.4.22 - Almost simultaneous GIS and flick to supervisor causes merror

Description:
Merror seen while testing step 9 of test 5.4.22 GR1T 325656 - OOS received too soon after GIS causes hang.
Was able to recreate it with OOXFS debug log on.  Send GIS as per test and flick to supervisor immediately.



Summary:
Acceptor status property along with the device status property needs to be checked before sending an unsol to the host in the close state

Description:
When the capture bin is full the cashunit(s) are not ready to accept the cash so when we issue a  cashinstart command cashinstart fails with the reason 101(i.e Hardware error). So device fitness is set to fatal in the cash acceptance state. Now the same device fitness Is checked in the close state and since the  device status property returns a good status an unsol is sent to the host saying that device is in a good state. But ideally this should not happen because cashin start fails with a hardware error reason.

CEN Specification says that if the device status property returns good then that does not necessarily imply that accepting can take place. The value of fwacceptor field must be taken in to the account.

So we should be checking this acceptor status property along with the device status property before sending an unsol to the host in the close state.





Summary:
Only provide DASH functionality in OOXFS if chip connect set

Description:
If customers want to use a DASH reader for DIP transactions, this is possible but we would need to check if there was a chip connect read condition in State T. If there is then we will do a DASH txn, if not then we will do a DIP transaction. At the moment we do some DASH handling even if chip connect is not set.



Summary:
TAR 314428 - Reporting of individual cassette status

Description:
The status of each individual logical cassette is required to be reported to host. Status suggested is Full, Nearly Full (Links to ULMAX setting), Out and Not Present. Would also need to report the denomination in that cassette in case a type was inserted or removed, Craig suggested checking the cassette unit id field. Suggestion is to use the extended supplies status message in Mike B spec.



Summary:
TAR 314430 - Sorting requirement with dynamic overspill capacity

Description:
Currently when a machine is configured for sorting, when a single cassette type becomes full, additional notes of that type will not be accepted which limits the capacity of the deposit function. The proposal is that the application is able to detect the nearly full condition (Using a specified ULMAX for that countries currency) and dynamically change the cassette configuration to accept these notes in other cassettes, previously configured for a particular note type. This requires to an optional feature.



Summary:
Include customisation for note denomination sorting in Host message in 3.01

Description:
A customisation was done for SEA to report the note denominations in the same order as they were done when the PCBNA.INI file was present. This now looks like a general requirement. To be considered at 3.01 CCB



Summary:
TAR 313834 - Request for Note counts after Encash to change to reflect actual status

Description:
Change requested by Chong for Malaysia and Thailand.
If no error is reported and the module has seen notes being rejected, the total of notes processed by the Encash (Cash_In_End) command should always be the same as the total of notes reported in the Escrow when the customer confirmed the transaction.

This would mean capturing the note type information just after the host approved the deposit transaction, and updating the total note counts for that type with notes sent to the reject area as well as good notes



Summary:
Use the new AANDC automated build and component installer

Description:
This has the benefit of automating the build process and no longer uses old technology (e.g. CLM and InstallShieldv3).
The developer (rather than SCM) should compile and build AANDC, including the component installer (using the auto batch files).  SCM should then create the aggregate.  This is in line with all other GSE teams.



Summary:
Support copying of the EJ file to CD instead of Flex Disk.

Description:
Optional inclusion in 3.01 based on Zubair's team testing



Summary:
Support for Enhanced EJ Backup (multiple destinations not including CD - removable media). Complete but not tested

Description:
Accepted for 3.01 at CCB - development to be done by Zubair's team



Summary:
XFS Front FDK - FDK Key Code Attribute Selected when data store provided in dynamic key code workgroup specifies '0' for no keys to activate.

Description:
The key attribute is used when the dynamic key code workgroup specifies '0' - the code should be updated to only use the attribute of the work group is empty.



Summary:
TAR 313636 - AA-NDC : Customisation of PIN and Trequest screens in Settlement Transaction

Description:
A customer has installed AA-NDC 03.00.01, and is using the supervisor/settlement transaction (Option 15 on the Replenish Menu).

They are favourably impressed with the ability to customise some of the screens using reserved screens i93 - i95. However they would also like the ability to customise all the remaining screens in the transaction flow, e.g. 
PIN entry and the Transaction Request Please Wait screens, in a similar way.

This is valuable to them as the screens are translated to local language, and with the customisation possible at present a mixture of local language and english appears through the transaction flow.



Summary:
TAR 313945 - DASH reader does not report fatal if card left in reader

Description:
Sitation where DASH reader is used like a DIP is not properly catered for in the code. In this case after checking the read conditions, most of the DASH - specific code should be skipped.




Summary:
ANDC 92.06.06.03 - Entering Bad Cards into MCRW has a different effect on XFS 04.01.01 has a different effect from XFS 02.02.02

Description:
When a bad card is entered repeatedly, the MCRW should eventually start sending Warning messages (messages actually sent in groups of 2 with varying M-Data), and eventually the SST should go into suspend after a number of bad entries.

XFS 04.01.01: Noticed that XFS 04.01.01 is taking more bad card entries than XFS 02.02.02 before warning messages or suspend condition occurs.

This cycle should occur several times and then the MCRW should eventually go fatal and the SST should send an MCRW Fatal message to the host.

XFS 04.01.01: When the card reader eventually goes fatal on 4.1.1, 3 unsolicited fatal messages are sent to the host.
XFS 02.02.02: On 2.2.2 when the card reader eventually goes fatal, NO unsolicited fatal message is sent to the host.



Summary:
Incorrect Reject Count when input refused event is triggered with the WFS_CIM_DEPOSITFAILURE reason.

Description:
when an input refused event is triggered with reason WFS_CIM_DEPOSITFAILURE, reject count is always zero.



Summary:
TAR 312745 - AA-NDC: Intermittent Hang after Chip card insertion

Description:
AA-NDC 03.00.00
XFS 04.02.00
EMV exits 02.00.01

The symptoms are:

When a card is inserted into the ATM the card is accepted but the PIN screen
is not presented.

The ATM remains on the welcome screen
After the timeout period (30 seconds) the card is not returned.
If the ATM is opened the card can be seen in the first section of the MCRW,
the gate is down and the only way to remove the card is to manually roll it
into the retained card cage.

After this is done the gate will not open if another card is inserted and no
further transactions can be processed. The welcome screen is still presented
and the ATM looks as if it is still in service.

No status data sent to the host and the supervisor switch does not work.

The only way  found to recover this situation is to reset the ATM, it has in
the past taken 2 resets to get the ATM back into service. If the reset fails
then a black screen is seen at the ATM.

After extensive debug and extra tracing within the EMV exits, the problem has been pinpointed as occurring as below:

The problem is the AANDC StoreScreen C-Exit utility call.  This is part of the AANDC product.
The EMV Exits make a call to the AANDC function and the system hangs.



Summary:
Test 6.7.1 failed during XFS 4.2 testing with AANDC 2.6.5 - Receipt MEI blinks even after the completion of the transaction

Description:
When there is R01 data to be printed on the receipt, after printing the receipt footer data on the receipt, the MEI is not turned off properly.



Summary:
AANDC does not report correctly LOW status of physical cassette status in SOH.

Description:
The ClearPhysicalXFSCouters function which is called from ClearCashCounts is hardcoded to set the ulMinimum values for cassettes to 50 - this should be taken from a registry setting

Raised on behalf of and assigned to Jacek



Summary:
XFS Front FDK - FDK Key Code Attribute Selected when data store provided in dynamic key code workgroup specifies '0' for no keys to activate.

Description:
The key attribute is used when the dynamic key code workgroup specifies '0' - the code should be updated to only use the attribute of the work group is empty.



Summary:
TAR 306861:  In service loops does not replay audio after first cycle

Description:
 1) In service loops does not replay audio after first cycle

Current Full Description:
   In-service loop only plays audio once and does not restart the audio when
   the idle loop re-cycles.
   
   This can be recreated with the following message. 
   
   30<FS><FS><FS>11<FS>010<SO>020<ESC>[100z<SO>021<ESC>[100z<SO>022<ESC>[100z<FS
   
   >020<FF><SI>BDSCREEN20<ESC>P001;0<ESC>\<FS>021<FF><SI>BDSCREEN021<FS>022<FF><
   SI>BDSCREEN022
   
   The observed behaviour is that the display screens re-loop, but the audio
   assciated with the first screen does not restart when the screen is
   redisplayed.
   
   Customer is using AANDC 02.06.03 but this can be recreated on AANDC
   02.06.04.
   
   This has been rasied as a priority 3, though may be escalated due to
   customer commitments.





Summary:
Counts are not updating properly in power fail situation

Description:
It shows wrong counts on the journal and also in the supervisor.
	The scenario is:

	I have given a transaction reply to dispense 3 notes from each cassette and while stacking, I rebooted the machine. After restarting, I started the applications and had seen the journal which shows power interruption during dispense and given the counts as below:

	Cassette 1 : 0023  	Cassette 2 : 0000
	Cassette 3 : 0000	Cassette 4 : 0000

	The notes which are stacked were put into the reject bin.



Summary:
Timer 5 & 7 doesn't have any effect when changed

Description:
For the timers, I tried changing the existing value for timer 5 and timer 7 (24 seconds) to other values like 5, 30, 60. But there was no effect. The cash retract timeout and the present timeout are still 24 seconds each. When I send an enhance message with the changed value for timer 5/timer 7, it is returning ready 9.




Summary:
The flow when in suspend is not correct in case of GBRU.

Description:
	When the suspend condition occurred the following are some of the observations:
		when it is in suspend mode it shows a "Please take cash" screen. And after that it clears the device and the note if left at the throat will be taken in. 			Once cleared, then went to close state and then it shows the "A.T.M suspended" screen and once agian was in suspend mode for few minutes.
		If we send OOS, it returns to OOS screen, and if mode switch is flipped to supervisor, it returns to supervisor mode.

		I tried to set the SuspendTimeout to 60 in the following location in registry.		[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\XFS GBRU-GBNA ServiceProvider\XFS-DeviceControl\GBRU-GBNA\Operations]
		"SuspendTimeout" = dword:0x0000003c(60)



Summary:
Device limits for notes to dispense in GBRU

Description:
when I try to dispense more than 40 notes it just rejects the message.
		I tried to include the following registry setting with a value of 200 and tested. But even then, it just dispenses 40 notes but not more than that.
		[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\XFS GBRU-GBNA ServiceProvider\XFS-DeviceControl\GBRU-GBNA\Operations]
		"MaxDispenseItems" = dword:0x000000c8(200)





Summary:
TCP/IP config and advanced options should be able to be printed from AANDC Supervisor

Description:
TCP/IP config and advanced options should be able to be printed from AANDC Supervisor independent of Comms. Accepted for 3.01 at CCB



Summary:
TAR 313415 - AA-NDC3: OOS received too soon after GIS causes Hang

Description:
Full Description: 
AA-NDC 03.00.01 
XP SP2 
XFS 04.02.00 

If the ATM receives a Go In Service command that is closely followed by a Go Out of Service command, or possibly some other terminal comand, then the application Hangs. 

This has been reproduced in Dundee using NDCHost. When the power fail message has been  received, a GIS is sent, followed by the OOS as soon as NDCHOST receives the RDY9 to the first command. 

In one case, changing to Supervisor Mode was shown in the debug log, but no mode changge was visible, and the Out of service screen remained showing. 
(Front Access ATM). 

Debug Logs are available. 




Summary:
TAR 313408 - Errors in "NCR Encryptor Configuration" in developers' guide

Description:
TAR is for Revision H of manual NOT revision E (revision H not in STAR
database)

there are errors in the NCR Encryptor Configuration section of the developer's guide starting at page 9-5:

1. the location of the registry value EPPBTripleDESMode is given as:
HKLM\SOFTWARE\NCR\XFS PIN Service Provider\GENERAL_CONFIGS

whereas the actual location of this value is:
HKLM\SOFTWARE\NCR\XFS PIN Service
Provider\XFS-DeviceControl\PIN\GENERAL_CONFIGS

and the location in the APTRA XFS 04.02.00 documentation is given as the legacy path:
HKLM\Software\Classes\WOSA/XFS_ROOT\SERVICE_PROVIDERS\PIN\GENERAL_CONFIGS


2. the procedures for replacing EPP with BAPE and vice versa both refer to "Before running wstart.cmd,".
Since the APTRA XFS 04.xx.xx Service Providers are started automatically, there is no need to run wstart.cmd (in fact wstart.cmd does not even exist on an APTRA XFS 04.xx.xx system!) Since AA-NDC 03.xx.xx is only supported on APTRA XFS 04.xx.xx these procedures need to be updated to refer to the procedures as they are applied on this release.




Summary:
COM Allocation Leak From APTRA User CDI COM Interface

Description:
Memory is being leaked from the APTRAUserCDI Interface is used to marshall a string across the process boundary.  Also, the CreatUCDIInterface and ReleaseUCDIInterface leak COM allocation memory for every CDI access that involves a user defined store.  This causes memory to be lost during idle (even when out of service).

The amount of memory leaked depends on the size of the string recieved.

Main source of leak is the 'GetStringVal (char * name)' API.

Analysis email inlcuded.

Problem is in all releases in product.



Summary:
TAR 312832 - AA-NDC: Unsolicited Message generated when Night Deposit Transaction Cancelled

Description:
Using AANDC 3.00.01, during testing of the Night Safe Deposit transaction,
if Cancel is pressed when the ATM is waiting for the bag to be dropped, the
ATM sends an unsolicited 12_000__K0_0_00_1 status message, followed by the
transaction completion Ready 9 message.



When Cancel is pressed, the ATM should be sending a solicited status
message, not unsolicited. The ATM should then wait for another transaction
reply from host. The status message should also have a transaction status of
1, not 0. The status message should be 22_000__K1_0_00_1.



Summary:
TAR 312745 - AA-NDC: Intermittent Hang after Chip card insertion

Description:
AA-NDC 03.00.00 
XFS 04.02.00 
EMV exits 02.00.01 

The symptoms are: 

When a card is inserted into the ATM the card is accepted but the PIN screen 
is not presented. 

The ATM remains on the welcome screen 
After the timeout period (30 seconds) the card is not returned. 
If the ATM is opened the card can be seen in the first section of the MCRW, 
the gate is down and the only way to remove the card is to manually roll it 
into the retained card cage. 

After this is done the gate will not open if another card is inserted and no 
further transactions can be processed. The welcome screen is still presented 
and the ATM looks as if it is still in service. 

No status data sent to the host and the supervisor switch does not work. 

The only way  found to recover this situation is to reset the ATM, it has in 
the past taken 2 resets to get the ATM back into service. If the reset fails 
then a black screen is seen at the ATM. 

After extensive debug and extra tracing within the EMV exits, the problem has been pinpointed as occurring as below: 

The problem is the AANDC StoreScreen C-Exit utility call.  This is part of the AANDC product. 
The EMV Exits make a call to the AANDC function and the system hangs.



Summary:
TAR RFC 312296 - Do not put GBNA fatal when a mis-recognition error occurs

Description:
Due to another issue with GBNA template misrecognising 50 ringit as 100
ringit the following issue occurs with NDC.

10x50MR notes inserted.

The template error causes one note to be misrecogised as 100MR



When the customer accepts this and the notes are to be encashed, on the 2nd
pass through the BV the notes are validated correctly ie 10x50MR.



This results in Mstatus 19, severity 1, however the application makes the
GBNA fatal but there is nothing is SysApp for severity 1 errors since this
is self clearing.
This request is to not make the device fatal and to credit the account with
the denominations agreed upon during the confirmation screen.




Summary:
TAR 311609 - BNA If a cassette full condition occurs mstatus is not returned in status message

Description:
With a cassette full in the GBNA if the cassette is full the Mstatus and 
Mdata are not returned in the status message sent to the host by the 
terminal. 
e.g. 

12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w0 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
The problem is the EvalMstatus method which populates the mstatus according to the XFS error code generated is called only when XFSerror event is triggered. In case of Cashunit threshold event this method is not called and hence we are not sending any mstatus we just send the severity 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ [Unicode-x1C]2[Unicode-x1C][Unicode-x1C]3



Summary:
Support US local state customisation

Description:
For 3.01 CCB
Local Customization is a feature that allows a customer to substitute selected screens, states and
FITs for the ones downloaded from the host. This capability allows customers to customize
screen advertising, support multiple languages, etc. without having to modify the host download.
Consult the Americas AA NDC Local Customization documentation (included in Appendix E of
this document) for additional details.




Summary:
TAR 310489:  Video files do not play in first loop after screen download or ATM power up

Description:
When running an idle loop that uses mpeg files, on the first loop mpeg files are omitted. This has been observed while the customer wants to play several loops of a video file while playing a long piece of audio.

Details of download.

Test download use to recreate issue

010<ff><so>655<esc>[060z<so>654<esc>[060z<so>655<esc>[060z

655<ff><esc>P2555<esc>\
654<ff><esc>P2554<esc>\

The repeated 655 does not play

Customer download available upon request





Summary:
TAR 305602 - AA-NDC : no unsolic being sent on subsequent transactions after EJ is fatal

Description:
   After filling the EJ an unsolic to report this to the host is sent. However, 
   if the host decides to carry on performing transaction there is no more
   unsolicsw sent to report that the EJ is fatal if a transaction requires to
   print to it. This is different to what with the paper journal and also what
   happens with the EJ in NDC+.



Summary:
TAR 301099 - AA-NDC has ETX functionality missing

Description:
See TAR



Summary:
Implement XFS Reset (Support clear devices through XFS reset command in Supervisor) - MV Diagnostics

Description:
This requirement is being used to track the Diagnostics menu requirement.  The menu will show a list of available devices and their fitness.  The operator can then force a reset and perform a self-test for any device on the list.



Summary:
Send the XFS reset through the application to reset device automatically

Description:
Send the XFS reset through the application to reset device automatically.
Raised at 3.01 CCB and accepted for 3.01. Will be required for GBRU etc to clear suspend conditions from application.



Summary:
Settlement not rejecting transaction reply messages when expected

Description:
Test 5.3.9

Before a transaction request message has been sent (step 25), any print immediate trans reply should be rejected. There is no response from the application to this message - it does not seem to get passed on the the application for processing (Can be seen in MessageIn but not in Debug windows)



Summary:
Hang at BNA Update Active Status active script host

Description:
The application hang when entered in the BNA Update Active Status active script host when no notes are reconfigured.



Summary:
Touch screen events not seen by  NDC Cardholder Data Collector worker

Description:
Some updates required identified through cardless settlement testing. Idle Screens do not have an associated keyboard.  Any touch events are filtered out so that they never reach the NDC Data Collector.



Summary:
Migrate Advance NDC from Visual Studio 6.0 to Visual Studio 2005

Description:
Migrate Advance NDC from Visual Studio 6.0 to Visual Studio 2005.
As agreed, time to upgrade compiler
This will enable us (among other things) to 
- integrate with .NET code easier
- use new compiler features for memory leaks, stack checks, etc.



Summary:
State Type Execution Split

Description:
In order to minimise the impact of Customisation Layer fixes and updates to the customer, the customisation layer can be broken down into individual state types and executed in isolation.  This means that a state type update can be released in binary form and a customer can pick up any changes directly with no impact to their existing terminal application.  If they have customised the area that has been updated, then they can update the code and rebuild the state type.



Summary:
Support for Keyboard Update Definitions Required

Description:
Overlap of GRIT from 02.06.XX caused update to be missed for 03.00.00.
Need to add to Service Pack Development.



Summary:
 AANDC 3.00 Reference Manual  Transaction Request Message field ca1 not explained

Description:
See attachment. Field needs to cross-reference the appropriate section.



Summary:
Implement configuration utility for GBNA/GBRU device

Description:
Rework Edge configuration utility to provide method of setting up GBNA/GBRU cassette and device configuration



Summary:
TREQ message not rejected when it should be during Settlement transaction

Description:
'FUNC-' screen showing in Settlement transaction (at this point, no TREQ message has been sent to the host)
Send a PRNT_IMD TREP to the SST.
This message should be rejected as no request was sent. Instead, NDCHost shows 'Sending Message' and no response is received.
Once the Settlement transaction is completed and the TREQ is sent up, the original TREP is 'picked-up' by the apps and the PRNT_IMD is executed.



Summary:
'm' state integration in 3.0 was incomplete in author work

Description:
CDI store for No PIN Next State Flag has the wrong value in the author. It matches the CDI store value in 2.6 (1336) rather than that in 3.0 (1343). Also the tester condition for 6r34r1 is incorrect.



Summary:
Performance is worse on ANDC 3.0.1 than 3.0 by around 2 seconds

Description:
See attachment for details of area where performance is slower



Summary:
MT5634ZPX-PCI modem does not function correctly on slower cores

Description:
This modem (MT5634ZPX-PCI) hangs the ATM when you attempt to dial, close the connection straight away and then immediatly re-attempt to dial.

This behaviour has been seen on a Pele 2 (77) and a Phantom (86) core.



Summary:
TAR 306861:  In service loops does not replay audio after first cycle

Description:
Accepted for 3.0.2 at CCB



Summary:
EJ terminal command code should not dependent on SP being present

Description:
modify code so EJ terminal command functionality not dependent on SP being present



Summary:
Create batch files and other support files for use with Automated build.

Description:
Create batch files and other support files for use with Automated build.
Create/Update files, including changes to .lst files, and checking in the new BuildApps.bat and andc.cmd.



Summary:
Depository and Statement do not return Fatal message if they go fatal during suspend

Description:
Accepted for 3.0.2 at CCB. If the suspend is exited by a GIS (after the SP has tried and failed to clear the device) NO unsolicited fatal message is sent to the host, only a Ready 9 is received. If the suspend is allowed to run its full 5 minute timeout period (with the media held on to when the SP tries to clear them) an unsolicited fatal IS sent to the host for the device



Summary:
CPM - Fatal reported on every transaction

Description:
Accepted for 3.0.2 at CCB



Summary:
Keymanager uses UCDI store before it is declared

Description:
Accepted for 3.0.2 at CCB



Summary:
TAR 294212 - PCX files appear zoomed if different picture file sizes used

Description:
Accepted for 3.0.2 at CCB



Summary:
Key Loaded message displayed next to B key in Disp Access

Description:
On NCR SSTs the KVV should be displayed in the Disp Access menu, rather than the key loaded message. This should only be seen on Wincor SSTs where the platform doesn't return the KVV after loading the key.



Summary:
TAR 309997 - terminal command get h/w config does not return product class for 5879

Description:
2.6 TAR accepted for 3.0.2 at CCB



Summary:
TAR 309642:  Card Captured screen is shown in the close state, when card taken with suspend

Description:
2.6 TAR accepted for 3.0.2 at CCB



Summary:
TAR 308373:  EJ de-configured with enhanced config parameters 16 and 17

Description:
2.6 TAR accepted for 3.0.2 at CCB



Summary:
TAR 307216 - When EJ is full (fatal), the fitness returned to a send configuration is good

Description:
2.6 TAR Accepted for 3.0.2 at CCB



Summary:
TAR RFC 311025  - Request to synchronise GNBA activity with screen activity in AA-NDC

Description:
The following delays were observed and the RFC is that their should be better synchronisation between the activity of the GBNA and the screens displayed to the end user.
When a cash deposit is selected from the transaction request screen, there is a delay of approx 3 seconds before the 'Please Insert Notes' screen is displayed. This screen is also displayed for about 2 seconds before the GBNA shutter opens



Summary:
Tidy up project settings and resource files for Automated Build work.

Description:
Tidy up project settings and resource files for Automated Build work.
Change projects so they don't report superfluous errors and change resource files so they are not hardcoded to R: drive.  Also tidy up any project settings where directories are created in the wrong place or generated files are put in the wrong place.



Summary:
TAR RFC 310665 GBNA Exit Supervisor to be made conditional

Description:
Accepted for 3.0.2 at CCB. Check fitness before exercising the device



Summary:
TAR RFC 310324 - Request to not update reject counts for excess notes when escrow is full

Description:
Accept for 3.0.2 at CCB



Summary:
CCM VISA2 - pick up the latest version which is certified with the US modem

Description:
Accepted for 3.0.2 at CCB



Summary:
GenComms 2.3.1 to be shipped with ANDC 3.0.2

Description:
Accepted for 3.0.2 at CCB



Summary:
APTRA Security 3.03 is required for GOP support with XFS 4.2

Description:
Accepted for 3.0.2 at CCB



Summary:
Implement Dual Dispenser for AANDC 3.01

Description:
Dual Dispense implementation from Jacek



Summary:
APTRA Security 3.03 is required for GOP support with XFS 4.2

Description:
Accepted at CCB for 3.0.2



Summary:
ANDC needs updated for change to NoteID ActiveXFS property

Description:
Accepted at CCB for 3.0.2



Summary:
TAR RFC 310762 - Request clarification of DISP Counters BNA counters screen

Description:
Accepted at CCB for 3.0.2



Summary:
UPS - Support UPS under AANDC MV for UX4

Description:
Accepted at CCB for 3.0.2



Summary:
Update to GBXX code to ensure retract counts are correct when note error event received

Description:
Ergonomics resolved the situation where note counts were incorrect after pick failure by looking at the difference between the logical and physical counter. Praveen is providing this fix for 3.0.2



Summary:
CPM performance improvements to be included in standard product

Description:
Opportunities to improve performance
1. Do not lift the rear image bitmap, it is not displayed in the standard product
2. Do the following activities in parallel?
¿	Codeline property of the CPM Driver update
¿	Scanned Image of document sent to the PC
¿	DocStaged event fired.
3. Remove start/stop FDK and the associated timers
4. Parallel printing of journal and receipt data



Summary:
TAR 307329 - EJ Upload Message Sent During Transaction

Description:
TAR fix in 2.6.6 to be considered for inclusion in 3.0 at CCB



Summary:
TAR 307861 -  AA-NDC 02.06.04 : Card reader suspend only sent one time

Description:
TAR fix in 2.6 to be considered for 3.0 Service Pack.



Summary:
TAR RFC 310665 GBNA Exit Supervisor to be made conditional

Description:
On exit from Supervisor AANDC attempts to clear the BNA device. The request is for the device to only be cleared if there is a severity >0



Summary:
Support new multitech PCI modem

Description:
Support new multitech PCI modem



Summary:
TAR RFC 300868 - AANDC : No support in AANDC for coupon attached to receipt in Promote

Description:
APTRA Promote allows coupons to be attached but the functionality does not
work when used with AA-NDC. This RFC to being raised on AA-NDC and another
on Promote to have the issue addressed.



Summary:
TAR 309712 AA-NDC valid IP addresses are too restrictive and don"t allow valid ips

Description:
   The TCP/IP valid IP addresses are too restrictive in AA-NDC.
   
   Customers are unable to add IP addresses with values of 255 in fields 2, 3
   and 4 when inputting the remote IP address. 
   
   Fields 2,3 and 4 need to be configurable to allow values from 0-255
   
   Has been discussed with Zubair and Craig Mellor 
   





Summary:
TAR 308591:  Changing language moving from the m state to another m state does not work

Description:
When using the m state the following is observed by a customer using two langauges, in this case english and spanish.

English m state screen --> type pin and hit FDK for English --> English
Screen    (Correct)

English m state screen --> type pin and hit FDK for Spanish  --> Spanish
Screen    (Correct)

English m state screen --> don?t a type pin, instead hit FDK for Spanish 
--> English Screen    (Wrong)

Setting the next state for no pin entered to another state and the language selection works correctly, so it seems the entry into the state is either ignoring or resetting the language offset.




Summary:
TAR 300629 - AA NDC - messages are lost during host download when EJ upload is enabled

Description:
See TAR



Summary:
TAR 307329 - EJ Upload Message Sent During Transaction

Description:
Customer reports that EJ upload messages are sent during a transaction (AANDC 02.06.03).

The reference manual states:

"The SST will only send an Upload EJ Data message, or process an EJ command, when in Out-of-Service mode or In-Service mode when there is no transaction in progress. Upload EJ Data messages will not be sent when the SST is in Supervisor mode. Any EJ data accumulated in the EJ file EJDATA.LOG while the SST is in Supervisor mode will be sent at the next opportunity."

This has been recreated by PS on AANDC 02.06.04 and FGSC by enabling EJ upload, ensuring that the EOF is reached and starting a transaction, eg card before cash.
If the dispsenser is Fatal, following the transaction reply, a solic is sent up to the host with details of the device fault, this is followed by an EJ upload message.

[08/15/05 13:55:50]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135550001491001525034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/15/05 13:56:19]   

 [08/15/05 13:56:11] [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]1001525] 

[08/15/05 13:56:19] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]18[Unicode-x1C];4430940001730190=0061010000091000000?[Unicode-x1C][Unicode-x1C]B B 
    [Unicode-x1C]00000000[Unicode-x1C];234<<68161:0740[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4430940001730190^GUNTHER/PATRICIA        
  ^0006101000000000910000910000000?[Unicode-x1C]] 

 [08/15/05 13:56:24] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C]0100[Unicode-x1C]12342036[Unicode-x1C]003NDC DEMO

 DISPENSE
 [Unicode-x0C]] 


  
[08/15/05 13:56:50]
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]04000[Unicode-x1C]0401120300000000202020[Unicode-x1C]13000] 

 [08/15/05 13:57:04] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]003NDC DEMO

 NEXT STATE
 AND PRINT
 [Unicode-x0C]] 

[08/15/05 13:57:10]   
[08/15/05 13:57:10] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[08/15/05 13:57:40]   
[08/15/05 13:57:40] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135740001525001608083[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-04,R-13000NDC DEMONEXT STATEAND PRINT] 
[08/15/05 13:58:02]   
[08/15/05 13:58:02]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135802001608001642034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/16/05 16:16:17]   
[08/16/05 16:16:17] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]19[Unicode-x1C];5801021234567890=99121207457100000000?[Unicode-x1C][Unicode-x1C]B
B     [Unicode-x1C]00000000[Unicode-x1C]?571?5:33>90:;51[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4094344802060^CHAPMAN /PROFESSOR
^850110100000?[Unicode-x1C]] 
[08/16/05 16:16:24]   
[08/16/05 16:16:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1:[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:24]   
[08/16/05 16:29:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:43]   
[08/16/05 16:29:43] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]40000[Unicode-x1C]10[Unicode-x1C]03000] 
[08/16/05 16:29:45]   
[08/16/05 16:29:45] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050816162945001642001695053[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-10,R-03000] 
[08/16/05 16:30:40]   
[08/16/05 16:30:40] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21]





Summary:
TAR 310760 - GBNA:Application allows more notes to be inserted when escrow physicaly full

Description:
I've attached the logs for the case where the Application showed the hardware malfunction screen once the escrow was physically full (less than 200 notes).
The SP trace shows that the escrow full event was passed up before I tried to put more notes in.




Summary:
Settlement not rejecting transaction reply messages when expected

Description:
Test 5.3.9

Before a transaction request message has been sent (step 25), any print immediate trans reply should be rejected. There is no response from the application to this message - it does not seem to get passed on the the application for processing (Can be seen in MessageIn but not in Debug windows)



Summary:
IT1 - Test 5.3.1 For Dev PC Install Link to Release Bulletin call it the SP Readme

Description:
Change link to be Release Bulletin



Summary:
NDC Data Collector Needs to beep for FDK touch screen emulation

Description:
Implemented in 2.6.4 see related GRIT



Summary:
ERSTE: EJ upload via Network.

Description:
EJ finalisation & upload via network combined with STD CASH replenishment



Summary:
Worker Class Help: index entries for printers go to the wrong topics.

Description:
Using Find to search for printer brings up many entries that go to other topics, e.g. 
 "Graphics Print Paragraph" goes to Generic SNA, Work Groups topic
GR!T raised for the record.



Summary:
Variable Graphics Printer worker class does not have help

Description:
Context-sensitive help is missing for this worker in the Author. It also needs a proper icon. GR1T raised for the record.





Summary:
Reference Manual should have all CCM VISA2 dial-up message formats

Description:
Appendix O does not have message formats such the I'm Alive, Disconnect command, NOOP command. They need to be added.



Summary:
Add cash fails to update counts

Description:
bug with 321945 (TAR295400)



Summary:
TAR 310489:  Video files do not play in first loop after screen download or ATM power up

Description:
When running an idle loop that uses mpeg files, on the first loop mpeg files are omitted. This has been observed while the customer wants to play several loops of a video file while playing a long piece of audio.

Details of download.

Test download use to recreate issue

010<ff><so>655<esc>[060z<so>654<esc>[060z<so>655<esc>[060z

655<ff><esc>P2555<esc>\
654<ff><esc>P2554<esc>\

The repeated 655 does not play

Customer download available upon request





Summary:
TAR 310440:  Settlement txn request from Supervisor boot, contains incorrect PIN block

Description:
Customer DBS, has reported an issue with the initial settlement transactions on the ATM.  The host rejects the settlement transaction request due to a PIN block error.

This issue can easily be recreated as follows.   The system will require a
download with a suitable C09 screen defined for supervisor transactions, which does not require a PIN, and a transaction request state which indicates a PIN block should be sent :

 - Start up in Supervisor mode
 - Ensure the relevant encryption keys are loaded
 - Enter the replenishment menu and select a Supervisor Transaction (option
15)
 - Exit Supervisor
 - Send a Go In Service terminal command
 - A prompt "FUNC" will be displayed for the supervisor transaction
 - press 1 to start a supervisor transaction.

The transaction request message will contain a PIN block comprised of zeros
:

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]680E714D[Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C]00000000000000000000000000000000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R.
 J. Nicoll?[Unicode-x1C][Unicode-x1C]

If no PIN has been entered, the PIN block should not be transmitted, regardless of the Transaction Request State settings.

Continue the test as follows :
 - Let the settlement transaction timeout
 - Cancel out of settlement, the unit will go in service
 - Enter Supervisor mode
 - Replenishment/Supervisor transaction
 - Exit Supervisor and Go In Service again
 - generate a settlement transaction again

This time, no PIN block, which is what is expected.

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]720E924D[Unicode-x1C]1<[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R. J. Nicoll?[Unicode-x1C][Unicode-x1C]


Customer requires an urgent fix to meet timescales for pilot.





Summary:
TAR 310440:  Settlement txn request from Supervisor boot, contains incorrect PIN block

Description:
Customer DBS, has reported an issue with the initial settlement transactions on the ATM.  The host rejects the settlement transaction request due to a PIN block error.

This issue can easily be recreated as follows.   The system will require a
download with a suitable C09 screen defined for supervisor transactions, which does not require a PIN, and a transaction request state which indicates a PIN block should be sent :

 - Start up in Supervisor mode
 - Ensure the relevant encryption keys are loaded
 - Enter the replenishment menu and select a Supervisor Transaction (option
15)
 - Exit Supervisor
 - Send a Go In Service terminal command
 - A prompt "FUNC" will be displayed for the supervisor transaction
 - press 1 to start a supervisor transaction.

The transaction request message will contain a PIN block comprised of zeros
:

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]680E714D[Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C]00000000000000000000000000000000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R.
 J. Nicoll?[Unicode-x1C][Unicode-x1C]

If no PIN has been entered, the PIN block should not be transmitted, regardless of the Transaction Request State settings.

Continue the test as follows :
 - Let the settlement transaction timeout
 - Cancel out of settlement, the unit will go in service
 - Enter Supervisor mode
 - Replenishment/Supervisor transaction
 - Exit Supervisor and Go In Service again
 - generate a settlement transaction again

This time, no PIN block, which is what is expected.

11[Unicode-x1C]000123321[Unicode-x1C][Unicode-x1C]720E924D[Unicode-x1C]1<[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]1%R. J. Nicoll?[Unicode-x1C][Unicode-x1C]


Customer requires an urgent fix to meet timescales for pilot.





Summary:
GetDeviceNames call expects an array of length 2 on non-NCR SST

Description:
The GBXX ActiveXFS script code expects the same number of device names to be returned on non-NCR SSTs as on NCR SSTs. There may be no device names returned to this call on Wincor SSTs.



Summary:
CPM - Fatal reported on every transaction

Description:
If the CPM goes fatal during a transaction and is not cleared, the fatal unsolicited is reported at the end of every subsequent transaction regardless of what that transaction is.
If there is a cheque jammed in the CPM, in the Close state for every subsequent transaction, a clear is attempted and the error reported again regardless of the transaction. 
If the jam is cleared, then subsequent transactions only report the fatal error and no clearing of the device takes place.



Summary:
dlls need rebuilt for interface chnage.

Description:
Keymanager, ssdsMSGUTILS.DLL,ssdsNDCEXITS.DLL,ssdsNDCHANDLER



Summary:
Applicationcore exception. signal not consumed

Description:
signal not consumed from 1s1871g31. see attachments
Could be 'TTU hang' as happened on entry to supervisor and no key presses were processed.



Summary:
While testing Tar 295400 , the supervisor layer is crashing 

Description:
While testing Tar 295400 , the supervisor layer is crashing , when trying to print the counters on both Journal and Receipt printer at a  time ( i.e  Option 3 is selected in SETPRINT (i.e USE both receipt and Journal)  )
When I am trying to print the counters on Receipt only or on Journal only it's working fine.

EventViewer Shows the following Error :

Object ID: 58172656
Process ID: 2680
Thread ID: 1332
Process Filename: C:\ssds\apps\supervisor.exe
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> R:\Ssds\InterDomain\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>      <SCLINE> 1381 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 114       Error Number: 2    Worker Id:     Description: VBScript has reported an error in a script passed to it.
The error is near line number 160 of Script Host Worker ID: 41n5281dc128.
VBScript has given the following error description:
	'Object required: 'ConfiguredNoteTypes''
The Source of the Exception is
	'Microsoft VBScript runtime error'
Script is:
'ProcID**activate**END
Sub activate()

Dim  ConfiguredNoteTypes
Dim  ConfiguredCount     'If flag is equal to 1 the reset it to 0 and initialize 
     'the stores with appropriate values





Summary:
TAR 309712 AA-NDC valid IP addresses are too restrictive and don"t allow valid ips

Description:
   The TCP/IP valid IP addresses are too restrictive in AA-NDC.
   
   Customers are unable to add IP addresses with values of 255 in fields 2, 3
   and 4 when inputting the remote IP address. 
   
   Fields 2,3 and 4 need to be configurable to allow values from 0-255
   
   Has been discussed with Zubair and Craig Mellor 
   





Summary:
TAR 295400 - Counts are incorrect if notes dispensed are more than notes added

Description:
Banco de Credito, Peru



Summary:
White paper not provided in ANDC 2.6.4 for TAR fix 285148 (NDC Data Collector)

Description:
Raised by UK PS



Summary:
TAR 309642:  Card Captured screen is shown in the close state, when card taken with suspend

Description:
Customer DBS, Singapore found that the card captured screen, C04 was being
displayed when the card had been taken.    Two specific scenarios seen, each 
will be raised as separate TARs after initial consultation with development team.

Customer takes card during a card before card function.   On removing the
card, the response from the card reader contains is severity 3, due to either tampering or too many read errors.

In the close state, there is a workgroup which handles card eject in the close state if required.  The first test in this workgroup is a director
"TEST MCRW FATAL", and in the workgroup the fitness of the MCRW is tested.   
The tester condition will take the fatal path out of the workgroup if the fitness is >=3, which means fatal or suspend.
The result is that on a suspend condition, the card retained screen is incorrectly displayed, when the card has been taken in the card before cash function.




Summary:
TAR 309642:  Card Captured screen is shown in the close state, when card taken with suspend

Description:
Customer DBS, Singapore found that the card captured screen, C04 was being
displayed when the card had been taken.    Two specific scenarios seen, each 
will be raised as separate TARs after initial consultation with development team.

Customer takes card during a card before card function.   On removing the
card, the response from the card reader contains is severity 3, due to either tampering or too many read errors.

In the close state, there is a workgroup which handles card eject in the close state if required.  The first test in this workgroup is a director
"TEST MCRW FATAL", and in the workgroup the fitness of the MCRW is tested.   
The tester condition will take the fatal path out of the workgroup if the fitness is >=3, which means fatal or suspend.
The result is that on a suspend condition, the card retained screen is incorrectly displayed, when the card has been taken in the card before cash function.




Summary:
Power-up Message sent at wrong time

Description:
Test 5.3.10.2.1 of 3.0.1 ITS - the power up message should be journaled when the SST first enters Normal mode and does not require a host connection.

However this is not journalled until a connection with the host is established



Summary:
Advance NDC does not capture card that is possibly in the reader on exit from supervisor

Description:
1) Incompatible with NDC+ that captures the card
2) This could immediately start a transaction when GIS sent (or if RST MODE = 3)

Test Scenario
1) Enter supervisor
2) insert diagnostic disk and enter 7-DIAGNOSTICS, enter PIN for the diag disk, etc..
3) select 1-Device Tests, MCRW tests, select ENTER CARD function
4) enter card
5) exit diagnostics - card stays in reader
6) exit supervisor - now card should be captured by ANDC (as NDC+ does)




Summary:
Problems when Card Reader recovers from a fatal condition after ATM Reboot

Description:
These issues were found with ANDC 92.06.05 

When the reader is fatal after previous testing and ATM is rebooted, the reader recovers if the cause of the fatal condition is gone. This is Ok.
Then if ADNC is started and card is inserted while firmly holding onto it
A) If the card is held for 3 motor retries and then taken out, then
Suspend message is sent to the host
ATM does NOT enter the suspend mode
Card reader is reported as FATAL in the GetFitness host message.
In reality though, the reader recovers from the suspend condition and is available again.l
B) If the card reader is held through all retries, then
No message is sent at all (expect a fatal message)
Card reader is actually fatal, so if the host asks for device fitness, ATM reports fatal.



Summary:
TAR 309167 - AA-NDC - Hang experienced after successive rejects sent to Transaction Replies

Description:
Issue introduced in 3.0 and 2.6.2. Fix needs to be integrated from 2.6.6 because of the severity of this issue - will cause a hang.



Summary:
TAR 308981 - RFC for AA-NDC to report CPM2 bin removal to host

Description:
To be considered at next CCB 
Israel want their AA-NDC application to report a message to the NDC host when the CPM2 capture bin (the bin outside of the safe) has been removed.

After discussions with Alison Tait (AA-NDC) and Ewan McGuire (XFS), the way forward was agreed. An RFC will be raised on AA-NDC to make use of an updated CPM sp and an RFC will be raised on the CPM sp to request it be updated so that it reports the removal/replacement of this bin. 

This RFC is on AA-NDC:
AA-NDC currently uses the CPM control, but plans are that AA-NDC will use the CPM sp in future. Therefore a separate TAR RFC (308979) has been raised on the CPM sp to provide the required functionality and this RFC has been raised on AA-NDC so that it makes use of this new CPM sp info so that a suitable message is sent to the NDC host when the CPM capture bin is removed/replaced.




Summary:
With 'RST MODE' set to 'Auto recovery' and MCRW fatal, Fatal unsol not sent to host after reboot

Description:
Seen while testing ANDC 92.06.05.02
Scenario:
Enter Supervisor->Configure->RST MODE-> Enter '3' at prompt (Auto Recovery at restart)
Make MCRW fatal.
Restart SST
Start Apps (SST goes in service automatically)

When the apps are started, an unsol should be sent to the host for the MCRW, this is not the case. It is also possible to enter a card even though the MCRW is fatal (fatal status verified by sending 1<fs><fs><fs>73). This issue is related to GR1T 313616. Also tested the above scenario with NDC+ where an unsol is sent to the host when the apps are started and it is NOT possible to insert a card.



Summary:
BUFFB and BUFFC not getting displayed during Settlement Tx

Description:
Test 5.3.9 - when entering info for settlement tx, "Cash -" is getting displayed but BUFFB and BUFFC prompts are not



Summary:
Settlement not rejecting transaction reply messages when expected

Description:
Test 5.3.9

Before a transaction request message has been sent (step 25), any print immediate trans reply should be rejected. There is no response from the application to this message - it does not seem to get passed on the the application for processing (Can be seen in MessageIn but not in Debug windows)



Summary:
ANDC version number needs updated (test 5.3.9)

Description:
Reporting 3.0 - should use the CDI to report version no.		



Summary:
TAR 306960:  Promote is blocking solicited messages coming back to AANDC

Description:
Promote is blocking solicited messages coming back to AANDC.

This TAR applies to and should have been raised on Aptra Promote RunTime SST RTL, G531-0661-0000, v2.04.00, though this product is not listed on STAR. 
Details will be updated when product is added.


Behaviour has been observed when recreating a pick failure error on an spray 
dispenser. 
The correct error (T_Code, M_Status etc) details of the pick error are
reported in the event log and are detailed in SysApp, though no response to
the dispense command is reported back to AANDC. AANDC appears to hang.

Customer is using XFS 4.1.0, AANDC 2.06.03 and Promote 2.04.00 (though issue 
is also observed when using Promote 2.03.01).

If Promote is not installed the issue does not occur and AANDC recieves the
expceted soilicted response from the dispenser.


TAR 000000306960 HISTORY SEQ: 2  Transaction date: 08/15/2005 16:55:28------------
TAR Transaction Entered by: Ghafoor, Gameelah 
Status-Reason: UND.INV-PEND. Priority: 2

Product Information:
         Product: G531-0283-0000  Desc: APTRA Advance NDC Package
         Version: 02.06.03
       Component: NOT DEFINED 
         Version: NOT DEFINED 
    SubComponent: NOT DEFINED 
         Version: NOT DEFINED 

Responsibility:
     Group: FINANCIAL SOLUTIONS DIVISION-SELF SERVICE Division: GLOBAL SOFTWARE ENGINEERING 
     Bus. Unit: GLOBAL AANDC, EMV, JAVA Dept: AANDC/ADVANCE 
     Person: Suresh, Ranjith 
      Phone: 44 1382 592062 VPlus:  Fax:  Pager:
     E-Mail: rs515668@ncr.com 


TAR 000000306960 HISTORY SEQ: 3  Transaction date: 08/15/2005 17:08:16------------
TAR Transaction Entered by: Lee, Gavin 
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Updated copy list for TAR transfer.

End of Report for 000000306960








Summary:
DebugLog still reports Product Version as ANDC 02.06.04 in ANDC 92.06.05.02

Description:
DebugLog still reports Product Version as ANDC 02.06.04 in ANDC 92.06.05.02



Summary:
TAR 309271:Occasional hang in AA-NDC when entering Diapgnostcs from Supervisor

Description:
As discussed, there is a very occasional hang when entering Diagnostics from Supervisor in AA-NDC 02.06.04. It took around 3-4 hours to recreate this issue in testing.

When originally reported, it was possible to exit byu pressing the Cancel key, but inn testing here, no keys were asctive when the error occurred.




Summary:
TAR 309271:Occasional hang in AA-NDC when entering Diapgnostcs from Supervisor

Description:
As discussed, there is a very occasional hang when entering Diagnostics from Supervisor in AA-NDC 02.06.04. It took around 3-4 hours to recreate this issue in testing.

When originally reported, it was possible to exit byu pressing the Cancel key, but inn testing here, no keys were asctive when the error occurred.




Summary:
TAR 309167:  AA-NDC - Hang experienced after successive rejects sent to Transaction Replies

Description:
A hang is experienced after two or more successive command rejects are sent in response to respective transaction replies. The customer is experiencing the hang when successive transaction replies are rejected - the system hangs and a reboot is required in order to restart the system. The reason for the transaction rejected does not alter this behaviour i.e. if the transaction reply is rejected through a device fault, incorrect format or for a specific reason.


This has been recreated in the lab environment and logs created. However the UEH which is generated (10 mins after the hang) confirming an access violation is corrupt and does not identify which function in which the violation is occurring. The customer is also experiencing this issue but provided latest logs which show an Access Violation at the time of the hang and which is referencing the function RtReallocateHeap.

Full logs will be sent and atm is available in lab set up to demonstrate the issue. Please advise if any further characterisation can be done by FGSC in order to assist in providing a speedy resolution. 



This situation is critical as the customer is changing to use Diebold ATMS
because of this issue.




Summary:
IT1 - Test 5.3.1 For Dev PC Install Link to Release Bulletin call it the SP Readme

Description:
Change link to be Release Bulletin



Summary:
IT1 - Service Pack CD does not Autorun

Description:
CD should auto run as per 3.0 CD



Summary:
Dialup Only - Test 5.4.21.1 - On Autoexit from supervisor R09 sent twice

Description:
When Autoexit from Supervisor is on and the system is a Dialup System then exiting supervisor without pressing the '9 exit' key results in R09 being generated twice - Found in Build 1 of 3.0.1



Summary:
Suspend message not sent to host upon card capture attempt in ANDC 92.06.05.02

Description:
Scenario:
Insert Card
Press Cancel
Allow card to be presented, retracted and then presented again
Hold card to cause a suspend.

At this point a suspend message should be sent to the host and printed to the journal. At this point, neither of these things is happening. Upon sending a 1<fs><fs><fs>73 (Get Fitness) to the SST the MCRW reports a suspend state.

Seen while regression testing around GR1T 320394 - AA-NDC 02.06.04 : Card reader suspend only sent one time.



Summary:
Decide term to be used for extending the product (i.e. extending other than via download data) and be consistent in IPs

Description:
Requirement ID AANDC31 21.207.
Decide term to be used for extending the product (i.e. extending other than via download data) and be consistent in IPs.

Requirement from Jiri - I would recommend forget to use the word customisation in the sense of aa-ndc extensions and leave the word customisation for Screens/States/FITs/Config, mainly downloadable configuration. We can use the words Extensions or Enhancements.




Summary:
Support Message Reflection via Virtual Controllers

Description:
Requirement ID AANDC31 21.202.
Support Message Reflection via Virtual Controllers.

Requirement from Jiri - This is documented as a restriction in the Developer's Guide (p3-17).  Jiri would like to be able to reflect a message back to AANDC, e.g. to provide more download data before sending Ready9 to host.




Summary:
Release bulletin update for PIN SP FDK A information

Description:
Need to refer to FGSC knowledge article about fix and also say that people need to contact Ewan McGuire for the SP.



Summary:
Set min and max statement length through Supervisor

Description:
RFC to pad out txn reply statement data to a minimum length and ensure there has been a cut before the customer attempts to remove their statement, on non black mark paper



Summary:
TAR 308591:  Changing language moving from the m state to another m state does not work

Description:
When using the m state the following is observed by a customer using two langauges, in this case english and spanish.

English m state screen --> type pin and hit FDK for English --> English
Screen    (Correct)

English m state screen --> type pin and hit FDK for Spanish  --> Spanish
Screen    (Correct)

English m state screen --> don?t a type pin, instead hit FDK for Spanish 
--> English Screen    (Wrong)

Setting the next state for no pin entered to another state and the language selection works correctly, so it seems the entry into the state is either ignoring or resetting the language offset.




Summary:
TAR 308591:  Changing language moving from the m state to another m state does not work

Description:
When using the m state the following is observed by a customer using two langauges, in this case english and spanish.

English m state screen --> type pin and hit FDK for English --> English
Screen    (Correct)

English m state screen --> type pin and hit FDK for Spanish  --> Spanish
Screen    (Correct)

English m state screen --> don?t a type pin, instead hit FDK for Spanish 
--> English Screen    (Wrong)

Setting the next state for no pin entered to another state and the language selection works correctly, so it seems the entry into the state is either ignoring or resetting the language offset.




Summary:
TAR 308159 - Screen format of worker 90n5281dc128 needs to be true not false

Description:
Variable Operator Text worker "DISPLAY BNA DATA" (3p77a10) in Display String workplace the screen format of the worker "i91" (90n5281dc128) needs to be changed from False to True, because as it is the final page of the totals is a mess on the display.




Summary:
TAR 308373:  EJ de-configured with enhanced config parameters 16 and 17

Description:
ATM has no Journal printer connected.

EJ is selected successfully in Supervisor (5 30 1).

Host begins a download that includes the following message:

3[Unicode-x1C][Unicode-x1C][Unicode-x1C]1A[Unicode-x1C][Unicode-x1C]03002040400500112001150011625517225310016900170001[Unicode-x1C]000100101002003032
550500509005.

Following this the EJ is disabled and in supervisor, display config, we see that the journal mode has reverted back to Paper - even though there is no journal connected.

These (1625517225) enhanced parameters configure journal backup which should only be possible if a paper journal is connected. As per NDC+ functionality this message should not disable the EJ.



TAR 000000308373 HISTORY SEQ: 2  Transaction date: 09/01/2005 16:21:20------------
TAR Transaction Entered by: Cairns, James 
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Upgraded Priority to 2 due to the following:

Hi Jim,

It is not only more complicated, but unfortunately it is now more urgent to
have the fix for 2.6.4 ASAP!

Explanation:
I have "tested" 3 versions: 2.6.4, 2.6.3, 2.6.1.
All versions are somehow different with respect to the EJ-only and enhanced
16 or 17:
Best: 2.6.1: rejects setting of enhanced 16 or 17 (because of absent journal 
printer), therefore the problem cannot occur. Unfortunately it has problems
with Terminal Commands sent during Transaction Request, and therefore it
must be replaced.
Unusable: 2.6.3: has this problem (deconfigures the EJ and because of it it
will stop journaling after EJ is full, no recovery possible, journal not
available)
Unusable: 2.6.4: has this problem (deconfigures the EJ and because of it it
will stop journaling after EJ is full, no recovery possible, journal not
available)
The difference between 2.6.4 and 2.6.3 in EJ-only configuration is in
following: 2.6.3 is a little more better, because it does not allow to set
the journal margins (because of absent journal printer).

And because we need to replace 2.6.1 in MUZO/KB and we do not have anything
else usable, we need very a fix for 2.6.4. and this shall be very soon.
We cannot afford to wait for 2.6.5.

best regards
jiri tywoniak




Summary:
TAR 308373:  EJ de-configured with enhanced config parameters 16 and 17

Description:
ATM has no Journal printer connected.

EJ is selected successfully in Supervisor (5 30 1).

Host begins a download that includes the following message:

3[Unicode-x1C][Unicode-x1C][Unicode-x1C]1A[Unicode-x1C][Unicode-x1C]03002040400500112001150011625517225310016900170001[Unicode-x1C]000100101002003032
550500509005.

Following this the EJ is disabled and in supervisor, display config, we see that the journal mode has reverted back to Paper - even though there is no journal connected.

These (1625517225) enhanced parameters configure journal backup which should only be possible if a paper journal is connected. As per NDC+ functionality this message should not disable the EJ.



TAR 000000308373 HISTORY SEQ: 2  Transaction date: 09/01/2005 16:21:20------------
TAR Transaction Entered by: Cairns, James 
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Upgraded Priority to 2 due to the following:

Hi Jim,

It is not only more complicated, but unfortunately it is now more urgent to
have the fix for 2.6.4 ASAP!

Explanation:
I have "tested" 3 versions: 2.6.4, 2.6.3, 2.6.1.
All versions are somehow different with respect to the EJ-only and enhanced
16 or 17:
Best: 2.6.1: rejects setting of enhanced 16 or 17 (because of absent journal 
printer), therefore the problem cannot occur. Unfortunately it has problems
with Terminal Commands sent during Transaction Request, and therefore it
must be replaced.
Unusable: 2.6.3: has this problem (deconfigures the EJ and because of it it
will stop journaling after EJ is full, no recovery possible, journal not
available)
Unusable: 2.6.4: has this problem (deconfigures the EJ and because of it it
will stop journaling after EJ is full, no recovery possible, journal not
available)
The difference between 2.6.4 and 2.6.3 in EJ-only configuration is in
following: 2.6.3 is a little more better, because it does not allow to set
the journal margins (because of absent journal printer).

And because we need to replace 2.6.1 in MUZO/KB and we do not have anything
else usable, we need very a fix for 2.6.4. and this shall be very soon.
We cannot afford to wait for 2.6.5.

best regards
jiri tywoniak




Summary:
Printing Promote coupons when receipts use R01 data

Description:
Problem - If the receipt contains R01 data and there is no form feed at the end of the transaction reply print buffer, the R01 data is printed in the close state after the connected or standalone receipt/coupon has been printed, which results in the R01 data being printed on a separate piece of paper.
Impact - This will only effect the receipts with R01 data printed with no trailing form feed and a standalone or connected coupon.
Workaround - Add a form feed at the end of the last receipt print buffer if using R01 data.



Summary:
In the BNA script in 3.0 the store name is incorrect

Description:
For recycled Type 1" (7s2p1) the store name is Recycled Type 2 - this is incorrect



Summary:
TAR 308259 - Encryption keys have to be re-entered after AANDC 02.06.04 installation

Description:
After installation of AANDC 02.06.04, customer has had to reload encryption keys but have not had to do this on previous releases of the software. 

This has been observed with updating units runiing with AANDC 02.06.00 -
02.06.03 with AANDC 02.06.04.

Customer has reported this issue using 3DES keys.




Summary:
Need a new Service Pack package IP 

Description:
Need to create set of HTML pages specifically for service packs to autorun on loading service pack CD-ROM. Should look like existing Package IP but just deal with the service pack.



Summary:
TAR 307941 - ActiveXFS alias configuration for BillAcceptor and dispenser

Description:
Need to configure AXFS in ANDC aggregate for the following

Hi Alison, 
As per our discussion I think that you should configure ActiveXFS installation to install the following devices and aliases.

Device=BillAcceptor1
Alias=CashInModule2 
i.e. your application should look for, and call set device on CashInModule2

Device=BillDispenser1
Alias=CurrencyDispenser3
i.e. your application should look for, and call set device on CurrencyDispenser3

I have raised an RFC (320398) on ActiveXFS to provide these by default in a future release. 





Summary:
More information needed on new BNA counts in Supervisor 

Description:
Colette this is likely to come in as a TAR hence the priority.

Supervisor Guide needs to be updated for the new BNA counts for retracted notes and Notes in Transport in the Replenish menu.
The description for the "Retracted" and "Notes in transport" is as follows:

	RETRACTED:
	
	Retracted gives the total number of notes (valid/invalid) that has been retracted.
	Retract occurs during the cardholder timeout, only when the retract option is enabled using the host command (i.e. option45 digit)
	This count reflects the notes retracted from both the exit slot and Escrow.

	NOTES IN TRANSPORT:

	The notes in transport gives the total number of notes that has been put into the reject bin if the notes are treated as invalid in the second pass of validation.
	This is the cumulative count.




Summary:
TAR 307861 -  AA-NDC 02.06.04 : Card reader suspend only sent one time

Description:
Full Description: 
Customer : Westpac, Australia.

P1 reasons : PS Australia were supposed to deploy in Q2 for revenues and Westpac project was delayed for the COMMS issues. Very critical for Q3 delivery.

S/W config : AA-NDC 02.06.04, XFS 04.01.01

Problem description : Enter the card into the card reader and hold until suspend occurs. Remove the card when the suspend occurs.

The suspend event should be sent to the host, printed on the journal and seen in the debuglog but this only occurs on the 1st suspend. In fact, in FGSC tests it was not even printed to the journal on the 1st suspend.

On the 2nd (and subsequent suspends) it can only seen in the application event log and therefore the hosy would have no idea the ATM was in a suspend condition and be able to send a GIS to clear it immediately.

This functionality is working correctly in AA-NDC 02.06.03 and therefore the problem has probably been introduced by a recent change for a TAR fix in this area of the application.




Summary:
Update IPs to say that rear settlement PIN is not supported with DAPI7

Description:
When DAPI7 is selected through SYSAPP as the EPP version in use, this means that if the settlement transaction has PIN enabled, the settlement interface will switch to the front display for PIN entry. This is because the DAPI7 level of security does not permit a PIN to be entered on the rear keyboard.



Summary:
Increase number of back up copies of EJ on hard disk to equal that in NDC+

Description:
Customers in India are complaining that they are getting unreliable backup of EJ due to the limitation of copies of the EJ downloads on the hard disk of the ATM. This limit is lower than that in NDC+.



Summary:
TAR 307780 - Lower case chars in device status messages do not print correctly on journal

Description:
Customer reported issue from National Bank of Greece.

When a device status message is printed to the journal printer, any Device Identification Graphics (DIG) in lower case are not printed correctly, e.g.
for the BNA and CPM

For the BNA 

The unsolicited status message sent to the host is :
 12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w1  ~~~~~~~~~~~...

The Device status message logged to the journal printer for this message is
:
*    *1*s/*1
ESCROW COUNTS : 0 ~ ....

The "w" character which should be printed, is being printed as a "s/"
character.   Both characters are 77 but the lower case "w" is in a different 
character set.

This issue has been introduced in AA-NDC 02.06.00.   Previous versions of
the application functioned correctly, printing the correct lower case device identification graphic digits for the BNA and CPM.

The application is using a raw data command to pass to the service provider, therefore the application will have to set the control codes appropriately within the raw data command to permit the correct DIG to be printed.





Summary:
TAR 307780 - Lower case chars in device status messages do not print correctly on journal

Description:
Customer reported issue from National Bank of Greece.

When a device status message is printed to the journal printer, any Device Identification Graphics (DIG) in lower case are not printed correctly, e.g.
for the BNA and CPM

For the BNA 

The unsolicited status message sent to the host is :
 12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w1  ~~~~~~~~~~~...

The Device status message logged to the journal printer for this message is
:
*    *1*s/*1
ESCROW COUNTS : 0 ~ ....

The "w" character which should be printed, is being printed as a "s/"
character.   Both characters are 77 but the lower case "w" is in a different 
character set.

This issue has been introduced in AA-NDC 02.06.00.   Previous versions of
the application functioned correctly, printing the correct lower case device identification graphic digits for the BNA and CPM.

The application is using a raw data command to pass to the service provider, therefore the application will have to set the control codes appropriately within the raw data command to permit the correct DIG to be printed.





Summary:
TAR 307329 - EJ Upload Message Sent During Transaction

Description:
Customer reports that EJ upload messages are sent during a transaction (AANDC 02.06.03).

The reference manual states:

"The SST will only send an Upload EJ Data message, or process an EJ command, when in Out-of-Service mode or In-Service mode when there is no transaction in progress. Upload EJ Data messages will not be sent when the SST is in Supervisor mode. Any EJ data accumulated in the EJ file EJDATA.LOG while the SST is in Supervisor mode will be sent at the next opportunity."

This has been recreated by PS on AANDC 02.06.04 and FGSC by enabling EJ upload, ensuring that the EOF is reached and starting a transaction, eg card before cash.
If the dispsenser is Fatal, following the transaction reply, a solic is sent up to the host with details of the device fault, this is followed by an EJ upload message.

[08/15/05 13:55:50]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135550001491001525034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/15/05 13:56:19]   

 [08/15/05 13:56:11] [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]1001525] 

[08/15/05 13:56:19] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]18[Unicode-x1C];4430940001730190=0061010000091000000?[Unicode-x1C][Unicode-x1C]B B 
    [Unicode-x1C]00000000[Unicode-x1C];234<<68161:0740[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4430940001730190^GUNTHER/PATRICIA        
  ^0006101000000000910000910000000?[Unicode-x1C]] 

 [08/15/05 13:56:24] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C]0100[Unicode-x1C]12342036[Unicode-x1C]003NDC DEMO

 DISPENSE
 [Unicode-x0C]] 


  
[08/15/05 13:56:50]
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]04000[Unicode-x1C]0401120300000000202020[Unicode-x1C]13000] 

 [08/15/05 13:57:04] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]003NDC DEMO

 NEXT STATE
 AND PRINT
 [Unicode-x0C]] 

[08/15/05 13:57:10]   
[08/15/05 13:57:10] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[08/15/05 13:57:40]   
[08/15/05 13:57:40] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135740001525001608083[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-04,R-13000NDC DEMONEXT STATEAND PRINT] 
[08/15/05 13:58:02]   
[08/15/05 13:58:02]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135802001608001642034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/16/05 16:16:17]   
[08/16/05 16:16:17] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]19[Unicode-x1C];5801021234567890=99121207457100000000?[Unicode-x1C][Unicode-x1C]B
B     [Unicode-x1C]00000000[Unicode-x1C]?571?5:33>90:;51[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4094344802060^CHAPMAN /PROFESSOR
^850110100000?[Unicode-x1C]] 
[08/16/05 16:16:24]   
[08/16/05 16:16:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1:[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:24]   
[08/16/05 16:29:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:43]   
[08/16/05 16:29:43] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]40000[Unicode-x1C]10[Unicode-x1C]03000] 
[08/16/05 16:29:45]   
[08/16/05 16:29:45] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050816162945001642001695053[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-10,R-03000] 
[08/16/05 16:30:40]   
[08/16/05 16:30:40] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21]





Summary:
TAR 307329 - EJ Upload Message Sent During Transaction

Description:
Customer reports that EJ upload messages are sent during a transaction (AANDC 02.06.03).

The reference manual states:

"The SST will only send an Upload EJ Data message, or process an EJ command, when in Out-of-Service mode or In-Service mode when there is no transaction in progress. Upload EJ Data messages will not be sent when the SST is in Supervisor mode. Any EJ data accumulated in the EJ file EJDATA.LOG while the SST is in Supervisor mode will be sent at the next opportunity."

This has been recreated by PS on AANDC 02.06.04 and FGSC by enabling EJ upload, ensuring that the EOF is reached and starting a transaction, eg card before cash.
If the dispsenser is Fatal, following the transaction reply, a solic is sent up to the host with details of the device fault, this is followed by an EJ upload message.

[08/15/05 13:55:50]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135550001491001525034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/15/05 13:56:19]   

 [08/15/05 13:56:11] [6[Unicode-x1C][Unicode-x1C][Unicode-x1C]1001525] 

[08/15/05 13:56:19] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]18[Unicode-x1C];4430940001730190=0061010000091000000?[Unicode-x1C][Unicode-x1C]B B 
    [Unicode-x1C]00000000[Unicode-x1C];234<<68161:0740[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4430940001730190^GUNTHER/PATRICIA        
  ^0006101000000000910000910000000?[Unicode-x1C]] 

 [08/15/05 13:56:24] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C]0100[Unicode-x1C]12342036[Unicode-x1C]003NDC DEMO

 DISPENSE
 [Unicode-x0C]] 


  
[08/15/05 13:56:50]
[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]04000[Unicode-x1C]0401120300000000202020[Unicode-x1C]13000] 

 [08/15/05 13:57:04] [4[Unicode-x1C][Unicode-x1C][Unicode-x1C]032[Unicode-x1C][Unicode-x1C]12345037[Unicode-x1C]003NDC DEMO

 NEXT STATE
 AND PRINT
 [Unicode-x0C]] 

[08/15/05 13:57:10]   
[08/15/05 13:57:10] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]9] 
[08/15/05 13:57:40]   
[08/15/05 13:57:40] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135740001525001608083[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-04,R-13000NDC DEMONEXT STATEAND PRINT] 
[08/15/05 13:58:02]   
[08/15/05 13:58:02]
[61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050815135802001608001642034[Unicode-x1B][0r[Unicode-x1B](1[Unicode-x1B])2[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x0F][Unicode-x1B]e1[Unicode-x1B]w3[Unicode-x1B]h162]

[08/16/05 16:16:17]   
[08/16/05 16:16:17] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]19[Unicode-x1C];5801021234567890=99121207457100000000?[Unicode-x1C][Unicode-x1C]B
B     [Unicode-x1C]00000000[Unicode-x1C]?571?5:33>90:;51[Unicode-x1C][Unicode-x1C][Unicode-x1C]1%B4094344802060^CHAPMAN /PROFESSOR
^850110100000?[Unicode-x1C]] 
[08/16/05 16:16:24]   
[08/16/05 16:16:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1:[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:24]   
[08/16/05 16:29:24] [11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1;[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]A[Unicode-x1C]] 
[08/16/05 16:29:43]   
[08/16/05 16:29:43] [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E200000000[Unicode-x1C]40000[Unicode-x1C]10[Unicode-x1C]03000] 
[08/16/05 16:29:45]   
[08/16/05 16:29:45] [61[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]005307050816162945001642001695053[Unicode-x1B][000p[Unicode-x1B][040q[Unicode-x1B](1  
   *1234*2*E*200000000,M-10,R-03000] 
[08/16/05 16:30:40]   
[08/16/05 16:30:40] [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P21]





Summary:
Provide TCP IP diagnostic options

Description:
Hardware problems, such as a bad cable, and a number of other problems are encountered in field. Esp on ATMs with APTRA newly installed.  Very often there are network configuration 
problems at the router(s)or host that manifest themselves as the ATM¿s inability to communicate. CE's require troubleshooting capabilities for ATMs running TCPIP to save time in diagnosing and fixing these issues. A suite of tests has been developed and are being effectively used in US. Several are application specific but many are applicable to all ATMs running APTRA and TCPIP. These should be in the base product. Full details are available at: http://ncrspts1.ncr.com/atmlevel2/Aptra%20Software%20Help%20Documents/TCPIP%20Troubleshooting%20Guide%20for%20APTRA%20Advance%20NDC%20w%20tool.pdf
Generic tests are: 
ATM as Client Loop Test. 
ATM as Server Loop Test
Query the status of a Local or Host Port
Ping an IP Address
Display the ATM's IP Address. 




Summary:
Invalid use of constants in the active script hosts for GBNA

Description:
The constants are used in the active script hosts with out declaring.



Summary:
Activating of workgroup done in wrong place in BnaUpdateActiveStatus

Description:
In the  BnaUpdateActiveStatus(218n5304dc128) active script host, ActiveWorkGroup.Index = 1 should not be present in the activate procedure.
This is because, it just calls the BnaUpdateActiveStatus procedure in which it calls the ConfigureNoteTypes and does not wait for the completion event and quits the active script host. Actually, it needs to wait for the completion event.
In this case the completion event is GBNA_ConfigureNoteTypesOK or GBNA_ConfigureNoteTypesFailed. When this event occurs then only it should go to active workgroup 1.




Summary:
Service Pack Installer may need to be updated to check the base version of ANDC ie 3.00 as opposed to 2.06

Description:
May not be an issue but 2.06 Service Pack installer does not allow installation of the 2.06.xx service packs on ANDC versions below 2.06.  For 3.00.xx service packs, the base should be 3.00 and installation of 3.00.xx over 2.06.xx should result in no installation and the correct error displayed.



Summary:
TAR 280376 - Two specific command rejects recorded in journal when one sent to host.

Description:
To be integrated
Transeferred to Bindu to integrate in 2.6.4



Summary:
TAR 304569 - Missing Ready 9 Response upon exit from Supervisor/Supply

Description:
   When exiting from Supply mode in Supervisor, if there is no delay between
   prior to the GIS, then only one Ready 9 gets sent, instead of two.   
   
   It would seem that the system still thinks that it is still in Supply mode
   and therefore as per the AA-NDC Reference manual, it will only react to the
   last command - while in supply.  AA-NDC Reference Manual states :-
    
   A2 - Hold until Supply mode is exited and then process. Response is Ready
   (?9? ) status. Note that if more than one command is received while in
   Supply mode, only the last is recognised. The others are dropped, and no
   response is given.
   
   However, if there is a delay prior to the GIS being sent, then two Ready 9's 
   will be sent.
   
   The problem seems to be due timing of transactions/responses.  
   It can be re-created using the test tool using the automatic response.
   
   APTRA ATM  - Missing 1 Ready 9 Response
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20                 *** Auto response to GIS ***
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9
   
   
   APTRA ATM - 2 Ready 9 Responses
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9                         *** Manual GIS response ***
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9 
   



Summary:
TAR 301637 - FDK's not responding when receiving ITR on cash transaction

Description:
Child Grit raised



Summary:
TAR 264331 - AA-NDC reads all 3 tracks on card even if only 2 present.

Description:
Child Grit raised 



Summary:
TAR 304454 - Print format on envelope always reverts to default format

Description:
   On a transaction reply, trying to print specific data onto the envelope
   during deposit, the data printed is the default format.
   
   Example transaction reply message -
   
   4 FS     0   0    0   1    2   3    4   5    6 FS     C   1    4   E    2  
   4    3   C  FS    0    2   6  FS  FS 0   6    6   7    1   0    2   7    0   
   7    5 SI     @   @  FS    5    0   5    0   3    0   8    8   3    0   2  1 
     0    5   8    8   2    5   *    $   2    5   .    0   0    *   0    6   6  
     7   *    W   1    C   1    8   7 1   3
   
   From this message we would expect -  030883021058825*$25.00*0667*W1C18713
   
   However what was actually printed was - 0667  25.00
   0667*50351138425818242=08091212306300 15/06/05 12:02:04
   
   This matches the default format.
   
   Issue has been recreated by FGSC and can be demonstrated if neccessary.



Summary:
TAR 296442 - Journal and Status counts are inconsisent if notes are retracted after timeout

Description:
If notes are presented to the customer and there are still notes left at the Presenter after the timeout, a Presenter Error is reported in the journal, with the note counts set to the value of the notes that were picked and presented, but an unsolicited status message is sent indicating that an error occurred with the note counts set to zero.



Summary:
TAR 302941 - PD trace fails on EBCDIC conversion

Description:
For EBCDIC messages, PD Trace fails after logging the ASCII data but before logging the EBCDIC data when a message is sent.



Summary:
Variable transaction handler does not add user fields

Description:
use of NDC FEILD WG clears all fields including user feild so that the user field is not added.



Summary:
TAR 307216 - When EJ is full (fatal), the fitness returned to a send configuration is good

Description:
   When the Electronic Journal (EJ) becomes full, running in EJ only mode (i.e. 
   no physical journal printer), if a send configuration command is issued,
   1<FS><FS><FS>7, then the fitness data returned for the journal printer is
   "0" - no error.   It should be "4" - fatal error condition exists.
   
   e.g.
   
   20:08:42  # 30    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H1[Unicode-x1C]4[Unicode-x1C]5[Unicode-x1C]3111]
   ...
   20:14:37  # 46    [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]7]
   ...
   20:14:39  # 47   
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]11013[Unicode-x1C]0000000000000000000000[Unicode-x1C]197F000801000280000000C70000010102001
   07F7F00[Unicode-x1C]00011013000000012000000[Unicode-x1C]000000011111]
   
   Issue has been recreated by FGSC on the base 02.06.02 product using the
   simulator.




Summary:
TAR 307216 - When EJ is full (fatal), the fitness returned to a send configuration is good

Description:
   When the Electronic Journal (EJ) becomes full, running in EJ only mode (i.e. 
   no physical journal printer), if a send configuration command is issued,
   1<FS><FS><FS>7, then the fitness data returned for the journal printer is
   "0" - no error.   It should be "4" - fatal error condition exists.
   
   e.g.
   
   20:08:42  # 30    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]H1[Unicode-x1C]4[Unicode-x1C]5[Unicode-x1C]3111]
   ...
   20:14:37  # 46    [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]7]
   ...
   20:14:39  # 47   
   [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]11013[Unicode-x1C]0000000000000000000000[Unicode-x1C]197F000801000280000000C70000010102001
   07F7F00[Unicode-x1C]00011013000000012000000[Unicode-x1C]000000011111]
   
   Issue has been recreated by FGSC on the base 02.06.02 product using the
   simulator.




Summary:
TAR 306960:  Promote is blocking solicited messages coming back to AANDC

Description:
Promote is blocking solicited messages coming back to AANDC.

This TAR applies to and should have been raised on Aptra Promote RunTime SST RTL, G531-0661-0000, v2.04.00, though this product is not listed on STAR. 
Details will be updated when product is added.


Behaviour has been observed when recreating a pick failure error on an spray 
dispenser. 
The correct error (T_Code, M_Status etc) details of the pick error are
reported in the event log and are detailed in SysApp, though no response to
the dispense command is reported back to AANDC. AANDC appears to hang.

Customer is using XFS 4.1.0, AANDC 2.06.03 and Promote 2.04.00 (though issue 
is also observed when using Promote 2.03.01).

If Promote is not installed the issue does not occur and AANDC recieves the
expceted soilicted response from the dispenser.


TAR 000000306960 HISTORY SEQ: 2  Transaction date: 08/15/2005 16:55:28------------
TAR Transaction Entered by: Ghafoor, Gameelah 
Status-Reason: UND.INV-PEND. Priority: 2

Product Information:
         Product: G531-0283-0000  Desc: APTRA Advance NDC Package
         Version: 02.06.03
       Component: NOT DEFINED 
         Version: NOT DEFINED 
    SubComponent: NOT DEFINED 
         Version: NOT DEFINED 

Responsibility:
     Group: FINANCIAL SOLUTIONS DIVISION-SELF SERVICE Division: GLOBAL SOFTWARE ENGINEERING 
     Bus. Unit: GLOBAL AANDC, EMV, JAVA Dept: AANDC/ADVANCE 
     Person: Suresh, Ranjith 
      Phone: 44 1382 592062 VPlus:  Fax:  Pager:
     E-Mail: rs515668@ncr.com 


TAR 000000306960 HISTORY SEQ: 3  Transaction date: 08/15/2005 17:08:16------------
TAR Transaction Entered by: Lee, Gavin 
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Updated copy list for TAR transfer.

End of Report for 000000306960








Summary:
TAR 306960:  Promote is blocking solicited messages coming back to AANDC

Description:
Promote is blocking solicited messages coming back to AANDC.

This TAR applies to and should have been raised on Aptra Promote RunTime SST RTL, G531-0661-0000, v2.04.00, though this product is not listed on STAR. 
Details will be updated when product is added.


Behaviour has been observed when recreating a pick failure error on an spray 
dispenser. 
The correct error (T_Code, M_Status etc) details of the pick error are
reported in the event log and are detailed in SysApp, though no response to
the dispense command is reported back to AANDC. AANDC appears to hang.

Customer is using XFS 4.1.0, AANDC 2.06.03 and Promote 2.04.00 (though issue 
is also observed when using Promote 2.03.01).

If Promote is not installed the issue does not occur and AANDC recieves the
expceted soilicted response from the dispenser.


TAR 000000306960 HISTORY SEQ: 2  Transaction date: 08/15/2005 16:55:28------------
TAR Transaction Entered by: Ghafoor, Gameelah 
Status-Reason: UND.INV-PEND. Priority: 2

Product Information:
         Product: G531-0283-0000  Desc: APTRA Advance NDC Package
         Version: 02.06.03
       Component: NOT DEFINED 
         Version: NOT DEFINED 
    SubComponent: NOT DEFINED 
         Version: NOT DEFINED 

Responsibility:
     Group: FINANCIAL SOLUTIONS DIVISION-SELF SERVICE Division: GLOBAL SOFTWARE ENGINEERING 
     Bus. Unit: GLOBAL AANDC, EMV, JAVA Dept: AANDC/ADVANCE 
     Person: Suresh, Ranjith 
      Phone: 44 1382 592062 VPlus:  Fax:  Pager:
     E-Mail: rs515668@ncr.com 


TAR 000000306960 HISTORY SEQ: 3  Transaction date: 08/15/2005 17:08:16------------
TAR Transaction Entered by: Lee, Gavin 
Status-Reason: UND.INV-PEND. Priority: 2

Full Description: 
Updated copy list for TAR transfer.

End of Report for 000000306960








Summary:
Beeping in Fast Cash with retract option on stops when card taken

Description:
It seems that there may be a problem with the beeping on fast cash.  It seems that with fast cash and retract on, the beeping stops when the card is removed and doesn't carry on until the cash is removed.  From the ref manual I think the beeping should continue for as long as timer 7. 
Both card eject and cash present beepers are active at same time and stopping the card eject one, stops the present one too. 




Summary:
TAR 306861:  In service loops does not replay audio after first cycle

Description:
 1) In service loops does not replay audio after first cycle

Current Full Description:
   In-service loop only plays audio once and does not restart the audio when
   the idle loop re-cycles.
   
   This can be recreated with the following message. 
   
   30<FS><FS><FS>11<FS>010<SO>020<ESC>[100z<SO>021<ESC>[100z<SO>022<ESC>[100z<FS
   
   >020<FF><SI>BDSCREEN20<ESC>P001;0<ESC>\<FS>021<FF><SI>BDSCREEN021<FS>022<FF><
   SI>BDSCREEN022
   
   The observed behaviour is that the display screens re-loop, but the audio
   assciated with the first screen does not restart when the screen is
   redisplayed.
   
   Customer is using AANDC 02.06.03 but this can be recreated on AANDC
   02.06.04.
   
   This has been rasied as a priority 3, though may be escalated due to
   customer commitments.





Summary:
TAR 306861:  In service loops does not replay audio after first cycle

Description:
 1) In service loops does not replay audio after first cycle

Current Full Description:
   In-service loop only plays audio once and does not restart the audio when
   the idle loop re-cycles.
   
   This can be recreated with the following message. 
   
   30<FS><FS><FS>11<FS>010<SO>020<ESC>[100z<SO>021<ESC>[100z<SO>022<ESC>[100z<FS
   
   >020<FF><SI>BDSCREEN20<ESC>P001;0<ESC>\<FS>021<FF><SI>BDSCREEN021<FS>022<FF><
   SI>BDSCREEN022
   
   The observed behaviour is that the display screens re-loop, but the audio
   assciated with the first screen does not restart when the screen is
   redisplayed.
   
   Customer is using AANDC 02.06.03 but this can be recreated on AANDC
   02.06.04.
   
   This has been rasied as a priority 3, though may be escalated due to
   customer commitments.





Summary:
Certify AANDC 2.6.5 with APTRA XFS 4.2

Description:
AANDC 2.6.5 needs to be certified with the latest version of the APTRA XFS platform.  Particularly needed for the fixes provided in the XFS 4.2 EDEP SP.



Summary:
On 2.6 - Coin Dispenser not supported however customer using it requires urgent counter and fitness problem resolved

Description:
Request from Pakistan PS for Counter Store Worker to return Coin Counts. Counter Store worker not supported but this is urgent. Also Fitness not returned for Coin on Fitness Getter



Summary:
Support Secure Double length XOR encryption on Wincor 40.30

Description:
Secure Double length XOR encryption key loading is not possible - the XOR part cannot be done inside the encryptor as the service provider does not support this facility. In out last trip we performed the XOR part outwith the encryptor (in the Author flow) to work around this issue - this is not recommended for production.




Summary:
Supervisor focus lost when safe door was opened 

Description:
When safe door is opened Supervisor loses focus. Consider this MV change for inclusion in 3.0.1



Summary:
Include Wincor specific import command to return KVVs

Description:
Standard import command does not return the KVV on all Wincor platforms. RFC is to include the modified command in the 3.0.1 SP with no impact on NCR SSTs.



Summary:
When retracting cash with the XFS simulator DISP CASH in Supervisor shows 3 notes dispensed 

Description:
From Colin Davis:-
I just did a quick test with AA NDC 3.0 and the "Take Cash" window remained open, but I don't know whether this is just a feature of the simulator, but more importantly, DISP CASH in Supervisor shows 3 notes dispensed whether I have these options ticked or not.Options selected are:-
WFS_CDM_RA_RETRACT
and WFS_CDM_RA_REJECT




Summary:
TAR 302186 - Test Cash Supervisor function not clearing Purge Bin count

Description:
This issue was fixed in 2.6.4 but the change is not applicable for 3.0. Needs to be looked at separately for 3.0



Summary:
TAR 305327 - Device/Transaction status is different from NDC+ on MCRW suspend

Description:
Customer has reported a discrepancy between AA-NDC 02.02.00 and 02.06.00,
in the transaction/device status code reported on an unsolicited status
message from the card reader. 

To recreate the status code the customer tests as follows : 
- Insert a card 
- Press the cancel key 
- Let the card be ejected and retracted once 
- Hold the card until the application suspends. 

The results are as follows : 
AA-NDC 02.02.00 
12.000..D0.3.1301020839.0 

AA-NDC 02.06.00 
12.000..D1.3.13060020B9.1 

The customers host system uses the transaction/device status code to
determine details on last transaction in cases where a ready 9 was not
received, 0 indicates no transaction exception, 1 represents card jammed. 

FGSC have tested NDC+ in the same manner and get the following result : 
12.000..D0.3.1306002039.0 

What should the transaction status code be, 0 or 1. There is no
information to determine how to map the data through from the card reader
response to the application response. The card reader spec shows that the
command 06 from the m-data is the capture command. This has four possible
t-codes : 
0 - good card captured 
1 - transport clear no card to capture 
2 - transport clear card removed by cardholder 
3 - device inoperative, suspend or fatal 

How does AA-NDC map these device t-codes to a "transaction" status code of
"0" or "1" 

Does the application transaction status code vary, depending on where in the 
transaction the issue occurs ? 

In the absence of any other information, the response should be as per NDC+




Summary:
TAR 306431 - Release bulletin keyboard config gives wron location for Bape.cnf & eop.cnf

Description:
Update release bulletin for 3.0.1 to say the bape.cnf and eop.cnf files created will not be in C:\Program Files\NCR APTRA\Keyboards as stated, they will be in the appropriate component directory in the archive.




Summary:
TAR 305199:  Nested screens not displaying on a EP57 with dip reader & spray dispenser

Description:
During a "cash before cash" or "card before cash & print" transaction, a screen with two nested screens is displayed, with the first of the nested screens normally indicating to the customer to remove their card and the second, to take their cash. 

While using an EP57 with dip card reader and spray dispenser, the screen should skip showing the "take your card" screen and should show the "take your cash" screen.

The problem that is seen is that from the transaction request state the screen does not change until entering the close state and never shows the second nested screen.

It has been seen in debug logs that the application is following the flow required for the spray dispenser, just that the screen is not shown




Summary:
TAR 306196 - AA-NDC : AANDCIA.EXE not running using standard Startapps.vbs on slower core

Description:
This is due to ulwait not always running, the script searches for XFS in the registry but if a new aggregate has been created it may not find XFS. If XFS is not detected then ulwait doesn't run. Need to update the script to find another way of detecting XFS



Summary:
TAR304661:      1..73 cmd returning env_dispenser fatal when not present...

Description:
P86 Envelope dispenser / depository removed.
P75 Envelope dispenser / depository removed.

latest XFS EDEP Service provider (XFS 04.02.00) 

It has been seen that a device terminal fitness data command
16:18:09  # 171    [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]..73]

will return the envelope dispenser fitness as fatal although the envelope dispenser is not present. No envelope dispenser falure is seen within the event logs and the device is not present within the system application or device status list.


16:18:10  # 172   
[22[Unicode-x1C]000000001[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]E00000[Unicode-x1D]F0[Unicode-x1D]G0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]V0[Unicode-x1D]\4]

from looking at the XFS trace logging for the previous status command (which the fitness is made up of) the following is seen...

(Date)04.07.2005 (Time)16:18.09,492
XFS EDEP Service Provider, XFS-Framework <FREE>Worker hService: 9 (0x00000009), RequestId: 1719 (0x000006b7)</FREE> <F>WFSResultData</F> <P>
	<N>lpStatus</N>
	<PTR>94551716</PTR>

	<N>lpStatus->fwDevice</N>
	<UI2>0</UI2>

	<N>lpStatus->fwDepContainer</N>
	<UI2>0</UI2>

	<N>lpStatus->fwDepTransport</N>
	<UI2>0</UI2>

	<N>lpStatus->fwEnvSupply</N>
	<UI2>4</UI2>

	<N>lpStatus->fwEnvDispenser</N>
	<UI2>6</UI2>

	<N>lpStatus->fwPrinter</N>
	<UI2>0</UI2>

	<N>lpStatus->fwToner</N>
	<UI2>0</UI2>

	<N>lpStatus->fwShutter</N>
	<UI2>0</UI2>

	<N>lpStatus->wNumOfDeposits</N>
	<UI2>1</UI2>

	<N>lpStatus->lpszExtra</N>
	<PTR>0</PTR>
	<STR></STR>
</P>
<SCFILE>FWResultImpl.cpp</SCFILE>
<SCLINE>3968</SCLINE>
<E>WFS_GETINFO_COMPLETE</E>


i.e. fwEnvSupply      = 4 WFS_DEP_ENVMISSING (4) and
     fwEnvDispenser   = 6 WFS_DEP_ENVNOTSUPP (6)

Have discussed this with Euan P. who's had a look at the code for this area in aandc [ could not find on star copylist]. I have messageout / message in and xfstrace logs showing this issue if required just let me know.

Rory




Summary:
TAR 303937 - TAR 255150 has been reintroduced in AANDC 02.06.03

Description:
   TAR 255150 have been reintroduced in version 02.06.03 after being fixed in
   AANDC 02.05.00.  Original details pasted below.
   
   Txn in Progress Displayed Twice when Envelope Not Deposited.
   
   Txn in progress screen displayed twice when envelope not deposited. 
   
   If you allow the envelope not to be taken on a deposit transaction, 
   the screen changes from 'Please Deposit Your Envelope' 
   to 'Transaction is being processed', this is then followed (after a timeout
   
   period) with 'Your Transaction is unavailable Would you like another 
   Transaction, Yes - No'. 




Summary:
BNA retract count property checked is the wrong property

Description:
The property currently used to check the retract count is CashUnitInfo. This shows the number of notes which have been retracted rather than the number of retract counts.The property that should be used is the UnitInCount property



Summary:
Implement rear settlement PIN on EPP

Description:
P3-15 of the supervisor's guide. The note on entering PIN in settlement needs to be updated to say that PIN is no longer supported in XFS.
Appendix L-2 also needs to be updated to say that PIN entry on rear settlement is no longer supported in XFS 



Summary:
Link to a local web state from an  NDC state using a state parameter. 

Description:
A file is checked to see if the state is to be executed, it checks if the state number in the parameter is a special web state then executes it.



Summary:
TAR 306139 - AA-NDC: Print status message on journal disables Code Page

Description:
   Windows XP
   APTRA XFS 04.01.01
   APTRA Advance NDC 02.06.03
   
   Israel use (customised) OS/2 code pages to permit printing of Hebrew
   characters on the journal/receipt.
   
   This is enabled using a download font file, and the Kxx screens to download
   and activate the code page. The Hebrew characters are in the lowercase area
   of the code page.
   
   Using this method, printing of customer data to the journal, reserved
   screens or transaction information shows hebrew characters. However, if a
   device status message occurs and is logged to the journal, the printed
   charcters change from being hebrew to the lowercase characters from the NDC
   standard character set single size alpha 1.
   
   This is because the status message sent to the printer contains a select for 
   this set, which disables the code page. This should not happen.
   
   The problem has been demonstrated, and a Uisten log shows this escape
   sequence in the status message.




Summary:
TAR 306139 - AA-NDC: Print status message on journal disables Code Page

Description:
   Windows XP
   APTRA XFS 04.01.01
   APTRA Advance NDC 02.06.03
   
   Israel use (customised) OS/2 code pages to permit printing of Hebrew
   characters on the journal/receipt.
   
   This is enabled using a download font file, and the Kxx screens to download
   and activate the code page. The Hebrew characters are in the lowercase area
   of the code page.
   
   Using this method, printing of customer data to the journal, reserved
   screens or transaction information shows hebrew characters. However, if a
   device status message occurs and is logged to the journal, the printed
   charcters change from being hebrew to the lowercase characters from the NDC
   standard character set single size alpha 1.
   
   This is because the status message sent to the printer contains a select for 
   this set, which disables the code page. This should not happen.
   
   The problem has been demonstrated, and a Uisten log shows this escape
   sequence in the status message.




Summary:
TAR 306138 - AA-NDC 02.06.03: State "H" length checking not implemented as described in pub

Description:
   Customer system: AA-NDC 02.06.03, APTRA XFS 04.01.01 & EDEP sp from XFS
   04.02.00, XP sp2
      
   Information Entry state ?H?. 
   The AA NDC Reference Manual specifies the setting "Buffer & Display
   Parameters" state entry to a value of "003" sets the minimum data length to
   3. This does not work, as any number of digits (0, 1, ?) goes to general
   purpose buffer "B".
   
   Ranjith has checked the code and confirmed that there is no length checking
   and so a TAR is required to get this fixed.
   
   Looking for a patch that can be given on IP to Greece on top of AA-NDC
   02.06.03.



Summary:
TAR 306133 - Cancelling Night Depost Transaction Causes Reboot

Description:
   Pressing the cancel key during a Night Deposit transaction causes AANDC to
   reboot (access violation). 
   
   This has been recreated in our lab and on a simulator. The condition is
   consistent (happens every time you cancel the transaction). Logs have been
   provided for review.



Summary:
Card Ejector Worker help does not mention captured signal

Description:
Captured signal introduced in Card Ejector worker in 2.6. The online help does not mention this signal.



Summary:
NDC Data Collector Needs to beep for FDK touch screen emulation

Description:
Implemented in 2.6.4 see related GRIT



Summary:
Remove unused 'Blank Card' signal from Card Track Reader worker

Description:
From ANDC 2.6.0 onwards, the Card Track Reader worker has a new signal "Blank Card" added. This signal will not be generated and should be ignored.

[Craig - I think we need to remove this new signal since it isn't used in either SV or MV implementations - it must have been added for EMV support perhaps but wasn't required but was left in the product!!!]




Summary:
Remove unused 'Blank Card' signal from Card Track Reader worker

Description:
From ANDC 2.6.0 onwards, the Card Track Reader worker has a new signal "Blank Card" added. This signal will not be generated and should be ignored.

[Craig - I think we need to remove this new signal since it isn't used in either SV or MV implementations - it must have been added for EMV support perhaps but wasn't required but was left in the product!!!]




Summary:
TAR 306067 - Print format is not PPD default when no data follows Printer Flag 4

Description:
   The default PPD print is not printed on the envelope, instead the data
   observed by the customer to be printed on the envelope was as follows:-
   
   0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 
   
   During testing in the lab here in Dundee by FGSC, it appeared that the four
   digit value would increment with the transaction number, for example 0017
   repeated 10 times on one transaction, then 0018 repeated 10 times on the
   envelope on the next.
   
   This was obtained when a Function Identifier of 1 or 7 is selected (for
   Deposit and print), with Printer Flag set at 4 in the transaction reply
   command. 
   
   If Printer Flag of 3 or 5 is defined, the default print is printed on the
   envelope.
   
   Awaiting customer verification that this is the transaction reply used, but
   can recreate in the lab here in Dundee.




Summary:
TAR 306067 - Print format is not PPD default when no data follows Printer Flag 4

Description:
   The default PPD print is not printed on the envelope, instead the data
   observed by the customer to be printed on the envelope was as follows:-
   
   0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 
   
   During testing in the lab here in Dundee by FGSC, it appeared that the four
   digit value would increment with the transaction number, for example 0017
   repeated 10 times on one transaction, then 0018 repeated 10 times on the
   envelope on the next.
   
   This was obtained when a Function Identifier of 1 or 7 is selected (for
   Deposit and print), with Printer Flag set at 4 in the transaction reply
   command. 
   
   If Printer Flag of 3 or 5 is defined, the default print is printed on the
   envelope.
   
   Awaiting customer verification that this is the transaction reply used, but
   can recreate in the lab here in Dundee.




Summary:
TAR 306059 - Print Immediate cmd with next state in reply has issues with promote screens

Description:
   CUSTOMER VERIFICATION IS NOT REQUIRED FOR THIS TAR
   ==================================================
   
   The customer that pointed out this issue does not require a fix for
   verification
   
   PROBLEM
   =======
   
   Some background on what is correct
   When running a promote campaign, if the customer chooses to use the "print
   immediate" command in their transaction reply, if there is no next state
   specified then the system waits for another transaction reply and the
   promote campaign can continue.
   If the customer chooses to use the "next state and print command" in the
   reply, then the promote sync stuff is sent by AA-NDC and the system moves
   into the next state in the application flow.
   
   The issue?
   
   Stated in the manual, if a next state is included in the transaction reply
   the "print immediate" command should act as the "next state and print"
   command.
    
   However, if you add a next state to the "print immediate" command, it does
   not act as the "next state and print" with regard to promote as there is no
   promote sync stuff. This in turn means that when AA-NDC moves on to another
   state, promote campaigns will not stop being displayed.
   
   Should the print immediate command conditionally send the promote sync stuff 
   depending on if there is a next state specified or not?




Summary:
Support ECB6 functionality for all BNA variants

Description:
Support sorting of note types into cassettes, including suspect and counterfeit notes. Will include capturing signature data for suspect and counterfeit notes.



Summary:
TAR 305988 - AA-NDC 02.06.03 - Very slow reponse from ATM to host messages

Description:
   AA-NDC 02.06.xx
   
   Phillipines & Malaysia both reported an issue with SNA3624 comms where the
   second transaction (chained transaction) was timing out. The transaction
   reply was being received by the ATM, but was not being processed for 2
   minutes. TCP/IP was not affected.
   
   The solution is to modify the timer (worker ID 0n815dc5) from 120 seconds to 
   10 seconds.
   
   This has been verified by the customer and this TAR is to track this change
   into a future release of AA-NDC. This TAR is raised as priority 4 since the
   customer already has a fix (they made the authoring change themselves) so no 
   patch required, just needs to be fixed in next available release of AA-NDC.
   
   Ranjith is aware of the issue and the solution.
   



Summary:
TAR 305988 - AA-NDC 02.06.03 - Very slow reponse from ATM to host messages

Description:
   AA-NDC 02.06.xx
   
   Phillipines & Malaysia both reported an issue with SNA3624 comms where the
   second transaction (chained transaction) was timing out. The transaction
   reply was being received by the ATM, but was not being processed for 2
   minutes. TCP/IP was not affected.
   
   The solution is to modify the timer (worker ID 0n815dc5) from 120 seconds to 
   10 seconds.
   
   This has been verified by the customer and this TAR is to track this change
   into a future release of AA-NDC. This TAR is raised as priority 4 since the
   customer already has a fix (they made the authoring change themselves) so no 
   patch required, just needs to be fixed in next available release of AA-NDC.
   
   Ranjith is aware of the issue and the solution.
   



Summary:
TAR 305994 - AA-NDC 02.06.03 - Manual card removal before card eject/capture not handled OK

Description:
   AA-NDC 02.06.03
   XFS 04.01.01 & EDEP sp from XFS 04.02.00
   XP sp 2
   ==============
   
   
   David,
   
   Ranjith will try to have a look at this today.  If you are confident it's
   definitely a problem, then let us know and raise the TAR.
   
   Regards,
   Craig.
   
   _____________________________________________ 
   From: 	Strachan, David J  
   Sent:	27 July 2005 11:31
   To:	Mellor, Craig
   Cc:	Suresh, Ranjith
   Subject:	RAZBR8SVJ - (Issue B.3) Manual card removal before card eject or
   card capture not handled OK
   
   Hi Craig,
   
   I have been investigating a number of issues at Alpha Bank (Greece). I have
   one which is an AA-NDC issue where the application does not handle correctly 
   the case where if a card is inserted in the card reader to initiate a
   transaction but the card is then removed manually, then the card is either
   ejected or captured by the application, then vanilla AA-NDC 02.06.03 does
   not seem to handle this correctly.
   
   I have confirmed that the card reader driver is reporting the correct
   M-Status to indicate that the card is removed, and some entries in the
   AA-NDC debug logs also indicate the app is aware that the card is gone.
   However, the flow seems to be incorrect after this as it says either card
   captured or pleaes take your card.
   
   I attach the debug logs I captured on-site for the "eject when card already
   removed" and the "capture when card already removed".
   
   Let me know whether its Ok to go ahead and raise a TAR.
   
   Best regards,
   
    << File: logs.zip >> 
   
   David Strachan, Solutions Engineer




Summary:
CPM - when an endorse is sent with no data the full specific command reject is always sent

Description:
I sent an endorse - printer flag 'b' with no data and correctly got a B20 however, the specific command reject option was not set (should just have been A sent).  If the specific command reject option is not sent then only command reject A should be returned



Summary:
CPM - CLEAR DEPOS is not clearing the bin count 

Description:
The CLR DEPOS function I believe should display 00000 for the bins (as a confirmation that it has been cleared) however it is showing the number of cheques deposited prior to the clear.  This is correct for printing on the journal during this function but I believe the display should be zeroed.




Summary:
CPM is not  sending unsolicited error messages

Description:
All the good case scenarios worked OK however when an error occurred, this was not being reported to NDCHost.  The errors (eg *xxxx*2*q*1 and *xxxx*1*q*6) were being printed on the journal but not being sent to the host.  Debuglog in these cases only displays the message paranthesis [] indicating that there should be something there but there is not. 




Summary:
TAR 305890 - AA-NDC: Missing audio file or error in esacpe sequence plays last good message

Description:
   XP SP2
   XFS 02.02.02
   AA-NDC 02.06.03
   
   When a voice mesage is played using an escape seuqnce in a customer screen,
   if the associated .wav file is missing, or there is a typographical error in 
   the escape sequence, then the last good message that has been played is
   played at this point also.
   
   For example, if the escape sequence is:
   
   <esc>P020;0<esc>\, and file DDAUDIO20.wav is not present in the SSDS\DLL
   folder, then whatever had been played  as the last previous voice message is 
   replayed.
   
   A similar thing would happen if the string is <esc>P020:0<esc>\, and the
   audio file is present.
   
   If there is an error, then this message should not be played.




Summary:
TAR 305890 - AA-NDC: Missing audio file or error in esacpe sequence plays last good message

Description:
   XP SP2
   XFS 02.02.02
   AA-NDC 02.06.03
   
   When a voice mesage is played using an escape seuqnce in a customer screen,
   if the associated .wav file is missing, or there is a typographical error in 
   the escape sequence, then the last good message that has been played is
   played at this point also.
   
   For example, if the escape sequence is:
   
   <esc>P020;0<esc>\, and file DDAUDIO20.wav is not present in the SSDS\DLL
   folder, then whatever had been played  as the last previous voice message is 
   replayed.
   
   A similar thing would happen if the string is <esc>P020:0<esc>\, and the
   audio file is present.
   
   If there is an error, then this message should not be played.




Summary:
TAR 305884 - AA-NDC : Cassette being removed does not report fatal in Get Config command

Description:
   A difference has been seen with AA-NDC 02.06.02 and NDC+. The issue occurs
   when a cassette is removed from the dispenser and a withdrawal transaction
   is performed using that cassette. AA-NDC responds to the host to say that it 
   could not perform this tranasction and reporting that the cassette is fatal. 
   Then send a Get config command. The response returns that the cassette is in 
   a good state.
   
   It is thought that the response to the return cassette status command, which 
   is 00 for a cassette not installed, is being used and that this overwrites
   the fatal condition seen from the the withdrawal transaction.




Summary:
TAR 305884 - AA-NDC : Cassette being removed does not report fatal in Get Config command

Description:
   A difference has been seen with AA-NDC 02.06.02 and NDC+. The issue occurs
   when a cassette is removed from the dispenser and a withdrawal transaction
   is performed using that cassette. AA-NDC responds to the host to say that it 
   could not perform this tranasction and reporting that the cassette is fatal. 
   Then send a Get config command. The response returns that the cassette is in 
   a good state.
   
   It is thought that the response to the return cassette status command, which 
   is 00 for a cassette not installed, is being used and that this overwrites
   the fatal condition seen from the the withdrawal transaction.




Summary:
BNA2 incorrect behaviour when device attempts to cancel the cashin operation

Description:
On BNA2, when device attempts to cancel the cashin operation, if notes are inserted and removed the flow should go to the Please Insert Notes screen



Summary:
Missing BNASupplies store in refund script host

Description:
BnaSupplies CDI store needs to be added to the data objects of the refund scripts and the name added in the variables column.
Scripts 1n5866dc129, 2n5765dc129 and 44n5304dc128 to be updated.
Pradeep supplied the fixes.



Summary:
Change of behaviour for when an EOT is received during a send.

Description:
Currently when an EOT is received during a send the behaviour differs dependant on a Session/Transaction being open or not.  This behaviour should be consistent across both scenarios(in and out of a Session/Transaction) and always attempt to send the message and should not just return a Failed result immediately.



Summary:
TAR 305546 - AA-NDC: Settlement Transaction using C09 screen Next State Table incorrectly

Description:
   Problem Reported on AA-NDC 02.06.02, but review of 02.06.03 release
   documentation does not reveal any fixes in this area.
   
   The customer is downloading a C09 screen that contains one active entry in
   the Next State table, which is set to 000. All other entries are 255. The
   next state action table has 2 as the first entry, all others are 0.
   
   When the supervisor/settlement transaction is performed, a set next State &
   Print function command is sent, and the Next state number in this message is 
   034.
   
   This does not match any of the entries in the Next State Table, so the
   default action should be used, which is to redisplay the FUNC- prompt.
   Instead, the retunr to normal In Service action is taken.
   
   This can be demonstrated using NDChost and NDC=MESS.
   
   The SCREEN_9 message is modified to contain the following C09 screen data:
   
   1?;5799288888888888=99125876030??06080002552552552552552552552552552000000000
    A A    00
   
   Download the standard messages, followed by SCREEN_9 and the CONFIG and
   GIS.
   
   Go into Supervisor and select the Supervisor/settlement Transaction function 
   (item 15 in the Replenish menu). Exit Supervisor, and send GIS if needed. 
   The FUNC display will show. enter 0, and send the NXT_PRNT message as
   response. Following the print, the ATM goes to normal in service mode. This
   is incorrect.
   
   It can be demonstrated that the next state table is using the first
   selection by chnaging the action from 2 to 0, and downloading the screen
   message again, in which case the FUNC- prompt will be displayed at the end
   of the transaction.
   
   Debug log available.




Summary:
TAR 305546 - AA-NDC: Settlement Transaction using C09 screen Next State Table incorrectly

Description:
   Problem Reported on AA-NDC 02.06.02, but review of 02.06.03 release
   documentation does not reveal any fixes in this area.
   
   The customer is downloading a C09 screen that contains one active entry in
   the Next State table, which is set to 000. All other entries are 255. The
   next state action table has 2 as the first entry, all others are 0.
   
   When the supervisor/settlement transaction is performed, a set next State &
   Print function command is sent, and the Next state number in this message is 
   034.
   
   This does not match any of the entries in the Next State Table, so the
   default action should be used, which is to redisplay the FUNC- prompt.
   Instead, the retunr to normal In Service action is taken.
   
   This can be demonstrated using NDChost and NDC=MESS.
   
   The SCREEN_9 message is modified to contain the following C09 screen data:
   
   1?;5799288888888888=99125876030??06080002552552552552552552552552552000000000
    A A    00
   
   Download the standard messages, followed by SCREEN_9 and the CONFIG and
   GIS.
   
   Go into Supervisor and select the Supervisor/settlement Transaction function 
   (item 15 in the Replenish menu). Exit Supervisor, and send GIS if needed. 
   The FUNC display will show. enter 0, and send the NXT_PRNT message as
   response. Following the print, the ATM goes to normal in service mode. This
   is incorrect.
   
   It can be demonstrated that the next state table is using the first
   selection by chnaging the action from 2 to 0, and downloading the screen
   message again, in which case the FUNC- prompt will be displayed at the end
   of the transaction.
   
   Debug log available.




Summary:
TAR 305602 - AA-NDC : no unsolic being sent on subsequent transactions after EJ is fatal

Description:
   After filling the EJ an unsolic to report this to the host is sent. However, 
   if the host decides to carry on performing transaction there is no more
   unsolicsw sent to report that the EJ is fatal if a transaction requires to
   print to it. This is different to what with the paper journal and also what
   happens with the EJ in NDC+.



Summary:
TAR 299554 - Screen flickering when switching between web browser and other NDC screens

Description:
Screen flicker fix in 2.5 and 2.6 needed to be removed from 3.0 because it caused a hang on exit from Supervisor. Stephen has fixed this in 2.6.4 and the new flicker fix needs to be applied to 3.0.



Summary:
TAR 288534 Change IP to clarify that AANDC will work differently than NDC+ Diebold Mode

Description:
Change IP to clarify that Diebold mode not supported in AANDC, so will work
differently than NDC+ (ref TAR RFC 271997)



Summary:
TAR RFC 285244 AA-NDC : Change to wording in the supplie information in Prog Ref Manual

Description:
There is a chnage been requested to amend the information in the AA-NDC Programmers Reference Manual. The Supplies counts information states that on page 9-30 the Note 1. This states that :-
"The optional group separators will be included if any field is included after them within the message."
To make it clearer it is thought that the wording should be changed to for Note1 :-
All of the preceding optional group separators will be included if any field is included after them within the message.

This matches what the software does as if a field in the supplies is
populated then all optional group separators are included in the message so the host knows which count it is.




Summary:
TAR RFC 283676 Allow Message Mode Option Digit 2, Value of 3 (No Retract and Present Beep)

Description:
Customer requires that Retract should be disabled but also needs the beeper on when the notes are presented. On a P77, the dispensed notes are not very visible (according to the customer) so it is required for there to be an audible indicator to attract the users attention to the screen. It may also be a legal requirement to have retract disabled.
According to NDC+ and AANDC supervisors guide there is no facility for this.
You can select Message mode option digit 2 to be 0,1,2 or 4,5,6 but not 3 hich would be "Do not retract notes" and "Sound beeper while notes are resented, until notes have been taken or timer 05 has expired".
The customer tested with the value of 3 and found no problems with this. So, this RFC requests that the value of 3 (and 7) be supported for a future release.



Summary:
ITS Insufficient for - GR1T 307940 - AA-NDC reads all 3 tracks on card even if only 2 present

Description:
The ITS for GR1T 307940 - TAR 264331/TAR 245202 goes into an insufficient level of detail and requires an update to detail any unsolicited messages that may be sent to the host due to the fact that an attempt has been made to Track 3 on the card despite the fact that Track 3 was not read in the Card read State. This issue is seen with using the particular message file detailed in the spec. May also want to update the message file. This update is required for both MCRW and DASH tests.




Summary:
NDC Data Collector Needs to beep for FDK touch screen emulation.

Description:
Keypress beep missing when using touch screen.  This means there is no user feed back when the screen area representing an FDK is pressed.  Same code used in NDCCUST could be used.



Summary:
PD Tracing issues with Visa2 source code.

Description:
see attached email.



Summary:
No unsol sent after Suspend condition exited via GIS and Cash handler still Fatal

Description:
This was part of GRIT 318111 but is a GRIT in its own right - Scenario based on creating Suspend condition but holding onto the notes when the CDM attempts to clear the suspend

If the suspend is exited by a GIS (after the SP has tried and failed to clear the notes) NO unsolicited fatal message is sent to the host for the dispenser, only a Ready 9 is received. If the suspend is allowed to run its full 5 minute timeout period (with the notes held on to when the SP tries to clear them) an unsolicited fatal IS sent to the host for the dispenser.



Summary:
TAR 305327 - Device/Transaction status is different from NDC+ on MCRW suspend

Description:
Customer has reported a discrepancy between AA-NDC 02.02.00 and 02.06.00,
in the transaction/device status code reported on an unsolicited status
message from the card reader. 

To recreate the status code the customer tests as follows : 
- Insert a card 
- Press the cancel key 
- Let the card be ejected and retracted once 
- Hold the card until the application suspends. 

The results are as follows : 
AA-NDC 02.02.00 
12.000..D0.3.1301020839.0 

AA-NDC 02.06.00 
12.000..D1.3.13060020B9.1 

The customers host system uses the transaction/device status code to
determine details on last transaction in cases where a ready 9 was not
received, 0 indicates no transaction exception, 1 represents card jammed. 

FGSC have tested NDC+ in the same manner and get the following result : 
12.000..D0.3.1306002039.0 

What should the transaction status code be, 0 or 1. There is no
information to determine how to map the data through from the card reader
response to the application response. The card reader spec shows that the
command 06 from the m-data is the capture command. This has four possible
t-codes : 
0 - good card captured 
1 - transport clear no card to capture 
2 - transport clear card removed by cardholder 
3 - device inoperative, suspend or fatal 

How does AA-NDC map these device t-codes to a "transaction" status code of
"0" or "1" 

Does the application transaction status code vary, depending on where in the 
transaction the issue occurs ? 

In the absence of any other information, the response should be as per NDC+




Summary:
ADE User's Guide: PDF missing some bookmarks and has wrong graphics

Description:
In Adobe reader, bookmarks (in right-hand pane) do not include List of Figures and List of Tables, though they are in the publication (pp xxv to xxx).

Fig. 5-3 on p 5-14 (PDF p. 142) still shows the CoreSelfService project highlighted instead of the CustomisationLayer project.




Summary:
CCM VISA2 should not fail send on an incoming EOT until it has attempted to send and failed. EOT should result in line being dropped but there should be a subsequent redial and attempt to send.

Description:
CCM VISA2 should not fail send on an incoming EOT until it has attempted to send and failed. EOT should result in line being dropped but there should be a subsequent redial and attempt to send.



Summary:
TAR 305837 Envelope deposit timeout where tampered.

Description:
seen 2.6.3 Alphabank, Athens
Where shutter held open during deposit deposit function goes to timeout. Process
event method in deposit worker did not detect tamper, tamper signal was not taken.
seen on P86 & P75.

fix to BasicATMWCL/Sources/cpp/ENVDEPO.CPP 1.42 line 1059
        else if (rv[0] == mSUSPEND)
	{
		WorkerState = SIGNALLED;
		WorkerSignal = new mSignal ( this, aWC, TAMPERED, UIPriority );
	}



Summary:
TAR 305813 Hang with Simulated supervisor entry exit where host send GOOS

Description:
Seen with 2.6.3 in ALFABANK, Athens - see related issue attached document for description & fix



Summary:
TAR 305199:  Nested screens not displaying on a EP57 with dip reader & spray dispenser

Description:
During a "cash before cash" or "card before cash & print" transaction, a screen with two nested screens is displayed, with the first of the nested screens normally indicating to the customer to remove their card and the second, to take their cash. 

While using an EP57 with dip card reader and spray dispenser, the screen should skip showing the "take your card" screen and should show the "take your cash" screen.

The problem that is seen is that from the transaction request state the screen does not change until entering the close state and never shows the second nested screen.

It has been seen in debug logs that the application is following the flow required for the spray dispenser, just that the screen is not shown




Summary:
BNA Enhancements such as Display/Print configured notes only

Description:
PS Turkey customisations - need to check if implemented in 3.0 already.
1.	Confirmation screen is designed to show the number of accepted notes for 50 denominations. We have rearranged this part to show only the configured notes, 4 for TRL, and the total amount that is going to be deposited.
2.	Journal printings have been rearranged to just print 4 denominations.




Summary:
OOXFS does not correctly update it's status when the depository printhead is removed

Description:
Integrate from ANDC 2.6.4.



Summary:
Display transaction type descriptive text during Settlement

Description:
At the moment when the FUNC - prompt is displayed during settlement, only 0 or 1 is displayed to indicate the transaction type being selected. This RFC is to use a PS customisation to display text describing the transaction.



Summary:
If CCM Visa2 does not fix underlying issue concerning EOT on Send then we need to send P20 at same exact time as R9

Description:
If CCM Visa2 does not fix underlying issue concerning EOT on Send then we need to send P20 at same exact time as R9



Summary:
Dialup Supervisor - Default Settings at SOD should be set to use lowercase f in false  rather than uppercase F

Description:
Dialup Supervisor - Default Settings at SOD should be set to use lowercase f in false  rather than uppercase F



Summary:
Print s/w version, date etc to journal at Start of Day

Description:
Create hardcoded worker with journal information re. version numbers of apps etc that can be used by FGSC to identify the versions of the application being used.



Summary:
Support Cardless Transaction in Advance NDC

Description:
Malaysia and Netherlands have 2 different customisations for this, using keypad and FDKs to select the cardless transaction. Need to check which implementation is most suitable for general release.



Summary:
OOXFS does not correctly update it's status when the depository printhead is removed

Description:
When the depository printhead is removed the OOXFS layer does not update its status to fatal. This will cause the terminal command get fitness to to report good rather than fatal and cause the XFS depentry command to be called when it should not be.



Summary:
Print track2 data to journal as an optional configuration

Description:
PS customisation to be considered for inclusion in 3.0.1.
In NDC+ the track2 data could optionally be printed to journal. 
If enhanced configuration parameter option 37 is set to 001 then on card entry, after reading the card track data and before doing the fit search, the complete card track 2 data is printed to the journal.

As well as printing the complete card track 2 data which will be the dynamic print data, there will also be static data consisting of the date, time and a string from the Registry Key (Advance NDC\Journal Data\CardTrack2) which will have a default of ¿Card Inserted ¿ Track 2 Data: *¿ where the * denotes the positioning of dynamic data.




Summary:
Support SNMP traps in AANDC

Description:
UK PS customisation to send an SNMP trap at mode change to be considered for inclusion in the standard product for 3.0.1



Summary:
Version number not updated in installer for AANDC 02.06.04 (still showing 02.06.03)

Description:
When running post installation confidence test on 92.06.04.01, I noticed that when sending a GETSWID (1<fs><fs><fs>75) or a GETCONF (1<fs><fs><fs>7) from the host, the product version number being returned is 02.06.03. When checking the software configuration in Diagnostics the product version number is shown as 92.06.04.01.



Summary:
BNA2 - When notesreporting option is set to 0 and 91 valid + 5 invalid notes are inserted, the Confirmation Screen is shown

Description:
When notesreporting option is set to 0 and 91 valid + 5 invalid notes are inserted in bna2, ideally the invalid notes should be rejected and once the invalid notes are removed the remaining 91 notes in the escrow should be refunded.

But in case of bna2 it is showing confirmation screen. This is because the sequence of events that occurred on bna2 are
Inserted->InputRefused->Presented->Taken->CashinOk, whereas in GBNA the sequence of events are 
Inserted->InputRefused->Presented->CashinOk->Taken.




Summary:
BNA2 default Cash Acceptance timer of 24 seconds means cashin operation is cancelled

Description:
With a timer of 24 seconds the BNA2 cancels the cash in operation when notes are inserted. This is incorrect, the cash in operation should be cancelled only in the following cases:-
1. when cancel selected on Please Insert Notes screen 
2. when No is selected at the Extra Time screen.
This is happening because low level script events are being missed. It is actually an ActiveXFS issue but Pradeep has provided a workaround.



Summary:
TAR 304661:      1..73 cmd returning env_dispenser fatal when not present...

Description:
P86 Envelope dispenser / depository removed.
P75 Envelope dispenser / depository removed.

latest XFS EDEP Service provider (XFS 04.02.00) 

It has been seen that a device terminal fitness data command
16:18:09  # 171    [1[Unicode-x1C][Unicode-x1C][Unicode-x1C]..73]

will return the envelope dispenser fitness as fatal although the envelope dispenser is not present. No envelope dispenser falure is seen within the event logs and the device is not present within the system application or device status list.


16:18:10  # 172   
[22[Unicode-x1C]000000001[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]JAA0[Unicode-x1D]B0[Unicode-x1D]C0[Unicode-x1D]D0[Unicode-x1D]E00000[Unicode-x1D]F0[Unicode-x1D]G0[Unicode-x1D]L0[Unicode-x1D]O0[Unicode-x1D]Q0[Unicode-x1D]V0[Unicode-x1D]\4]

from looking at the XFS trace logging for the previous status command (which the fitness is made up of) the following is seen...

(Date)04.07.2005 (Time)16:18.09,492
XFS EDEP Service Provider, XFS-Framework <FREE>Worker hService: 9 (0x00000009), RequestId: 1719 (0x000006b7)</FREE> <F>WFSResultData</F> <P>
	<N>lpStatus</N>
	<PTR>94551716</PTR>

	<N>lpStatus->fwDevice</N>
	<UI2>0</UI2>

	<N>lpStatus->fwDepContainer</N>
	<UI2>0</UI2>

	<N>lpStatus->fwDepTransport</N>
	<UI2>0</UI2>

	<N>lpStatus->fwEnvSupply</N>
	<UI2>4</UI2>

	<N>lpStatus->fwEnvDispenser</N>
	<UI2>6</UI2>

	<N>lpStatus->fwPrinter</N>
	<UI2>0</UI2>

	<N>lpStatus->fwToner</N>
	<UI2>0</UI2>

	<N>lpStatus->fwShutter</N>
	<UI2>0</UI2>

	<N>lpStatus->wNumOfDeposits</N>
	<UI2>1</UI2>

	<N>lpStatus->lpszExtra</N>
	<PTR>0</PTR>
	<STR></STR>
</P>
<SCFILE>FWResultImpl.cpp</SCFILE>
<SCLINE>3968</SCLINE>
<E>WFS_GETINFO_COMPLETE</E>


i.e. fwEnvSupply      = 4 WFS_DEP_ENVMISSING (4) and
     fwEnvDispenser   = 6 WFS_DEP_ENVNOTSUPP (6)

Have discussed this with Euan P. who's had a look at the code for this area in aandc [ could not find on star copylist]. I have messageout / message in and xfstrace logs showing this issue if required just let me know.

Rory




Summary:
Key Import Fails on Wincor

Description:
Key Import Fails with 'KEY NOT FOUND' when attempting to delete key on an EPP that has not been defined.  The code assumes that the key is defined and so fails to import the key as a result of the initial key delete not working.  Also, 'USE CONSTRUCT' not supported fgor XOR import by older service provider so XOR import has to be done using older method.

Not sure if the key is required to be deleted before import - but the functionality to delete a key would still be required at some point.

Wincor also does not return a KVV for the import and so fails to display a KVV in Access Mode.





Summary:
Activity count not working with selective maccing

Description:
NDC feild TSN object called twice - 1st activation backs up object - second invocation does not recognise TSN has updated. Added CDI to notify activation



Summary:
Supervisor focus lost when safe door was opened 

Description:
When NDC screen used for supervisor - gateway is activated and NDC screen looses focus.



Summary:
Cash Configuration & Calibration on WNI

Description:
WNI has no diagnostics ANDC can call in an MV situation.
we need a supervisor function to calibrate and configure cassettes.
1st implementation delivered to  PromstroyBank st petersburg July 2005



Summary:
ANDC 3.0 released with Incorrect  CCM VISA2 01.00.00 Release Bulletin.

Description:
ANDC 3.0 released with Incorrect CCM VISA2 01.00.00 Release bulletin.

Release bulletin should reference HICS & PCD version & above.
Reference outstanding GRIT 316951 & refer hardware dependiences .  Multitech Modem.  Release Bulletin should also be updaeted to reference outstanding GRIT 317401 - FOR ANDC ONLY - No option to print DIAGNOSTICS "Query Modem".




Summary:
Sometimes extra mstatus/mdata from HWError does not get applied to msgs

Description:
Issue found in 3.0 may need to be applied to 2.6.x. Mike fixed this.



Summary:
Build Final failed because it could not find xfsapi.h

Description:
Problem raised by Ian Davidson.  See below.
______________________________________________ 
From: 	Davidson, Ian  
Sent:	04 July 2005 08:31
To:	FGSC
Subject:	Not an incident - just some information

I have done something which is not supported - so I'm not seeking support. I am reporting my experience in case the same thing happens in a supported environment.

On a newly installed XP machine, I installed Visual Studio (C++), then APTRA XFS 2.2.2, then NDC 2.6.0, then the two simulators, then NDC 2.6.3.

When I tried to do a Build Final, the compilation failed because it could not find xfsapi.h.

I looked on another machine and found xfsapi.h in C:\Program Files\Common Files\NCR\Include - so I copied all the files which that machine had into my own equivalent folder. The Build Final then compiled OK.

My purpose in reporting this is that I do not know which component should have installed those files - and there is a possibility that something has been missed.



Summary:
Build Final failed because it could not find xfsapi.h

Description:
Problem raised by Ian Davidson.  See below.
______________________________________________ 
From: 	Davidson, Ian  
Sent:	04 July 2005 08:31
To:	FGSC
Subject:	Not an incident - just some information

I have done something which is not supported - so I'm not seeking support. I am reporting my experience in case the same thing happens in a supported environment.

On a newly installed XP machine, I installed Visual Studio (C++), then APTRA XFS 2.2.2, then NDC 2.6.0, then the two simulators, then NDC 2.6.3.

When I tried to do a Build Final, the compilation failed because it could not find xfsapi.h.

I looked on another machine and found xfsapi.h in C:\Program Files\Common Files\NCR\Include - so I copied all the files which that machine had into my own equivalent folder. The Build Final then compiled OK.

My purpose in reporting this is that I do not know which component should have installed those files - and there is a possibility that something has been missed.



Summary:
TAR 304569 - Missing Ready 9 Response upon exit from Supervisor/Supply

Description:
   When exiting from Supply mode in Supervisor, if there is no delay between
   prior to the GIS, then only one Ready 9 gets sent, instead of two.   
   
   It would seem that the system still thinks that it is still in Supply mode
   and therefore as per the AA-NDC Reference manual, it will only react to the
   last command - while in supply.  AA-NDC Reference Manual states :-
    
   A2 - Hold until Supply mode is exited and then process. Response is Ready
   (?9? ) status. Note that if more than one command is received while in
   Supply mode, only the last is recognised. The others are dropped, and no
   response is given.
   
   However, if there is a delay prior to the GIS being sent, then two Ready 9's 
   will be sent.
   
   The problem seems to be due timing of transactions/responses.  
   It can be re-created using the test tool using the automatic response.
   
   APTRA ATM  - Missing 1 Ready 9 Response
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20                 *** Auto response to GIS ***
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9
   
   
   APTRA ATM - 2 Ready 9 Responses
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9                         *** Manual GIS response ***
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9 
   



Summary:
TAR 304569 - Missing Ready 9 Response upon exit from Supervisor/Supply

Description:
   When exiting from Supply mode in Supervisor, if there is no delay between
   prior to the GIS, then only one Ready 9 gets sent, instead of two.   
   
   It would seem that the system still thinks that it is still in Supply mode
   and therefore as per the AA-NDC Reference manual, it will only react to the
   last command - while in supply.  AA-NDC Reference Manual states :-
    
   A2 - Hold until Supply mode is exited and then process. Response is Ready
   (?9? ) status. Note that if more than one command is received while in
   Supply mode, only the last is recognised. The others are dropped, and no
   response is given.
   
   However, if there is a delay prior to the GIS being sent, then two Ready 9's 
   will be sent.
   
   The problem seems to be due timing of transactions/responses.  
   It can be re-created using the test tool using the automatic response.
   
   APTRA ATM  - Missing 1 Ready 9 Response
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20                 *** Auto response to GIS ***
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9
   
   
   APTRA ATM - 2 Ready 9 Responses
   
   Supervisor On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P21
   Supply On - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R04
   Supply Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]R09 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Supervisor Off - 12[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]P20 
   Start up - 1[Unicode-x1C][Unicode-x1C][Unicode-x1C]1 
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9                         *** Manual GIS response ***
   Ready 9 - 22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]9 
   



Summary:
TAR 304454 - Print format on envelope always reverts to default format

Description:
   On a transaction reply, trying to print specific data onto the envelope
   during deposit, the data printed is the default format.
   
   Example transaction reply message -
   
   4 FS     0   0    0   1    2   3    4   5    6 FS     C   1    4   E    2  
   4    3   C  FS    0    2   6  FS  FS 0   6    6   7    1   0    2   7    0   
   7    5 SI     @   @  FS    5    0   5    0   3    0   8    8   3    0   2  1 
     0    5   8    8   2    5   *    $   2    5   .    0   0    *   0    6   6  
     7   *    W   1    C   1    8   7 1   3
   
   From this message we would expect -  030883021058825*$25.00*0667*W1C18713
   
   However what was actually printed was - 0667  25.00
   0667*50351138425818242=08091212306300 15/06/05 12:02:04
   
   This matches the default format.
   
   Issue has been recreated by FGSC and can be demonstrated if neccessary.



Summary:
TAR 304454 - Print format on envelope always reverts to default format

Description:
   On a transaction reply, trying to print specific data onto the envelope
   during deposit, the data printed is the default format.
   
   Example transaction reply message -
   
   4 FS     0   0    0   1    2   3    4   5    6 FS     C   1    4   E    2  
   4    3   C  FS    0    2   6  FS  FS 0   6    6   7    1   0    2   7    0   
   7    5 SI     @   @  FS    5    0   5    0   3    0   8    8   3    0   2  1 
     0    5   8    8   2    5   *    $   2    5   .    0   0    *   0    6   6  
     7   *    W   1    C   1    8   7 1   3
   
   From this message we would expect -  030883021058825*$25.00*0667*W1C18713
   
   However what was actually printed was - 0667  25.00
   0667*50351138425818242=08091212306300 15/06/05 12:02:04
   
   This matches the default format.
   
   Issue has been recreated by FGSC and can be demonstrated if neccessary.



Summary:
ANDC 3.00 - Info Required in Ref Manual.  When PIN entry is required in Settlement and EPP is configured, the user interface defaults to the CRT and not the EOP

Description:
Usability Issue.  Update required to Reference Manual.
When and EPP is configured and PIN entry is required in a Settlement transaction, the user interface for this function transfers to the front rather than being displayed on the EOP.  This is a restriction in the functionality and only when secure keypads are supported on the rear will this function as it does in previous versions of SST.





Summary:
TAR RFC 300868 - AANDC : No support in AANDC for coupon attached to receipt in Promote

Description:
APTRA Promote allows coupons to be attached but the functionality does not
work when used with AA-NDC. This RFC to being raised on AA-NDC and another
on Promote to have the issue addressed.



Summary:
PIN Entry state B - FDK A should work as ENTER

Description:
problem with CEN 2 to CEN 3 migration



Summary:
Dial up  Diagnostics "Query Modem" Tech Publication mentions "provides option to print the infomation"

Description:
CCM VISA2 91.00.00.11   - Dial up  Diagnostics "Query Modem" Tech Publication mentions "provides option to print the infomation". . . . CCM VISA2 01.00.00 No longer provides the option to print.



Summary:
Inserting and removing notes while canceling the cashinoperation goes to extra time screen

Description:
Inserting and removing the notes while canceling the cashinoperation goes to extra time screen after a while.



Summary:
Inserting the notes while cancelling the cashinoperation hangs at process events

Description:
Inserting the notes while cancelling the cashin operation hangs at process events as it doesn't get proper events in the upper script host.

Need to wait at the lower script host and after getting the event handle in the upper script host.



Summary:
TAR 304162 - No cards accepted if intial download STATE A->No FIT Match Next State = 000

Description:
   A customer has highlighted an issue during their migration from NDC+ to
   AA-NDC.  They are using the same download and encountered a problem.
   
   When a card is inserted the customer chooses a language, and then moves to
   the PIN ENTRY state, however, this is never displayed and the customers card 
   is ejected immediately.  The debug log show that the problem is bad fit
   data.
   
   Applica.. 10:38:37.656 Checking Customisation Layer Status [IDLE]  
   <wid>3n4843dc128</wid>
   
   Applica.. 10:38:37.671 Attempting to activate Customisation Layer...  
   <wid>2l194y12</wid>
   
   Applica.. 10:38:37.671 <405671><46><c2> OpenEvent sessionGranted
   Applica.. 10:38:37.671 <405671><46><c2> SetEvent sessionGranted
   Applica.. 10:38:37.703 <405703><46><c2> ResetEvent sessionGranted
   Applica.. 10:38:37.718 Message Handler - awaiting incoming messageCustomi..
   10:38:37.906 ResAgent_Established arrived
   ...  
   <wid>8l194y12</wid>
   
   Customi.. 10:Applica.. 10:38:37.734 <405734><46><16d> WaitForSingleObject
   SessionComplete
   38:37.843 ResAgent.RoleObtained <> RM_USER_OBTAINED
   Customi.. 10:38:52.671 TRACK 2  
   <wid>27s7pg1</wid>
   
   Customi.. 10:38:52.687 Table entry 9 = 0  
   <wid>2a16s1</wid>
   
   Customi.. 10:38:52.703   Eject Card Not Required
   Customi.. 10:38:54.062 ** ENTER PIN  
   <wid>0r774r10</wid>
   
   Customi.. 10:38:54.062 Bad FIT Data  <<--------------------
   <wid>4r774r10</wid>
   
   Customi.. 10:38:54.062 Are we EJing?  
   <wid>5d379ma18</wid>
   
   There is nothing incorrect about the fit data supplied by the customers
   download.
   
   When this issue occurs the state A data is 000A010002130002002002001000
   according to the manual 000 is a valid option for No FIT Match Next State
   Number.
   
   If this option is set to anything other than 000 on the initial download the 
   card is accepted without any issue.
   
   The strange part is that if the states are downloaded again this time with a 
   non 000 value for the No FIT match next state number, a transaction is
   performed successfully and then the value is changed back to 000 the
   download now proceeds successfully to PIN ENTRY and does not reject all
   cards.
   
   This issue can be recreated using the simulator.  Tested on 02.06.03 and
   02.04.00 (issue exisits in this version also).
   
   This can be demonstrated and logs can be provided.




Summary:
TAR 304053 - AA-NDC Hang experienced on exit from Supervisor

Description:
   AA-NDC 02.06.03
   XFS 04.01.01
   Windows XP SP1
   
   Hang experienced when exiting Supervisor.
   
   The following sequence is followed which results in a blue screen appearing
   on the front screen and no response from the ATM - keyboard, eop etc
   
   Toggle to Supervisor mode -> Transfer to front -> Press 7 Diagnostics ->
   Press exit -> Toggle to normal -> at front Press 9 to exit -> Blue screen
   appears at front.
   
   Task Manager shows SSDSAPP_Supervisor not responding.
   
   Issue demonstrated Ranjith Suresh and Euan Patullo - also tested on AA-NDC
   03.00.00 where issue found to also exist.
   
   Logs available if required.
   
   Tar fix required on IP ASAP as delaying rollout.

   Additional testing by FGSC has shown that the hang can occurr regardless if
   Diagnostics is entered when in Supervisor Mode i.e.
   
   Toggle to Supervisor mode -> Transfer to front  -> Toggle to normal -> at
   front Press 9 to exit -> Blue screen appears at front.




Summary:
TAR 304053 - AA-NDC Hang experienced on exit from Supervisor

Description:
   AA-NDC 02.06.03
   XFS 04.01.01
   Windows XP SP1
   
   Hang experienced when exiting Supervisor.
   
   The following sequence is followed which results in a blue screen appearing
   on the front screen and no response from the ATM - keyboard, eop etc
   
   Toggle to Supervisor mode -> Transfer to front -> Press 7 Diagnostics ->
   Press exit -> Toggle to normal -> at front Press 9 to exit -> Blue screen
   appears at front.
   
   Task Manager shows SSDSAPP_Supervisor not responding.
   
   Issue demonstrated Ranjith Suresh and Euan Patullo - also tested on AA-NDC
   03.00.00 where issue found to also exist.
   
   Logs available if required.
   
   Tar fix required on IP ASAP as delaying rollout.

   Additional testing by FGSC has shown that the hang can occurr regardless if
   Diagnostics is entered when in Supervisor Mode i.e.
   
   Toggle to Supervisor mode -> Transfer to front  -> Toggle to normal -> at
   front Press 9 to exit -> Blue screen appears at front.




Summary:
After Card Reader suspend, GetFit sometimes reports D0, not D3.

Description:
The first time after causing the suspend condition the GetFit msg reports D0 (even before SP clears).  On subsequent attempts it correctly reports D3.



Summary:
Settlement - PIN Block creation fails on BAPE encryptor (test 6.14.1 or 5.4.6)

Description:
The pinblock creation fails - see attached files
WFS_CMD_PIN_CRYPT fails with WFS_ERR_PIN_USEVIOLATION




Summary:
Sideways receipt - margin incorrectly set (test 5.22.5)

Description:
When the test is run, the first line of the receipt starts with [
This is due to incorrect escape sequence sent down to set the right margin - <esc>[0q
Registry setting missing in the RECEIPT area - WIDTH_SIDEWAYS set to 80




Summary:
TIR 304160 - mouse appearing on Mpeg

Description:
RAZBQ6DJ9 - mouse appearing on Mpeg

Customer requires TAR 278547 as a solution



Summary:
TIR 304161 - ATM remains Out Of Service on going from Supervisor to Normal

Description:
Customer : Qatar National Bank
Software : AA-NDC 02.05.00 + Smart Deposit
   
Please implement the following TAR's as a solution to the above problem :-
   238032, 242134, 243311, 252902, 256646, 264530.
   
   Thanks & Regards,
   Gordon



Summary:
Test 5.16.16 - Dialup - Line not bought down - Need to do EndallDials except when in Close due to Card or Encryptor error i.e. non-Transaction

Description:
Test 5.16.16 - Dialup - Line not bought down - Need to do EndallDials except when in Close due to Card or Encryptor error i.e. non-Transaction



Summary:
TAR 299892 - Card reader fatal status not reported as unsolicited after GIS

Description:
Card reader fatal status already sent but needs to be sent again when GIS is received



Summary:
Supervisor.Exe Escaped when (38)DialUpMenu->(3) ModemLink->(1) Primary No is selected from the ConfigureMenu of the Supervisor.

Description:
Supervisor.Exe Escaped when (38)DialUpMenu->(3) ModemLink->(1) Primary No is selected from the ConfigureMenu of the Supervisor. This is happening because the Visa2CommunicationsServiceConfig.xml file in the location C:\Program Files\NCR APTRA\BIN\config\ is a readonly file.

EventViewer Information

Object ID: 55670360
Process ID: 3356
Thread ID: 2596
Process Filename: C:\SSDS\APPS\Supervisor.EXE
SupplyPoint Owner: NCRScotland.SSDS
SupplyPoint Source:mError
Description: <SCFILE> R:\Ssds\InterDomain\Components\ActiveWCL\Sources\cpp\AXScriptHost.cpp </SCFILE>      <SCLINE> 1381 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 114       Error Number: 2    Worker Id:     Description: VBScript has reported an error in a script passed to it.
The error is near line number 132 of Script Host Worker ID: 163n5456dc129.
VBScript has given the following error description:
	'Access is denied.
'
The Source of the Exception is
	'msxml3.dll'
Script is:
'ProcID**activate**END
Const DIALUPURL = "C:\Program Files\NCR APTRA\BIN\config\Visa2CommunicationsServiceConfig.xml"
Sub activate()
     Dim ComConfigNode, Visa2ComLink, SerialLink, ModemLinkData,            </FREE>




Summary:
Author Should Take Ownership Into Account For Worker Edits

Description:
Need to add ownership checks for consolidating workgroups and for Module manipulation updates.



Summary:
After pressing addmore and insert/remove notes immediately should show confirmation screen on BNA1

Description:
While pressing add more on confirmation screen and then insert the notes and remove immediately , then it should show confirmation screen but it is showing please insert notes screen on BNA1.

Need to go to the calculate totals active script host when it gets the cashinfailed event with reason cashin no items.



Summary:
Unsolicited Message does not contain note counts greater than 90 at close state

Description:
Unsolicited Message is reported when CloseState Leave Notes at Escrow Occurs. When Report>90 option is set and greater than 90 notes are entered, and if at the confirmation screen deposit is pressed and no transaction reply is sent,Close state Leave Notes at Escrow is Executed and w3 message is sent. this w3 message is reporting only note counts up to 90.



Summary:
Fitness not set to 4 when notes at throat on BNA1

Description:
When invalid notes are rejected and notes are at throat, it is cancelling the cashin operation as cashinok/failed event is not yet triggered in BNA1 and the event cashinfailed with cancel pressed is occuring in the BNA Enable Script host which makes the BNA Fitness set to 0 rather than 4.
Need to set the fitness to 4 in the cashinfailed event in the BNA Enable Script host



Summary:
Supervisor is escaping when  INIT STMT is done in replenishment menu.

Description:
In the test case 6.5(Supervisor Menu walk through),when INIT STMT is done in the replenishment supervisor is escaping.Attched are the eventviewer & debuglogs.



Summary:
Clearing Cash handler suspend generates Fatal Unsolicited and subsequently reports warning rather than fatal on the cash handler

Description:
Spcific scenario for this is to :-

Create suspend condition e.g. holding onto notes during retract. Then when the close state is entered send a GIS. (This will not do anything until the CDM_SP suspend timeout expires after 2 mins). At this point if we are still holding onto the notes the fatal unsol will be generated. NDC+ does not send this unsol.

This works ok (i.e. no unsol sent) if the GIS is sent after the CDM_SP suspend timer has expired or if the no GIS is sent and the ANDC 5min timer is allowed to complete. (Note for all tests the notes should be held during the clearing of the suspend condition)

Also when the next transaction is run and a dispense is attempted the solicited reports a warning severity rather than fatal (this should maybe be a seperate GRIT)



Summary:
Hang on exit from supervisor

Description:
Hang seen on Kadabra when exiting Supervisor. Simply flick the supervisor switch back to Normal before pressing 9 <enter> and hang occurs

Logs attached



Summary:
Timer field in ITR is not  restricted to maximum value(255) .

Description:
  
When Timer value is set to 300 in ITR,It is functioning well and screen time out after 4 minutes(240seconds).The ITR message suppose to be rejected,Because  document say accepted valid range is between 001-255 and 000 for infinite.

 Tested with following ITR message. 
 3[Unicode-x1C][Unicode-x1C][Unicode-x1C]220100010001[Unicode-x1C]300[Unicode-x1C] [Unicode-x0F]BAPLEASE SELECT THE ACCOUNT FOR[Unicode-x0F]CETHE CASH 
DEPOSIT[Unicode-x0F]E@USD [Unicode-x0F]EDACCOUNT1[Unicode-x0F]E1018 [Unicode-x0F]E540ACCOUNT2[Unicode-x0F]F@001-345234-001[Unicode-x0F]F5 
001-345234-0[Unicode-x0F]H@ [Unicode-x0F]HD[Unicode-x0F]H1 [Unicode-x0F]H5[Unicode-x0F]I@[Unicode-x0F]I5[Unicode-x0F]K@ [Unicode-x0F]KD[Unicode-x0F]K1 [Unicode-x0F]K5[Unicode-x0F]L@[Unicode-x0F]L5[Unicode-x0F]N@ [Unicode-x0F]ND[Unicode-x0F]O@[Unicode-x0F]O3[Unicode-x0F]O3[Unicode-x1C] 

Documentation mentions that valid values are 001 to 255 for giving time out 0.8 to 204seconds.The ITR accepts the values more than
255(eg 300).



Summary:
Require implementation of TAR RFC 281392 in MV Environment - Functionality for RebootSV.exe needs to be duplicated in RebootMV.exe

Description:
Require implementation of TAR RFC 281392 in MV Environment -  Functionality for RebootSV.exe needs to be duplicated in RebootMV.exe



Summary:
TAR 303937 - TAR 255150 has been reintroduced in AANDC 02.06.03

Description:
   TAR 255150 have been reintroduced in version 02.06.03 after being fixed in
   AANDC 02.05.00.  Original details pasted below.
   
   Txn in Progress Displayed Twice when Envelope Not Deposited.
   
   Txn in progress screen displayed twice when envelope not deposited. 
   
   If you allow the envelope not to be taken on a deposit transaction, 
   the screen changes from 'Please Deposit Your Envelope' 
   to 'Transaction is being processed', this is then followed (after a timeout
   
   period) with 'Your Transaction is unavailable Would you like another 
   Transaction, Yes - No'. 




Summary:
TAR 303937 - TAR 255150 has been reintroduced in AANDC 02.06.03

Description:
   TAR 255150 have been reintroduced in version 02.06.03 after being fixed in
   AANDC 02.05.00.  Original details pasted below.
   
   Txn in Progress Displayed Twice when Envelope Not Deposited.
   
   Txn in progress screen displayed twice when envelope not deposited. 
   
   If you allow the envelope not to be taken on a deposit transaction, 
   the screen changes from 'Please Deposit Your Envelope' 
   to 'Transaction is being processed', this is then followed (after a timeout
   
   period) with 'Your Transaction is unavailable Would you like another 
   Transaction, Yes - No'. 




Summary:
OOXFS FS Status Mapping Review Minor Code Updates (see details below)

Description:
These updates are only a minor fine tuning of the current mapping
1) Cash Handler, fwSafeDoor = DOORCLOSED: no fault should appear on the fault display as this is a good state (update mapping as per FS)
2) Statement, Map Severity, fwMedia=MEDIAJAMMED - mstatus should be 05 as per FS and as in Map Completion
3) Statement, when fatal, the heading should be E1422 (Statement Fatal) not E1420 Statement
4) When no specific reason for statement fatal is found, mstatus 23 - Printer fatal should be reported (not 0).



Summary:
Selecting CCM Visa2 Diagnostics , displayes an other screen then displays the Modem Diagnostic Menu display

Description:
Selecting CCM Visa2 Diagnostics , displayes an other screen then displays the Modem Diagnostic Menu display.

Look worse on monitor than eop.



Summary:
Dial up Diagnostic tests do not display a print option.

Description:
Dial Tone, Good number Dial  & Query Modem Dial up configuration Diagnostic tests do not display a print option.



Summary:
TIR 287264 - Need assistance to confirm correct handling of dep counters

Description:
Need assistance to confirm correct handling of dep counters - For greece on 2.05 base



Summary:
TIR 287264 - Need assistance to confirm correct handling of dep counters

Description:
Need assistance to confirm correct handling of dep counters - For greece on 2.05 base



Summary:
Dialup - Supervisor - CCM Problem - CCM Diagnostics has wrong CLSID for SupervisorContainer Delivery

Description:
Dialup - Supervisor - CCM Problem - CCM Diagnostics has wrong CLSID for SupervisorContainer Delivery



Summary:
Network Adderss node has not been removed from theXML sheet at Copy Dialup Configuration menu in Supervisor

Description:
Dialup Supervisor menu Testing Test 2.7 Copy Dialup Configuration: when file is copied from a: using "COPY ON DIALUP CONFIG" option by changing the CommsLinkID attribute to "Dialup Client1" then it should remove the NetworkAddress node from the XMl sheet but it hasn't done that.It has changed the CommsLinkId attribute value to "TPA Connection"



Summary:
Errors during installation of documentation.

Description:
On attempting a documentation only installation on a desktop PC the installation fails and the following erros are logged in the event viewer.

Error 1

	Event Type:	Error
	Event Source:	Aggregate Installer
	Event Category:	None
	Event ID:	4
	Date:		22/06/2005
	Time:		10:42:28
	User:		CORP\dr185026
	Computer:	WGBDR185026-ZQB
	Description:
	A fatal error occurred. Date : 22/06/2005 Time : 10:42:28
	Entry Type=TERMINATE
	User Account=dr185026
	Details : Error Return=0xc000100f (ERROR_ACTION_FAILED) - At least one component installation or deinstallation was not 		completed.
	See event log for more details.


Error 2

	Event Type:	Error
	Event Source:	Aggregate Installer
	Event Category:	None
	Event ID:	4
	Date:		22/06/2005
	Time:		10:42:28
	User:		CORP\dr185026
	Computer:	WGBDR185026-ZQB
	Description:
	A fatal error occurred. Date : 22/06/2005 Time : 10:42:28
	Entry Type=COMPONENT_INSTALL
	User Account=dr185026
	Name=.NET Runtime
	Version=01.01.00
	Command Line=MSIExec.exe /i "NETRT.msi" ARPSYSTEMCOMPONENT=1  INSTALLDIR="C:\Program Files\NCR APTRA\.NET Runtime" 		TARGETTYPE="Document"  /qn
	Status=Fail
	Error Return=0x00000643
	
Error 3

	Event Type:	Error
	Event Source:	MsiInstaller
	Event Category:	None
	Event ID:	11316
	Date:		22/06/2005
	Time:		10:42:28
	User:		CORP\dr185026
	Computer:	WGBDR185026-ZQB
	Description:
	Product: Microsoft .Net Framework -- Error 1316.A network error occurred while attempting to read from the file 			D:\DEV_PC\Comps\f6c77b~1\138c71~1\DotNetFx.msi

	For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.
	Data:
	0000: 7b 32 32 41 30 30 33 43   {22A003C
	0008: 38 2d 39 37 30 41 2d 34   8-970A-4
	0010: 35 31 33 2d 38 32 32 45   513-822E
	0018: 2d 33 41 34 33 43 42 37   -3A43CB7
	0020: 44 37 36 34 36 7d         D7646}  



Summary:
At the DIAL MODE menu  in Supervisor if we press enter then it is not showing "INVALID VALUE " screen.

Description:
Dialup Supervisor menu Testing  test 2.4 Modem Link Parameters: At the "DIAL MODE" menu if we press enter then it is not showing INVALID VALUE screen instead it is accepting that and setting DAIL MODE to PULSE MODE. 



Summary:
Stress test 5.7.16(ITS 445-0681246 rev b) potential memory leak. 

Description:
Stress test 5.7.16(ITS 445-0681246 rev b) potential memory leak. 
Stressing test C++, Covering multiple connections -Same link id.



Summary:
CCM VISA2 Release Bulletin references wrong version of PDC & HICS

Description:
CCM VISA2 90.00.00.07 RELEASE BULLETIN refers to PCD 02.01.00 & HICS Interface 02.02.00. ANDC 93.00.00.22 install PCD 02.01.01 & HICS Interface 02.02.01.





Summary:
The tools directory needs to go on the root of the CD

Description:
So that it can be imported into an aggregate



Summary:
Supervisor container ActiveX control did not maitina binary compatibility

Description:
Supervisor container ActiveX control did not maitina binary compatibility



Summary:
TAR 302697 - GOS command can cause a subsequent card read issue due to OOS Pending flag

Description:
See TAR



Summary:
Missing taken event because of the ActiveXFS control on BNA1

Description:
In the BNA Enable script host, it is missing the taken event from the handle rejects director because of the ActiveXFS control present in the EvalBNAFitness script host.




Summary:
TAR 303260 - AA-NDC 02.06.xx: RFC to activate keyboard before displaying screen

Description:
See TAR



Summary:
CEN XFS 3.3 Test 5.1 for Initialisation fail & Invalid Logical Name is invalid

Description:
a missing or invalid logical name will not cause mError to be raised but will report 'device not present'. This test is NOT VALID.



Summary:
TAR 303260 - AA-NDC 02.06.xx: RFC to activate keyboard before displaying screen

Description:
See TAR



Summary:
CEN 3.03 Test 5.05 is incorrect and needs to be updated

Description:
This test appeares not valid and should be updated. External window is used only upon device creation, therefore changing it in the middle will not cause anything...



Summary:
increasing the ca3 field to 3 digits for bna2 emulation mode

Description:
increasing the ca3 field to 3 digits for bna2 emulation mode



Summary:
Counts except retract and encashed are Cleared though InitialisationFailure Screen Appears

Description:
Even though the initialisation failure screen appears on the supervisor screen all the counts are cleared.



Summary:
99 MORE not displayed on second CONFIGURE Menu screen

Description:
99 MORE is missing when displaying the second Configure Menu screen.  

When Enter is pressed, the 99 MORE screen can be seen briefly flashing on the display.



Summary:
Some FDKs active in Supervisor Menus/Functions

Description:
FDKs C & D are active on GOP and EOP.
FDK C seems to function as a Clear key
FDK D is the Enter key



Summary:
Dialup Supervisor - Screen freeze when function 6 (MODEM INI STR) selected from Modem Link Menu

Description:
As description above.  Selecting this function displayes the modem initialisation string.  User is prompted to select Enter to leave but nothing happens.



Summary:
ANDC needs to handle the timeout for CashIn command.

Description:
As the SP will now timeout after the notes have been rejected the timeout must be controlled by the application.  This should be done by setting Infinite timeout when calling CashIn command and using our own timers for Cash Accept and Cash Reject.  If our timers expire then we need to call cancel on the CashIn command and wait for it to complete before doing any error recovery eg. retract.



Summary:
Occasional hang at startup due to platform not being ready

Description:
May need to update ulwait or startapps to handle this.



Summary:
TAR 303475 - PD logging seen to be incorrect when RCVTimeOut incorrectly specified

Description:
This TAR was raised against CCM TCP/IP 2.0.1.  Need to manage the fix into an ANDC SP release.

The detailed TAR description is:
   CCM TCPIP behaviour is incorrect when the RCVTimeOut parameter is specified
   a RCVTimeout as per the online help.   
   
   Note asscoiated TARs :
   303473 raised on the on-line help
   303474 raised on the XML validation
   
   When the value is specified as RCVTimeout, and an incorrectly formatted
   message is received, which expects more data to arrive, PD trace indicates
   that the data is insufficient and that the CCM is waiting on the period
   specified in the XML file for the receive timeout for the remaining data to
   arrive.
   
   After the timeout period, if the parameter was RCVTimeOut, then the system
   recovers correctly and accepts the and passes on the next message (correctly 
   formatted).
   
   After the time out period, if the parameter was RCVTimeout, then the system
   does not recover but waits on the remaining data.  The CCM appears to wait
   for the full data expected in the incorrectly formatted message to arrive
   before it passes on the data to the application.  This persists over a
   connection being closed and re-opened.
   
   From the customers perspective it appears as if the CCM TCPIP can only pass
   data in one direction, i.e. data is passed out from the ATM application, but 
   messages in appear not to reach the application.



Summary:
TAR 303474 - XML validation fails for the RCVTimeOut parameter

Description:
TAR was raised on CCM TCP/IP 2.0.1.  Need to manage the fix into an ANDC SP release.

The detailed TAR description was:

   XML validation of the RCVTImeout parameter fails.
   
   Customer had implemented an XML file using the examples in the on-line help, 
   which shows the value as RCVTimeout and not RCVTimeOut.
   
   The CCM TCPIP operated with this incorrect parameter in the XML file, the
   parameter was not flagged as an error.   The behaviour of the CCM TCPIP was
   not correct with the incorrect parameter.
   
   TAR raised to cover the validation not picking up the invalid parameter.




Summary:
Reference Manual: screens I18 & I19 ( TAR 282659 and TAR 293078) 

Description:
The screen I18 is only displayed for EKC Hallmark. EKC is not a supported
device. Reference Manual needs to be updated to state that screen I18 is
not applicable....and I19 needs to be documented in the Reserved Screens section of the IP.  It currently has Reserved against it.  



Summary:
PS - If notes out in a cassette 1fsfsfs7 message reports cassette as not configured

Description:
As above - if a cassette is empty it is reported as not configured ('0') in 1fsfsfs7 message rather than media out ('3')



Summary:
Dialup - Using EMV with Pre-Dial Dialup - AID not recognised error generated on card insertion not sent up due to Session End in Close State

Description:
Dialup - Using EMV with Pre-Dial Dialup - AID not recognised error generated on card insertion not sent up due to Session End in Close State



Summary:
Add trace and fix to support 'Safe Array' - implemented by Zubair in ANDC 3.0

Description:
A problem was found during coding of the dialup RFC246177 and only occurred with CCM VISA2 as it is a .net component.  It was found during early development in January and seems only to affect the .net CCM component so was fixed as part of the Dialup development.

This was mentioned to Peter by Zubair because he felt Peter could try putting the fix in 2.6.x for a support incident he was working on and also to add trace in the same area.

The fix is a one line code change.



Summary:
KeyEntryPart1 Flags are not reset when mode changed using keymanager rather than Supervisor

Description:
After entering only one part and changed the mode without using the Supervisor (Restarting the Applications with keyman 1). In this scenario, Part1 flags are not cleared because these flags cleared when we change the mode from supervisor. So, the application still thinks that part1 already loaded but we reinitialized the encryptor.  T



Summary:
Supervisor - Init Statement does not excerise device!

Description:
Function simply checks if device is present and reports OK if it is. Needs to eject and capture a sheet to verify device is working



Summary:
TAR 296442 - Journal and Status counts are inconsisent if notes are retracted after timeout

Description:
If notes are presented to the customer and there are still notes left at the Presenter after the timeout, a Presenter Error is reported in the journal, with the note counts set to the value of the notes that were picked and presented, but an unsolicited status message is sent indicating that an error occurred with the note counts set to zero.



Summary:
TAR 296442 - Journal and Status counts are inconsisent if notes are retracted after timeout

Description:
See TAR



Summary:
Garbage Traced to Printer when  Solicited Cash Error sent to host

Description:
Fixed in 3.0 - applies to 2.06



Summary:
Reserved Screen Retriever needs to handle ESC '%'

Description:
Fixed for 3.0 - applicable to 2.6



Summary:
There is no supervisor keyboard unsolicited message with R09 status on supervisor exit when exit mode is set to AUTO

Description:
NDC+ sends R09 message on supervisor exit when exit mode is set to AUTO. Advance NDC doesn't send a R09 in this case. Reported by Jacek, NDC+ log file provided.




Summary:
NDC Message Receiver - better handle null/garbage messages from CCM

Description:
See attachment



Summary:
Non-dailup related crash in FLDSCRN.CPP seen during dialup UTS rejected t. Reply test.

Description:
See G310937 for details



Summary:
Build IT21 Showstopper - resrvd.def file formatting errors

Description:
#NAME?



Summary:
Updates required to CCM VISA2 ITS (445-0681246BO) in line with comments returned duringCCM VISA2 01.00.00 IT

Description:
Updates required to CCM VISA2 ITS (445-0681246BO) in line with comments returned duringCCM VISA2 01.00.00 IT.

Refer ITS Comments or details in Test Log directory refer. . . . .
<<\\sgbdun100\orgshare\Fsd\APTRAEdge\Components\CCM VISA2\01.00.00\Draft\IT\Test logs\>>>




Summary:
02.06.03 NDC Display Hook document has missing example

Description:
The last page of the NDC Display Document contains an embedded zip document (the source for the example). When the document was converted to pdf the zip file was lost.

We need to either:

a) remove the example
b) include the example on the CD



Summary:
Document requirement for latest EDEP SP for TAR fixes 303262 & 303832

Description:
   A customer received a fix for TARs 302357, 297841 and 290044 on top of
   AA-NDC 02.06.02 and through testing discovered the following issue.
   
   When the envelope dispenser runs out of envelopes AA-NDC reports that the
   depository module is Fatal with a transport sensor failure, see below.
   
    [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]F2[Unicode-x1C]4[Unicode-x1C]06000000[Unicode-x1C]3]
   
   The problem has been re-created in the lab on a P75 unit. Please contact
   Colin Drew, FGSC (x2868) for any further information.



Summary:
TAR 303262 - Envelope dispensor errors reported as depository failures

Description:
   A customer received a fix for TARs 302357, 297841 and 290044 on top of
   AA-NDC 02.06.02 and through testing discovered the following issue.
   
   When the envelope dispenser runs out of envelopes AA-NDC reports that the
   depository module is Fatal with a transport sensor failure, see below.
   
    [22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]F2[Unicode-x1C]4[Unicode-x1C]06000000[Unicode-x1C]3]
   
   The problem has been re-created in the lab on a P75 unit. Please contact
   Colin Drew, FGSC (x2868) for any further information.



Summary:
When NotesReporting option is set to 1 and greater than 90 notes are entered bills in escrowcount is set to 90.

Description:
When NotesReporting option is set to 1 and greater than 90 notes are entered bills in escrowcount is set to 90 for host reporting,so tempescrow count should be used instead of billsinescrowcount for calculation total refund counts and total encashed counts.



Summary:
On the EOP the "t" is missing of the "exit" on the response screen

Description:
On the EOP the "t" is missing of the "exit" on the response screen



Summary:
TAR 298257 - Extra LF added at end of R00 header print

Description:
See TAR



Summary:
TAR 300502 - FDK emulation Key A not working in B state (US PS)

Description:
FDK A not working for pin entry state for more info please refer to STAR



Summary:
TAR 293078 - Enter Key screens pointers incorrect.

Description:
Bankwest Australia
To be resolved



Summary:
TAR 290452 - C00 screen doesn"t apply language offset

Description:
Ceska
TO be resolved



Summary:
TAR 290995 - Sideways Printing should allow for up to 80 columns

Description:
USPS
To be resolved



Summary:
TAR 290055 - Print Statement and Wait is not waiting for sideways printing.

Description:
USPS
To be resolved



Summary:
TAR 293743 - Comms recovery with 02.06.00 is different due to default settings

Description:
NCR Peru
To be resolved



Summary:
Access violation in Application Core with incomplete Screen download ( Extension to TAR 286762 )

Description:
If a specific incomplete screen definition is sent to the ATM, then 
attempting to display this causes an access violation in the 
applicationcore. The condition is the string terminator characters being missed from a logo control sequence. 

While fixing this TAR 286762, we have noticed that the problem is not only with the logo numbers but in some other scenarios like pictures and all, application escapes. 

This area of code has to be reviewed or check for the kind of problems mentioned above





Summary:
PS - Wrong mStatus in Cash dispenser solicited if dispenser already fatal

Description:
Spotted by Laura doing test 6.9.1.24. 

Logs indicate 2 issues - when trying to retract the notes at the exit slot while still holding onto them, the unsolic returned indicates an mstatus of 0 and also when attempting the next dispense when the device is still fatal also returns a solic with mStatus 0



Summary:
Remove NT author from the CD as the XP author works on both O/S

Description:
XP author is now the default and all the paths are set up to use it. This author will also work on an NT operating system so there is no need to deliver the NT only author.



Summary:
An Unsolicited message stating Encrptor not configured is sent while doing the Security Tests 5.4.4 

Description:
While doing the VISA PIN Verification  Tests an unsolicited msg 12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]L1[Unicode-x1C]0[Unicode-x1C]000 is received.

Debug log's attached.



Summary:
mFrontFixedKey worker causes exception in Touch Screen Environment.

Description:
mFrontFixedKey causes exception when used in touch screen environment.  Looks like it is deleting the same piece of memry twice, as it is used within the Data Collector and also concurrently with the worker.



Summary:
End exchange failed while clear bna on BNA1

Description:
End exchange failed with 110(Invalid data) while doing Clr Bna on BNA1 machine.



Summary:
Device Not Present Screen is shown when CLR BNA Failed

Description:
Device not present screen is shown when CLRBNA failed. it should show initialisation failure screen



Summary:
w6 is not sent when bills detected at powerup message.

Description:
When the notes are in escrow and the sst is restarted instead of sending a w6, the application is sending a w3 which is a hardware error message.



Summary:
Retract Flag is still set using the value from the registry in supervisor

Description:
Retract Flag is still set using the value from the registry. it should be set using the option45 digit(enhanced configuration parameter)



Summary:
TAR 302941 - PD trace fails on EBCDIC conversion

Description:
For EBCDIC messages, PD Trace fails after logging the ASCII data but before logging the EBCDIC data when a message is sent.



Summary:
TAR 302941 - PD trace fails on EBCDIC conversion

Description:
For EBCDIC messages, PD Trace fails after logging the ASCII data but before logging the EBCDIC data when a message is sent.



Summary:
BAPE encryptor - after mode change KVVs are still displayed in DISP ACCESS

Description:
On an ATM with a BAPE I was getting Key Load Errors appearing in DebugLog when I entered a card.  In Supervisor I went to Disp Access to see the KVVs.  They were listed.  I then tried changing the encryptor mode which should delete the keys and reset the KVVs.  But when I go back to Disp Access the KVVs are still the same. 



Summary:
Last Notes Dispensed counts cleared on exit from Supervisor

Description:
If Supervisor is entered and exited at any point, the Reject that is performed caused the last notes dispensed counts to be cleared. This is incorrect

Looking at the OOXFS log it appears that the Reject is causing the BeginDispense to be called which is probably the reason for the clearing of the counts



Summary:
Inserting and removing notes in BNA1 gets different events

Description:
While inserting and removing the notes in BNA1 it is getting a cashinfailed event which is different from BNA2/GBNA/GBRU.
Need to handle the cashinfailed with reason 2 accordingly



Summary:
KeyLoad error at PIN entry when FITTAB used with PEKEY

Description:
Seeing the following issue on BAPE encryptor, XFS 4.2.0 build 17, APPC, LD & FITTAB download. 
The issue does not occur if FITTAB is not downloaded.

A, B keys are entered in supervisor. We have also ensured they are deleted by changing the mode to 2 and back to 1 and entering the keys again.

Insert card
Enter PIN
Card returned - Debug Log shows Key Load Error message
No message sent to the host.




Summary:
Test 6.8.1.18: Swipe reader reports suspend through GetFit only.

Description:
Leaving the card in the swipe reader and going in service reported D3 (suspend) condition when responding to GetFit msg.  The ATM did not go into Suspend and no suspend unsol was sent.  But it was now stuck reporting device in suspend with GetFit msg.



Summary:
Active Script Host containing lower level Active Script Host misses events.

Description:
This has been seen with the BNA.  The Enable BNA script host has active workgroups which contain other Active Script Hosts which use the BNA control.  It has been seen that sometimes the Taken event is not sent to the higher level Active Script Host which needs to handle this event.  This occurs whether or not the lower level Active Script Host is still active.



Summary:
Include the latest patch version of dependent components in Service Pack

Description:
Service Pack does not include latest patch version of dependent components (e.g. CCM TCP/IP 2.0.2).



Summary:
PS - Dialup - TEST 5.16.20.5 - If I disconnect the comms cable and reconnect, then press FDK A, the ATM returns the card immediately and goes offline

Description:
TEST 5.16.20.5 - If I disconnect the comms cable , then press FDK A, the ATM returns the card immediately and goes offline. I then re-connected the cable and error recovery was done. I think this scenario is OK.

However, if I disconnect the cable after the ENQ is sent from host, then re-connect the cable before I press FDK A, the ATM tries dialing up again to restore the connection (since it is pre-dial). When I press FDK A, the card is returned immediately and the ATM goes offline into error recovery mode. In this case, the ATM should be attempting to send the tran request, as the line is back in working order at that point.




Summary:
Update SP IT Spec regression test section to randomly select a test from each of the previous Service Packs

Description:
This will give us more confidence in the Config Mgmt practices.



Summary:
De-install for ANDC 2.6.3 does not always remove the c:\ssds\dll directory and its contents

Description:
This problem was also raised on ANDC 2.6.2 installer, but was not recreatable.



Summary:
Remove the release bulletin from the SP MSI - only include it on the install disk

Description:
Release bulletin keeps changing up to the last minute (e.g. to detail latest known problems), and because the bulletin is included in the MSI, this means re-building the MSI.

Discuss with RichardL if there's a good reason for installing the bulletin to maps_global.



Summary:
Add Authoring tidy-up instructions to the top-level Authoring instructions document

Description:
The Authoring tidy-up instructions were not delivered with ANDC 2.6.3 - this was an oversight.



Summary:
Tamper and status data is different from unsolicited sensor data

Description:
After cashbin is removed, it sends an unsolicited sensor data. 
If we send 1fsfsfs74 terminal command, it sends the tamper and status data. This sensor data is different from the unsolicited sensor data sent previously.

Message is as below:

[12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]P1000001001100]

[22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]KA01111[Unicode-x1C]B1001100000000]




Summary:
Test 5.11.14.1 Receipt MEI not blinking when receipt is delivered

Description:
On the receipt printer TRPRINT is sent but the MEI is not flashing when the receipt is delivered. Receipt printer is acting as sideways receipt printer.



Summary:
ADE 2.4 EPP Security Functionality Missing From Release 2.6

Description:
The EPP functionality added to release 2.4 of ADE is missing from the 2.6 development.  The 2.6 development branch has been started off the wrong file revision when the product was branched to multi-vendor.

This means the DES Loader, DES Decryptor, and other ADE security workers will not operate in the EPP environment (they mError indicating that the Encryptor is not supported).



Summary:
Test 5.11.14.6 Sideways receipt print does not print 80 chars per line

Description:
When printer flag set to 8 the test case says that sideways receipt printing should print a statment with 80 chars per line, it doesn't do this. Issue raised by Bindu in Hyderabad



Summary:
TAR 300835 - Infrequently, on exit from supervisor mode the system does not go in service

Description:
See TAR



Summary:
TAR 300835 - Infrequently, on exit from supervisor mode the system does not go in service

Description:
See TAR



Summary:
TAR 301099 - AA-NDC has ETX functionality missing

Description:
See TAR



Summary:
TAR 302186 - AA-NDC: Test Cash Supervisor function not clearing Purge Bin count

Description:
See TAR



Summary:
TAR 302186 - AA-NDC: Test Cash Supervisor function not clearing Purge Bin count

Description:
See TAR



Summary:
TAR 302697 - GOS command can cause a subsequent card read issue due to OOS Pending flag

Description:
See TAR



Summary:
DASH card reader suspend message send unnecessarily due to Service provider returning User_error event.

Description:
DASH card reader suspend message send unnecessarily due to Service provider returning User_error event.  Only seen when a fix to resolve GR1T 315926 fix put in place.



Summary:
Require CEN XFS Headers and LIBs to be included as part of the Advance NDC Build.

Description:
There are a few ways to get the headers and libs for the XFS Manager to be installed.  The product needs to ensure that it can build an application or worker factory without relying on these other components installing the XFS Manager.  We should deliver the XFS headers and libs to ensure that the appropriate files are used for a build (i.e. headers with Secure Key entry).



Summary:
While entering the V key in the  Single Length XOR mode , the supervisor closed down. 

Description:
While entering the V key in the  Single Length XOR mode , the supervisor closed down. 

whie doing the Test 5.3.1.2 Single Length XOR mode .Event log attached.




Summary:
TAR 299554 - Screen flicker seen when going from a web page in customisation layer back to NDC screens

Description:
integrate into 3.0 from 2.6.3



Summary:
TAR 295851 - TVN error not reported correctly when partial MACing is on

Description:
integrate into 3.0 from 2.6.3



Summary:
Dialup - CCM - Diagnostics - Dial Tone Test always says busy

Description:
Dialup - CCM - Diagnostics - Dial Tone Test always says busy








Summary:
CPM image file not being cleared at end of txn

Description:
Frontimg.bmp is stored in advancendc\data directory. It is overwritten by next image of cheque rather than being cleared



Summary:
Card is not ejected in the close state and remains latched. After a couple of minutes a new transaction will be started automatically.

Description:
Withthe DASH reader and  the CAM 2 system test plan Card CD_059,  test number 13.4.1, the card is not unlatched in the close state. The card remains stuck in the reader and cannot be taken. After a couple of minutes a new transaction is started automatically and the scenarios repeats. 

It is recreatable about 80% of the time, logs are attached.



Summary:
When the DASH reader is enabled for Chip detection and a non-chip card is inserted the susbsequent Pin Entry state fails.

Description:
During EMV testing the PIN state takes the CANCEL exit when a non-chip card with a good magentic stripe is used. The test in question is 10.2.1 of the CAM 2 System Test plan. 

It is recreatable, logs are attached.



Summary:
Discrepancy in terms used in screen 'i51' in resrvd.def

Description:
Agreed that HOST MSG SUP should be changed to MSG SUPRESS for clarity and consistency but.

In resrvd.def (v. 1.92) screen i51, both terms are used

'i51'   ''
        '   CURRENT APPLICATION CONFIG  '
        ''
        ' MSG SUPPRESS :                '
        ''
        ''
        ''
        ' 1 - ENABLED'
        ''
        ' 0 - DISABLED'
        ''
        ''
        ''
        ''
        ' ENTER HOST MSG SUP - '




Summary:
Statement - function id 'P' - journal nor receipt buffers are printed (test 5.11.11)

Description:
The test is confusing.
In step 2, it probably wants to use message STATWR, which has buffers =,8,1.
The statement buffer processing seems correct, however, the journal or receipt buffers are ignored.
In contrast, these buffers are not ignored in the related 'Q' function (step 4).
Anyway, in the test, journal data were printed only from the second reply not from both replies as the test says.

Note: 2.6.3 shows the same problem. Do not have a NDC+ working system with statement to confirm. Anyway, these two P,Q functions should behave in the same way and it sounds safer to print the journal data if present in any case.



Summary:
Statement - suspend timeout not configured for Advance NDC (120s) (test 5.11.8)

Description:
Test 5.11.8 fails on step 4 - The test spec should now say 120s not 60s, but it waits 5 minutes.
I think this is too long if a GIS is sent and we want to reduce the 5 minute timeout to 2 minutes - in NCR_SPs.reg.
Are there any other statement special registry settings that are missing in eith NCR_SPs.reg or AdvanceNDC.reg?




Summary:
 Statement - suspend severity not reported by terminal commands during suspend (test 5.11.8)

Description:
test 5.11.8 fails on step 3 both with terminal commands
1<fs><fs><fs>73
and
1<fs><fs><fs>7
Note: The unsolicited message sent in step 2 is correct and does contain the right severity 3.



Summary:
Statement - Close State - MEI does not stop flashing and still waits full timer 95 when statement taken (test 5.11.5)

Description:
- statement taken during the transaction
- in the close state the MEI does not stop flashing when statement taken
Note: Tests are unclear!
It should not stop flashing if statement taken outside of the close state, but it should stop flashing when taken inside the close state.
Once the statement is taken, it should just proceed with close state and not wait for timer 95 to expire (compared with 2.6.3).





Summary:
Statement - Close State - after every print to statement, always waits for timer 95 and flashes the MEI (test 5.11.3)

Description:
- statement taken during the transaction
- in the close state the MEI should not flash and the ATM should not wait
Checked with Roberto - our code does not know that the statement has been taken. That is why it waits for the full timer 95 to make sure it is not captured too early.

I think we need to change our code.



Summary:
Test 5.6.5: D3 sent with no other fields filled in.

Description:
Tried this on 2.6.2 and NDC+ and the D3 is sent in this scenario, but with all the fields filled out.  In the DASH case none of the fields were filled out.



Summary:
Test 5.6.5: Dash Test sends extra unsol reporting suspend.

Description:
Logs attached.



Summary:
Dialup - CCM - On a Send, When RING is seen in host, disconnect host modem - CCM retries infinitely and does not return Send Complete

Description:
Dialup - CCM - On a Send, When RING is seen in host, disconnect host modem - CCM retries infinitely and does not return Send Complete



Summary:
PS - Dialup - TEST 5.16.19.6 - Session End is cancelling out the send

Description:
TEST 5.16.19.6 - I wiped out the encryptor keys, then inserted the card (with pre-dial on) and entered a PIN. Since there are no keys, the ATM generates an encryptor unsolicited status message and goes to a close state.
If I enter the PIN, causing the card to be returned immediately, while the dialup connection is still being established (RING shows on the host log), the connection does not occur and after a short delay, NO CARRIER shows in the host log. The unsolicited encryptor status was not sent to host.
If I wait until the connection is established after card insertion and then enter the PIN, the card is returned and the unsolicited encryptor status is sent successfully.

I repeated the insert card, enter PIN quickly, scenario a second time and had the same problem as above.

It seems that the 'session end' may be messing up the connection attempt and therefore causing the send of the encryptor status to fail.



I tried turning the host modem off and back on, and tried to 'disconnect', 'connect' and 'initialize' the modem from the host simulator - still the same problem occurred. I turned the ATM modem off and back on - still the same problem. I tried generating a message from the ATM to send to host, but still the same problem. At this point, I saved the logs and reset the ATM.

I then re-started the apps, and the ATM dialed out and connected OK, which tells me the problem was not on the host side or in the ATM modem itself. Then I repeated the same test and had the same result.

It appears that the loss of the connection while the modems are training is causing the ATM to get into a condition where it cannot successfully connect anymore, and the only way I could recover was to reset the ATM - not a good thing for a live, unattended ATM.









Summary:
PS - Dialup - TEST 5.16.18 - At step 17- disconnect results in incorrect error recovery

Description:
TEST 5.16.18 - At step 17, on exit supervisor, after RING displays on the host log and noise is heard, I pulled the serial cable from the host simulator modem, so the connection did not complete and therefore no ENQ was sent. After the ATM timed out, I re-connected the cable. The ATM continued to try to dial and connect, but the connection failed. After the RING, there was about a 40 second delay, then noise, then CONNECT, then MODEM CD LINE CHANGE, then garbage and NO CARRIER, and the line drops. This repeats over and over.

I tried turning the host modem off and back on, and tried to 'disconnect', 'connect' and 'initialize' the modem from the host simulator - still the same problem occurred. I turned the ATM modem off and back on - still the same problem. I tried generating a message from the ATM to send to host, but still the same problem. At this point, I saved the logs and reset the ATM.

I then re-started the apps, and the ATM dialed out and connected OK, which tells me the problem was not on the host side or in the ATM modem itself. Then I repeated the same test and had the same result.

It appears that the loss of the connection while the modems are training is causing the ATM to get into a condition where it cannot successfully connect anymore, and the only way I could recover was to reset the ATM - not a good thing for a live, unattended ATM.









Summary:
Application hang when notes are at throat and initiated a new transaction

Description:
Retract was disabled and the notes had not been retracted and leave the notes at throat. In the next transaction, After sending the transaction reply, application hanged.



Summary:
Application hang when cash presenter tampered during initial present

Description:
when the dispenser exit shutter closed while dispensing, application hang and debug log last statement was 'print complete or skipped'

This is under card before parallel dispense and print.



Summary:
Change of behaviour for T_Code 0x80 and greater

Description:
XFS 4.0 and above no longer raises an exception for T_Code 0x80 and greater.  Instead, as per the XFS standard, an Internal Error is returned, which then needs to be handled by the application.



Summary:
TAR 301637 - FDK's not responding when receiving ITR on cash transaction

Description:
See TAR



Summary:
TAR 301637 - FDK's not responding when receiving ITR on cash transaction

Description:
See TAR



Summary:
Test 6.12.11: Response to term cmd said fitness was Good - should be Fatal.

Description:
The logs showed that the Status response from XFS said DEVBUSY.  This is treated the same as DEVONLINE in our code which means Good yet the device is really Fatal.



Summary:
Supervisor LED goes out on exit from SysApp while still in Supervisor.

Description:
It should stay on until Supervisor is exited.



Summary:
 PS - Dialup - P20 not sent - CCM needs to send Failed event back and recover 

Description:
 the ATM sent the R09 but not the P20 when I switched back to normal mode, then selected 9-Exit to exit supervisor mode.



Summary:
Developer's Guidelines - improve guidelines for integrating authoring changes

Description:
Findings from PeterT...

One of the actions from the weekly meeting was for me to investigate the problems we were having with a TAR that was integrated into 2.6.2 and had to be redone in 2.6.3 because it didn't work - either in its author instructions form, or in the pre-supplied application form. The TAR fix involved an update to a worker which was shared between 2 different ANDC applications.

In conclusion we need to be a bit more diligent in a couple of areas to avoid this happening again.

1. Ensure we do a module copy on any author project work we integrate into the master project files, "on the initial project revision that the change was integrated into" i.e. at the time of integrating the change. If it is done later then there is a possibility that worker IDs will not match up, particularly those which are shared between different applications. Be aware that worker IDs will change for new workers which have been created to resolve the TAR, which may require re-sharing of worker(s) between applications.

2. Always ensure that testing is done on an integrated change, "having done a module copy" - don't assume that it will automatically work having tested it locally. Integration Testing against a formal build should pick up any deficiencies, but don't assume this.




Summary:
PS - Dialup - problem occurs on a message where the checksum is <STX>. 

Description:
problem occurs on a message where the checksum is <STX>. If I send a message with <ETX> as the checksum, it works OK. It is when the message with <STX> as checksum that causes the problem. 
I think the driver is seeing the <STX> checksum and treating it as a new message, and throws away everything before it, which is the entire message. Then there is a slight delay, then the driver sends the <STX> (and also an <EOT> for some reason).




Summary:
TAR 302357 - Access violation from message handler after depository jam error

Description:
ustomer reported a system escape after generating a depository jam condition on a unit during a deposit transaction. The UEH log indicated that the message handler was generating an access violation.

Customer is using AA-NDC 02.06.02 over XP with SP2 on a PIVAT core in a P75 unit.

The problem was re-created using the customer's exact transaction sequence and Host messages and has been demonstrated to Ranjith. 

Please contact Colin Drew, FGSC (x2868) for any further details.




Summary:
Statement Shift Out 0 control sequence incorrectly processed - test 5.11.1

Description:
Statement control character handling
Control sequence <SO>0 is incorrectly processed.
The expected text is "NO SPACES", however, the actual text is "0NOSPACES"



Summary:
Env Dep not reporting Suspend condition with Terminal commands.

Description:
When sending down 1fsfsfs7 or 1fsfsfs73 it reports fitness for the envelope as Good when it is in Suspend.  Fatal is reported OK. Other devices are OK.



Summary:
Cash Handler - Power Failure During Stack does not update purge counts - test 6.9.3.1

Description:
The service provider does correctly decrease the ulCount, however, our internal purge counter for each cassette type is not incremented.



Summary:
Usability: after clearing Card Capture counts, full counts screen not shown.

Description:
On NDC+ it shows the Deposited Envelope counts on the same screen.  Also, when clearing the deposited envelope counts it shows the full counts screen including the card captured count so it should be consistent when clearing card capture counts.



Summary:
Include Wincor vendor data to ANDC status messages.

Description:
[16:28:01] Event WFS_SYSE_HARDWARE_ERROR (2) arrived
	RequestID: 0
	hService: 11
	tsTimestamp: WED 01.06.2005 15:28:01,870
	szLogicalName: PRJ30
	szPhysicalName: PRJ30
	szWorkstationName: 204MASTER_2
	szAppID: PTR300
	dwAction: WFS_ERR_ACT_NOACTION (0x0000)
	dwSize: 13
	bDescription
		StClass: 0x00000033
		StCode: 0x2800810D
		StWarn: 0x00000000
		sDescription: EMPTY
	szDescription HEX: 33 00 00 00 0D 81 00 28 00 00 00 00 00

extra info to be added to Mdata in status message:
000000332800810D00000000




Summary:
Card not captured on exit from suspend.

Description:
Missing registry key "CaptureOnSuspend = 1" in the SP configuration.



Summary:
PS - Dialup - Supervisor - When the ENQ AFTER ACK option is changed in supervisor, the "True" or "False" entered in the xml file has a capital "T" or "F". 

Description:
When the ENQ AFTER ACK option is changed in supervisor, the "True" or "False" entered in the xml file has a capital "T" or "F". This causes an xml error on power-up and should be all lower case letters. The default xml is correct.








Summary:
PS - Dialup - Supervisor - When the CONNECT LIFE TIME is changed in supervisor, the xml file is updated with ConnectLifeTimeOption="VPI_CONNECTTIME_InSession" 

Description:
When the CONNECT LIFE TIME is changed in supervisor, the xml file is updated with ConnectLifeTimeOption="VPI_CONNECTTIME_InSession" (or InTransaction). The 'VPI_CONNECTTIME_' part of this entry should not be included and causes an xml error on power-up. The default xml file is correct.









Summary:
PS - Dialup - Supervisor - MODEM INIT STRING - screen indicates  press Enter to continue. Numeric keys are active and the first two numeric digits are echoed to the screen if on the front

Description:
When the MODEM INIT STRING is displayed, the screen indicates to press Enter to continue. At this point, the numeric keys are active and the first two numeric digits are echoed to the screen if on the front. This is another minor issue that could be cleaned up at some point in time.








Summary:
PS - Dialup - Supervisor - For the BAUD RATE, PARITY, CONNECT LIFE TIME and COPY ON/OFF supervisor functions, the entry is not echoed to the screen.

Description:
For the BAUD RATE, PARITY, CONNECT LIFE TIME and COPY ON/OFF supervisor functions, the entry is not echoed to the screen. The other supervisor functions do echo the entry to the screen. It is much better for the operator to see the entry made as visual verification before Enter is pressed.







Summary:
PS - Dialup - Supervisor - When entering COM PORT in supervisor, it allows for a value to be entered up to 32767. If I enter 32768 it changes the result to 1

Description:
When entering COM PORT in supervisor, it allows for a value to be entered up to 32767. If I enter 32768 it changes the result to 1. There is no 'INVALID VALUE' error message displayed for any entry I tried. This is not a major issue, but I just wanted to point this out as something that could be cleaned up at some point in time.







Summary:
PS - Dialup - Supervisor - BIN entry incorrect

Description:
When entering BIN number in supervisor, I tried entering '111222<enter>', and then checked out the registry to see if it updated correctly. It had a space character at the start instead of a '.'. I then tried entering '987654' and it placed a '.' at the start, as it should. I tried several other 6 digit numbers and they all correctly had '.' added. I then went back to try '111222' again, and this time the '.' was correctly added. I was unable to get it to add the space character as it did previously. I am not sure if there is a problem here or not, but it appears there may be some sort of problem where, under certain conditions, a space is used instead of the '.'.





Summary:
BNA Counters receipt printed on a machine with no BNA attached

Description:
Supervisor function in REPLENISH MENU, 4 - PRNT CNTRS prints extra BNA CNTRS receipt on fingerbob with build IT20. Fingerbob has no BNA attached. Platform installed pre-release of 4.2.0 build 15.



Summary:
Pressing 3 on PINPAd in Supervisor (on Front) does not work.

Description:
The 3 flashes up and then disappears and it stays on the same menu. If a double digit option was ie. 1 then 3 then when 3 is pressed both numbers disappear.



Summary:
Release Bulletin - minor change required to ABT instructions

Description:
Craig, 
Some feedback from Ian Davidson --- if I understand correctly, in the RB, ABT Step 12 should be corrected as shown here: ¿In the Profile Pane (the bottom-right pane) change the Installation Instruction from `Component Default` to `Set1`. See the following screen shot.¿
Regards, 
Mike
 -----Original Message-----
From: 	Davidson, Ian [mailto:ID516265@ncr.com] 
Sent:	01 June 2005 15:51
To:	Clark, Mike
Subject:	Release Bulletin for APTRA Advance NDC SP

Mike,

I have been reading the RB for the NDC SP.

In section 6.3.1.1 CUSTOMISING AN INSTALLATION, in ABT Step 12, you say ¿In the Profile Pane (the bottom-right pane) change the Installation Instruction from `Component Default` to `ProfileForSet1`. See the following screen shot.¿. The screen shot is correct in that the choice of Installation Instruction available would be Set1 or Set2, and it would make sense to select Set1, given the name of the profile.

Regards
Ian



Summary:
Not getting the supervisor exit message .

Description:
In the test enhanced configuration option-33 Simulate supervisor entry/exit test case after sending OOS,ENH33_0,GIS I am able to get only supervisor entry msg ie 12fs000fsP21 and three ready-9.But no supervisor exit msg (12fs000fsP20).



Summary:
PS - Dialup - Test 5.5.2.3 - Power Up Message not printed on Journal on a No Comms startup with subsequent comms

Description:
Bill May:-  I ran test 5.5.2.3 steps 1 through 8.
The only issue I found is that in step 3, the power-up message is not printed on the journal. Then in step 7, the power-up message is sent to host but is still not printed on the journal. So, it seems that when comms is down at power-up, the power-up message is not printed on the journal at all.
In this situation with OS/2, the ATM would print the power up message to the journal the first time the ATM attempts to send the power up message. Then the ATM would continue to try to send the power up message, but does not print to the journal again.
I had reported in the first round of testing that the ATM was printing the power up message on the journal over and over during this same test. So, we went from printing too many times to not printing at all. This needs to be corrected to print only one time.





Summary:
Display 4 digits of KVV for S ecure Key Entry

Description:
Normal Key Entry is displaying KVV as 4 digits.  So, author work should be updated to display 4 digits of KVV.



Summary:
Applications Fail To Start - mError with LoadLibrary Failure

Description:
Build Final Applications fail to start, giving mError when application DLL is started.
Problem is with the size of data being allocated by NDCDATA - buffer overflow caused exception which caused DLL to fail to load.



Summary:
TAR 300231: ITR is implemented only on second transaction after exit from settlement

Description:
Customer DBS in Singapore has reported an issue with the 02.06.02 application, where an Interactive Transaction Reply (ITR) is not processed
until the following transaction.   The first transaction times out.

This issue has been recreated by FGSC:

Ensure a download is used with settlement functionality defined Start the applications in Supervisor mode Enable a Supervisor Transaction in the replenish menu Exit from supervisor and send a Go In Service command Carry out a supervisor transaction, including sending a transaction reply, which returns to the supervisor transaction FUNC prompt. (optionally just let it time out) Exit from the supervisor transaction functionality by using Cancel key Start a cardholder transaction and send a transaction request message Send an Interactive transaction reply The transaction should time out

Start another transaction and send a transaction reply The previous ITR defined screen data will appear during the transaction request state.

Note this only occurs on the first transaction following a supervisor transaction from an application startup.




Summary:
TReply sent down for one transaction is not processed until next transaction.

Description:
There is a small window of opportunity for a transaction reply to be sent just at the same time as the ATM TR state times out, where the TReply will be ignored until the next customer comes along and the then it will be actioned and a Ready9 sent in response. The download used was in mNWCUSTOM and automatically goes to the TR state after the PIN is entered. Logs attached - see msg at 13:59:48.



Summary:
TAR 299996:  OOS received as TXN starts results in tx reply reject with C03

Description:
Update to TAR 287923 which went into 02.06.02



Summary:
Investigate performance timing difference for "Parallel Disp & Print ID `B¿ (FAST20)" in 02.06.03

Description:
Investigate performance timing difference for "Parallel Disp & Print ID `B¿ (FAST20)" in 02.06.03



Summary:
DASH Fatal message not sent in IT 20 

Description:
Change :
The DASH fatal message should be moved from being sent in the statcust dll to being sent in the customisation layer.  This will then be consistent with how the other DASH device status messages are sent.  

I think a change made for IT20 must have prevented the fatal message from being sent for the DASH.  The fatal message is being added to the status bucket but the message is never sent.  I will try to find out why.  I think it's nicer if we move the sending of the fatal message into the Customisation Layer as this will make this functionality consisitent.  I.e. all DASH message sent from the cust layer.





Summary:
TAR 299898 - Customer details not recorded with notes entered, jam & timeout (BNA)

Description:
There are no customer details recorded when a jam is experienced after notes 
are entered into the BNA and the customer subsequently times out the
transaction. 

As follows: 

Customer enters good notes into BNA. 
Notes are held in the ESCROW and customer chooses to "Add More Notes". 
Jam experienced entering subsequent notes. 
Customer allows transaction to timeout and retrieves both card and second
set of notes. 
First set of notes are stiil held in the ESCROW, BNA device is fatal and
host informed through unsolicited status message. 
ATM remains in service but does not allow transactions using the BNA. 
BNA device error is cleared through INIT BNA in Supervisor. 
Notes in ESCROW are moved to the vault. 
No customer information is printed on the journal to inform Bank staff whose 
"extra" notes in vault belong to. 

Track 2 details are required to be printed to the journal when the BNA
device goes fatal. 


For information: 
Customer (Track 2) details are printed to the journal in the following
circumstances: 

Enhanced Configuration Parameter 44 enabled. 
Customer enters good notes into BNA. 
Customer allows transaction to time out and retrieves card. 
Notes held in ESCROW are automatically moved to the vault. 
Vaulted notes and Track 2 data printed to journal. 




Summary:
Incomplete screen download for voice control causes access violation in application core ( Extension to TAR 286762 )

Description:
If an incomplete voice control screen dowload is sent to the ATM then attempting to display this causes an access violation in the application core.



Summary:
TAR 298257 - Extra LF added at end of R00 header print

Description:
Tar fix integrated from 2.6 by Ranjith



Summary:
TAR 298256- Unable to use touch screen & mouse in 'm' state

Description:
Integrated from 2.6 by Ranjith



Summary:
TAR 297841 - F4 returned instead of F3 when EDEP jam with access

Description:
TAR fixed in 2.6 - applied to 3.0 by Mike



Summary:
Testing fatal and suspend conditions reported 0 for fitness in the response to the terminal commands (7 and 73).  

Description:
Status sent to the host OK in these instances
[DeFinis, Roberto] need investigation but I know the printer goes offline during suspend. 




Summary:
Statement - Paper low not reported to the host or via DISP SPPLY but visible on EOP fault display and function 26 (Fault Display)

Description:
Paper low not reported to the host or via DISP SPPLY but visible on EOP fault display and function 26 (Fault Display)



Summary:
Garbage Traced to Printer when  Solicited Cash Error sent to host

Description:
Fixed in 3.0 - applies to 2.06



Summary:
Reserved Screen Retriever needs to handle ESC '%'

Description:
Fixed for 3.0 - applicable to 2.6



Summary:
Increase Timeout Value of Suspend Timers in NCR_SPs.reg file

Description:
The values need to be increased from the current value of 60 secs as this is not long enough for many transactions

Also release bulletin should make it clear how the operation of the ANDC suspend timeout (worker) and the SP suspend timeout value are related and give advice on how to set them correctly



Summary:
Some messages are sent during "SupervisorBoot" when Comms is not established.

Description:
This can occur with a number of types of message eg. BNA unsol, CPM unsol, possibly Hard Copy Backup messages with Journal, maybe others...



Summary:
FDKs and Clear/Backspace to be configured by default

Description:
FDKs to be configured to return A-F so encryption keys can be entered using FDKs without separate keyboard component. Clear and Backspace should also be configured for default operation in Amount Entry and PIN Entry states.



Summary:
TAR 282490 - Integrate into ANDC3.  (Occasionally unsol journal as sol.)

Description:
Integrate into ANDC3.



Summary:
BNA2 needs to work differently from GBNA/GRBU at cash in

Description:
When notes are inserted and removed quickly, for GBNA/GBRI cash in should be called a second time, but this doesn't work for BNA2 and causes other issues. Need to check capabilities and don't send if BNA2 or BNA1 (still to test)



Summary:
NDC Data Collector does not process CLEAR Key when event is COMP_CONTINUE

Description:
PIN SP returns different data from CEN3 Simulator, CONTINUE event is generated on SST rather than the CLEAR event.



Summary:
NDC Data Collector does not process CLEAR Key when event is COMP_CONTINUE

Description:
Problem with the processing of the CLEAR Key event - Simulator generates a CLEAR key event, the service provider generates a CONTINUE event.



Summary:
Clear Cash Takes very very long (counters cleared unnecessarily multiple times)

Description:
In the supervisor flow
- ClearCashCount() clears in one go all purge counts and remaining counts (one CEN/XFS call), however, all these 8 counts are cleared again (extra 8 CEN/XFS calls)
Not high-priority, but really tarnishing the usability of Advance NDC. Easy fix at hand.



Summary:
Uninstalling Aggregate does not remove VISA2 files from bin directory

Description:
When ANDC is uninstalled the VISA 2 files are still left in the bin directory.
When this happens and ANDC is reinstalled the VISA2 files are not overwritten/updated and the original undeleted files remain.

After testing on the latest ANDC build. The de-installation still fails to remove all the CCMVisa2 files from the bin directory.

This issue has now been tested and confirmed as fixed.



Summary:
Sometimes extra mstatus/mdata from HWError does not get applied to msgs.

Description:
Seen this with failed Dispense on Envelope, and occasionally on DepositError event with DepEntry command after a Jam.  Seen while using new EDEP SP which appears to be functioning correctly.



Summary:
Remove setting alarms on in ncr_sps.reg

Description:
Having alarms set to on by default means XFS will constantly return the safe door open error. In fault display you see EOP CASH HANDLER ERROR . We need to remove this from NCR_SPs.reg and let it be configured through the SP only.



Summary:
6674 product class reported incorrectly

Description:
_____________________________________________ 
From: 	Stewart, Alison [mailto:AS515646@ncr.com] 
Sent:	25 May 2005 08:37
To:	Mellor, Craig
Subject:	6674 product class

Hi Craig,
	I had a look at the 2.06 code and the 6674 product class is actually supposed to be coded for 2.06 
It has been incorrectly added to the code as 6666 which is not a valid class. 

case 6666 : result = "24";  break;
case 6676 : result = "25";  break;

This has been changed in 3.0 to report the correct class 

case 6674 : result = "24";  break;  //GRIT 313043
case 6676 : result = "25";  break;

As this code is already in 2.06 but is incorrect, it might be worth considering fixing the code in the next Service Pack. Really this class should
not have been in 2.06 at all but as it was added incorrectly maybe it should be changed. Malaysia are now asking for this to be reported to allow
the GBNA pilot to go ahead.

Regards,
Alison



Summary:
CDI stores are not shared across applications

Description:
The CDI stores that should be shared, eg. id=1250, are not shared.
Causing lots of trouble. Seems to show itself with ANDC 3.0 IT19_1.



Summary:
TAR 300629 - AA NDC - messages are lost during host download when EJ upload is enabled

Description:
See TAR



Summary:
CDI stores are not shared across applications

Description:
The CDI stores that should be shared, eg. id=1250, are not shared.
Causing lots of trouble. Seems to show itself with IT19_1.



Summary:
TAR 297053 - Integrate into ANDC3. (Copy CodePage in K08 causes header to not print).

Description:
To be integrated.



Summary:
TAR 296658 - Integrate into ANDC3.  (Sound in C-Exit).

Description:
To be integrated.



Summary:
TAR 296944 - Integrate into ANDC3.  (Comms established too early.)

Description:
To be integrated.



Summary:
TAR 289534 - Integrate into ANDC3. (EMV/CAM2 rejects are not MACed)

Description:
To be integrated.



Summary:
XFS 4.2 IT11 - Secure Key Entry is on by default so only restricted mode can be used

Description:
Issue seen with IT11 - XFS 4.2 is not differentiating the DAPI versions. It always returns securekeyentry enabled for settings with DAPI1 or DAPI7.  So, Securekeyentry is enabled by default.  Because of this, Normal modes of encryption key entry for AANDC are not working. Mode 4 is forced to be used.




Summary:
BNA2 - removing 2nd bunch of invalid notes - not waiting for taken event

Description:
1st bunch of invalid notes - waits for taken event but not for 2nd bunch - goes to Close state. 



Summary:
BNA2 - when inserting and removing notes immediately the Timeout screen is displayed

Description:
When notes are inserted and removed immediately the Please Enter Notes screen should be displayed. The reason is that it is getting a CashInFailed event with no notes - sets to timeout screen.



Summary:
Dialup - Supervisor - Reboot required for some dialup parameter updates

Description:
Examine the TCPIP reboot. 
Set the same store for reboot required when any parameters apart from Application Parameter are modified. That include Copy On/Off of non app params.
Change Resrvd.def to say Comms Paramters rather than TCPIP Parameters.




Summary:
Security flags not properly documented.

Description:
In the Supervisor's guide, in section Access Menu, Enter MAC (12) it says refer to Ref Manual for details of security flags.  But in ref manual it says refer to Supervisor's guide.





Summary:
PS - BNA2 Screen in close state extension state 8 will never be displayed

Description:
A screen is referenced in the Close state that is a BNA state screen. This screen will never be displayed in the Close state and should be updated to a Close state screen or removed



Summary:
PS - BNA2 fitness set to 4 incorrectly perhaps due to XFSErrorEvent

Description:
At refund in txn reply sometimes the refund is not carried out because the application BNA fitness is set to 4. By the time the Close state is executed the fitness is 0 again. BeeLian thinks this may be due to an XFSErrorEvent setting the fitness to 4 incorrectly.



Summary:
PS -BNA2 Missing data workers in workgroup are called by the script

Description:
1) System escape at Close State Vault. PD log shows Object required for SendMessage.data.
Cause: Variable used without put in the object data workgroup.
2) System escape at Close State Vault. PD log shows Object required for EscrowCount.data. 
Cause: Variable declared as EscrowNotesCount but in script, called as EscrowCount.
3) System escape while close state refund. PD log shows Object required BNASuppliesStatus.data at line 405.
Cause: Close Refund (1p338c1): BNASuppliesStatus is called but variable not in data object workgroup. Same thing for Trx Reply Refund script, State Refund script.





Summary:
BNA - unsol msg sent during "SupervisorBoot" yet no comms at this time.

Description:
This is fixed in SP3 - just need to apply to 3.0



Summary:
PS - BNA counts seen when applications started

Description:
The following counts were seen during Greece testing when the applications started but BNA was not present.

ESCROW COUNTS: 0- U U U U U U U U U ....... (repeat for a couple of lines)
VAULTED COUNTS: 0- U U U U U U U U U ....... (repeat for a couple of lines)
RETURNED COUNTS: 0- U U U U U U U U U ....... (repeat for a couple of lines)




Summary:
BNA2 emulation - when notes are refunded then retracted a ready 9 should be sent

Description:
In the case where notes are successfully refunded then retracted, a ready 9 should be sent followed by an unsol to say the notes have been retracted. At the moment a sol status is returned to say notes have been retracted.



Summary:
ATR buffer store need to be cleared prior to attemping to read the chip 

Description:
ATR buffer store need to be cleared prior to attemping to read the chip. I do not believe that this is done.



Summary:
On the DASH reader the ATR buffer will be cropped if ATR data from the chip contains "00"

Description:
The ATR buffer will be cropped if any of the data  bytes is zero. e.g. an ATR of 3B 36 00 FF 83 .... will result in only the 3B 36 being stored into the ATR buffer store.



Summary:
Dialup - Rerun of UT - 5.23.6.2 - Close on Not Connected should only be done offline

Description:
Dialup - Rerun of UT - 5.23.6.2 - Close on Not Connected should only be done offline - causes problems in transaction



Summary:
PS - BNA2 testing  with ActiveXFS code shows late events when invalid notes taken

Description:
When invalid notes are taken and there are valid notes at escrow it goes to the Please Insert Notes screen instead of the Confirmation screen. This is incorrect - this is the correct behaviour only if all notes entered were invalid.



Summary:
BNA2 emulation - change to evalmdata procedure

Description:
There was a change requested in the way Mstatus is reported if the Valid Key is not available in the registry. In the current implementation its sends a ""(blank) instead of that the request was to send 00. 
To accommodate that change following change has to be made in all the scripts where there is evalMdata procedure.

Add the following if Condition before 
Mdata = fso.RegRead(x)
    ipos=instr(Mdata,",")
    
If err.Number <> 0 then
	Mdata = fso.RegRead(x)
    ipos=instr(Mdata,",")
	.
	.
	.
	.
	.
	(The dots are for the rest of the code)
Else
	Mstatus = "00"
End if




Summary:
Cash dispenser Sols and Unsols on WINCOR harware. 

Description:
During EMV regression testing on the WINCOR machine there was a large amount of cash dispenser unsols (one after each dispense) as well as a fatal cash handler solicited which when followed by a different cassette type dispense resulted in a successful dispense.

Hostsim log attached.		




Summary:
PIN Entry problems on WINCOR harware. CANCEL exit always taken.

Description:
During EMV regression testing on the WINCOR machine  I could not get the PIN entry state to work correctly. It continually takes the cancel exit. 

I was able to enter a PIN but after this an encryptor error was sent to the host and the CANCEL Exit was taken.

I tried to re-enter the keys , change the key mode, etc but this made no difference.




Summary:
The card read state does not take the fit not found exit when Chip bit set and bad track read. (blank track)

Description:
During EMV regression testing on the MCRW AANDC did not leave the Card read state but ejected the card.  It should have taken the FIT NOT FOUND exit to allow the EMV states to work with the chip.

The Test in question is 12.3.1 of the CAM 2 System Test plan with Card 014 - this has a blank magnetic track.



Summary:
Dialup - In House Testing on Build 2 - UTS test 5.13.1 - CCM Issue - Host disconnects with No ACK on Ready CP - results in infinite redial attempts

Description:
Dialup - In House Testing on Build 2 - UTS test 5.13.1 - CCM Issue - Host disconnects with No ACK on Ready CP - results in infinite redial attempts



Summary:
TAR 300502 - FDK emulation Key A not working in B state (US PS)

Description:
FDK A not working for pin entry state for more info please refer to STAR



Summary:
TAR 300502 - FDK emulation Key A not working in B state (US PS)

Description:
FDK A not working for pin entry state for more info please refer to STAR



Summary:
I31 resrvd screen has small characters. - also fixed supervisor text

Description:
I31has the words  Clear, Cance, Enter must be CLEAR, CANCEL, ENTER to enjoy full support
on all screens/prints.  This conflicts with TAR No.: 235964 where NDC screen is used for Supervisor display.
ALSO 14n5551dc129 is fixed operator test - contains small characters and must be 
in resrvd.def to support multilingual display.



Summary:
Dialup - In House Testing on Build 2 - UTS test 5.13 - Disconnect with Message on Cp on will bring the line down after CP Ready before timer

Description:
Dialup - In House Testing on Build 2 - UTS test 5.13 - Disconnect with Message on Cp on will bring the line down after CP Ready before timer



Summary:
Dialup - In House Testing on Build 2 - UTS test 5.14 - Message on CP Option - End All Calls should action all TE and SE and not reset counts

Description:
Dialup - In House Testing on Build 2 - UTS test 5.14 - Message on CP Option - End All Calls should action all TE and SE and not reset counts



Summary:
Error & omission on p D-2 of B66180g (from Colin Davis)

Description:
B66180g APTRA Advance NDC Reference Guide ¿ Appendix D Quick Reference to Message Types, page D2

2 corrections:

¿4	1	000	SM Installation Status	Central¿
This message is an old NDC+ message that is not supported by APTRA Advance NDC

Add the new Extended Encryption Key Change message
¿3 	4 	~ 	- 	~~ 	... 	Extended Encryption Key Change 	Terminal¿
the more detail is already mentioned on page D-12 and D-13, but not on the overview page D2






Summary:
PS - BNA2 goes to suspend or resets when invalid notes are taken

Description:
I tried this morning to run through the tests and the first problem I got was in the first test: BNA - good transaction.
In the first one the SST suspended when the invalid notes were removed on the step 8:
In second case when the invalid notes were removed on the step 8, the Screen "Insert notes..." with the only option "Cancel" appeared first, then - the report about the escrowed notes with options "Deposit", "Add more notes" and "Cancel", then the timeout screen appeared, and when I chose "Yes" - the SST restarted (this are the autosaved logs):




Summary:
Access Violation on chained Dispense and Print Transaction

Description:
Spotted on IT19_1 build on Pivat Core (FTD) using NDCMess download

Simply perform a chained dispense and Print transaction - after cash has been taken on the 2nd transaction an access violation occurs on the CustLayer -logs attached



Summary:
Test environment requires further steps to get running (IT19)

Description:
Test environment doesn't work straight after an install:

mMVApp.dll and mMVWindow not present in the TEST\XFS\DLL directory.

All the Lead Tools DLLs not present in the TEST\XFS\DLL (had to add ANDC_PATH to the overall path environment varaible).

Had to add 'C:\Program Files\Common Files\NCR\Include\XFS3.02' to the path for a build factory to work (might be easier to update the make file).

Flowseq.cpp line 255 - can't find SIMTIMER.EXE old Ulysses path hard coded...gives mError.

Can't build a worker factory from CustomisationLayer project - duplicate worker class 'Encryptor Identifier' still in trash.



Summary:
Dialup - Supervisor - BackOff Timer not present in Supervisor

Description:
Under the VISA2 Configuration there is an additional Timer called the BackOff Timer - it has a default of 5000 - This needs to be added in to both the Author Work and the Resrvd.def



Summary:
BNA2 emulation - SST suspends after the notes are inserted

Description:
Vladimir saw this with the CD IT18 created for Russia. This was resolved by the attached dll being copied to ssds\dll. Allocate to Jim to get added to the next build



Summary:
EOT received by CMM within TB SB Brackets results in a redial attempt

Description:
EOT received by CCM when any comms layer bracketing is outstanding (Transaction Begin or Session Begin without appropriate Transaction or Session End)  results in a redial to establish the link. This behaviour does not match NDC+ dial-up. An EOT received is normally a valid condition which indicates to the terminal the host is about to physically drop the line.   When this occurs the expectation is that the CCM layer to go back to a Connectable state and not attempt to re-establish the link. The exception to this is when an EOT is received within the <STX> and <ETX> characters which at the lowest level indicate the start and end of a message.  



Summary:
TAR 300231: ITR is implemented only on second transaction after exit from settlement

Description:
Customer DBS in Singapore has reported an issue with the 02.06.02 application, where an Interactive Transaction Reply (ITR) is not processed
until the following transaction.   The first transaction times out.

This issue has been recreated by FGSC:

Ensure a download is used with settlement functionality defined Start the applications in Supervisor mode Enable a Supervisor Transaction in the replenish menu Exit from supervisor and send a Go In Service command Carry out a supervisor transaction, including sending a transaction reply, which returns to the supervisor transaction FUNC prompt. (optionally just let it time out) Exit from the supervisor transaction functionality by using Cancel key Start a cardholder transaction and send a transaction request message Send an Interactive transaction reply The transaction should time out

Start another transaction and send a transaction reply The previous ITR defined screen data will appear during the transaction request state.

Note this only occurs on the first transaction following a supervisor transaction from an application startup.




Summary:
Dialup Comms - Multiple logging in DebugLog

Description:
When SST is not in use, DebugLog is filled up with Dial up messages (eg 'Comms: Not a Dialup System' in a non dialup environment).

Discussed with Zubair who thinks he should change this.



Summary:
Dialup - Supervisor - Do not write out Diagnostics Params, Modem Init String and NA String (except when NA String created in which case null

Description:
Dialup - Supervisor - Do not write out Diagnostics Params, Modem Init String and NA String (except when NA String created in which case null



Summary:
Test 5.14.1.3 Invalid RKM signature sent results in reject B23 not B26

Description:
WFS_ERR_PIN_SIGNATUREINVALID is mapped to B23 reject. Should be mapped to B26 for compatibility with 2.06.




Summary:
Dialup - Supervisor - Change Default Value set up in Read to match NDC+ and AANDC product defaults

Description:
Dialup - Supervisor - Change Default Value set up in Read to match NDC+ and AANDC product defaults



Summary:
There is no supervisor keyboard unsolicited message with R09 status on supervisor exit when exit mode is set to AUTO

Description:
See related GRIT. Low priority issue.



Summary:
Start/End exchange in GBNA doesn't set ulMaxItems correctly

Description:
Bug in ActiveXFS that won't be fixed in ActiveXFS 2.3. We will need a patch as 2.4 isn't released till July.



Summary:
PS - Section 6.2.  Msg Handling in Different Modes.  Some messages do not respond correctly 

Description:
This section tested messages sent from the host while the SST was in different modes.  Some of the responses are incorrect.  See the attached document for details of the issues.  





Summary:
Solicited status message not returned for bad stack in Card Before Parallel Dispense & Print

Description:
Noticed when testing fix for GR1T 308445 that when running a Card Before Parallel Dispense & Print (with one of the cassettes that we are instructing the SST to dispense from empty) and card is captured that a solicited status message is sent for the card but no status message is sent for the bad stack. Test stated that we should receive a solicited for the dispenser and an unsolicited for the card capture.



Summary:
CARD CAPTURED A/C... printed on the journal when related option digit not set

Description:
Noticed when testing fix for GR1T 308445 that when card is captured during a transaction, 'CARD CAPTURED A/C NO. UNKNOWN' is printed on the journal. Option digit 5 is set to 0 in message mode so this print should not occur. Further to this, the formatting of this print is incorrect where there are two extra lines printed between the time-stamp and the CARD CAPTURED message.



Summary:
PS - Dialup - ITS Document and Test Script - Test 5.16.20.5 - Step 8 card is returned so rest of test is non sensical

Description:
At step 8, as soon as FDK A is pressed, the ATM returns the card, then goes offline. Once the cable is re-connected, the ATM dials and sends the error recovery I'm Alive message. If I re-connect the cable before pressing FDK A (do step 9 before step 8), the ATM dials back up and processes the transaction successfully.




Summary:
PS - Dialup - Documentation - AANDC and NDC+ Difference - On Ready CP with Message on CP disabled

Description:
When Message on CP is disabled and a Ready CP is sent up, the host should send an EOT and the line should disconnect.
In NDC+ if the EOT is not received within 1 second, the NDC+ system terminate sthe connection. However on an AANDC system, OUTWITH a TRANSACTIION, it is the DialonSend timer that determines the length of time that the connection will stay up before termination. Document the difference and the fact that the EOT from the host is expected.



Summary:
Spray PF Tests - Should not restore all counts during a recovery after PF

Description:
Restoring too many counters at start of day causing correct counts to be overwritten by previous ones



Summary:
Dialup - Supervisor - Change entry for numeric screens such as baud rate and parity to only return on enter and not automatically

Description:
Dialup - Supervisor - Change entry for numeric screens such as baud rate and parity to only return on enter and not automatically



Summary:
PS - Dialup - Test 5.16.20.3 - Send action should reset Activity timer

Description:
Currently the activity timer is active until the connection is established - this could result in unwanted I'm Alive messages interspersed with say supv entry and exit



Summary:
Code Review Updates

Description:
Updates required as a result of code review.



Summary:
PS - On WINCOR card is only ejected once

Description:
From Russia PS (On WINCOR h/w)

Step 14 of test 6.8.1.10 - card is only ejected once rather than twice. Test results attached



Summary:
PS - Dialup - 5.16.19.7 - Documentation - Difference between NDC+ and AANDC - NDC+ send CP Ready to GOS/GIS if disconnect already received

Description:
AANDC does not - an explicit disconnect must be sent again - document difference in refetrence manual and dev guide.



Summary:
PS - Card read error not printed on journal on WINCOR

Description:
From Russia PS (on WINCOR h/w)

From Test 6.8.1.20 - Enter/swipe/dip a bad card ¿ cover the magnetic stripe or the chip with sellotape to affect a bad read

Error created not printed on journal - See test results attached



Summary:
PS - Incorrect card reader error logged on WINCOR

Description:
From Russia PS (on WINCOR h/w) 

Test 6.8.1.8 (Please not I think this should actually be 6.8.1.7 and the test spec no. Russia is using is incorrect) states that critical part of unsol to check is that D0 returned - for WINCOR D1 severity 3 rather than D0 sev 3



Summary:
PS - On WINCOR, when card captured, it is not logged to the journal

Description:
From Russia PS (on WINCOR h/w)

Tests 6.8.1.8, 6.8.1.10 - when card is captured nothing is logged to the journal. Test details attached



Summary:
PS - Receipt MEI not getting switched off on WINCOR

Description:
From Russia PS (on WINCOR h/w)

At step 10 of test 6.7.11, the receipt MEI is not switched off. Test details attached



Summary:
PS - Test 6.7.11 - Incorrect no. of receipts produced on NCR and WINCOR

Description:
From both UK (on NCR h/w) and Russia (on WINCOR h/w) PS

Test fails at step 9 - On NCR h/w 8 receipts are ejected (rather than 2) and on WINCOR 6 receipts are ejected



Summary:
Dialup - Supervisor - Message Suppression should not make reference to Host

Description:
Dialup - Supervisor - Message Suppression should not make reference to Host



Summary:
PS - DASH Test 6.8.1.1 does not display misread screen

Description:
From Argentina PS
Trevor has looked at this and sked this GRIT be raised - Error MissRead Screen in state type A displayed for DIP but needs to be changed to  display for DASH as well.  Again this is a very quick fix



Summary:
EBSDIC -> ASCII conversion produces nulls in the messages

Description:
Nulls produced causes the message to be truncated in ANDC. The fix proposed by the customer is to have nulls converted to spaces.
found by NDC singapore.



Summary:
Dialup - Supervisor - Change Message Supp to MSG SUPPRESS

Description:
Dialup - Supervisor - Change Message Supp to MSG SUPPRESS



Summary:
PS - Dialup - Test 5.16.16 - When CP Message Timer expires, line should come down

Description:
A CP Message has been sent, therefore when the CP Message Timer expires the line should come down based on the fact that at some point a CP message has been sent - The solution would be to count all TB and perform the corresponding number of TE.



Summary:
TAR 299892 - Card reader fatal status not reported as unsolicited after GIS

Description:
See TAR



Summary:
TAR 299892 - Card reader fatal status not reported as unsolicited after GIS

Description:
See TAR



Summary:
TAR 298906 - Bin out on BNA2 is not reported in response to get fitness in AA NDC 2.6.2

Description:
See TAR.
Software working as intended.  May only require a release bulletin update.  Awaiting feedback from FGSC / customer.



Summary:
TAR 298906 - Bin out on BNA2 is not reported in response to get fitness in AA NDC 2.6.2

Description:
See TAR.
Software working as intended.  May only require a release bulletin update.  Awaiting feedback from FGSC / customer.



Summary:
Cash Counts after AddCash & Test Cash are incorrect

Description:
Seems that the cash counts are not updated correctly after add cash & test cash - logs clearly show that - attached.
The log shows -41 (operation in progress), which is because Test Cash is called as a synchronous command.

I think it is time for a proper Test Cash worker that uses the async CEN call.





Summary:
TAR 300142 -  Description of the cash accept confirmatioin screen is misleading

Description:
See TAR



Summary:
PS - Cardless Settlement not working properly

Description:
From US PS
TEST 5.16.1.14
Cardless settlement does not seem to be working properly. I first sent a C09 to the ATM with the option set to prompt for PIN. When I enter supervisor, select replenish 15, then exit supervisor, I get the PIN prompt. When I entered 1234<ent> on the EOP, the ATM immediately went back to in-service mode. I then modified C09 to not prompt for PIN, and when I tried again, I got the FUNC prompt. I then entered '0' to select function 0, and the ATM immediately went back to in-service mode. I have attached the CUSTOM.DAT which shows the C09 data I am testing with.

See attached files




Summary:
PS - With dispenser racked out during transaction no Fatal reported on fault display

Description:
From US PS

Found during testing of 5.16.1.3 but not dialup issue
Also, I did not see any fault reported on the EOP for the fatal dispenser. At the time I ran the test, Type 1 cassette was low, which did display on the EOP, but there was no display for the fatal dispenser status. See attached e-mail



Summary:
PS - Severity of 0 reported if Card Capture Bin Full

Description:
From US PS

Noticed during general testing (during 5.5.2.3) 
In step 8, when I ran a transaction, the ATM sent up an unsolicited card reader status - capture bin full. This was because the ATM was capturing cards earlier today in my testing and the count reached 10. However, the severity is 0. I think the severity should be 4 when the bin is full. Then the tran request is sent and host sends the tran reply. The reply is not processed, a timeout disconnect occurs, then the ATM dials back and send a C01 reject.

I then entered supervisor, cleared cards, and exited supervisor.

I then ran the transaction again. This time the ATM sent two card reader statuses with 'suspend' severity 3 followed by the tran request and tran reply. Again, the reply was not processed. The ATM transaction timed out and the ATM went into OOS Suspend mode with the card still in the reader.




Summary:
PS - Fault displaying Env Disp missing on 6676 even though no Env Disp installed

Description:
From US PS

On 6676 with No envelope Dispenser, Fault display displays

	NUMBER OF FAULTS = 1
	ENV DISPENSER FATAL
		ENV UNIT MISSING




Summary:
Documentation - Package IP Installation htm broken link

Description:
The SST Setup specifies incorrect directory location for setup.exe. Currently it is SST_MV and should be just SST



Summary:
TAR 299996:  OOS received as TXN starts results in tx reply reject with C03

Description:
Update to TAR 287923 which went into 02.06.02



Summary:
Cash Taken Quickly - Cash Taken comes before EXECUTE_COMPLETE for the Present command

Description:
Due to status handling in ooxfs, where EXECUTE_COMPLETE events are delayed to prepare a status bucket entry, the CASH TAKEN event is delivered before EXECUTE_COMPLETE for the Present Command. Consequently, the CashPresenter worker does not signal and RETRACT occurs. Fix is already identified & tested.

This has a consequence that the expected unsolicited message is not delivered, which is another bug - see GRIT 313332.

A fix for this GRIT resolves + fix for G31332, resolve G313430.





Summary:
PS - S/W ID and Release No. not reported (on WINCOR)

Description:
From Russia PS (on WINCOR h/w)

Test 6.6.2 - Step 6 of test should report these but does not. Test results attached



Summary:
PS - Opening Journal Printer or tearing paper does not display any faults on WINCOR

Description:
From Russia PS (in WINCOR h/w)

Test 6.3.4 Step 11 - No faults are displayed for Journal Printer even though during the test the printer has been opened and the paper torn

Test results attached



Summary:
TAR 298257 - Extra LF added at end of R00 header print

Description:
See TAR



Summary:
PS - Receipt Printer reports low when actually open on WINCOR

Description:
From Russia PS (in WINCOR h/w)

Test 6.3.2 Step 16 AND Test 6.3.4 Step 6 both show this issue - Receipt printer continuing to display Receipt low when it should be fatal. Test details attached



Summary:
PS - Get Config messages returning wrong information on WINCOR SSTs

Description:
From Russia PS (on WINCOR h/w)

The following tests - 6.3.2, 6.7.12, 6.8.1.7 return incorect status/configuration information - Test results attached for info



Summary:
PS - Performance Issues on WINCOR when perfroming CLEAR CASH

Description:
From Russia PS (on WINCOR h/w)

Reported that this takes between 1 and 2 minutes to be performed - See Test results for test 6.3.1 attached



Summary:
Document that MaxBills on SP needs to be set to 70 for Spray Dispenser

Description:
Need to add a note in the IPs that if 70 notes are to be dispenser on Spray Dispenser then the MaxBills registry key on the CDM SP also needs to be changed to 70



Summary:
PS - Test 6.8.1.3 - Incorrect screen appears entering card in DASH reader

Description:
From Laura Curone
Issue looked at by Trevor Livingstone - fix identified
Don't display new screen the "Please Remove Card and Wait Screen", if the Chip Connect Bits were not set.



Summary:
Support For 40x20 Cardholder Screen Display (TAR RFC 263459)

Description:
Support for 40x20 Cardholder Screen Display required for Diebold Emulation Project done by Malaysia PS.

Accepted at CCB as TAR RFC 263459.



Summary:
PS - in 'B' state the touch point for FDK A is not active

Description:
We noticed that when in the 'B' State, the touch point for FDK A is not active at all. Only the Enter key is active. We believe that both FDK A touch point as well as the Enter key should be active for state type 'B'. We reverted back to the 2.06.02 version of the ssdspinentry.dll and still had this same problem. We have not gone back to any previous versions of AANDC to verify that this worked OK previously.




Summary:
Taking cash during retract does not produce an unsolicited message if needed

Description:
Two cases
1) If cassette is low and cash is taken during retract, no unsolicited message is sent (Tcode 3 of the retract command). This problem applies only to Multi-Vendor code, which does not use  ADI2 commands like RETURN_CASSETTE_STATUS. 
2) TCode 9 not handled, thus no unsolicited message sent if needed.




Summary:
SP1 causes card reader Service provider to fail

Description:
SP1 has an interface change to ooxfs that causes Card reader, mode switch and transaction problems.



Summary:
PS - Many Failures from Terminal Commands testing on WINCOR H/W

Description:
From Russia PS (on WINCOR h/w)

Many failures seen in this testing from sections 6.2.x of the ITS - Logs attached



Summary:
PS - Error message E1422 displayed instead of appropriate screen

Description:
After initial power-up of the ATM, the EOP displayed the following:
E1422
   UNKNOWN ERROR
Every couple of seconds, the EOP flashed 'NUMBER OF FAULTS=3' briefly.
After I went into and out of supervisor, the display changed to:
NUMBER OF FAULTS=2
THIRD CASSETTE REMOVED
JOURNAL PRINTER
   PAPER LOW
I repeated the test again by resetting the ATM, and saw the same E1422 displayed. However, when I entered and exited supervisor this time, the E1422 message was still displayed.




Summary:
ADE User's Guide Appendix E: make reserved user list more of a grid.

Description:
Two-column list over 2 pages would be easier to read if more columns on one page.



Summary:
PS - MAC Tests 5.4.5.8, 5.4.5.16, 5.4.5.20 which have to do with Restricted Mode are rejected

Description:
A Key entered correctly. Correct download used - but messages are rejected with invalid MAC error.



Summary:
XPAUTHOR - Uses old AX Script Host Script Editor - needs update that what originally made to allow runtime to determine editor?

Description:
I don't know mush about this but 1.1.1 of the AUthor was updated to allow use of the codemax dll through the AXEDITOR dll 



Summary:
PS - INIT BNA not clearing BNA first time through

Description:
From Russia PS - may be fixed by new script but GRIT raised to check

When  the function '54 INIT BNA' was selected for the first time, the BNA device WAS NOT CLEARED though 'BUNCH NOTE ACCEPTOR INITIALISED' was written. Selecting the same function for the SECOND time was successful.



Summary:
TAR 298372 - Send all KVV values command returns the A key KVV,when both A and B keys exist

Description:
Please refer to TAR description on STAR TAR 298372



Summary:
Integrate fix for GRIT 309216 on ANDC3.0.

Description:
Add extra TTU debugging output.



Summary:
PS - MEI Timer does not have any effect

Description:
From UK PS

Test 6.7.9 - MEI flash test. Test says timer 9 to be set to 9 secs but it did not quite flash for 9 secs from the time the receipt was ejected. I increased this timer to be 20 secs but still does not effect it. After receipt is ejected, the mei flashes for about 5-7 secs abd then it is turned off. This applies to all MEI flash tests in this section




Summary:
PS - Test 6.12.11 Long Envelope deposit does not report device unsolic

Description:
From UK PS

test 6.12.11 - I taped together 3 envelopes as per the test but I did not get any device error reported. I then taped 4 envelopes and deposited this and still NO device error. I did get the Envelope length error written on the journal but no device error as it seems to capture it into the bin and fold it 



Summary:
Journal trace of DASH unsolicited error is missing

Description:
Suspend then GIS to get reader fatal.
Two unsolicited error messages go to the host but there is only one device status message trace on the journal.




Summary:
PS - General issue with formatting of mStatuses

Description:
From UK PS spotted while running test 6.12.9 - se last lines of text below - seems that some single digit mstatuses are formatted to 2 bytes (i.e. padded with leading 0) and some are not

test 6.12.9 - This test is diffiult to perform - when I take the envelope and then quickly run at the back to block the device to cause a fault, get device errors regarding interlock failure. It is not easy to do this test from the back on the P86 - What is the best way to do this test - please advise? Also - i noticed that when the device errors were reported, the Mstatus field of the 3 device errors look odd in that the first one is mstatus "55", second one is mstatus "4" and the third one id mstatus "00". MY query is on the second and third mstatus - why is it not consistent in the number of digits it reports - it could have just reported "0" as the mstatus and not "00" OR report the mstatus "4" to be "04"?? see logs attached in email



Summary:
NDC Message Receiver - better handle null/garbage messages from CCM

Description:
See attachment



Summary:
PS - General Settlement Tests - tests 2 and 4 fail

Description:
From Greece PS

2 test failures - see attached document for full details



Summary:
PS - Depository Tampering Tests 6.12.3 and 6.12.7 cause hang

Description:
From UK PS

When I hold a pen/ruler inside the shutter, the screen displays "deposit envelope". The MEI turns off but the Beeping continues fo a long time - nothing seems to be happening - like the ATM has hung with beeping on. Had to reset ATM. See logs provided in the email. This seems to happen in several tests - tried  to repeat test but got a fatal and did not get suspend!



Summary:
PS - Tests 5.11.5/6/7 - Entries missing from Resrvd.def

Description:
From UK PS

When Paper is low- the MEI displays "E1420" on line 1 and "Paper Low" on line 2 when paper low and displays "PAPER OUT" on line 2 if paper is out.  I think it should display "statement printer" in both cases on line 1 instead of E1420.



Summary:
PS - Test 6.8.1.14 - Bad card entered on DIP functions differently from spec

Description:
From Laura Curone

When performing this test the section related to "Insert card, Reset the SST, Do not remove the card" failed due to following

The ATM went in service and, after a while, it displayed the Error Misread Screen for some seconds. It remained in the idle loop and displayed the Error Misread Screen from time to time as long as the card remained in the card reader.



Summary:
Remove #ifdef SVANDC and #ifndef MULTI_VENDOR from code

Description:
need to check all code for these, especially #ifdef SVANDC in termstat.cpp as it is stopping correct terminal info being returned for BNA and card bin



Summary:
PS - Test 6.8.1.2 fails due to unsol indicating incorrect status of DASH

Description:
From Laura Curone

At step 27, No M-status were generated for the card reader (OK), but the unsolicited messages that answered GETFIT and GETCONF have "3" instead of "0". Logs attached.



Summary:
PS - If card taken too quickly after unlatch on DASH get misread

Description:
From Laura Curone 

Scenario - Enter (non-chip) card into DIP reader, if card is removed when unlatch is heard (screen has already moved to take card screen) then get a misread error, however if a slight delay is added between the unlatch and removing the card it reads the card correctly



Summary:
TAR 299108:  Changes required to AA-NDC 02.06.00 Reference Guide regarding EPP

Description:
See TAR.  Reference Manual to be updated for 3.x.



Summary:
 if a Send is performed by the application while the EOT from the host is being processed the send fails. 

Description:
 if a Send is performed by the application while the EOT from the host is being processed the send fails. GRIT 313064 raised to track delivery into AANDC



Summary:
UX2 product class is 6674, currently coded as 6666

Description:
See related issue in GRITs common for details of update



Summary:
PS - Notes jammed on BNA2 H/w not reported in Sysapp device event log

Description:
From Russia PS (on NCR H/W) Test 5.17.10.2

When notes were jammed on refund slot the MStatus/Mdata 0704000000000304 was sent to the Host, but nothing appeared in SysApp's Device Event Log



Summary:
PS - Get Notes Definition message returns no active notes

Description:
From Russia PS (on NCR H/W) - Test 5.17.6.2

Any time the GETNDEF message was sent from Host, the reply was 22fs000fsFfs



Summary:
TAR 299554 - Screen flicker seen when going from a web page in customisation layer back to NDC screens

Description:
Customer in Chile is developing a customised Advance NDC app (on 2.05, but applies to 2.6.x).
They display a web page in customisation layer. When they go back to Advance NDC to continue with the standard state & screens flow, the previous NDC screen appears shortly before the new one is drawn. The previous screen can be blank, if Clear Screen On Exit was set to true on the screen displayer before going into the web page. But both is not acceptable.

Phil is aware of this issue. He was trying to fix it, but this was not sucessful at the time. I have tried with the improved code that using mutexes and a fix seems possible a desirable.



Summary:
Add IUI information from Lorenzo to the IUI steps on the AANDC CD

Description:
Information put together by Lorenzo should be reviewed for AANDC 3.0 CD.



Summary:
VISA2 - Host messages disabled via ANDC not returning all Rxx key presses

Description:
VISA2 Configuration menu.  Host messages suppressed - disabled tested via ANDC not returning all Rxx key presses.



Summary:
CCM VISA2 Diagnostics Task not working with CCM VISA2 92.00.00.02 IT2

Description:
CCM VISA2 Diagnostics Task does not work with the latest sources form Helix(RBOC) and certain versions of ActiveXFS and the Simulator.  An exception is caused  when th task is executed.



Summary:
PS - Dialup - When Host Header is enabled and a GIS is sent in Supv with Host Header requesting a dial up in service - We do not action

Description:
PS - Dialup - When Host Header is enabled and a GIS is sent in Supv with Host Header requesting a dial up in service - We do not action - 
The caller which signals that a dialup is required is not being invoked in bothe the Session and mode change - only in the Session change



Summary:
Hardware Configuration Data¿ message is invalid if device is missing

Description:
It is not allowed to send any information about not present devices:
¿If a device is not present, there will be no corresponding Device Identifier in the field.¿ At the moment devices are reported as 00 along with the device id when they are not present, see G00, K00 and H00 below.

22[Unicode-x1C]001[Unicode-x1C][Unicode-x1C]F[Unicode-x1C]HA0000[Unicode-x1C]B1A[Unicode-x1C]CC00<GS>D03<GS>E01<GS>F02<GS>G00<GS>H00<GS>K00<GS>L07<GS>O01<GS>P01<GS>Q02<GS>R02<GS>S10<GS>Z02<GS>01[Unicode-x1D]\01[Unicode-x1D]V01




Summary:
GBNA/BNA confirmation screen not proper

Description:
Confirmation screen should display all the configured notes. but in this case it displays only
   7 notes whereas there are 11 notes configure. one reason might be the reservd.def file is like 1=% 2=% so on till 7=% (because we had 7 notes)
   i think this is wrong



Summary:
Changing ccm  visa2 configuration  via ANDC 3.0 .Wrong Message displayed "Restart required TCPIP update

Description:
Changing ccm visa2 configuration paramenters via ANDC 3.0 .

Make a parameter change via of visa2 configuration, press cancel, press cancel - wrong error message is displayed. Message displayed "Restart required TCPIP update" should be "Restart required VISA2 update"



Summary:
Include APTRA Simulator 93.0.0.x with Advance NDC

Description:
Simulator is currently available on Ip to about 40 people.  In an attempt to save paperwork release the aggregate with ANDC (3.0?) in an unsupported directory, ie not supported by FGSC.  NB may still need to put out pre-rels in between ANDC releases. Already discussed with Avril 



Summary:
PS - Dialup -  In a dialup environment a Not Connected or Inoperable should result in an immediate close 

Description:
PS - Dialup -  In a dialup environment a Not Connected or Inoperable should result in an immediate close - This is so that subsequent sends will function correctly and actually perform an Open and a Send.



Summary:
Product Version Number should not be held is persistant store

Description:
Currently the rpoduct version number returned by Terminal Commands is held in a persistant store.  This means that for the service packs, the version number is not update unless PMDATA is deleted, which loses the customer's download, etc.  The product should be updated such that the version information is populated at start of day & is not persistant.  

Suggestions from Stephen:
Current implementation issue could be overcome by getting the service pack to update the release number by writing to the CDI store - this could be done at start of day in any app that was updated.  This would only work if there were apps updated of course.  Could also update the value with script during install - or a wee simple app that writes the new updated version value back to the store.

Changing the value and releasing a new NDCDATA would still require a delete of PMDATA as you are creating a persistent store with a different default value, the system would mError because of this - not good.

Suggested solution:

The Startapps.vbs script already does something similar to this - it checks the same registry location to find out which version of XFS is installed.

The code can be plagiarised from there.

Euan.

_____________________________________________ 
From: 	Lawson, Richard  
Sent:	08 March 2005 08:49
To:	Glencross, Stephen; Paton, Elaine; Reid, Catherine Hill; Mathew, Bino; Turner, Peter; Spafford, Michael; Pattullo, Euan; Vesely, Jan; Duncan, Philip; Clenaghan, Colette; Yakub, Zubair
Subject:	RE: Minutes: ANDC 2.6.2 Release Bulletin Review

I understand this to be the Product ID store:

  CDIPStringStore ( idCurrVersion,         "idCurrVersion",         8,  "020601" ) , 

The best way is to write a script that runs at start of day to ask the aggregate inventory for the list of installed components. (not aggregates as they are not
guaranteed to be the factory ones) and look for the product and Service Pack.

This can be done via the AI COM interface (AX Script) , this reads the keys from the registry:

HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC Development\02.06.00
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC Service Pack\02.06.01
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC SST\02.06.00

It will be easy to populate the CDI from this. A default value can be used to indicate a problem ,this means an un-supportable installation :-)

A little effort but no need to ever do it again (I hope) an no clearing NVRAM each SP.

Richard.



Summary:
Documentation only installation fails

Description:
Whenever you select the documentation only installation and there is a previous version of any files installed on the machine the installation will fail.



Summary:
TAR 296160 - Txn reply function deposit and print always dispenses an envelope, NDC+ dont

Description:
Need to add functionality to allow the envelope dispenser to be configurable.



Summary:
Envelope Does not Dispense after going through state C

Description:
GR1T 241745 has missing fucntionality. This fix went into Advance NDC 02.06.00 (CustomisationLayer46MV) - There is a missing setter worker in the RE-ADJUST ENV FLAGS workgroup (2c616p5). This will cause an envelope not to be dispense if a state c has gone through first then the customer performs a normail deposit and print. when the normal deposit and print transaction reply is sent no envelope is dispensed when one should be. All other test cases scenarios are fine.



Summary:
PS - Incorrect status messages sent when Hardcopy Backup stopped

Description:
From Russia PS - Test 6.4.3.8

Has been looked at by Euan - Journal H1 messages should be sent when backup is turned off - possible issue.

From Vladimir - After '3fsfsfs1A1600017000' was sent, it worked in a different way, then it was expected: status messages with status '9' nor status '1' were not sent to the Host, but Hard Backup file was not changed nor dumped until '3fsfsfs1A1600117002' was sent. Seems to be even more correct, that is why "Passed" was written...



Summary:
PS - No Encryptor error message for Security Test 5.3.10

Description:
From Canada PS - Test 5.3.10 from section 5.15 of its

Test states an unsol should have been sent but this is missing. Srinivas/Jacek aware of the issue and have requested a GRIT be raised for this issue



Summary:
PS - Journal Print test returned an additional status message

Description:
Fron Russia PS (on NCR H/W) - test 6.4.3.4 running transactions until out of paper returned an additional status message. Details -

The additional status message was received by host: 12fs000fsfsH1fs4fs05fs3111. Was not repeated during the second test¿



Summary:
PS - EJ Test - Hardware Config data returned contains invalid configuration data

Description:
From Russia (on NCR H/W) - test 6.4.2.3

Configuration field in the Terminal State message contains '00' for device id 'H' ( for both Send Configuration Info and Send Hardware Config terminal commands)





Summary:
PS - BNA2 Testing - device id 'w' missing from solic status messages

Description:
From Russia PS (on NCR H/W) - Tests affected 5.17.1.2, 5.17.3.2 

Device identifier 'w' was not present in field g4 of the Solicited Status message



Summary:
PS - Dialup -  When rear settlement mode is entered ATM leaves line connected and does not respond to  last disconnect message sent down 

Description:
When cardless rear settlement mode is entered, the ATM leaves the line connected and does not respond to the last disconnect message sent to the ATM (following the P20). I cancelled out of rear settlement, and then the ATM sent the CP Rdy 9 and disconnected.  the ATM should  send the CP Rdy 9 immediately after the disconnect command and allow the line to disconnect, then dial back up when the settlement transaction is ready to be sent

I will look into this one. It does not seem like correct behaviour to me. For settlement there should be an explicit dial up and the disconnect for the P20 should result in a CP Ready immediately. However I know what is happening here and will look for a solution



Summary:
PS - Dialup - Document the ModemConnectTimer should be less than Timer 3 in order that line disconnects detected in Trans cause offline

Description:
PS - Dialup - Document the ModemConnectTimer should be less than Timer 3 in order that line disconnects detected in Trans cause offline straight away and do not allow any inservice processing and potentially card entry



Summary:
PS - Settlement Auto-Accept not clearing digit(s) entered

Description:
From Greece PS - Settlement Test 6.14.7 

Step 7 of test 6.14.7 -  the digit 1 is auto-accepted, FUNC prompt is re-displayed, but digit 1 should be cleared because otherwise the user would not know that he/she have to enter a new digit (0 in test case - step 8). During this test digit 1 is not cleared after is auto-accepted and rejected as not valid. 



Summary:
PS - (Possible Issue) Settlement - Action State 3 not working correctly

Description:
From Greece PS - Settlement test 6.14.3.1 Issue seen with test. This GRIT raised as not sure if issue is with test or code. Details-

I think the last step for test 6.14.3.1 testcase 4 - step 12 expected result should be "return to normal transaction" and not "Prompt for next transaction", becasue the action state value 3 should cause the ATM to return to normal (in service). 





Summary:
PS - Performance Issue returning to Supervisor from Sysapp on Fascia

Description:
From Greece PS test 5.3 (usability tests)

When using supervisor menu from facia screen - press 7-diagnostics for sysapps. When returning to supervisor menu by pressing exit the Please Wait screen is displayed for longer time than in previous releases.



Summary:
TAR 298908 - SP2 does not install CCM PCCM 2.0.2 correctly, files not updated

Description:
Include CCM PCCM 02.00.03 in ANDC 2.6.x



Summary:
Total notes retracted in display counters shows 0.

Description:
The display countes option in supervisor displays the total notes retracted as 0 after retract.
The problem is the total notes retracted store has not been shared here.



Summary:
Individual retract counts are not updated

Description:
While retract, the individual counts are not updated as the CDI store id is not correctly mentioned in the script host. The CDI store id for retract counts should start with 3292.



Summary:
TAR 298256- Unable to use touch screen & mouse in 'm' state

Description:
Unable to use touch screen & mouse in 'm' state
Please refer to star



Summary:
Improper error code sent while notes at throat

Description:
If the notes are refunded, and let it time out(retract flag not set), then the notes are at throat and the device status message sent to host is w0 instead of w4.



Summary:
Improper returned counts in device status message

Description:
For the scenario, where time out happens on confirmation screen and it prompts for ' do you want more time '  screen, if no is pressed it refunds the notes, and is sending w1, in the device status message the returned counts are shown as 0.



Summary:
No beep on timeout screen

Description:
When the 'Do you want more time' screen is shown, it is not beeping.



Summary:
PS - Dialup - CCM Level Issue - Sb/SE sequence with immediate send results in a notconnected incorrectly

Description:
PS - Dialup - CCM Level Issue - SB/SE sequence with immediate send results in a notconnected incorrectly - The Send whould wait for the SE to complete before being attempted. The NotConnected odes not reflect the tru nature of the line. This is being tracked in the CCM Product in this GRIT for fixing and in the AANDC Product as GRIT 312609



Summary:
PS - Dialup - Test 5.5.2.4 - CCM Level Issue - Sb/SE sequence with immediate send results in a notconnected incorrectly

Description:
PS - Dialup - CCM Level Issue - Sb/SE sequence with immediate send results in a notconnected incorrectly - The Send whould wait for the SE to complete before being attempted. The NotConnected odes not reflect the tru nature of the line. Raise das GRIT 312612 on the CCM VISA2 Component for fixing and as this GRIT to track inclusion of component



Summary:
Add files to migrate KVVs from previous release to next build

Description:
Jacek has provided an application to be run and a DLL to be registered which need to be added to the next build CD. Files are attached.
Here is application which can read KVV from EPP device and store to the system registry.
Before using it is necessary to register this DLL:
Application is configurable using INI file.
In config group you can find:
[Config]
;Enter key ID which KVV should be read from device
KeyId=1,2,3,4,5,6,7,8,10,11,12,13,14,15
RegistryKey='SOFTWARE\NCR\Advance NDC\Security\KVV'
;key names, if name is different then KEY + keyID
;set the name eg : 01=MASTERKEY
01=KEY1
02=KEY2
03=KEY3
04=KEY4





Summary:
Problem in printing of counters for GBNA

Description:
The counters printed should be only configured, but it is printing all the types of counts which are not configured also.



Summary:
PS - Dialup - test 5.16.1.1 - CP MEssage on means that a error on line during timer period results in indefinite redial attempts

Description:
PS - Dialup - test 5.16.1.1 - CP MEssage on means that a error on line during timer period results in indefinite redial attempts - match all TB with TE in CP Message processing on disconnection



Summary:
Need to keep encryption keys from previous AANDC releases

Description:
We require to retain keys after reinstallation of the platform and AANDC. To do this krep.dat needs to be equivalent in the new installation.Previous suggestion was that PS copy the existing krep.dat and add it to the installation, but if there is a standard structure going from XFS 2.2 for example - we could provide a file to work for each migration type and key entry mode. This gRIT is to investigate if this is possible.



Summary:
PS - Dialup - Test 5.16.1.2 - Disconnect Received within a Transaction where the disconnect is the last traffic on the line should result in CP R9 in Trans

Description:
PS - Dialup - Disconnect Received within a Transaction where the disconnect is the last traffic on the line should result in CP R9 in Trans



Summary:
NDC Data Collector does not process CLEAR Key for ADE Input

Description:
CLEAR Behaviour is missing when ADE Echo Worker is being used.



Summary:
Reserve screen i91 for GBNA supervisor screen

Description:
'i91'   ''
        '           BNA CNTRS'
        ''
        ''
        '  LAST CLEARED : %        %'
        ''
        '                 COUNT '
        '  ENCASHED       %'
        '  REJECTED       %'
	'  RETRACTED      %'
        ''
        '  ESCRW DEPS     %'
        '  ESCRW RFND     %'
        ''



Summary:
Garbage Traced to Printer when  Solicited Cash Error sent to host

Description:
If you send a card before cash transaction reply with a note counts field of all zeros a cash handler solicited error is sent to the host, however the corresponding journal trace contains garbage data similar to below

"   *000*2*(single stange printable character here)*
ESCROW COUNTS: 0- U U U U U U U U U ....... (repeat for a couple of lines)

VAULTED COUNTS: U - U U U U U U ......... (repeat for a couple of lines)

RETURNED COUNTS: - U U U U U...  (repeat for a couple of lines)

Various Debug logs are attached. I can re-create it.



Summary:
Presenter Error traced to Journal when notes are taken.

Description:
During a dispense I see Presenter Error traced to the journal even when the notes are taken. No cash retracted Unsolicited error message is seen.

This was seen during EMV/CAM 2 testing with a DASH reader. I was using a card before cash transaction reply.

Various Debug logs are attached. I can re-create it.



Summary:
Init BNA Transport in supervisor exit is still using the old bna control

Description:
Init BNA Transport in supervisor exit is still using the old activex control instead of using the activexfs control.



Summary:
PS - Dialup - Test 5.5.2.3 - Power-up journal print message re-prints every time it attempts to send the power-up message - it should only print when sent

Description:
Dialup:- Power-up journal print message re-prints every time it attempts to send the power-up message - it should only print when sent



Summary:
TAR 298414:  Delay entering Idle loop when mpg playback in progress - only release bulletin update required

Description:
In the ANDC 3.0 release bulletin, describe the performance issue related to the Intel Graphics Driver v6.13.1.3198 available in Windows XP Service Pack 2.  Fix is to roll back intel 82815 driver to
6.13.1.3196.
Note that the TAR was transferred to the platform and core groups.



Summary:
TAR 298414:  Delay entering Idle loop when mpg playback in progress - only release bulletin update required

Description:
In the ANDC 2.6.3 release bulletin, describe the performance issue related to the Intel Graphics Driver v6.13.1.3198 available in Windows XP Service Pack 2.  Fix is to roll back intel 82815 driver to
6.13.1.3196.
Note that the TAR was transferred to the platform and core groups.



Summary:
TAR 298414:  Delay entering Idle loop when mpg playback in progress - only release bulletin update required

Description:
In the ANDC release bulletin, describe the performance issue related to the Intel Graphics Driver v6.13.1.3198 available in Windows XP Service Pack 2.  Fix is to roll back intel 82815 driver to
6.13.1.3196.
Note that the TAR was transferred to the platform and core groups.



Summary:
PS - test 5.15.5.3.2 fails - inconsistent KVV reporting

Description:
Before sending the D_COMMS and D_MAC, 0 Disp access shows
    The COMS key KVV is 7EED
    The MAC key KVV is 46D3
 
After sending the D_COMMS and D_MAC, before sending the GET_KVVS I do 0 Disp access
    The COMS key KVV is blank
    The MAC key KVV is blank
 
Then i send the GET_KVVS and get the response. I do 0 Disp access again
    The COMS key KVV is blank
    The MAC key KVV is 46D3
 
The response to the GET_KVVS has 7EED30 for COMS key KVV and 46D327 for MAC key KVV
 
The same thing happens with 5.15.3.6(DE_COMMS, DE_MAC, GET_KVVS)




Summary:
Advance NDC 3 does not distinguish between removed cassettes and not installed pick modules

Description:
Fault display shows cassette removed, but the pick module is not installed at all.
Re-appearance of the same issue we had with MV CEN/XFS 2.0 code some time ago.



Summary:
Buiild Final fails with error stating that WFSPINSECUREKEYENTRY is undefined - XFS header with this definition needs to be present 

Description:
Both the platform and the simulator must include the updated header with WFSPINSECUREKEYENTRY defined so that our build finals work



Summary:
De-Installation on  a Development PC is not successful.

Description:
De-Installation on  a Development PC failed. Event logs are attached.



Summary:
Spray - Partial Dispense no longer works with latest CDM_SP (IT10)

Description:
The CDM_SP (IT10) has been changed to return a different completion event on a partial dispense - It now returns a CASHUNITERROR rather than NOTDISPENSABLE. The result of this is that no notes are thought to be presented by the AANDC code and so the notes appear as rejected



Summary:
BNA - IsMultiVendor check needs to be removed from BNA functionality 

Description:
Worker 0n3491dc126 Expression field should be changed from IsMultiVendor() = 0 to IsMultiVendor() = 1 (I think this worker can be simple removed bacause IsMultivendor function (SSDSNDCFUNS.DLL) always returns 1)




Summary:
Use window handles instead of hService to map events to mMVdevice

Description:
related to 310025 on Euronet where missing events on Diebold IX caused lots of problems.
this fix in Euronet SP1

for discussion see attachment





Summary:
KVVs require a registry key to be created which should be hardcoded

Description:
At the moment for the KVVs to be written and read from the registry a new reg key \SECURITY\KVV needs to be created. This key should be automatically created in the C++.



Summary:
PS - Dialup - No Test Ref - CCM VISA2 Component problem - DialonSend Timer is bringing line down within a Transaction Begin nest

Description:
PS - Dialup - CCM VISA2 Component problem - DialonSend Timer is bringing line down within a Transaction Begin nest - Raised GRIT 312362 on the CCm component to cover this - there is a log attached to that grit to clarify the situation to CCM
To test fix set DialonSend Timer to 5 seconds and do a Dialup Transaction



Summary:
Supervisor Boot - Any Unsolic at SOD results in a comms open and send whereas a supervisor boot should not exercise comms at all

Description:
If CPM is not present as a device but installed - get a CPM unsolic at SOD. If we have a supervisor boot this results in a comms connection at SOD which should not happen.




Summary:
Dialup - screens i41 to i45 are already in use and need reallocated

Description:
Screens i46-i99 are available for Dialup. Zubair to let me and Colette know what the final screen numbers are



Summary:
TAR 298372 - Send all KVV values command returns the A key KVV,when both A and B keys exist

Description:
Please refer to TAR description on STAR TAR 298372



Summary:
Dialup - Regsitry Key check should be case insensitive

Description:
NCRaVPIVISA2.VISA2CommsService registry key value should be able to be any case and still result in a dialup system



Summary:
DialUp Supervisor - Selecting Enter at a configuration screen sets any value entered to 0

Description:
Tried a few of the options in the Application Parameters Menu - ACT TIMER, CP MSG TMR, ERR REDIAL and noticed that pressing just Enter set any value in these parameters back to 0.  Verified this by re-selecting the option and 0 was displayed where a value had been before.




Summary:
DialUp Supervisor - Pressing Enter Key at Parameter acts like Cancel

Description:
When a menu item has been selected (eg Application Parameters Menu) and the current configuration of a parameter is displayed, selecting the Enter key only returns the user to the Application Parameters Menu.  Enter in this case is acting like Cancel.  This is not consistent with TCP/IP which either displays an error of leaves the screen displayed prompting for entry.




Summary:
There is a pause while Installing AANDC 3.0 on the SST 

Description:
There is a pause while Installing AANDC 3.0 on the SST.

Screen Shots attached.




Summary:
Dialup -  Document some xml restrictions in Migration document?

Description:
xml file does not allow straight entry of certain special characters into AlphaNumeric fields for example & needs to be entered as &#38;
These special characters are documented in the xml standard and CCm claim that all users are expected to be familiar with this standard but I fee we should point this out anyway.



Summary:
Spray Dispenser - Should handle all possible errors

Description:
While fixing GRIT 311910, all other possible error conditions should be handled



Summary:
 Error severity is reported as 2 instead of 4 for the Dispenser

Description:
Test 5.4.4.3 of Pre-Shakeout Tests - extended status Reporting: For the spray dispenser when we block the exit part way through the dispense to allow only some of the notes to be delivered then, In the Fitness message fitness for the Dispenser it shown as 2(warning) instead of 4(Fatal).



Summary:
Envelope Depository not going to suspend mode.

Description:
When the envelope is held on , when making a deposit into the envelope depository , the SST is not going into suspend mode.

When Send Fitness Infoirmation Terminal command 1<fs><fs><fs>73 is sent '4' is reported for the Depository.




Summary:
BNA2 - Deposit of 100 notes credited as 10 notes

Description:
See attached e-mail for history.  Basically, the host interface can only report 2 digits for number of notes deposited.  BNA2 device can accept up to 100 notes, this cannot be limited.

Need to define and agree acceptable functionality for this scenario with product management/Stefano.



Summary:
PostHWEventOnNonZeroMStatus reg key not set.

Description:
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\WOSA/XFS_ROOT\SERVICE_PROVIDERS]
"PostHWEventOnNonZeroMStatus"=""
On 2.6.x and 3.0



Summary:
TAR 297841 - F4 returned instead of F3 when EDEP jam with access

Description:
Problem is that on an envelope deposit transaction, if an envelope is
entered by is held by cardholder so it cannot be taken into the depository,
then a F4 status is returned instead of an F3.

F3 = jam with access
F4 = jam without access.



Summary:
Dialup Supervisor:- Dialup Supervisor does not correctly read and write to the xml file and causes minor corruptions

Description:
Dialup Supervisor:- Dialup Supervisor does not correctly read and write to the xml file and causes minor corruptions - Therefor inadvisable to use Dialup Supervisor - Hand Edit the xml file!



Summary:
State changes logged as an error to application log

Description:
State changes for the top layer (i.e. Visa2CommunicaitonsLink) should be logged ot the application log as information, not errors, and all other state transitions should be logged to PD only.



Summary:
Removed the Validator Workgroup to enable all modifiers for MV

Description:
Valiator work group in ApplicationCore has checking for MV.Removed that work group to enable all the Modifiers for MV



Summary:
Improper supplies status for the cassette sent in the unsolicited status message

Description:
Test 5.5.2 cash dipenser : When the cassette is removed and tried to dispense from that particular cassette then, it send an unsolicited message. According to the test case it should return the replenishment data as 3(empty) for that cassette. But it reporting as 1(not configure)



Summary:
Dialup Supervisor Menus - Get rid of dependance on FDKs since this forces Dialup Customer to perform key reconfig

Description:
Dialup Supervisor Menus - Get rid of dependance on FDKs since this forces Dialup Customer to perform key reconfig



Summary:
Wrong Solic returned if cassette ejected while dispensing on Spray Dispenser

Description:
If a Tx reply sent to dispense from a cassette in the Spray dispenser, and that cassette is ejected just as the dispenser runs up, the unsol reported indicates a Short dispense rather than no notes dispensed



Summary:
Get Fitness does not report correct info per cassette

Description:
Similar issue to 311203 except that cassette fitness not reported correctly rather than whole device. Raised seperately as fixes will be different



Summary:
System escape in card before cash using Dash Card Reader

Description:
System escape occurs when Card before cash Transaction reply is sent and the card is not removed. The last entry in the Debug log is Timer72 expired. The escape is generated by Customisation Layer. there is no even log generated for this escape



Summary:
Russia CLR CASH Does not always clear the counts and performance can be poor

Description:
Found during Spray Dispenser UT but do not believe this to be an issue related specifically to the Spray Dispenser

Performing a CLR CASH after NVRAM is performed and it operates correctly and does not take a long time to complete

After having run several transaction, performance is poor (between 20 and 80secs) and occasionally rejected counts are not cleared.

Adding notes to e.g. Cassette 2 can cause (rejected) counts on cassette 1 to be updated



Summary:
Euronet CLR CASH Does not always clear the counts and performance can be poor

Description:
Found during Spray Dispenser UT but do not believe this to be an issue related specifically to the Spray Dispenser

Performing a CLR CASH after NVRAM is performed and it operates correctly and does not take a long time to complete

After having run several transaction, performance is poor (between 20 and 80secs) and occasionally rejected counts are not cleared.

Adding notes to e.g. Cassette 2 can cause (rejected) counts on cassette 1 to be updated



Summary:
TAR 289951 - AANDC 2.6: Variable results with EJupload - either hangs or continually loops

Description:
Problem that ATM stops processing messages when continuous EJ upload & download happen together (sometimes).



Summary:
Offer shutdown from Supervisor Menu - where no sysapp

Description:
Diebold machines do not have an obvious shutdown option in their 'sysapp'
Euronet found replenishers required a shutdown option on diebold as they use sysapp on NCR
Wincor have no sysapp but we may provide one in future.



Summary:
TAR 290078 - TVN/MAC specific command rejects not included in message.

Description:
Customer reports that they do not receive a specific command reject
information for MAC or TVN failures.  That is the status value, g1, of the status information field is empty even when the enhanced option of full reject messaging is on.
See trace below.
12:49:26  # 14    [40_501_12345678_024_00000000_01573201006_(1_F1
18060.45_>00_105/01/02   05/01/05  12:50     0501 0157
5892065512420038        0.00 0460     
101551242001                    
_0_(I05/01/2005_112:50_50501_70157

_7_(IATM ID_9LOCATION

TSTNCR1I01650097_(I  NCR TCPIP ATM   
_(I  CARD No   _(I589206_(I******_(I003_(I*_(I
_(I       _(I                     
Balance Enq                        
Your new balance is             
SAR      18,060.45 

ALLO BANK SERVICE IS AVAILABLE NOW                 800 124 8000
[Unicode-x0C]_180925E6]
12:49:27  # 15    [22_501123456__B618512C_C__1E13B26A]
FGSC have tested in the lab with what would be expected as a MAC reject.
Here is the result.
12:40:58  # 1    [4_000123456_9E35C12B_036_0100_1234A064_003NDC DEMO]
12:40:58  # 2    [22_000123456__C_]
Problem can be demonstrated by FGSC as necessary.
Customer is deploying AA-NDC 02.06. on February 12, 2005 and would require a fix for this date.




Summary:
TAR 292828 - Blank screen in Idle loop following display of pcx files then mpg files

Description:
To be applied to 3.0



Summary:
Diebold IX - supervisor Init receipt does not clear printer

Description:
Diebold IX printers fail of FF send after self clear using RAW_DATA
need an XFS control media command to clear. 



Summary:
Signature is missing in the message

Description:
when we send the Extended encryption key information message with modifier 'G', reply should have 640 bytes but it has only 320 bytes.Signature is missing in that.



Summary:
Dialup Supervisor Menus - Some screens don't get displayed though keypresses work

Description:
screens that contained enable or disable options need small delay (0.1 seconds) between displaying the RESRVD screen and activating the supervisor data collector worker.  




Summary:
TAR 297626 - Workaround description in release bulletin not precise (TAR 249332)

Description:
The workaround says there are two methods to achive the same thing, however, it should say that both the steps should be done. As a result the text should be:

====
The RSI lights can be controlled by the platform, to provide status information ¿ the lights are controlled differently from NDC+ in that the Amber & Red lights are mutually exclusive. 

This option can be enabled by performing these two steps:

1) From System Application, enable the RSI device in 8 - Self Service Configuration, 3 - Configure Devices. Reboot required. After that "SDC Remote Status Indicators" service should appear as one of the devices in 8 - Self Service Configuration, 1 - Display HW Details

2) Set this registry key 
[HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA Self-Service Support (NCR Features)\SystemMonitor\Operational Parameters]
"ControlRSI"=dword:00000001 




Summary:
Improper test cases for the cash dispenser

Description:
For the test 5.5.2 cash dispenser, it is given that when we hold the shutter closed and try to dispense then it will send a solicited fatal status message to the host and device become fatal.But, the test case should specify as follows:
when we hold the shutter closed and try to dispense then it will send a solicited suspend status message to the host and it goes into suspend mode where it tries to clear that error.hold the shutter closed while it is trying to clear that error.then the device become fatal and it sends a fatal status message to the host



Summary:
The path for the .NET Framework has to be set up manually as part of the Environment Variables 

Description:
The path for the .NET Framework has to be set up manually as part of the Environment Variables. This is required to use the regasm tool  on the CCM VISA type libraraie files



Summary:
Remove ActiveXFS Controls, Problem Determination Collection, .NET Runtime from CCMVISA2 Aggregate 91000001

Description:
Remove ActiveXFS Controls, Problem Determination Collection, .NET Runtime from CCMVISA2 Aggregate 91000001.  APTRA Interdependencies agreed these should not inbe in the CCM VISA aggregate



Summary:
TAR 297053 - Copy CodePage in K08 causes header to not be printed.

Description:
Copy CodePage escape sequence is not recognised and treated as printable data but this results in the header not being printed because it no longer believes it is at the top of the receipt.



Summary:
Installer: ad .net runtime path to PATH

Description:
for VISA2 - only XP path added as NT is not supported by dial up



Summary:
After long inactivity on DASH reader it no longer accepts cards.

Description:
If the DASH reader is left enabled for a chip read a long time with no activity e.g overnight - it will no longer accept a card. 






Summary:
Improve Module Management

Description:
Need ability to better manage the use of Modules in the Author.
Module Copy creates a 'new Module' everytime and makes it difficult to identify the module that has just been copied.
Beneficial to highlight a workers that belong to a module in an application for comparison of updates.





Summary:
Test case 5.4.8.4.1.The step 16 which is specifying the values of A,B,V values are not correct.

Description:
In the Keys Setup testing having testcase no-5.4.8.4.1,after entering the double-length key entryvalues for A,B and V keys and pressing '0' in the ACCESS menu for Displaying the Aceess the value of A,B and V should be 3A42,8730and D2B9 respectively.But instead of that it is storing the values as 8CA6,8CA6,8CA6 respectively.



Summary:
Take card quickly in the close state AANDC does not recognise that it has been taken.

Description:
Take card quickly in the close state AANDC does not recognise that it has been taken and enters Suspend mode. This was re-created when EMV was installed and may be related to EMV de-staging the card.

Consider updating AANDC to check for the card presence by using the Status XFS command prior to assuming the card has not been taken to avoid this issue. 

I cannot change the EMV side as this would cause certification issue.




Summary:
Partial insertion and removal of card causes problem with DASH and enabled for Chip.

Description:
When Dash reader is enabled for chip latch, if the card is partially inserted and removed, timer 72 is started and the system asks for removal of the card to reader the magnetic data without the card being present. This is not correct - It should not move on to this stage but return to enable the reader for a chip latch.




Summary:
Timer 72 (DASH take card) does not have default value. 

Description:
Timer 72(DASH take card)  does not have default value and is timing out instantly causing suspend processing to kick in whenever you go into close if timer 72 is not the download. 

Also Debug Log trace indicates Error while accessing Timer 72 share for the first time. (see attached log)




Summary:
Provide Mechanism For Author Project Reports

Description:
Need ability to provide output of database so that is can be read by an external program (Excel) so that change history, or deliverables can be documented easily.

Ability to report on all components, all catalogs, and all workers should be provided as a minimum.



Summary:
Dash Card reader reports severity as 4 in case of suspend

Description:
when the card is left in the Dash card reader the application goes to suspend. but in reply to Send configuration information command (1<fs><fs><fs>7)the fitness is reported as 4 (fatal) instead os 3(suspend)



Summary:
TAR 296658 - If Sound is played in C-Exit, it will not stop sound from previous state

Description:
Czech Savings Bank
To be resolved - see Jan, he has an idea about solution.



Summary:
TAR 293078 - Enter Key screens pointers incorrect.

Description:
Bankwest Australia
To be resolved



Summary:
TAR 280520 - Difference in formatting btw EJ/paper journal from PrintToJournal

Description:
Blank lines are being printed on the paper journal from the PrintToJournal output.



Summary:
TAR 280273 -  c-exit data is not printed to journal backup

Description:
TAR raised by Ceska on 93.00.00.12.  Fix to be delivered to the customer for IT12 build and then incorporated into 2.06 release.
See TAR for details of problem



Summary:
System Escape on NT when using PrintToJournal in Dual and Hardcopy backup mode

Description:
when using released 02.06.00 on NT with EMV exits a system escape will occur when PrintToJournal is used.



Summary:
TAR 296160 - Txn reply function deposit and print always dispenses an envelope, NDC+ dont

Description:
Need to add functionality to allow the envelope dispenser to be configurable.



Summary:
Card unlatch worker added in ADE 1.4 is causing a worker factory issue

Description:
AANDC up to now has alway gone with ADE 1.3.
The card unlatch was in ADE 1.4.

Yes, if you don't need this functionality for smart/dip, then you will need to stub it if you pick up the latest Advance ADE projects/release. The alternative is to keep with the version of ADE we have been using up until now - unless it contains additional functionality we need. ANDC 2.5 was OK with this previous version.
-----Original Message-----
From: Glencross, Stephen 
Sent: 05 January 2005 19:15
To: Turner, Peter; Stewart, Alison
Cc: Lawson, Richard; Vesely, Jan; Yakub, Zubair
Subject: RE: mCardUnLatchWoker?? + Merge Issues


That's fine - It will need to be stubbed/implemented for 3.0 as it stops worker factory builds.
 
how did it get past code review with a speling mistake in the woker??  Not really an issue, but I still think it could have been handled in the ejector (maybe).
-----Original Message-----
From: Turner, Peter 
Sent: 05 January 2005 17:18
To: Glencross, Stephen; Stewart, Alison
Cc: Lawson, Richard; Vesely, Jan
Subject: RE: mCardUnLatchWoker?? + Merge Issues


The CardUnLatchWorker was not included as it wasn't needed for phase 1/phase 1* of MV AANDC. This new worker was needed for Smart/Dip functionality I believe - Zubair can help you if you need more info on what it does. It was included in ADE but we picked up an earlier version of ADE as a starting point (as this was what ANDC 2.5 was based on). 
 
Hope this helps.
 
Peter.
 
-----Original Message-----
From: Glencross, Stephen 
Sent: 21 December 2004 12:57
To: Turner, Peter; Stewart, Alison
Cc: Lawson, Richard; Vesely, Jan
Subject: RE: mCardUnLatchWoker?? + Merge Issues


 
Hi All,
 
I've found some more Duplicate component ids in the product again - I think they have been there a while based on the time stamps.  This means we can't merge the Customisation Layer and Application Core to get a common type library, or simulate both apps in the test environment.
 
The components are:
 
Error with duplicate components. ID = : 0a18s1 
 [CUST 0a18s1 Set Up Usol Data:1 CLASS_MTGRAPHER BNA test Mon Jul 03 15:13:58 2000]
 [APPC 0a18s1 Add Header for Upload EJ CLASS_MTSEQUENCER BNA test Fri Oct 06 10:42:26 2000]
Error with duplicate components. ID = : 1n1135dc6
 [CUST 1n1135dc6 Session:Synch Cash Acceptance Complete CLASS_MTSEQUENCER NDC Customisation Layer Fri Nov 30 ]
 [APPC 1n1135dc6 Process Message (CD - In Service) CLASS_MTGRAPHER EPP module Thu May 02 14:54:30 2002]
Error with duplicate components. ID = : 2n1135dc6
 [CUST 2n1135dc6 Cancelled CLASS_MTWORKER new Module Tue Aug 04 16:14:08 1998]
 [APPC 2n1135dc6 Process by Subclass CLASS_MTSEQUENCER EPP module Thu Jan 22 09:15:43 2004]
Error with duplicate components. ID = : 0n1148dc6 
 [CUST 0n1148dc6 Initialise ISO 3 CLASS_MTGRAPHER NDC Customisation Layer Wed Jun 05 13:55:15 2002]
 [APPC 0n1148dc6 Transaction Reply Available CLASS_MTWORKER <No Module> Mon Mar 03 11:20:05 2003]
Error with duplicate components. ID = : 3n1135dc6
 [CUST 3n1135dc6 Cancel Exit CLASS_MTWORKER new Module Mon Jul 27 10:23:52 1998]
 [APPC 3n1135dc6 Extended Encryption Key Change CLASS_MTGRAPHER EPP module Tue Feb 19 14:41:36 2002]

I think the solution is to replace/copy the workers in one project and then do a merge.
 
I will raise a GRIT.
 
Regards,
 
StephenG.



--------------------------------------------------------------------------------
From: Glencross, Stephen 
Sent: 21 December 2004 11:20
To: Stewart, Alison
Subject: mCardUnLatchWoker??


 
Hi Alison,
 
A new worker has been added to the 3.0 projects, it's called the 'mCardUnLatchWoker'.  It should probably be called a 'mCardUnLatcher', or the Card Ejector worker should have been updated to handle un latching the card.  
 
I haven't been involved in this at all so don't really know what decisions have been made for this - but already the alarm bells are ringing!!
 
Any info appreciated.
 
StephenG.
 
 



Summary:
WFACTORY.MAK - replace all "ULYSSES" with "XFS" just now

Description:
Still ULYSSES in worker factory path, change to XFS. The path is to be removed altogether later.



Summary:
TAR 296944 - Comms established too early at power up, causing out of sequence messsages

Description:
When a host sends down messages before a PowerFail message they should be ignored, but they are not.  A host may do this when it believes Comms went down and so does not expect a PowerFail message.



Summary:
The Fitness for the Receipt is '0' instead of being '4' when the receipt paper is removed

Description:
When the receipt paper is removed and a transcation is initiated with  a transction reply with receipt data is sent, an unsolicited message is reported to Host and the supply information shows 3 (Paper Out ) .
When a Send Configuration Information Terminal command (1<fs><fs><fs>7) is sent,  the Fitness for the Receipt is '0' instead of being '4' [FATAL] 

Ran a device self test from SYSTEM APPLICATION , and when the  Send Configuration Information Terminal command (1<fs><fs><fs>7) is sent the Fitness for the Receipt reported correctly as  '4'



Summary:
Worker factory MAK file to be updated for Multi-vendor

Description:
The WFACTORY.MAK needs to be updated to add 

           /D "MULTI_VENDOR"

to the CPP_PROJ macro.



Summary:
ITS - Update Usability Checklist for Installation

Description:
The usability checklist in the ITS should be updated to consider the usability of the installation process:
Is the information given to the user clear/meaningful
Is the facilities available to the user (e.g. menu options) logical/clear?
etc.

Will hopefulyl ensure that the install process continues to be useful after several SP installations



Summary:
Sending GIS during a Tx when a Tx Reply is expected causes message handling issues

Description:
If a GIS is sent when app is expecting a tx reply then subsequent tx replies (in the same tx) are ignored. During the next transaction, the tx reply sent during the previous tx is actioned.

2 problems here - when the GIS is sent in the tr req/rep state, examining DebugLog shows the app has got into a loop trying to store the message. 2nd issue is that any transaction replies sent after the GIS are buffered and acted upon in subsequent transactions



Summary:
New install dir for CCM VISA2 schema and XML file is \Program Files\NCR APTRA\bin\config\

Description:
Original GRIT on CCM Comms - 310854 has impact on us in Supervisor.mpj since we modify the xml file



Summary:
T269692 Ej upload resets to 0 on EOF

Description:
see also T282546



Summary:
Loading Master key in Supervisor - Single Length key Entry with XOR  popped up a message "FAILED TO CREATE CHECKSUM "

Description:
Loading Master key in Supervisor - Single Length key Entry with XOR popped up a message "FAILED TO CREATE CHECKSUM " when entering the  parts 1 and 2 of the key together  (That's by selecting component 3 from the  keyentry menu to enter Part 1 and Part 2 together ).



Summary:
TAR 295400 - Counts are incorrect if notes dispensed are more than notes added

Description:
Banco de Credito, Peru



Summary:
PD logging missing from COM api failure

Description:
PD logging missing from COM api failure



Summary:
TAR 295019 Journal printer variant hardcoded to 1

Description:
same issue as TAR 289935 / G304235 for reciept
ALthough solution identified for ANDC 2.6.2, this is SV only.  So alternative solution needs to be identified for ANDC 3.x



Summary:
TAR 256059 - RFC for AA-NDC to support new state type "m" for combined PIN Entry + Language

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
5.6.1.16 BNA Close State - leave notes scenario sends bad message

Description:
Fix for ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
Advance NDC 2.6.0 and 2.6.1 - AVIs displayed full screen

Description:
Fix in ANDC 2.6.2 to be intgrated into ANDC 3.0



Summary:
PIN Entry states do not handle no timeout case (ie. next state set to 255).

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
CPM-mError occurs when starting application is device not attacehd and running on APTRA XFS 4.x.x

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 290959 - Supervisor mErroron exit from Diagnostics

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 294846 - AA-NDC hang after dispenser shutter jam.

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
Create Advance NDC Type Library

Description:
All worker definitions and types we use should be stored in a master AdvanceNDCTypeLib.mpj
New workers/changes to workers should be done in this file first, then imported into our current Advance NDC projects.
Benefit, common worker factory can be built.
Note: Currently, the projects do not have the same type library. Due to differences in worker/type definitions, at the moment a common worker factory cannot be build from any of the current three projects.



Summary:
TAR 294247 - Application delay induced by unsolics from Receipt printer when paper out

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 293873 - AA-NDC hangs if Display and Print requested after a partial dispense

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 292833 - With EMV/Exits installed, refelected messages are not converted to EBCDIC

Description:
Fix in ANDc 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 291617 - Incorrect FDK code in opcode buffer when FDK on left hand side, State E, FDK F

Description:
Fix for ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 291500 -  Electronic journal file cannot be used to accurately recreate txn data

Description:
Fix in ANDC 2.6.2 to be integrated in ANDC 3.0



Summary:
TAR 287923 - C03 command reject sent if OOS sent immediately after card entry

Description:
Fix in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
Intermittent synchronisation error within VPIVisa2CommsService Code.

Description:
On occassion, two seperate process access the same synchronised block with the Visa2CommsService constructor.  THis has the effect that the second processholds reference to an incorrectly constructed Visa2CommsService object and therefore any calls on the object will fail.  This behaviour is symptomatic of a problem experienced with the TCPIPCommsService code.  The fix for this was to use a process monitor, which incurs an noticable overhead.  The options to be investigated include Critical Sections, Events and Process Monitors.



Summary:
TAR 286762 - Access violation from application core when screen definition incomplete

Description:
Integrate fix for ANDC 2.6.2 into ANDC 3.0



Summary:
A "hardware not present" reject to a Print Statement & set next state transaction reply will result in any receipt/journal data being actioned.

Description:
If a print statement and set next state transction reply  is sent to a machine which does not have a statement printer the transction reply will correctly be rejected with a Hardware not present (E02) reject but any associated receipt and journal data contained within the reject reply will be actioned. This is not the correct behaviour for a rejected transction reply.



Summary:
DialupUT:- Session Begin on DASH should be done after Successful ATR and Successful FIT match ONLY

Description:
DialupUT:- Session Begin on DASH should be done after Successful ATR and Successful FIT match ONLY



Summary:
BNA2 emulation - System Escape if registry key ¿Report200Notes¿ does not exist

Description:
In no condition should system escape happen due to non-existence of a registry key. As if the key does not exist, it should just take whatever default value. Please find attached the log copied from Windows Event Log.



Summary:
Clarification required for user installation of modem

Description:
XP installs default drivers for the logitech modem.
These drivers are not an issue and the application can still talk to the modem via a com port, however this is unclear at the time and causes user confusion. 
Documentation needs to be updated to inform the user.



Summary:
When DAPI7 is selected, only restricted key entry mode should be offered

Description:
DAPI7 places additional restrictions on what keys can do. This means that we can't use the B key which has multiple functions, with DAPI7. So in effect when DAPI7 is configured, the keyspace setup should be like the restricted mode setup. Also it is likely that users of DAPI7 will want to be VISA compliant, in which case they will only be entering double length keys. So it would perhaps make sense to only offer restricted mode with DAPI7.



Summary:
Installer - Test XFS directory missing on DEV PC

Description:
Update to APTRA Advance NDC Support Files component - winfuncs.vbs



Summary:
Wincor PromStroyBank:incorrect status message for paper out.

Description:
Receipt printer regression tests passed for NCR5877 and failed for Wincor.
Wincor: The unsol. message in case of teared paper is
12/000000004//G1/0/00/1111 and the Host is unaware of the printer failure till the printer test(supervisor switch on/off).

The same results are for the Journal printer regression tests. Wincor:
12/000000004//H1/0/00/1111.



Summary:
Change all diagnostics tests to not use the ModemCommand ResponseTimer

Description:
Use a 30 second wait for the modem to respond to a command for all diagnostics tests.



Summary:
ProdBuilder - unwanted files picked up in local sandbox builds

Description:
The following files should not be included when creating local sandbox build with ProductBuilder
*.trg *.tlb *.tlh *.tli *.ilk , comcdistore.lib , miscmult.lib , pd_investigation.lib



Summary:
BNA2 emulation - Hang at Close State Refund if notes removed immediately when ejected

Description:
Notes removed immediately cause Taken event to be triggered in Refund Script. When application move to Wait For Taken, no more GBNA event will be triggered, causing application to hang at Wait For Taken.



Summary:
BNA2 Emulation - In Process Event, if CashInFailed with reason 1 (Stacker Full), BNASuppliesStatus is set to 4 (overfill)

Description:
Sub GBNA_CashInFailed(requestID,Reason,timeStamp) 
    If Reason = 1 Then 'Stacker Full  
          If BnaSupplyStatus.Data = 4 Then  
              BnaSupplyStatus.Data = 0 'no change  
          Else    
              BnaSupplyStatus.Data = 4  
          End If
      End If 



Summary:
BNA2 emulation -In Refund -> RollbackOK, if EscrowCount > 50, it is being replaced with 50. Why?

Description:
Sub GBNA_RollbackOK(requestID,cashInfo,timeStamp)
    Debug(" GBNA_RollbackOK ")
     'Replace EscrowCount.Data = 0 as may be >50 notes in escrow
    If (EscrowCount.Data > 50) Then
          EscrowCount.Data = 50  
    Else       
          EscrowCount.Data = 0    
    End If
    



Summary:
BNA2 emulation - Replenish function 53 - Clear Total does not display error message even if the function not executed successfully.

Description:
For 53 Clear Total - Even if StartExchangeFailed, still display all total 0. The display look exactly as if the function executed successfully. How would officer know actually not initialised successfully? If the function fails at StartExchange, what is the impact to GBNA's internal total (not CDI stores, but the counters which can be accessed through GBNA's properties)?



Summary:
Dialup Supervisor UT - Copy Dialup Configuration.

Description:
The first version of this used the bottom two FDKs.  It was descovered that these two FDKs are not suitable for the supervisor menus, this was changed to use the left and right FDKs.Fixed at UT.



Summary:
Dialup Supervisor UT - Visa2 Parameters.

Description:
A small screen alignment issue. Fixed at UT.



Summary:
Dialup Supervisor UT - Serial Link Parameters

Description:
The first run failed because the VBScript code that saves the changes to the XML file was the wrong side of the statement that checked if the file was present.  Therefore if the XML file wasn't present then the ATM reset. Fixed at UT



Summary:
Dialup Supervisor UT - Test 2.2 Application Parameters

Description:
The first run failed because if the Application Registry Settings weren't present for then then an exception was generated.  The second run failed because the validation logic had an OR instead of AND for the (x >= 0) AND (x<=255) expression. Fixed at UT



Summary:
Dialup Supervisor UT - test 2.1 failed

Description:
The first run failed because the menu validations were not checking for 0 as an invalid menu entry. Fixed in UT.



Summary:
DialupUT : Non-dailup related crash in FLDSCRN.CPP seen during dialup UTS rejected t. Reply test.

Description:
Access violation crash seen on transaction reply processing

It occurs in line 106 of FLDSCRN.CPP (rev 1.10)  within the routine FieldscreenInfo::ParseData. 

In the lines

while (*tmpPtr != FieldSepVal)
             TmpPtr++;

No check is done on the length of the message prioir to accessing tmpPtr.  

tmpPtr is also increamented by 3 at the top of the routine without checking on the length of the field.  

TmpPtr is going off the end of the message and causing an exception.







Summary:
BNA2 emulation - Journal Page signal not consumed

Description:
[ 1s89p1 ] Signal 'Failed' from worker 'Journal Page' (1s89p1) is never consumed (Warning only) _
[ 2a345tp2 ] Signal 'Triggered' from worker 'Encash Complete' (2a345tp2) is never consumed (Warning only)
The above signals seems like are valid signals that might trigger, which potentially can create a system escape




Summary:
Tester was checking for MV and setting CPM to be not present

Description:
In 2.06 the CPM was only run in SV but in 3.0 we want to run CPM on NCR SST. Removed code to set CPM to not present in MV app from Start of Day in customisationlayer project



Summary:
Start PD investigation Supervisor option causes exception

Description:
G310876 seen by India during 3.00 + SP1 testing, and at the CD site for Russia



Summary:
TAR 257044 - Character map facility for  Cyrillic printing

Description:
Implemented in promstroybank for Wincor. Easily ported to 2.6 as contained with MVNDCPrinters.DLL plus reg settings.



Summary:
Wincor: ANDC assumes 8 byte MAC

Description:
Wincor 40.31 PIN SP produced 16 byte MAC in Promstroybank required update to only compare first 8 bytes of mac produced.



Summary:
Change component install dir from CCM VISA2 to bin and bin\config for the schema and XML

Description:
Change component install dir from CCM VISA2 to bin and bin\config for the schema and XML
This has an effect on all the docs FS, DS, UTS, ITS, IP etc



Summary:
DialupUT:- Application Core - Listeners in Mode Handler should not be concurrent

Description:
DialupUT:- Application Core - Listeners in Mode Handler should not be concurrent



Summary:
Ensure new worker classes and literal types are created by Dundee

Description:
As part of 3.0 re-engineering, a new 'type model' author project file will be created which will feed into ANDC master project files. Need to ensure new definitions are created on Integration PC using NDC Admin ID as cannot do module copy for components relating to fundamental types



Summary:
Envelope Does not Dispense after going through state C

Description:
GR1T 241745 has missing fucntionality. This fix went into Advance NDC 02.06.00 (CustomisationLayer46MV) - There is a missing setter worker in the RE-ADJUST ENV FLAGS workgroup (2c616p5). This will cause an envelope not to be dispense if a state c has gone through first then the customer performs a normail deposit and print. when the normal deposit and print transaction reply is sent no envelope is dispensed when one should be. All other test cases scenarios are fine.



Summary:
Memory Leak from calls to  MtUser::GetUser()

Description:
Some calls to MtUser::GetUser do not delete the return value - main problem is with Module.cpp, that checks the user ID 4 times in one function leaking 40 bytes in total.

Leak was found using LeakTools.



Summary:
TAR 295614 - Application does not auto recover from a P86 envelope depository suspend

Description:
Westpac, Australia
To be resolved



Summary:
Release Bulleting - Document workaround for GR1T 301041

Description:
Costa Rica has provided a better workaround for GR1T 301041.  This should be included in the next release bulletin for ANDC 2.6.x:

Hi Elaine

Below is the information we received from Costa Rica regarding the fix they put in place for GR1T 301041. 
 
PROBLEM ID:	GR1T 301041	
PROBLEM:	Sound does not work from Advance NDC application on SST
with Audio Jack	
IMPACT:	Occurs only on SSTs with the Audio Jack feature installed. No
voice messages can be heard during the transaction, unless the customer
uses headphones	
WORKAROUND:	Use headphones to listen to the voice prompts.	

There is a jumper in the enhanced audio amplifier PCB, used to select the polarity of the automatic control signal that overrides the automatic switching of the audio output from the speakers to the headphones. The fix that worked for us consist into switching jumper J7 from 0 (links pin 1 and 2, factory setting) to 1 (links pins 2 and 3). 

Can this be documented as a workaround until the issue is fixed.

Thanks
Lisa





Summary:
TAR 295851 - TVN error not reported correctly when partial MACing is on

Description:
Looking at it from the behaviour in publications and common sense:
- ATM reports incorrect TVN when TVN is wrong & MAC is good and full MAC is used (correct behaviour)
- ATM reports invalid MAC when TVN is wrong & MAC is good and partial MAC is used (incorrect behaviour)

Please note that earlier product management statement is in conflict with this, but this is being looked at by Stefano, so let us hope the truth wins.

I think it is not a critical problem, however, FGSC has assigned a P2 to this so setting it a high priority level.



Summary:
BNA2 emulation - Confusing screen flow when skewed notes are inserted or notes being inserted differently

Description:
When skewed notes were inserted, notes were pulled in and then returned immediately (without separating the notes). Once notes were pulled in, screen changed from Please Insert Notes to Processing Notes. However, when the notes being returned/pushed out, the screen remained at Processing Notes. Looked like screen hung there. When notes are removed, screen changes back to Please Insert Notes. 
The user may be confused about what to do when the skewed notes are returned, not sure whether to remove the notes as the screen shows 'Processing Notes, please wait'. Machine/application actually expects the user to remove the skewed notes and reinsert them in a proper manner. Without removing the returned notes, the application could not proceed and looked like hang. 



Summary:
BNA2 emulation - INIT BNA failed with EndExchangedFailed, reason 109

Description:
Action Rohit to investigate and scope. reported by Malaysia. To be resolved for Maybank pilot 21st March



Summary:
BNA2 emulation - System escape during close state vault

Description:
Fixed in SP1 under Tar 268103 (see attachment). To be delivered for Maybank pilot 21st March



Summary:
DialupUT:- Message Suppression - Supervisor Messages Suppressed but Disconnect Flag reset so disconnect is never processed

Description:
Suppressed Messages should not reset disconnect flag



Summary:
BNA2 emulation - In INIT BNA, BNA fitness is not reset (to good) after initialised successfully

Description:
What needs to be done is to always wait for the Availability Changed event in SetDevice before doing a clear. Action Rohit to allocate this change.




Summary:
BNA2 emulation - GBNA status can turn to Not Present when Init BNA is performed

Description:
The status of GBNA is Present (BNA Fitness <> -1) during Start of Day. However, under certain scenario, GBNA status can turn to Not Present when Init BNA is performed. I spoke to Mike, what needs to be done is to always wait for the Availability Changed event in SetDevice before doing a clear. Action Rohit to allocate this change.



Summary:
BNA2 emulation - mError occurs when start apps if no BNA device (XFS 4.1.1 platform).

Description:
See GRIT 303847 from Service Pack. To be delivered for Maybank pilot 21st March.



Summary:
BNA2 emulation - Display only configured notes

Description:
Confirmation Screen to display only notes configured in the system.
Solution - a String is constructed with the configuared note types and count and this string is passed as parameter to DisplayStringToScreen function 




Summary:
BNA2 emulation - Print only configured notes

Description:
Journal/EJ to print details of only notes configured in the system instead of 50 denominations 




Summary:
BNA2 emulation - returned counts sent in wrong fields.

Description:
When Confirmation screen timeout, and ¿No¿ being selected on timeout screen, Device status message being sent to 
host with the notes count in escrow counts instead of returned counts field



Summary:
TReply sent down for one transaction is not processed until next transaction.

Description:
There is a small window of opportunity for a transaction reply to be sent just at the same time as the ATM TR state times out, where the TReply will be ignored until the next customer comes along and the then it will be actioned and a Ready9 sent in response. The download used was in mNWCUSTOM and automatically goes to the TR state after the PIN is entered. Logs attached - see msg at 13:59:48.



Summary:
BNA2 emulation - Inconsistency of counts in Device Status msg

Description:
Inconsistency of escrow counts, vaulted counts and returned counts in Device Status messages 
a) Most of the time when notes retracted, the fields (escrow counts, vaulted counts and returned counts) are all zeros (the character SPACE). However, sometimes when notes retracted, returned counts are being sent in Device Status message (Test 5.4). 
    
  Insert card 
  Select BNA transaction 
  Insert 10 valid notes 
  Remove rejected notes (if any) 
  Verify notes counts are correct on Confirmation screen. 
  Select Add more on the confirmation screen 
  Insert another bunch of 10 notes 
  Remove rejected notes (if any) 
  Verify notes counts are correct on Confirmation screen. 
  Select Cancel on the confirmation screen 
  Do not take the notes. Wait for timeout. 
  Do not select any option on timeout screen. 
  Hold the notes when the device attempts to retract it. 
  Verify retracted count not incremented. 

b) Sometimes the same counts appear in both escrow counts and returned counts fields (Test 2.3). 

Insert card 
Select BNA transaction 
Insert 10 valid notes (10 pcs of T2 notes inserted) 
Remove rejected notes (if any) 
Verify notes counts are correct on Confirmation screen. 
Press Cancel on the confirmation screen 
Do not take the notes 
Select no on the timeout screen but leave the notes 
we are sending the Cancel message first and then doing refund. so the message is sent before the counts are updated properly. 
send the message after refund is done.



Summary:
CLR CASH Does not always clear the counts and performance can be poor

Description:
Found during Spray Dispenser UT but do not believe this to be an issue related specifically to the Spray Dispenser

Performing a CLR CASH after NVRAM is performed and it operates correctly and does not take a long time to complete

After having run several transaction, performance is poor (between 20 and 80secs) and occasionally rejected counts are not cleared.

Adding notes to e.g. Cassette 2 can cause (rejected) counts on cassette 1 to be updated



Summary:
BNA2 emulation - NotesAlreadyTaken flag not set properly

Description:
- After received the transaction reply to refund, notes refunded, and immediately card ejected, and transaction went back to idle loop. MEI on cash acceptor is still blinking. 
- Debug log shows in WaitForTaken script, ¿Notes Already Taken¿ (which mean NotesAlreadyTaken flag is 1 when application entered WaitForTaken script. 
- This problem should be related to the setting and resetting of NotesAlreadyTaken flag. 




Summary:
Spray Dispenser UT - Beeper sounded when it shouldn't be

Description:
Test 5.12.1 - when msg mode set to 100204, beeper should not be heard on cash present, but it is



Summary:
Spray Dispenser UT - Wrong solic details returned on Hardware error

Description:
If a hardware error is created such as pulling out the purge bin before dispensing notes then solicited states an unknown (faulty) dispense. This is not correct as no notes have been moved so it should indicate no notes dispensed



Summary:
XFS Key Needs to be more selective of XFS Events

Description:
mXFSKey worker assumes all XFS EXECUTE events are for the keyboard which could lead to problems, need to check that the originator, or command is from the PIN SP.



Summary:
BNA2 emulation - Intermitent System escape 

Description:
After creating the LastCashinStatus Object and trying to access properties of that object gives an error. This shouldn¿t happen. But need to verify this.  Should be able to recreate this by stress testing.



Summary:
BNA2 emulation - Individual Retract/Encash Counts not correct

Description:
Issue 7: Incorrect returned count when all notes rejected under multiple notes insertion attempts. 
Issue 8: Individual retracted count should not be increased when notes removed while retracting  (Test 5.9). 
Issue 9: Individual retracted count should be incremented when partial notes (notes in escrow) are retracted (Test 5.6). 
Issue 10: When notes retracted, the old individual retracted count became 0 




Summary:
BNA2 emulation - Deactivate denom cause inproper device status msg

Description:
When some denoms being deactivated (using Extension 3 to Cash Accept State), the denom position for Escrow Counts, Vaulted Counts, Escrow Counts fields in Device Status Message is inproper. 
Eg. If Type 1 and Type 2 being deactivated, and Type4 (2 pcs) and Type 6 (1 pc) being refunded, Device Status message sent as: 
[12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]w1~    ~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    ~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~! " ~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#  [Unicode-x1C]0[Unicode-x1C]0005000000[Unicode-x1C]0] 
Note: Returned Counts for T4 is sent in T2's position, T6 is sent in T4's position (the counter's position shifted 2 to the left as the first 2 denoms are deactivated)



Summary:
BNA2 emulation - Notes counts fields in trx request msg not proper

Description:
a) Some times note type (field ca2) and notes count (field ca3) not being sent at all in the transaction request message. Only sending field c1 (w) without any note type and notes count (ca2 and ca3). 
Eg. 90pcs of Type 7 notes inserted, trx request sent as: 
[11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]1:[Unicode-x1C];2463642324631036?[Unicode-x1C][Unicode-x1C]    C  B[Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]w] 

b) Sometimes some notes types not being sent 
Eg. deposit with T3(50pcs), T6 (30pcs) and T7 (10pcs). Trx request sent as: 
[11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]15[Unicode-x1C];2463642324631036?[Unicode-x1C][Unicode-x1C]    C  B[Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]w04500730] 
Note: Sent 2 note types instead of 3. 

c) Sometimes incorrect notes counts being sent. 
Eg. Deposit with T4(50pcs), T6(30pcs),T7(10pcs), trx request sent as: 
[11[Unicode-x1C]000[Unicode-x1C][Unicode-x1C][Unicode-x1C]14[Unicode-x1C];2463642324631036?[Unicode-x1C][Unicode-x1C]    C  B[Unicode-x1C]00000000[Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C][Unicode-x1C]w019405500730] 



Summary:
BNA2 emulation - Cash bin maximum items value is incorrect after exchange

Description:
In the registry , after setting the maxcashinitems as 4096, and doing the start and end exchange , it is showing the maximum items as 0 and send the cash bin full status while encash.
Solution is in start/ end exchange active script host (both in Clear BNA and INIT BNA),in Exchange started event moved the "On error goto 0" statement after "if err.Number <> 0 then statement"



Summary:
BNA2 emulation - Encash count is incorrect if notes treated as invalid

Description:
While encash, if some of the valid notes are treated as invalid by the validator, they are not put in to the cashin cassette, but the count display is the number of notes in the escrow before encash. 
Ex: If i insert 50 notes (max notes for entry is 90)  and if 50 notes are accepted and if encash command is given, it will try to encash, and while encash if 3 notes are treated as invalid, then only 47 are encashed in to cashin cassette. 

But the count shown is 50, as the count is assigned the escrow count.
Solution is to Get the counts from ActiveXFS layer instead of maintaining it in CDI Stores



Summary:
BNA2 emulation - Handling of XFSErrorEvent in process events

Description:
When the xfs error event triggered in process events, it has displayed the hardware error screen, and ejected the card and then refunded the notes. and the message sent to the host is w0. 
Check in the XFSError event in the process event script. what is the status set to.



Summary:
BNA2 emulation - Disabling denominations that are not configured

Description:
Issue about disabling denominations. Scoping cost if implemented in AANDC (Bilal). Go back to XFS team (Alison) - XFS team cannot make this change. Scoped work to implement and test to ensure no host impact from denominations is 10 days. BeeLian to confirm if SYSAPP impact (all denoms seen in SYSAPP) is ok as long as host is not impacted i.e. denoms are filtered out for host. If SYSAPP impact is ok probably better to go ahead with these changes as it will take a long time (and may never happen!) to get XFS agreement to provide an interface to replace ini file. 
To avoid host impact and meet the OCBC dates it is suggested that Bilal's team begin working on author changes to filter out the de-configured notes. For 3.0 we  will try to get a change to the BNA control to give  some method of filtering out the notes similar to the ini file 



Summary:
BNA2 emulation - MStatus mapping needs to be done

Description:
MStatus mapping (XFS error codes to MStatus)has to be mapped. To be delivered for Maybank pilot on 21st March.



Summary:
DialupUT : CCM - The delay prioir to a re-dial attempt seems excessive.

Description:
DialupUT : CCM -The delay prioir to a re-dial attempt seems excessive. During testiing of a rejected message with no completion messages it took 31 seconds to start the re-dail process after the line had gone down.  This seems rather long.



Summary:
DialupUT : CCM - The second transaction does not dial if the transaction followed closely after the first. 

Description:
DialupUT : CCM -The second transaction does not dial if the transaction followed closely after the first.  The transaction request message appears in the debug log but no dial-up takes place.



Summary:
IP update for unsupported workers to indicate workaround or replacement worker

Description:
See attachment for list of workers not supported in 3.0. We need to list these in the IPs, say why the worker is no longer supported and what the alternative is. Stephen G has this information for all workers. Discuss at CCB for 3.0



Summary:
NDC Data Collector worker to be integrated into 3.0

Description:
The NDC Data Collector worker developed for Australia needs to be integrated into 3.0. In theory it can replace the Start FDK entry/Stop FDK entry calls in BNA/CPM as well as being a replacement for the ADE Data Collector. To go to 3.00 CCB



Summary:
DialupUT :CCM - The ANDC apps were shutdown and restarted due to loss of comms. On the intial re-powerup the outsanding messages from the previous run were sent to the host.

Description:
DialupUT :CCM - The ANDC apps were shutdown and restarted due to loss of comms. On the intial re-powerup the outsanding messages from the previous run were sent to the host.



Summary:
DialupUT :GOS recieved after CPmessage timer started result in a CP ready 9 going up when should be a CC ready 9.

Description:
DialupUT :GOS recieved after CPmessage timer started result in a CP ready 9 going up when should be a CC ready 9.



Summary:
DialupUT : NO-OP received during CP message timer should reset the CP message  timer otherwise line could be left up indefinately

Description:
DialupUT :  A cp message was sent after a download on exit of suprevisor. This was followed by a NO-OP. I would have expected the terminal to bring down the line when the CP message timer expired.  It was the host which brought down the line - long after the CP message timer should have gone pop.



Summary:
MV Application Framework missing some useful undocumented SV Functionality

Description:
The original SV environment could run final applications in a Test application window by setting an environment variable.  This helps when running final applications in the development system as the application windows are no longer full screen and you can see the other windows better (debug log, simulator etc.).

Solution is very simple and already in the SV Application Framework.



Summary:
DialupUT:- CCM Issue - When a really long message is sent by the host, the CCM layer sends an EOT and does not ACK

Description:
DialupUT:- CCM Issue - When a really long message is sent by the host, the CCM layer sends an EOT and does not ACK - CCM DialOnSend expiring during a message receive - DialOnSend timer should be reset as soon as the message STX is received and not when the Received message is acked.



Summary:
DialupUT : Ready 9/Bs not recognised when MACing is on.

Description:
DialupUT :  Ready 9/Bs not recognised when MACing is on whcih resulted in no CP messages being sent to the host.



Summary:
DialupUT : Transaction End did not drop the line

Description:
DialupUT :  During message on CP testing I have seen the line being left up. The terminal did call  transaction End but the line stayed up. I believe this may be due to incorrect bracketing at the terminal. i.e. too many transaction beings being called.



Summary:
DialupUT : Non-dailup related crash in SSDSSTATRESP.DLL seen a number of times during dialup UTS

Description:
DialupUT :   Non-dailup related crash in SSDSSTATRESP.DLL seen a number of times during dialup UTS.

Access violation crash seen on transction completion (close state)

It occurs in line 1362 of record.cpp within the routine SIRecord::Pop.  The deviceID and Reponse varaibles do not hold any value and cause the problem in the line "If ((DIG == DeviceID) && (SolUnsol == Response))

Looking at the caller - line 4626 in the case 0 branch of the switch no checking is made of the StackTop variable. This is done once further up the routine but it is never checked again - desipte a pop beng called a number of times.  The stackTop variable is NULL when this crash happens. I think the stackTop variables need to be checked everytime a pop is attempted.



Summary:
DialupUT : CCM Unsolicited error not being sent when line is up

Description:
DialupUT : CCM Issue - During a cash retract the line was still up and the unsolicited message was sent to CCM by the terminal. However it was not sent to the host by CMM (The line was up). Once the line had dropped due to the transaction completion. CCM diallup back up to send this unsolicited message



Summary:
DialupUT : CCM I'm alives not being sent to the host

Description:
DialupUT :  Under certain conditions I have seen messages being send to the CMM layer which do not get sent to the host. The most common of these is the I'm alives when offline. No dial takes place when they are sent but the terminal comes back online.

Also seen during ITR(OAR) testing with No Completion messages - The second transaction request appears in the debug log but it is not sent to the host. A susbsequent card capture unsol once the system timeouts is sent however ?



Summary:
DialupUT : Return to OOS after being in supervisor entry and exit following offline

Description:
DialupUT : If the terminal is in offline mode and supervisor mode is entered and exited the terminal returns to Out of service mode and not offline mode. 
Due to a potiential CCM issue where the I'm alive messages were not being sent this cause the terminal to remain Out of service and the terminal requred to be restarted. The non-sending of the messages was not picked up by the terminal so it did not go offline nor did it send anything to the host.



Summary:
DialupUT : EP Ready sent when should not have been

Description:
DialupUT : Quickly going in and out off supervisor causes a dial up to occur and a number of messages to be sent to the host.  An EP ready is being sent to the host incorrectly where there are more messages to send.



Summary:
Programmer's Reference is missing OpCode extension state in State Y.

Description:
G309666 from 2.06 - not in service pack. COnsider for 3.0 at CCB



Summary:
DialupUT : EP completion message sent to host when Completion messages was disabled

Description:
DialupUT : If completion messages are disabled and a transaction reply is rejected the following EP ready 9 is not supressed correctly.



Summary:
DialupUT : CCM - Some transaction timeout instantly

Description:
DialupUT : CCM - On some occasions I have seen transaction which timeout instantly. No messages are sent and the timeout exit is taken. This more often happens on the first transaction after power-up. 

Further investigation shows that despite doing a transaction begin the check on the state of communicates just prior to building the transaction request is failing i.e it is returning either Inoperable or Not-connectable. This is causing the transaction request state to take the Timeout state early.



Summary:
Test 5.6.1.15 - Application core closes when coming out of supervisor after clearing the BNA

Description:
G304383 on ANDC 2.06 not going in a service pack. Consider for 3.0 CCB.



Summary:
InitBNA script host does not clear properly and can cause hangs

Description:
G304371 from 2.06 not in service pack. Consider for CCB 3.0



Summary:
5.6.1.2 - Clr BNA function screen and journal output show wrong date / time.

Description:
G304198 from 2.06 not going in service pack. Consider for 3.0 at CCB.



Summary:
TI Sensor status when TI not present reported as spaces instead of 0

Description:
G304122 from 2.06 - IP not updated for service pack, info in release bulletin. 



Summary:
Path for coupon hardcoded and is not secure

Description:
path for coupon hardcoded to \40colfil - this is locked under APTRA security
needs to be under Program Files\NCR\Advancd NDC or via reg key setting.
The space in the path may cause an issue with the printer driver.
Need to change the 6n1628dc124 director in the script that copies the file and the storew that contains the filename



Summary:
DialupUT:- Smart Card Reader Variant not read in correctly for Dialup Smart Card Processing

Description:
DialupUT:- Smart Card Reader Variant not read in correctly for Dialup Smart Card Processing



Summary:
DialupUT:- Offline Boot - Power up message not sent instead get normal I'm Alive message once comms is up

Description:
DialupUT:- Offline Boot - Power up message not sent instead get normal I'm Alive message once comms is up



Summary:
DialupUT : CCM Sending of I'm Alives get stored and are only sent with next transacation dial up attempt.

Description:
DialupUT : CCM Sending of I'm Alives get stored and are only sent with the next transaction dial-up attempt.



Summary:
DialupUT : CCM If ATM sends EOT as host sends message to the terminal the line is dropped and then a redial is attempted to send a NAK

Description:
DialupUT : CCM If ATM sends EOT as host sends message to the terminal the line is dropped and then a redial is attempted to send a NAK. This redail should not take place.



Summary:
DialupUT :- CCMIssue - Prior to dropping the physical modem line the ATM should send an EOT character to the host.

Description:
Prior to dropping the physical modem line the ATM should send an EOT character to the host.  Currently the CCM layer is not sending this EOT.

CCM GR1t 309805



Summary:
DialupUT :- CCM - EOT received by Terminal is not normally an error

Description:
Currently an EOT received by the CCM layer is treated as an error condition. If received this will result in a CCM dail-up state change to NOT_CONNECTED which results in ANDC going offline. Additionally if any comms layer bracketing is outstanding (Transaction Begin or Session Begin without appropriate Transaction or Session End) and an EOT is received the CCM layer will additionally try to redial to establish the link.
 
This behaviour does not match NDC+ dial-up.
 
An EOT received is normally a valid condition which indicates to the terminal the host is about to physically drop the line. 
 
When this occurs I would expect the CCM layer to go back to a Connectable state and not attempt to re-establish the link. 
 
The exception to this is when an EOT is received within the <STX> and <ETX> characters which at the lowest level indicate the start and end of a message. 

CCM GR1T Reference - 309803




Summary:
DialupUT :- Need to do a Close Open in Close State if Last Transaction Status is a timeout since there maybe pending TREQs

Description:
DialupUT :- Need to do a Close Open in Close State if Last Transaction Status is a timeout since there maybe pending TREQs



Summary:
DialupUT:- CCM Issue - Double EOT on Disconnect CP

Description:
DialupUT:- CCM Issue - Double EOT on Disconnect CP - On a CP Message the Host will send an EOT which causes CCM to bring the line down. But before it does so CCM sends an EOT to the Host. This may confuse some hosts who do not expect ANYTHING after sending an EOT. Hence, in this case the EOT should be suppressed but should still be there for all other dial down cases



Summary:
DialupUT :- Suspected CCM Issue - If Session Begin followed by Session End, CCM Hangs

Description:
DialupUT :- Suspected CCM Issue - If Session Begin followed by Session End, CCM Hangs - This occurred when a Session Begin caused a dialup where the Dial had not yet completed but a Session End was called.



Summary:
DialupUT:- CCM recovers to connectable even though line is not connected - modify offline processing to compensate

Description:
DialupUT:- CCM recovers to connectable even though line is not connected - modify offline processing to compensate



Summary:
DialupUT:- Activity Timer should not result in a Close Open

Description:
DialupUT:- Activity Timer should not result in a Close Open



Summary:
Reserved Screen Retriever needs to handle ESC '%'

Description:
The reserved screen retriever (ApplicationCore/SUPUTILS) uses the '%' character to allow dynamic data to be replaced in reserved screen definitions.  This clashes with the print sequence ESC %, so the reserved screen retriever needs to recognise this and not remove the '%' from the string before returning the screen definition.



Summary:
Installation onto SST places files in wrong directory

Description:
When installing the service pack onto the SST, the destination of the binaries should be \ssds\dll, etc. and not in a subdirectory related to the SP number.



Summary:
Advance NDC 2.6.0 and 2.6.1 - AVIs displayed full screen

Description:
Based on Zubairs, Phils consultation
AVIs should be displayed unstretched as they are.
MPEGs should be displayed stretched full screen.
This functionality is now broken in the 2.6.x code base.



Summary:
Diebold IX: Test cash shows all good casettes but Terminal Commands show Fatal handler

Description:
where test cash is performed after removal/insertion of cassettes the result will show fatal cassettes UNTIL end exchange is performed
then the cassette status returns to OK and test cash passes.
However because of the missing event between Cassette NOVAL & OK the status of the cash unit in ANDC is not updated in the component of ANDC that deals with terminal commands/status messages. The test cash component is self contained so it does not update the ANDC system - only displays the result of test cash. 
 
to demonstrate

test. 1
remove/reinsert a cassette 
test cash = faulty cassette.
 
test 2
remove/reinsert a cassette 
enter / exit exchange mode (no need to add cash)
test cash = good cassette
 
test 3.
use XFS test tool
remove -> cassette missing event received
reinsert a cassette - > cassette no value event received
get cash unit info = cassette no value
start exchange / end exchange 
get cash unit info = good cassette (note no event for cassette NOVAL->OK)

ANDC only changes status on changed events.




Summary:
AA-NDC Author: Escape caused after build final OK

Description:
This was reported by the field under TAR 294653, but they simply wanted the workaround documented in the release bulletin.  GR1T raised in case we are able to update the Author to fix the issue:

AA-NDC 02.06.01 
XFS 04.01.00 

US PS kave reported a problem using the Author to make changes to the
suprervisor applicaiton. Afdter several changes they encountered a situation 
whereby they could perfomr a build final, and create an EXE file, but when
installed on an ATM, this would cause an escape. However, if they saved the
project, exited the author and re-entered with a diferent user Id, and redid 
the build final, the exe produced would work. 

Note: this may also work with the same ID, but not tested. 

Attempts to retry the isue have failed. 

The US are happy to use the workaround, but would like this to be documented 
in the AA-NDC documentation. See below for their comments. 



When I initially reported this problem back on January 16, I sent both a
version of authored sources that worked OK in the ATM, and a version that
system escaped. Looking back at my notes on this, it looks like the only
author change was a modification to use an assigner somewhere in the TCP/IP
enhancement area. My notes don't give any more specific detail. 

The steps I did at that time were as follows: 

Open the project 
Modify the code to use the Assigner worker 
Save the project using the same project name 
Perform Build Final - indicated Successful 
Exit the Author tool - Click 'Yes' to Save project 
Take binaries to ATM - System escape on power-up 

We have had ongoing issues with other author changes as well, so this
problem is not isolated to this particular change or version of authored
code. Either the ATM would system escape on power-up, or in a few cases the
ATM came up into supervisor OK but when we went in to test the changes, it
behaved as if the changes were never made. 

We were always using the RON user ID to make these changes. Attached is the
RON.USR file we had been using. 

You might want to try making a change to something, following the same basic 
steps I described above, to see if you can re-create this problem. 

We have found a way that seems to work around this problem. This workaround
has been successful on four consecutive occasions. 

Bring up project using RON 
Make author changes 
Save as new version 
Perform Build Final 
Exit the Author tool - Click 'Yes' to save project 
Bring up new version of project under a different user ID (We used CRAIG) 
Perform Build Final 
Exit Author tool - do not save 
The binaries created by the second Build Final worked OK in the ATM 




Summary:
Access violation in Application Core with incomplete Screen download ( Extension to TAR 286762 )

Description:
If a specific incomplete screen definition is sent to the ATM, then 
attempting to display this causes an access violation in the 
applicationcore. The condition is the string terminator characters being missed from a logo control sequence. 

While fixing this TAR 286762, we have noticed that the problem is not only with the logo numbers but in some other scenarios like pictures and all, application escapes. 

This area of code has to be reviewed or check for the kind of problems mentioned above





Summary:
Dialup UT:- Host header processing not done correctly - Appcore does not seem to recognise that host header processing required

Description:
Dialup UT:- Host header processing not done correctly - Appcore does not seem to recognise that host header processing required



Summary:
Product Version Number should not be held is persistant store

Description:
Currently the rpoduct version number returned by Terminal Commands is held in a persistant store.  This means that for the service packs, the version number is not update unless PMDATA is deleted, which loses the customer's download, etc.  The product should be updated such that the version information is populated at start of day & is not persistant.  

Suggestions from Stephen:
Current implementation issue could be overcome by getting the service pack to update the release number by writing to the CDI store - this could be done at start of day in any app that was updated.  This would only work if there were apps updated of course.  Could also update the value with script during install - or a wee simple app that writes the new updated version value back to the store.

Changing the value and releasing a new NDCDATA would still require a delete of PMDATA as you are creating a persistent store with a different default value, the system would mError because of this - not good.

Suggested solution:

The Startapps.vbs script already does something similar to this - it checks the same registry location to find out which version of XFS is installed.

The code can be plagiarised from there.

Euan.

_____________________________________________ 
From: 	Lawson, Richard  
Sent:	08 March 2005 08:49
To:	Glencross, Stephen; Paton, Elaine; Reid, Catherine Hill; Mathew, Bino; Turner, Peter; Spafford, Michael; Pattullo, Euan; Vesely, Jan; Duncan, Philip; Clenaghan, Colette; Yakub, Zubair
Subject:	RE: Minutes: ANDC 2.6.2 Release Bulletin Review

I understand this to be the Product ID store:

  CDIPStringStore ( idCurrVersion,         "idCurrVersion",         8,  "020601" ) , 

The best way is to write a script that runs at start of day to ask the aggregate inventory for the list of installed components. (not aggregates as they are not
guaranteed to be the factory ones) and look for the product and Service Pack.

This can be done via the AI COM interface (AX Script) , this reads the keys from the registry:

HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC Development\02.06.00
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC Service Pack\02.06.01
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\APTRA\Aggregate Installer\Inventory\Component\APTRA Advance NDC SST\02.06.00

It will be easy to populate the CDI from this. A default value can be used to indicate a problem ,this means an un-supportable installation :-)

A little effort but no need to ever do it again (I hope) an no clearing NVRAM each SP.

Richard.



Summary:
PIN Entry states do not handle no timeout case (ie. next state set to 255).

Description:
applies to state "B", "M" and "m".



Summary:
Author Build Final Fails with XFS 4.x.x  installed on development PC

Description:
Currently there is the restriction in ANDC 2.6.x that XFS 2.2.2 must be installed on development PC, due to coinflict in headers during the compilation process.  See attachment for e-mail trail.
Need to update build process for XFS 4.x.x



Summary:
DialupUT:- Disconnect Processing - Disonnect should be done within the Message Receiver Workgroup

Description:
DialupUT:- Disconnect Processing - Disonnect should be done within the Message Receiver Workgroup



Summary:
DialupUT - Disconnect Processing - Pending Disconnect results in a C04 

Description:
DialupUT - Disconnect Processing - Pending Disconnect results in a C04 



Summary:
Dialup UT - Disconnect Processing in Message Handlers should not process disconnect at all without first checking State

Description:
Dialup UT - Disconnect Processing in Message Handlers should not process disconnect at all without first checking State



Summary:
TAR 295019 Journal printer variant hardcoded to 1

Description:
same issue as TAR 289935 / G304235 for reciept



Summary:
Prior to dropping the physical modem line the ATM should send an EOT character to the host.

Description:
Prior to dropping the physical modem line the ATM should send an EOT character to the host.  Currently the CCM layer is not sending this EOT. This  is different from NDC+ and is causing the HostSim problems. It is expected that it will be flagged as an issue by real host system.  

 




Summary:
Currently an EOT received by the CCM layer is treated as an error condition

Description:
Currently an EOT received by the CCM layer is treated as an error condition. If received this will result in a CCM dail-up state change to NOT_CONNECTED which results in ANDC going offline. Additionally if any comms layer bracketing is outstanding (Transaction Begin or Session Begin without appropriate Transaction or Session End) and an EOT is received the CCM layer will additionally try to redial to establish the link. 
This behaviour does not match NDC+ dial-up. 
An EOT received is normally a valid condition which indicates to the terminal the host is about to physically drop the line.  
When this occurs the expectation is that the CCM layer to go back to a Connectable state and not attempt to re-establish the link. 
The exception to this is when an EOT is received within the <STX> and <ETX> characters which at the lowest level indicate the start and end of a message.  We need to determine if there are any other conditions within NDC+ under which an EOT is an error.
 




Summary:
The test failed for GRIT 304292 - ITS Update required

Description:
When testing the  GRIT 304292 ,there is no -41 error  in OOXFS log  as specified in the Test Spec.




Summary:
Reboot SV does not log any captured exception information

Description:
When an exception occurs, no logging occurs - even though the context of the exception is available.

There should be a minimum amount of logging that at least indicates the process that caused the exception.



Summary:
Dialup Unit Test:- ApplicationCore - MessageonCP - TransactionBegin has no NDC COmms ID Specified in workgroup

Description:
Dialup Unit Test:- ApplicationCore - MessageonCP - TransactionBegin has no NDC COmms ID Specified in workgroup



Summary:
TAR 294846 - AA-NDC hang after dispenser shutter jam.

Description:
Westpac, Australia
To be resolved



Summary:
Dialup Unit Test:- MessageonCP Caller incorrectly used in Message Processors - Should be Message received Caller

Description:
Dialup Unit Test:- MessageonCP Caller incorrectly used in Message Processors - Should be Message received Caller



Summary:
Pick up fix in IDC SP for DASH issue|

Description:
Read Card on Withdrawal command fails with a tcode of 81 if the previous command is a Power Off Smart Card command.
This issue is corrected in the imminent delivery for DASH software. This delivery will be the smart card speed up and includes the fix for this issue.
Our aim is to deliver into XFS 4.2 but I believe you are planning a build for 1/3/05 and we won't meet that. Is there a drop dead date for XFS 4.2 beyond 1st March?




Summary:
Programmer's Reference is missing OpCode extension state in State Y.

Description:
State Y - 8 FDK Selection State has two extension states.  OpCode and Language Selection.  OpCode has gone missing and the headers are slightly different for Lang State compared to how it was with 2.05 reference manual.



Summary:
Dialup Unit Test:- MessageonCP Processing - Received Message should not cause the line to come doen, only an expiry of the Timer should

Description:
Dialup Unit Test:- MessageonCP Processing - Received Message should not cause the line to come doen, only an expiry of the Timer should



Summary:
Dialup Unit test "Activity Timer 0" :- When Activity Timer is zero, default being taken, whereas zero should result in no Activity Timer

Description:
Dialup Unit test "Activity Timer 0" :- When Activity Timer is zero, default being taken, whereas zero should result in no Activity Timer



Summary:
 Required updates to  the UTS 445-0681139 Rev B after unit test

Description:

Updates requireda are:

Section  5.4.1 * GU7 - Step  8:  Need to check that the printed data is in upper case
Section  5.4.1 * GU8 -  Step 13 and Step 19 referenced screen should be 5.4.2.7 (not 5.4.2.4)
Section  5.4.1 * GU8 -  Step 35 * This step is not necessary as already at top level menu 
Section  5.4.1 * GU9  -  Steps 7,8,9  This screen will not be displayed as the defined Query Modem command is valid and  valid information will be returned




Summary:
Wincor.reg updates for ANDC 3.0

Description:
dont need IsButton as button on WNI CEN3.0 works as toggle.
SP alias names have been updated for CEN3

Cash Dispenser	CDM30
Card Reade		IDC30
Deposit 		DEP30
Receipt		PRR30
Journal		PRJ30
Sensor & Indicator	SIU30
Text Terminal 	TTU30
PinPad		PIN30
plus the others.... statement etc..




Summary:
update startapps.bat for andc 3.0 use

Description:
dont need to identify XFS as will be XFS4+ for ANDC 3.0 - all vendors currently start
SP at boot time also.



Summary:
When you select any option for the Modem Diagnostics Menu , ned to show return  key press on screen

Description:
There is no information displayed on the screen to select ent to return to the Modem Diagnostic screen



Summary:
CCM VISA2 Diagnostics tests print out just prints ok

Description:
you are left with a piece of paper with ok on it.  It would be better to display what is on screen. E.g screen heading & ok.  



Summary:
TAR 294247 - Application delay induced by unsolics from Receipt printer when paper out

Description:
NCR Peru
To be resolved



Summary:
Code Review Comments

Description:
Comments as in  \\sgbdun100\teams\aandc\code review\Dialup\DialupCodeReviewRFC246177 - 2.doc

Summarised below -

1	Stephen Peat	DialupHdr.cpp	362	Double negative on the Supervisor Entry and Exit checking. Use ¿==¿ instead of ¿!=¿ inside each check. 	
2	Richard	DialupHdr.cpp	548	getintval as bool	
3	Richard	
Ndcrecv.cpp	282 etc.	Are these hardcoded timers/callers to be used in Author work?
Very dangerous for module copies etc ..	
4	Richard	Ndcrecv.cpp	928	use > 0 for comparing using result of getintval as bool	as these are global functions.	
5	Richard	Ndcrecv.cpp	920	add comment that message type is also obtained	
6	Richard	Ndcrecv.cpp	976	EBCDIC not conditional on dialup as it is in ndcsend.cpp	
7	Richard	handler.cpp	1825	getintval as bool	
8	Richard	Exitsend.cpp		1.14 used but has missing TAR 1.15 on tip but has no dial up!	
9	Richard	AdvancdNDC.reg		Not in review	
10	Phil	Ndcrecv.cpp	278	¿CP message timer¿ what is CP?	
11	Phil	Ndcrecv.cpp	297	What does `clear down¿ mean?	
12	StephenG	DialupHdr.cpp	90	Magic strings ¿ not sure what these headers mean, also not clear that the magic number `8¿ below refers to the size of these headers.	
13	Phil	DialupHdr.cpp	99	Check that this works on the start of the incoming message and does not look for the string throughout all the message.	
14	StephenG	DialupHdr.cpp	99	Should use mString& references.	
15	Phil	DialupHdr.cpp	436	EXPLAIN CC MORE DETAIL - IN Header.	
16	StephenG	DialupHdr.cpp	152	Should use mString& references.	
17	StephenP	DialupHdr.cpp	186	¿BDG¿ Check all of these to see if they need to be active in the real world ,  i.e. loose the BDG(XXXXXXX);	
18	Stephen Peat	DialupHdr.cpp	362	I think it might be worth making this more configurable ¿ if we want to suppress new device messages in the future ¿ NDC+ might not have had to handle wacky BNA and CPM messages¿.	
19	Phil	DialupHdr.cpp	283	Simplify the logic within this routine CDialUpHeader::DetermineDialUpMessageType	
20	StephenG	DialupHdr.cpp	434	Need to call freeze(0) to stop a memory leak ¿ either that or delete the string returned (	
21	StephenG	DialupHdr.cpp	546	return GetIntVal(idDialUp) != 0;  - saves printout paper... :o) 	
22	StephenG	ndcrecv.cpp	282	Why match timer workers?  This could cause problems as the timer events are based on the component ID of the worker.  If the author worker starts picking up events based on the code worker it will lead to difficulties maintaining the internal status of each worker.	
23	StephenG	ndcrecv.cpp	913  	Is this still relevant for VPI Comms?? (Not really Dialup issue).	
24	StephenG	ndcrecv.cpp	966	Need to check the return value for this ¿ you could get caught out by late stop behaviour.	
25	StephenG	ndcrecv.cpp	913 to 
971	Move this to another private method - it breaks up the flow of the function and is dialup specific.  Create a new method 'ProcessDialUpHeader' or similar.	
26	StephenG	Msgident.cpp	177	IsUnsolicited(mString *statusfield) ¿ use mString&	
27	StephenG	Msgident.cpp	66	Is the default constructor likely to be used? See what QA C++ has to say about it¿	
28	StephenG	Msgident.cpp	285	Need to free this memory. 	
29	StephenG	Msgident.cpp	285	FindIndex is legacy do not need to use it 	
30	StephenG	Msgident.cpp	535	Header needs updated	
31	StephenG	Msgident.cpp	560	Check with NDC+ if the rest of msg is important for a NOOP	
32	StephenG	Handler.cpp	1805	change to procDisconnectdailup and reinstate procEnd.	
33	StephenG	Handler.cpp	2012	stop noop listener here - in other cases also	
34	StephenP	Handler.cpp	2031	Disconnect stop rather than noop	
35	StephenG 	Handler.cpp	General	Bad Idea to stop the handler at the end while waiting for the termination of the line. Better to allow it to continue in parallel with the rest of the processing.	




Summary:
Tidy Up the location of "static const char * MVAANDC_Key = = "SOFTWARE\\NCR\\Advance NDC";

Description:
Currently in ooxfs.h, however, CduConfiguration.h is using it.
Agreed with Stephen that this definition should be moved to a common header that both ooxfs.h and CduConfiguration.h is using.
Once done, the cduwnd.cpp file needs to be tidied up as well - it is now forced to use a duplicate of the  MVAANDC_Key definition (see GRIT 309304.
The best time for this change is before some IT rebuild of the whole system.



Summary:
TAR 280105 - Dual Mode H1 unsol is sent late after the journal is in a good state

Description:
Documentation update for release bulletin only. Should be in Service Pack release bulletin



Summary:
List all dormant Author User IDs in SP / 3.0 Release Bulletin

Description:
G304653, G304654, G304655 and G304658 from Service Pack gritbase, CCB 3/2/05 accepted for 3.0



Summary:
Support for Keyboard Update Definitions Required

Description:
G304276 from GRITs common. Stephen G is putting together a general solution.



Summary:
Worker class help for NDC DES Loader confusing

Description:
G304252 from GRITs common. CCB 3/2/05 Accepted for 3.0



Summary:
Error message returned when accessing help for NDC DES Loader

Description:
G304251 from GRITs common. CCB 3/2/05 Accepted for 3.0.



Summary:
Worker class CSH topics not found when Help accessed

Description:
G304234 in GRITs common. CCB 3/2/05 Accepted for 3.0



Summary:
BNA total counts initiallised to 94 instead of 0, so status msg has invalid data

Description:
G303805 from GRITs common. CCB 3/2/05 - Accepted for 3.0. Mike Spafford knows the fix for this.



Summary:
mError case - encryptor initialisation failure on EPPE

Description:
G303789 from Grit common - accept for 3.0. Need to test as part of EPP development in 3.0



Summary:
Help for Reserved Screen Retriever does not make any reference to the Screen Data Workgroup

Description:
G303258 from GRITs common. Accepted at CCB 3/2/05 for 3.0



Summary:
The BNA MEI OUT does not flash when notes rejected.

Description:
G303121 from GRITs common accepted at CCB 3/2/05 for 3.0.



Summary:
BNA Scenario - Press Cancel immediatley before note insertion - error screen shown

Description:
G303120 from GRITs common. Accepted at CCB 3/2/05 for release 3.0.
Change to author script required.



Summary:
Path for coupon hardcoded and is not secure

Description:
Change in ANDC 2.6.2 to be integrated into ANDC 3.0



Summary:
TAR 294212 - AA-NDC 02.06.01 - PCX files appear zoomed if different picture file sizes used

Description:
wrapper for this TAR for 2.6.2



Summary:
Include GIF Licence key in product

Description:
Include GIF Licence key in product.
Previously access to GIF support was via licence key which was shipped via separate PID - this is no longer required.  This request is to include the licence key information in the product, thus automatically enabling it for customers.  See attachement for more details.



Summary:
OOXFS: Not all TTU errors are logged in DebugLog

Description:
A previous GRIT fix (236505) removed all TTU logging for commands which succeeded due to excessive logging when fault display is being used.  However, this fix also removed the logging of some error conditions.  Specifically those which returned a bad hr from the AsyncExecute method.



Summary:
Diebold Ix - counters not updated during test cash - duplicate casettes

Description:
where two casettes of the same type are installed the cash counters are not updated during test cash. Notes purged ok from each casette. Transaction counts OK although the missing rejected count is never added.



Summary:
TAR 293873 - AA-NDC hangs if Display and Print requested after a partial dispense

Description:
Paynet, Kenya
To be resolved



Summary:
DASH - timer 72 not validated

Description:
Test 5.4 .The validation of Timer 72 had been missed from the implementation.  It was then seen that at a lower level the value sent in the configuration message was converted from 800 millisecond units to the equivalent in 1 second units.  For this reason the validation of the timer had to be modified to check for a maximum limit of 255 * 800 milliseconds, this equals 204 seconds.



Summary:
DASH - terminal commands not reporting fatal/suspend conditions

Description:
The terminal commands were not reporting the fake suspend and fatal condition related to the DASH reader.  This was found to be due to there being two different statcust objects.  The first existed for the Customisatioin Layer, the second for the Applicatoin Core.  The fake fatal conditions were set in the Customisation Layer version of Stat Cust but not in the Application Core Version of Stat Cust.  The terminal commands are processed in the application core using the application cores version of the stat cust module.  Hence the fatal condition wasn't being reported.  As it is known that the terminal status commands are only processed when the application is not in a transaction.  For a DASH reader only, if a card is present when the terminal command messages are sent then the device will report the fatal condition.  This issue took 1 day to solve.



Summary:
DASH - suspend unsol not being sent by DASH code

Description:
At this point it was possible to set the CardUnitMapping aSeverity member variable to 3 which is suspend.  The issue now was to get the device status message to be sent to the host reliably.  After some discussion it was decided that the device status message should be sent from the authored application.



Summary:
DASH - not going into Suspend when card left in reader

Description:
The second issue was capturing the scenario when a card is left in the reader after an eject.  Due to the difference in nature of the DASH reader at the StatCust level there were no suitable events that could be monitored to indicate this situation, for this reason it was not possible to update the status of the device for this suspend condition.  The service provider doesn't report any errors in this situation either.  A solution was found by looking at VC++ debug environment, It was then seen that a completetion event was sent for the cancel of the eject command but only at the mMVIDCardUnit level.  To solve the problem this event is monitored for in mMVIDCardUnit::ProcessEvent procedure, then a device status refresh in statcust module is forced at the point where the eject card is cancelled due to a time out.  At this point if the card is still present in the reader and an eject has been cancelled the device is sent into a fake suspend condition.  The above two problems took 8 days to solve.  



Summary:
DASH - device not going fatal at the correct time

Description:
The first issue was knowing when to send the device into a fatal condition as the IDCardUnit service provider never reports errors on the device.  After some investigation the best solution was to send the device fatal whenever a WFS_CMD_IDC_RETAIN_CARD is submitted and there is a card present in the reader.  This works because the DASH reader cannot retain a card and hence the eject has failed and the DASH reader effectively has a card jammed in the reader. 



Summary:
TAR 288724 - Journal backup H8 status messages dont contain correct replenishment data

Description:
Related to TAR 279367 - requires the fix for this plus possibly more work. Fix already in 2.6 for this will need to be implemented and more.



Summary:
TAR 292169 - Further details about RebootSV application required to be documented

Description:
NCR Czech Republic
To be resolved



Summary:
Singleton code should not be included in the VPIVisa2COMWrapperCommsService Class, but should be included in Visa2CommsService Class.

Description:
For a neater and more correct design, the code for enforcing the singleton property of the VISA2CommunicationsService should be placed in the Visa2CommsService class and not the VPIVisa2COMWrapperCommsService class.



Summary:
Worker Find Dialog Causes Exception

Description:
When performing many searches through the Find DIalog, the Author Crashes in the Display Code.



Summary:
TAR 293743 - Comms recovery with 02.06.00 is different due to default settings

Description:
NCR Peru
To be resolved



Summary:
Timestamp restored on save

Description:
When changing a component in the workspace and also in a catalog, the timestamp in the UPD is updated to the correct time.  When the project is saved and the workspace restored all updates are maintained - except the correct timestamp.

Workaround at the moment it to close all workspaces before saving.

Needs fixed in order for service pack releases/TAR fixes etc. to be merged correctly.



Summary:
DialOnSendTimer expiry causes exception if VISA2CommunicationsServiceis disposed whilst comms in progress.

Description:
Investigation shows that a Windows timer creates a Windows event when
it expires.  There is therefore a window between the event being raised
and the callback occurring, during which the service could be disposed
(which would dispose of all of the objects with which the timer expiry
handler could interact).  Timer.TimerTick should only call the
registered callback if the timer is not disposed.



Summary:
Include PD template in CCM VISA2 aggregate

Description:
Create specific CCM VISA2 template to be include in out Aggregate



Summary:
GetConf not responding when sent after receiving Suspend Message

Description:
Integrate from SP2 



Summary:
Update Version number reported for 2.6.2

Description:
Terminal commands needs to be updated to 2.6.2.
Version information in the author projects/debug log need to be updated to 2.6.2



Summary:
Release Bulletin Updates for ANDC 2.6.2

Description:
Update the release bulletin for 2.6.2 with fixed & outstanding defects adn updated user information.

Ensure that that the reserved author IDs file is installed to the development PC as per section 4.13.2



Summary:
Track SIU SP GRIT 308529 progress

Description:
The issue was raised by Catherine in GRIT 304292.  As that GRIT also referred to TAR 290959 this GRIT has been opened to track progress of this particular issue (which is going back to Supervisor after having done a previous Diagnostics exit with Mode Switch in Normal causes a hang).



Summary:
TAR 235964 - No control sequences to change language & colours in supervisor menus

Description:
Integrate 2.x TAR.
Solution has been verified by customer.




Summary:
TAR 289935 - Receipt Printer variant reported incorrectly in AA-NDC 02.06.00 

Description:
G304235 from SP1



Summary:
TAR 289536 - App hang during ITR transaction if Promote installed

Description:
G304135 from Sp1



Summary:
TAR 289126 - After the screen update GIS receives Ready-9 but ATM does not go to GIS

Description:
GRIT 304124 from SP1



Summary:
TAR 253977 - Screens in idle loop when form feed used on nested screen and host screen.

Description:
G302430 from SP1 integrated by Jan



Summary:
Screen Flicker during PIN entry

Description:
GRIT 303690 from SP1



Summary:
TAR 286662 - After setting Message Format to 0 Keepalive cannot be changed

Description:
No GRIT - change done for SP1



Summary:
TAR 259881 - Cannot handle state flow straight to card read state

Description:
G302431 from SP1 integrated by Jan



Summary:
TAR 248389 - Card Bin/Deposit Bin Status coming back as space if Message Mode option 6c is set to on

Description:
G302429 from SP1



Summary:
TAR 285665 - Multiple LF/CR/FF should consolidate to single CR on Journal

Description:
G302888 from SP1



Summary:
TAR 285347-Journal Backup messages not logged to PD trace

Description:
G302638 from SP1



Summary:
NDC Data Collector Needs To Support ADE Display Echo Workers

Description:
The initial version of the NDC Data Collector only integrated with the NDC Display.

An update is needed to allow the Front Echo worker to be used also.



Summary:
TAR 238458 - Default PPD print always prints 2 characters

Description:
G302468 integrated from SP1



Summary:
TAR 279637 - Fix for TAR 266677 introduces issue with M-Status and M-Data reporting

Description:
G302453 integrated from SP1, also includes another TAR fix - see 302453



Summary:
TAR 278457 - A-NDC: Default XP mouse pointer visible when displaying MPEGs

Description:
Integrate G302445 from SP1



Summary:
TAR 292833 - With EMV/Exits installed, refelected messages are not converted to EBCDIC

Description:
To be resolved



Summary:
TAR 292828 - Blank screen in Idle loop following display of pcx files then mpg files

Description:
To be resolved



Summary:
TAR 291617 - Incorrect FDK code in opcode buffer when FDK on left hand side, State E, FDK F

Description:
USPS
To be resolved



Summary:
TAR 290995 - Sideways Printing should allow for up to 80 columns

Description:
USPS
To be resolved



Summary:
TAR 290452 - C00 screen doesn"t apply language offset

Description:
Ceska
TO be resolved



Summary:
TAR 290192 - Cancel not actioned during Print Statement & Wait on Statement print

Description:
USPS
TO be resolved



Summary:
TAR 290055 - Print Statement and Wait is not waiting for sideways printing.

Description:
USPS
To be resolved



Summary:
TAR 290055 - Print Statement and Wait is not waiting for sideways printing.

Description:
USPS
To be resolved



Summary:
TAR 290044 - Cancel not actioned during Print Statement & Wait function

Description:
USPS
To be resolved



Summary:
TAR 289534 - Solicited Status Messages for EMV/CAM2 exit command rejects are not MACed

Description:
To be integrated




Summary:
TAR 287923 - C03 command reject sent if OOS sent immediately after card entry

Description:
To be integrated




Summary:
TAR 286215 - BNA Initialised message returned too quickly.

Description:
HSBC
To be resolved



Summary:
TAR 286066 - Extra suspend msg generated after MCRW suspend mode is exited

Description:
HSBC
To be integrated




Summary:
TAR 285945 - AA-NDC with EMV/CAM2 : Escape when extra VC referenced in Vccont file.

Description:
HSBC
To be integrated



Summary:
TAR 285862 - AA-NDC: NDC Screen Displayer shows flicker in vanilla AA-NDC 02.05.00

Description:
HSBC
To be resolved



Summary:
TAR 282490 - Occasionally an unsolicited event is journalled as a solicited event

Description:
HSBC
To be integrated



Summary:
TAR 280681 - Statement printer is not reported as Fatal when paper still present

Description:
HSBC
To be resolved



Summary:
TAR 280376 - Two specific command rejects recorded in journal when one sent to host.

Description:
To be integrated
Transeferred to Bindu to integrate in 2.6.4



Summary:
TAR 286370 - Card Before Cash transaction reply prints additional unexpected receipts

Description:
Integrate GRIT from SP1



Summary:
TAR 253977 - Screens in idle loop when form feed used on nested screen and host screen.

Description:
GRIT from Service Pack 1 already integrated by Jan.



Summary:
TAR 280036/ 279273 -Print Immediate Transaction Reply incorrectly rejected when OOS with MACing

Description:
Fix already integrated by Mike when TAR/TIR applied. No corresponding GRIT in AANDC 2.6.1



Summary:
TAR 274686 - Card Capture Print should not be hard coded

Description:
Integrate GRIT from SP1



Summary:
G303282 -Unhandled Exception in ssdsNDCPRINT.DLL in 2.06 on Sneezy - delivery

Description:
GRIT fix already in main trunk when delivered for SP1. Printinit.cpp version 1.4 contains fix integrated by Jan



Summary:
TAR 290604 - AA-NDC: Operator Key worker now unable to handle FDKs 

Description:
Need to restore functionality with CEN3.



Summary:
TAR 290326:  No support for FDK 7 and 8 ( Dand F) on operator panel

Description:
The problems reported by the customer have arisen as a result of moving the operator keyboard support from ADI2 to CEN XFS 2 interface.  The limitations of CEN XFS 2 have resulted in the restricted functionality being provided as part of ANDC 2.6.0.

We can provide a restricted solution for the customer, but only for the Cardholder Keyboard.  We cannot provide a solution for the EOP until Advance NDC migrates to the CEN XFS 3 interface.  Migration to CEN XFS 3 is planned for Advance NDC 3.0The customer does require this for the EOP:
For these supervisor functions, the customer will do it on EOP. Thus, we need a solution which should work on EOP as well. As the machines that we are going to use is UX2-GBRU/GBNA, and the front panel (including LCD, numeric keypad and FDKs) are lifted up while Replenish functions are being performed. Thus, it's not practical to have to do all these on cardholder keyboard only.




Summary:
TAR 279367 - C-Exit Extended Group Parameters 4 and 5 cannot be read.

Description:
TAR was carried for 2.06. The local workaround employed was as follows - Create the NEXT STATE that will read state data ext. 4 and 5 (accessed as ext. 1 and 2) and store the information 
locally, before calling state that use all extension states (1 to 5).





Summary:
TAR 276470 - Cassette Fatal Mstatus message different from 02.05.

Description:
PS in the Netherlands have conducted some limited status message comparison tests. One of the differences they have noticed is that AANDC 3.0 MV IT12 message is different from 02.05 for fatal cassettes.

Test Procedure.
Using type 1 cassette only with 10 notes.
perform txn, dispense 5 notes, card before cash
perform txn, dispense 5 notes, card before cash again (no notes left in type 
1 cass)
perform txn, dispense 5 notes, card before cash again

diagnostic message = 22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E400000000[Unicode-x1C]04000[Unicode-x1C]0401120300000000002000[Unicode-x1C]13000
04000 - indicating that type 1 is fatal

perform txn, dispense 5 notes, card before cash again

diagnostic message =
22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E400000000[Unicode-x1C]04000[Unicode-x1C]03[Unicode-x1C]13000

03 - indicates a pick failure. On 02.05 however, and 3.0 SV, the diagnostic mstatus is 10 - "operation not attempted because the dispenser or a cassette 
is fatal from a previous operation"

02.05 diagnostic message
22[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]8[Unicode-x1C]E400000000[Unicode-x1C]04000[Unicode-x1C]10[Unicode-x1C]13000




Summary:
TAR 276326 -  Entering key mode 4 results in Initialisation failure

Description:
This issue will be resolved by Srinivas' security development. GRIT raised to track TAR only



Summary:
TAR RFC 275530 - Documentation required on clearing NVRAM remotely

Description:
To be considered for next 3.0 CCB.
Customer requires to be able to clear NVRAM remotely. This can be accomplished by removing the PMData directory, but it cannot be performed when the applications are running (process CMMAP appears to be the cause of the issue).  The requirement is for a documented procedure to allow application NVRAM to be cleared so that an SM installation can complete and NVRAM changes are
effective remotely.



Summary:
CCM VISA2 - New CommsInterfaces DLL results in Sends and Receives having incorrect data 

Description:
Compiled code against the new interfaces dll and now the sends and receives get actioned but have the incorrect data.



Summary:
Fixed Array size in DeviceStatus.cpp could call mError

Description:
problem is in cDeviceStatusManager::UpdateActionList the command UlyDevQueryActions can return more than 20 actionIds therefore setting the status to ULYERR_BUFFER_TOO_SMALL and causing an mError. This is bad. if the command returns ULYERR_BUFFER_TOO_SMALL
 we can use a dynamic array and set the number of elements to NumActions (which returns the correct number of actions) and send the command again. If the command fails a second time - then we can mError.



Summary:
Cash Presenter worker does not deactivate its Doer sub-workgroup

Description:
G302999 from SP1, need to look at this as part of Spray development.
It is only problem in the SVCashPresenter.cpp and only on Spray.



Summary:
Update CduWindow & CduLib for mutex update

Description:
G302645 from SP1 applied by Jan to 3.0 dev path



Summary:
TAR 281151 - AA-NDC fails to process NotesInserted event from BNA and then hangs

Description:
3.0 version of G302458 from SP1



Summary:
BNA2 - Cannot Retract invalid notes

Description:
It does not retract the invalid notes rather we get hardware error which gives BNA fitness=4 

 




Summary:
Exits white paper embedded in APTRAca10.chm

Description:
The Exits white paper is correctly available as an external HTML file, linked to from APTRAca10.chm. Using the Search tab for NDC Exits reveals that an incorrect version of the white paper is also available within the CHM.



Summary:
Journal Unsol for device not present is not being displayed

Description:
If there is no journal printer connected to the SST and a journal print message is sent then the application should send and unsol to the host with a device status of H2 - device not connected. This message is not getting sent to the host.

Note: If receipt is not connected when message is sent to print to the receipt the device will return a G2 unsol.



Summary:
Support for Keyboard Update Definitions Required

Description:
Although the development of the NDC Data Collector seemed to help the Australian development of their AFA solution, they had to develop a lot of additional Authored work in order to meet the Customer requirements.  This stems from the fact that we no longer support NDC Keyboard definitions.  During phase 1* we dropped support for this as we knew the XFS keyboard management would not be able to fully support downloadable keyboards.  This is still case.  However it should be possible to provide some additional functionality to allow the keyboard definition to be specified by some external source.

If this was implemented it would allow Australia (and the U.S.) to implement their AFA solution with less impact on maintenance in the future (i.e. a quicker turn around for patch releases).  This would also help alleviate any further customer problems (i.e. the U.S. and Greece) that may occur by not supporting this NDC feature by at least providing an alternative solution.




Summary:
Spray Dispenser power fail during dispense - purge counts not updated

Description:
When a power failure occurs during dispense on a Spray dispenser, it causes a partial dispense. On next power up, the notes that were picked from the cassette(s), but not dispensed to customer, will be retracted to the purge bin. The local Advance NDC cash counters will report these purged notes as if they were still in cassette(s). The notes dispensed are reported correctly.
Advance NDC uses READ_DISPENSE_COUNTS on power up, however this call does not report purge counts on the spray due to 5070 emulation. This emulation needs to be switched off prior to sending READ_DISPENSE_COUNTS.



Summary:
TAR 291500 -  Electronic journal file cannot be used to accurately recreate txn data

Description:
USPS
To be resolved



Summary:
TAR 291384 - Application appears to hang when no PCCM connection has been made

Description:
Westpac Australia
To be resolved



Summary:
TAR 290078 - TVN/MAC specific command rejects not included in message.

Description:
Saudi American Bank
To be resolved.



Summary:
TAR 265955 - avi will not be repositioned via screen download until after reset

Description:
To be integrated



Summary:
TAR 273332 -  Debug required for EJ loss issue

Description:
To be integrated



Summary:
TAR 264331 - AA-NDC reads all 3 tracks on card even if only 2 present.

Description:
To be integrated



Summary:
test defect  please ignore

Description:
test defect  please ignore



Summary:
COM Out-Of-Process Server should not throw exceptions in constructor.

Description:
When an error or exception is caused withing the body of the COM Server constructor, the COM Server shoud still retrurn normally, and not pass exceptions to the calling application.



Summary:
MessageReceived event parameter is not marshaled correctly across the .NET/COM boundary.

Description:
When a MessageReceived event is fired from the COM Interop Module, a C++ application can receive the event, but the actual message, passed as parameter, is not marshaled correctlty, causing the message to be garbage.



Summary:
Change to Reset the DialOnSendTimer on a Message Received Event

Description:
ANDC application requires the DialOnSendTimer to be reset on a Message Received Event, due to the fact that it can receive commands that indicate more data is going to arrive, this therefore means keep the connection open until I have stopped sending data.  At present the functionality resets the DialOnSendTimer only on SEND's and so would disconnect after the timer expires not knowing more data was expected.  Therefore the DialOnSendTimer should be reset after each Message Received Event.



Summary:
ooxfs.h for AANDC 3.0 needs to reference xfsvdm.h rather than ncrvdm.h - but an analysis needs to be done

Description:
ooxfs.h for AANDC 3.0 needs to reference xfsvdm.h rather than ncrvdm.h - but an analysis needs to be done



Summary:
TAR 291487:  Application Core escape if >20 devices on ATM

Description:
GRIT raised to track TAR



Summary:
Wrong date displayed on licensing screen during installation

Description:
Service Pack 2.06.01
Licence agreement screen shows "Copyright NCR Corporation 2002 - 2004" - should be 2005



Summary:
Journal Unsol for device not present is not being displayed

Description:
If there is no journal printer connected to the SST and a journal print message is sent then the application should send and unsol to the host with a device status of H2 - device not connected. This message is not getting sent to the host.

Note: If receipt is not connected when message is sent to print to the receipt the device will return a G2 unsol.



Summary:
Diagnostics Task design/functionality does not provide the necessary resource management capability and module reusability

Description:
Diagnostics Task design/functionality will be changes to now support/implement resource management for the CommsLink, modem and comport resources required to provide the diagnostics capability.  The design change will allso meet the design requirements reuability by the APTRA Supervisor application, currently being developed



Summary:
Test 5.6.1.15 - Application core closes when coming out of supervisor after clearing the BNA

Description:
Found by Hyderabad.  Logs attached.  Steps to recreate follow:

From:	Gavarasana, Hima
Sent:	Wednesday, January 19, 2005 11:52 AM
To:	Kondoju, Srinivasa
Subject:	Steps for recreating the problem of Application Core Crash 
Hi Srinivas,

The following are the steps to be followed to recreate the problem of Application Core Crash when 
system application is run by selecting diagnostics(7) in Supervisor menu.

¿	Run Debug Log,Application Core,Customization Layer and Supervisor Applications and NDC Host Simulator.
¿	Open BNA_Test message file from NDC Host Simulator.
¿	Send OOS to GIS (inclusive) from NDC Host Simulator
¿	Insert card,Enter PIN,select Deposit Transaction when prompted
¿	Insert Bad Note
¿	Bad Note will be rejected,Do not take the note
¿	Let the Please Remove Notes screen timeout
¿	BNA goes fatal and Hardware error screen is displayed
¿	Do not remove the note
¿	Idle screen comes
¿	Go to Supervisor Mode
¿	Select 4(Replenish)and then select 54(INIT BNA)
¿	Initialization fails since still there is a note at throat
¿	Now select 7(Diagnostics) from supervisor menu
¿	Try to initialize BNA from system appliacation¿
¿	Try to exit from system application¿.sometimes application core crashes at this point(if not here)
¿	Select 4(Replenish) and then 54(init BNA)¿sometimes application core crashes here

  Sometimes when tried to recreate the above problem the system restarts.

Regards, 
Bindu






Summary:
5.6.1.16 BNA Close State - leave notes scenario sends bad message

Description:
The "Leave Notes in Escrow" scenario in the BNA Close State does not send up the status number with the status message ie. instead of w3 message it just sends w followed by the note counts.  This can have a knock-on effect of refunding the notes to the next customer.



Summary:
XFS Manager not installing dll updates to target pc

Description:
XFS Man looks like it installs correctly but hasn't delivered the updated dlls to the target



Summary:
XFS Manager Component does not upgrade

Description:
Attempting to install XFS Manager 02.09.04 on top on XFS 2.2.2 (which contains XFS Manager 02.09.03) does not update the run-time software.  Update attempted with ANDC 2.6.1 to provide fix for TAR 284673.  

Review of comp.ini shows that should be updated to replace VOMUS with VAMUS.



Summary:
ITS - BNA Tests - State clearly that BNA driver timeout needs to be set

Description:
See whilst running tests 5.4.20.3 & 5.6.1.11.  The BNA Driver timeout needs to be greater than the application timeout to get the correct result.  Although stated, this set-up step has been overlooked and needs to be highlighted more.



Summary:
IT5 Dev PC - Customisation layer files are read only.

Description:
the files customistation layer files objects.dat and object.idx are read only. Opening the customisation layer in the author will fail with an internal error.

Files should not be read only



Summary:
Test 5.6.1.15 - BNA refund tests. Close State scenario sends bad msg.

Description:
When notes are refunded in the Close State and they are not taken a w4 msg should be sent to the host.  The msg is sent but it is missing the 4.



Summary:
TAR 290959 - Supervisor mErroron exit from Diagnostics

Description:
IT4 Build.  Steps 7&8 (leaving diagnostics and supervisor at the same time) were successful when returning to OOS and going back into supervisor.  Sending a GIS when OOS then flicking the mode switch to get back into supervisor caused and hang.  The statement printer at this point was fatal and when the GIS was sent, the fatal unsolicited was sent to NDCHost.
Repeating this test with a good statement resulted in the successful return to supervisor then diagnostics where it failed before but a Supervisor mError when leaving diagnostics and flicking the mode switch).

This has now been reported under TAR 290959.



Summary:
Fix for TAR 287439 has broken GR1T 244430

Description:
Found during IT4 testing.  B11 reject message no longer being sent when fix for TAR 287439 is applied



Summary:
Results of SP unit test

Description:
1. sp1 component has add/remove entry on NT
2. release bullet delivered with SP1
3. userfuns.scr not delivered
4. silent.bat missing from Unit Test files 
5. custom.ini specifies NDCSP instead of CustRun
6. custom.ini requires filename in target
7. Aggregate in add remove programs shows SP1 & SP2 
8.  Sp installed on 2.05 because support files is now a runtime dependency.

full results.

5.3.4 - date is 2004
5.3.5 - -sp1 component has add/remove entry on NT (known issue with agg installer)
5.3.6 -- release bullet delivered with SP1
         -- userfuns.scr not delivered
5.3.7 --release bullet delivered with SP1
         -- userfuns.scr not delivered
5.3.8 -- OK
5.3.9 -- OK
5.3.10   -- silent.bat missing from Unit Test files 
	-- custom.ini specifies NDCSP instead of CustRun
	-- custom.ini requires filename in target
5.3.11 -- ok 
5.3.14 -- ok
5.3.13 -- Aggregate in add remove programs shows SP1 & SP2 
5.3.16 -- OK
5.3.17 -- OK
5.3.12 -- OK
5.3.15 -- Sp installed on 2.05 because support files is now a runtime dependency.



Summary:
Worker class help for NDC DES Loader confusing

Description:
Help correctly indicates that NDC DES Loader is supported but the help topic says the worker depends on the EKC being set up with the same key spaces as in NDC+, but the EKC is not supported.



Summary:
Error message returned when accessing help for NDC DES Loader

Description:
Error message 129 ("The topic does not exist. Contact your application vendor for an updated help file")generated when selecting the Help button in the Worker Settings. (This occurs on Windows XP - Application Core Help H10045)



Summary:
TAR 289935 - Receipt Printer reports incorrectly in AA-NDC 02.06.00

Description:
To be resolved for 2.6.1



Summary:
TAR 289951 - AANDC 2.6: Variable results with EJupload - either hangs or continually loops

Description:
Problem that ATM stops processing messages when continuous EJ upload & download happen together (sometimes).



Summary:
Support rear settlement when DAPI1 is present, not with DAPI7

Description:
Support rear settlement without possibility of storing clear PIN in encryptor or using PIN key to encrypt the PIN. DAPI7 will not allow the PIN to be entered through the rear keyboard, need to differentiate between DAPI1 and 7.



Summary:
TAR 289536 - AA-NDC 2.06: App hang during ITR transaction if Promote installed

Description:
wrapper for the TAR to go into 2.6.1

Further investigation has revealed that the problem shows only on an XP system. The bug in the code is older than 2.6.0 and would probably show in earlier releases of Advance NDC if ran on XP.



Summary:
TAR 289126 - After screen update GIS receives Ready9 but ATM does not GIS

Description:
To be resolved



Summary:
AANDC should provide local fault information on the Operator Display on both NCR and another vendor's H/W

Description:
Req Id 31.1. The MV NDC solution should provide local fault information on the Operator Display on both NCR another vendor's H/W, in order to alert the branch staff to error conditions on the unit. The fault information displayed should be the same across the NCR unit and the other vendor's h/w where possible to provide the branch staff and or help desk with consistent information regardless of ATM vendor.



Summary:
Include PS in Integration Testing.

Description:
Req Id 26.4



Summary:
Detailed comparison of AANDC ADI2 vs AANDC XFS for transaction statuses

Description:
Req Id 26.3



Summary:
Target error rate is one low priority defect (1 on GRIT, 3 on TAR) outstanding per 20,000 lines of code 

Description:
Target error rate for certification and release of this product is a maximum outstanding defect rate of one low priority defect (1 on GRIT, 3 on TAR) outstanding per 20,000 lines of code



Summary:
EMV support for the Smart/DIP reader as per NDC+ 7.01

Description:
Req Id 11.62. DASH EMV support to XFS



Summary:
TCP/IP Recon Close value becomes negative when Msg Format changed

Description:
Spotted while running test 5.4.28.1 & 2 although not specifically part of this test.

If a large value is entered for the Recon Close (9) setting (e.g. 10000000) in the advanced TCP/IP config menu and then the Msg Format (1) is changed (e.g. from 0 to 3 or 3 to 0) then on re-examining this value it has become negative. Not sure if this is ok or not



Summary:
5.6.1.6 BNA Note Definition test fails due to configuration issue

Description:
Investigate better way to test this functionality.



Summary:
Same minimum system resources as is required for APTRA XFS 4.2

Description:
Req Id 24.1



Summary:
All functionality not converted to XFS must run on NCR h/w

Description:
Req. Id 15.1. As the XFS functionality is introduced, any native functionality within AANDC which has not yet been converted to XFS must still be offered on NCR H/W. Where exceptions exist, compared to AANDC, these must be documented, e.g. CPM.
CPM is not an exception, it can be offered on NCR h/w and will be configurable



Summary:
Test case 5.4.20.2 on BNA2 : doesnot display hardware malfunction after note hold at throat

Description:
In step 6 : when one note entered hold on to it until the BNA stops attempting to retract it or returns it. 
Step 7-> hardware malfunction screen should be displayed but it stays back in the same screen(first it is ,please remove note screen then extra time screen) until the note is taken out. Once the notes are taken out it will go in to cash acceptance state again. It takes the notes in but it doesn't seems processing the notes. Again it keeps on asking for enter notes. 



Summary:
Test Case 5.6.2.2 : CPM transaction doesnot show the cheque image

Description:
While doing the CPM Transaction, Test case says cheque image should be displayed but it doesnot display the image. Debug log says cheque image on display.



Summary:
AANDC Txn times on other vendor SSTs must be as good as on NCR h/w

Description:
Req Id 17.2.If transaction times on another Vendor's hardware are worse than transaction times on equivalent NCR H/W, any delay should not be attributable to the MV NDC application. 



Summary:
Txn times equivalent or within 10% of SV AANDC txn times.

Description:
Req Id 17.1.The goal is that all transaction times should be the same as the equivalent SV 2.06 AANDC transaction times. If it is not possible to match those times, all MV transactions must be within 10% of the existing SV AANDC transaction times on NCR H/W



Summary:
Include CCM-VISAII (Dialup) in AANDC installation CD

Description:
Req Id 16.5. Will be part of the AANDC aggregate.



Summary:
Package SNMP Agent with MV NDC

Description:
Req Id 16.1



Summary:
Keep encryption keys going from AANDC 2.6 to 3.0

Description:
Req Id 15.3. It should not be necessary to reenter encryption keys when migrating from AANDC 2.6 to 3.0.



Summary:
Test AANDC 3.0 with latest SNMP Agent.

Description:
Req Id 13.24 - test with latest available component



Summary:
Support Author on XP

Description:
Req Id 13.17. Some issues running author on XP, these will need to be found and documented. 



Summary:
Certify with CEN 3.0 XFS compliant interface on NCR SSTs.

Description:
Req Id 13.12.AANDC will be certified with XFS 4.2 which is CEN XFS 3.3 compliant. It may also be able to run on CEN XFS 3.0, 3.1 and 3.2



Summary:
The MV NDC solution supports the Windows XP O/S with SP2

Description:
Req Id 13.6. The NT operating system is not supported. XP service pack 2 will also be supported.



Summary:
AANDC 3.00 should run on a number of SST types 

Description:
The MV NDC solution should run on the following ATM types: 530x, 5362 (EP62), 567X, 568x, 587x, 588x, 6674 (UX2), 6676 (UX4). Exclusions are 5303, 5305-55xx (EP55), 5682, 5840, 5878. 



Summary:
MV NDC solution should operate in the same way on NCR H/W, and other CEN XFS compliant vendors H/W

Description:
Req Id 13.1.The MV NDC solution should operate in the same way on NCR H/W, and other CEN XFS compliant vendors H/W. However it is recognised that without being able to test on another vendor's hardware, all that can be done is to ensure that the application is certified to the CEN XFS layer.  Note: compare ADI and XFS status msgs and document differences.



Summary:
Log at the SST any local actions that are done without the knowledge of the host

Description:
This RFC applies especially to GBNA functionality where the device status message does not report >90 notes to the host, so the host does not receive the counts for that txn. These counts must be journalled.



Summary:
Multi-media functionality should work in a compatible way to AANDC

Description:
Req Id 12.2.Multi-media functionality should work in a compatible way to AANDC eg MPEG display, Sound Blaster output. Already in IT12 - test only



Summary:
Supervisor and consumer Interfaces should look the same as existing AANDC interfaces

Description:
Req Id 12.1. Supervisor and consumer Interfaces should look the same as existing AANDC interfaces. Same level of functionality as is provided in AANDC 2.04 should be provided. This should be the case for NCR H/W, although it is recognised that where other vendor's H/W impose physical or other restrictions then a best effort approach will be necessary. 



Summary:
Support for 200 note deposit on GBNA hardware.

Description:
Req Id 11.105. support for 200 notes in AANDC 3.00. Requires message format changes to the txn request and device status messages to report 3 digits.



Summary:
Support (XFS) for Card Tamper Indication

Description:
Req Id 11.101. Implemented in IT12 - need to test mcrwti.cpp



Summary:
Support (XFS) for Open/Close Dispenser Shutter 

Description:
Support (XFS) for Open/Close Shutter control before and after dispense. Already supported in IT12 - test only



Summary:
Support Universal Operator Panel on UX4r3 and UX2r2 in EOP emulation mode

Description:
Req Id 11.93. Support Universal Operator Panel on UX4r3 and UX2r2 in EOP emulation mode.  This requires a change to make the Uly API call for entry into Sysapp configurable to either enter Sysap as before or the FLM App, so that existing non-XFS based applications can run on UX terminals and access the FLM application (at least until ADI disappears in UX terminals). 



Summary:
Support Remote key Management with XFS

Description:
Req Id 11.89. Support (XFS) for RSA (Remote Key Download), Signatures



Summary:
ActiveXFS support for GBRU h/w with BNA2 functionality only

Description:
Req Id 11.86. Support (XFS) for the GBRU when used as a GBNA; BNA2 functionality only, including retract and limited to 99 maximum note acceptance.



Summary:
ActiveXFS support for the GBNA with BNA2 functionality only

Description:
Req Id 11.85. Support (XFS) for the GBNA; BNA2 functionality only, including retract and limited to 99 maximum note acceptance.



Summary:
Support UPS for UX SSTs

Description:
Req ID 11.73. Support UPS (uninterruptible power supply) - respond to normal commands issued by a UPS and shut the application down in a controlled manner before the power supply dies completely. 
Use the existing CEN XFS SIU SP interface for the UPS. When the SIU SP advises that the UPS battery is low, complete the current transaction if possible, and then go out-of-service.

When out-of-service due to the UPS battery being low, enter a state suitable to handle an imminent power loss and the subsequent power recovery and monitor for SIU SP advice of UPS 'recovered'.  When UPS recovery is indicated and UPS is not powering the system and battery low is not indicated then go back in service.  



Summary:
Add BNA enhancements to the standard AANDC 3.0 product

Description:
Enhance BNA functionality to provide the enhancements that Malaysia have made as standard. This requirement is optional based on schedule time available



Summary:
Support for 99 note deposit on BNA/2 hardware.

Description:
99 notes will be reported in the txn request but not the device status message. The no. of notes at escrow will be configurable through the registry



Summary:
Support for the enhanced note retract functionality on the GBNA/BNA2 h/w 

Description:
Req Id 11.64.01.Support for the enhanced note retract functionality on the BNA/2 hardware (without note recognition on retract). Configurable for selection of host impact or no host impact.



Summary:
TAR 289068 - Fast Host sending OOS when exiting supervisor - ATM does not send Ready 9

Description:
This issue has been seen in Malaysia and now also in Prague. It is still with FSGCS, but we need to discuss for 2.6.1, thus agreed with Stephano to raise a GRIT.
Details - debuglog etc are available, also workaround solution prepared by Rohit is available with me (Jan).



Summary:
Test 5.6.1.14 - Unsol msg not showing total rejected amount.

Description:
Steps 4 and 6 in test show the issue.  Unsol not being sent with the rejected total.  Other problems with this test were ITS issues and have been corrected.



Summary:
Authoring Instructions Verification BNA TAR Group (TEST 5.5.2) -  FAILED

Description:
raising on behalf of Ranjith

Merging instructions are straight forward and passed.

But, there are 2 issues 
1. In the part 5 of the instructions it says copy header and lib files to relevant places.
There is no need to do this as the service pack already installs these files to the relevant  destinations.

2. In part 5 step 3, It says rebuild the applicationcore and supervisor project as well.
If that is the case the supervisor project should also be supplied as part of the service pack.  There is no new supervisor application in IT3 build under C:\NTGLOBAL\AANDCAPPS\SP1.




Summary:
XFS Support for the Low Cost DIP Reader

Description:
Req ID 11.58. ADI2 support only in 2.06 - only variant reporting change.



Summary:
XFS Support for MACing

Description:
Req ID 11.53 - already implemented in IT12



Summary:
XFS Support for the Remote Status Indicators

Description:
Req ID 11.42. TAR RFC to support the red and amber lights was rejected - no longer required by the customer. This is a general requirement to support RSI in XFS. RSI support already in IT12



Summary:
XFS Support for the Mode switch. 

Description:
Req ID 11.41. This will also include auto-entry into supervisor, via cabinet/door switch. Mode switch XFS Support is for 2 positions only - supervisor and normal. Available in IT12 - to be released



Summary:
XFS Support for the Cash Dispenser

Description:
Req ID 11.24 - already available in IT12



Summary:
When cassettes are exchanged outwith Exchange Mode, cassettes go fatal

Description:
In CEN XFS 3.03 when cassettes are removed/inserted and not in Exchange mode, the cassette value goes to NoVal which is equivalent to the cassette being fatal.



Summary:
Test 5.6.1.11 - Press NO in timeout doesnot return the card

Description:
In step 9 - test case says press No to no more time and result will be card ejected - but it show hardware error for sometime and displays enter notes



Summary:
testcase 5.6.1.12 -  Application didnot send the correct unsol to host

Description:
In Refundslot jam and Escrow jam scenarios - application sends different unsols than the one mentioned in the testcase.







Summary:
Changing the Note RemovalTimeout registry setting from 30 to 60 secs doesnot show any difference

Description:
Test case 5.4.20.3

registry setting to default 30 and registry setting to 60 doesnot show any difference. it always takes 40 secs




Summary:
Setting the BNA timers from Host doesnot work effectively

Description:
Test case 5.6.1.7

in step 2 - enter notes will be displayed for ~30 secs but actually it displays for around 80 secs.

In step 7 - if we send the SETTIM20 message the enter notes should be displayed for 20 secs but it displays for around 80 secs
and beep and display doesnot match(i.e beep comes for 30,40 secs but the screen displayed for 80 secs)



Summary:
Service Pack 1 Authoring descriptions not delivered - test 5.5.1

Description:
The development PC installation does not deliver all the authoring descriptions as expected. It only delivers two word documents (into C:\NTGLOBAL\FINAL\SUPPORT\USER\SP1): 
TAR 281151.doc
TAR 283238.doc
Consequently, loads of descriptions are missing.



Summary:
Service Pack 1 installation problems under NT

Description:
Under a clean NT build, when you install 2.6 followed by service pack.
In the control panel -  add/remove programs there are 2 entries appearing for the service pack.
APTRA Advance NDC Package Service Pack 1
APTRA Advance NDC Package Service Pack 1 02.06.01

Question is WHY ?

Also in the start menu

Start - programs - NCR APTRA folder with all the std aandc applications etc and another 
		  NCR APTRA - folder just with service pack

(raised on behalf of Ranjith)



Summary:
Screen Flicker during PIN Entry

Description:
Problem in the GRIT 302645 itself.
Areas that may be influenced are PIN Entry and Amount entry.
New test needs to be written.



Summary:
Product version reported incorectly (DebugLog window, Terminal command) - tests 5.6.4

Description:
The tidy up activity on author projects has not been done.



Summary:
It is impossible to add the ServicePack 1 aggregate to the Advance NDC SST SV Package

Description:
Installation of such aggreate fails on dependencies - Advance NDC Support Files missing - but I think this error message is not appropriate either as the component is in the aggregate.
See attachment of the captured error message box.



Summary:
IT2 and IT3 Install does show up in the add/remove programs. Selecting the add removal then removes SP files such as rebootsv.exe

Description:
The test stipulates that there should be no add remove antry and that only a fulll removal of 2.6 should remove SP files



Summary:
AANDC 3.0 XFS Support for the BAPE/HI-BAPE

Description:
This is already implemented at IT12 - needs tested and released with AANDC 3.0



Summary:
CPM - unsol reporting CPM error on startup sent during "SupervisorBoot".

Description:
There are 2 issues here. One is the fact an unsol is sent at all - this is probably the similar to the BNA mErroring because its controls are registered automatically by XFS4.1.1.  Other issue is that it is sent during "SupervisorBoot" - same prob as BNA too.  The BNA issues (GRITs 303847, 303848) are for future work but it must be checked the info is in release bulletin to explain to unregister the controls for BNA and CPM.



Summary:
AANDC 3.0 XFS Support for the IMCRW (Spoof Mode)

Description:
Requirement id 11.19. IMCRW support on XFS in at IT12, need to test and release with 3.00



Summary:
AANDC 3.0 XFS Support for the Smart/DIP (Full XFS Support)

Description:
Requirement 11.18



Summary:
AANDC 3.0 XFS Support for the DIP Reader 

Description:
Requirement id 11.15. DIP support was implemented to XFS at IT12 - need to test and release with XFS support in 3.00



Summary:
ANDC 3.0 should support the same transaction set as AANDC in line with the phased H/W device support 

Description:
Requirement id 11.7. MV NDC should support the same transaction set as AANDC in line with the phased H/W device support outlined below. Phase 1* is basic functionality required to perform a field trial activity in a customer lab. Phase 1 is functionality required for first release/controlled deployment activity. Phase 2 and Phase 3 is functionality not immediately required, and to be incorporated at a later date.  CPM is Phase 3.



Summary:
AANDC 3.0 Ensure 1 application build is done creating an MV only build

Description:
RequirementID 11.6 Only application build for MV will be required.



Summary:
MV NDC should support the user defined 'C' exits on NCR H/W only

Description:
Requirement id 11.3. MV NDC should support the user defined 'C' exits on NCR H/W only. No guarantee can be given for another vendor's h/w, as the C exits may contain ADI or other proprietary API calls. If 'C' Exits contain ADI2 calls then they will not be supported.



Summary:
MV NDC should support the 'C' Exit interface in the same way as AANDC

Description:
Requirement id 11.2



Summary:
AANDC 3.0 should preserve the customisation layer and app core separation 

Description:
Requirement id 11.1. MV NDC should preserve the customisation layer and app core separation in order that previous customisation layers can be migrated into the MV product with minimal impact



Summary:
AANDC 3.0 Should support same configuration parameters as AANDC 2.04

Description:
Requirement ID 9.1



Summary:
Support existing hooks to replace the standard screen displays

Description:
Requirement id 8.6.There are existing hooks in the AANDC architecture which allow PS to replace the standard screen displays. Requirement is for these hooks to continue into the MV product. PS in SPA use this functionality to break out of the standard NDC displays. Used within ERIC



Summary:
Control the updating of customisable status information

Description:
Requirement id 8.5 It is likely that extra vendor specific management information will be required to emulate the native status information produced by AANDC. The mechanism for gathering and including this information in the application should be customisable by PS in a controlled way. This is required so that PS can meet any necessary management requirements on another vendor's H/W not currently catered for in the XFS interface. Also so that NCR can build up a repository of Wincor/Diebold, etc specific management status



Summary:
AANDC 3.0 Where possible generate exactly the same content for status/replenishment fields on another vendor's h/w as currently generated by NDC+/AANDC on NCR h/w.

Description:
Requirement ID 8.4. Where possible generate exactly the same content for status/replenishment fields on another vendor's h/w as currently generated by NDC+/AANDC on NCR h/w.  Note: Internally document the differences seen between operation today in ADI2 environment versus XFS environment from a status perspective (AT).  Not planned to be an exhaustive list (SC).



Summary:
AANDC 3.0 Ensure changes in status reporting are agreed with Gasper and the Switches beforehand.

Description:
Requirement ID 8.3



Summary:
AANDC 3.0 Must interface to the switch in same way as AANDC/NDC+

Description:
Must interface to the switch ie accept terminal command/generate terminal responses in exactly the same way as is currently done by AANDC/NDC+. Requirement id 8.2



Summary:
AANDC 3.0 Must accept and execute existing NDC state/screen download

Description:
Requirement id 8.1



Summary:
AANDC 3.0 Solution design should require minimal re-work to migrate to the Universal Architecture

Description:
Requirement ID 7.1



Summary:
AANDC 3.0 should be synchronized with the UX4r3 and UX2r2 release

Description:
The AANDC release supporting UX4r3 and UX2r2 should be synchronized with the UX4r3 and UX2r2 release. (currently April 2005, as of November 2004).



Summary:
Initial Multivendor Target Market is EMEA

Description:
Initial Multivendor Target Market is EMEA, however a MV NDC product will be of interest and of value to NCR in virtually every region of the wor



Summary:
Initial target market for UX4r3 and UX2r2 is global. 

Description:
Requirement ID 2.1



Summary:
Support the existing NDC states/screens download and message interface on a multi-vendor platform

Description:
Requirements ID 1.1



Summary:
Duplicate Component IDs cause  Merge of CustLayer and AppCore to fail

Description:
I've found some more Duplicate component ids in the product again - I think they have been there a while based on the time stamps.  This means we can't merge the Customisation Layer and Application Core to get a common type library, or simulate both apps in the test environment.
 
The components are:
 
Error with duplicate components. ID = : 0a18s1 
 [CUST 0a18s1 Set Up Usol Data:1 CLASS_MTGRAPHER BNA test Mon Jul 03 15:13:58 2000]
 [APPC 0a18s1 Add Header for Upload EJ CLASS_MTSEQUENCER BNA test Fri Oct 06 10:42:26 2000]
Error with duplicate components. ID = : 1n1135dc6
 [CUST 1n1135dc6 Session:Synch Cash Acceptance Complete CLASS_MTSEQUENCER NDC Customisation Layer Fri Nov 30 ]
 [APPC 1n1135dc6 Process Message (CD - In Service) CLASS_MTGRAPHER EPP module Thu May 02 14:54:30 2002]
Error with duplicate components. ID = : 2n1135dc6
 [CUST 2n1135dc6 Cancelled CLASS_MTWORKER new Module Tue Aug 04 16:14:08 1998]
 [APPC 2n1135dc6 Process by Subclass CLASS_MTSEQUENCER EPP module Thu Jan 22 09:15:43 2004]
Error with duplicate components. ID = : 0n1148dc6 
 [CUST 0n1148dc6 Initialise ISO 3 CLASS_MTGRAPHER NDC Customisation Layer Wed Jun 05 13:55:15 2002]
 [APPC 0n1148dc6 Transaction Reply Available CLASS_MTWORKER <No Module> Mon Mar 03 11:20:05 2003]
Error with duplicate components. ID = : 3n1135dc6
 [CUST 3n1135dc6 Cancel Exit CLASS_MTWORKER new Module Mon Jul 27 10:23:52 1998]
 [APPC 3n1135dc6 Extended Encryption Key Change CLASS_MTGRAPHER EPP module Tue Feb 19 14:41:36 2002]

I think the solution is to replace/copy the workers in one project and then do a merge.




Summary:
Update to NDCDATA.dsp for clean sandbox build

Description:
7. Issue with the Include path for NDCDATA Win32 XFS Debug                                                        /nologo /Zp1 /MD /W3 /GR /ZI /Od /I "ActiveNDC\debugmessage" /I "\ActiveNDC\ucdi" /I "..\CommonUtilitiesNDC\Sources\include" etc Solution: should be "ActiveNDC\APTRAUSERCDI". Needs fixed if we are to do 'clean' development builds from sandboxes.




Summary:
BNA - mError occurs when start apps if no BNA device (XFS 4.1.1 platform).

Description:
The XFS 4.x platform registers the BNA controls.  This causes an mError if the device is not attached.  Workaround is to dergister the BNA controls.  The release bulletin already documents this.



Summary:
mError case - encryptor initialisation failure on EPPE

Description:
mError case - encryptor initialisation failure. 

SupplyPoint Source:mError

Description: <SCFILE>  </SCFILE>      <SCLINE> 0 </SCLINE>     <FUNCTION> class mNDCErrorHandler </FUNCTION>     <FREE> Level: 2       Domain: 116       Error Number: 0    Worker Id:14s424g96     Description:             </FREE>

 

This type of issues is coming back and back. I think Alison is looking at the root case of these, so I am putting here into Cc.. - perhaps she knows more.

 

I do not know why this is happening - most likely the machine was installed with something before, bits of it stayed in the encryptor and now it conflicts. I think we need a utility - something like "epp_init.exe", which would just clear everything in the EPP so that it is as if you got a new one.

 

I would try the following:

1) If apps are running, stop the running apps, stop the service providers (wstop), kill cmmapp.exe

2) delete pmdata, custom.dat

3) delete all files in C:\xfs\Data\klib

4) reboot the machine

5) if the problem happens again, do not panic, just let it reboot again and try again

6) now it should be Ok





Summary:
TAR 290042 - CMMAPP.EXE Hardware exception raised on Cuthbert (2.6.1 SP1 IT1)

Description:
Happened only on my development drive
with platfrom 94.01.01.05 and ANDC 2.6 + SP1 IT1
Log of the UEH is saved. 



Summary:
ServicePack installs files that should not be installed (runtime installation)

Description:
1) On the SST, directories \SSDS\INCLUDE and \SSDS\LIB are created and contain files. For runtime install, this should not happen, shouldn't it. [Lawson, Richard]  correct, this is a problem. 

2) The AdvanceNDCSPRelease.htm in \SSDS\ANDCSP\DOC contains the functional spec for service pack installer - is this correct? [Lawson, Richard]   -I think Jim used this as a test Release Bullet - should be the correct release bulletin. 




Summary:
Text in Release.htm (SP1 IT1) is not clear - test 5.3.3.2

Description:
The text
- unclearly speaks about registry keys (ambiguous meaning)
- does not explain what RebootSV is though it mentions it
- would probably do with general Collette's language polish



Summary:
RebootTimeout registry setting missing after install (test 5.3.3.2)

Description:
The RebootTimeout setting is in the AdvanceNDC.reg file, but this file is not executed so the new setting is not in the registry. Disconnect with what Richard planned and what the developers normally expect. Need to setup new mechanism for registry setting updates for service packs.



Summary:
Connected Event being erroneously returned after SessionBegin call following a connection shutdown.

Description:
During testing, when a connection is etablished and closed down, and the test app sleeps after the Close call, a subsequent call to SessionBegin results in a Connected Event.  This is incorrect as there is no connection established.



Summary:
Update TestCash when moving to support XFS 3.0

Description:
TestCash uses proprietary NCR extension to XFS2.0 - this will need updating before going to XFS3.0 (as well as needing to remove all manual Stack-Reject code which is needed for other SPs just now).



Summary:
When init string contains &D3, lowering DTR may break the next connection attempt

Description:
When the init string contains &D3 (lowering DTR causes reset), the act of disconnecting a call will cause a reset of the modem.  If another call is made without closing and opening the modem, the default initialisation will be in effect because the initialisation string is only sent on an open operation.



Summary:
TAR 282523 - Device Status field still  incorrect with latest version of ssdsJRNLSRV.DLL

Description:
Integrate 2.x solution



Summary:
A partial read will return always the card even if the read conditions are met

Description:
There is a problem in the product for which a partial read will return always the card. 
The application tries first to read all the tracks and then if this fails it should go through the read conditions and test single tracks status.Actually the second step is discarded¿TAR 267018 and 271002 are the culprits 



Summary:
Provide GetMStatus API in OOXFS 

Description:
For status messages sent from Journal Service an updated mStatus is required to populate
messages sent via the SendStatus Exit API. at the moment these are hard coded see TAR 279637



Summary:
update FS,  DS, UTS to state version of .NET framework used during development and testing

Description:
update FS,  DS, UTS to state version of .NET framework used during development and testing. The FS, DS & UTS, state it's 1.1 SP1.  However what was actually used was 1.1 with no SP installed



Summary:
AANDC Service Pack 1 Release Bulletin should be included on the patch CD

Description:
GRIT to ensure this is done.

Must ensure:
File appears on start menu for development builds
Document contains the correct content
Document correctly references and links to original Release bulletin



Summary:
TAR 287439 - Command rejects for valid FIT messages

Description:
AL RAJIDH, Saudi Arabia
To be resolved



Summary:
TAR 286606 - Application loses PCCM connection and then logs events from TCP/IP

Description:
Bankwest, Australia
To be resolved



Summary:
Unhandled Exception in ssdsNDCPRINT.DLL in 2.06 on Sneezy

Description:
First time to see this exception, however, inspecting the code, it is a clear coding error in PrintInit.cpp. I have already fixed and tested the problem, so this is just for tracking. 



Summary:
DS: Updates following implementation

Description:
The DS need updated to match changes made during the implementation phase.



Summary:
UTS: Update following implementation

Description:
The UTS needs updated following implementation and as a result of comments raised in the UTR.



Summary:
TAR 256059 - RFC for AA-NDC to support new state type "m" for combined PIN Entry + Language

Description:
USPS
To be integrated



Summary:
TAR 286762 - Access violation from application core when screen definition incomplete

Description:
Audi Bank
To be resolved



Summary:
TAR 286662 - AA-NDC 02.06.00: After setting Message Format to 0 Keepalive cannot be changed

Description:
Resolve for 2.6.x




Summary:
COM Wrapper not retruning Connectable return value from Open.

Description:
COM Wrapper not retruning Connectable return value from Open.



Summary:
DS: Add Closing/DeferredOpen states to Visa2DataLink

Description:
Add the Closing and DeferredOpen states to the Visa2DataLink class description.



Summary:
DS: ManagedTimer now uses System.Timers.Timer

Description:
Update DS to changed ManagedTimer implementation due to use of System.Timers.Timer



Summary:
DS: Update internal details of HayesModem class

Description:
Update the implementation details of the HayesModem class and its internal classes



Summary:
DS: Add description of configuration from XML mechanism

Description:
Update the DS to include a description of the ConfigureFromXml class and cross reference appropriately from classes using it.



Summary:
Updates needed for COM Interop Module after Code Review.

Description:
The following comments were brought up in the Code Walkthrough/Review::
Stephen Macphaill (SM): Try and refactor PD logging code in COM Server classes, this contains repetition of code and can be neater by refactoring into one method.
SM: Investigate if an explicit default constructor is needed for exposing the Visa2CommsLink class to COM, if not remove redundant default constructor.
SM: PD tracing should be included when a null object is returned from .NET Visa2 Communications Service call to GetCommunicationsLink.
SM:  Consider adding parameter to Visa2CommsLink constructor (the parameter would be a .NET Visa2 CommunicationsLink).
SM: Investigate that an object de-registers itself from events when it is disposed.  This would apply to the Visa2CommsLink class specifically.
SM: use the using NCR.APTRA.IVPIComms, instead of repeating it throughout code.
SM: Summary block is missing for mapCloseStatusToCOM method.
SM: In the mapping methods of Visa2CommsLink class, there should only be one return statement.
SM:  the scope of try/catches should be increased in event handling methods in Visa2CommsLink class.
SM: General comment: consider when a CEH should be called to raised an exception, and when the error can be logged and normal execution resumed.



Summary:
Advance NDC should be configurable for showing/hiding the mouse pointer

Description:
Currently Advance NDC shows the mouse pointer on all screens. Customers have to configure the operating system so that the icon of the mouse pointer is empty. However, it is possible to hide the mouse pointer only for Advance NDC and still keep it visible for other applications. This would also remove the need for the PS to finish up Dundee delivery.
This feature should be configurable (in Advance NDC registry) as in lab testing we need to see the mouse pointer over the text prompts. The default should be off (mouse pointer hidden), after advance ndc tools are installed it should switch on. 
This RFC is raised on the back of TAR 278457 where customer complains about seeing the mouse pointer when mpegs are played.



Summary:
HayesModem disconnect should retry +++

Description:
At present, if the modem fails to respond to lowering DTR during a disconnect attempt, the HayesModem layer sends +++ to get the modem's attention, and then repeatedly sends ATH until 3 retries are exhausted, or the modem deigns to respond.
It would be better, should the modem fail to respond to ATH, to go back to lowering DTR and retry the entire cycle.



Summary:
Reqmt: Service Pack 2.6.1 to be certifed with 4.1.x platform

Description:
Release 2.6.1 must be certified with 4.1.x platform.  If available, this should be with release 4.1.1, otherwise certifcaiton should be done with 4.1.0.



Summary:
TAR 279273 - Print Immediate Transaction Reply incorrectly rejected when OOS with MACing

Description:
Integrate 2.x TAR



Summary:
Test CP21 fails intermittently

Description:
Test CP21 fails intermittently due to RX overruns.

Fixed & verified.



Summary:
Tests CP5/7 CP6 and CP12 fail

Description:
CP5/7, CP6 and CP12 fail with guard timer expiries whilst waiting for OnClosed events

Fixed & verified.



Summary:
MV Depository Worker Error does not signal when device not present

Description:
In ths case if OOXFS::GetEnvelope returns NULL this data not used at all.

It should be like this(solution):

   //Send a XFS Command To Query the Status of the Envelope 
   //Device ,If the Device is Healthy Issue a Deposit Command
   //else Signal Out of the Workgroup

   BOOL NoEnvelopeDepository = TRUE;

   mEnv = mOOXFS::GetEnvelope();
   if (mEnv != NULL && mEnv->IsPresent()) //Check Presence
   {
	   NoEnvelopeDepository=FALSE;
	   hr = mEnv->GetInfoAsync(WFS_INF_DEP_STATUS, NULL, &mReqID);
   }
   if (hr != WFS_SUCCESS || NoEnvelopeDepository)
   {
	   UserMsg WorkerMsg;
	   WorkerMsg.Length = 1;
	   WorkerMsg.Data[0] = (BYTE) DEPOSIT_ABANDONED;
	   aEC->PostEvent ((mEvent*) new mUserEvent (this, &WorkerMsg));
   }


Source SSDS\Interdomaon\BasicATMWCL\Sources\cpp\envdepo.cpp
method mEnvelope::Start
===================
¿¿

   //Send a XFS Command To Query the Status of the Envelope 
   //Device ,If the Device is Healthy Issue a Deposit Command
   //else Signal Out of the Workgroup
   mEnv = mOOXFS::GetEnvelope();
   if (mEnv != NULL && mEnv->IsPresent()) //Check Presence
   {
	   hr = mEnv->GetInfoAsync(WFS_INF_DEP_STATUS, NULL, &mReqID);
   }
   if (hr != WFS_SUCCESS )
   {
	   UserMsg WorkerMsg;
	   WorkerMsg.Length = 1;
	   WorkerMsg.Data[0] = (BYTE) DEPOSIT_ABANDONED;
	   aEC->PostEvent ((mEvent*) new mUserEvent (this, &WorkerMsg));
   }
¿¿..

Unfortunately WFS_SUCCESS has value = 0, so if no Envelope Depository Device found event DEPOSIT_ABANDONED will never be posted from this method.
As a result Envelope Depositor worker will never raise signal "Not Done" in this case.

Here is a portion from help to this type of worker:
-----------------------------------------------------------------------
Not Done:  An envelope has not been entered into the depository within the maximum time (5 minutes), or the device has been unable to process the entered envelope. The Enabled work group may also have signaled. 

Note:  It is not now possible to process the envelope. The Cardholder must repeat the process and request a new envelope. 
This signal is also produced if there is no Envelope Depository device present on the SST. 







Summary:
Diebold CEN2 - Exception when clear key pressed in supervisor

Description:
seen twice at euronet once in pilot machine once in lab - merror from basic expression that cannot create an integer from an input value - supect the ascii values returned to the operator echo worker from diebold service provider. I understand does not effect CEN 3 Diebold as ascii is not used.



Summary:
Certain HM modem tests do not give sufficient time for error recovery

Description:
Running Hayes Modem tests continually with certain modems, on occassion the answering modem does not respond to DTR with an OK response. The test guard timer is not long enough to allow retries (2-3seconds), and the test configuration for the modem response timer is too long (5 seconds).

Fixed & verified.



Summary:
ComPort needs to increase delay imposed after closing port

Description:
ComPort currently imposes a delay of 50ms after closing the port and before returning the closed event. This is because Windows needs time to release the port. Otherwise an open immediately following a close causes an ACCESS DENIED error from Windows. Using the COM port driver for the ISA-bus MultiTech modem, 50ms is marginal and still causes intermittent failures.

Fixed & verified



Summary:
Discrepancy between auto-generated GetCommunicationsLink method signature and original GetCommunicationsLink method signature.

Description:
Discrepancy between auto-generated GetCommunicationsLink method signature (created by referencing VPICommsInterfaces.dll in .NET project) and original GetCommunicationsLink method signature causes COM Server to fail when invoking method.



Summary:
Update to product installer for andc 3.0MV

Description:
If CDT still present need to create the XFS CDT component and use MV components
setup.ins for 2.6 is pure SV and IT12 is SV & MV so neither are suitable.



Summary:
TAR 378862 - The BNA MEI OUT does not flash when notes rejected.

Description:
Only the BNA MEI IN flashes when waiting for notes.  Also, this is another case where MEIs should be updated to XFS (IN and OUT)!



Summary:
Test HM19 fails intermittently

Description:
Test HM19 fails intermittently



Summary:
BNA status handling should support reporting nearly full bin on all h/w

Description:
BNA2 onwards can detect a nearly full supplies status - this should be documented and author updates made if necessary



Summary:
Test HM15 fails, missing an OnTxComplete event

Description:
Test HM15 intermittently fails with the receiving modem
missing an expected OnTxComplete event.

Fixed & verified



Summary:
Test CP9 fails due to unexpected OnCarrierDetect events.

Description:
Test CP9 intermittently fails because OnCarrierDetect events are raised into the test, which does not expect them.

Fixed & verified.



Summary:
Test DL2 fails due to insufficient timeout.

Description:
Test DL2 intermittently fails because the guard timer
expires too quickly relative to the timed OnOpened event.

Fixed & verified.




Summary:
Diebold CEN2 Receipt Length Issue 

Description:
Receipts too long  - or too short. Difference in operation between  Diebold Impact and Diebold Thermal. Too long receipts caused by incorrect FF command in regisrtry. No apparent minimum receipt length so receipts of 1 line in length possible. Code updated to use a maximum & minimum setting to control receipt length. May not be an ideal solution in all cases and required further testing. found at euronet



Summary:
Cash Presenter worker does not deactivate its Doer sub-workgroup

Description:
Alison, raising the issue as agreeed on the Spray Disp. meeting. I am putting priority High as this is really a big bug. Currently, it is causing trouble to people with Spray and various workarounds are put in place ... however, the real problem is this.

The problem is that the Doer workgroup is not stopped when the worker signals. The problem has been there probably for a long time, however, it never caused trouble to ANDC based on the flow that was placed there. Now, the flow is more complex (spray dispenser additions), contains synchronisers and a caller and thus proper deactivation is vital.



Summary:
Duplicate worker ID's in vanilla 02.06.00 Application Core

Description:
There were a couple of duplacate worker ID's in vanilla 02.06.00 - this means Imports to the AppCore would fail.
SteveG has updated the Author work so it now works but customers will not be able to do any imports into the application core



Summary:
Visa2DataLink & ActiveHayesModem need updated in the DS

Description:
Visa2DataLink & ActiveHayesModem need updated in the DS



Summary:
Use Reflection to setup PD parameters

Description:
e.g.
AssemblyTitleAttribute titleAttributeObj = 
(AssemblyTitleAttribute)AssemblyTitleAttribute.GetCustomAttribute(Assembly.GetExecutingAssembly(), 
typeof(AssemblyTitleAttribute));
// create a PD logger    
m_pd = new StdSupplyPoint(titleAttributeObj.Title, this.GetType().Name, this.GetType().Namespace);



Summary:
Test Classes to be added to the DS

Description:
Link CommsSatck and ActiveSessionHandler to be addee to the DS 



Summary:
Event Handlers should have the 2nd parameter derived from EventArgs

Description:
Event Handlers should have the 2nd parameter derived from EventArgs



Summary:
Update DS for multi-link/ multi app support

Description:
During implmentation changes required to support multiple links and multiple apps.



Summary:
update the DS to add a link to the MSDN page that describes the WIN32 methods 

Description:
update the DS to add a link to the MSDN page that describes the WIN32 methods 



Summary:
TAR 286370 - Card Before Cash transaction reply prints additional unexpected receipts

Description:
United Bank Limited, UAE
To be resolved



Summary:
AANDC test environment needs to be ported to XFS 

Description:
At the moment the test environment is ADI2 only. To support the XFS simulator only, there needs to be a new XFS test environment. RFC 57 from PS



Summary:
TAR 285665 - Consecutive line feeds does cause a second line feed on journal

Description:
US PS
To be resolved



Summary:
DialUp Diagnostics task  to be a SYSAPP Compliant Diagnostics (Feature Architecture Compliant) 

Description:
SYSAPP Compliant Diagnostics (Feature Architecture Compliant) which would populate the appropriate registry entries for it to be invoked via sysapp with no s/w changes to sysapp.





Summary:
Use configuration class genration from the XML schema file

Description:
Use the .NET tool to generate aconfiguration class that can be used through the component, as recommend by the Architects.



Summary:
Convention state that EventHandler should be suffixed to each handler

Description:
This is the same for all other delegates in the component and should be updated throughout the code.  The Design spec need to be updated also.



Summary:
APTRAca10.CHM external links should be relative, not absolute

Description:
To avoid broken links to external files in the ANDC CHM, the links should be relative. This will also make testing simpler as the links will work in any location provided the external files are also present.



Summary:
Stop method in should throw an exception if it fails, to be caught by the upper layer and not return a bool 

Description:
This is a method in the ManagedTimer classe.  The throwing of an exception is ok.  The changing of this to not return a bool, means changing the design, which would have a ripple affect throughout the code. The design spec will also have to be updated



Summary:
Rename the ManagedTimer class to remove the word Managed

Description:
This is a change in design issue and has a huge impact throught the module, therfore rejected for now. However will be raised as an RFC to be considered in the next release



Summary:
Provide comms fault logging to the comms error log or possibly to the application event log

Description:
Provide comm fault logging to the comms error log or possibly to the application event log, this could also possibly be logged  elsewhere, either in the journal or some other log file that could be pulled of the ATM easily via flex disk and viewed 



Summary:
Status customisation code will not be on AANDC 3.00 CD

Description:
To keep control of the code to allow customers to change the status handling, this code will not be on the AANDC 3.00 CD. PS will need to come in to Product Management to get the code and inform Dundee of why they need to make the change.



Summary:
Package IP doesn't explain what Advance NDC PD is

Description:
The Package Components or APTRA Advance NDC topic, or both,  should explain what Advance NDC PD is - could mention "templates" somewhere



Summary:
Update CduWindow & CduLib for mutex update

Description:
Jan to provide details



Summary:
Release Bulletin - XFS - EOP keyboard mapping issue with XFS 4.0

Description:
FGSC have requested that the release bulletin for ANDC 2.6 be updtaed with information on EOP keyboard mapping issue.
Katrina Walker has the details



Summary:
Provide Passbook Printer support for ANDC

Description:
Previously customers who required passbook support for ANDC integrated the Passbook ADE product into their ANDC application.  With ANDC 2.06, the passbook printer support needs to be recompiled to run in the new framework



Summary:
TAR 285347 - Journal Backup messages not logged to PD trace

Description:
AIB Bank, Dublin
To be resolved.



Summary:
TAR 285336 - Hang occurs after Disepnse and Print completes for Spray Dispenser

Description:
Bank of Punjab, India
To be resolved



Summary:
TAR 271100 Incorrectly sets attributes of the Availability Changed worker

Description:
TIR 278682 for 2.05 was implemented after reviewing the changes for TAR 271100 for 3.0. It was noticed at this point that for 3.0 that the changes were slightly incorrect in that only the FASCIA LIGHT attribute should be set on or off - in 3.0 other attributes are being set as well rathar than being set to NO CHANGE



Summary:
Customisation Layer causes system escape when statement printer has no paper

Description:
Issue seen by Stephen Peat.

Event veiwer logs reports an UEH after a statement printer command with an M_STATUS of 7 (paper out)

UEH log says trStatementPrinter::Print is to blame - will have to debug to find the root cause.



Summary:
MV - support the CEN XFS 3.0 interface for AANDC 3.00

Description:
GRIT is to move all devices currently supported on CEN XFS 2.0 to CEN XFS 3.0



Summary:
MV - support  statement printer in AANDC 3.00 with CEN XFS 3.0

Description:
Currently only supported in SV



Summary:
MV - alarms in AANDC 3.00 with CEN XFS 3.0

Description:
Currently only supported in SV



Summary:
MV - support  door access in AANDC 3.00 with CEN XFS 3.0

Description:
Currently only supported in SV



Summary:
MV - support  night safe depository in AANDC 3.00 with CEN XFS 3.0

Description:
Previously only supported in SV



Summary:
MV - support spray dispenser in AANDC 3.00 with CEN XFS 3.0

Description:
Currently only supported in SV



Summary:
MV - support 3 track write card reader in AANDC 3.00 with CEN XFS 3.0

Description:
Currently 3 tk write only supported in SV.



Summary:
MV - support swipe card reader in AANDC 3.0 with CEN XFS 3.0

Description:
Swipe reader currently supported in ADI2 only.



Summary:
MV - Support double length restricted mode with CEN XFS 3.0

Description:
restricted mode requires that keyspaces contain keys which can only be used for one purpose - e.g. comms, decryption, PIN block, and that the B key is not supported. Need to find out if we can implement this with CEN 3.0, was not possible with CEN 2.0



Summary:
Support encryption key XOR in EPP for MV

Description:
Previous MV implementation could only do XOR at application level. CEN XFS 3.0 allows XOR to be done in EPP encryptor which is more secure and matches SV implementation.



Summary:
TAR 285148 - AANDC 2.6 does not allow for keyboard handling in authored states

Description:
CBA Australia
To be resolved



Summary:
TAR 285139 -  Release Bulletin and Customer pubs need to document change to file locations

Description:
NCR Israel
to be resolved



Summary:
TAR 285029 - AANDC 2.6.Release Bulletin does not state clearly that you cannot use XFS 4.0

Description:
to be resolved



Summary:
TAR 284673 - AA-NDC 02.06.00 - Access Violation in XFS Manager when exiting Diagnostics

Description:
To be resolved




Summary:
TAR 283485 - After a Fastcash transactio, dispense and print always prints

Description:
Integrate 2,x solution



Summary:
TAR 283460 - AA-NDC 02.05.00: OOS command ignored if sent while recovering from suspend

Description:
Integrate 2.x solution




Summary:
TAR 283458 - AA-NDC : Default PPD Print always prints 2 decimal places

Description:
Integrate 2.x solution



Summary:
TAR 283238 - After the first transaction, OAR (ITR) replies are rejected

Description:
Integrated 2.x solution



Summary:
TAR 281690 - When notes are taken AA-NDC does not take corrective action.

Description:
To be resolved



Summary:
TAR 281538 - AVI in idle takes focus from the APTRA Promote campaign

Description:
Integrate 2.x TAR



Summary:
TAR 281528 - MAC field selection load rejected after installation until keys re-entered.

Description:
To be resolved.



Summary:
TAR 281392 - Do s/w shutdown if still active after UEH call

Description:
To be resolved.



Summary:
TAR 281151 - AA-NDC fails to process NotesInserted event from BNA and then hangs

Description:
Integrate 2.x solution



Summary:
TAR 280681 - Statement printer is not reported as Fatal when paper still present

Description:
Integrate 2.x solution



Summary:
TAR 279637 - Fix for TAR 266677 introduces issue with M-Status and M-Data reporting.

Description:
Integrate 2.x solution



Summary:
TAR 279150 - AA NDC - fields Ca2 and Ca3 have random data when notes are jammed in the BNA

Description:
Integrate 2.x solution



Summary:
TAR 279005 - AA-NDC: Settlement has 35s delay between transaction reply and ReadyB

Description:
Integrate 2.x solution



Summary:
TAR 279003 - AA-NDC: in Settlement when cancel key pressed receipt not being ejected

Description:
Integrate 2.x solution



Summary:
TAR 278683 - AA-NDC 2.5 - not processing messages after a sstmanage /LS

Description:
Integrate 2.x solution



Summary:
TAR 278457 - AA-NDC: Default XP mouse pointer visible when displaying MPEGs

Description:
Integrate 2.x solution



Summary:
TAR 277092 - AA-NDC misses Events from the BNA.

Description:
Integrate 2.x TAR



Summary:
TAR 276640 - Message being printing in wrong font.

Description:
Integrate 2.x TAR



Summary:
TAR 276450 - PIN length set to 16 digits fails with Short Pin.

Description:
Integrate 2.x solution



Summary:
TAR 275915 - AA-NDC - Terminal Command not responded to after completion of settlement mode

Description:
Integrate 2.x solution



Summary:
TAR 274686 - AA-NDC 02.04.00: How to change "card captured" journal message?

Description:
Integrate 2.x solution.



Summary:
TAR 273457 - Card status msg printed in wrong format to journal

Description:
Integrate 2.x solution



Summary:
TAR 268103 - AA-NDC needs to issue Clear Refund if no Notes Entered

Description:
Integrate 2.x solution



Summary:
TAR 260435 - Application hang during CPM transactions

Description:
Integrate 2.x solution



Summary:
TAR 259881 - Cannot handle state flow straight to card read state

Description:
Generic solution to be defined/agreed.



Summary:
TAR 253977 - Screens in idle loop when form feed used on nested screen and host screen. 

Description:
Solution to be integrated



Summary:
TAR 248389 - Electronics enclosure status returned as space instead of 0

Description:
Solution to be identified




Summary:
TAR 236062 - Difference between AA-NDC and NDC+, INIT RCPT sets receipts to 24 lines

Description:
Solution to be identified



Summary:
Support ISO3 PIN block encryption

Description:
ISO3 PIn block required CEN XFS 3.0 so was not implemented for 1st phase of MV AANDC. This PIN block should be supported to match SV security requirements



Summary:
Fault Display exception with GBRU related to TTU code

Description:
UX4, XFS 4.1, ANDC 2.6 - access violation at memory loc 0x15 when TTU active or Fault Display
selected from select menu in supervisor.  No Exception where GBRU disconnected. FaultDis project (SSDSDevicestatus.dll).



Summary:
SUPUTILS project - no MV flag set in XFS Release

Description:
XFS debug has MULTI_VENDOR Flag set, release does not.



Summary:
System Escape on NT when using PrintToJournal in Dual and Hardcopy backup mode

Description:
when using released 02.06.00 on NT with EMV exits a system escape will occur when PrintToJournal is used.



Summary:
check Pubs consistent with Author Guidelines

Description:
Author guidelines for ANDC SP are to be added to the internal developers guidelnes doc. This must be cross checked with pubs to ensure consistency. This grit is raised to remind us to do this.



Summary:
Cash Counters Incorrect after Test Cash and Exit from Supervisor on Wincor

Description:
On Wincor machine, after a test cash is performed, the cash counters for Purged and remaining notes are out by 1 per cassette type.  The system picks a note from each physical cassette.  This change in counters is not picked up until the next cash transaction.  The note counts are updated to the correct values.

OOXFS needs to update its counters after the test cash.  

The counters are correct on NCR machines.





Summary:
VDM Mode Not Entered on Diebold Machine

Description:
When Diagnostics selected from the Supervisor Menus VDM mode is not entered.  The system hangs as it is waiting for all three applications to respond to the VDM message.



Summary:
Test Cash Always reports No Good Cassettes when only 1 type of physical cassette present in system

Description:
When performing a Supervisor Test Cash with only one type of physical cassette (i.e Type 1, Type 2, Type 3, and Type 4) on Diebold machine, no cassettes are reported as good.  The Code to correctly check for Logical Cassettes will never be executed due to a logic error in it.



Summary:
Cash Dispense Fails But Ready 9 is produced indicating successful transaction

Description:
Cassette Mapping Code does not handle multiple currencies correctly.  The first entry in the cassette type registry setting is always used for the dispense command.  This means that if the cassettes are configured with 200 CZK and 20 USD, an attempt to dispense 20 USD results in an attempt for 20 CZK which cannot be dispensed.

Software is IT12 of MV Product.



Summary:
AANDC PD component not supported under Dev PC

Description:
AANDC OD did not install with DEV PC because it was not a supported install target.
Added dev PC & Simulation to AANDC PD comp.ini



Summary:
CBC Transaction In Progress Screen still displayed when card returned

Description:
Seen on some machines, the for card before cash the Xaction In Progress is displayed for more than 5 seconds, but the card has been returned to the customer.  This extends the overall transaction time.




Summary:
Spray Dispenser power fail during dispense - purge counts not updated

Description:
When a power failure occurs during dispense on a Spray dispenser, it causes a partial dispense. On next power up, the notes that were picked from the cassette(s), but not dispensed to customer, will be retracted to the purge bin. The local Advance NDC cash counters will report these purged notes as if they were still in cassette(s). The notes dispensed are reported correctly.
Advance NDC uses READ_DISPENSE_COUNTS on power up, however this call does not report purge counts on the spray due to 5070 emulation. This emulation needs to be switched off prior to sending READ_DISPENSE_COUNTS.



Summary:
AANDC Journal Status messages differ from NDC+

Description:
Additional H0 status events for hardcopy backup and dual mode are sent to the host. 
There is not a actual problem with this - just GRITing the fact there is an actual difference.

Status events should be investigated and where appropriate brought in line with NDC+



Summary:
receipt fitness controls init for receipt/journal/statement

Description:
bug in custlayer where receipt fitness controls init for receipt/journal/statement  (6n1371dc124) 
if receipt is fatal these printers will not be initialised



Summary:
Descriptions of RFC's missing from FS and DS chnage sheets

Description:
Need to verfiy the applicable RFC's fro the component and add descriptions of each RFC change sheet.



Summary:
Dial-up Diags ? provide known good number to dial test

Description:
Provide test that will allow CS engineer to enter a known good number and  try and connect to that number providing at least a success or failure of the dialling attempt. Or Possibly more detailed information.



Summary:
Journal PrintFromBackup will stay in reprint mode if reprint fails

Description:
When reprint mode is activated and fails the flag that controls this is not reset to false. So it will stay in reprint mode and not backup the data sent to the printer.
If reprint fails the flag should be reset back to 0



Summary:
CCM VISA2 will only work with 7 bit ascii data

Description:
If the client app uses 8 bit data.  The LRC value is checking the top bit.  If app sends 8 bit data and visa 2 comms is configured to use  7 data bits, then the top bit will be lost and the application will get an incomplete message. However the application will be told that the message is correct.
If the modem is configured to 7 bit, the application can only use 7 bits.  If the modem is configured to 8 bits, the application can use 8 bits, but the protocol will not detect transmission errors in the top bit.  Also, with the current setup, if the modem is configured to 8 bits and the application only uses 7 bits, the protocol will not detect transmission errors in the top bit.



Summary:
TAR 282659:  Enter Key screens pointers incorrect

Description:
Raised by BankWest on IT12:
On the EOP the line up of the FDK - A-F is out for entering Keys. When the customer tried to enter the keys pressed incorrect buttons as the line up was out.  

Problem has been found at screen I18 in the Reservd.def

I18 is defined as;

'I18'   ''
        ''
        ''
        ''
        ''
        ''
        '<<A                          B>>'
        ''
        ''
        '<<C                          D>>'
        ''
        ''
        '<<E                          F>>'


However to display correctly it should be defined as;

'I18'   ''
        ''
        ''
        ''
        '<<A                          B>>'
        ''
        ''
        '<<C                          D>>'
        ''
        ''
        '<<E                          F>>'




Summary:
Package IP Update - Add more info to H/W requirements

Description:
From product management.  Add the following note to the h/w requirements page on the package IP:

¿Note: If you only have the absolute minimum requirements, you may experience performance problems.  NCR recommends that you have as high a specification as possible, particularly if you are doing more than basic cash dispensing.¿



Summary:
GetConf not responding when sent after receiving Suspend Message

Description:
If GetConf (1...7) command is sent after receiving the Suspend Message but before entering the Suspend Mode, the command is not processed. Steps for simulation are attached.



Summary:
Test 1.1.1.45 TAR 274046 - ITR isn't timing out to t/o screen after defined time.

Description:
ITR screen should timeout to t/o screen. ITR doesn't time out.



Summary:
Test 5.14.6.1 needs to be rerun with product classes coded for UX4

Description:
On step 2 the software information in diagnostics reports that the operating system is Windows NT when using Windows XP. On step 3 after sending the Send Software Id command the correct information is returned however when you double click on the returned message in NDCHost and select View Status Information, the Release No displays A when it should display 30000 as in the actual message. In steps 4 and 6 the product class in the hardware configuration is not displayed correctly however this should have been fixed in IT13 so need to retest on new build.



Summary:
Test 5.14.2.5 Card captured printed on journal with IMCRW when card not captured

Description:
Part of the test says to prevent the card from being captured, it should not print card captured to the journal.  I noticed that it does print card captured to the journal 3 and to NDCHost 3 times after you have entered supervisor, cleared the jam, and exit supervisor.  While this is not part of the test it does seem to be an error.  Please see logs.
Need to retest. This test was retested on the 21/9/2004 by LM and found the same error as described.



Summary:
Test 5.14.1.12 Reject bin full txn status incorrect on UX4

Description:
E2 message was sent to NDCHost not E3 as expected in the test plan. The state of the reject bin was correctly showing overfill condition



Summary:
Test 5.9.1. C-Exit testing failed on UX4

Description:
The last point of the test sent the SST into suspend mode and expected a mode argument 6 from the TransitionOutOfSupervisorHook Function however a 4 was received (out of service). Exit Log available.



Summary:
TAR 264657 - R00 font used instead of R01 when printing transaction reply print data

Description:
Integrate 2.x TAR.  Priority 2.




Summary:
PIN Entry State (B) goes into Timeout Next State

Description:
PIN Entry State (B) goes directly into Timeout Next State when testing on a specific machine (Horsea). The machine has an EPPB fitted on it. The problem has been resolved with installation of PIN SP from XFS 94.01.00.10.



Summary:
BNA ActiveX Control raises error when Device not present

Description:
If the SST does not have a BNA module, the BNA ActiveX Control raises an mError exception. The ActiveX is registered automatically on installation of APTRA XFS 04.00. When APTRA Advance NDC starts, it raises an error because the ActiveX is registered but the device is not present. When the DLL is unregistered, the problem does not occur.



Summary:
M16 with graphic defn not used in all text Idle Loop screens

Description:
If the M16 screen is defined to display a graphic screen as the background and the Idle loop contains all screens displaying text. The background is applied only to the first screen in the Idle loop and not to the others.



Summary:
Additional Configuration Items 1) Connection Backoff Timer 2) Modem Command Response Timer

Description:
1) Connection Backoff Timer
This is a timer that runs between connection attempts and allows the
modem, telephone line etc, to 'cool off' and return to a sensible
internal state.
We'd previously discussed this as an option and decided to defer it.
However, in implementation we've realised that it is needed as part of
the error recovery strategy.  I'm not sure what the useful range on this
is: certainly it needs to be 100ms or more, but what the upper limit is,
I don't know.

2) Modem Command Response Timer
This is a timer that runs after issuing an AT command from inside the
Hayes protocol layer and guards the response.  If it expires, we assume
the modem is dead, so it forms part of the error recovery strategy.

These timers will be included in the implementation: we believe it makes
sense to make them fully configurable since the values may be different
for different modems/lines etc.




Summary:
RB - Add information on how to modify PD investigations

Description:
Currently we don't describe what customers can do to modify PD investigations for debugging ANDC.  Add information to the RB to describe what can be done.



Summary:
Worker factory build is failing with IT13 dev install and customisationlayer

Description:
Build finals are ok but build worker factory fails badly with lots of errors. May be due to changes in where headers and libs are installed to, or changes to common components delivered.



Summary:
TAR 280273 -  c-exit data is not printed to journal backup

Description:
TAR raised by Ceska on 93.00.00.12.  Fix to be delivered to the customer for IT12 build and then incorporated into 2.06 release.
See TAR for details of problem



Summary:
TAR 275050 - C01 reject to fast transaction reply after a solic response from the BNA

Description:
Update release bulletin to provide guidance:
CustomisationLayer - Customisation of Transaction Reply Functions within Transaction Handler
Transaction Reply Functions in the Transaction Handler MUST complete immediately on sending a solicited error message up to the host. This means that only flow control (passthru) workers and at the most, setters, may be used after the solicited message is sent up.




Summary:
TAR 274366 - Request to have APTRA XFS TAR 271230 included in the next AA-NDC IT release

Description:
As above, get XFS 2.2.2 with this TAR.



Summary:
TAR 277092 - AA-NDC misses Events from the BNA.

Description:
Integrate 2.x TAR.
Need to wait for customer verification of the fix.



Summary:
TAR 272385 - Need a new version of the platform to be included in IT12 for TAR 269287

Description:
As above



Summary:
TAR 272101 - Device error cleared in SysApp but error mess still reported when GIS

Description:
Integrate 2.x TAR.
Need to merge with Jan's fix for GR1T 247691



Summary:
IT13-1 PD output not seen with latest PD component on IT13 CD

Description:
Investigation files are empty with the latest component. Re-installing the previous component resolves the issue.



Summary:
Test 5.5.13 No status message sent when Envelope Bin empty

Description:
No unsolicited reported to Host or printed on journal when Envelope dispenser is low or empty. This is also seen for tests 5.5.16 - 5.5.19. Personas issue on XFS 4.00.



Summary:
NDC DES Loader help appears in Application Core help and NDC Core help

Description:
NDC DES Loader help appears in both H10045.HLP and NDC Core help but Advance NDC (H10044.hlp) says the former is for workers specific to App Core and the latter for workers common to App Core and Customisation Layer.



Summary:
Application escape when dispensing from cassettes 1 and 3 overnight

Description:
Dispense operation escapes at stack after ~100 dispenses from cassettes 1 and 3. Dispensing from 1 cassette does not show the issue. Dispensing from testtool did not recreate the problem.
Ulisten to be used to determine command sequence sent from application.



Summary:
TAR 280354 - H/copy backup enh conf params 16 & 17 not ignored in dual mode

Description:
AANDC must mimic NDC+ in this functionality even though it's not to spec. This means that journal mode won't be reconfigured to h/copy backup if these params are non-zero in Dual mode.



Summary:
TAR 280520 - Difference in formatting btw EJ/paper journal from PrintToJournal

Description:
Blank lines are being printed on the paper journal from the PrintToJournal output.



Summary:
TAR 279787 - Shift out doesn't work correctly with h/copy backup

Description:
When h/copy backup attempts to print shift out as part of the reprint, the numerical value is printed rather than the actual spaces.



Summary:
Advance NDC Package document is installed but doc itself says it isn't 

Description:
IT13 Dev PC installation installs Advance NDC Package.htm and all its related files in ..\Program Files\NCR\APTRA Documentation Files but the Package document itself says it is not installed, in topic APTRA Advance NDC User Information.
Should they be installed? If yes, the Package IP should be changed.



Summary:
Versions of APTRA XFS components in Package document inconsistent

Description:
Don't think this is purely a documentation issue:
In the Advance NDC Package.htm -> APTRA XFS topic version numbers for listed components are
Third Party Runtime 02.01.02
Exception Handing 02.01.02
But the APTRA XFS contents.ini file on the AA NDC CD identify the 3rd Party Runtime version as 02.01.01.
And the Package IP linked topics refer to release 03.00.00 (AA NDC component versions) for both.




Summary:
Release Bulletin -  Timer 03 will time out if a Virtual Controller takes a while processing Transaction Replies

Description:
Realease Belletin needs to be updated to reflect that if a Virtual Controller is present which takes a long time processing Transaction Replies then the Communications Timer, Timer03 may time out. The value of this Timer should be increased accordingly.



Summary:
Add C-Exits White Paper on the Advance NDC 2.6 CD

Description:
I do not see the white paper on current IT13 CD.
The file name will be "CEN-XFS Exits in Advance NDC.pdf"
It should be taken from SI - component scExitSamples.pj
Please do this activity after this document is reviewed & updated again - please check with me (Jan).

From GR1T 301098:
 In the APTRA on-line documentation, APTRA Advance NDC | Links to Publications topic, the link to CEN-XFS Exits in Advance NDC, White Paper is broken because the white paper, not being on IT13 CD-ROM, wasn't available for installation. 
 



Summary:
APTRA XFS link broken

Description:
On CD link to APTRA XFS Release Bulletin goes to
E:\APTRA_XFS\Aptra XFS\software\Aggs\feae7a~1\3748b3~1\release.htm
but the location on the CD is:
E:\APTRA_XFS\Aptra XFS\software\Aggs\2e6ee2~1\2ce6ce~1\Release.htm



Summary:
Various installation/de-installation quirks

Description:
1. De-installing ANDC, even when only the docs have ben installed, requires a reboot. If it really is necessary, perhaps add to documentation.
2. When selecting documentation only, the package installer gives the default folder for the software, not for the documentation. If the doc default folder cannot be given, perhaps add the info to the release documentation.

3. At the end of the installation of CLM 2.1 (during the AANDC installation) a prompt to view the release documentation for AANDC is displayed. This opens a text file that explains where the release documentation is to be found. Closing the text file resumes the installation of AA NDC, when a reboot is required to complete the installation. Rebooting continues the installation and finishes with the Aggregate Builder, which also requires a reboot. I think the prompt to view the AA NDC release documentation should be moved to a more appropriate place, or if it is not possible, to add some information to the text file saying what is going to happen next(AANDC reboot followed by resumption of installation, finishing with another reboot) at the end of which is the time to view the release documentation.



Summary:
Advance NDC 2.06 is not installed to drive selected in Installer

Description:
As the C: drive on my PC does not have enough space to install both APTRA XFS and Advance NDC on it, I specified the D: drive for both packages when installing them. APTRA XFS and its documentation were installed correctly. Advance NDC disregarded the selected drive and installed both software and documentation on the C drive. (Previous MV builds had installed the software on D but the documenation on C)



Summary:
Installing 2.6 documentation only failed to install the publications correctly

Description:
Followed IP Package instructions:
De-installed AANDC 3.0
Selected 2.06 documentation only option.
Process messages indicated success but examination of the folders showed the publications had not been installed from CD because the previous versions were still there. 
Then had to delete the 2.06 AA NDC package using the control panel *and* manually delete the old AA NDC publications from the APTRA documentation folder, otherwise 2.06 pubs could not be installed.



Summary:
TAR 279028 EJ Ack sent during txn causes EJ message retries - tbi

Description:
TAR to be integrated



Summary:
TAR 276723 - EJ Upload fails when data is sent in middle of txn -tbi

Description:
TAR to be integrated.



Summary:
Test 1.1.1.51 Once the receipt printer goes low it stops printing (UX4)

Description:
It has been observed that once the Receipt printer goes low, it stops any kind of printing from the application until any kind of operation has been done on it from the diagnostics.




Summary:
Exception error logging issue (machine reboots but no error in event log)

Description:
Seen this in a couple of situations - once on exit from SysApp when the Mode Switch was flipped before the Supervisor menu had reappeared and any time starting the apps on Drowsy it would reboot but no error in event log.



Summary:
Black.jpg is incorrect file type

Description:
Files is actually a BITMAP - The will cause XP installations to crash when entering and leaving diagnostics.

File needs to be of type JPG



Summary:
MV files to be added to build

Description:
The following files should be added to the SST and DEV PC installation as they are only required for MV

DIEBOLD.REG
NCR_SPS.REG
RESRVD.4012
WINCOR2150.REG




Summary:
StartApps.vbs is not on start menu on SST install

Description:
Shortcut to StartApps.vbs is not in Advance NDC sub menu



Summary:
Test 5.14.2.7 While performing the bad card test the application crashes (UX4 test) 

Description:
Before this happends the journal device status message "H1 fs 0 fs 00 fs 1111" is sent to the host.  I've had this crash twice while performing this test, it appears at different places.  See event and debug logs. error logs at P:\Fsd\mapsapp\mapsapp2\APTRA Advance NDC 2.06\Test Results\Test Error Logs



Summary:
Test 5.14.1.13 Test fails when cassette removed and terminal command sent (UX4 test)

Description:
The test says that if you remove the top cassette then dispense from it, the fitness (i.e. 1fsfsfs7) will say that the cash dispenser is fatal and the cassette 1 supply status is out.  However, the fitness says that the cassette is not configured and the cash dispenser is OK.  Test appears to be wrong because overall status of dispenser should not be fatal, but need to check what status should be reported



Summary:
Test 5.10.7.1 Screen flicker seen using pcx files fails

Description:
The red background is shown with loaded in bottom left corner. After sending the SST into service there is no idle sequence and the only difference is the text "LOADED" becomes "LOADED$"



Summary:
Test 5.8.10 Statement and Wait transaction reply is rejected with Scotcraig printer (UX4)

Description:
When sending a statement and wait transaction reply the ATM sends a hardware not configured specific command reject message.  This was also printed on the journal.



Summary:
Scotcraig printer shows different capture behaviour (UX4 testing)

Description:
To make a Scotcraig statement printer capture bin full you must cover the sensor and alter the capture tallies in sysapp.  When this is done the ATM will send the message V0fs2fs051001000008010004fs11111 to the host when capturing a statement.  On the next capture it will refuse to capture the statement, no more messages are sent.  The EOP displays the message "Empty Capture Bin".  This is not the behavoiur the test plan describes.



Summary:
Ulwait needs to be added to startapps.bat for XFS 4.00

Description:
In XFS 2.2 the wosactrl calls ulwait. In XFS 4.00 wosactrl is not used to start the SPs so ulwait needs to be added to startapps separately, depending on the platform present.



Summary:
Test (IT13) 1.1.1.27: Device fitness cleared at the wrong time, on exit from suspend.

Description:
Device fitness is cleared on entry to Supervisor or when OOS is sent down. Sending down TERM_CMD shows device has been cleared and is no longer reporting suspend.




Summary:
Description of Timer 92 in IT13 RefMan incorrect

Description:
Testing TAR 275917 
 
In the IT13 RefMan page 10-19, the text says that minimum value is 0 (but should be 1) and that default is 5 (should be 4).
 



Summary:
Test 5.8.1 The margins are messed up on the statement

Description:
I've retested this with setting the margins to 0 and 40 at the start of the message.  The first time it is done the message wotks, however, the second time the test is ran the margins are messed up.  See statement printout for more details.



Summary:
Test 5.7.19 Scenario 4 (Paper-Out Scenario) supplies status wrong(UX4)

Description:
Step 12) the format and fitness data was correct in the message but the supplies  status showed the reciept printer as being in a "good state" even when there was no paper in the receipt printer. Unsol message was The following unsolicited message was returned: 12|0001|G1|4|X|111 and supplies should be 3111




Summary:
Test 7.35.2.26: Extra card fatal unsols sent and card not captured.

Description:
3 unsols sent altogether - the 3rd was a duplicate of the 2nd.

16:42:39  # 80    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D3[Unicode-x1C]4[Unicode-x1C]162904100A[Unicode-x1C]0]
 
16:42:40  # 81    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]4[Unicode-x1C]200400000A[Unicode-x1C]0]
 
16:42:43  # 82    [12[Unicode-x1C]000[Unicode-x1C][Unicode-x1C]D0[Unicode-x1C]4[Unicode-x1C]200400000A[Unicode-x1C]0]

Card is not captured as it is jammed in reader.



Summary:
Test 7.15.1.3: PIN screen shows on card entry with DASH reader.

Description:
PIN screen should not show until card is removed.  Worked OK with Dip.



Summary:
Test 5.7.14 R01 data should be merged with transaction reply data on a per receipt basis (UX4 test)

Description:
This test passed ok on a Personas SST but not UX4. The first part passes. The second part fails. The receipt printed doesn't seem to be  formatted correctly. Step 11 says the terminal should return to the transaction request reply state however this is not the case as the ATM returns the card and enters idle loop.
See Usability.  Delay of 25-30 seconds observed before receipt is printed. 



Summary:
Test 5.7.8 Pre-print With Image Header failed (UX4)

Description:
Check but believe this is an ITS issue.  Transaction reply print data is overwriting the R01 data.  Retested using the TrprintMV file and it still fails, the problem seems to be with the messages instead of the application.  



Summary:
Test 5.5.11 Long Envelope Deposited solic message not sent

Description:
The solicited status message was not sent to the host.  The "ENVELOPE LENGTH ERROR", however, was written to the journal.



Summary:
92.6.0.1 - Tests 7.16.1.8 and 9 - When German is chosen, the timeout screen is still in English

Description:
For Test 7.16.1.8 timeout screen should be in German
Also for test 7.16.1.9 Currency in AMount entry should state DM not £



Summary:
Key Entry from top-level Access menu on BAPE results in Invalid data message

Description:
Write V, A and B selections from Access menu with single-length mode 1 on a BAPE results in Invalid Key Data message being displayed.
Worked ok on EPP. Able to enter keys but not write keys. Problem seen on CATERPI, tested ok with EPP on PONYTA.



Summary:
Txn reply processed by virtual controller can cause timeout

Description:
Txn Reply received flag is not set before the reply is passed to the Virtual Controller. This means that the request/reply session can timeout because of the amount of processing done in the Virtual Controller before the reply is passed back to AANDC. Contact Stephen Peat to recreate the problem



Summary:
AANDC 92.6.0.1 Install - XFS 92.2.2.4 has wrong version of SSS

Description:
The Installation of XFS 92.2.2.4 results in installation of SSS 92.1.1.1 whereas the AANDC install then prompts that the coirrect version of SSS 2.2.2 is not present and warns that the software will not install correctly



Summary:
CPM path in registry does not match path in resrvd.def file

Description:
CPM path in registry is set to C:\CPM after AANDC IT12 install. It should be set to the same path as in resrvd.def which is C:\Program Files\NCR APTRA\Advance NDC\data so that the CPM image file is saved to that directory. At the moment the CPM cheque image cannot be displayed as default.



Summary:
IT13 CD 1 issues -   6 issues

Description:
1. links to security & test documents fail where RB selected from start menu
2. AANDC apps not delivered
3. Agg builder issue grit 300820
4. AANDCAPPS directory not populated on CD
5. Apps in support files component out of date
6. pictures in security document not displayed




Summary:
UX4 test cash purge note counts not updated correctly

Description:
When Replenish menu Test Cash function runs on UX4 with IT12, if the cash counters are set to 100 for each cassette, the counts are still set to 100 after the Test Cash is complete. The counts should be decremented by the number of notes purged.



Summary:
The State 0 not expected mError not descriptive enough

Description:
Would be good to add a bit of context - what was the previous state etc.



Summary:
SV ANDC 3.0 - Mr. Wotsit causing trouble when kicked off before platform started

Description:
Note: This problem will not show in IT13 (ANDC 2.6) as wotsit has been removed from the startapps.vbs script.

The wotsit.exe is used to check what runtime is installed - SV or MV. It dynamically loads ssdsNDCFUNS.DLL, which causes ssdsNDCDATA.DLL to be loaded as well. The DllMain of ssdsNDCDATA.DLL kicks off CMMAPP.EXE (counter management module). This module tries to initialise with Ulysses, searching for device handles. If platfrom not fully started, the handles reported are still NULL and consequently the CMMAPP.EXE does not monitor for associated device events.



Summary:
Need to re-synch TLFS with IPs for worker class list - security workers mainly

Description:
x-check with Colette's IP updates to produce consolidated list; raising RFC to make sure we do work at some point & don't forget about it!



Summary:
sideays Receipt MEI's not working

Description:
Where sideways print only MEIs do not operate - where sideways and recipt MEI comes on but not off when receipt printed and continus to flash during idle.



Summary:
UX4 - Statement MEI does not work

Description:
Statement MEI works when self test done via sysapp however it does not work during a transaction.



Summary:
UX4 - Cancelling statement print when option set results in no unsol sent to host

Description:
When message mode option 3c is set and a print statement and wait function is cancelled, the unsolicited is not reported to the host.



Summary:
NDC test application repeatedly escaping (approx. every hour) during BNA transactions

Description:
Ref GR1T 247992, found during Alpha-EPP h/w ITNDC test application repeatedly escaping (approx. every hour) during BNA transactions, due to hardware exception in Customisationlayer.exe.  BNA gives identical patern of errors on each reboot.Alison has been investigating this issue, logs of failing machine is available.



Summary:
UX4 ? Test 5.6.5.  Application core crash when testing journal paper out and inserting/removing cassette

Description:
SP issue GRIT 248425.
Test 5.6.5 in 2.06 ITS.  Step 9 ? continuously removing and inserting a cassette to print to journal when testing for paper out condition caused the application core to crash.  Logs available on 
server in APTRA Advance NDC 2.06Test ResultsTest Error Logs[Unicode-x05].6.5.9



Summary:
rename SSS 2.2.2 agg to be  SSS (ANDC2.6) to identify our platform

Description:
ANDC supplied platform has modified keyboard component  - this needs to be identified.



Summary:
When unknown dispense occurs, bills requested fields are all zero (linked to TAR 271988)

Description:
SP fix needed, but also a record.cpp update needed. It is now reviewed. Test for SV needed as well.



Summary:
Update ANDC comp.ini files for 3..0 release

Description:
The version numbers and dependencies need to change to 3.0 versions. Also need to update dependency to latest platform.



Summary:
Service Pack / Product - Final apps are checked into SI and put into data.z

Description:
final applications to be built at build time and checked into SI then picked up by product builder.This will avoid duplicate work introduced by Service Pack installer build that required Apps to be checked in. Utilises new service Pack component and list file. required no updates to product builder other than addition to component list.  IP update for 2.6 to avoid MV & SV sub dirs in AANDCAPPS directory on DEV_PC



Summary:
UX4 Testing - Product Class in response to TC is 00

Description:
The product class information returned for UX4 in the response to the relevant terminal commands is 00.UX4 is 6676 - 1A 14 hexFor future info the UX2 is 6666 - 1A 0A hex



Summary:
Wotsit should not be executed in SV only startapps.bat

Description:
Branch startapps.bat depending on environment to not run wotsit when not required.



Summary:
Update Simulator documentation for MV only for 3.0

Description:
In MV the Simulator configuration should be as follows:-
XFS Simulator configuration
    a) PIN SP: SDE, Capabilities, Service Registration: vendor name=Simulation (for example), service version = 2.1, service version override = 3.0
       Capabilities, Device Capabilities, default encryptor state, ENCINITIALIZED
       Responses, Commands, CAPABILITIES - change default behaviour - change from EKC to BAPE
    b) CDM SP: SDE - Capabilities, Device Capabilities, Cash Units tab, change currency on cash units from USD to GBP
    c) TTU SP: SDE - Capabilities, Device Capabilities, tick "CR inserts NL"   restart the Simulator



Summary:
Update installer to delete XFS directory created during DEV install

Description:
XFS directory not specified as installed by IPs and needs to be removed for 2.6



Summary:
Make  build final option for MV only

Description:
No description



Summary:
Release number reported to host to be changed to 3.0

Description:
CDI holding this release number must be updated.



Summary:
Tools component with DEV_PC only for g248025

Description:
Do not add Tools Component to SST aggregates as this will turn on DebugLogRB and Package IP will need update for Agg contents and how to get Tools to SST if required.



Summary:
RB - Add details of setting the PIN SP configuration

Description:
Update the release bulletin to include information on what the keyboard needs to be setup to with the PIN SP.  Required by customers picking up new platform, e.g. XFS 4.0



Summary:
Certify UX2 Hardware with ANDC

Description:
New UX2 hardware needs to be regression tested with ANDC



Summary:
DebugOut.Dll - improve performance of life ATMs introducing a DebugLog = 0 registry setting

Description:
Life ATMs do not need debuglog output nor DebugOut output. They need only the PD output.The idea is to introduce a new DebugLog registry setting, which will be check at application startup time only. If set to 0, a fair chunk of code will be bypassed - output into DebugLog and DebugOut. If set to 1, it would work as before.This registry setting would not affect the PD output introduced in ANDC 3.0



Summary:
UX4 & XFS 4.00 Test - error when using startapps.vbs as SPs start automatically in XFS 4 when session open

Description:
Using startapps.vbs bombed out with an error when run on with XFS 4.00.  The issues was with starting the SPs.  ANDC tries to start specific SPs (eg JRNL, RCPT) which now appear to be under a generic PTR SP (included statement) however, starting of the SPs in this wasy is not required for XFS 4.00 as the SPs start automatically when a session is opened.



Summary:
ANDC IT12 - PD output does not show important control characters and does not filter out empty lines

Description:
The MESSAGEIN, MESSAGEOUT windows are captured, however, all control characters < 0x20 are converted to ?. This makes it of little use. Control characters are important for NDC+ problem determination.Also, empty lines of DebugLog windows should not be stored into PD. This creates two records in PD for one message - unnecessary clutter.



Summary:
MV references in the author projects and Developers Guide

Description:
Info from Colette on MV references:-Ive found a a bit of text and a couple of screen dumps that refer to the MV Application Core (p 5-12) and another screenshot referring to MV&SV ANDC Supervisor - pages attached.My question is: are these going to be changed in ADE or left as is? If the former, Ill need to know as soon as the changes are made so I can replace the screenshots. If the latter, then I can leave them as they are.



Summary:
SV Reasoning - defers - update code as required (refer to spreadsheet)

Description:
maintainability or unsupported functionality reasons for not doing initially



Summary:
Ensure Latest Revision of Components/Aggregates are included in Build

Description:
Need to ensure that latest versions/updates of other components (like PCCM Comms) are at the latest available revision.



Summary:
ANDC 2.6 - Appbuild - remove _sv extension for SV builds

Description:
no longer need to identify two target types of final application so _sv not required.



Summary:
Confidence test with Scotcraig Printer

Description:
Confidence test ANDC with Scotcraig Printer.  This new printer is released on UX4 h/w.  This also means that the s/w must be certified with APTRA XFS 4.0, since this is the platform required for this module.



Summary:
Ceritify ANDC with PIVAT core on personas hardware

Description:
Certify ANDC with PIVAT core on personas.  This also means that the s/w must be certified with APTRA XFS 4.0, since this is the platform required for this core.



Summary:
Ceritify ANDC on UX4 hardware

Description:
Certify ANDC on UX4 hardware.  This also means that the s/w must be certified with APTRA XFS 4.0, since this is the platform required for this h/w version.



Summary:
Create ANDC Release based upon ANDC 3.0 SV application

Description:
There is a requirement to release the ANDC 3.0 Single Vendor application as a product in its own right, i.e, without support for the MV application.  This RFC requests that the product builder, product packaging, IP be updated to reflect this.The s/w will be released under the current product ID (G531-0293) the version number of the product will be 2.6



Summary:
Printing EMV Exit Screens Using PrintToJournal API does not format output correctly

Description:
When printing any EMV Reserved Screen to the Journal the output is not formatted correctly.  A CR/LF appears to be missing from the Start of the Trace - and the End, this results in the EMV journals being mixed in with the other journalling.The ADE Implementation of PrintToJournal used to add CR/LF pairs at the S4Service level (according to Ranjith).



Summary:
The replenishment status in a G or H unsolicited message may be obsolete

Description:
To recrete problem- run Set Next State and print TXs with paper roll away from the sensor until receipt paper is low, but still before the unsolicited message is sent (there is a print in the Card Read State)- enter supervisor, diagnostics, replenish paper, exit- on exit of diagnostics a message with paper low should not be posted - in this case no message should be posted



Summary:
Improved Printer Data Logging in OOXFS

Description:
Ability to display the actual printer data in HEX and ASCII format to allow logging of printer data and responses to be better tracked.Data would be presented in a similar manner to the way memory is displayed in a debugger.



Summary:
Supply the Security component for AA NDC on its own and not part of aggregrate

Description:
With IT 12 the security component is part of the Development PC installation agg.  As part of the silent installation process you need to create your own agg to install the platform and security.  As its not on the CD on its own you have to either import the development PC agg into your runtime aggregate or workout which component of the development PC agg is security and import it.  This isnt user friendly and would be better to supply on its own and not part of agg.



Summary:
Service Packs For Advance NDC

Description:
regular updates via new installer to collate TARS and deliver to Development & live systems. new internal and external processes required.



Summary:
service Pack: DLL interface worker loads from system path

Description:
Requirement ID AANDC31 21.191.
service Pack: DLL interface worker loads from system path.

Load from selected or mapped path(ssds_apps) as well as stripping filepath and looking for DLL on system path. will help with author split maintainance and is futureproof for move to program files NCR directory.



Summary:
Ref.Manual 3-4. Add note after description of screen C05 to say card not read screen not displayed

Description:
In NDC+ when there was a card jam which caused a suspend condition, a screen informing the user that their card could not be read would be displayed before screen C05, the suspend screen was displayed. In AANDC SV and MV this screen is not displayed and only C05 suspend screen is shown.



Summary:
Debuglog.exe sometimes crashes with a c-runtime popup when logging 1st line

Description:
 After installation the DebugLog.exe crashes with a c-runtime popup when it tries to log its first line. It took us a while to find out this is caused by the fact that the files on C:Program FilesNCR AptraAdvance NDCTools (Unsupported)DEBUGAutosave are installed as read-only. Our suggestion is to have the installation program set these files to r-w



Summary:
Check t05 and t06 in Ref Man against RESRVD.DEF

Description:
Ensure t05 and t06 in Ref Man match updated definitions in RESRVD.DEF (MODULE not MODLE, Cheque not Check)



Summary:
Resrvd.def screens t05 and t06 need updated for spelling and clarity

Description:
t05   CHQ PROCESSING MODLE INITIALISEDt06   Check Processing Module Transport ClearedIn t05, should MODLE -> MODULE?In t06, should Check -> Cheque? (otherwise could imply you should check if the transport is cleared, rather than confirming it is cleared).



Summary:
MV Change Key Entry Mode screen (Access Menu function 25) not implemented correctly in IT12

Description:
When changing key entry mode by selecting Access menu -> 25 <ENT> -> 9 <ENT>, the current key mode and new mode entered are not displayed.



Summary:
Release Bulletin - Missing TAR details

Description:
Release bulletin for IT12 does not show that TARs 272435 and 272101 are fixed with this build.  Update the RB to show this.



Summary:
Multivendor support reference needs to be updated with XFS suspendtimeout issues.

Description:
GRIT as a result of TAR 271370.Section 4-7 of the multivendors reference should be updated with the following information.From:Although the host removes the application from the Suspend state, a go-in-service (GIS) terminal command will not be actioned nor a Ready 9 response sent until the SP has cleared the device Suspend state.To:Although the host removes the application from the Suspend state, a command to change the mode will not be actioned nor a Ready 9 response sent until the SP has cleared the device Suspend state.The reference to the APTRA Advance NDC, Developer?s Guide will need to be removed/updated as this document does not contain any references on XFS suspendTimeout. The best referance is the capabilities section of each Service Provider (XFS Documentation) but this is a sperate install - XFS documentation only. It contains the information below - but I think we should state that we change the default to 60 seconds to ensure suspend is reached.SuspendTimeoutTime (in seconds) for which the device is suspended when customer tampering is suspected.Minimum : 0.Default : 300.Maximum : No Limit.



Summary:
Ref. manual to explain journal mode change from dual to paper when h/copy backup msg sent

Description:
Section 11-33 needs to be updated to say that when the journal printer backup option is set, if the journal mode was set to dual, the journal mode will be reset to paper because hardcopy backup is on.



Summary:
Test 7.6.1.22 Part of WITHDRW20 message not printed to journal but printed to EJ

Description:
EJ log displays all data as shown by test step 3. Journal printer only prints up to W0237Y.Happened more than once. Machine = MO with SV build IT12-3



Summary:
SV Reasoning updates identified in spreadsheet need to be done

Description:
raising this again to be sure we have this covered



Summary:
Reasoning Maintenance report updates to be done

Description:
1. FreeMessageMemory() in memman.cpp (NDCCore) - need to take copy of memory pointer before free() is called, using copy to remove entry from list. May cause memory leak if pointer is changed by call to free(); R62 in maintenance report2. Defect R34 in maintenance report (4June2004). handler.cpp nNDCTrHand::ProcITR - need to handle strchr null values - only a problem with an invalid/corrupt ITR message



Summary:
Developers Guidelines - Updates identified at TAR root cause meeting 6 Jul 04

Description:
From ANDc 3.0 TAR Root cause meeting on 6 Jul 04:The followign updates should be made to the developers guidelines:1) Add guidance that integer stores should not be shared from code.  If they are, it results in a memory leak from MS OLE.DLL.  Seen when running tests on XP.2) Add recommendation to use Microsoft leak tool to detect memory leaks.  This has been obtained from MS and is currently on e-mail.  Used successfully by Stephen3) Add recommentation to use GFlags when tracking down access violations on XP.  Used successfully by Jan.



Summary:
Separate APTRA Security to work with MV aggregate

Description:
1. change use of XFS key to HKEY_LOCAL_MACHINESOFTWAREClassesWOSA/XFS_ROOT in reg files2. Obtain ssds version of new APTRA Security3. any other changes as required.



Summary:
MV Version of EJUpload in Basic SS Has Dependency On OOADI that should not be there and causes clean build to fail

Description:
Change TO EjUpload DSP to remove unnecessary dependency.



Summary:
Reprinting from journal backup (dual mode) during a transaction causes delay

Description:
In dual mode the journal device was fatal.  Backup kicked in and logged information.  The journal device was cleared (without entering supervisor).  The next attempt to print to the journal was during a cardholder transaction and resulted in the contents of the backup log being printed (as expected) then the journal data in the transaction reply being printed (as expected).  The reprinting of the data in the log at this point however caused a significant delay in the completion of the transaction as all the buffered data is printed first.



Summary:
IT12 Update MV - Encryption key entry screen format not correct

Description:
FDK key legends and CURRENT DIGIT = missing from screen when ENTER x selected in Access menu to enter the encryption keys.  SST used was SNEEZY with EPP configured.



Summary:
Test 7.28.5.33 - Receipt is presented.  Update Test Case

Description:
Reported by HCL:Test case saying receipt should not be presented but it presents the receipt. Tested in 2.05 too and that also returns the receipt.So, this is not a problem and the test case should be updated.



Summary:
Security Trace Number Missing From E1211 Presenter Error Entry

Description:
When Cash Is Retracted during Card Before Cash Function the PRESENTER ERROR message is printed to journal without a security trace header.  Worker 9c8p2 in the Customisation Layer has hardcoded the information, rather than retrieve the screen from the RESRVD.DEF file.(I think the security trace number might also apply to the Specific Reject Status Command - but I am not sure).



Summary:
IPs need to reflect the options available for getting around the 25 avi limitation

Description:
1) Describe limitation2) State that limitation has been fixed in XP and define how to obtain fix, nature of fix i.e. increases limit to 200, registry entry to enable fix3) Describe memory limitations i.e. 100 avis requires 256MB RAM



Summary:
Package IP: transfer  RB info to User Information topic (IT13?)

Description:
The following information currently in the Release Bulletin should be transferred to the Package IP to reduce the size of the RB.The APTRA Advance NDC documentation is a combination of publications in Adobe Acrobat Portable Document Format (PDF) and on-line help files. The documentation is installed during the APTRA Advance NDC development system installation.The on-line help files provide context-sensitive help for the APTRA Advance NDC and APTRA Advance ADE Runtime components.To view the PDF documentation, you need Adobe?s free document viewer, Adobe Reader version 5.0 or later, available from www.adobe.com. (This last bit is already in Prerequisites but worth duplicating for usability.)The information can then be removed from the 5. DOCUMENTATION section of the RB leaving just a sentence saying there are no late-breaking changes to the IPs (if none have come up of course!).



Summary:
IT12-2 SV - Statement printing anomolies sideways on receipt and on statement printer

Description:
Couple of issues which need clarification as the existing documentation is not clear on how this should work.1.  Func P (Statement & Wait - no FF in the reply) when using the statement printer, prints the statement information and waits for the next reply from central.  Subsequent func Q (Statement & Next State) statement data is appended to the previously printed data and delivered as a complete statement.  When the same scenario is repeated on the receipt in sideways mode, P causes an immediate cut and deliver.  This may be a restriction in sideways mode on the receipt but I am not sure.  Need to verify with NDC+.2.  Func P containing statement print data, receipt and journal data (printer flag 3) when printed to the statement printer causes statement print (as expected), print to receipt but not journal.  Same scenario on receipt in sideways mode results in no journal or receipt print.  With both devices, a subsequent func Q with receipt and journal data results in both being printed.  Existing documentation implies by omission that no receipt or journal data should be printed with func P.



Summary:
Need to apply 2nd part of TAR fix 250863

Description:
A further issue has been reported for TAR fix 250863 when running on p70 spray dispenser.  The updated fix needs to be applied to ANDC 3.0More information - the issue reported by the 2.x customer was caused by a build issue (depdendency across sources).  So simply check that the sources are incorporated correctly.



Summary:
Supv Ref/MV Ref Manual - PRNT SCRW VERS function needs to be updated

Description:
The PRNT SCRW VERS information cannot be retrieved in an MV environment and will always print a default message.  This is not currently documented in the ANDC IPs.



Summary:
Reference Manual - References to timer 77 for BNA when removed in a previous update

Description:
The Cash Accept State and Timeout State make reference to timer 77 (BNA).  This timer does not appear in the lists in the configuration parameters/enhanced configuration parameters sections and there are also references in the revision record that this timer was removed in a previous revision.  Need to establish whether the timer should be re-instated in the configuration/enhanced configuration parameters lists or removed from the Cash Accept and Timeout states.



Summary:
When moving operator from rear to front, password is asked, but pressing CANCEL gets you through

Description:
The default password is 2468, but with the new Advance NDC 3.0 there is an easier way - just press CANCEL.I suspect that this is due to the new Cancel signal on Supervisor Data Collector and this signal is wrongly tied up or something.



Summary:
Support new VPI comms interface for dialup

Description:
Support new VPI comms interface for dialup as defined in the VPI comms Architecture Specification 445-0654203C.doc



Summary:
Wincor - need to display when Exchange mode has failed that enter should be pressed

Description:
In IT 12 testing, it does not cause hang, but if purge bin is pulled out and thus Cash Handler is fatal, it redisplays the EXCHANGE MODE screen a second time and wait for enter.It should inform on the fact that EXCHANGE MODE failed and prompt for enter and then work as now, i.e. continue with Add Cash.



Summary:
Wincor test 7.21.6.14 - supervisor walktrough - still issues

Description:
GRIT 243540 is closed, but still not fully resolved, so these are the remaining issues1) in IT12 the Correction key works like backspace not like clear. We should document the way this can be changed, and possibly include it into our Wincor2150.reg?2) Step 47 - still shows INITIALISATION FAILURE and not DEVICE NOT PRESENT3) Step 102 - does not go to receipt as the test expectation is, it was a rear machine with working Receipt and EJ. Data went into the EJ. What is NDC+ doing? Possibly need to explain in pubs as well.4) step 18- Hallmark - still returns INITIALISATION FAILURE



Summary:
Wincor moving from suspend to supervisor does not work

Description:
debug log states that supervisor mode is requestedthen suspend mode stopped attempting to clear the devicedevice does not clear and suspend mode is not entered.could not move OOS or GISsuspend was created on the cash handler



Summary:
Wincor - 7 Diagnostics - the Shutdown option not shown on the middle machine

Description:
The 7 - DIAGNOSTICS - shutdown option does appear on the Gourdie machine (supervisor toggle switch), but not on the middle machine (supervisor button)



Summary:
Wincor - The Print Config receipt not nice, date and time wraps onto next line

Description:
The following bit of the receipt show the problem. Should be solved by editing reserved.def. Spaces between DATE and TIME not necessary. Strange that it is DATE= and TIME = ...DATE=15/06/04           TIME = 10:26:44...



Summary:
Wincor - test 7.28.3.3 - chained printing to receipt - print is incomplete (line of data missing)

Description:
The test chains two transactions - messages G623GOOD and G623BAD. It loses the last line of the first message. If printed separately, i.e. transaction is not chained, close state delivers the receipt correctly.To recreate, just run the test properly and observe that the third line in the expected results is missing on the receipt.



Summary:
MV - Duplicate cassettes are not excersised in Test Cash

Description:
As duplicate cassetts appear under the same logical type the 2nd (& 3rd?) of the cassettes is  not excersised under tests cash OR counts are not updated for Display cash.



Summary:
wincor - Merror where cassetts not configured during clear cash

Description:
clear cash should ignore NDC types that cannot be mapped not Merror



Summary:
Diebold TTU Requires Focus For Keyboard Input

Description:
When the Diebold TTU Service Provider is displaying on the rear, the TTU window requires focus before any keyboard input can be processed.This can be achieved by adding a script host that queries for the presence of the TTU and then call AppActivate for the Text Terminal Window before displaying a menu.It is better to get the name of the Application from the Registry as it can be configured by the user to be any name they want...as shown belowset WshShell = CreateObject(WScript.Shell)	 On Error Resume Next          	 TTUName = WSHShell.RegRead (HKEY_LOCAL_MACHINESOFTWARENCRAdvance NDCAliasesText Terminal Unit)	 If TTUName <>  then    Provider = WSHShell.RegRead (HKEY_CLASSES_ROOTWOSA/XFS_ROOTLOGICAL_SERVICES + TTUName + Provider)    TTUAppName = WSHShell.RegRead (HKEY_CLASSES_ROOTWOSA/XFS_ROOTSERVICE_PROVIDERS + Provider + WindowTitle)    WshShell.AppActivate TTUAppNameEnd If



Summary:
NVRAM mentioned in Reference Manual but no longer used.

Description:
NVRAM should not be mentioned. Could be replaced by persistent memory or similar



Summary:
IP should clarify what SP should be started when

Description:
The current startup scripts already reflect that, however IP should say that in the SV system not all available SPs should be started, but only those that are related to devices accessed by using CEN-XFS. For example, CDM SP should not be started in the SV system as cash handling is done by using the ADI2 interface. There is a known conflict, which causes a power failure problem in the SV system if CDM SP is running.For more information, please speak to Peter Turner, the originator of this idea in the Exits white paper review.



Summary:
SV state number displayed on Close State screen when no error has occurred

Description:
TAR 243463 - Undefined state is not displayed during default close state. This TAR displayed the previous state number when there was an error in the state download. Seeing the state number being displayed when there is no error with the CPMTEST3.txt download and CPM_TR1 is sent.



Summary:
Need to apply 2nd part of TAR fix 257785

Description:
There has been an update to the fix for TAR 257785 - this update needs to be incorporated into ANDC 3.0.



Summary:
Application exception where extended cassette types enabled

Description:
array protection required when checking tamper in cases of extended cassettes.



Summary:
Wincor - Envelope dispenser suspend not exited correctly

Description:
Further update to GRIT 241001 for envelope device



Summary:
CCM DIALUP POTS: Support specific hardware (to be decided)

Description:
Internal Multi-tech ISA modem must be supported



Summary:
Keyboard Handling Hook

Description:
NDCCUST already provides a hook for screen display that allows external programs (Promote and AFA) to intercept and process screen information.  There is another side to this in that key presses need to be processed also.  If a hook similar to the Screen Display hook was added then it would make implementing exits easier as it would allow screen display and keyboard  handling (including touch) to be processed centrally.Currently customers are using ADI to handle keypresses - but this does not work on a Touch Screen system.



Summary:
Worker categorisation / description changes in TLFS : impact on Information Products / Release doc

Description:
updates to the TLFS to synch with IPs revealed several changes that need to be made which impact the IPs (or release doc if not time to do IP updates). Detail of updates needed captured in email as cant attach file to this GRIT



Summary:
update RB with Wincor priniting info.

Description:
New information about setting margins and K screens on wincor.



Summary:
Wincor Supervisor walkthrough - promote sceens and functionality is not present.

Description:
Promote should be supported on wincor - the supervisor functions to support this are not present in the supervisor application. Resrvd.def for wincor should be updated and the missing functionality should be investigated.



Summary:
Wincor Supervisor walkthrough - PD prompts are in title cse

Description:
This is not consistant with the rest of the supervisor application. This will only be a problem if someone decided to change the K screens in supervisor - lower case characters may not be supported by the character set.Impacts both SV & MV build



Summary:
AppCore-Memory in message buffer from outbound interceptor was not allocated using API

Description:
Found when testing ANDC 2.05 on UX4 with XFS 4.0 platform.  Characterised by Jan Vesely.mError in ApplicationCore.exeDescription: <SCFILE>  </SCFILE>      <SCLINE> 0 </SCLINE>     <FUNCTION>  </FUNCTION>     <FREE> Level: 2       Domain: 116       Error Number: 8    Worker Id:     Description: Memory in message buffer from outbound interceptor was not allocated using API AllocateMessageBuffer            </FREE>



Summary:
CustApp-ScreenDispUpdate is not recognised as a variable or function name. error message

Description:
Found when testing ANDC 2.05 on UX4 with XFS 4.0 platform.  Characterised by Jan Vesely.mError in Customisationlayer.exeDescription: <SCFILE> R:ssdsinterdomainComponentsMAPSRTCoreSourcescppmbparse.cpp </SCFILE> <SCLINE> 493 </SCLINE> <FUNCTION> </FUNCTION> <FREE> Level: 1 Domain: 0 Error Number: 153 Worker Id: Description: Authoring Error, Class Evaluator -ScreenDispUpdate is not recognised as a variable or function name. </FREE>



Summary:
Wincor - FDK emulation for operator on the front did not work

Description:
Service Provider indicates that FDKs are present so no touch events will be generated.When FDK emulation switched on FDK events are set as terminate events so pressing an FDK causes a terminate to occur



Summary:
Support for secure key entry to XFS 3.02 and ANSI X9.24-2002 standard

Description:
Need to support secure key entry direct to PINPAD and make all modes like SV restricted mode in that there is only one use per key. This means no B key and no Supervisor key entry. It also means that the PIN cannot be entered through the rear for settlement transactions. Not sure if this will be available for encryptors other than EPP.



Summary:
MV Ref Manual - explain use of IsMultiVendor() expression as referenced in white paper

Description:
Need to explain to users that they can use IsMultiVendor() expression to dictate their author flow to choose SV or MV execution.



Summary:
Ref Manual 9-7 Field ca2 needs to be changed

Description:
Change from 2 digit number (01 - 50) representing a denomination. to 2 digit hexadecimal number (01 - 32) representing a denomination.



Summary:
MV IT11 - mError (WFSClose -22) when entering diagnostics (repeatedly)

Description:
When entering and exiting diagnostics quickly, after a time, mError will be raised- observed either from supervisor.exe or applicationcore.exeThe mError details show that WFSClose() command returned -22.



Summary:
Support wincor mode switch as optional device & implement safe door solution to enter supervisor

Description:
some debate as to whether we need to provide another alternative from mode switch for wincor machines. Originally we dicated as mandatory but concern over installed base. Netherlands implemented an alternative solution based on safe door sensor which could co-exist with a mode switch solution (i.e. we would recognise both safe door and mode switch events to enter supervisor)



Summary:
Remove Compilation Warnings

Description:
Requirement ID AANDC31 21.175.
GRIT 244761	Remove Compilation Warnings.

Currently there are compilation warnings generated when compiling the ANDC product.  Update the source code to remove these.



Summary:
Usability - Supervisor Data Entry

Description:
Was GR1T 241130When entering data in supervisor, e.g. encryptions keys, the user interface does not keep up with all keys pressed by the user.  If the user presses keys as fast as possible, many are ignored, i.e. no beep & not accepted by terminal.  Issue for both front & rear displays.Request that we look to improve further the user feedback on data entry.



Summary:
Pre-requisite Knowledge - XFS Programming

Description:
It should be stated that ehancements to ANDC that require programming to the XFS interface (e.g. C-Exits, ADE workers) then the reader needs to be familiar with the CEN XFS standard & be experienced in progarmming to the XFS interface.  Thsi is not called in the the developers guide.  I am trying to find out if there will be a course associated with this also.



Summary:
DIEBOLD SP Does not report all physical cassettes

Description:
NCR Code assumes that cassette info includes all possible physical cassettes - Diebold only provides those present



Summary:
DIEBOLD TTU Service Requires CR/LF Pairs to display correctly

Description:
The Operator Text worker strips out CR from any screen data before displaying, this causes all data to be displayed on one line.



Summary:
ANSI PINBlock Data needs preceding 0s stripped from PAN Data on Diebold Machine

Description:
ANSI PINBlock Data needs preceding 0s stripped from PAN Data on Diebold Machine in order to generate the correct ANSI Pin Block.



Summary:
Entering card in iMCRW causes weird app hang scenario.  But why?

Description:
Happened once during BAD READ testing.  I have all logs and have passed on to Eddie to see if he can tell what is going on.



Summary:
7.15.1.3 Test Fails with DIP. Pin Entry State Activated when card is insterted

Description:
Should only happen when card is removed. Yogesh made a fix for DASH - fix needs to be made for DIP as well.



Summary:
IT9.1 SV - Regression.  Presenter Error unsol printed on journal contains notes dispensed value

Description:
Notes retracted resulted in correct status being sent to NDCHost (E500000000) however the notes dispensed values in the transaction reply were printed in the status on the journal (E501020000).  Notes dispensed values should not be printed.



Summary:
SV XP IT9 - NWCUSTOM - The select language screen after card entry only partially drawn

Description:
I have seen that twice today hence this GRIT.What happened was that only the top part of the screen was drawn - only the ENGLISH prompt and all the other prompts for German, etc. were not drawn.



Summary:
IT9.1 SV - Regression.  Format of specific command reject printed on the journal is incorrect

Description:
In the examples detailed here, the specific command rejects are reported correctly to NDCHost however, they are not printed correctly on the journal.Reject C01 printed (starting in column 6) as *TTTT*2**C01*.  The correct format is *TTTT*2***C01Reject B11 printed (starting in column 1) as *TTTT*2***where TTTT is the transaction serial number.



Summary:
Focus Issues: Ensure all scenarios for transferring Op I/F show correct app on front and rear.

Description:
Define good test case & run tests



Summary:
Additional Information required re Documentation Only installation

Description:
The APTRA Advance NDC User Information htm page details that the documentation only can be installed.  Expand to detail that the documentation for all the components in the ANDC aggregate is installed ie no just those listed on this page.



Summary:
Redundant files on release CD

Description:
Advance NDC SSTinst MV.htm and Advance NDC SSTinst SV.htm are included in the html directory on the CD.  Are these used?  If not they should be removed.



Summary:
Package IP Issues

Description:
Checked the latest updates to the package ip (dated 19/4) and have the following issues:-1.	APTRA Advance NDC Package ? since link to General Description has been removed, can you be more explicit ie include id or info re accessing the document.  Re-installing Advance NDC also.2.	APTRA Advance NDC Package Components ? Note should be updated.  States XFS should be installed on dev PC or any NCR terminal in a CEN XFS 2.0 compliant environment.  This is also applicable to single vendor.  (See Advanced Installation)3.	Aggregate Builder Tool version number is 02.00.064.	Upgrading or Re-installing Advance NDC ? references removal of ADE.  This is no longer applicable. 5.	Pre-requisite Software ? software versions numbers are not detailed in the software bulletin.  This needs to be checked.  May need to be included.6.	Pre-requisite Software, Runtime System (SST) ? updated 3rd bullet and remove 4th.  APTRA XFS provides the CEN XFS 2.0 compliant service providers.7.	After Installation ? references to Windows XP and development PC re debuglog and NDCHost.  Remove??  Please check this - author not supported in XP.8.	Unhandled Exception Handling ? references a readme.txt file installed.  Could not find this.  I Will check SST.



Summary:
Installtion - Remove the buttons & replace with hyperlinks

Description:
There have been some issues reported with the installation buttons sometimes not working from the package IP.  Possible root cause is missing OS dependency.  To avoid problem in the field, remove the buttons & replace with Hyperlinks.



Summary:
Performance of MV vs SV - Standard Dispense Transactions

Description:
For some standard dispense transactions, MV ANDC performs better than SV up to cash taken.  From cash taken to card or reciept delivered, SV ANDC performance is better.See attached file (or if not present in this GRIT, see \sgbdun100orgsharemapsappmapsapp2MV NDCDocuments|ITSPerformance Times.doc)



Summary:
Development Environment is supported on NT only - package IP

Description:
The development environment for ANDC 3.0 is supported on NT only - i.e. XP environment is not supported.  Update the package IP to reflect this.



Summary:
Reference Manual - Updates made for Send Tally and Send Error Log need to be revisited

Description:
The updates to include the Send Tally Information (9-31) and Send Error Log Information for ANDC 3.00 has been updated to include the default information now returned however, the original information still exists in the document and is no longer valid.  These sections should reflect how is works now and all references of how it used to work should be removed.



Summary:
MV XP IT8 - When depository Print Cartridge hangs, issues with the flow (test 7.28.5.57)

Description:
I ran the test also for the error branch, when the print cartridge was taken outI used the NWCUSTOM download the DEPOSIT trans reply messageThe same with the APPC, LD, DEP_910 download.First transaction1) Envelope Dispensed Ok2) Envelope depository does not open, but the beeper still beeps twice 3) ATM stays as if waiting for the deposit, the CANCEL key exit option is advertised on the screen but the key is inactive. The ATM does send a solicited status message F2, but the screen still stays at please deposit your envelope. Should it not be at the PLEASE WAIT SCREEN again after the solic is sent?4) I did not send any other reply. After timeout 03 expires, card is returned and ATM returns to Idle. This is Ok.5) On the next transaction, the envelope is not dispensed, which is perhaps Ok. Deposit shutter does not open. Solic F2 is sent, but again the screen says please DEPOSIT ENVELOPE.



Summary:
TEST 7.35.2.5 Fails IT8. Two fatal unsols returned by cash handler

Description:
May not be a problem but the test details only one fatal unsol is returned - Im getting two.12fs000fsfsE400000000fs40000fs10fs1000012fs000fsfsE400000000fs40000fs00fs10000



Summary:
Publication set provided for AA NDC needs a complete overhaul

Description:
Pubs need to be restructured and rewritten to: reflect current software with focus on Advance NDC/XFS; fully integrate all the ADE publications now that Advance ADE is no longer a separate product; eliminate duplication; remove unnecessary information about unsupported functionality; improve usablity; and reduce maintenance overhead.Additional information from TAR 270141:Request from PS.Can the documentation for AA-NDC 3.0 be completely reorganized, it is more than chaotic now: Could it be better organised as one document for each ofparts: GenDescription, Installation, Reference, Supervisor, Diagnostics, Development?



Summary:
Wincor -Receipt Printer Paper Out Caused G0 to be sent before a G4

Description:
Wincor -Receipt Printer Paper Out Caused G0 to be sent initially. when the paper was removed from the receipt printer a 12 FS 000 FS FS G0 FS 0 FS 00 FS 3111 before a 12 FS 000 FS G1 FS 4 FS 05 FS 3111. This could be proper behaviour.



Summary:
SV Sneezy test 7.16.1.19 D screens in DisplayScreen dont alternate to menu screen

Description:
The Display Screen menu prompts to select a screen number, then displays the screen. But with D screens the actual screen is displayed twice rather than showing you the prompt



Summary:
SV: All MEI calls should be XFS now but Cash and Card still use ADI in SV environment.

Description:
No description



Summary:
ooxfs debug log output needs to be done in a release DLL

Description:
need to assess performance impact as reason for debug DLL only output was that perfomance was impacted - could have less debug log output (high debug)



Summary:
Add Cash Guidelines (inc Wincor cash setup) not in publications include in release document

Description:
email describes detail to include (richard / peter have copy of this)



Summary:
CCM PCCM chm file states wrong location of xml and xsd files

Description:
grit raised so we remember to update chm for next release. Location of CCM PCCM xml and xsd file is now under ncr aptraccm pccm to conform with aptra security. Chm still says its under ...document and settings.... This should be documented in the RB.documented in 92.0.1.2 RB



Summary:
Check all ADI calls which return data for memory corruption based on Donalds recommendation

Description:
Analyzing code to determine potential for problem occurring & possible solutions



Summary:
SV - Security Messages from Host will not be processed if SV application in Supervisor Mode

Description:
Ex., Exchange of keys



Summary:
Additional Packaging Requirements - ANDC 3.0

Description:
There are some additional packaging requirements for ANDC 3.0 as follows:1) APTRA Security Patch for ANDC - this needs to be part of the install CD and instructions provided that detail this patch must be applied after the APTRA Security component in installed when the customer implements APTRA Security for XP.  Additionally, for NT customers, we need to detail that teh c:ssds directory must be left R/W/X to allow ANDc to run.2) SSS 2.2.2 containing required platform updates to support ANDC.  This includes - EDEP SP, PIN SP, SIU SP service providers and Low Cost Receipt Printer Driver update



Summary:
Do not support EKC

Description:
Currently their is only 1 ANDC customer that uses EKC today, all other customers use BAPE of EPP hardware.  As part of ANDC 3.0, there is no requirement to provide supoprt for the EKC device - by the time the customer (Postbank) have moved to ANDC 3.0, they will have installed EPP hardwre in their network.  Thus drop support of EKC from ANDC



Summary:
reasoning document updates to include in release document - refer to spreadsheet

Description:
No description



Summary:
update OOXFS FS with better description of sync/async calls + resynch with code changes

Description:
See Peter Turner for details of changes.



Summary:
TLFS Update required to reflect the fact that the Message Format Parameter val 0 & 3 now supprtd

Description:
No description



Summary:
TLFS needs update to reflect the addition of KeepAlive aparmeters to TCPIP Registry entry for NT

Description:
No description



Summary:
Wincor- goes into supend but does not come out

Description:
hold cash, hold shutter, hold card - enters supend , status message OK - will not recoverSP needs to change status



Summary:
Debug Log Version Number Update - To be done prior to ANDC 3.0 ATC

Description:
FGSC have reported that ANDC 2.5.0 shipped with debug log reporting the s/w version number as 92.05.00.03.  Prior to 3.0 being released, we need to ensure that the version number reported is the released version & not pre-release.  Also, this needs to be built into the product build guidelines for future reference.



Summary:
How to handle posible fraud status info sent to a switch

Description:
Currently we have told the switches what combination of T-Code and M-Status may result from fraud.  Based on this the switch will or will not reverse the transaction.  In the MV space the M-Status returned will mean different things dependent on what vendors machine its returned from.  We need to look at how we handle this such that the switch will still work correctly.



Summary:
When workers not delivered, remove worker class help

Description:
Currently stubbed AANDC 3.0 workers still have worker class help. Remove help when/if actual workers are removed from AANDC.



Summary:
Provide new MSI based installer to eliminate CLM & Install Sheild 3

Description:
Provide new MSI based installer to eliminate CLM & Install Sheild 3.
CLM is currently unsupported and complicates the install / deployment process when combined with aggregate installer. Install sheil 3 used as basis of ANDC installer - this does not have the features required to interface with aggregate installer. Removing CLM will reduce the complexity of AANDC installations as we will not require extra vb script etc and give a more professional look/feel/reliability to the product. Also will be able to support uninstall/upgreade/service packs more easily/efficiently.This is not a trivial task.



Summary:
Allow resrvd.def to be identified

Description:
There are as leas two versions resrvd.def at present aimed at different TTU screen sizes. A way of identifying the version  of a resrvd.def file is required.  Could update resrved.def parser to allow REM statements or create a dummy screens at top with version info.



Summary:
TLFS - update to remove default parser form printing section(s)

Description:
default parser supplied will be for NCR printers - not generic printer as originally proposedFollowing the CCB, the description has been clarified to be:The RFC should read that the registry settings that are installed are for NCR h/w, i.e. there are no generic registry settings.



Summary:
ANSI standard X9.9 and X9.19 for single and triple DES MACing should be stated in ref manual

Description:
P11-9 In the introduction to MACing we need to say that Triple DES MACing conforms  to ANSI standard X9.19, and Single DES MACing conforms to ANSI X9.9



Summary:
Installer - uninstall key not created correctly

Description:
Setup.exe for dev system needs to create uninstall key so that the agg inst knows it has installed OK. previous was done by script but allways worked even if install cancelled.uninstall command needs updated fron IS3 uninstall to a batch to tidy up folders etc.



Summary:
Error Log and Tally info is wrong for date/time description - should be last date cleared not current date as per NDC+ FS

Description:
GRIT 238853 - Phase 1 IT - generated RFC on basis of this GRIT being raised which resulted in a TLFS update being needed!Clarification to description - a fixed date/time will be returned rather than last date cleared.



Summary:
Prog Ref Manual - BNA state table, escrow capacity depends on BNA h/w

Description:
For the BNA1 hardware , the escrow capacity is 60 notes, for the BNA2 the escrow capacity is 100 notes. Accepts a bunch of up to 50 notes into the escrow needs to change to reflect this.Refunds requested notes, or if there are more than 50 notes inthe escrow. This needs to change to say, or if there are more notes than the escrow capacity



Summary:
Prog Ref Manual - BNA state table, fixed timer is now 60 seconds

Description:
P121. BNA now waits 60 seconds, 30 slow beep & 30 fast beep, for notes to be taken. Table entry 6 of extension state 2 needs to be updated.



Summary:
Wincor Security functionality requires to send the command  - WFS_CMD_PIN_INITIALISATION

Description:
But, this command is deleting all the previously entered keys - need to investigate on this



Summary:
BNA hangs when add notes selected, more notes entered and hold the notes

Description:
If notes already at escrow and more notes added, if the notes are held the BNA tries to reject the notes. When the notes are taken the BNA does not return the required processing completed event to allow the application to move on. Need to check if this is BNA2 only or BNA1.



Summary:
BNA timer needs to increase for >50 notes in escrow

Description:
BNA2 can hold up to 100 notes at the escrow. Currently the application shows a h/w errorscreen if the notes are not taken after 30 seconds. The timer needs to be increased to allow 2 refunds of up to 30 seconds to take place with no h/w error displayed. There is no event returned to say that 1st bunch has been taken so timer must cover both bunches. To be applied to 2.05 and 3.0



Summary:
Beeping while notes are presented

Description:
ANDC: When retract disabled, does beep when notes presented and the local option is set. How long? It changes, usually as long as the printing takes. In the lab, I usually heard about 2-4 beeps.NDC+: When retract disabled, does not beep at all, even if the local config option is set as not defined how long this should be.Should there be a change? Should we just record the fact in ANDC pubs?



Summary:
AANDC 3.1: Always install Presentation Client & Dialogs components, and stub class for Content Provider

Description:
This is an RFC for AANDC 3.1 to always install, configure and run the Presentation Client and Dialogs components, as well as a stub class for the Content Provider.This will improve efficiencies in testing, with only having one software configuration to test instead of two: (i) AANDC only and (ii) AANDC with Promote installed.Note that a similar RFC 227635 was accepted previously for AANDC 3.1 to take ownership of and ship the Presentation Client with AANDC.



Summary:
PD Support - Recovery from Start Failed condition should not require manual intervention

Description:
Problem Determination Support.  If Start Failed error is resturned, it is defined that to recover the situation, manual intervention is required.  This is not possible in an unattended s/w environment.  Upadte the software to automatically recover from this situation.



Summary:
Implement RSI functinality in Multi-Vendor Advance NDC

Description:
Currently Advance NDC controls the green RSI light and the platform (System Monitor) controls the red and amber lights. Future platform versions (XFS only) will not support the RSI. Applications should use SIU API to drive those LEDs.As part of TAR 249332, it came out that there are functional differences between the NDC+ OS/2 and AANDC NT implementations. It seems to me that the OS/2 implementation was more logical and should be implemented as part of this RFC, see the e-mail below.===========Hi David I have investigated the RSI issue. The amber light does work though there are some differences compared with the way it worked in OS/2 with NDC+. Green LightOn - when the ATM is in one of these modes: In Service, Supervisor, SuspendOff - when the ATM is Out Of Service or Offline. Previously the green light was on only when the ATM was In Service. Amber and Red LightsThese lights are controlled by the System Monitor of the platform.It is necessary to switch the RSI support ona) Enable the device in 8 - Self Service Configuration, 3 - Configure Devices. Reboot required. After that SDC Remote Status Indicators service should appear as one of the devices in 8 - Self Service Configuration, 1 - Display HW Detailsb) Set this registry key HKEY_LOCAL_MACHINESOFTWARENCRAPTRA Self-Service Support (NCR Features)SystemMonitorOperational ParametersControlRSI=dword:00000001   Note: Default is 0. Reboot.  The table below shows the logic used to light them up. Current State Of Health Red RSI  Amber RSI  Comments A device needs attention now  On Off fatal condition(s) and possibly also warning condition(s) A device needs attention soon Off On warning condition(s) only No devices need attention Off Off ATM healthy  As you can see, the read and amber lights are now mutually exclusive.  Previously, both lights could be on, meaning that there are both fatal and warning conditions.  Testing example1) Clear all ATM faults - both read and amber lights should be off2) Remove a cassette - amber light comes up3) Reinsert the cassette while notes are low - amber light is still up4) Replenish the low cassette - amber light is off5) Remove receipt paper and run some print operation (e.g. a transaction that includes printing) - red light comes up6) Clear the out of paper condition in SysApp - the read light is off  Hope this explains. RegardsJan



Summary:
Spray dispenser - explain in detail what counts are returned in the cash handler solicited message

Description:
comes from TAR 250541 where the cash handler counts returned were at dispute.-----Original Message-----From: 	Baslington, Mike  Sent:	13 October 2003 08:41To:	Low, DavidSubject:	RE: Partial DispenseDavid,Setting option 4c to added the notes presented count is only useful for a spray dispenser.During a dispense operation the dispenser produces 3 sets of count:	Notes delivered to card holder.            Notes moved to purge bin.            Notes to an unknown destination.The dispensed counts in the status message report the Notes delivered to card holder counts except in the event of the dispenser t-code being set to 3 (unknown dispense) when NDC+ will set the dispensed counts to the number requested by the host in the transaction reply.The present counts report Notes delivered to card holder + Notes to an unknown destination.I would expect that Notes gone to an unknown destination is normally zero so the two set of counts will be the same butI am not familiar with the Angle Spray dispenser and therefore cant tell you the situations when notes are reported as going to an unknown destination.Mike



Summary:
When EPP and BAPE swapped the BAPE encryptor mode can be incorrect

Description:
On an SST with EPP attached the mode can be 1,2,3 or 4. If the EPP is removed and a BAPE attached, the encryptor type needs to be checked to ensure that the mode is valid. This change is being made to 2.05 - the mode will be set to 1 or 2 if a BAPE is present. This GRIT is for visibility of the change.



Summary:
Encryption Key Mode change screen has invalid key enabled

Description:
In Access menu function 25 you can change the key mode. Once the new mode has been entered you select 6 <ENT> to confirm the mode. Currently 6 <ENT> can be selected before the new mode has been entered. An update to the author has been made to resolve this. This GRIT has been raised to give visibility of the fix.



Summary:
A jam on enable should be handled similar to Upside Down Document.

Description:
If a Jam occurs while entering a document into the CPM then NDC should return the document using an eject rather than using the closed state. The close state does a lot of other things like return the card as well as the cheque. A jam can regularly occur due to the condition of cheques being entered. Gennerally they can be reinserted correctly the next time. Another outcome of this is some people have set the close state to clear so that the document is not ejected at all taking the CPM out of spec on number of documents it can handle and increasing feild calls. On the DPM NDC ejected the cheque after a jam.



Summary:
Include SNMP Agent 2.3.2 on Advance NDC CD

Description:
Updated SNMP agent is available.  Ensure this version is packaged with ANDC 3.0.  Confirm the licence level to be shipped with SNMP agent (1 or 13).



Summary:
Menu Option to select Fault Display should be changed from 0 to 26

Description:
Currently, Fault Display is selected from option 0 in the Select Menu.  However, feedback has been received that option 0 is used by some switch vendors.  So option should be changed to select via #26.



Summary:
VPI Comms does not install xml file on XP systems (PCCM and TCPIP)

Description:
No description



Summary:
Supervisor should have message buffer cleared periodically

Description:
No description



Summary:
Retry Timer and Reconnect on Close not set

Description:
No description



Summary:
Configure as Server - use Variant Array as global.

Description:
No description



Summary:
TCPIP Config XML file - Parameters must have value, not blank

Description:
No description



Summary:
Port No. coming out as 4 instead of 4005

Description:
No description



Summary:
Configure as Server - Need to check value using strcmp

Description:
No description



Summary:
TCPIP Configuration - Setting local port no. causes access violation

Description:
No description



Summary:
TCPIP config screens need further updates - modify Supervisor.mpj

Description:
No description



Summary:
After TCPIP Configured, shutdown

Description:
No description



Summary:
When sending data in SAFEARRAY to vpi comms set SAFEARRAYBOUND lBound to 0 not 1

Description:
No description



Summary:
Add details of new implementation for User Messages and Terminal Data controls

Description:
No description



Summary:
Do not default in code to TCPIP if registry key not set up since that introduces a protocol dep

Description:
No description



Summary:
KVV generation using EPP (workarond in th application)

Description:
No description



Summary:
EXUTIL functionality to be tested at Integration

Description:
EXUTIL is called by exits and so can only realistically be tested on a SV system with SV Exits



Summary:
TLFS update to say that full touchscreen is not supported in AANDC 3.0

Description:
FDK emulation only with XFS.



Summary:
IT6 is MV and EMV Exits wont work on MV - Need to write a dummy app to test EXUTIL

Description:
No description



Summary:
Comms Send results in send pending but send complete never called

Description:
No description



Summary:
Comms Open gives open pending but open complete comes back as not connected when it is opened

Description:
No description



Summary:
On PCCM - XML file not loaded up by VPi Comms even when its in the right place

Description:
No description



Summary:
On PCCM - XML file has wrong schema name reference

Description:
No description



Summary:
On PCCM - VPI XML file Not Installed and XSD installed in wrong place

Description:
No description



Summary:
change Primary link ID from AANDCPrimaryLink to TPA Connection for extra robustness on PCCM

Description:
No description



Summary:
Cardholder Keyboard in SV application is CEN-XFS not ADI2 based

Description:
Cardholder Keyboard in SV application is CEN-XFS not ADI2 based. Large part of the system has been developed to speak to CEN-XFS and moving back to speak to ADI2 would involve weeks of development effort, so CEN-XFS approach is preferable, including PIN entry. ADI2 will still be used for ENCRYPTOR support to allow full security functionality for SV customers. Use of CEN-XFS for SV application means some restrictions imposed on SV customers not imposed on them by 2.5 (dynamic keyboard redefinition not possible). Aim of product is to have as much common functionality as possible, and CEN-XFS based keyboard will be used eventually for SV customers when MV and SV become the same anyway. Need to be sure we are all comfortable with the impact on customers.



Summary:
Comms Buffering should be on at SOD

Description:
No description



Summary:
The AA NDC product needs to be tested fully with Security

Description:
Currently AA NDC 2.05 hasnt been tested with Security on NT or XP and in fact it will not work with security on an XP system due to the directories accessed.  This needs to investigated and resolved.



Summary:
AANDC: Upgrade to latest version of Leadtools (v13)

Description:
AANDC currently ships Leadtools v8.  The contract between NCR and LEAD was updated for Promote because Promote needed to use the latest functionality offered by Leadtools (v13).  Promote testing with AANDC found that Thread Local Storage (TLS) slots were being overrun, causing DLLs to fail to load.  This was primarily because Leadtools v8 uses up approx 22 TLS slots on its own.TLS slots are an area of memory set aside so you can share between different threads in a process.  NT has a limit of 64 slots per process, while W2000 and XP have a limit of 1088 slots.



Summary:
The AA NDC product needs to be tested as a full unattended and silent installation.

Description:
Currently AA NDC is tested using the unattended and silent installation process defined by NCR training.  As problems can arise following this method it would be best to find these prior to the field taking delivery of the product.



Summary:
Product Builder should have option to build install set before binaries are checked in to SI

Description:
use existing .LST files to create install tree from sandbox where compilation has taken place.



Summary:
Update OOXFS FS with changes to envelope status mapping.

Description:
No description



Summary:
TLFS to be changed to say that Alarms uses ADI2 for SVANDC

Description:
TLFS to be changed to say that Alarms uses ADI2 for SVANDC



Summary:
MSVCRTD should be linked with all dsps at Unit Test Time

Description:
Double deletes, memory overruns etc. will be detected if we link all our dsps with msvcrtd only for unit test. unit test generally exercises a large amount of the runtime code and would detect any spurious coding.



Summary:
Reboot should be performed after Configuring TCPIP Comms

Description:
Currently, using our internal TCPIP, a reboot is not required. However, VPI comms offers no way of refreshing a comms link with updated information other than by re-booting. i have raised RFC 236528 on VPI Comms to amend this but until that is available we cannot implement otherwise.



Summary:
Appbuilder updates for MV build

Description:
Modified to provide a SV or MV Application build



Summary:
Product Installer updates for MV/SV build

Description:
Modified to provide a SV and a MV runtime with one install.



Summary:
Product Builder updates for MV/SV build

Description:
Product builder dialogs need to change to reflect ANDC use.



Summary:
EKC Retrieve Hallmark key cannot be supported on NCR hardware as per TLFS description

Description:
EKC Retrieve Hallmark key cannot be supported on NCR hardware as not supported through CEN-XFS. This applies to a MV application. Need to confirm we can support it in a SV application. Phase 1* functionality catchup!



Summary:
Printer customisation DLL needs updated for potential source code release

Description:
action comments as per ..Fsdmapsappmapsapp2MV NDCDocumentsTechnicalCustomisation CodePrinting



Summary:
Fault Display should include the display of communication link faults

Description:
Fault Display should include the display of communication link faults.
Currently in MV AANDC 2.5, when the communication link is broken, the ATM goes out of service, however, no new fault appears on the rear panel. The comms is not between the monitored devices for faults.It is expected that customers (operators) might benefit by seeing communication faults on the fault display. With the new VPI comms implementation in Avance NDC 3.0, the status of the comms is already available in the system. The code that would have to added, would only read the status and display it.



Summary:
MV NDC - support Tamper Indication for depository and dispenser

Description:
TI for card not supported by IDC SP



Summary:
Advance MV NDC should run under a regular User account when APTRA Security component is installed

Description:
IT should include tests to run AANDC on a secured operating system. This should include running AANDC under a User account (as opposed to Administrator) and after NCR Security recommendations for WinNT/XP have been applied (APTRA Security component).Justification: Customers may reject our APTRA solution, should it need to run as the Administrator only. The APTRA platform already supports this requirement.Motivation: Hopefully this example can serve as another justification for the need of this RFC.My colleague, Jiri Tywoniak, is currently experiencing problems with AANDC 2.5, User account on XP, Aptra Security installed when Application Core will not start (probably some DLLs fail to load). The problem does not occur on NT.



Summary:
ANDC should be configurable for dispensing max 50 notes

Description:
Requirement ID AANDC31 21.164.
ANDC should be configurable for dispensing max 50 notes.

Proposed solution is to create new registry key to enable max notes dispensed of 50.  This registry key is optional, and will not be published.  Ensure solution will migrate to ANDC 3.xRequest received from Philippines to support dispense of 50 notes.  For Land Bank (300-500 ATM order).  Wincor & Omron hardware already support this functionality.Timescales: Pilot on ANDC 2.04 within next 2-3 weeks; roll-out on ANDC 2.05 in September 2003.



Summary:
Update Description of Extended Encryption Key Tests on BAPE

Description:
Tests for Extended Encryption Key needs to be updated to verify that if the command is run on BAPE keyboard, the comand is rejected.  (Ref RFC 233061)



Summary:
Add support for Wincors TestCash function which is similar to NCRs TestCash extension to WOSA.

Description:
Wincor supply a Test Cash function which is an extension to XFS 2.  It uses commandID CDM_SERVICE_OFFSET +42.



Summary:
2 unsols sent (E0, E5) after Retract when purge bin full.  Fix to remove E0 one.

Description:
This matches AANDC 2.5 and the data reported in each unsol is consistent however the E0 is really a duplicate covering information already covered by the Ready9 and the E5.ITS test 16.1.1.7 step 22 demonstrates this.



Summary:
Include CCM-PCCM package on ANDC installation CD

Description:
For PS ease of use of software installation, include the CCM-PCCM package on the CD.  They can decide whether to install it or not.ANDC 3.0 requirement.



Summary:
Include CCM-TCP/IP package on ANDC installation CD

Description:
For PS ease of use of software installation, include the CCM-TCPIP package on the CD.  They can decide whether to install it or not.ANDC 3.0 requirement.



Summary:
Support >999 screens

Description:
Required for multi-language environments such as APAC & Canada.  ANDC 3.0 requirement.



Summary:
Support 5305 ATM Product ID

Description:
Support of Easypoint 55 terminal ID.  ANDC 3.0 requirement.



Summary:
Support Low Cost Receipt Printer via XFS interface

Description:
Requirement for ANDC 3.0, for P77 and Entry Level hardware support.



Summary:
Support Low Cost DIP Reader via ADI2 interface

Description:
Requirement for ANDC 3.0, for P77 and Entry Level hardware support.  ADI2 interface, thus only available to NCR customers on SV application



Summary:
Support RS232 Spray Dispenser via ADI2 interface

Description:
Requirement for ANDC 3.0, for P77 and Entry Level hardware support.  ADI2 interface, thus only available to NCR customers on SV application



Summary:
Support RSA as per NDC+ 7.00

Description:
Requirement for ANDC 3.0, to provide RSA functionality via ADI2 interface.  Thus only available for NCR customers on SV application



Summary:
The Front Screen operator resolution should be configurable when no Operator Panel is attached

Description:
When the operator panel is attached, the front screen operator resolution is the same as operator panel resolution (consistency on the same ATM).When the operator panel is not attached, the resolution to use must be configurable (to enable consistency across ATMs with/without operator panels).



Summary:
The application needs to set a ulMaximum threshold on the Reject Bin (and Retract Bin if present)

Description:
CEN/XFS requires a ulMaximum threshold value to be set on all cash units that are refilled during cash in operation and on reject and retract cassettes. In our MV NDC case, this comprises the WFS_CDM_TYPEREJECTCASSETTE and WFS_CDM_TYPERETRACTCASSETTE.If this threshold is not set, REJECT/RETRACT bin HIGH unsolicited messages are sent to the host after the first REJECT/RETRACT.Solution: a new key is added in the MV AANDC registry areaHKEY_LOCAL_MACHINESOFTWARENCRAdvance NDCCurrencyTableRejectBinString Value: MaxBillsThresholdThis value is sent to the SP SET_CASH_UNIT_INFO when ClearCash operation is performed.



Summary:
Status handler command processing sequence doesnt work for other vendors

Description:
Currently the status handler expects commands and responses in a certain sequence which doesnt work for other vendors



Summary:
Cant uninstall AANDC 2.05

Description:
Error generated saying one of the component ini files does not have an Uninstall Section. Closer examination highlighted the component ini for SdcDIP was incorrect (Tninstall instead of Uninstall - spelling mistake).



Summary:
Supervisor Function to Set Registry Keys

Description:
As part of ANDC 3.0, there are several registry keys that needs to be set to make the product fucntion.  This RFC requests that a supervisor fucntion be created that allows the registry keys ot be set.



Summary:
NDC Cancel/Clear swap option doesnt make sense in MV environment - propose we remove it

Description:
Supervisor Data collection limits the position of the cancel / clear option on the rear based on platform configuration - the application has no control where these keys are positioned & so cannot change them dynamically - the same functionality has been implemented when supervisor is on the front. SP configuration would determine cancel/clear positions when on the front.  We are proposing the same applies to cardholder data collection - rely on SP setup as the keyboard will be modified for supervisor data collection - the swap option would change it back to what we dont want!



Summary:
Choice of build required for phase 1

Description:
choice & mechanism for building author apps to multi or single vendor target - Phase 1* & CD hard coded to MV target only.



Summary:
Functionality to update default Cardholder keyboard using host download cannot be provided - promote other mechanism

Description:
front keyboard functionality in CEN-XFS is more abstract than in ADI2 with the type of key being pressed returned rather than the key position. Modifying the position for a type of keypress is part of CEN-XFS configuration. Using an additional mapping based on an updated keyboard download would be confusing and difficult to provide. Suggest we promote SP configuration as a way of reconfiguring the keyboard layout rather than using a keyboad download. The default NDC keyboard definition will function without any re-configuration



Summary:
MV AA NDC: Operator Panel Display Minimal Resolution is 20 columns by 12 lines

Description:
The minimal TTU device display resolution of MV AA NDC is 20x12 (TTU is a text mode display). MV AA NDC supervisor screens cannot be displayed if the display is too small. The current SV AA NDC product requires EOP display (32x16). The resrvd.def file needs to be modified/customised for each TTU resolution. Branch Aid requires the same minimal resolution 20x12  to be able to display its menus to the operator.



Summary:
Provide supervisor tasks to perform local configuration of TCPIP (enter local & remote IP addresses) as part of the application supervisor.

Description:
The Comms Connection Manager 2.0 project cannot deliver a supv task for local tcpip config (local & remote IP addresses) in the timeframe reqd because it is dependent on a MV supv interface being available and there are no plans for this.     One of the contingency plans discussed at the risk review was for ANDC to provide local config via their respective supv. Apps.



Summary:
resource management updates for Pahse 1

Description:
ADI resourceIDs need to have negotiation methods stubbed, ooadi.h added to header as they no longer include from s4resourceID. Also add getVariant() method to provide functionality previously handled by Variant getter worker.



Summary:
Support For Hallmark Key Verification No Longer Required

Description:
Hallmark Key Verification no longer required (old functionality) need to remove references in Top Level FS (445-0669288)



Summary:
TLFS updates for Journal & Receipt

Description:
Updates for Journal and further for receipt.



Summary:
Error Logs & Tallies (terminal cmds) cannot be returned for MV application - TLFS update

Description:
Currently tallies and error log are obtained through system monitor & cannot be returned through CEN-XFS. If we need this info on NCR machines through a MV application we will be breaking the rule that a MV application only speaks to CEN-XFS. THe SV app is intended to cover NCR specific dependencies which require a proprietary i/face to be used. Enhanced status handling in a MV app is achieved through CEN-XFS so is OK.



Summary:
MV NDC: Support SNA on other vendors hardware

Description:
MV NDC application should support SNA on other vendors hardware.



Summary:
MV NDC: Support X.25 on other vendors hardware

Description:
MV NDC application should support X.25 on other vendors hardware.



Summary:
Dial-up Diags ? provide VI diagnostics (local).  SST UI will talk to axfs ttu, pinpad and win32 gui.

Description:
pre-ccb meeting on 31/1/3 agreed to accept for ccm - dial-up 2.0 package => dependency on axfs.Diag Tests provided should be same as those provided via ANDC app supv so no need for key diskNeed to specify actual boards that will be supported and, if more than 1 board, then how a particular board will be specified, eg user interface asks user which board is installed



Summary:
Dial-up Diags ? provide reset modem diag test

Description:
pre-ccb meeting on 31/1/3 agreed to accept for ccm - dial-up 2.0 package



Summary:
Dial-up Diags ? provide query modem diag test

Description:
pre-ccb meeting on 31/1/3 agreed to accept for ccm - dial-up 2.0 package



Summary:
Dial-up Diags ? provide check dial tones diag test

Description:
pre-ccb meeting on 31/1/3 agreed to accept for ccm - dial-up 2.0 package



Summary:
Dial-up config ? provide VI run-time config (local).  UI will talk to axfs ttu/pinpad and win32 gui (ie SST live UI only)

Description:
pre-ccb meeting on 31/1/3 agreed to accept for ccm - dial-up 2.0 package => package will have a dependency on axfs or need to include axfs. Config params specified in Dial-up diags & config FS <\sgbdun016commsdocumentreviewConnection_Manager[Unicode-x0C]unctional specificationDialUp%-0667427A0.doc>



Summary:
Dial-up config ? provide pre-config (via aggregate builder). Config params specified in Dial-up diags & config FS

Description:
pre-ccb meeting on 31/1/3 agreed to accept for all ccm - dial-up 2.0 package if schedule permits else just tell people to modify the config file for 1st out.  See draft FS for details<\sgbdun016commsdocumentreviewConnection_Manager[Unicode-x0C]unctional specificationDialUp%-0667427A0.doc>



Summary:
Dial-up config ? ensure compatibility with existing remote config methods

Description:
Dial-up config - ensure compatibility with existing remote config methods (ie download config file & reboot) by maintaining existing config params file details & documenting config params file details See draft FS for details<\sgbdun016commsdocumentreviewConnection_Manager[Unicode-x0C]unctional specificationDialUp%-0667427A0.doc> pre-ccb meeting on 31/1/3 agreed to accept for all ccm - dial-up 2.0 package.



Summary:
Hard copy backup reprint starts after the first good print, not before it.

Description:
A good print is required before hardcopy reprint is started - I think per NDC+ the reprint should be printed before the next good print so that all prints are in sequence. Currently we do not have a way of dertermining printer fitness with out sending an actual print.



Summary:
Need support for Cash TI Sensors in OOXFS to allow detection of tampering in MV AANDC app

Description:
Cash TI Sensor support required in OOXFS to allow functionality of Cash TI workers to be implemented. Problem is with detecting which cassette was removed and mapping it to the physical positions that NDC uses. This problem has been resolved in OOXFS as part of status handling functionality & makes sense to reuse for Cash TI Sensor support.



Summary:
Update TestCash when moving to support XFS 3.0

Description:
TestCash uses proprietary NCR extension to XFS2.0 - this will need updating before going to XFS3.0 (as well as needing to remove all manual Stack-Reject code which is needed for other SPs just now).



Summary:
Consolidate use of Cassette Mapping class.

Description:
The Cassette Mapping class is used in both Cash Handler and OOXFS.  There are two copies of this which are slightly different - this could be made into one version at some point.



Summary:
Support Graphics controls with filenames only

Description:
MV NDC will not support printer graphics controls that required graphic file expansion as the format for each vendor cannot be predetermined. MV ANDC will only support graphics where the vendor SP is supplied a filename and the SP performs the expansion. Where customers required expansion in the MV application, source of conversion DLL may be provided.



Summary:
Coupon Printing defered to phase 1

Description:
As NCR SP does not support Graphics printing from forms the implementation of coupon printing will require to be changed. Also Coupon printing is used by Promote only in advance NDC - promote is not to be supported in MV ANDC at phase 1*



Summary:
New Workers for MV ANDC to be added to Reciept Printing in TLFS

Description:
Two new workers are available in MV ANDC, NDC Print Footer & NDC Print Coupon. These workers replace the functionality of Normal Receipt Page / Graphics Print Paragraph as found in APTRA Advance NDC 2.04 Customisation layer. see \sgbdun100orgshareFsdmapsappmapsapp2MV NDCDocumentsTechnicalReceiptsReceipt Printing RFC details.doc



Summary:
All AB compliant packages must include the aggregate builder component and 3rd party runtime component.

Description:
No description



Summary:
Aggregate cd labels should include basic instructions - run setup. from root directory

Description:
No description



Summary:
C00 Screen does not display if language offset applied

Description:
C00 screen (More Time screen) does not display correctly if language is not English. Found during EMV System Test Plan testing



Summary:
Test 3.3.7.2 Card write failure due to invalid track 3 data stops dispense in NDC+ not AA-NDC

Description:
If there is a card write failure in NDC+ due to invalid data in the txn reply, this stops cash being dispensed as the transaction is believed to have failed. In AA-NDC the cash is dispensed despite the card write failing



Summary:
Author bug - When a worker is selected and you attempt to open th eworker dialogue

Description:
You get a no selection. When you subsequently select the locate tab, you get an access violation



Summary:
Update Presentation Client to support presenting coupons without an associated display

Description:
No description



Summary:
Include options for navigating back from Promote menu in Supervisor

Description:
No description



Summary:
Invalid behavour from AANDC when invalid track 1 and 2 data downloaded

Description:
Found by HCL



Summary:
MV NDC: Fault Display Information should Differentiate between FLM & SLM

Description:
The fault information provided should be sufficient to allow the financial institution to differentiate between FLM and SLM. No attempt to differentiate between FLM and SLM is necessary in the application as this will depend on local service agreements.The fault information should indicate the device in error, and if possible what the error condition is



Summary:
improper reporting of replenishment data when printed of the journal (unsol)

Description:
Found by HCL.



Summary:
3.8.7.2	12-character amount buffer and no Track 2 card data.

Description:
NDC+: Data printed on the envelope in default format : 1910       99.95 1910*                                06/24/02  21:28:30  AANDC: Card Rejected ( without even asking for PIN ).



Summary:
3.8.7.1	Default config, Track 2 card data <= 30 characters.

Description:
NDC+: Data printed on the envelope in default format : 1910   99.95 1910*013301330133013301330133013345  06/24/02  21:28:30  AANDC: Transaction serial number printed 10 times on the envelope : 0016 0016 0016 0016 0016 0016 0016 0016 0016 0016



Summary:
3.8.5.4	Multiple txns (3) with envelope bin overfill condition => fatal.

Description:
Unsol recvd differed only in diagnostic data for first & second transaction but for third transaction , only one solicited messg received in NDC+ whereas both a sol and an unsol reported in AANDC. Details of messgs received for third trans are :: AANDC :   Trans Req Messg ; Unsol : 12|000||F0|4|114400800000010000000101|4 ; Sol : 22|000||8|F4|4|114400800000010000000101|4 ; NDC+ :  Trans Req Messg ; Sol : 22|000||8|F4|4|11C400800000010000000101|4 ;



Summary:
MV NDC: Support EPPE

Description:
EKC Emulation mode required.  Required by Postbank Netherlands



Summary:
MV NDC: Installation over existing live AANDC application on ATM

Description:
MV NDC should be able to be installed over an existing live AANDC installation on an ATM.



Summary:
MV NDC: Installation over existing AANDC application on development PC

Description:
MV NDC should be able to be installed over an existing AANDC installation on a development system(ATM/PC)



Summary:
Installer:Registry entries in config.msi does not match SNMPAgt.msi

Description:
The installer SNMPAgt.msi does not work with a transform file as the registry entries in config.msi does not match that of the SNMPAgt.msi



Summary:
CiAgent: No exception data generated in the startup trap after a system escape.

Description:
No exception data is generated in the startup trap after a system escape. The source name is changed from UEH to NCR UEH.



Summary:
FS for AANDC Supervisor Mode: Print Cash Acceptor Config (12.6.21) section needs clarification.

Description:
FS for AANDC Supervisor Mode for the Enhanced Operator Panel (445-0633787): in section 12.6.21 (Print Cash Acceptor Config) it is not clear that if neither a receipt or journal printer is configured error message DEVICE NOT CONFIGURED is displayed  (as per 12.5.2 Print Config).



Summary:
MV NDC: Support for Problem Determination

Description:
Support for Problem Determination should be included to enable debug on NCR and other Vendors H/W.  Further clarification from meeting on 9 Apr 03:PD tracing to be added for Message In/Message Out/State Data and XFS calls ? this would give context for XFS calls.  This functionality will be available for the MV application only.  To support this, a new supervisor option is required to switch tracing on & off.



Summary:
MV NDC: Detailed comparison testing with NDC+/AANDC should be performed

Description:
Detailed comparison testing with NDC+/AANDC should be performed to ensure that the MV NDC solution behaves in the same way as NDC+/AANDC



Summary:
MV NDC: Certification is to the CEN XFS 3.0 interface.

Description:
Certification is to the CEN XFS 3.0 interface. Testing will be carried out on NCR H/W, but it is recognised that in-house testing on another vendors h/w may not be possible.



Summary:
MV NDC: must recover from s/w exceptions through a reboot of the unit

Description:
MV NDC must be able to recover the system from s/w exceptions through a reboot of the unit



Summary:
MV NDC should support the Aggregate Installer

Description:
As above



Summary:
MV NDC should support a Silent Unattended Installation

Description:
As above



Summary:
MV NDC: Same customer and operator interfaces as AANDC 2.04

Description:
Same customer and operator interfaces as AANDC 2.04, see Req 12.1



Summary:
MV NDC must provide first line maintenance functions and access to second line maintenance

Description:
MV NDC must provide first line maintenance functions as per AANDC. It must also provide an XFS compliant mechanism for accessing second line maintenance functions on NCR and another vendors h/w.



Summary:
MV NDC should not adversely Impact the overall availability of the H/W

Description:
As above



Summary:
MV NDC: EMVCo L2 approved solution

Description:
Provision of EMVCo L2 solution for single vendor application only.Support for MV application for future release



Summary:
MV NDC: Support TK1/2/3 Smart Card reader/writers

Description:
Support TK1/2/3 Smart Card reader/writersFrom RevB Requirements - this is hardware support only, to allow magnetic operations on SCRW



Summary:
MV NDC: PS require a usable XFS simulator for rapid prototyping of appln changes.

Description:
Edge currently uses the ADI device simulator + XFS SPs to simulate an XFS environment. Same approach will be used for MV AANDC, although not officially released, and will not form part of the product



Summary:
MV NDC should support APTRA Promote in the same way as AANDC 2.04

Description:
As above



Summary:
EMV Test 5.1.12 - Fails as ValidateMappingTable does not check for lowercase hex digits

Description:
Apparently NDC+ distinguishes between lower & uppercase when a DCCMT is downloaded - AANDC currently does not



Summary:
ATL.DLL removed from build - causes implications for APTRA Advance NDC

Description:
No description



Summary:
Applicationcore is too big to build

Description:
See GRIT 223446 raised on AA-NDC. The author runs out of heap space building applicationcore. A successful build can be done by ramping up the value in mscript.makfrom /Zm200 to /Zm400.



Summary:
GetEnv should be registered automatically when installimng sample app

Description:
No description



Summary:
RFC: Provide support for IMCRW in NATIVE mode for Aptra Advance & Aptra Advance NDC

Description:
The new RS232 IMCRW is capable of running to two Modes, SPOOF & NATIVE.  In NATIVE mode it provides an additional interfaces to the NEW IMCRW Security/SAM/Contactless SC features through the MCRW service with additional variants



Summary:
Multiple MCRW M_Status 5 reported in the event and device logs

Description:
There are multiple M_Status 5 (No card in reader at start of command) with an M_data 29 00 00 00 (write card) appearing in the device and event logs. This may be part of TAR 164300.software installed on the SST:Windows NT4  SP6Internet Explorer 5.5MDAC 2.1Aptra XFS 1.2         Aptra Self Service Support 1.3         Aptra 3rd Party Runtime 1.1Aptra Advanced NDC 2.3



Summary:
AANDC System Escapes when using encryptor with no keys entered

Description:
When doing reliability testing on the P77 it was discovered that AANDC system escaped when doing encryption with no keys entered. On an OS/2 system NDC+ reports an error but stays in operation. The two systems should be compatible.



Summary:
Banksys PIN block only partly supported

Description:
Although the IPs say that Banksys is supported and there is some author work for the Banksys PIN block, worker id 10r44r1 does not test for the Banksys pin block as a supported pin block, therefore it would never work. Also the authored work for this pinblock looks wrong.



Summary:
Performance test does not meet target

Description:
This GR1T was originally raised on p77 R/A project (GR1T 218952) by David McLuskie/Ian Cranston and is now being transfered to AA NDC project. Was Gr1t 221615.



Summary:
NDC Printer Initialiser

Description:
NDC Printer Initialiser does not send down K03 to the statement printer.



Summary:
SST runs out of disk space for logging journal data

Description:
In AANDC, Enabled hard copy backup with values of option 16 = 255 and option 17 = 255, Copied ejdata.90p and renamed it to hbdata.log. In order to make it full size some transactions were done , the data was getting logged in the file however  on doing more transactions there was a system escape when the size of the file was 1400968 kB .No unsol was reported. IN NDC+, Enabled hard copy backup with values of option 16 = 255 and option 17 = 255 , performed a transaction with no paper in journal , restarted the terminal , replaced hbejdata.log with hbejdat.ful and renamed it to  hbejdata.log.start ndc+ by running s4_start, we got an H! after power up message , do a transaction ,H1reported.



Summary:
Wrong values coming in Time field of EJ UPLOAD message on retries

Description:
During EJ Upload, if an acknowledgement is not received for a perticular message , it is send again . This is fine. bUt each time a retry is made ,it should have the date and time when the block was sent .This is not happening. It seems to take the date and time of the 1st message for which retry is expected.



Summary:
Abrupt behaviour while trying to reactivate EJ Upload after mismtach of last char received

Description:
For AANDC, in case of mismatch between last char recieved value and equivalent value in ACKSTOP, though the upload stops, but it behaves abruptly on trying to renable ej upload .At times, after sending a valid ackup it resume upload after some time  and at times ejupload just stops,doesnt gets activated even after resending the ackup or resending of Optim message. Once we even had to clear NVRAM and reboot the system .



Summary:
Journal data is not reprinted on exit from supervisor

Description:
This is linked to Gr1T 221266 which relates to journal printer fitness being cleared on exit from supervisor. This should be fixed once this Gr1T is fixed.



Summary:
Options 16 & 17 downloaded with maximum values (255)

Description:
No unsol is reported.



Summary:
Backup hours limit breached (check unsol).

Description:
Keeps on logging even after record Limit is exceeded , no unsol is received when the limit is breached.



Summary:
Backup hours limit breached (check unsol).

Description:
H9 is received on limit breach .but with every other transaction done(that requires a print on journal)an H9 followed by an H6 is received, but logging remains halted.



Summary:
Options 16 & 17 when both sent (check the first one to be breached is processed

Description:
keeps on logging even after Option 17 Limit is exceeded , no unsol is received when the limit is breached.



Summary:
Options 16 & 17 downloaded with zero values after backup has been active and reprint data e

Description:
Backup stops but no unsol is reported.Reprint happens on replenishment of paper but no unsol is reported.



Summary:
Revert to paper journal (without backup) after using backup

Description:
No Unsol reported for reprint halted.



Summary:
Power up after NVRAM cleared when reprint data existed before power fail and backup file is still present on SST.

Description:
Put the terminal Out of Service and downloaded message ?MSG1617S? .Again performed a FastCash Transaction . removed paper, we got an Unsolicited message for Journal Printer with Device Status ?6?,followed by Unsolicited message for Journal Printer with Device Status ?8?!!! Again performed a FastCash Transaction . Reset NVRAM,Restarted the terminal after switching OFF the Power. Restarted AANDC Repeated  the Cash Withdrawal Transactions went to Supervisor mode and replenished the paper in Journal Printer. no reprint happens after that.it simply starts logging on the journal printer.



Summary:
Add support for Access Control Dialog in PIN Entry States for AA NDC 2.4

Description:
REQUIRED FOR APTRA PROMOTE 1.1Due to change in Dialogs for APTRA InterfacesTransfered from 221074



Summary:
Card Before Dispense & Print: incorrect behaviour from AANDC when invalid track 3 data sent.

Description:
Test 3.4.2.1 - FAIL. Invalid track 3 data sent in Txn. Reply: NDC+ sends MCRW solicited (22-000--8-D4---1); AANDC completes txn (dispenses cash & delivers receipt) and does not report any error.



Summary:
Additional MCRW unsols from AANDC after failed card capture in previous transaction.

Description:
Test 4.1.5.4: After a card has been jammed during capture with card retain flag set, following PIN entry on the next txn AANDC sends 3 MCRW unsols: 12-000--D1-0-000D02000A-0, 12-000--D1-0-000B02000C-0, 12-000--D1-0-000C020000-0. NDC+ does not send these.  Run test 4.1.5.4, clear MCRW in diagnostics, then do another txn (both using NXTPRNT3).



Summary:
Option for cheque image print to be added to CPM cheque accept state

Description:
A new state parameter needs to be added to the Cheque Accept state to switch the printing of a cheque image on or off. The new parameter would be a flag set to 000 or 001.



Summary:
Provide a Silent Debug utility for use on live ATMs - an alternative to DebugLog windows app

Description:
Provide a Silent Debug utility for use on live ATMs - an alternative to DebugLog windows app.

Requirement details (for consideration)...
1) Provide an alternative utility to DebugLog windows application that can be used for capturing trace information on live ATMs - so called Silent Debug Utility.
A) Utilise existing code of silent debug from Malaysia
B) This utility should be able to capture the trace information that is generated by Advance NDC using DebugMessage senders, DebugOut class, or XfsTrace class into hard disk file(s).
C) If DebugLog windows application is started - the trace information can be seen in the DebugLog windows; if silent debug utility is started, the trace information is stored into hard disk files (based on its configuration).
D) The trace information should contain time stamp.
E) It should be possible to tell the date of the trace information. 
F) Possibility to have one trace file per one date.
G) Possibility to configure which trace streams (DebugLog windows) are stored in the file(s).
H) Possiblity to create a merged stream (all DebugLog windows) into one file.
I) Possibility to have a max size per file - if exceeds, starts to wrap round.

2)  Improve the way Advance NDC stores trace information into DebugLog by providing a record-based trace as opposed to the current "free text".

3) Investigate performance of the current implementation in Advance NDC. Compare DebugLog windows application and silent debug. Check if the code on the ANDC side that uses pipes can be further optimised. 

4) Provide clear steps for Advance NDC users for capturing trace information on ATMs - investigate the possibility to add another SUPERVISOR menu that would switch debug log on/off and switch silent debug utility on/off. This could also include functions to transfer these files onto removable media. I expect this it out of scope for this activity, but we can discuss.

The old Summary and Detailed Description follows...
Summary Description - RFC Debug Logging Performance
Detailed Description - Debug Logging affects application performance even when debug log is not running. Suggest having Final versions of Debug dll and COM control which are stubs (no operation). Logging can be easily applied if required by intstalling the functional versions.Level 4 due to high impact though implementation is trivial.



Summary:
Timeout state not entered when expected in CPM

Description:
When the CPM is enabled and the user is prompted to enter a cheque, if a cheque is not entered in a specific time period, the timeout state should be entered and the user should be asked if more time is required. Instead, the close state is entered and the users card is returned. This seems a very abrupt thing to do. The BNA is implemented such that the timeout state is entered and only when it times out, or the user selects no when prompted for more time does the transaction enter the close state.



Summary:
AA-NDC DisplayNestedScreen function does not validate screen format it is displaying

Description:
The bank have found a problem when displaying nested screens during a transaction.  The DisplayNestedScreen function in NDCFUNS should validate the format of the screen it is displaying - the screen should only have two nested screens (SO XXX SO YYY) if it is not in this format it should not try to display the screen.  NDC+ ignores the invalid data and does not display anything.



Summary:
Update Advance ADE Installer to enable silent or at least unattended installation.

Description:
This should entail just splitting out the sample app installation from the main one, although there may be some extra work in making the Add User dialog silent too.  This is very important for the Aggregate Installer to work properly - required by end of the year.



Summary:
The p86 Currency dispenser is different from the 56xx dispenser and hence PROM

Description:
The 7 cassette functionality should be tested on the p86 currency dispenser



Summary:
If 7 Cassette types is enabled on a p86 then this is persistent over re-boots

Description:
We rely on the 7 cassettes types being disabled over reboots to allow customers to go back to 4 cassette type mode.There has been talk with the dispenser group to change this p86 behaviour to be consistent with the 56xx behaviour



Summary:
Provide debug tool thatcan be used in the live environment

Description:
This requirement was highlighted in TAR RFC 167748 which requested that Debuglog be certified for use in the live environment. That request was rejected because debuglog is unsuitable but the general requirement was accepted and this RFC raised. Recommendation is that Problem Determination is used in the final solution.



Summary:
For NDC 2.3 All SSDS Controls (i.e. Message Handler) will have to be rebuilt

Description:
This is because Control Builder has changed in ADE 1.1. These changes will only be picked up if all controls are rebuilt. The release doc for 2.3 should also reflect the fact that all customers will have to rebuild their controls



Summary:
Provide UNINSTALL feature on SST for Advance NDC and Advance ADE

Description:
Follows on from a problem call from Dale Sherman of US. He thought it would be nice if an UNINSTALL feature was supported. It would also ease his test burden. Before closing the call he required an RFC no.



Summary:
ANDC 13.13: Add support for Dual Mode Journalling.

Description:
Reference is ANDC 11.13.Add support for Dual Mode Journalling as it has been defined for NDC+ i.e. allow journal messages to be sent to the electronic journal as well as the paper journal.This is required by Postbank (Netherlands) although it is not as urgent as their other requirements.



Summary:
Test for Unattended Installation during the 2.1 Integration Test

Description:
No description



Summary:
50798170 - Corrupt EJData file causing the application crash.

Description:
An issue was reported with the persistent restarts. When using the customers EJData.log.

The customer is on AA-NDC 03.04.02 and we are able to re-create the issue on the virtual machine if we use the data folder from the customers ghost image.

The customer deleted the EJData.log and the application started fine in the supervisor mode.

The customers EJ backup mode isan Standard d the maxfile size is 1374 and the upload is host controlled.

I have the issue created on my VM and can be created on any machine by using this EJData.log.

The customer wants to know why deleting the EJData.log stopped the persistent restarts.

The size of the file on the customer image was 1.21mb and the maxfile size is 1374.







Summary:
TIR to provide RFC 426070 (Pick Failure Error Severity is different between AANDC 03.04.00 and older version) on AA-NDC 03.04.01

Description:
GEMs ID 000000052388848 - Type 2 or 3 cassette blocked and fatal error but no fatal message sent to Gasper
AA-NDC have provided a test version of StatCust.dll (dated 12th Sept 2012) and EFSS have tested it as follows :-

Firstly recreated the issue by blocking Cassette Type 1 and attempt to dispense a note from it and the Solic message had Cassette Type 1 with Severity 0.
Then copied on the new StatCust.dll (dated 12th Sept 2012) and re-tested.
On 1st attempt cassette type 1, severity 1 sent in Solic message. AER tried to clear it.
On 2nd attempt cassette type 1, severity 2 sent in Solic message. AER tried to clear it.
On 3rd attempt cassette type 1, severity 4 sent in Solic message. AER tried to clear it.
On 4th attempt cassette type 1, severity 4 sent in Solic message. No AER.
Unblocked the cassette and performed a dispense.

Therefore the test version of StatCust.dll resolves the issue and this JIRA is a formal request to deliver it.



Summary:
Command is rejecting when ITR_001 message is sent as a transaction reply.

Description:
Test case from: CAM2 SysTPlan 0.19 021210.doc provided by EMV team.
Pre-Requistes:
1. Set up the EMv with above mentioned software stack.
2. Write the card data 47(CD_047) to the ICC card.
Steps to Re-Create the issue:
1. Start the Application.
2. Load the EMV downloads & send "DL_001".
3. Send the ST_067 & GIS.
4. Enter ICC card cd_047 & enter the pin 1234.
5. select the balance transaction.
6. send the ITR_001 message as a transaction reply.
Expeted Result:
7. INTERACTIVE TRANSACTION REPLY WITH CAM DATA - ITR_001 will be displyed to the card holder for apprximately two seconds and then 015EN PLEASE WAIT Screen will be shown 
8. A Transaction Request will be sent to PASCOM:
11<FS>000<FS><FS><FS>1x<FS><FS><FS><FS><FS><FS>T<FS>
Observed Result: 
Exppected screen INTERACTIVE TRANSACTION REPLY WITH CAM DATA - ITR_001 is not displaying & ITR_001 command is rejecting.
As Raj, Ciby(EMV Team) suggested i have tested this on previous(04.01) release & it is working fine.



Summary:
'LAST DISPENSED COUNTS ARE UNKNOWN' 'CAUTION-CASH COUNTS MAY BE INACCURATE'  is not journalled When CDM present status is unknown.

Description:
Test case No: 5.5.53.1.2.3
Test case from: GR1T 481860_UTS.doc

Issue : 
As mentioned in the test case power off the machine when notes are in Transport.
Restart the machine and re-run the application.
The following screen is not printed on journal. 
"LAST DISPENSED COUNTS ARE UNKNOWN"
"CAUTION- CASH COUNTS MAY BE INACCURATE"

Attached logs & test case with Bug.



Summary:
NOTES DETETED AT EXIT SLOT must be output when notes are at exit slot and recovery is not started due to LeaveNoteAtExit or CashInNotesAtExitOrAtStacker configuration

Description:
The behaviour should be:
1. NOTES DETETED AT EXIT SLOT must be output always when notes are at exit slot and Recovery is started 

2. NOTES DETETED AT EXIT SLOT must be output when notes are at exit slot and recovery is not started due to LeaveNoteAtExit or CashInNotesAtExitOrAtStacker configuration.

3. NOTES DETECTED IN THE STACKER must be output always when notes are in the stacker and Recovery is started 

4. NOTES DETECTED IN THE STACKER must be output when notes are in the stacker and recovery is not started due to CashInNotesAtStacker or CashInNotesAtExitOrAtStacker configuration.

As far as I tested 2 and 4 is not accomplished.



Summary:
When "SilentDebugAutoTraceStart" is set to "0", P21 supervisor entry message is sent to MESSAGEOUT log after R09 message.

Description:
1) Set SilentDebugAutoTraceStart is 0
2) Edit SilentDebug.ini which is placed in Advance NDC\config) as following
     MAXFILESIZE=10000
     TRACE=DEBUG,OOXFS,MESSAGEOUT,MESSAGEIN
     MERGEDTRACE=0
     LOGBYDAY=1
3) Open the application and enter into supervisor mode
4) Start the silentDebuglogging
5) Verify the debug logging,it contains DEBUG_<day>.log and OOXFS_<day>.log 
6) Exit from supervisor
7) Verify MESSAGEOUT logging after exit from supervisor
Expected Result:MESSAGEOUT_<day>.log should be  created, and contains unsolicited  Supervisor KeyPress messages
12<fs>000<fs><fs>R09
12<fs>000<fs><fs>P20

Observation: MESSAGEOUT_<day>.log  is created and contains unsolicited Supervisor KeyPress messages
12<fs>000<fs><fs>R09
12<fs>000<fs><fs>P21 
12<fs>000<fs><fs>P20






Summary:
Audio from videos played in idle loop continues playing in language selection

Description:
With Card or Cardless transaction, the audio played at idle screen is being forwarded to language selection screen.
Steps to Reproduce :
1)Copy Chap.mpg,Atm.mpg,Merc.mpg AVI files to C:\ssds\dll
2) Set 
HKEY_LOCAL_MACHINE\SOFTWARE\NCR\Advance NDC\Extensions\Cardless Transaction 
Next State Number string "018" 
Track 2 Data string
Track2 data to be stored in Track2 field for cardless transactions.
Default = ;999999999999999999=0606?
Active FDK Mask dword 0x01
Active PIN Pad Key Mask dword 0x00
3)Start Application & load ANDC_MV_COE9 message fileSend Messages OOS to GIS.
4)Audio is being played at idle screen.
5)Press FDK A

Expected Result :
6)The Audio played at idle screen should be stopped. & Language selection screen should be displayed.

Observed Result :
6)The audio played at idle screen is continued to language selection screen. 
Press CANCEL key , but still able to hear voice at "PLEASE TAKE CARD" screen.

Attached the TAR362884.rar file which i used it for testing.
Attached logs with the Bug.

Note : This test is not related to VG, but the audio played at idle screen is not being stopped even the state is changed from idle state to language selection state.



Summary:
CI609285 : Occurence of Auto Voice control code in screen data causes exception while performing a Voice Guided transaction.

Description:
When such a screen having Auto Voice control codes is encountered during a Voice Guided transaction, application throws an exception.
 
Customer have state flow as follows :
Applica.. 02/09/2012 17:46:10.578 [000] [A] Card Read
Applica.. 02/09/2012 17:46:26.343 [002] [_] Expanded FIT Switch
Applica.. 02/09/2012 17:46:26.343 [251] [Y] 8 FDK Selection
Applica.. 02/09/2012 17:46:26.343       Screen Number           [131]

State 251 references screen 131 whose definition is as follows:
{ESC} (1 {FF} {ESC} P0131;1 {ESC} \ {SI} @@ {ESC}[80m {SI}@@ {ESC} PEscr131.jpg {ESC} \

The control code format "{ESC} P0{screen number};1 {ESC} \ " is documented as a supported Auto Voice Control code in table 3-15 in AANDC Reference manual and should ideally be ignored when a Voice Guided transaction is performed.
Hence, raising defect on product.



